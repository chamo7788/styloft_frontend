(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function pN(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var wE={exports:{}},ur={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XP;function sq(){if(XP)return ur;XP=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function d(J){return J===null||typeof J!="object"?null:(J=f&&J[f]||J["@@iterator"],typeof J=="function"?J:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function w(J,ie,he){this.props=J,this.context=ie,this.refs=_,this.updater=he||p}w.prototype.isReactComponent={},w.prototype.setState=function(J,ie){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,ie,"setState")},w.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function b(){}b.prototype=w.prototype;function C(J,ie,he){this.props=J,this.context=ie,this.refs=_,this.updater=he||p}var M=C.prototype=new b;M.constructor=C,g(M,w.prototype),M.isPureReactComponent=!0;var A=Array.isArray,k=Object.prototype.hasOwnProperty,O={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(J,ie,he){var $,ge={},pe=null,we=null;if(ie!=null)for($ in ie.ref!==void 0&&(we=ie.ref),ie.key!==void 0&&(pe=""+ie.key),ie)k.call(ie,$)&&!R.hasOwnProperty($)&&(ge[$]=ie[$]);var ke=arguments.length-2;if(ke===1)ge.children=he;else if(1<ke){for(var Pe=Array(ke),je=0;je<ke;je++)Pe[je]=arguments[je+2];ge.children=Pe}if(J&&J.defaultProps)for($ in ke=J.defaultProps,ke)ge[$]===void 0&&(ge[$]=ke[$]);return{$$typeof:r,type:J,key:pe,ref:we,props:ge,_owner:O.current}}function D(J,ie){return{$$typeof:r,type:J.type,key:ie,ref:J.ref,props:J.props,_owner:J._owner}}function E(J){return typeof J=="object"&&J!==null&&J.$$typeof===r}function B(J){var ie={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(he){return ie[he]})}var U=/\/+/g;function V(J,ie){return typeof J=="object"&&J!==null&&J.key!=null?B(""+J.key):ie.toString(36)}function X(J,ie,he,$,ge){var pe=typeof J;(pe==="undefined"||pe==="boolean")&&(J=null);var we=!1;if(J===null)we=!0;else switch(pe){case"string":case"number":we=!0;break;case"object":switch(J.$$typeof){case r:case e:we=!0}}if(we)return we=J,ge=ge(we),J=$===""?"."+V(we,0):$,A(ge)?(he="",J!=null&&(he=J.replace(U,"$&/")+"/"),X(ge,ie,he,"",function(je){return je})):ge!=null&&(E(ge)&&(ge=D(ge,he+(!ge.key||we&&we.key===ge.key?"":(""+ge.key).replace(U,"$&/")+"/")+J)),ie.push(ge)),1;if(we=0,$=$===""?".":$+":",A(J))for(var ke=0;ke<J.length;ke++){pe=J[ke];var Pe=$+V(pe,ke);we+=X(pe,ie,he,Pe,ge)}else if(Pe=d(J),typeof Pe=="function")for(J=Pe.call(J),ke=0;!(pe=J.next()).done;)pe=pe.value,Pe=$+V(pe,ke++),we+=X(pe,ie,he,Pe,ge);else if(pe==="object")throw ie=String(J),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return we}function te(J,ie,he){if(J==null)return J;var $=[],ge=0;return X(J,$,"","",function(pe){return ie.call(he,pe,ge++)}),$}function ee(J){if(J._status===-1){var ie=J._result;ie=ie(),ie.then(function(he){(J._status===0||J._status===-1)&&(J._status=1,J._result=he)},function(he){(J._status===0||J._status===-1)&&(J._status=2,J._result=he)}),J._status===-1&&(J._status=0,J._result=ie)}if(J._status===1)return J._result.default;throw J._result}var ue={current:null},ne={transition:null},oe={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:ne,ReactCurrentOwner:O};function q(){throw Error("act(...) is not supported in production builds of React.")}return ur.Children={map:te,forEach:function(J,ie,he){te(J,function(){ie.apply(this,arguments)},he)},count:function(J){var ie=0;return te(J,function(){ie++}),ie},toArray:function(J){return te(J,function(ie){return ie})||[]},only:function(J){if(!E(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},ur.Component=w,ur.Fragment=t,ur.Profiler=i,ur.PureComponent=C,ur.StrictMode=n,ur.Suspense=l,ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,ur.act=q,ur.cloneElement=function(J,ie,he){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var $=g({},J.props),ge=J.key,pe=J.ref,we=J._owner;if(ie!=null){if(ie.ref!==void 0&&(pe=ie.ref,we=O.current),ie.key!==void 0&&(ge=""+ie.key),J.type&&J.type.defaultProps)var ke=J.type.defaultProps;for(Pe in ie)k.call(ie,Pe)&&!R.hasOwnProperty(Pe)&&($[Pe]=ie[Pe]===void 0&&ke!==void 0?ke[Pe]:ie[Pe])}var Pe=arguments.length-2;if(Pe===1)$.children=he;else if(1<Pe){ke=Array(Pe);for(var je=0;je<Pe;je++)ke[je]=arguments[je+2];$.children=ke}return{$$typeof:r,type:J.type,key:ge,ref:pe,props:$,_owner:we}},ur.createContext=function(J){return J={$$typeof:a,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:s,_context:J},J.Consumer=J},ur.createElement=I,ur.createFactory=function(J){var ie=I.bind(null,J);return ie.type=J,ie},ur.createRef=function(){return{current:null}},ur.forwardRef=function(J){return{$$typeof:o,render:J}},ur.isValidElement=E,ur.lazy=function(J){return{$$typeof:u,_payload:{_status:-1,_result:J},_init:ee}},ur.memo=function(J,ie){return{$$typeof:c,type:J,compare:ie===void 0?null:ie}},ur.startTransition=function(J){var ie=ne.transition;ne.transition={};try{J()}finally{ne.transition=ie}},ur.unstable_act=q,ur.useCallback=function(J,ie){return ue.current.useCallback(J,ie)},ur.useContext=function(J){return ue.current.useContext(J)},ur.useDebugValue=function(){},ur.useDeferredValue=function(J){return ue.current.useDeferredValue(J)},ur.useEffect=function(J,ie){return ue.current.useEffect(J,ie)},ur.useId=function(){return ue.current.useId()},ur.useImperativeHandle=function(J,ie,he){return ue.current.useImperativeHandle(J,ie,he)},ur.useInsertionEffect=function(J,ie){return ue.current.useInsertionEffect(J,ie)},ur.useLayoutEffect=function(J,ie){return ue.current.useLayoutEffect(J,ie)},ur.useMemo=function(J,ie){return ue.current.useMemo(J,ie)},ur.useReducer=function(J,ie,he){return ue.current.useReducer(J,ie,he)},ur.useRef=function(J){return ue.current.useRef(J)},ur.useState=function(J){return ue.current.useState(J)},ur.useSyncExternalStore=function(J,ie,he){return ue.current.useSyncExternalStore(J,ie,he)},ur.useTransition=function(){return ue.current.useTransition()},ur.version="18.3.1",ur}var QP;function nv(){return QP||(QP=1,wE.exports=sq()),wE.exports}var P=nv();const ir=pN(P);var c2={},_E={exports:{}},To={},bE={exports:{}},SE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KP;function aq(){return KP||(KP=1,function(r){function e(ne,oe){var q=ne.length;ne.push(oe);e:for(;0<q;){var J=q-1>>>1,ie=ne[J];if(0<i(ie,oe))ne[J]=oe,ne[q]=ie,q=J;else break e}}function t(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var oe=ne[0],q=ne.pop();if(q!==oe){ne[0]=q;e:for(var J=0,ie=ne.length,he=ie>>>1;J<he;){var $=2*(J+1)-1,ge=ne[$],pe=$+1,we=ne[pe];if(0>i(ge,q))pe<ie&&0>i(we,ge)?(ne[J]=we,ne[pe]=q,J=pe):(ne[J]=ge,ne[$]=q,J=$);else if(pe<ie&&0>i(we,q))ne[J]=we,ne[pe]=q,J=pe;else break e}}return oe}function i(ne,oe){var q=ne.sortIndex-oe.sortIndex;return q!==0?q:ne.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,f=null,d=3,p=!1,g=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(ne){for(var oe=t(c);oe!==null;){if(oe.callback===null)n(c);else if(oe.startTime<=ne)n(c),oe.sortIndex=oe.expirationTime,e(l,oe);else break;oe=t(c)}}function A(ne){if(_=!1,M(ne),!g)if(t(l)!==null)g=!0,ee(k);else{var oe=t(c);oe!==null&&ue(A,oe.startTime-ne)}}function k(ne,oe){g=!1,_&&(_=!1,b(I),I=-1),p=!0;var q=d;try{for(M(oe),f=t(l);f!==null&&(!(f.expirationTime>oe)||ne&&!B());){var J=f.callback;if(typeof J=="function"){f.callback=null,d=f.priorityLevel;var ie=J(f.expirationTime<=oe);oe=r.unstable_now(),typeof ie=="function"?f.callback=ie:f===t(l)&&n(l),M(oe)}else n(l);f=t(l)}if(f!==null)var he=!0;else{var $=t(c);$!==null&&ue(A,$.startTime-oe),he=!1}return he}finally{f=null,d=q,p=!1}}var O=!1,R=null,I=-1,D=5,E=-1;function B(){return!(r.unstable_now()-E<D)}function U(){if(R!==null){var ne=r.unstable_now();E=ne;var oe=!0;try{oe=R(!0,ne)}finally{oe?V():(O=!1,R=null)}}else O=!1}var V;if(typeof C=="function")V=function(){C(U)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,te=X.port2;X.port1.onmessage=U,V=function(){te.postMessage(null)}}else V=function(){w(U,0)};function ee(ne){R=ne,O||(O=!0,V())}function ue(ne,oe){I=w(function(){ne(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_continueExecution=function(){g||p||(g=!0,ee(k))},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(ne){switch(d){case 1:case 2:case 3:var oe=3;break;default:oe=d}var q=d;d=oe;try{return ne()}finally{d=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ne,oe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var q=d;d=ne;try{return oe()}finally{d=q}},r.unstable_scheduleCallback=function(ne,oe,q){var J=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?J+q:J):q=J,ne){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=q+ie,ne={id:u++,callback:oe,priorityLevel:ne,startTime:q,expirationTime:ie,sortIndex:-1},q>J?(ne.sortIndex=q,e(c,ne),t(l)===null&&ne===t(c)&&(_?(b(I),I=-1):_=!0,ue(A,q-J))):(ne.sortIndex=ie,e(l,ne),g||p||(g=!0,ee(k))),ne},r.unstable_shouldYield=B,r.unstable_wrapCallback=function(ne){var oe=d;return function(){var q=d;d=oe;try{return ne.apply(this,arguments)}finally{d=q}}}}(SE)),SE}var qP;function oq(){return qP||(qP=1,bE.exports=aq()),bE.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZP;function lq(){if(ZP)return To;ZP=1;var r=nv(),e=oq();function t(h){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+h,x=1;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(h,m){a(h,m),a(h+"Capture",m)}function a(h,m){for(i[h]=m,h=0;h<m.length;h++)n.add(m[h])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},f={};function d(h){return l.call(f,h)?!0:l.call(u,h)?!1:c.test(h)?f[h]=!0:(u[h]=!0,!1)}function p(h,m,x,N){if(x!==null&&x.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return N?!1:x!==null?!x.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function g(h,m,x,N){if(m===null||typeof m>"u"||p(h,m,x,N))return!0;if(N)return!1;if(x!==null)switch(x.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function _(h,m,x,N,z,Y,le){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=N,this.attributeNamespace=z,this.mustUseProperty=x,this.propertyName=h,this.type=m,this.sanitizeURL=Y,this.removeEmptyString=le}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){w[h]=new _(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var m=h[0];w[m]=new _(m,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){w[h]=new _(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){w[h]=new _(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){w[h]=new _(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){w[h]=new _(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){w[h]=new _(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){w[h]=new _(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){w[h]=new _(h,5,!1,h.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function C(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var m=h.replace(b,C);w[m]=new _(m,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var m=h.replace(b,C);w[m]=new _(m,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var m=h.replace(b,C);w[m]=new _(m,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){w[h]=new _(h,1,!1,h.toLowerCase(),null,!1,!1)}),w.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){w[h]=new _(h,1,!1,h.toLowerCase(),null,!0,!0)});function M(h,m,x,N){var z=w.hasOwnProperty(m)?w[m]:null;(z!==null?z.type!==0:N||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(g(m,x,z,N)&&(x=null),N||z===null?d(m)&&(x===null?h.removeAttribute(m):h.setAttribute(m,""+x)):z.mustUseProperty?h[z.propertyName]=x===null?z.type===3?!1:"":x:(m=z.attributeName,N=z.attributeNamespace,x===null?h.removeAttribute(m):(z=z.type,x=z===3||z===4&&x===!0?"":""+x,N?h.setAttributeNS(N,m,x):h.setAttribute(m,x))))}var A=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),O=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),B=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),ne=Symbol.iterator;function oe(h){return h===null||typeof h!="object"?null:(h=ne&&h[ne]||h["@@iterator"],typeof h=="function"?h:null)}var q=Object.assign,J;function ie(h){if(J===void 0)try{throw Error()}catch(x){var m=x.stack.trim().match(/\n( *(at )?)/);J=m&&m[1]||""}return`
`+J+h}var he=!1;function $(h,m){if(!h||he)return"";he=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(ht){var N=ht}Reflect.construct(h,[],m)}else{try{m.call()}catch(ht){N=ht}h.call(m.prototype)}else{try{throw Error()}catch(ht){N=ht}h()}}catch(ht){if(ht&&N&&typeof ht.stack=="string"){for(var z=ht.stack.split(`
`),Y=N.stack.split(`
`),le=z.length-1,Te=Y.length-1;1<=le&&0<=Te&&z[le]!==Y[Te];)Te--;for(;1<=le&&0<=Te;le--,Te--)if(z[le]!==Y[Te]){if(le!==1||Te!==1)do if(le--,Te--,0>Te||z[le]!==Y[Te]){var Ue=`
`+z[le].replace(" at new "," at ");return h.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",h.displayName)),Ue}while(1<=le&&0<=Te);break}}}finally{he=!1,Error.prepareStackTrace=x}return(h=h?h.displayName||h.name:"")?ie(h):""}function ge(h){switch(h.tag){case 5:return ie(h.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return h=$(h.type,!1),h;case 11:return h=$(h.type.render,!1),h;case 1:return h=$(h.type,!0),h;default:return""}}function pe(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case R:return"Fragment";case O:return"Portal";case D:return"Profiler";case I:return"StrictMode";case V:return"Suspense";case X:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case B:return(h.displayName||"Context")+".Consumer";case E:return(h._context.displayName||"Context")+".Provider";case U:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case te:return m=h.displayName||null,m!==null?m:pe(h.type)||"Memo";case ee:m=h._payload,h=h._init;try{return pe(h(m))}catch{}}return null}function we(h){var m=h.type;switch(h.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=m.render,h=h.displayName||h.name||"",m.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(m);case 8:return m===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function ke(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Pe(h){var m=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function je(h){var m=Pe(h)?"checked":"value",x=Object.getOwnPropertyDescriptor(h.constructor.prototype,m),N=""+h[m];if(!h.hasOwnProperty(m)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var z=x.get,Y=x.set;return Object.defineProperty(h,m,{configurable:!0,get:function(){return z.call(this)},set:function(le){N=""+le,Y.call(this,le)}}),Object.defineProperty(h,m,{enumerable:x.enumerable}),{getValue:function(){return N},setValue:function(le){N=""+le},stopTracking:function(){h._valueTracker=null,delete h[m]}}}}function Ke(h){h._valueTracker||(h._valueTracker=je(h))}function Ie(h){if(!h)return!1;var m=h._valueTracker;if(!m)return!0;var x=m.getValue(),N="";return h&&(N=Pe(h)?h.checked?"true":"false":h.value),h=N,h!==x?(m.setValue(h),!0):!1}function Ge(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function ce(h,m){var x=m.checked;return q({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??h._wrapperState.initialChecked})}function _t(h,m){var x=m.defaultValue==null?"":m.defaultValue,N=m.checked!=null?m.checked:m.defaultChecked;x=ke(m.value!=null?m.value:x),h._wrapperState={initialChecked:N,initialValue:x,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function _e(h,m){m=m.checked,m!=null&&M(h,"checked",m,!1)}function Ne(h,m){_e(h,m);var x=ke(m.value),N=m.type;if(x!=null)N==="number"?(x===0&&h.value===""||h.value!=x)&&(h.value=""+x):h.value!==""+x&&(h.value=""+x);else if(N==="submit"||N==="reset"){h.removeAttribute("value");return}m.hasOwnProperty("value")?He(h,m.type,x):m.hasOwnProperty("defaultValue")&&He(h,m.type,ke(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(h.defaultChecked=!!m.defaultChecked)}function Ce(h,m,x){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var N=m.type;if(!(N!=="submit"&&N!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+h._wrapperState.initialValue,x||m===h.value||(h.value=m),h.defaultValue=m}x=h.name,x!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,x!==""&&(h.name=x)}function He(h,m,x){(m!=="number"||Ge(h.ownerDocument)!==h)&&(x==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+x&&(h.defaultValue=""+x))}var Ee=Array.isArray;function Z(h,m,x,N){if(h=h.options,m){m={};for(var z=0;z<x.length;z++)m["$"+x[z]]=!0;for(x=0;x<h.length;x++)z=m.hasOwnProperty("$"+h[x].value),h[x].selected!==z&&(h[x].selected=z),z&&N&&(h[x].defaultSelected=!0)}else{for(x=""+ke(x),m=null,z=0;z<h.length;z++){if(h[z].value===x){h[z].selected=!0,N&&(h[z].defaultSelected=!0);return}m!==null||h[z].disabled||(m=h[z])}m!==null&&(m.selected=!0)}}function W(h,m){if(m.dangerouslySetInnerHTML!=null)throw Error(t(91));return q({},m,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function re(h,m){var x=m.value;if(x==null){if(x=m.children,m=m.defaultValue,x!=null){if(m!=null)throw Error(t(92));if(Ee(x)){if(1<x.length)throw Error(t(93));x=x[0]}m=x}m==null&&(m=""),x=m}h._wrapperState={initialValue:ke(x)}}function be(h,m){var x=ke(m.value),N=ke(m.defaultValue);x!=null&&(x=""+x,x!==h.value&&(h.value=x),m.defaultValue==null&&h.defaultValue!==x&&(h.defaultValue=x)),N!=null&&(h.defaultValue=""+N)}function ve(h){var m=h.textContent;m===h._wrapperState.initialValue&&m!==""&&m!==null&&(h.value=m)}function Je(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $e(h,m){return h==null||h==="http://www.w3.org/1999/xhtml"?Je(m):h==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var it,pt=function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,x,N,z){MSApp.execUnsafeLocalFunction(function(){return h(m,x,N,z)})}:h}(function(h,m){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=m;else{for(it=it||document.createElement("div"),it.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=it.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;m.firstChild;)h.appendChild(m.firstChild)}});function Ft(h,m){if(m){var x=h.firstChild;if(x&&x===h.lastChild&&x.nodeType===3){x.nodeValue=m;return}}h.textContent=m}var Le={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},at=["Webkit","ms","Moz","O"];Object.keys(Le).forEach(function(h){at.forEach(function(m){m=m+h.charAt(0).toUpperCase()+h.substring(1),Le[m]=Le[h]})});function vt(h,m,x){return m==null||typeof m=="boolean"||m===""?"":x||typeof m!="number"||m===0||Le.hasOwnProperty(h)&&Le[h]?(""+m).trim():m+"px"}function qe(h,m){h=h.style;for(var x in m)if(m.hasOwnProperty(x)){var N=x.indexOf("--")===0,z=vt(x,m[x],N);x==="float"&&(x="cssFloat"),N?h.setProperty(x,z):h[x]=z}}var et=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Me(h,m){if(m){if(et[h]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(t(137,h));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(t(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(t(61))}if(m.style!=null&&typeof m.style!="object")throw Error(t(62))}}function tt(h,m){if(h.indexOf("-")===-1)return typeof m.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=null;function Ae(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Oe=null,Ye=null,yt=null;function Lt(h){if(h=rc(h)){if(typeof Oe!="function")throw Error(t(280));var m=h.stateNode;m&&(m=Fg(m),Oe(h.stateNode,h.type,m))}}function xt(h){Ye?yt?yt.push(h):yt=[h]:Ye=h}function Yt(){if(Ye){var h=Ye,m=yt;if(yt=Ye=null,Lt(h),m)for(h=0;h<m.length;h++)Lt(m[h])}}function on(h,m){return h(m)}function Zt(){}var qt=!1;function Xe(h,m,x){if(qt)return h(m,x);qt=!0;try{return on(h,m,x)}finally{qt=!1,(Ye!==null||yt!==null)&&(Zt(),Yt())}}function ot(h,m){var x=h.stateNode;if(x===null)return null;var N=Fg(x);if(N===null)return null;x=N[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(h=h.type,N=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!N;break e;default:h=!1}if(h)return null;if(x&&typeof x!="function")throw Error(t(231,m,typeof x));return x}var Dt=!1;if(o)try{var nn={};Object.defineProperty(nn,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",nn,nn),window.removeEventListener("test",nn,nn)}catch{Dt=!1}function Fn(h,m,x,N,z,Y,le,Te,Ue){var ht=Array.prototype.slice.call(arguments,3);try{m.apply(x,ht)}catch(Pt){this.onError(Pt)}}var Or=!1,Yn=null,sr=!1,xn=null,ni={onError:function(h){Or=!0,Yn=h}};function Ii(h,m,x,N,z,Y,le,Te,Ue){Or=!1,Yn=null,Fn.apply(ni,arguments)}function se(h,m,x,N,z,Y,le,Te,Ue){if(Ii.apply(this,arguments),Or){if(Or){var ht=Yn;Or=!1,Yn=null}else throw Error(t(198));sr||(sr=!0,xn=ht)}}function fe(h){var m=h,x=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,(m.flags&4098)!==0&&(x=m.return),h=m.return;while(h)}return m.tag===3?x:null}function Re(h){if(h.tag===13){var m=h.memoizedState;if(m===null&&(h=h.alternate,h!==null&&(m=h.memoizedState)),m!==null)return m.dehydrated}return null}function nt(h){if(fe(h)!==h)throw Error(t(188))}function mt(h){var m=h.alternate;if(!m){if(m=fe(h),m===null)throw Error(t(188));return m!==h?null:h}for(var x=h,N=m;;){var z=x.return;if(z===null)break;var Y=z.alternate;if(Y===null){if(N=z.return,N!==null){x=N;continue}break}if(z.child===Y.child){for(Y=z.child;Y;){if(Y===x)return nt(z),h;if(Y===N)return nt(z),m;Y=Y.sibling}throw Error(t(188))}if(x.return!==N.return)x=z,N=Y;else{for(var le=!1,Te=z.child;Te;){if(Te===x){le=!0,x=z,N=Y;break}if(Te===N){le=!0,N=z,x=Y;break}Te=Te.sibling}if(!le){for(Te=Y.child;Te;){if(Te===x){le=!0,x=Y,N=z;break}if(Te===N){le=!0,N=Y,x=z;break}Te=Te.sibling}if(!le)throw Error(t(189))}}if(x.alternate!==N)throw Error(t(190))}if(x.tag!==3)throw Error(t(188));return x.stateNode.current===x?h:m}function gt(h){return h=mt(h),h!==null?Ot(h):null}function Ot(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var m=Ot(h);if(m!==null)return m;h=h.sibling}return null}var kt=e.unstable_scheduleCallback,ae=e.unstable_cancelCallback,Se=e.unstable_shouldYield,De=e.unstable_requestPaint,me=e.unstable_now,Fe=e.unstable_getCurrentPriorityLevel,st=e.unstable_ImmediatePriority,dt=e.unstable_UserBlockingPriority,Ct=e.unstable_NormalPriority,It=e.unstable_LowPriority,Gt=e.unstable_IdlePriority,Ut=null,Et=null;function Jt(h){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Ut,h,void 0,(h.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:fn,Mn=Math.log,sn=Math.LN2;function fn(h){return h>>>=0,h===0?32:31-(Mn(h)/sn|0)|0}var Qt=64,Bn=4194304;function pn(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function In(h,m){var x=h.pendingLanes;if(x===0)return 0;var N=0,z=h.suspendedLanes,Y=h.pingedLanes,le=x&268435455;if(le!==0){var Te=le&~z;Te!==0?N=pn(Te):(Y&=le,Y!==0&&(N=pn(Y)))}else le=x&~z,le!==0?N=pn(le):Y!==0&&(N=pn(Y));if(N===0)return 0;if(m!==0&&m!==N&&(m&z)===0&&(z=N&-N,Y=m&-m,z>=Y||z===16&&(Y&4194240)!==0))return m;if((N&4)!==0&&(N|=x&16),m=h.entangledLanes,m!==0)for(h=h.entanglements,m&=N;0<m;)x=31-Wt(m),z=1<<x,N|=h[x],m&=~z;return N}function Ar(h,m){switch(h){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function An(h,m){for(var x=h.suspendedLanes,N=h.pingedLanes,z=h.expirationTimes,Y=h.pendingLanes;0<Y;){var le=31-Wt(Y),Te=1<<le,Ue=z[le];Ue===-1?((Te&x)===0||(Te&N)!==0)&&(z[le]=Ar(Te,m)):Ue<=m&&(h.expiredLanes|=Te),Y&=~Te}}function gn(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Sn(){var h=Qt;return Qt<<=1,(Qt&4194240)===0&&(Qt=64),h}function gr(h){for(var m=[],x=0;31>x;x++)m.push(h);return m}function qn(h,m,x){h.pendingLanes|=m,m!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,m=31-Wt(m),h[m]=x}function Tn(h,m){var x=h.pendingLanes&~m;h.pendingLanes=m,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=m,h.mutableReadLanes&=m,h.entangledLanes&=m,m=h.entanglements;var N=h.eventTimes;for(h=h.expirationTimes;0<x;){var z=31-Wt(x),Y=1<<z;m[z]=0,N[z]=-1,h[z]=-1,x&=~Y}}function Dr(h,m){var x=h.entangledLanes|=m;for(h=h.entanglements;x;){var N=31-Wt(x),z=1<<N;z&m|h[N]&m&&(h[N]|=m),x&=~z}}var Un=0;function ai(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var _l,Xl,eu,wo,Ql,xa=!1,Cs=[],Kr=null,Pn=null,ra=null,Vs=new Map,Ms=new Map,Ca=[],fd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qr(h,m){switch(h){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":ra=null;break;case"pointerover":case"pointerout":Vs.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(m.pointerId)}}function ji(h,m,x,N,z,Y){return h===null||h.nativeEvent!==Y?(h={blockedOn:m,domEventName:x,eventSystemFlags:N,nativeEvent:Y,targetContainers:[z]},m!==null&&(m=rc(m),m!==null&&Xl(m)),h):(h.eventSystemFlags|=N,m=h.targetContainers,z!==null&&m.indexOf(z)===-1&&m.push(z),h)}function dd(h,m,x,N,z){switch(m){case"focusin":return Kr=ji(Kr,h,m,x,N,z),!0;case"dragenter":return Pn=ji(Pn,h,m,x,N,z),!0;case"mouseover":return ra=ji(ra,h,m,x,N,z),!0;case"pointerover":var Y=z.pointerId;return Vs.set(Y,ji(Vs.get(Y)||null,h,m,x,N,z)),!0;case"gotpointercapture":return Y=z.pointerId,Ms.set(Y,ji(Ms.get(Y)||null,h,m,x,N,z)),!0}return!1}function us(h){var m=su(h.target);if(m!==null){var x=fe(m);if(x!==null){if(m=x.tag,m===13){if(m=Re(x),m!==null){h.blockedOn=m,Ql(h.priority,function(){eu(x)});return}}else if(m===3&&x.stateNode.current.memoizedState.isDehydrated){h.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}h.blockedOn=null}function Qa(h){if(h.blockedOn!==null)return!1;for(var m=h.targetContainers;0<m.length;){var x=qi(h.domEventName,h.eventSystemFlags,m[0],h.nativeEvent);if(x===null){x=h.nativeEvent;var N=new x.constructor(x.type,x);Tt=N,x.target.dispatchEvent(N),Tt=null}else return m=rc(x),m!==null&&Xl(m),h.blockedOn=x,!1;m.shift()}return!0}function Ka(h,m,x){Qa(h)&&x.delete(m)}function Gs(){xa=!1,Kr!==null&&Qa(Kr)&&(Kr=null),Pn!==null&&Qa(Pn)&&(Pn=null),ra!==null&&Qa(ra)&&(ra=null),Vs.forEach(Ka),Ms.forEach(Ka)}function ia(h,m){h.blockedOn===m&&(h.blockedOn=null,xa||(xa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Gs)))}function Ma(h){function m(z){return ia(z,h)}if(0<Cs.length){ia(Cs[0],h);for(var x=1;x<Cs.length;x++){var N=Cs[x];N.blockedOn===h&&(N.blockedOn=null)}}for(Kr!==null&&ia(Kr,h),Pn!==null&&ia(Pn,h),ra!==null&&ia(ra,h),Vs.forEach(m),Ms.forEach(m),x=0;x<Ca.length;x++)N=Ca[x],N.blockedOn===h&&(N.blockedOn=null);for(;0<Ca.length&&(x=Ca[0],x.blockedOn===null);)us(x),x.blockedOn===null&&Ca.shift()}var Li=A.ReactCurrentBatchConfig,wi=!0;function Sr(h,m,x,N){var z=Un,Y=Li.transition;Li.transition=null;try{Un=1,Kl(h,m,x,N)}finally{Un=z,Li.transition=Y}}function Aa(h,m,x,N){var z=Un,Y=Li.transition;Li.transition=null;try{Un=4,Kl(h,m,x,N)}finally{Un=z,Li.transition=Y}}function Kl(h,m,x,N){if(wi){var z=qi(h,m,x,N);if(z===null)Ng(h,m,N,Go,x),qr(h,N);else if(dd(z,h,m,x,N))N.stopPropagation();else if(qr(h,N),m&4&&-1<fd.indexOf(h)){for(;z!==null;){var Y=rc(z);if(Y!==null&&_l(Y),Y=qi(h,m,x,N),Y===null&&Ng(h,m,N,Go,x),Y===z)break;z=Y}z!==null&&N.stopPropagation()}else Ng(h,m,N,null,x)}}var Go=null;function qi(h,m,x,N){if(Go=null,h=Ae(N),h=su(h),h!==null)if(m=fe(h),m===null)h=null;else if(x=m.tag,x===13){if(h=Re(m),h!==null)return h;h=null}else if(x===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;h=null}else m!==h&&(h=null);return Go=h,null}function Ho(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fe()){case st:return 1;case dt:return 4;case Ct:case It:return 16;case Gt:return 536870912;default:return 16}default:return 16}}var Zi=null,_o=null,jr=null;function _i(){if(jr)return jr;var h,m=_o,x=m.length,N,z="value"in Zi?Zi.value:Zi.textContent,Y=z.length;for(h=0;h<x&&m[h]===z[h];h++);var le=x-h;for(N=1;N<=le&&m[x-N]===z[Y-N];N++);return jr=z.slice(h,1<N?1-N:void 0)}function Wo(h){var m=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&m===13&&(h=13)):h=m,h===10&&(h=13),32<=h||h===13?h:0}function zi(){return!0}function bo(){return!1}function bi(h){function m(x,N,z,Y,le){this._reactName=x,this._targetInst=z,this.type=N,this.nativeEvent=Y,this.target=le,this.currentTarget=null;for(var Te in h)h.hasOwnProperty(Te)&&(x=h[Te],this[Te]=x?x(Y):Y[Te]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?zi:bo,this.isPropagationStopped=bo,this}return q(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),m}var Ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hi=bi(Ta),oi=q({},Ta,{view:0,detail:0}),pi=bi(oi),Zr,Ni,sa,ql=q({},oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==sa&&(sa&&h.type==="mousemove"?(Zr=h.screenX-sa.screenX,Ni=h.screenY-sa.screenY):Ni=Zr=0,sa=h),Zr)},movementY:function(h){return"movementY"in h?h.movementY:Ni}}),ju=bi(ql),qa=q({},ql,{dataTransfer:0}),Yo=bi(qa),Zl=q({},oi,{relatedTarget:0}),zu=bi(Zl),Vu=q({},Ta,{animationName:0,elapsedTime:0,pseudoElement:0}),bl=bi(Vu),tp=q({},Ta,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),hd=bi(tp),Gu=q({},Ta,{data:0}),pd=bi(Gu),Hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},md={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $l(h){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(h):(h=md[h])?!!m[h]:!1}function aa(){return $l}var T=q({},oi,{key:function(h){if(h.key){var m=Hu[h.key]||h.key;if(m!=="Unidentified")return m}return h.type==="keypress"?(h=Wo(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Hs[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(h){return h.type==="keypress"?Wo(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Wo(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),H=bi(T),K=q({},ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),de=bi(K),Ze=q({},oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),ft=bi(Ze),jt=q({},Ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),pr=bi(jt),Vi=q({},ql,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),lr=bi(Vi),Gi=[9,13,27,32],Tr=o&&"CompositionEvent"in window,li=null;o&&"documentMode"in document&&(li=document.documentMode);var cr=o&&"TextEvent"in window&&!li,Jo=o&&(!Tr||li&&8<li&&11>=li),Ws=" ",Lv=!1;function Nv(h,m){switch(h){case"keyup":return Gi.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _g(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var tu=!1;function Cb(h,m){switch(h){case"compositionend":return _g(m);case"keypress":return m.which!==32?null:(Lv=!0,Ws);case"textInput":return h=m.data,h===Ws&&Lv?null:h;default:return null}}function np(h,m){if(tu)return h==="compositionend"||!Tr&&Nv(h,m)?(h=_i(),jr=_o=Zi=null,tu=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Jo&&m.locale!=="ko"?null:m.data;default:return null}}var gd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bg(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m==="input"?!!gd[h.type]:m==="textarea"}function vd(h,m,x,N){xt(N),m=Dg(m,"onChange"),0<m.length&&(x=new hi("onChange","change",null,x,N),h.push({event:x,listeners:m}))}var nu=null,yd=null;function Mb(h){Sd(h,0)}function ec(h){var m=Di(h);if(Ie(m))return h}function Ab(h,m){if(h==="change")return m}var wd=!1;if(o){var Ea;if(o){var Wu="oninput"in document;if(!Wu){var Yu=document.createElement("div");Yu.setAttribute("oninput","return;"),Wu=typeof Yu.oninput=="function"}Ea=Wu}else Ea=!1;wd=Ea&&(!document.documentMode||9<document.documentMode)}function Xo(){nu&&(nu.detachEvent("onpropertychange",Sg),yd=nu=null)}function Sg(h){if(h.propertyName==="value"&&ec(yd)){var m=[];vd(m,yd,h,Ae(h)),Xe(Mb,m)}}function _d(h,m,x){h==="focusin"?(Xo(),nu=m,yd=x,nu.attachEvent("onpropertychange",Sg)):h==="focusout"&&Xo()}function Tb(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return ec(yd)}function Dv(h,m){if(h==="click")return ec(m)}function mi(h,m){if(h==="input"||h==="change")return ec(m)}function xg(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var Za=typeof Object.is=="function"?Object.is:xg;function Ju(h,m){if(Za(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var x=Object.keys(h),N=Object.keys(m);if(x.length!==N.length)return!1;for(N=0;N<x.length;N++){var z=x[N];if(!l.call(m,z)||!Za(h[z],m[z]))return!1}return!0}function rp(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function $a(h,m){var x=rp(h);h=0;for(var N;x;){if(x.nodeType===3){if(N=h+x.textContent.length,h<=m&&N>=m)return{node:x,offset:m-h};h=N}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=rp(x)}}function Xu(h,m){return h&&m?h===m?!0:h&&h.nodeType===3?!1:m&&m.nodeType===3?Xu(h,m.parentNode):"contains"in h?h.contains(m):h.compareDocumentPosition?!!(h.compareDocumentPosition(m)&16):!1:!1}function gi(){for(var h=window,m=Ge();m instanceof h.HTMLIFrameElement;){try{var x=typeof m.contentWindow.location.href=="string"}catch{x=!1}if(x)h=m.contentWindow;else break;m=Ge(h.document)}return m}function fs(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m&&(m==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||m==="textarea"||h.contentEditable==="true")}function ds(h){var m=gi(),x=h.focusedElem,N=h.selectionRange;if(m!==x&&x&&x.ownerDocument&&Xu(x.ownerDocument.documentElement,x)){if(N!==null&&fs(x)){if(m=N.start,h=N.end,h===void 0&&(h=m),"selectionStart"in x)x.selectionStart=m,x.selectionEnd=Math.min(h,x.value.length);else if(h=(m=x.ownerDocument||document)&&m.defaultView||window,h.getSelection){h=h.getSelection();var z=x.textContent.length,Y=Math.min(N.start,z);N=N.end===void 0?Y:Math.min(N.end,z),!h.extend&&Y>N&&(z=N,N=Y,Y=z),z=$a(x,Y);var le=$a(x,N);z&&le&&(h.rangeCount!==1||h.anchorNode!==z.node||h.anchorOffset!==z.offset||h.focusNode!==le.node||h.focusOffset!==le.offset)&&(m=m.createRange(),m.setStart(z.node,z.offset),h.removeAllRanges(),Y>N?(h.addRange(m),h.extend(le.node,le.offset)):(m.setEnd(le.node,le.offset),h.addRange(m)))}}for(m=[],h=x;h=h.parentNode;)h.nodeType===1&&m.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<m.length;x++)h=m[x],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Cg=o&&"documentMode"in document&&11>=document.documentMode,Sl=null,Qu=null,ip=null,hs=!1;function Mg(h,m,x){var N=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;hs||Sl==null||Sl!==Ge(N)||(N=Sl,"selectionStart"in N&&fs(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),ip&&Ju(ip,N)||(ip=N,N=Dg(Qu,"onSelect"),0<N.length&&(m=new hi("onSelect","select",null,m,x),h.push({event:m,listeners:N}),m.target=Sl)))}function bd(h,m){var x={};return x[h.toLowerCase()]=m.toLowerCase(),x["Webkit"+h]="webkit"+m,x["Moz"+h]="moz"+m,x}var ru={animationend:bd("Animation","AnimationEnd"),animationiteration:bd("Animation","AnimationIteration"),animationstart:bd("Animation","AnimationStart"),transitionend:bd("Transition","TransitionEnd")},Qo={},Ko={};o&&(Ko=document.createElement("div").style,"AnimationEvent"in window||(delete ru.animationend.animation,delete ru.animationiteration.animation,delete ru.animationstart.animation),"TransitionEvent"in window||delete ru.transitionend.transition);function xl(h){if(Qo[h])return Qo[h];if(!ru[h])return h;var m=ru[h],x;for(x in m)if(m.hasOwnProperty(x)&&x in Ko)return Qo[h]=m[x];return h}var sp=xl("animationend"),ap=xl("animationiteration"),kv=xl("animationstart"),Rv=xl("transitionend"),Pv=new Map,Ov="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tc(h,m){Pv.set(h,m),s(m,[h])}for(var Ag=0;Ag<Ov.length;Ag++){var op=Ov[Ag],lp=op.toLowerCase(),Eb=op[0].toUpperCase()+op.slice(1);tc(lp,"on"+Eb)}tc(sp,"onAnimationEnd"),tc(ap,"onAnimationIteration"),tc(kv,"onAnimationStart"),tc("dblclick","onDoubleClick"),tc("focusin","onFocus"),tc("focusout","onBlur"),tc(Rv,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tg=new Set("cancel close invalid load scroll toggle".split(" ").concat(iu));function Eg(h,m,x){var N=h.type||"unknown-event";h.currentTarget=x,se(N,m,void 0,h),h.currentTarget=null}function Sd(h,m){m=(m&4)!==0;for(var x=0;x<h.length;x++){var N=h[x],z=N.event;N=N.listeners;e:{var Y=void 0;if(m)for(var le=N.length-1;0<=le;le--){var Te=N[le],Ue=Te.instance,ht=Te.currentTarget;if(Te=Te.listener,Ue!==Y&&z.isPropagationStopped())break e;Eg(z,Te,ht),Y=Ue}else for(le=0;le<N.length;le++){if(Te=N[le],Ue=Te.instance,ht=Te.currentTarget,Te=Te.listener,Ue!==Y&&z.isPropagationStopped())break e;Eg(z,Te,ht),Y=Ue}}}if(sr)throw h=xn,sr=!1,xn=null,h}function $r(h,m){var x=m[Zu];x===void 0&&(x=m[Zu]=new Set);var N=h+"__bubble";x.has(N)||(Lg(m,h,2,!1),x.add(N))}function Ig(h,m,x){var N=0;m&&(N|=4),Lg(x,h,N,m)}var cp="_reactListening"+Math.random().toString(36).slice(2);function xd(h){if(!h[cp]){h[cp]=!0,n.forEach(function(x){x!=="selectionchange"&&(Tg.has(x)||Ig(x,!1,h),Ig(x,!0,h))});var m=h.nodeType===9?h:h.ownerDocument;m===null||m[cp]||(m[cp]=!0,Ig("selectionchange",!1,m))}}function Lg(h,m,x,N){switch(Ho(m)){case 1:var z=Sr;break;case 4:z=Aa;break;default:z=Kl}x=z.bind(null,m,x,h),z=void 0,!Dt||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(z=!0),N?z!==void 0?h.addEventListener(m,x,{capture:!0,passive:z}):h.addEventListener(m,x,!0):z!==void 0?h.addEventListener(m,x,{passive:z}):h.addEventListener(m,x,!1)}function Ng(h,m,x,N,z){var Y=N;if((m&1)===0&&(m&2)===0&&N!==null)e:for(;;){if(N===null)return;var le=N.tag;if(le===3||le===4){var Te=N.stateNode.containerInfo;if(Te===z||Te.nodeType===8&&Te.parentNode===z)break;if(le===4)for(le=N.return;le!==null;){var Ue=le.tag;if((Ue===3||Ue===4)&&(Ue=le.stateNode.containerInfo,Ue===z||Ue.nodeType===8&&Ue.parentNode===z))return;le=le.return}for(;Te!==null;){if(le=su(Te),le===null)return;if(Ue=le.tag,Ue===5||Ue===6){N=Y=le;continue e}Te=Te.parentNode}}N=N.return}Xe(function(){var ht=Y,Pt=Ae(x),Bt=[];e:{var Rt=Pv.get(h);if(Rt!==void 0){var ln=hi,mn=h;switch(h){case"keypress":if(Wo(x)===0)break e;case"keydown":case"keyup":ln=H;break;case"focusin":mn="focus",ln=zu;break;case"focusout":mn="blur",ln=zu;break;case"beforeblur":case"afterblur":ln=zu;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ln=ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ln=Yo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ln=ft;break;case sp:case ap:case kv:ln=bl;break;case Rv:ln=pr;break;case"scroll":ln=pi;break;case"wheel":ln=lr;break;case"copy":case"cut":case"paste":ln=hd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ln=de}var vn=(m&4)!==0,es=!vn&&h==="scroll",rt=vn?Rt!==null?Rt+"Capture":null:Rt;vn=[];for(var ze=ht,lt;ze!==null;){lt=ze;var Ht=lt.stateNode;if(lt.tag===5&&Ht!==null&&(lt=Ht,rt!==null&&(Ht=ot(ze,rt),Ht!=null&&vn.push(Cd(ze,Ht,lt)))),es)break;ze=ze.return}0<vn.length&&(Rt=new ln(Rt,mn,null,x,Pt),Bt.push({event:Rt,listeners:vn}))}}if((m&7)===0){e:{if(Rt=h==="mouseover"||h==="pointerover",ln=h==="mouseout"||h==="pointerout",Rt&&x!==Tt&&(mn=x.relatedTarget||x.fromElement)&&(su(mn)||mn[eo]))break e;if((ln||Rt)&&(Rt=Pt.window===Pt?Pt:(Rt=Pt.ownerDocument)?Rt.defaultView||Rt.parentWindow:window,ln?(mn=x.relatedTarget||x.toElement,ln=ht,mn=mn?su(mn):null,mn!==null&&(es=fe(mn),mn!==es||mn.tag!==5&&mn.tag!==6)&&(mn=null)):(ln=null,mn=ht),ln!==mn)){if(vn=ju,Ht="onMouseLeave",rt="onMouseEnter",ze="mouse",(h==="pointerout"||h==="pointerover")&&(vn=de,Ht="onPointerLeave",rt="onPointerEnter",ze="pointer"),es=ln==null?Rt:Di(ln),lt=mn==null?Rt:Di(mn),Rt=new vn(Ht,ze+"leave",ln,x,Pt),Rt.target=es,Rt.relatedTarget=lt,Ht=null,su(Pt)===ht&&(vn=new vn(rt,ze+"enter",mn,x,Pt),vn.target=lt,vn.relatedTarget=es,Ht=vn),es=Ht,ln&&mn)t:{for(vn=ln,rt=mn,ze=0,lt=vn;lt;lt=Ku(lt))ze++;for(lt=0,Ht=rt;Ht;Ht=Ku(Ht))lt++;for(;0<ze-lt;)vn=Ku(vn),ze--;for(;0<lt-ze;)rt=Ku(rt),lt--;for(;ze--;){if(vn===rt||rt!==null&&vn===rt.alternate)break t;vn=Ku(vn),rt=Ku(rt)}vn=null}else vn=null;ln!==null&&Ib(Bt,Rt,ln,vn,!1),mn!==null&&es!==null&&Ib(Bt,es,mn,vn,!0)}}e:{if(Rt=ht?Di(ht):window,ln=Rt.nodeName&&Rt.nodeName.toLowerCase(),ln==="select"||ln==="input"&&Rt.type==="file")var _n=Ab;else if(bg(Rt))if(wd)_n=mi;else{_n=Tb;var Dn=_d}else(ln=Rt.nodeName)&&ln.toLowerCase()==="input"&&(Rt.type==="checkbox"||Rt.type==="radio")&&(_n=Dv);if(_n&&(_n=_n(h,ht))){vd(Bt,_n,x,Pt);break e}Dn&&Dn(h,Rt,ht),h==="focusout"&&(Dn=Rt._wrapperState)&&Dn.controlled&&Rt.type==="number"&&He(Rt,"number",Rt.value)}switch(Dn=ht?Di(ht):window,h){case"focusin":(bg(Dn)||Dn.contentEditable==="true")&&(Sl=Dn,Qu=ht,ip=null);break;case"focusout":ip=Qu=Sl=null;break;case"mousedown":hs=!0;break;case"contextmenu":case"mouseup":case"dragend":hs=!1,Mg(Bt,x,Pt);break;case"selectionchange":if(Cg)break;case"keydown":case"keyup":Mg(Bt,x,Pt)}var kn;if(Tr)e:{switch(h){case"compositionstart":var zn="onCompositionStart";break e;case"compositionend":zn="onCompositionEnd";break e;case"compositionupdate":zn="onCompositionUpdate";break e}zn=void 0}else tu?Nv(h,x)&&(zn="onCompositionEnd"):h==="keydown"&&x.keyCode===229&&(zn="onCompositionStart");zn&&(Jo&&x.locale!=="ko"&&(tu||zn!=="onCompositionStart"?zn==="onCompositionEnd"&&tu&&(kn=_i()):(Zi=Pt,_o="value"in Zi?Zi.value:Zi.textContent,tu=!0)),Dn=Dg(ht,zn),0<Dn.length&&(zn=new pd(zn,h,null,x,Pt),Bt.push({event:zn,listeners:Dn}),kn?zn.data=kn:(kn=_g(x),kn!==null&&(zn.data=kn)))),(kn=cr?Cb(h,x):np(h,x))&&(ht=Dg(ht,"onBeforeInput"),0<ht.length&&(Pt=new pd("onBeforeInput","beforeinput",null,x,Pt),Bt.push({event:Pt,listeners:ht}),Pt.data=kn))}Sd(Bt,m)})}function Cd(h,m,x){return{instance:h,listener:m,currentTarget:x}}function Dg(h,m){for(var x=m+"Capture",N=[];h!==null;){var z=h,Y=z.stateNode;z.tag===5&&Y!==null&&(z=Y,Y=ot(h,x),Y!=null&&N.unshift(Cd(h,Y,z)),Y=ot(h,m),Y!=null&&N.push(Cd(h,Y,z))),h=h.return}return N}function Ku(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function Ib(h,m,x,N,z){for(var Y=m._reactName,le=[];x!==null&&x!==N;){var Te=x,Ue=Te.alternate,ht=Te.stateNode;if(Ue!==null&&Ue===N)break;Te.tag===5&&ht!==null&&(Te=ht,z?(Ue=ot(x,Y),Ue!=null&&le.unshift(Cd(x,Ue,Te))):z||(Ue=ot(x,Y),Ue!=null&&le.push(Cd(x,Ue,Te)))),x=x.return}le.length!==0&&h.push({event:m,listeners:le})}var YT=/\r\n?/g,Lb=/\u0000|\uFFFD/g;function Fv(h){return(typeof h=="string"?h:""+h).replace(YT,`
`).replace(Lb,"")}function up(h,m,x){if(m=Fv(m),Fv(h)!==m&&x)throw Error(t(425))}function fp(){}var Md=null,Bv=null;function Uv(h,m){return h==="textarea"||h==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var jv=typeof setTimeout=="function"?setTimeout:void 0,zv=typeof clearTimeout=="function"?clearTimeout:void 0,kg=typeof Promise=="function"?Promise:void 0,JT=typeof queueMicrotask=="function"?queueMicrotask:typeof kg<"u"?function(h){return kg.resolve(null).then(h).catch(Nb)}:jv;function Nb(h){setTimeout(function(){throw h})}function Rg(h,m){var x=m,N=0;do{var z=x.nextSibling;if(h.removeChild(x),z&&z.nodeType===8)if(x=z.data,x==="/$"){if(N===0){h.removeChild(z),Ma(m);return}N--}else x!=="$"&&x!=="$?"&&x!=="$!"||N++;x=z}while(x);Ma(m)}function nc(h){for(;h!=null;h=h.nextSibling){var m=h.nodeType;if(m===1||m===3)break;if(m===8){if(m=h.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return h}function Vv(h){h=h.previousSibling;for(var m=0;h;){if(h.nodeType===8){var x=h.data;if(x==="$"||x==="$!"||x==="$?"){if(m===0)return h;m--}else x==="/$"&&m++}h=h.previousSibling}return null}var qu=Math.random().toString(36).slice(2),$i="__reactFiber$"+qu,Ad="__reactProps$"+qu,eo="__reactContainer$"+qu,Zu="__reactEvents$"+qu,Pg="__reactListeners$"+qu,Og="__reactHandles$"+qu;function su(h){var m=h[$i];if(m)return m;for(var x=h.parentNode;x;){if(m=x[eo]||x[$i]){if(x=m.alternate,m.child!==null||x!==null&&x.child!==null)for(h=Vv(h);h!==null;){if(x=h[$i])return x;h=Vv(h)}return m}h=x,x=h.parentNode}return null}function rc(h){return h=h[$i]||h[eo],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function Di(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(t(33))}function Fg(h){return h[Ad]||null}var Gv=[],ps=-1;function Si(h){return{current:h}}function ei(h){0>ps||(h.current=Gv[ps],Gv[ps]=null,ps--)}function Yr(h,m){ps++,Gv[ps]=h.current,h.current=m}var ic={},As=Si(ic),oa=Si(!1),sc=ic;function $u(h,m){var x=h.type.contextTypes;if(!x)return ic;var N=h.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===m)return N.__reactInternalMemoizedMaskedChildContext;var z={},Y;for(Y in x)z[Y]=m[Y];return N&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=m,h.__reactInternalMemoizedMaskedChildContext=z),z}function Ys(h){return h=h.childContextTypes,h!=null}function dp(){ei(oa),ei(As)}function Hv(h,m,x){if(As.current!==ic)throw Error(t(168));Yr(As,m),Yr(oa,x)}function hp(h,m,x){var N=h.stateNode;if(m=m.childContextTypes,typeof N.getChildContext!="function")return x;N=N.getChildContext();for(var z in N)if(!(z in m))throw Error(t(108,we(h)||"Unknown",z));return q({},x,N)}function ef(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||ic,sc=As.current,Yr(As,h),Yr(oa,oa.current),!0}function Wv(h,m,x){var N=h.stateNode;if(!N)throw Error(t(169));x?(h=hp(h,m,sc),N.__reactInternalMemoizedMergedChildContext=h,ei(oa),ei(As),Yr(As,h)):ei(oa),Yr(oa,x)}var qo=null,pp=!1,Bg=!1;function mp(h){qo===null?qo=[h]:qo.push(h)}function Db(h){pp=!0,mp(h)}function Cl(){if(!Bg&&qo!==null){Bg=!0;var h=0,m=Un;try{var x=qo;for(Un=1;h<x.length;h++){var N=x[h];do N=N(!0);while(N!==null)}qo=null,pp=!1}catch(z){throw qo!==null&&(qo=qo.slice(h+1)),kt(st,Cl),z}finally{Un=m,Bg=!1}}return null}var tf=[],Ia=0,Ug=null,jg=0,la=[],ms=0,nf=null,Xt=1,So="";function ac(h,m){tf[Ia++]=jg,tf[Ia++]=Ug,Ug=h,jg=m}function Yv(h,m,x){la[ms++]=Xt,la[ms++]=So,la[ms++]=nf,nf=h;var N=Xt;h=So;var z=32-Wt(N)-1;N&=~(1<<z),x+=1;var Y=32-Wt(m)+z;if(30<Y){var le=z-z%5;Y=(N&(1<<le)-1).toString(32),N>>=le,z-=le,Xt=1<<32-Wt(m)+z|x<<z|N,So=Y+h}else Xt=1<<Y|x<<z|N,So=h}function Jv(h){h.return!==null&&(ac(h,1),Yv(h,1,0))}function oc(h){for(;h===Ug;)Ug=tf[--Ia],tf[Ia]=null,jg=tf[--Ia],tf[Ia]=null;for(;h===nf;)nf=la[--ms],la[ms]=null,So=la[--ms],la[ms]=null,Xt=la[--ms],la[ms]=null}var Ts=null,ca=null,ri=!1,xo=null;function Xv(h,m){var x=Il(5,null,null,0);x.elementType="DELETED",x.stateNode=m,x.return=h,m=h.deletions,m===null?(h.deletions=[x],h.flags|=16):m.push(x)}function Qv(h,m){switch(h.tag){case 5:var x=h.type;return m=m.nodeType!==1||x.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(h.stateNode=m,Ts=h,ca=nc(m.firstChild),!0):!1;case 6:return m=h.pendingProps===""||m.nodeType!==3?null:m,m!==null?(h.stateNode=m,Ts=h,ca=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(x=nf!==null?{id:Xt,overflow:So}:null,h.memoizedState={dehydrated:m,treeContext:x,retryLane:1073741824},x=Il(18,null,null,0),x.stateNode=m,x.return=h,h.child=x,Ts=h,ca=null,!0):!1;default:return!1}}function zg(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Vg(h){if(ri){var m=ca;if(m){var x=m;if(!Qv(h,m)){if(zg(h))throw Error(t(418));m=nc(x.nextSibling);var N=Ts;m&&Qv(h,m)?Xv(N,x):(h.flags=h.flags&-4097|2,ri=!1,Ts=h)}}else{if(zg(h))throw Error(t(418));h.flags=h.flags&-4097|2,ri=!1,Ts=h}}}function Gg(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Ts=h}function Td(h){if(h!==Ts)return!1;if(!ri)return Gg(h),ri=!0,!1;var m;if((m=h.tag!==3)&&!(m=h.tag!==5)&&(m=h.type,m=m!=="head"&&m!=="body"&&!Uv(h.type,h.memoizedProps)),m&&(m=ca)){if(zg(h))throw Kv(),Error(t(418));for(;m;)Xv(h,m),m=nc(m.nextSibling)}if(Gg(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(t(317));e:{for(h=h.nextSibling,m=0;h;){if(h.nodeType===8){var x=h.data;if(x==="/$"){if(m===0){ca=nc(h.nextSibling);break e}m--}else x!=="$"&&x!=="$!"&&x!=="$?"||m++}h=h.nextSibling}ca=null}}else ca=Ts?nc(h.stateNode.nextSibling):null;return!0}function Kv(){for(var h=ca;h;)h=nc(h.nextSibling)}function au(){ca=Ts=null,ri=!1}function Ed(h){xo===null?xo=[h]:xo.push(h)}var XT=A.ReactCurrentBatchConfig;function gp(h,m,x){if(h=x.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(t(309));var N=x.stateNode}if(!N)throw Error(t(147,h));var z=N,Y=""+h;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===Y?m.ref:(m=function(le){var Te=z.refs;le===null?delete Te[Y]:Te[Y]=le},m._stringRef=Y,m)}if(typeof h!="string")throw Error(t(284));if(!x._owner)throw Error(t(290,h))}return h}function vp(h,m){throw h=Object.prototype.toString.call(m),Error(t(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h))}function qv(h){var m=h._init;return m(h._payload)}function Zv(h){function m(rt,ze){if(h){var lt=rt.deletions;lt===null?(rt.deletions=[ze],rt.flags|=16):lt.push(ze)}}function x(rt,ze){if(!h)return null;for(;ze!==null;)m(rt,ze),ze=ze.sibling;return null}function N(rt,ze){for(rt=new Map;ze!==null;)ze.key!==null?rt.set(ze.key,ze):rt.set(ze.index,ze),ze=ze.sibling;return rt}function z(rt,ze){return rt=Ud(rt,ze),rt.index=0,rt.sibling=null,rt}function Y(rt,ze,lt){return rt.index=lt,h?(lt=rt.alternate,lt!==null?(lt=lt.index,lt<ze?(rt.flags|=2,ze):lt):(rt.flags|=2,ze)):(rt.flags|=1048576,ze)}function le(rt){return h&&rt.alternate===null&&(rt.flags|=2),rt}function Te(rt,ze,lt,Ht){return ze===null||ze.tag!==6?(ze=hE(lt,rt.mode,Ht),ze.return=rt,ze):(ze=z(ze,lt),ze.return=rt,ze)}function Ue(rt,ze,lt,Ht){var _n=lt.type;return _n===R?Pt(rt,ze,lt.props.children,Ht,lt.key):ze!==null&&(ze.elementType===_n||typeof _n=="object"&&_n!==null&&_n.$$typeof===ee&&qv(_n)===ze.type)?(Ht=z(ze,lt.props),Ht.ref=gp(rt,ze,lt),Ht.return=rt,Ht):(Ht=t2(lt.type,lt.key,lt.props,null,rt.mode,Ht),Ht.ref=gp(rt,ze,lt),Ht.return=rt,Ht)}function ht(rt,ze,lt,Ht){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==lt.containerInfo||ze.stateNode.implementation!==lt.implementation?(ze=pE(lt,rt.mode,Ht),ze.return=rt,ze):(ze=z(ze,lt.children||[]),ze.return=rt,ze)}function Pt(rt,ze,lt,Ht,_n){return ze===null||ze.tag!==7?(ze=Rp(lt,rt.mode,Ht,_n),ze.return=rt,ze):(ze=z(ze,lt),ze.return=rt,ze)}function Bt(rt,ze,lt){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=hE(""+ze,rt.mode,lt),ze.return=rt,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case k:return lt=t2(ze.type,ze.key,ze.props,null,rt.mode,lt),lt.ref=gp(rt,null,ze),lt.return=rt,lt;case O:return ze=pE(ze,rt.mode,lt),ze.return=rt,ze;case ee:var Ht=ze._init;return Bt(rt,Ht(ze._payload),lt)}if(Ee(ze)||oe(ze))return ze=Rp(ze,rt.mode,lt,null),ze.return=rt,ze;vp(rt,ze)}return null}function Rt(rt,ze,lt,Ht){var _n=ze!==null?ze.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number")return _n!==null?null:Te(rt,ze,""+lt,Ht);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case k:return lt.key===_n?Ue(rt,ze,lt,Ht):null;case O:return lt.key===_n?ht(rt,ze,lt,Ht):null;case ee:return _n=lt._init,Rt(rt,ze,_n(lt._payload),Ht)}if(Ee(lt)||oe(lt))return _n!==null?null:Pt(rt,ze,lt,Ht,null);vp(rt,lt)}return null}function ln(rt,ze,lt,Ht,_n){if(typeof Ht=="string"&&Ht!==""||typeof Ht=="number")return rt=rt.get(lt)||null,Te(ze,rt,""+Ht,_n);if(typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case k:return rt=rt.get(Ht.key===null?lt:Ht.key)||null,Ue(ze,rt,Ht,_n);case O:return rt=rt.get(Ht.key===null?lt:Ht.key)||null,ht(ze,rt,Ht,_n);case ee:var Dn=Ht._init;return ln(rt,ze,lt,Dn(Ht._payload),_n)}if(Ee(Ht)||oe(Ht))return rt=rt.get(lt)||null,Pt(ze,rt,Ht,_n,null);vp(ze,Ht)}return null}function mn(rt,ze,lt,Ht){for(var _n=null,Dn=null,kn=ze,zn=ze=0,Ks=null;kn!==null&&zn<lt.length;zn++){kn.index>zn?(Ks=kn,kn=null):Ks=kn.sibling;var Fr=Rt(rt,kn,lt[zn],Ht);if(Fr===null){kn===null&&(kn=Ks);break}h&&kn&&Fr.alternate===null&&m(rt,kn),ze=Y(Fr,ze,zn),Dn===null?_n=Fr:Dn.sibling=Fr,Dn=Fr,kn=Ks}if(zn===lt.length)return x(rt,kn),ri&&ac(rt,zn),_n;if(kn===null){for(;zn<lt.length;zn++)kn=Bt(rt,lt[zn],Ht),kn!==null&&(ze=Y(kn,ze,zn),Dn===null?_n=kn:Dn.sibling=kn,Dn=kn);return ri&&ac(rt,zn),_n}for(kn=N(rt,kn);zn<lt.length;zn++)Ks=ln(kn,rt,zn,lt[zn],Ht),Ks!==null&&(h&&Ks.alternate!==null&&kn.delete(Ks.key===null?zn:Ks.key),ze=Y(Ks,ze,zn),Dn===null?_n=Ks:Dn.sibling=Ks,Dn=Ks);return h&&kn.forEach(function(jd){return m(rt,jd)}),ri&&ac(rt,zn),_n}function vn(rt,ze,lt,Ht){var _n=oe(lt);if(typeof _n!="function")throw Error(t(150));if(lt=_n.call(lt),lt==null)throw Error(t(151));for(var Dn=_n=null,kn=ze,zn=ze=0,Ks=null,Fr=lt.next();kn!==null&&!Fr.done;zn++,Fr=lt.next()){kn.index>zn?(Ks=kn,kn=null):Ks=kn.sibling;var jd=Rt(rt,kn,Fr.value,Ht);if(jd===null){kn===null&&(kn=Ks);break}h&&kn&&jd.alternate===null&&m(rt,kn),ze=Y(jd,ze,zn),Dn===null?_n=jd:Dn.sibling=jd,Dn=jd,kn=Ks}if(Fr.done)return x(rt,kn),ri&&ac(rt,zn),_n;if(kn===null){for(;!Fr.done;zn++,Fr=lt.next())Fr=Bt(rt,Fr.value,Ht),Fr!==null&&(ze=Y(Fr,ze,zn),Dn===null?_n=Fr:Dn.sibling=Fr,Dn=Fr);return ri&&ac(rt,zn),_n}for(kn=N(rt,kn);!Fr.done;zn++,Fr=lt.next())Fr=ln(kn,rt,zn,Fr.value,Ht),Fr!==null&&(h&&Fr.alternate!==null&&kn.delete(Fr.key===null?zn:Fr.key),ze=Y(Fr,ze,zn),Dn===null?_n=Fr:Dn.sibling=Fr,Dn=Fr);return h&&kn.forEach(function(iq){return m(rt,iq)}),ri&&ac(rt,zn),_n}function es(rt,ze,lt,Ht){if(typeof lt=="object"&&lt!==null&&lt.type===R&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case k:e:{for(var _n=lt.key,Dn=ze;Dn!==null;){if(Dn.key===_n){if(_n=lt.type,_n===R){if(Dn.tag===7){x(rt,Dn.sibling),ze=z(Dn,lt.props.children),ze.return=rt,rt=ze;break e}}else if(Dn.elementType===_n||typeof _n=="object"&&_n!==null&&_n.$$typeof===ee&&qv(_n)===Dn.type){x(rt,Dn.sibling),ze=z(Dn,lt.props),ze.ref=gp(rt,Dn,lt),ze.return=rt,rt=ze;break e}x(rt,Dn);break}else m(rt,Dn);Dn=Dn.sibling}lt.type===R?(ze=Rp(lt.props.children,rt.mode,Ht,lt.key),ze.return=rt,rt=ze):(Ht=t2(lt.type,lt.key,lt.props,null,rt.mode,Ht),Ht.ref=gp(rt,ze,lt),Ht.return=rt,rt=Ht)}return le(rt);case O:e:{for(Dn=lt.key;ze!==null;){if(ze.key===Dn)if(ze.tag===4&&ze.stateNode.containerInfo===lt.containerInfo&&ze.stateNode.implementation===lt.implementation){x(rt,ze.sibling),ze=z(ze,lt.children||[]),ze.return=rt,rt=ze;break e}else{x(rt,ze);break}else m(rt,ze);ze=ze.sibling}ze=pE(lt,rt.mode,Ht),ze.return=rt,rt=ze}return le(rt);case ee:return Dn=lt._init,es(rt,ze,Dn(lt._payload),Ht)}if(Ee(lt))return mn(rt,ze,lt,Ht);if(oe(lt))return vn(rt,ze,lt,Ht);vp(rt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"?(lt=""+lt,ze!==null&&ze.tag===6?(x(rt,ze.sibling),ze=z(ze,lt),ze.return=rt,rt=ze):(x(rt,ze),ze=hE(lt,rt.mode,Ht),ze.return=rt,rt=ze),le(rt)):x(rt,ze)}return es}var rf=Zv(!0),yp=Zv(!1),sf=Si(null),af=null,lc=null,Id=null;function of(){Id=lc=af=null}function wp(h){var m=sf.current;ei(sf),h._currentValue=m}function _p(h,m,x){for(;h!==null;){var N=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,N!==null&&(N.childLanes|=m)):N!==null&&(N.childLanes&m)!==m&&(N.childLanes|=m),h===x)break;h=h.return}}function ou(h,m){af=h,Id=lc=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&m)!==0&&(er=!0),h.firstContext=null)}function to(h){var m=h._currentValue;if(Id!==h)if(h={context:h,memoizedValue:m,next:null},lc===null){if(af===null)throw Error(t(308));lc=h,af.dependencies={lanes:0,firstContext:h}}else lc=lc.next=h;return m}var cc=null;function $v(h){cc===null?cc=[h]:cc.push(h)}function bp(h,m,x,N){var z=m.interleaved;return z===null?(x.next=x,$v(m)):(x.next=z.next,z.next=x),m.interleaved=x,Zo(h,N)}function Zo(h,m){h.lanes|=m;var x=h.alternate;for(x!==null&&(x.lanes|=m),x=h,h=h.return;h!==null;)h.childLanes|=m,x=h.alternate,x!==null&&(x.childLanes|=m),x=h,h=h.return;return x.tag===3?x.stateNode:null}var zr=!1;function Zn(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ki(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Vr(h,m){return{eventTime:h,lane:m,tag:0,payload:null,callback:null,next:null}}function ci(h,m,x){var N=h.updateQueue;if(N===null)return null;if(N=N.shared,(kr&2)!==0){var z=N.pending;return z===null?m.next=m:(m.next=z.next,z.next=m),N.pending=m,Zo(h,x)}return z=N.interleaved,z===null?(m.next=m,$v(N)):(m.next=z.next,z.next=m),N.interleaved=m,Zo(h,x)}function Js(h,m,x){if(m=m.updateQueue,m!==null&&(m=m.shared,(x&4194240)!==0)){var N=m.lanes;N&=h.pendingLanes,x|=N,m.lanes=x,Dr(h,x)}}function lf(h,m){var x=h.updateQueue,N=h.alternate;if(N!==null&&(N=N.updateQueue,x===N)){var z=null,Y=null;if(x=x.firstBaseUpdate,x!==null){do{var le={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};Y===null?z=Y=le:Y=Y.next=le,x=x.next}while(x!==null);Y===null?z=Y=m:Y=Y.next=m}else z=Y=m;x={baseState:N.baseState,firstBaseUpdate:z,lastBaseUpdate:Y,shared:N.shared,effects:N.effects},h.updateQueue=x;return}h=x.lastBaseUpdate,h===null?x.firstBaseUpdate=m:h.next=m,x.lastBaseUpdate=m}function xi(h,m,x,N){var z=h.updateQueue;zr=!1;var Y=z.firstBaseUpdate,le=z.lastBaseUpdate,Te=z.shared.pending;if(Te!==null){z.shared.pending=null;var Ue=Te,ht=Ue.next;Ue.next=null,le===null?Y=ht:le.next=ht,le=Ue;var Pt=h.alternate;Pt!==null&&(Pt=Pt.updateQueue,Te=Pt.lastBaseUpdate,Te!==le&&(Te===null?Pt.firstBaseUpdate=ht:Te.next=ht,Pt.lastBaseUpdate=Ue))}if(Y!==null){var Bt=z.baseState;le=0,Pt=ht=Ue=null,Te=Y;do{var Rt=Te.lane,ln=Te.eventTime;if((N&Rt)===Rt){Pt!==null&&(Pt=Pt.next={eventTime:ln,lane:0,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null});e:{var mn=h,vn=Te;switch(Rt=m,ln=x,vn.tag){case 1:if(mn=vn.payload,typeof mn=="function"){Bt=mn.call(ln,Bt,Rt);break e}Bt=mn;break e;case 3:mn.flags=mn.flags&-65537|128;case 0:if(mn=vn.payload,Rt=typeof mn=="function"?mn.call(ln,Bt,Rt):mn,Rt==null)break e;Bt=q({},Bt,Rt);break e;case 2:zr=!0}}Te.callback!==null&&Te.lane!==0&&(h.flags|=64,Rt=z.effects,Rt===null?z.effects=[Te]:Rt.push(Te))}else ln={eventTime:ln,lane:Rt,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},Pt===null?(ht=Pt=ln,Ue=Bt):Pt=Pt.next=ln,le|=Rt;if(Te=Te.next,Te===null){if(Te=z.shared.pending,Te===null)break;Rt=Te,Te=Rt.next,Rt.next=null,z.lastBaseUpdate=Rt,z.shared.pending=null}}while(!0);if(Pt===null&&(Ue=Bt),z.baseState=Ue,z.firstBaseUpdate=ht,z.lastBaseUpdate=Pt,m=z.shared.interleaved,m!==null){z=m;do le|=z.lane,z=z.next;while(z!==m)}else Y===null&&(z.shared.lanes=0);Lp|=le,h.lanes=le,h.memoizedState=Bt}}function Ld(h,m,x){if(h=m.effects,m.effects=null,h!==null)for(m=0;m<h.length;m++){var N=h[m],z=N.callback;if(z!==null){if(N.callback=null,N=x,typeof z!="function")throw Error(t(191,z));z.call(N)}}}var Ml={},no=Si(Ml),cf=Si(Ml),uc=Si(Ml);function Hi(h){if(h===Ml)throw Error(t(174));return h}function Sp(h,m){switch(Yr(uc,m),Yr(cf,h),Yr(no,Ml),h=m.nodeType,h){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:$e(null,"");break;default:h=h===8?m.parentNode:m,m=h.namespaceURI||null,h=h.tagName,m=$e(m,h)}ei(no),Yr(no,m)}function lu(){ei(no),ei(cf),ei(uc)}function uf(h){Hi(uc.current);var m=Hi(no.current),x=$e(m,h.type);m!==x&&(Yr(cf,h),Yr(no,x))}function Nd(h){cf.current===h&&(ei(no),ei(cf))}var ii=Si(0);function $o(h){for(var m=h;m!==null;){if(m.tag===13){var x=m.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Dd=[];function Al(){for(var h=0;h<Dd.length;h++)Dd[h]._workInProgressVersionPrimary=null;Dd.length=0}var ff=A.ReactCurrentDispatcher,df=A.ReactCurrentBatchConfig,fc=0,ti=null,Ci=null,Er=null,el=!1,Xs=!1,cu=0,La=0;function Es(){throw Error(t(321))}function xp(h,m){if(m===null)return!1;for(var x=0;x<m.length&&x<h.length;x++)if(!Za(h[x],m[x]))return!1;return!0}function Cp(h,m,x,N,z,Y){if(fc=Y,ti=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,ff.current=h===null||h.memoizedState===null?Ub:jb,h=x(N,z),Xs){Y=0;do{if(Xs=!1,cu=0,25<=Y)throw Error(t(301));Y+=1,Er=Ci=null,m.updateQueue=null,ff.current=zb,h=x(N,z)}while(Xs)}if(ff.current=Kg,m=Ci!==null&&Ci.next!==null,fc=0,Er=Ci=ti=null,el=!1,m)throw Error(t(300));return h}function ey(){var h=cu!==0;return cu=0,h}function Is(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?ti.memoizedState=Er=h:Er=Er.next=h,Er}function ro(){if(Ci===null){var h=ti.alternate;h=h!==null?h.memoizedState:null}else h=Ci.next;var m=Er===null?ti.memoizedState:Er.next;if(m!==null)Er=m,Ci=h;else{if(h===null)throw Error(t(310));Ci=h,h={memoizedState:Ci.memoizedState,baseState:Ci.baseState,baseQueue:Ci.baseQueue,queue:Ci.queue,next:null},Er===null?ti.memoizedState=Er=h:Er=Er.next=h}return Er}function kd(h,m){return typeof m=="function"?m(h):m}function Mp(h){var m=ro(),x=m.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=h;var N=Ci,z=N.baseQueue,Y=x.pending;if(Y!==null){if(z!==null){var le=z.next;z.next=Y.next,Y.next=le}N.baseQueue=z=Y,x.pending=null}if(z!==null){Y=z.next,N=N.baseState;var Te=le=null,Ue=null,ht=Y;do{var Pt=ht.lane;if((fc&Pt)===Pt)Ue!==null&&(Ue=Ue.next={lane:0,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null}),N=ht.hasEagerState?ht.eagerState:h(N,ht.action);else{var Bt={lane:Pt,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null};Ue===null?(Te=Ue=Bt,le=N):Ue=Ue.next=Bt,ti.lanes|=Pt,Lp|=Pt}ht=ht.next}while(ht!==null&&ht!==Y);Ue===null?le=N:Ue.next=Te,Za(N,m.memoizedState)||(er=!0),m.memoizedState=N,m.baseState=le,m.baseQueue=Ue,x.lastRenderedState=N}if(h=x.interleaved,h!==null){z=h;do Y=z.lane,ti.lanes|=Y,Lp|=Y,z=z.next;while(z!==h)}else z===null&&(x.lanes=0);return[m.memoizedState,x.dispatch]}function dc(h){var m=ro(),x=m.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=h;var N=x.dispatch,z=x.pending,Y=m.memoizedState;if(z!==null){x.pending=null;var le=z=z.next;do Y=h(Y,le.action),le=le.next;while(le!==z);Za(Y,m.memoizedState)||(er=!0),m.memoizedState=Y,m.baseQueue===null&&(m.baseState=Y),x.lastRenderedState=Y}return[Y,N]}function ty(){}function ny(h,m){var x=ti,N=ro(),z=m(),Y=!Za(N.memoizedState,z);if(Y&&(N.memoizedState=z,er=!0),N=N.queue,sy(kb.bind(null,x,N,h),[h]),N.getSnapshot!==m||Y||Er!==null&&Er.memoizedState.tag&1){if(x.flags|=2048,tl(9,Ap.bind(null,x,N,z,m),void 0,null),Qs===null)throw Error(t(349));(fc&30)!==0||Hg(x,m,z)}return z}function Hg(h,m,x){h.flags|=16384,h={getSnapshot:m,value:x},m=ti.updateQueue,m===null?(m={lastEffect:null,stores:null},ti.updateQueue=m,m.stores=[h]):(x=m.stores,x===null?m.stores=[h]:x.push(h))}function Ap(h,m,x,N){m.value=x,m.getSnapshot=N,Rb(m)&&ry(h)}function kb(h,m,x){return x(function(){Rb(m)&&ry(h)})}function Rb(h){var m=h.getSnapshot;h=h.value;try{var x=m();return!Za(h,x)}catch{return!0}}function ry(h){var m=Zo(h,1);m!==null&&vc(m,h,1,-1)}function iy(h){var m=Is();return typeof h=="function"&&(h=h()),m.memoizedState=m.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kd,lastRenderedState:h},m.queue=h,h=h.dispatch=hf.bind(null,ti,h),[m.memoizedState,h]}function tl(h,m,x,N){return h={tag:h,create:m,destroy:x,deps:N,next:null},m=ti.updateQueue,m===null?(m={lastEffect:null,stores:null},ti.updateQueue=m,m.lastEffect=h.next=h):(x=m.lastEffect,x===null?m.lastEffect=h.next=h:(N=x.next,x.next=h,h.next=N,m.lastEffect=h)),h}function Pb(){return ro().memoizedState}function Tl(h,m,x,N){var z=Is();ti.flags|=h,z.memoizedState=tl(1|m,x,void 0,N===void 0?null:N)}function Tp(h,m,x,N){var z=ro();N=N===void 0?null:N;var Y=void 0;if(Ci!==null){var le=Ci.memoizedState;if(Y=le.destroy,N!==null&&xp(N,le.deps)){z.memoizedState=tl(m,x,Y,N);return}}ti.flags|=h,z.memoizedState=tl(1|m,x,Y,N)}function ua(h,m){return Tl(8390656,8,h,m)}function sy(h,m){return Tp(2048,8,h,m)}function ay(h,m){return Tp(4,2,h,m)}function Ob(h,m){return Tp(4,4,h,m)}function Fb(h,m){if(typeof m=="function")return h=h(),m(h),function(){m(null)};if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function oy(h,m,x){return x=x!=null?x.concat([h]):null,Tp(4,4,Fb.bind(null,m,h),x)}function Wg(){}function Bb(h,m){var x=ro();m=m===void 0?null:m;var N=x.memoizedState;return N!==null&&m!==null&&xp(m,N[1])?N[0]:(x.memoizedState=[h,m],h)}function io(h,m){var x=ro();m=m===void 0?null:m;var N=x.memoizedState;return N!==null&&m!==null&&xp(m,N[1])?N[0]:(h=h(),x.memoizedState=[h,m],h)}function Yg(h,m,x){return(fc&21)===0?(h.baseState&&(h.baseState=!1,er=!0),h.memoizedState=x):(Za(x,m)||(x=Sn(),ti.lanes|=x,Lp|=x,h.baseState=!0),m)}function QT(h,m){var x=Un;Un=x!==0&&4>x?x:4,h(!0);var N=df.transition;df.transition={};try{h(!1),m()}finally{Un=x,df.transition=N}}function hc(){return ro().memoizedState}function Jg(h,m,x){var N=Fd(h);if(x={lane:N,action:x,hasEagerState:!1,eagerState:null,next:null},Ep(h))Xg(m,x);else if(x=bp(h,m,x,N),x!==null){var z=ao();vc(x,h,N,z),Qg(x,m,N)}}function hf(h,m,x){var N=Fd(h),z={lane:N,action:x,hasEagerState:!1,eagerState:null,next:null};if(Ep(h))Xg(m,z);else{var Y=h.alternate;if(h.lanes===0&&(Y===null||Y.lanes===0)&&(Y=m.lastRenderedReducer,Y!==null))try{var le=m.lastRenderedState,Te=Y(le,x);if(z.hasEagerState=!0,z.eagerState=Te,Za(Te,le)){var Ue=m.interleaved;Ue===null?(z.next=z,$v(m)):(z.next=Ue.next,Ue.next=z),m.interleaved=z;return}}catch{}finally{}x=bp(h,m,z,N),x!==null&&(z=ao(),vc(x,h,N,z),Qg(x,m,N))}}function Ep(h){var m=h.alternate;return h===ti||m!==null&&m===ti}function Xg(h,m){Xs=el=!0;var x=h.pending;x===null?m.next=m:(m.next=x.next,x.next=m),h.pending=m}function Qg(h,m,x){if((x&4194240)!==0){var N=m.lanes;N&=h.pendingLanes,x|=N,m.lanes=x,Dr(h,x)}}var Kg={readContext:to,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useInsertionEffect:Es,useLayoutEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useMutableSource:Es,useSyncExternalStore:Es,useId:Es,unstable_isNewReconciler:!1},Ub={readContext:to,useCallback:function(h,m){return Is().memoizedState=[h,m===void 0?null:m],h},useContext:to,useEffect:ua,useImperativeHandle:function(h,m,x){return x=x!=null?x.concat([h]):null,Tl(4194308,4,Fb.bind(null,m,h),x)},useLayoutEffect:function(h,m){return Tl(4194308,4,h,m)},useInsertionEffect:function(h,m){return Tl(4,2,h,m)},useMemo:function(h,m){var x=Is();return m=m===void 0?null:m,h=h(),x.memoizedState=[h,m],h},useReducer:function(h,m,x){var N=Is();return m=x!==void 0?x(m):m,N.memoizedState=N.baseState=m,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:m},N.queue=h,h=h.dispatch=Jg.bind(null,ti,h),[N.memoizedState,h]},useRef:function(h){var m=Is();return h={current:h},m.memoizedState=h},useState:iy,useDebugValue:Wg,useDeferredValue:function(h){return Is().memoizedState=h},useTransition:function(){var h=iy(!1),m=h[0];return h=QT.bind(null,h[1]),Is().memoizedState=h,[m,h]},useMutableSource:function(){},useSyncExternalStore:function(h,m,x){var N=ti,z=Is();if(ri){if(x===void 0)throw Error(t(407));x=x()}else{if(x=m(),Qs===null)throw Error(t(349));(fc&30)!==0||Hg(N,m,x)}z.memoizedState=x;var Y={value:x,getSnapshot:m};return z.queue=Y,ua(kb.bind(null,N,Y,h),[h]),N.flags|=2048,tl(9,Ap.bind(null,N,Y,x,m),void 0,null),x},useId:function(){var h=Is(),m=Qs.identifierPrefix;if(ri){var x=So,N=Xt;x=(N&~(1<<32-Wt(N)-1)).toString(32)+x,m=":"+m+"R"+x,x=cu++,0<x&&(m+="H"+x.toString(32)),m+=":"}else x=La++,m=":"+m+"r"+x.toString(32)+":";return h.memoizedState=m},unstable_isNewReconciler:!1},jb={readContext:to,useCallback:Bb,useContext:to,useEffect:sy,useImperativeHandle:oy,useInsertionEffect:ay,useLayoutEffect:Ob,useMemo:io,useReducer:Mp,useRef:Pb,useState:function(){return Mp(kd)},useDebugValue:Wg,useDeferredValue:function(h){var m=ro();return Yg(m,Ci.memoizedState,h)},useTransition:function(){var h=Mp(kd)[0],m=ro().memoizedState;return[h,m]},useMutableSource:ty,useSyncExternalStore:ny,useId:hc,unstable_isNewReconciler:!1},zb={readContext:to,useCallback:Bb,useContext:to,useEffect:sy,useImperativeHandle:oy,useInsertionEffect:ay,useLayoutEffect:Ob,useMemo:io,useReducer:dc,useRef:Pb,useState:function(){return dc(kd)},useDebugValue:Wg,useDeferredValue:function(h){var m=ro();return Ci===null?m.memoizedState=h:Yg(m,Ci.memoizedState,h)},useTransition:function(){var h=dc(kd)[0],m=ro().memoizedState;return[h,m]},useMutableSource:ty,useSyncExternalStore:ny,useId:hc,unstable_isNewReconciler:!1};function Co(h,m){if(h&&h.defaultProps){m=q({},m),h=h.defaultProps;for(var x in h)m[x]===void 0&&(m[x]=h[x]);return m}return m}function Ip(h,m,x,N){m=h.memoizedState,x=x(N,m),x=x==null?m:q({},m,x),h.memoizedState=x,h.lanes===0&&(h.updateQueue.baseState=x)}var qg={isMounted:function(h){return(h=h._reactInternals)?fe(h)===h:!1},enqueueSetState:function(h,m,x){h=h._reactInternals;var N=ao(),z=Fd(h),Y=Vr(N,z);Y.payload=m,x!=null&&(Y.callback=x),m=ci(h,Y,z),m!==null&&(vc(m,h,z,N),Js(m,h,z))},enqueueReplaceState:function(h,m,x){h=h._reactInternals;var N=ao(),z=Fd(h),Y=Vr(N,z);Y.tag=1,Y.payload=m,x!=null&&(Y.callback=x),m=ci(h,Y,z),m!==null&&(vc(m,h,z,N),Js(m,h,z))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var x=ao(),N=Fd(h),z=Vr(x,N);z.tag=2,m!=null&&(z.callback=m),m=ci(h,z,N),m!==null&&(vc(m,h,N,x),Js(m,h,N))}};function Vb(h,m,x,N,z,Y,le){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(N,Y,le):m.prototype&&m.prototype.isPureReactComponent?!Ju(x,N)||!Ju(z,Y):!0}function v(h,m,x){var N=!1,z=ic,Y=m.contextType;return typeof Y=="object"&&Y!==null?Y=to(Y):(z=Ys(m)?sc:As.current,N=m.contextTypes,Y=(N=N!=null)?$u(h,z):ic),m=new m(x,Y),h.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=qg,h.stateNode=m,m._reactInternals=h,N&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=z,h.__reactInternalMemoizedMaskedChildContext=Y),m}function y(h,m,x,N){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(x,N),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(x,N),m.state!==h&&qg.enqueueReplaceState(m,m.state,null)}function L(h,m,x,N){var z=h.stateNode;z.props=x,z.state=h.memoizedState,z.refs={},Zn(h);var Y=m.contextType;typeof Y=="object"&&Y!==null?z.context=to(Y):(Y=Ys(m)?sc:As.current,z.context=$u(h,Y)),z.state=h.memoizedState,Y=m.getDerivedStateFromProps,typeof Y=="function"&&(Ip(h,m,Y,x),z.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(m=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),m!==z.state&&qg.enqueueReplaceState(z,z.state,null),xi(h,x,z,N),z.state=h.memoizedState),typeof z.componentDidMount=="function"&&(h.flags|=4194308)}function F(h,m){try{var x="",N=m;do x+=ge(N),N=N.return;while(N);var z=x}catch(Y){z=`
Error generating stack: `+Y.message+`
`+Y.stack}return{value:h,source:m,stack:z,digest:null}}function G(h,m,x){return{value:h,source:null,stack:x??null,digest:m??null}}function Q(h,m){try{console.error(m.value)}catch(x){setTimeout(function(){throw x})}}var xe=typeof WeakMap=="function"?WeakMap:Map;function We(h,m,x){x=Vr(-1,x),x.tag=3,x.payload={element:null};var N=m.value;return x.callback=function(){Qb||(Qb=!0,sE=N),Q(h,m)},x}function St(h,m,x){x=Vr(-1,x),x.tag=3;var N=h.type.getDerivedStateFromError;if(typeof N=="function"){var z=m.value;x.payload=function(){return N(z)},x.callback=function(){Q(h,m)}}var Y=h.stateNode;return Y!==null&&typeof Y.componentDidCatch=="function"&&(x.callback=function(){Q(h,m),typeof N!="function"&&(Pd===null?Pd=new Set([this]):Pd.add(this));var le=m.stack;this.componentDidCatch(m.value,{componentStack:le!==null?le:""})}),x}function Vt(h,m,x){var N=h.pingCache;if(N===null){N=h.pingCache=new xe;var z=new Set;N.set(m,z)}else z=N.get(m),z===void 0&&(z=new Set,N.set(m,z));z.has(x)||(z.add(x),h=JK.bind(null,h,m,x),m.then(h,h))}function cn(h){do{var m;if((m=h.tag===13)&&(m=h.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return h;h=h.return}while(h!==null);return null}function Gn(h,m,x,N,z){return(h.mode&1)===0?(h===m?h.flags|=65536:(h.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(m=Vr(-1,1),m.tag=2,ci(x,m,1))),x.lanes|=1),h):(h.flags|=65536,h.lanes=z,h)}var Ln=A.ReactCurrentOwner,er=!1;function rn(h,m,x,N){m.child=h===null?yp(m,null,x,N):rf(m,h.child,x,N)}function Ls(h,m,x,N,z){x=x.render;var Y=m.ref;return ou(m,z),N=Cp(h,m,x,N,Y,z),x=ey(),h!==null&&!er?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~z,pf(h,m,z)):(ri&&x&&Jv(m),m.flags|=1,rn(h,m,N,z),m.child)}function so(h,m,x,N,z){if(h===null){var Y=x.type;return typeof Y=="function"&&!dE(Y)&&Y.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(m.tag=15,m.type=Y,ct(h,m,Y,N,z)):(h=t2(x.type,null,N,m,m.mode,z),h.ref=m.ref,h.return=m,m.child=h)}if(Y=h.child,(h.lanes&z)===0){var le=Y.memoizedProps;if(x=x.compare,x=x!==null?x:Ju,x(le,N)&&h.ref===m.ref)return pf(h,m,z)}return m.flags|=1,h=Ud(Y,N),h.ref=m.ref,h.return=m,m.child=h}function ct(h,m,x,N,z){if(h!==null){var Y=h.memoizedProps;if(Ju(Y,N)&&h.ref===m.ref)if(er=!1,m.pendingProps=N=Y,(h.lanes&z)!==0)(h.flags&131072)!==0&&(er=!0);else return m.lanes=h.lanes,pf(h,m,z)}return $t(h,m,x,N,z)}function Qe(h,m,x){var N=m.pendingProps,z=N.children,Y=h!==null?h.memoizedState:null;if(N.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yr($g,nl),nl|=x;else{if((x&1073741824)===0)return h=Y!==null?Y.baseLanes|x:x,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:h,cachePool:null,transitions:null},m.updateQueue=null,Yr($g,nl),nl|=h,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=Y!==null?Y.baseLanes:x,Yr($g,nl),nl|=N}else Y!==null?(N=Y.baseLanes|x,m.memoizedState=null):N=x,Yr($g,nl),nl|=N;return rn(h,m,z,x),m.child}function wt(h,m){var x=m.ref;(h===null&&x!==null||h!==null&&h.ref!==x)&&(m.flags|=512,m.flags|=2097152)}function $t(h,m,x,N,z){var Y=Ys(x)?sc:As.current;return Y=$u(m,Y),ou(m,z),x=Cp(h,m,x,N,Y,z),N=ey(),h!==null&&!er?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~z,pf(h,m,z)):(ri&&N&&Jv(m),m.flags|=1,rn(h,m,x,z),m.child)}function yn(h,m,x,N,z){if(Ys(x)){var Y=!0;ef(m)}else Y=!1;if(ou(m,z),m.stateNode===null)Hb(h,m),v(m,x,N),L(m,x,N,z),N=!0;else if(h===null){var le=m.stateNode,Te=m.memoizedProps;le.props=Te;var Ue=le.context,ht=x.contextType;typeof ht=="object"&&ht!==null?ht=to(ht):(ht=Ys(x)?sc:As.current,ht=$u(m,ht));var Pt=x.getDerivedStateFromProps,Bt=typeof Pt=="function"||typeof le.getSnapshotBeforeUpdate=="function";Bt||typeof le.UNSAFE_componentWillReceiveProps!="function"&&typeof le.componentWillReceiveProps!="function"||(Te!==N||Ue!==ht)&&y(m,le,N,ht),zr=!1;var Rt=m.memoizedState;le.state=Rt,xi(m,N,le,z),Ue=m.memoizedState,Te!==N||Rt!==Ue||oa.current||zr?(typeof Pt=="function"&&(Ip(m,x,Pt,N),Ue=m.memoizedState),(Te=zr||Vb(m,x,Te,N,Rt,Ue,ht))?(Bt||typeof le.UNSAFE_componentWillMount!="function"&&typeof le.componentWillMount!="function"||(typeof le.componentWillMount=="function"&&le.componentWillMount(),typeof le.UNSAFE_componentWillMount=="function"&&le.UNSAFE_componentWillMount()),typeof le.componentDidMount=="function"&&(m.flags|=4194308)):(typeof le.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=N,m.memoizedState=Ue),le.props=N,le.state=Ue,le.context=ht,N=Te):(typeof le.componentDidMount=="function"&&(m.flags|=4194308),N=!1)}else{le=m.stateNode,ki(h,m),Te=m.memoizedProps,ht=m.type===m.elementType?Te:Co(m.type,Te),le.props=ht,Bt=m.pendingProps,Rt=le.context,Ue=x.contextType,typeof Ue=="object"&&Ue!==null?Ue=to(Ue):(Ue=Ys(x)?sc:As.current,Ue=$u(m,Ue));var ln=x.getDerivedStateFromProps;(Pt=typeof ln=="function"||typeof le.getSnapshotBeforeUpdate=="function")||typeof le.UNSAFE_componentWillReceiveProps!="function"&&typeof le.componentWillReceiveProps!="function"||(Te!==Bt||Rt!==Ue)&&y(m,le,N,Ue),zr=!1,Rt=m.memoizedState,le.state=Rt,xi(m,N,le,z);var mn=m.memoizedState;Te!==Bt||Rt!==mn||oa.current||zr?(typeof ln=="function"&&(Ip(m,x,ln,N),mn=m.memoizedState),(ht=zr||Vb(m,x,ht,N,Rt,mn,Ue)||!1)?(Pt||typeof le.UNSAFE_componentWillUpdate!="function"&&typeof le.componentWillUpdate!="function"||(typeof le.componentWillUpdate=="function"&&le.componentWillUpdate(N,mn,Ue),typeof le.UNSAFE_componentWillUpdate=="function"&&le.UNSAFE_componentWillUpdate(N,mn,Ue)),typeof le.componentDidUpdate=="function"&&(m.flags|=4),typeof le.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof le.componentDidUpdate!="function"||Te===h.memoizedProps&&Rt===h.memoizedState||(m.flags|=4),typeof le.getSnapshotBeforeUpdate!="function"||Te===h.memoizedProps&&Rt===h.memoizedState||(m.flags|=1024),m.memoizedProps=N,m.memoizedState=mn),le.props=N,le.state=mn,le.context=Ue,N=ht):(typeof le.componentDidUpdate!="function"||Te===h.memoizedProps&&Rt===h.memoizedState||(m.flags|=4),typeof le.getSnapshotBeforeUpdate!="function"||Te===h.memoizedProps&&Rt===h.memoizedState||(m.flags|=1024),N=!1)}return Jn(h,m,x,N,Y,z)}function Jn(h,m,x,N,z,Y){wt(h,m);var le=(m.flags&128)!==0;if(!N&&!le)return z&&Wv(m,x,!1),pf(h,m,Y);N=m.stateNode,Ln.current=m;var Te=le&&typeof x.getDerivedStateFromError!="function"?null:N.render();return m.flags|=1,h!==null&&le?(m.child=rf(m,h.child,null,Y),m.child=rf(m,null,Te,Y)):rn(h,m,Te,Y),m.memoizedState=N.state,z&&Wv(m,x,!0),m.child}function Hn(h){var m=h.stateNode;m.pendingContext?Hv(h,m.pendingContext,m.pendingContext!==m.context):m.context&&Hv(h,m.context,!1),Sp(h,m.containerInfo)}function xr(h,m,x,N,z){return au(),Ed(z),m.flags|=256,rn(h,m,x,N),m.child}var Wi={dehydrated:null,treeContext:null,retryLane:0};function vr(h){return{baseLanes:h,cachePool:null,transitions:null}}function pc(h,m,x){var N=m.pendingProps,z=ii.current,Y=!1,le=(m.flags&128)!==0,Te;if((Te=le)||(Te=h!==null&&h.memoizedState===null?!1:(z&2)!==0),Te?(Y=!0,m.flags&=-129):(h===null||h.memoizedState!==null)&&(z|=1),Yr(ii,z&1),h===null)return Vg(m),h=m.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((m.mode&1)===0?m.lanes=1:h.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(le=N.children,h=N.fallback,Y?(N=m.mode,Y=m.child,le={mode:"hidden",children:le},(N&1)===0&&Y!==null?(Y.childLanes=0,Y.pendingProps=le):Y=n2(le,N,0,null),h=Rp(h,N,x,null),Y.return=m,h.return=m,Y.sibling=h,m.child=Y,m.child.memoizedState=vr(x),m.memoizedState=Wi,h):ly(m,le));if(z=h.memoizedState,z!==null&&(Te=z.dehydrated,Te!==null))return PK(h,m,le,N,Te,z,x);if(Y){Y=N.fallback,le=m.mode,z=h.child,Te=z.sibling;var Ue={mode:"hidden",children:N.children};return(le&1)===0&&m.child!==z?(N=m.child,N.childLanes=0,N.pendingProps=Ue,m.deletions=null):(N=Ud(z,Ue),N.subtreeFlags=z.subtreeFlags&14680064),Te!==null?Y=Ud(Te,Y):(Y=Rp(Y,le,x,null),Y.flags|=2),Y.return=m,N.return=m,N.sibling=Y,m.child=N,N=Y,Y=m.child,le=h.child.memoizedState,le=le===null?vr(x):{baseLanes:le.baseLanes|x,cachePool:null,transitions:le.transitions},Y.memoizedState=le,Y.childLanes=h.childLanes&~x,m.memoizedState=Wi,N}return Y=h.child,h=Y.sibling,N=Ud(Y,{mode:"visible",children:N.children}),(m.mode&1)===0&&(N.lanes=x),N.return=m,N.sibling=null,h!==null&&(x=m.deletions,x===null?(m.deletions=[h],m.flags|=16):x.push(h)),m.child=N,m.memoizedState=null,N}function ly(h,m){return m=n2({mode:"visible",children:m},h.mode,0,null),m.return=h,h.child=m}function Gb(h,m,x,N){return N!==null&&Ed(N),rf(m,h.child,null,x),h=ly(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function PK(h,m,x,N,z,Y,le){if(x)return m.flags&256?(m.flags&=-257,N=G(Error(t(422))),Gb(h,m,le,N)):m.memoizedState!==null?(m.child=h.child,m.flags|=128,null):(Y=N.fallback,z=m.mode,N=n2({mode:"visible",children:N.children},z,0,null),Y=Rp(Y,z,le,null),Y.flags|=2,N.return=m,Y.return=m,N.sibling=Y,m.child=N,(m.mode&1)!==0&&rf(m,h.child,null,le),m.child.memoizedState=vr(le),m.memoizedState=Wi,Y);if((m.mode&1)===0)return Gb(h,m,le,null);if(z.data==="$!"){if(N=z.nextSibling&&z.nextSibling.dataset,N)var Te=N.dgst;return N=Te,Y=Error(t(419)),N=G(Y,N,void 0),Gb(h,m,le,N)}if(Te=(le&h.childLanes)!==0,er||Te){if(N=Qs,N!==null){switch(le&-le){case 4:z=2;break;case 16:z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:z=32;break;case 536870912:z=268435456;break;default:z=0}z=(z&(N.suspendedLanes|le))!==0?0:z,z!==0&&z!==Y.retryLane&&(Y.retryLane=z,Zo(h,z),vc(N,h,z,-1))}return fE(),N=G(Error(t(421))),Gb(h,m,le,N)}return z.data==="$?"?(m.flags|=128,m.child=h.child,m=XK.bind(null,h),z._reactRetry=m,null):(h=Y.treeContext,ca=nc(z.nextSibling),Ts=m,ri=!0,xo=null,h!==null&&(la[ms++]=Xt,la[ms++]=So,la[ms++]=nf,Xt=h.id,So=h.overflow,nf=m),m=ly(m,N.children),m.flags|=4096,m)}function vP(h,m,x){h.lanes|=m;var N=h.alternate;N!==null&&(N.lanes|=m),_p(h.return,m,x)}function KT(h,m,x,N,z){var Y=h.memoizedState;Y===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:N,tail:x,tailMode:z}:(Y.isBackwards=m,Y.rendering=null,Y.renderingStartTime=0,Y.last=N,Y.tail=x,Y.tailMode=z)}function yP(h,m,x){var N=m.pendingProps,z=N.revealOrder,Y=N.tail;if(rn(h,m,N.children,x),N=ii.current,(N&2)!==0)N=N&1|2,m.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&vP(h,x,m);else if(h.tag===19)vP(h,x,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}N&=1}if(Yr(ii,N),(m.mode&1)===0)m.memoizedState=null;else switch(z){case"forwards":for(x=m.child,z=null;x!==null;)h=x.alternate,h!==null&&$o(h)===null&&(z=x),x=x.sibling;x=z,x===null?(z=m.child,m.child=null):(z=x.sibling,x.sibling=null),KT(m,!1,z,x,Y);break;case"backwards":for(x=null,z=m.child,m.child=null;z!==null;){if(h=z.alternate,h!==null&&$o(h)===null){m.child=z;break}h=z.sibling,z.sibling=x,x=z,z=h}KT(m,!0,x,null,Y);break;case"together":KT(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Hb(h,m){(m.mode&1)===0&&h!==null&&(h.alternate=null,m.alternate=null,m.flags|=2)}function pf(h,m,x){if(h!==null&&(m.dependencies=h.dependencies),Lp|=m.lanes,(x&m.childLanes)===0)return null;if(h!==null&&m.child!==h.child)throw Error(t(153));if(m.child!==null){for(h=m.child,x=Ud(h,h.pendingProps),m.child=x,x.return=m;h.sibling!==null;)h=h.sibling,x=x.sibling=Ud(h,h.pendingProps),x.return=m;x.sibling=null}return m.child}function OK(h,m,x){switch(m.tag){case 3:Hn(m),au();break;case 5:uf(m);break;case 1:Ys(m.type)&&ef(m);break;case 4:Sp(m,m.stateNode.containerInfo);break;case 10:var N=m.type._context,z=m.memoizedProps.value;Yr(sf,N._currentValue),N._currentValue=z;break;case 13:if(N=m.memoizedState,N!==null)return N.dehydrated!==null?(Yr(ii,ii.current&1),m.flags|=128,null):(x&m.child.childLanes)!==0?pc(h,m,x):(Yr(ii,ii.current&1),h=pf(h,m,x),h!==null?h.sibling:null);Yr(ii,ii.current&1);break;case 19:if(N=(x&m.childLanes)!==0,(h.flags&128)!==0){if(N)return yP(h,m,x);m.flags|=128}if(z=m.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Yr(ii,ii.current),N)break;return null;case 22:case 23:return m.lanes=0,Qe(h,m,x)}return pf(h,m,x)}var wP,qT,_P,bP;wP=function(h,m){for(var x=m.child;x!==null;){if(x.tag===5||x.tag===6)h.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},qT=function(){},_P=function(h,m,x,N){var z=h.memoizedProps;if(z!==N){h=m.stateNode,Hi(no.current);var Y=null;switch(x){case"input":z=ce(h,z),N=ce(h,N),Y=[];break;case"select":z=q({},z,{value:void 0}),N=q({},N,{value:void 0}),Y=[];break;case"textarea":z=W(h,z),N=W(h,N),Y=[];break;default:typeof z.onClick!="function"&&typeof N.onClick=="function"&&(h.onclick=fp)}Me(x,N);var le;x=null;for(ht in z)if(!N.hasOwnProperty(ht)&&z.hasOwnProperty(ht)&&z[ht]!=null)if(ht==="style"){var Te=z[ht];for(le in Te)Te.hasOwnProperty(le)&&(x||(x={}),x[le]="")}else ht!=="dangerouslySetInnerHTML"&&ht!=="children"&&ht!=="suppressContentEditableWarning"&&ht!=="suppressHydrationWarning"&&ht!=="autoFocus"&&(i.hasOwnProperty(ht)?Y||(Y=[]):(Y=Y||[]).push(ht,null));for(ht in N){var Ue=N[ht];if(Te=z!=null?z[ht]:void 0,N.hasOwnProperty(ht)&&Ue!==Te&&(Ue!=null||Te!=null))if(ht==="style")if(Te){for(le in Te)!Te.hasOwnProperty(le)||Ue&&Ue.hasOwnProperty(le)||(x||(x={}),x[le]="");for(le in Ue)Ue.hasOwnProperty(le)&&Te[le]!==Ue[le]&&(x||(x={}),x[le]=Ue[le])}else x||(Y||(Y=[]),Y.push(ht,x)),x=Ue;else ht==="dangerouslySetInnerHTML"?(Ue=Ue?Ue.__html:void 0,Te=Te?Te.__html:void 0,Ue!=null&&Te!==Ue&&(Y=Y||[]).push(ht,Ue)):ht==="children"?typeof Ue!="string"&&typeof Ue!="number"||(Y=Y||[]).push(ht,""+Ue):ht!=="suppressContentEditableWarning"&&ht!=="suppressHydrationWarning"&&(i.hasOwnProperty(ht)?(Ue!=null&&ht==="onScroll"&&$r("scroll",h),Y||Te===Ue||(Y=[])):(Y=Y||[]).push(ht,Ue))}x&&(Y=Y||[]).push("style",x);var ht=Y;(m.updateQueue=ht)&&(m.flags|=4)}},bP=function(h,m,x,N){x!==N&&(m.flags|=4)};function cy(h,m){if(!ri)switch(h.tailMode){case"hidden":m=h.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?h.tail=null:x.sibling=null;break;case"collapsed":x=h.tail;for(var N=null;x!==null;)x.alternate!==null&&(N=x),x=x.sibling;N===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:N.sibling=null}}function Na(h){var m=h.alternate!==null&&h.alternate.child===h.child,x=0,N=0;if(m)for(var z=h.child;z!==null;)x|=z.lanes|z.childLanes,N|=z.subtreeFlags&14680064,N|=z.flags&14680064,z.return=h,z=z.sibling;else for(z=h.child;z!==null;)x|=z.lanes|z.childLanes,N|=z.subtreeFlags,N|=z.flags,z.return=h,z=z.sibling;return h.subtreeFlags|=N,h.childLanes=x,m}function FK(h,m,x){var N=m.pendingProps;switch(oc(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Na(m),null;case 1:return Ys(m.type)&&dp(),Na(m),null;case 3:return N=m.stateNode,lu(),ei(oa),ei(As),Al(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(h===null||h.child===null)&&(Td(m)?m.flags|=4:h===null||h.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,xo!==null&&(lE(xo),xo=null))),qT(h,m),Na(m),null;case 5:Nd(m);var z=Hi(uc.current);if(x=m.type,h!==null&&m.stateNode!=null)_P(h,m,x,N,z),h.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!N){if(m.stateNode===null)throw Error(t(166));return Na(m),null}if(h=Hi(no.current),Td(m)){N=m.stateNode,x=m.type;var Y=m.memoizedProps;switch(N[$i]=m,N[Ad]=Y,h=(m.mode&1)!==0,x){case"dialog":$r("cancel",N),$r("close",N);break;case"iframe":case"object":case"embed":$r("load",N);break;case"video":case"audio":for(z=0;z<iu.length;z++)$r(iu[z],N);break;case"source":$r("error",N);break;case"img":case"image":case"link":$r("error",N),$r("load",N);break;case"details":$r("toggle",N);break;case"input":_t(N,Y),$r("invalid",N);break;case"select":N._wrapperState={wasMultiple:!!Y.multiple},$r("invalid",N);break;case"textarea":re(N,Y),$r("invalid",N)}Me(x,Y),z=null;for(var le in Y)if(Y.hasOwnProperty(le)){var Te=Y[le];le==="children"?typeof Te=="string"?N.textContent!==Te&&(Y.suppressHydrationWarning!==!0&&up(N.textContent,Te,h),z=["children",Te]):typeof Te=="number"&&N.textContent!==""+Te&&(Y.suppressHydrationWarning!==!0&&up(N.textContent,Te,h),z=["children",""+Te]):i.hasOwnProperty(le)&&Te!=null&&le==="onScroll"&&$r("scroll",N)}switch(x){case"input":Ke(N),Ce(N,Y,!0);break;case"textarea":Ke(N),ve(N);break;case"select":case"option":break;default:typeof Y.onClick=="function"&&(N.onclick=fp)}N=z,m.updateQueue=N,N!==null&&(m.flags|=4)}else{le=z.nodeType===9?z:z.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=Je(x)),h==="http://www.w3.org/1999/xhtml"?x==="script"?(h=le.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof N.is=="string"?h=le.createElement(x,{is:N.is}):(h=le.createElement(x),x==="select"&&(le=h,N.multiple?le.multiple=!0:N.size&&(le.size=N.size))):h=le.createElementNS(h,x),h[$i]=m,h[Ad]=N,wP(h,m,!1,!1),m.stateNode=h;e:{switch(le=tt(x,N),x){case"dialog":$r("cancel",h),$r("close",h),z=N;break;case"iframe":case"object":case"embed":$r("load",h),z=N;break;case"video":case"audio":for(z=0;z<iu.length;z++)$r(iu[z],h);z=N;break;case"source":$r("error",h),z=N;break;case"img":case"image":case"link":$r("error",h),$r("load",h),z=N;break;case"details":$r("toggle",h),z=N;break;case"input":_t(h,N),z=ce(h,N),$r("invalid",h);break;case"option":z=N;break;case"select":h._wrapperState={wasMultiple:!!N.multiple},z=q({},N,{value:void 0}),$r("invalid",h);break;case"textarea":re(h,N),z=W(h,N),$r("invalid",h);break;default:z=N}Me(x,z),Te=z;for(Y in Te)if(Te.hasOwnProperty(Y)){var Ue=Te[Y];Y==="style"?qe(h,Ue):Y==="dangerouslySetInnerHTML"?(Ue=Ue?Ue.__html:void 0,Ue!=null&&pt(h,Ue)):Y==="children"?typeof Ue=="string"?(x!=="textarea"||Ue!=="")&&Ft(h,Ue):typeof Ue=="number"&&Ft(h,""+Ue):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(i.hasOwnProperty(Y)?Ue!=null&&Y==="onScroll"&&$r("scroll",h):Ue!=null&&M(h,Y,Ue,le))}switch(x){case"input":Ke(h),Ce(h,N,!1);break;case"textarea":Ke(h),ve(h);break;case"option":N.value!=null&&h.setAttribute("value",""+ke(N.value));break;case"select":h.multiple=!!N.multiple,Y=N.value,Y!=null?Z(h,!!N.multiple,Y,!1):N.defaultValue!=null&&Z(h,!!N.multiple,N.defaultValue,!0);break;default:typeof z.onClick=="function"&&(h.onclick=fp)}switch(x){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}}N&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Na(m),null;case 6:if(h&&m.stateNode!=null)bP(h,m,h.memoizedProps,N);else{if(typeof N!="string"&&m.stateNode===null)throw Error(t(166));if(x=Hi(uc.current),Hi(no.current),Td(m)){if(N=m.stateNode,x=m.memoizedProps,N[$i]=m,(Y=N.nodeValue!==x)&&(h=Ts,h!==null))switch(h.tag){case 3:up(N.nodeValue,x,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&up(N.nodeValue,x,(h.mode&1)!==0)}Y&&(m.flags|=4)}else N=(x.nodeType===9?x:x.ownerDocument).createTextNode(N),N[$i]=m,m.stateNode=N}return Na(m),null;case 13:if(ei(ii),N=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(ri&&ca!==null&&(m.mode&1)!==0&&(m.flags&128)===0)Kv(),au(),m.flags|=98560,Y=!1;else if(Y=Td(m),N!==null&&N.dehydrated!==null){if(h===null){if(!Y)throw Error(t(318));if(Y=m.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(t(317));Y[$i]=m}else au(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Na(m),Y=!1}else xo!==null&&(lE(xo),xo=null),Y=!0;if(!Y)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=x,m):(N=N!==null,N!==(h!==null&&h.memoizedState!==null)&&N&&(m.child.flags|=8192,(m.mode&1)!==0&&(h===null||(ii.current&1)!==0?Ns===0&&(Ns=3):fE())),m.updateQueue!==null&&(m.flags|=4),Na(m),null);case 4:return lu(),qT(h,m),h===null&&xd(m.stateNode.containerInfo),Na(m),null;case 10:return wp(m.type._context),Na(m),null;case 17:return Ys(m.type)&&dp(),Na(m),null;case 19:if(ei(ii),Y=m.memoizedState,Y===null)return Na(m),null;if(N=(m.flags&128)!==0,le=Y.rendering,le===null)if(N)cy(Y,!1);else{if(Ns!==0||h!==null&&(h.flags&128)!==0)for(h=m.child;h!==null;){if(le=$o(h),le!==null){for(m.flags|=128,cy(Y,!1),N=le.updateQueue,N!==null&&(m.updateQueue=N,m.flags|=4),m.subtreeFlags=0,N=x,x=m.child;x!==null;)Y=x,h=N,Y.flags&=14680066,le=Y.alternate,le===null?(Y.childLanes=0,Y.lanes=h,Y.child=null,Y.subtreeFlags=0,Y.memoizedProps=null,Y.memoizedState=null,Y.updateQueue=null,Y.dependencies=null,Y.stateNode=null):(Y.childLanes=le.childLanes,Y.lanes=le.lanes,Y.child=le.child,Y.subtreeFlags=0,Y.deletions=null,Y.memoizedProps=le.memoizedProps,Y.memoizedState=le.memoizedState,Y.updateQueue=le.updateQueue,Y.type=le.type,h=le.dependencies,Y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),x=x.sibling;return Yr(ii,ii.current&1|2),m.child}h=h.sibling}Y.tail!==null&&me()>e0&&(m.flags|=128,N=!0,cy(Y,!1),m.lanes=4194304)}else{if(!N)if(h=$o(le),h!==null){if(m.flags|=128,N=!0,x=h.updateQueue,x!==null&&(m.updateQueue=x,m.flags|=4),cy(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!le.alternate&&!ri)return Na(m),null}else 2*me()-Y.renderingStartTime>e0&&x!==1073741824&&(m.flags|=128,N=!0,cy(Y,!1),m.lanes=4194304);Y.isBackwards?(le.sibling=m.child,m.child=le):(x=Y.last,x!==null?x.sibling=le:m.child=le,Y.last=le)}return Y.tail!==null?(m=Y.tail,Y.rendering=m,Y.tail=m.sibling,Y.renderingStartTime=me(),m.sibling=null,x=ii.current,Yr(ii,N?x&1|2:x&1),m):(Na(m),null);case 22:case 23:return uE(),N=m.memoizedState!==null,h!==null&&h.memoizedState!==null!==N&&(m.flags|=8192),N&&(m.mode&1)!==0?(nl&1073741824)!==0&&(Na(m),m.subtreeFlags&6&&(m.flags|=8192)):Na(m),null;case 24:return null;case 25:return null}throw Error(t(156,m.tag))}function BK(h,m){switch(oc(m),m.tag){case 1:return Ys(m.type)&&dp(),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return lu(),ei(oa),ei(As),Al(),h=m.flags,(h&65536)!==0&&(h&128)===0?(m.flags=h&-65537|128,m):null;case 5:return Nd(m),null;case 13:if(ei(ii),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(t(340));au()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return ei(ii),null;case 4:return lu(),null;case 10:return wp(m.type._context),null;case 22:case 23:return uE(),null;case 24:return null;default:return null}}var Wb=!1,Da=!1,UK=typeof WeakSet=="function"?WeakSet:Set,hn=null;function Zg(h,m){var x=h.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(N){Yi(h,m,N)}else x.current=null}function ZT(h,m,x){try{x()}catch(N){Yi(h,m,N)}}var SP=!1;function jK(h,m){if(Md=wi,h=gi(),fs(h)){if("selectionStart"in h)var x={start:h.selectionStart,end:h.selectionEnd};else e:{x=(x=h.ownerDocument)&&x.defaultView||window;var N=x.getSelection&&x.getSelection();if(N&&N.rangeCount!==0){x=N.anchorNode;var z=N.anchorOffset,Y=N.focusNode;N=N.focusOffset;try{x.nodeType,Y.nodeType}catch{x=null;break e}var le=0,Te=-1,Ue=-1,ht=0,Pt=0,Bt=h,Rt=null;t:for(;;){for(var ln;Bt!==x||z!==0&&Bt.nodeType!==3||(Te=le+z),Bt!==Y||N!==0&&Bt.nodeType!==3||(Ue=le+N),Bt.nodeType===3&&(le+=Bt.nodeValue.length),(ln=Bt.firstChild)!==null;)Rt=Bt,Bt=ln;for(;;){if(Bt===h)break t;if(Rt===x&&++ht===z&&(Te=le),Rt===Y&&++Pt===N&&(Ue=le),(ln=Bt.nextSibling)!==null)break;Bt=Rt,Rt=Bt.parentNode}Bt=ln}x=Te===-1||Ue===-1?null:{start:Te,end:Ue}}else x=null}x=x||{start:0,end:0}}else x=null;for(Bv={focusedElem:h,selectionRange:x},wi=!1,hn=m;hn!==null;)if(m=hn,h=m.child,(m.subtreeFlags&1028)!==0&&h!==null)h.return=m,hn=h;else for(;hn!==null;){m=hn;try{var mn=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(mn!==null){var vn=mn.memoizedProps,es=mn.memoizedState,rt=m.stateNode,ze=rt.getSnapshotBeforeUpdate(m.elementType===m.type?vn:Co(m.type,vn),es);rt.__reactInternalSnapshotBeforeUpdate=ze}break;case 3:var lt=m.stateNode.containerInfo;lt.nodeType===1?lt.textContent="":lt.nodeType===9&&lt.documentElement&&lt.removeChild(lt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ht){Yi(m,m.return,Ht)}if(h=m.sibling,h!==null){h.return=m.return,hn=h;break}hn=m.return}return mn=SP,SP=!1,mn}function uy(h,m,x){var N=m.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var z=N=N.next;do{if((z.tag&h)===h){var Y=z.destroy;z.destroy=void 0,Y!==void 0&&ZT(m,x,Y)}z=z.next}while(z!==N)}}function Yb(h,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var x=m=m.next;do{if((x.tag&h)===h){var N=x.create;x.destroy=N()}x=x.next}while(x!==m)}}function $T(h){var m=h.ref;if(m!==null){var x=h.stateNode;switch(h.tag){case 5:h=x;break;default:h=x}typeof m=="function"?m(h):m.current=h}}function xP(h){var m=h.alternate;m!==null&&(h.alternate=null,xP(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&(delete m[$i],delete m[Ad],delete m[Zu],delete m[Pg],delete m[Og])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function CP(h){return h.tag===5||h.tag===3||h.tag===4}function MP(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||CP(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function eE(h,m,x){var N=h.tag;if(N===5||N===6)h=h.stateNode,m?x.nodeType===8?x.parentNode.insertBefore(h,m):x.insertBefore(h,m):(x.nodeType===8?(m=x.parentNode,m.insertBefore(h,x)):(m=x,m.appendChild(h)),x=x._reactRootContainer,x!=null||m.onclick!==null||(m.onclick=fp));else if(N!==4&&(h=h.child,h!==null))for(eE(h,m,x),h=h.sibling;h!==null;)eE(h,m,x),h=h.sibling}function tE(h,m,x){var N=h.tag;if(N===5||N===6)h=h.stateNode,m?x.insertBefore(h,m):x.appendChild(h);else if(N!==4&&(h=h.child,h!==null))for(tE(h,m,x),h=h.sibling;h!==null;)tE(h,m,x),h=h.sibling}var fa=null,mc=!1;function Rd(h,m,x){for(x=x.child;x!==null;)AP(h,m,x),x=x.sibling}function AP(h,m,x){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Ut,x)}catch{}switch(x.tag){case 5:Da||Zg(x,m);case 6:var N=fa,z=mc;fa=null,Rd(h,m,x),fa=N,mc=z,fa!==null&&(mc?(h=fa,x=x.stateNode,h.nodeType===8?h.parentNode.removeChild(x):h.removeChild(x)):fa.removeChild(x.stateNode));break;case 18:fa!==null&&(mc?(h=fa,x=x.stateNode,h.nodeType===8?Rg(h.parentNode,x):h.nodeType===1&&Rg(h,x),Ma(h)):Rg(fa,x.stateNode));break;case 4:N=fa,z=mc,fa=x.stateNode.containerInfo,mc=!0,Rd(h,m,x),fa=N,mc=z;break;case 0:case 11:case 14:case 15:if(!Da&&(N=x.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){z=N=N.next;do{var Y=z,le=Y.destroy;Y=Y.tag,le!==void 0&&((Y&2)!==0||(Y&4)!==0)&&ZT(x,m,le),z=z.next}while(z!==N)}Rd(h,m,x);break;case 1:if(!Da&&(Zg(x,m),N=x.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=x.memoizedProps,N.state=x.memoizedState,N.componentWillUnmount()}catch(Te){Yi(x,m,Te)}Rd(h,m,x);break;case 21:Rd(h,m,x);break;case 22:x.mode&1?(Da=(N=Da)||x.memoizedState!==null,Rd(h,m,x),Da=N):Rd(h,m,x);break;default:Rd(h,m,x)}}function TP(h){var m=h.updateQueue;if(m!==null){h.updateQueue=null;var x=h.stateNode;x===null&&(x=h.stateNode=new UK),m.forEach(function(N){var z=QK.bind(null,h,N);x.has(N)||(x.add(N),N.then(z,z))})}}function gc(h,m){var x=m.deletions;if(x!==null)for(var N=0;N<x.length;N++){var z=x[N];try{var Y=h,le=m,Te=le;e:for(;Te!==null;){switch(Te.tag){case 5:fa=Te.stateNode,mc=!1;break e;case 3:fa=Te.stateNode.containerInfo,mc=!0;break e;case 4:fa=Te.stateNode.containerInfo,mc=!0;break e}Te=Te.return}if(fa===null)throw Error(t(160));AP(Y,le,z),fa=null,mc=!1;var Ue=z.alternate;Ue!==null&&(Ue.return=null),z.return=null}catch(ht){Yi(z,m,ht)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)EP(m,h),m=m.sibling}function EP(h,m){var x=h.alternate,N=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(gc(m,h),uu(h),N&4){try{uy(3,h,h.return),Yb(3,h)}catch(vn){Yi(h,h.return,vn)}try{uy(5,h,h.return)}catch(vn){Yi(h,h.return,vn)}}break;case 1:gc(m,h),uu(h),N&512&&x!==null&&Zg(x,x.return);break;case 5:if(gc(m,h),uu(h),N&512&&x!==null&&Zg(x,x.return),h.flags&32){var z=h.stateNode;try{Ft(z,"")}catch(vn){Yi(h,h.return,vn)}}if(N&4&&(z=h.stateNode,z!=null)){var Y=h.memoizedProps,le=x!==null?x.memoizedProps:Y,Te=h.type,Ue=h.updateQueue;if(h.updateQueue=null,Ue!==null)try{Te==="input"&&Y.type==="radio"&&Y.name!=null&&_e(z,Y),tt(Te,le);var ht=tt(Te,Y);for(le=0;le<Ue.length;le+=2){var Pt=Ue[le],Bt=Ue[le+1];Pt==="style"?qe(z,Bt):Pt==="dangerouslySetInnerHTML"?pt(z,Bt):Pt==="children"?Ft(z,Bt):M(z,Pt,Bt,ht)}switch(Te){case"input":Ne(z,Y);break;case"textarea":be(z,Y);break;case"select":var Rt=z._wrapperState.wasMultiple;z._wrapperState.wasMultiple=!!Y.multiple;var ln=Y.value;ln!=null?Z(z,!!Y.multiple,ln,!1):Rt!==!!Y.multiple&&(Y.defaultValue!=null?Z(z,!!Y.multiple,Y.defaultValue,!0):Z(z,!!Y.multiple,Y.multiple?[]:"",!1))}z[Ad]=Y}catch(vn){Yi(h,h.return,vn)}}break;case 6:if(gc(m,h),uu(h),N&4){if(h.stateNode===null)throw Error(t(162));z=h.stateNode,Y=h.memoizedProps;try{z.nodeValue=Y}catch(vn){Yi(h,h.return,vn)}}break;case 3:if(gc(m,h),uu(h),N&4&&x!==null&&x.memoizedState.isDehydrated)try{Ma(m.containerInfo)}catch(vn){Yi(h,h.return,vn)}break;case 4:gc(m,h),uu(h);break;case 13:gc(m,h),uu(h),z=h.child,z.flags&8192&&(Y=z.memoizedState!==null,z.stateNode.isHidden=Y,!Y||z.alternate!==null&&z.alternate.memoizedState!==null||(iE=me())),N&4&&TP(h);break;case 22:if(Pt=x!==null&&x.memoizedState!==null,h.mode&1?(Da=(ht=Da)||Pt,gc(m,h),Da=ht):gc(m,h),uu(h),N&8192){if(ht=h.memoizedState!==null,(h.stateNode.isHidden=ht)&&!Pt&&(h.mode&1)!==0)for(hn=h,Pt=h.child;Pt!==null;){for(Bt=hn=Pt;hn!==null;){switch(Rt=hn,ln=Rt.child,Rt.tag){case 0:case 11:case 14:case 15:uy(4,Rt,Rt.return);break;case 1:Zg(Rt,Rt.return);var mn=Rt.stateNode;if(typeof mn.componentWillUnmount=="function"){N=Rt,x=Rt.return;try{m=N,mn.props=m.memoizedProps,mn.state=m.memoizedState,mn.componentWillUnmount()}catch(vn){Yi(N,x,vn)}}break;case 5:Zg(Rt,Rt.return);break;case 22:if(Rt.memoizedState!==null){NP(Bt);continue}}ln!==null?(ln.return=Rt,hn=ln):NP(Bt)}Pt=Pt.sibling}e:for(Pt=null,Bt=h;;){if(Bt.tag===5){if(Pt===null){Pt=Bt;try{z=Bt.stateNode,ht?(Y=z.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none"):(Te=Bt.stateNode,Ue=Bt.memoizedProps.style,le=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null,Te.style.display=vt("display",le))}catch(vn){Yi(h,h.return,vn)}}}else if(Bt.tag===6){if(Pt===null)try{Bt.stateNode.nodeValue=ht?"":Bt.memoizedProps}catch(vn){Yi(h,h.return,vn)}}else if((Bt.tag!==22&&Bt.tag!==23||Bt.memoizedState===null||Bt===h)&&Bt.child!==null){Bt.child.return=Bt,Bt=Bt.child;continue}if(Bt===h)break e;for(;Bt.sibling===null;){if(Bt.return===null||Bt.return===h)break e;Pt===Bt&&(Pt=null),Bt=Bt.return}Pt===Bt&&(Pt=null),Bt.sibling.return=Bt.return,Bt=Bt.sibling}}break;case 19:gc(m,h),uu(h),N&4&&TP(h);break;case 21:break;default:gc(m,h),uu(h)}}function uu(h){var m=h.flags;if(m&2){try{e:{for(var x=h.return;x!==null;){if(CP(x)){var N=x;break e}x=x.return}throw Error(t(160))}switch(N.tag){case 5:var z=N.stateNode;N.flags&32&&(Ft(z,""),N.flags&=-33);var Y=MP(h);tE(h,Y,z);break;case 3:case 4:var le=N.stateNode.containerInfo,Te=MP(h);eE(h,Te,le);break;default:throw Error(t(161))}}catch(Ue){Yi(h,h.return,Ue)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function zK(h,m,x){hn=h,IP(h)}function IP(h,m,x){for(var N=(h.mode&1)!==0;hn!==null;){var z=hn,Y=z.child;if(z.tag===22&&N){var le=z.memoizedState!==null||Wb;if(!le){var Te=z.alternate,Ue=Te!==null&&Te.memoizedState!==null||Da;Te=Wb;var ht=Da;if(Wb=le,(Da=Ue)&&!ht)for(hn=z;hn!==null;)le=hn,Ue=le.child,le.tag===22&&le.memoizedState!==null?DP(z):Ue!==null?(Ue.return=le,hn=Ue):DP(z);for(;Y!==null;)hn=Y,IP(Y),Y=Y.sibling;hn=z,Wb=Te,Da=ht}LP(h)}else(z.subtreeFlags&8772)!==0&&Y!==null?(Y.return=z,hn=Y):LP(h)}}function LP(h){for(;hn!==null;){var m=hn;if((m.flags&8772)!==0){var x=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:Da||Yb(5,m);break;case 1:var N=m.stateNode;if(m.flags&4&&!Da)if(x===null)N.componentDidMount();else{var z=m.elementType===m.type?x.memoizedProps:Co(m.type,x.memoizedProps);N.componentDidUpdate(z,x.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var Y=m.updateQueue;Y!==null&&Ld(m,Y,N);break;case 3:var le=m.updateQueue;if(le!==null){if(x=null,m.child!==null)switch(m.child.tag){case 5:x=m.child.stateNode;break;case 1:x=m.child.stateNode}Ld(m,le,x)}break;case 5:var Te=m.stateNode;if(x===null&&m.flags&4){x=Te;var Ue=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":Ue.autoFocus&&x.focus();break;case"img":Ue.src&&(x.src=Ue.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var ht=m.alternate;if(ht!==null){var Pt=ht.memoizedState;if(Pt!==null){var Bt=Pt.dehydrated;Bt!==null&&Ma(Bt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Da||m.flags&512&&$T(m)}catch(Rt){Yi(m,m.return,Rt)}}if(m===h){hn=null;break}if(x=m.sibling,x!==null){x.return=m.return,hn=x;break}hn=m.return}}function NP(h){for(;hn!==null;){var m=hn;if(m===h){hn=null;break}var x=m.sibling;if(x!==null){x.return=m.return,hn=x;break}hn=m.return}}function DP(h){for(;hn!==null;){var m=hn;try{switch(m.tag){case 0:case 11:case 15:var x=m.return;try{Yb(4,m)}catch(Ue){Yi(m,x,Ue)}break;case 1:var N=m.stateNode;if(typeof N.componentDidMount=="function"){var z=m.return;try{N.componentDidMount()}catch(Ue){Yi(m,z,Ue)}}var Y=m.return;try{$T(m)}catch(Ue){Yi(m,Y,Ue)}break;case 5:var le=m.return;try{$T(m)}catch(Ue){Yi(m,le,Ue)}}}catch(Ue){Yi(m,m.return,Ue)}if(m===h){hn=null;break}var Te=m.sibling;if(Te!==null){Te.return=m.return,hn=Te;break}hn=m.return}}var VK=Math.ceil,Jb=A.ReactCurrentDispatcher,nE=A.ReactCurrentOwner,El=A.ReactCurrentBatchConfig,kr=0,Qs=null,gs=null,da=0,nl=0,$g=Si(0),Ns=0,fy=null,Lp=0,Xb=0,rE=0,dy=null,Mo=null,iE=0,e0=1/0,mf=null,Qb=!1,sE=null,Pd=null,Kb=!1,Od=null,qb=0,hy=0,aE=null,Zb=-1,$b=0;function ao(){return(kr&6)!==0?me():Zb!==-1?Zb:Zb=me()}function Fd(h){return(h.mode&1)===0?1:(kr&2)!==0&&da!==0?da&-da:XT.transition!==null?($b===0&&($b=Sn()),$b):(h=Un,h!==0||(h=window.event,h=h===void 0?16:Ho(h.type)),h)}function vc(h,m,x,N){if(50<hy)throw hy=0,aE=null,Error(t(185));qn(h,x,N),((kr&2)===0||h!==Qs)&&(h===Qs&&((kr&2)===0&&(Xb|=x),Ns===4&&Bd(h,da)),Ao(h,N),x===1&&kr===0&&(m.mode&1)===0&&(e0=me()+500,pp&&Cl()))}function Ao(h,m){var x=h.callbackNode;An(h,m);var N=In(h,h===Qs?da:0);if(N===0)x!==null&&ae(x),h.callbackNode=null,h.callbackPriority=0;else if(m=N&-N,h.callbackPriority!==m){if(x!=null&&ae(x),m===1)h.tag===0?Db(RP.bind(null,h)):mp(RP.bind(null,h)),JT(function(){(kr&6)===0&&Cl()}),x=null;else{switch(ai(N)){case 1:x=st;break;case 4:x=dt;break;case 16:x=Ct;break;case 536870912:x=Gt;break;default:x=Ct}x=VP(x,kP.bind(null,h))}h.callbackPriority=m,h.callbackNode=x}}function kP(h,m){if(Zb=-1,$b=0,(kr&6)!==0)throw Error(t(327));var x=h.callbackNode;if(t0()&&h.callbackNode!==x)return null;var N=In(h,h===Qs?da:0);if(N===0)return null;if((N&30)!==0||(N&h.expiredLanes)!==0||m)m=e2(h,N);else{m=N;var z=kr;kr|=2;var Y=OP();(Qs!==h||da!==m)&&(mf=null,e0=me()+500,Dp(h,m));do try{WK();break}catch(Te){PP(h,Te)}while(!0);of(),Jb.current=Y,kr=z,gs!==null?m=0:(Qs=null,da=0,m=Ns)}if(m!==0){if(m===2&&(z=gn(h),z!==0&&(N=z,m=oE(h,z))),m===1)throw x=fy,Dp(h,0),Bd(h,N),Ao(h,me()),x;if(m===6)Bd(h,N);else{if(z=h.current.alternate,(N&30)===0&&!GK(z)&&(m=e2(h,N),m===2&&(Y=gn(h),Y!==0&&(N=Y,m=oE(h,Y))),m===1))throw x=fy,Dp(h,0),Bd(h,N),Ao(h,me()),x;switch(h.finishedWork=z,h.finishedLanes=N,m){case 0:case 1:throw Error(t(345));case 2:kp(h,Mo,mf);break;case 3:if(Bd(h,N),(N&130023424)===N&&(m=iE+500-me(),10<m)){if(In(h,0)!==0)break;if(z=h.suspendedLanes,(z&N)!==N){ao(),h.pingedLanes|=h.suspendedLanes&z;break}h.timeoutHandle=jv(kp.bind(null,h,Mo,mf),m);break}kp(h,Mo,mf);break;case 4:if(Bd(h,N),(N&4194240)===N)break;for(m=h.eventTimes,z=-1;0<N;){var le=31-Wt(N);Y=1<<le,le=m[le],le>z&&(z=le),N&=~Y}if(N=z,N=me()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*VK(N/1960))-N,10<N){h.timeoutHandle=jv(kp.bind(null,h,Mo,mf),N);break}kp(h,Mo,mf);break;case 5:kp(h,Mo,mf);break;default:throw Error(t(329))}}}return Ao(h,me()),h.callbackNode===x?kP.bind(null,h):null}function oE(h,m){var x=dy;return h.current.memoizedState.isDehydrated&&(Dp(h,m).flags|=256),h=e2(h,m),h!==2&&(m=Mo,Mo=x,m!==null&&lE(m)),h}function lE(h){Mo===null?Mo=h:Mo.push.apply(Mo,h)}function GK(h){for(var m=h;;){if(m.flags&16384){var x=m.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var N=0;N<x.length;N++){var z=x[N],Y=z.getSnapshot;z=z.value;try{if(!Za(Y(),z))return!1}catch{return!1}}}if(x=m.child,m.subtreeFlags&16384&&x!==null)x.return=m,m=x;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Bd(h,m){for(m&=~rE,m&=~Xb,h.suspendedLanes|=m,h.pingedLanes&=~m,h=h.expirationTimes;0<m;){var x=31-Wt(m),N=1<<x;h[x]=-1,m&=~N}}function RP(h){if((kr&6)!==0)throw Error(t(327));t0();var m=In(h,0);if((m&1)===0)return Ao(h,me()),null;var x=e2(h,m);if(h.tag!==0&&x===2){var N=gn(h);N!==0&&(m=N,x=oE(h,N))}if(x===1)throw x=fy,Dp(h,0),Bd(h,m),Ao(h,me()),x;if(x===6)throw Error(t(345));return h.finishedWork=h.current.alternate,h.finishedLanes=m,kp(h,Mo,mf),Ao(h,me()),null}function cE(h,m){var x=kr;kr|=1;try{return h(m)}finally{kr=x,kr===0&&(e0=me()+500,pp&&Cl())}}function Np(h){Od!==null&&Od.tag===0&&(kr&6)===0&&t0();var m=kr;kr|=1;var x=El.transition,N=Un;try{if(El.transition=null,Un=1,h)return h()}finally{Un=N,El.transition=x,kr=m,(kr&6)===0&&Cl()}}function uE(){nl=$g.current,ei($g)}function Dp(h,m){h.finishedWork=null,h.finishedLanes=0;var x=h.timeoutHandle;if(x!==-1&&(h.timeoutHandle=-1,zv(x)),gs!==null)for(x=gs.return;x!==null;){var N=x;switch(oc(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&dp();break;case 3:lu(),ei(oa),ei(As),Al();break;case 5:Nd(N);break;case 4:lu();break;case 13:ei(ii);break;case 19:ei(ii);break;case 10:wp(N.type._context);break;case 22:case 23:uE()}x=x.return}if(Qs=h,gs=h=Ud(h.current,null),da=nl=m,Ns=0,fy=null,rE=Xb=Lp=0,Mo=dy=null,cc!==null){for(m=0;m<cc.length;m++)if(x=cc[m],N=x.interleaved,N!==null){x.interleaved=null;var z=N.next,Y=x.pending;if(Y!==null){var le=Y.next;Y.next=z,N.next=le}x.pending=N}cc=null}return h}function PP(h,m){do{var x=gs;try{if(of(),ff.current=Kg,el){for(var N=ti.memoizedState;N!==null;){var z=N.queue;z!==null&&(z.pending=null),N=N.next}el=!1}if(fc=0,Er=Ci=ti=null,Xs=!1,cu=0,nE.current=null,x===null||x.return===null){Ns=1,fy=m,gs=null;break}e:{var Y=h,le=x.return,Te=x,Ue=m;if(m=da,Te.flags|=32768,Ue!==null&&typeof Ue=="object"&&typeof Ue.then=="function"){var ht=Ue,Pt=Te,Bt=Pt.tag;if((Pt.mode&1)===0&&(Bt===0||Bt===11||Bt===15)){var Rt=Pt.alternate;Rt?(Pt.updateQueue=Rt.updateQueue,Pt.memoizedState=Rt.memoizedState,Pt.lanes=Rt.lanes):(Pt.updateQueue=null,Pt.memoizedState=null)}var ln=cn(le);if(ln!==null){ln.flags&=-257,Gn(ln,le,Te,Y,m),ln.mode&1&&Vt(Y,ht,m),m=ln,Ue=ht;var mn=m.updateQueue;if(mn===null){var vn=new Set;vn.add(Ue),m.updateQueue=vn}else mn.add(Ue);break e}else{if((m&1)===0){Vt(Y,ht,m),fE();break e}Ue=Error(t(426))}}else if(ri&&Te.mode&1){var es=cn(le);if(es!==null){(es.flags&65536)===0&&(es.flags|=256),Gn(es,le,Te,Y,m),Ed(F(Ue,Te));break e}}Y=Ue=F(Ue,Te),Ns!==4&&(Ns=2),dy===null?dy=[Y]:dy.push(Y),Y=le;do{switch(Y.tag){case 3:Y.flags|=65536,m&=-m,Y.lanes|=m;var rt=We(Y,Ue,m);lf(Y,rt);break e;case 1:Te=Ue;var ze=Y.type,lt=Y.stateNode;if((Y.flags&128)===0&&(typeof ze.getDerivedStateFromError=="function"||lt!==null&&typeof lt.componentDidCatch=="function"&&(Pd===null||!Pd.has(lt)))){Y.flags|=65536,m&=-m,Y.lanes|=m;var Ht=St(Y,Te,m);lf(Y,Ht);break e}}Y=Y.return}while(Y!==null)}BP(x)}catch(_n){m=_n,gs===x&&x!==null&&(gs=x=x.return);continue}break}while(!0)}function OP(){var h=Jb.current;return Jb.current=Kg,h===null?Kg:h}function fE(){(Ns===0||Ns===3||Ns===2)&&(Ns=4),Qs===null||(Lp&268435455)===0&&(Xb&268435455)===0||Bd(Qs,da)}function e2(h,m){var x=kr;kr|=2;var N=OP();(Qs!==h||da!==m)&&(mf=null,Dp(h,m));do try{HK();break}catch(z){PP(h,z)}while(!0);if(of(),kr=x,Jb.current=N,gs!==null)throw Error(t(261));return Qs=null,da=0,Ns}function HK(){for(;gs!==null;)FP(gs)}function WK(){for(;gs!==null&&!Se();)FP(gs)}function FP(h){var m=zP(h.alternate,h,nl);h.memoizedProps=h.pendingProps,m===null?BP(h):gs=m,nE.current=null}function BP(h){var m=h;do{var x=m.alternate;if(h=m.return,(m.flags&32768)===0){if(x=FK(x,m,nl),x!==null){gs=x;return}}else{if(x=BK(x,m),x!==null){x.flags&=32767,gs=x;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Ns=6,gs=null;return}}if(m=m.sibling,m!==null){gs=m;return}gs=m=h}while(m!==null);Ns===0&&(Ns=5)}function kp(h,m,x){var N=Un,z=El.transition;try{El.transition=null,Un=1,YK(h,m,x,N)}finally{El.transition=z,Un=N}return null}function YK(h,m,x,N){do t0();while(Od!==null);if((kr&6)!==0)throw Error(t(327));x=h.finishedWork;var z=h.finishedLanes;if(x===null)return null;if(h.finishedWork=null,h.finishedLanes=0,x===h.current)throw Error(t(177));h.callbackNode=null,h.callbackPriority=0;var Y=x.lanes|x.childLanes;if(Tn(h,Y),h===Qs&&(gs=Qs=null,da=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||Kb||(Kb=!0,VP(Ct,function(){return t0(),null})),Y=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||Y){Y=El.transition,El.transition=null;var le=Un;Un=1;var Te=kr;kr|=4,nE.current=null,jK(h,x),EP(x,h),ds(Bv),wi=!!Md,Bv=Md=null,h.current=x,zK(x),De(),kr=Te,Un=le,El.transition=Y}else h.current=x;if(Kb&&(Kb=!1,Od=h,qb=z),Y=h.pendingLanes,Y===0&&(Pd=null),Jt(x.stateNode),Ao(h,me()),m!==null)for(N=h.onRecoverableError,x=0;x<m.length;x++)z=m[x],N(z.value,{componentStack:z.stack,digest:z.digest});if(Qb)throw Qb=!1,h=sE,sE=null,h;return(qb&1)!==0&&h.tag!==0&&t0(),Y=h.pendingLanes,(Y&1)!==0?h===aE?hy++:(hy=0,aE=h):hy=0,Cl(),null}function t0(){if(Od!==null){var h=ai(qb),m=El.transition,x=Un;try{if(El.transition=null,Un=16>h?16:h,Od===null)var N=!1;else{if(h=Od,Od=null,qb=0,(kr&6)!==0)throw Error(t(331));var z=kr;for(kr|=4,hn=h.current;hn!==null;){var Y=hn,le=Y.child;if((hn.flags&16)!==0){var Te=Y.deletions;if(Te!==null){for(var Ue=0;Ue<Te.length;Ue++){var ht=Te[Ue];for(hn=ht;hn!==null;){var Pt=hn;switch(Pt.tag){case 0:case 11:case 15:uy(8,Pt,Y)}var Bt=Pt.child;if(Bt!==null)Bt.return=Pt,hn=Bt;else for(;hn!==null;){Pt=hn;var Rt=Pt.sibling,ln=Pt.return;if(xP(Pt),Pt===ht){hn=null;break}if(Rt!==null){Rt.return=ln,hn=Rt;break}hn=ln}}}var mn=Y.alternate;if(mn!==null){var vn=mn.child;if(vn!==null){mn.child=null;do{var es=vn.sibling;vn.sibling=null,vn=es}while(vn!==null)}}hn=Y}}if((Y.subtreeFlags&2064)!==0&&le!==null)le.return=Y,hn=le;else e:for(;hn!==null;){if(Y=hn,(Y.flags&2048)!==0)switch(Y.tag){case 0:case 11:case 15:uy(9,Y,Y.return)}var rt=Y.sibling;if(rt!==null){rt.return=Y.return,hn=rt;break e}hn=Y.return}}var ze=h.current;for(hn=ze;hn!==null;){le=hn;var lt=le.child;if((le.subtreeFlags&2064)!==0&&lt!==null)lt.return=le,hn=lt;else e:for(le=ze;hn!==null;){if(Te=hn,(Te.flags&2048)!==0)try{switch(Te.tag){case 0:case 11:case 15:Yb(9,Te)}}catch(_n){Yi(Te,Te.return,_n)}if(Te===le){hn=null;break e}var Ht=Te.sibling;if(Ht!==null){Ht.return=Te.return,hn=Ht;break e}hn=Te.return}}if(kr=z,Cl(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Ut,h)}catch{}N=!0}return N}finally{Un=x,El.transition=m}}return!1}function UP(h,m,x){m=F(x,m),m=We(h,m,1),h=ci(h,m,1),m=ao(),h!==null&&(qn(h,1,m),Ao(h,m))}function Yi(h,m,x){if(h.tag===3)UP(h,h,x);else for(;m!==null;){if(m.tag===3){UP(m,h,x);break}else if(m.tag===1){var N=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(Pd===null||!Pd.has(N))){h=F(x,h),h=St(m,h,1),m=ci(m,h,1),h=ao(),m!==null&&(qn(m,1,h),Ao(m,h));break}}m=m.return}}function JK(h,m,x){var N=h.pingCache;N!==null&&N.delete(m),m=ao(),h.pingedLanes|=h.suspendedLanes&x,Qs===h&&(da&x)===x&&(Ns===4||Ns===3&&(da&130023424)===da&&500>me()-iE?Dp(h,0):rE|=x),Ao(h,m)}function jP(h,m){m===0&&((h.mode&1)===0?m=1:(m=Bn,Bn<<=1,(Bn&130023424)===0&&(Bn=4194304)));var x=ao();h=Zo(h,m),h!==null&&(qn(h,m,x),Ao(h,x))}function XK(h){var m=h.memoizedState,x=0;m!==null&&(x=m.retryLane),jP(h,x)}function QK(h,m){var x=0;switch(h.tag){case 13:var N=h.stateNode,z=h.memoizedState;z!==null&&(x=z.retryLane);break;case 19:N=h.stateNode;break;default:throw Error(t(314))}N!==null&&N.delete(m),jP(h,x)}var zP;zP=function(h,m,x){if(h!==null)if(h.memoizedProps!==m.pendingProps||oa.current)er=!0;else{if((h.lanes&x)===0&&(m.flags&128)===0)return er=!1,OK(h,m,x);er=(h.flags&131072)!==0}else er=!1,ri&&(m.flags&1048576)!==0&&Yv(m,jg,m.index);switch(m.lanes=0,m.tag){case 2:var N=m.type;Hb(h,m),h=m.pendingProps;var z=$u(m,As.current);ou(m,x),z=Cp(null,m,N,h,z,x);var Y=ey();return m.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Ys(N)?(Y=!0,ef(m)):Y=!1,m.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,Zn(m),z.updater=qg,m.stateNode=z,z._reactInternals=m,L(m,N,h,x),m=Jn(null,m,N,!0,Y,x)):(m.tag=0,ri&&Y&&Jv(m),rn(null,m,z,x),m=m.child),m;case 16:N=m.elementType;e:{switch(Hb(h,m),h=m.pendingProps,z=N._init,N=z(N._payload),m.type=N,z=m.tag=qK(N),h=Co(N,h),z){case 0:m=$t(null,m,N,h,x);break e;case 1:m=yn(null,m,N,h,x);break e;case 11:m=Ls(null,m,N,h,x);break e;case 14:m=so(null,m,N,Co(N.type,h),x);break e}throw Error(t(306,N,""))}return m;case 0:return N=m.type,z=m.pendingProps,z=m.elementType===N?z:Co(N,z),$t(h,m,N,z,x);case 1:return N=m.type,z=m.pendingProps,z=m.elementType===N?z:Co(N,z),yn(h,m,N,z,x);case 3:e:{if(Hn(m),h===null)throw Error(t(387));N=m.pendingProps,Y=m.memoizedState,z=Y.element,ki(h,m),xi(m,N,null,x);var le=m.memoizedState;if(N=le.element,Y.isDehydrated)if(Y={element:N,isDehydrated:!1,cache:le.cache,pendingSuspenseBoundaries:le.pendingSuspenseBoundaries,transitions:le.transitions},m.updateQueue.baseState=Y,m.memoizedState=Y,m.flags&256){z=F(Error(t(423)),m),m=xr(h,m,N,x,z);break e}else if(N!==z){z=F(Error(t(424)),m),m=xr(h,m,N,x,z);break e}else for(ca=nc(m.stateNode.containerInfo.firstChild),Ts=m,ri=!0,xo=null,x=yp(m,null,N,x),m.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(au(),N===z){m=pf(h,m,x);break e}rn(h,m,N,x)}m=m.child}return m;case 5:return uf(m),h===null&&Vg(m),N=m.type,z=m.pendingProps,Y=h!==null?h.memoizedProps:null,le=z.children,Uv(N,z)?le=null:Y!==null&&Uv(N,Y)&&(m.flags|=32),wt(h,m),rn(h,m,le,x),m.child;case 6:return h===null&&Vg(m),null;case 13:return pc(h,m,x);case 4:return Sp(m,m.stateNode.containerInfo),N=m.pendingProps,h===null?m.child=rf(m,null,N,x):rn(h,m,N,x),m.child;case 11:return N=m.type,z=m.pendingProps,z=m.elementType===N?z:Co(N,z),Ls(h,m,N,z,x);case 7:return rn(h,m,m.pendingProps,x),m.child;case 8:return rn(h,m,m.pendingProps.children,x),m.child;case 12:return rn(h,m,m.pendingProps.children,x),m.child;case 10:e:{if(N=m.type._context,z=m.pendingProps,Y=m.memoizedProps,le=z.value,Yr(sf,N._currentValue),N._currentValue=le,Y!==null)if(Za(Y.value,le)){if(Y.children===z.children&&!oa.current){m=pf(h,m,x);break e}}else for(Y=m.child,Y!==null&&(Y.return=m);Y!==null;){var Te=Y.dependencies;if(Te!==null){le=Y.child;for(var Ue=Te.firstContext;Ue!==null;){if(Ue.context===N){if(Y.tag===1){Ue=Vr(-1,x&-x),Ue.tag=2;var ht=Y.updateQueue;if(ht!==null){ht=ht.shared;var Pt=ht.pending;Pt===null?Ue.next=Ue:(Ue.next=Pt.next,Pt.next=Ue),ht.pending=Ue}}Y.lanes|=x,Ue=Y.alternate,Ue!==null&&(Ue.lanes|=x),_p(Y.return,x,m),Te.lanes|=x;break}Ue=Ue.next}}else if(Y.tag===10)le=Y.type===m.type?null:Y.child;else if(Y.tag===18){if(le=Y.return,le===null)throw Error(t(341));le.lanes|=x,Te=le.alternate,Te!==null&&(Te.lanes|=x),_p(le,x,m),le=Y.sibling}else le=Y.child;if(le!==null)le.return=Y;else for(le=Y;le!==null;){if(le===m){le=null;break}if(Y=le.sibling,Y!==null){Y.return=le.return,le=Y;break}le=le.return}Y=le}rn(h,m,z.children,x),m=m.child}return m;case 9:return z=m.type,N=m.pendingProps.children,ou(m,x),z=to(z),N=N(z),m.flags|=1,rn(h,m,N,x),m.child;case 14:return N=m.type,z=Co(N,m.pendingProps),z=Co(N.type,z),so(h,m,N,z,x);case 15:return ct(h,m,m.type,m.pendingProps,x);case 17:return N=m.type,z=m.pendingProps,z=m.elementType===N?z:Co(N,z),Hb(h,m),m.tag=1,Ys(N)?(h=!0,ef(m)):h=!1,ou(m,x),v(m,N,z),L(m,N,z,x),Jn(null,m,N,!0,h,x);case 19:return yP(h,m,x);case 22:return Qe(h,m,x)}throw Error(t(156,m.tag))};function VP(h,m){return kt(h,m)}function KK(h,m,x,N){this.tag=h,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Il(h,m,x,N){return new KK(h,m,x,N)}function dE(h){return h=h.prototype,!(!h||!h.isReactComponent)}function qK(h){if(typeof h=="function")return dE(h)?1:0;if(h!=null){if(h=h.$$typeof,h===U)return 11;if(h===te)return 14}return 2}function Ud(h,m){var x=h.alternate;return x===null?(x=Il(h.tag,m,h.key,h.mode),x.elementType=h.elementType,x.type=h.type,x.stateNode=h.stateNode,x.alternate=h,h.alternate=x):(x.pendingProps=m,x.type=h.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=h.flags&14680064,x.childLanes=h.childLanes,x.lanes=h.lanes,x.child=h.child,x.memoizedProps=h.memoizedProps,x.memoizedState=h.memoizedState,x.updateQueue=h.updateQueue,m=h.dependencies,x.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},x.sibling=h.sibling,x.index=h.index,x.ref=h.ref,x}function t2(h,m,x,N,z,Y){var le=2;if(N=h,typeof h=="function")dE(h)&&(le=1);else if(typeof h=="string")le=5;else e:switch(h){case R:return Rp(x.children,z,Y,m);case I:le=8,z|=8;break;case D:return h=Il(12,x,m,z|2),h.elementType=D,h.lanes=Y,h;case V:return h=Il(13,x,m,z),h.elementType=V,h.lanes=Y,h;case X:return h=Il(19,x,m,z),h.elementType=X,h.lanes=Y,h;case ue:return n2(x,z,Y,m);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case E:le=10;break e;case B:le=9;break e;case U:le=11;break e;case te:le=14;break e;case ee:le=16,N=null;break e}throw Error(t(130,h==null?h:typeof h,""))}return m=Il(le,x,m,z),m.elementType=h,m.type=N,m.lanes=Y,m}function Rp(h,m,x,N){return h=Il(7,h,N,m),h.lanes=x,h}function n2(h,m,x,N){return h=Il(22,h,N,m),h.elementType=ue,h.lanes=x,h.stateNode={isHidden:!1},h}function hE(h,m,x){return h=Il(6,h,null,m),h.lanes=x,h}function pE(h,m,x){return m=Il(4,h.children!==null?h.children:[],h.key,m),m.lanes=x,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}function ZK(h,m,x,N,z){this.tag=m,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gr(0),this.expirationTimes=gr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gr(0),this.identifierPrefix=N,this.onRecoverableError=z,this.mutableSourceEagerHydrationData=null}function mE(h,m,x,N,z,Y,le,Te,Ue){return h=new ZK(h,m,x,Te,Ue),m===1?(m=1,Y===!0&&(m|=8)):m=0,Y=Il(3,null,null,m),h.current=Y,Y.stateNode=h,Y.memoizedState={element:N,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zn(Y),h}function $K(h,m,x){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:N==null?null:""+N,children:h,containerInfo:m,implementation:x}}function GP(h){if(!h)return ic;h=h._reactInternals;e:{if(fe(h)!==h||h.tag!==1)throw Error(t(170));var m=h;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Ys(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(t(171))}if(h.tag===1){var x=h.type;if(Ys(x))return hp(h,x,m)}return m}function HP(h,m,x,N,z,Y,le,Te,Ue){return h=mE(x,N,!0,h,z,Y,le,Te,Ue),h.context=GP(null),x=h.current,N=ao(),z=Fd(x),Y=Vr(N,z),Y.callback=m??null,ci(x,Y,z),h.current.lanes=z,qn(h,z,N),Ao(h,N),h}function r2(h,m,x,N){var z=m.current,Y=ao(),le=Fd(z);return x=GP(x),m.context===null?m.context=x:m.pendingContext=x,m=Vr(Y,le),m.payload={element:h},N=N===void 0?null:N,N!==null&&(m.callback=N),h=ci(z,m,le),h!==null&&(vc(h,z,le,Y),Js(h,z,le)),le}function i2(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function WP(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var x=h.retryLane;h.retryLane=x!==0&&x<m?x:m}}function gE(h,m){WP(h,m),(h=h.alternate)&&WP(h,m)}function eq(){return null}var YP=typeof reportError=="function"?reportError:function(h){console.error(h)};function vE(h){this._internalRoot=h}s2.prototype.render=vE.prototype.render=function(h){var m=this._internalRoot;if(m===null)throw Error(t(409));r2(h,m,null,null)},s2.prototype.unmount=vE.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var m=h.containerInfo;Np(function(){r2(null,h,null,null)}),m[eo]=null}};function s2(h){this._internalRoot=h}s2.prototype.unstable_scheduleHydration=function(h){if(h){var m=wo();h={blockedOn:null,target:h,priority:m};for(var x=0;x<Ca.length&&m!==0&&m<Ca[x].priority;x++);Ca.splice(x,0,h),x===0&&us(h)}};function yE(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function a2(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function JP(){}function tq(h,m,x,N,z){if(z){if(typeof N=="function"){var Y=N;N=function(){var ht=i2(le);Y.call(ht)}}var le=HP(m,N,h,0,null,!1,!1,"",JP);return h._reactRootContainer=le,h[eo]=le.current,xd(h.nodeType===8?h.parentNode:h),Np(),le}for(;z=h.lastChild;)h.removeChild(z);if(typeof N=="function"){var Te=N;N=function(){var ht=i2(Ue);Te.call(ht)}}var Ue=mE(h,0,!1,null,null,!1,!1,"",JP);return h._reactRootContainer=Ue,h[eo]=Ue.current,xd(h.nodeType===8?h.parentNode:h),Np(function(){r2(m,Ue,x,N)}),Ue}function o2(h,m,x,N,z){var Y=x._reactRootContainer;if(Y){var le=Y;if(typeof z=="function"){var Te=z;z=function(){var Ue=i2(le);Te.call(Ue)}}r2(m,le,h,z)}else le=tq(x,m,h,z,N);return i2(le)}_l=function(h){switch(h.tag){case 3:var m=h.stateNode;if(m.current.memoizedState.isDehydrated){var x=pn(m.pendingLanes);x!==0&&(Dr(m,x|1),Ao(m,me()),(kr&6)===0&&(e0=me()+500,Cl()))}break;case 13:Np(function(){var N=Zo(h,1);if(N!==null){var z=ao();vc(N,h,1,z)}}),gE(h,1)}},Xl=function(h){if(h.tag===13){var m=Zo(h,134217728);if(m!==null){var x=ao();vc(m,h,134217728,x)}gE(h,134217728)}},eu=function(h){if(h.tag===13){var m=Fd(h),x=Zo(h,m);if(x!==null){var N=ao();vc(x,h,m,N)}gE(h,m)}},wo=function(){return Un},Ql=function(h,m){var x=Un;try{return Un=h,m()}finally{Un=x}},Oe=function(h,m,x){switch(m){case"input":if(Ne(h,x),m=x.name,x.type==="radio"&&m!=null){for(x=h;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<x.length;m++){var N=x[m];if(N!==h&&N.form===h.form){var z=Fg(N);if(!z)throw Error(t(90));Ie(N),Ne(N,z)}}}break;case"textarea":be(h,x);break;case"select":m=x.value,m!=null&&Z(h,!!x.multiple,m,!1)}},on=cE,Zt=Np;var nq={usingClientEntryPoint:!1,Events:[rc,Di,Fg,xt,Yt,cE]},py={findFiberByHostInstance:su,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rq={bundleType:py.bundleType,version:py.version,rendererPackageName:py.rendererPackageName,rendererConfig:py.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=gt(h),h===null?null:h.stateNode},findFiberByHostInstance:py.findFiberByHostInstance||eq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var l2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!l2.isDisabled&&l2.supportsFiber)try{Ut=l2.inject(rq),Et=l2}catch{}}return To.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nq,To.createPortal=function(h,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yE(m))throw Error(t(200));return $K(h,m,null,x)},To.createRoot=function(h,m){if(!yE(h))throw Error(t(299));var x=!1,N="",z=YP;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(N=m.identifierPrefix),m.onRecoverableError!==void 0&&(z=m.onRecoverableError)),m=mE(h,1,!1,null,null,x,!1,N,z),h[eo]=m.current,xd(h.nodeType===8?h.parentNode:h),new vE(m)},To.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(t(188)):(h=Object.keys(h).join(","),Error(t(268,h)));return h=gt(m),h=h===null?null:h.stateNode,h},To.flushSync=function(h){return Np(h)},To.hydrate=function(h,m,x){if(!a2(m))throw Error(t(200));return o2(null,h,m,!0,x)},To.hydrateRoot=function(h,m,x){if(!yE(h))throw Error(t(405));var N=x!=null&&x.hydratedSources||null,z=!1,Y="",le=YP;if(x!=null&&(x.unstable_strictMode===!0&&(z=!0),x.identifierPrefix!==void 0&&(Y=x.identifierPrefix),x.onRecoverableError!==void 0&&(le=x.onRecoverableError)),m=HP(m,null,h,1,x??null,z,!1,Y,le),h[eo]=m.current,xd(h),N)for(h=0;h<N.length;h++)x=N[h],z=x._getVersion,z=z(x._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[x,z]:m.mutableSourceEagerHydrationData.push(x,z);return new s2(m)},To.render=function(h,m,x){if(!a2(m))throw Error(t(200));return o2(null,h,m,!1,x)},To.unmountComponentAtNode=function(h){if(!a2(h))throw Error(t(40));return h._reactRootContainer?(Np(function(){o2(null,null,h,!1,function(){h._reactRootContainer=null,h[eo]=null})}),!0):!1},To.unstable_batchedUpdates=cE,To.unstable_renderSubtreeIntoContainer=function(h,m,x,N){if(!a2(x))throw Error(t(200));if(h==null||h._reactInternals===void 0)throw Error(t(38));return o2(h,m,x,!1,N)},To.version="18.3.1-next-f1338f8080-20240426",To}var $P;function cq(){if($P)return _E.exports;$P=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),_E.exports=lq(),_E.exports}var e6;function uq(){if(e6)return c2;e6=1;var r=cq();return c2.createRoot=r.createRoot,c2.hydrateRoot=r.hydrateRoot,c2}var fq=uq(),my={},t6;function dq(){if(t6)return my;t6=1,Object.defineProperty(my,"__esModule",{value:!0}),my.parse=a,my.serialize=c;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function a(d,p){const g=new s,_=d.length;if(_<2)return g;const w=(p==null?void 0:p.decode)||u;let b=0;do{const C=d.indexOf("=",b);if(C===-1)break;const M=d.indexOf(";",b),A=M===-1?_:M;if(C>A){b=d.lastIndexOf(";",C-1)+1;continue}const k=o(d,b,C),O=l(d,C,k),R=d.slice(k,O);if(g[R]===void 0){let I=o(d,C+1,A),D=l(d,A,I);const E=w(d.slice(I,D));g[R]=E}b=A+1}while(b<_);return g}function o(d,p,g){do{const _=d.charCodeAt(p);if(_!==32&&_!==9)return p}while(++p<g);return g}function l(d,p,g){for(;p>g;){const _=d.charCodeAt(--p);if(_!==32&&_!==9)return p+1}return g}function c(d,p,g){const _=(g==null?void 0:g.encode)||encodeURIComponent;if(!r.test(d))throw new TypeError(`argument name is invalid: ${d}`);const w=_(p);if(!e.test(w))throw new TypeError(`argument val is invalid: ${p}`);let b=d+"="+w;if(!g)return b;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);b+="; Max-Age="+g.maxAge}if(g.domain){if(!t.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);b+="; Domain="+g.domain}if(g.path){if(!n.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);b+="; Path="+g.path}if(g.expires){if(!f(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);b+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(b+="; HttpOnly"),g.secure&&(b+="; Secure"),g.partitioned&&(b+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return b}function u(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function f(d){return i.call(d)==="[object Date]"}return my}dq();/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var n6="popstate";function hq(r={}){function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return YI("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Lw(i)}return mq(e,t,null,r)}function Ai(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function zc(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pq(){return Math.random().toString(36).substring(2,10)}function r6(r,e){return{usr:r.state,key:r.key,idx:e}}function YI(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?rv(e):e,state:t,key:e&&e.key||n||pq()}}function Lw({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function rv(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function mq(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o="POP",l=null,c=u();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function f(){o="POP";let w=u(),b=w==null?null:w-c;c=w,l&&l({action:o,location:_.location,delta:b})}function d(w,b){o="PUSH";let C=YI(_.location,w,b);c=u()+1;let M=r6(C,c),A=_.createHref(C);try{a.pushState(M,"",A)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(A)}s&&l&&l({action:o,location:_.location,delta:1})}function p(w,b){o="REPLACE";let C=YI(_.location,w,b);c=u();let M=r6(C,c),A=_.createHref(C);a.replaceState(M,"",A),s&&l&&l({action:o,location:_.location,delta:0})}function g(w){let b=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof w=="string"?w:Lw(w);return C=C.replace(/ $/,"%20"),Ai(b,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,b)}let _={get action(){return o},get location(){return r(i,a)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(n6,f),l=w,()=>{i.removeEventListener(n6,f),l=null}},createHref(w){return e(i,w)},createURL:g,encodeLocation(w){let b=g(w);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:d,replace:p,go(w){return a.go(w)}};return _}function a5(r,e,t="/"){return gq(r,e,t,!1)}function gq(r,e,t,n){let i=typeof e=="string"?rv(e):e,s=Wf(i.pathname||"/",t);if(s==null)return null;let a=o5(r);vq(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=Eq(s);o=Aq(a[l],c,n)}return o}function o5(r,e=[],t=[],n=""){let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Ai(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let c=Ff([n,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(Ai(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),o5(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Cq(c,s.index),routesMeta:u})};return r.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of l5(s.path))i(s,a,l)}),e}function l5(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=l5(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>r.startsWith("/")&&l===""?"/":l)}function vq(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Mq(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var yq=/^:[\w-]+$/,wq=3,_q=2,bq=1,Sq=10,xq=-2,i6=r=>r==="*";function Cq(r,e){let t=r.split("/"),n=t.length;return t.some(i6)&&(n+=xq),e&&(n+=_q),t.filter(i=>!i6(i)).reduce((i,s)=>i+(yq.test(s)?wq:s===""?bq:Sq),n)}function Mq(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function Aq(r,e,t=!1){let{routesMeta:n}=r,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",f=Vx({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!f&&c&&t&&!n[n.length-1].route.index&&(f=Vx({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:Ff([s,f.pathname]),pathnameBase:Dq(Ff([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=Ff([s,f.pathnameBase]))}return a}function Vx(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=Tq(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:f},d)=>{if(u==="*"){let g=o[d]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=o[d];return f&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:r}}function Tq(r,e=!1,t=!0){zc(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Eq(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zc(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Wf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function Iq(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?rv(r):r;return{pathname:t?t.startsWith("/")?t:Lq(t,e):e,search:kq(n),hash:Rq(i)}}function Lq(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function xE(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Nq(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function mN(r){let e=Nq(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function gN(r,e,t,n=!1){let i;typeof r=="string"?i=rv(r):(i={...r},Ai(!i.pathname||!i.pathname.includes("?"),xE("?","pathname","search",i)),Ai(!i.pathname||!i.pathname.includes("#"),xE("#","pathname","hash",i)),Ai(!i.search||!i.search.includes("#"),xE("#","search","hash",i)));let s=r===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=t;else{let f=e.length-1;if(!n&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}o=f>=0?e[f]:"/"}let l=Iq(i,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Ff=r=>r.join("/").replace(/\/\/+/g,"/"),Dq=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),kq=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Rq=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Pq(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var c5=["POST","PUT","PATCH","DELETE"];new Set(c5);var Oq=["GET",...c5];new Set(Oq);var iv=P.createContext(null);iv.displayName="DataRouter";var OM=P.createContext(null);OM.displayName="DataRouterState";var u5=P.createContext({isTransitioning:!1});u5.displayName="ViewTransition";var Fq=P.createContext(new Map);Fq.displayName="Fetchers";var Bq=P.createContext(null);Bq.displayName="Await";var Hc=P.createContext(null);Hc.displayName="Navigation";var E_=P.createContext(null);E_.displayName="Location";var Wc=P.createContext({outlet:null,matches:[],isDataRoute:!1});Wc.displayName="Route";var vN=P.createContext(null);vN.displayName="RouteError";function Uq(r,{relative:e}={}){Ai(sv(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=P.useContext(Hc),{hash:i,pathname:s,search:a}=I_(r,{relative:e}),o=s;return t!=="/"&&(o=s==="/"?t:Ff([t,s])),n.createHref({pathname:o,search:a,hash:i})}function sv(){return P.useContext(E_)!=null}function ad(){return Ai(sv(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(E_).location}var f5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function d5(r){P.useContext(Hc).static||P.useLayoutEffect(r)}function Yc(){let{isDataRoute:r}=P.useContext(Wc);return r?Zq():jq()}function jq(){Ai(sv(),"useNavigate() may be used only in the context of a <Router> component.");let r=P.useContext(iv),{basename:e,navigator:t}=P.useContext(Hc),{matches:n}=P.useContext(Wc),{pathname:i}=ad(),s=JSON.stringify(mN(n)),a=P.useRef(!1);return d5(()=>{a.current=!0}),P.useCallback((l,c={})=>{if(zc(a.current,f5),!a.current)return;if(typeof l=="number"){t.go(l);return}let u=gN(l,JSON.parse(s),i,c.relative==="path");r==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Ff([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,s,i,r])}P.createContext(null);function FM(){let{matches:r}=P.useContext(Wc),e=r[r.length-1];return e?e.params:{}}function I_(r,{relative:e}={}){let{matches:t}=P.useContext(Wc),{pathname:n}=ad(),i=JSON.stringify(mN(t));return P.useMemo(()=>gN(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function zq(r,e){return h5(r,e)}function h5(r,e,t,n){var C;Ai(sv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=P.useContext(Hc),{matches:a}=P.useContext(Wc),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",f=o&&o.route;{let M=f&&f.path||"";p5(c,!f||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let d=ad(),p;if(e){let M=typeof e=="string"?rv(e):e;Ai(u==="/"||((C=M.pathname)==null?void 0:C.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${M.pathname}" was given in the \`location\` prop.`),p=M}else p=d;let g=p.pathname||"/",_=g;if(u!=="/"){let M=u.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(M.length).join("/")}let w=!s&&t&&t.matches&&t.matches.length>0?t.matches:a5(r,{pathname:_});zc(f||w!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),zc(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=Yq(w&&w.map(M=>Object.assign({},M,{params:Object.assign({},l,M.params),pathname:Ff([u,i.encodeLocation?i.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?u:Ff([u,i.encodeLocation?i.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),a,t,n);return e&&b?P.createElement(E_.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function Vq(){let r=qq(),e=Pq(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",r),a=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:s},"ErrorBoundary")," or"," ",P.createElement("code",{style:s},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,a)}var Gq=P.createElement(Vq,null),Hq=class extends P.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?P.createElement(Wc.Provider,{value:this.props.routeContext},P.createElement(vN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Wq({routeContext:r,match:e,children:t}){let n=P.useContext(iv);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Wc.Provider,{value:r},t)}function Yq(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,s=t==null?void 0:t.errors;if(s!=null){let l=i.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);Ai(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let a=!1,o=-1;if(t)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=l),c.route.id){let{loaderData:u,errors:f}=t,d=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||d){a=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((l,c,u)=>{let f,d=!1,p=null,g=null;t&&(f=s&&c.route.id?s[c.route.id]:void 0,p=c.route.errorElement||Gq,a&&(o<0&&u===0?(p5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,g=null):o===u&&(d=!0,g=c.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,u+1)),w=()=>{let b;return f?b=p:d?b=g:c.route.Component?b=P.createElement(c.route.Component,null):c.route.element?b=c.route.element:b=l,P.createElement(Wq,{match:c,routeContext:{outlet:l,matches:_,isDataRoute:t!=null},children:b})};return t&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?P.createElement(Hq,{location:t.location,revalidation:t.revalidation,component:p,error:f,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}function yN(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jq(r){let e=P.useContext(iv);return Ai(e,yN(r)),e}function Xq(r){let e=P.useContext(OM);return Ai(e,yN(r)),e}function Qq(r){let e=P.useContext(Wc);return Ai(e,yN(r)),e}function wN(r){let e=Qq(r),t=e.matches[e.matches.length-1];return Ai(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function Kq(){return wN("useRouteId")}function qq(){var n;let r=P.useContext(vN),e=Xq("useRouteError"),t=wN("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function Zq(){let{router:r}=Jq("useNavigate"),e=wN("useNavigate"),t=P.useRef(!1);return d5(()=>{t.current=!0}),P.useCallback(async(i,s={})=>{zc(t.current,f5),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...s}))},[r,e])}var s6={};function p5(r,e,t){!e&&!s6[r]&&(s6[r]=!0,zc(!1,t))}P.memo($q);function $q({routes:r,future:e,state:t}){return h5(r,void 0,t,e)}function eZ({to:r,replace:e,state:t,relative:n}){Ai(sv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(Hc);zc(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=P.useContext(Wc),{pathname:a}=ad(),o=Yc(),l=gN(r,mN(s),a,n==="path"),c=JSON.stringify(l);return P.useEffect(()=>{o(JSON.parse(c),{replace:e,state:t,relative:n})},[o,c,n,e,t]),null}function ns(r){Ai(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tZ({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:s=!1}){Ai(!sv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=r.replace(/^\/*/,"/"),o=P.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=rv(t));let{pathname:l="/",search:c="",hash:u="",state:f=null,key:d="default"}=t,p=P.useMemo(()=>{let g=Wf(l,a);return g==null?null:{location:{pathname:g,search:c,hash:u,state:f,key:d},navigationType:n}},[a,l,c,u,f,d,n]);return zc(p!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:P.createElement(Hc.Provider,{value:o},P.createElement(E_.Provider,{children:e,value:p}))}function m5({children:r,location:e}){return zq(JI(r),e)}function JI(r,e=[]){let t=[];return P.Children.forEach(r,(n,i)=>{if(!P.isValidElement(n))return;let s=[...e,i];if(n.type===P.Fragment){t.push.apply(t,JI(n.props.children,s));return}Ai(n.type===ns,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ai(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=JI(n.props.children,s)),t.push(a)}),t}var tx="get",nx="application/x-www-form-urlencoded";function BM(r){return r!=null&&typeof r.tagName=="string"}function nZ(r){return BM(r)&&r.tagName.toLowerCase()==="button"}function rZ(r){return BM(r)&&r.tagName.toLowerCase()==="form"}function iZ(r){return BM(r)&&r.tagName.toLowerCase()==="input"}function sZ(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function aZ(r,e){return r.button===0&&(!e||e==="_self")&&!sZ(r)}var u2=null;function oZ(){if(u2===null)try{new FormData(document.createElement("form"),0),u2=!1}catch{u2=!0}return u2}var lZ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function CE(r){return r!=null&&!lZ.has(r)?(zc(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nx}"`),null):r}function cZ(r,e){let t,n,i,s,a;if(rZ(r)){let o=r.getAttribute("action");n=o?Wf(o,e):null,t=r.getAttribute("method")||tx,i=CE(r.getAttribute("enctype"))||nx,s=new FormData(r)}else if(nZ(r)||iZ(r)&&(r.type==="submit"||r.type==="image")){let o=r.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=r.getAttribute("formaction")||o.getAttribute("action");if(n=l?Wf(l,e):null,t=r.getAttribute("formmethod")||o.getAttribute("method")||tx,i=CE(r.getAttribute("formenctype"))||CE(o.getAttribute("enctype"))||nx,s=new FormData(o,r),!oZ()){let{name:c,type:u,value:f}=r;if(u==="image"){let d=c?`${c}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else c&&s.append(c,f)}}else{if(BM(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=tx,n=null,i=nx,a=r}return s&&i==="text/plain"&&(a=s,s=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:s,body:a}}function _N(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function uZ(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fZ(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function dZ(r,e,t){let n=await Promise.all(r.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await uZ(s,t);return a.links?a.links():[]}return[]}));return gZ(n.flat(1).filter(fZ).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function a6(r,e,t,n,i,s){let a=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,o=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var f;let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=t[0])==null?void 0:f.params)||{},nextUrl:new URL(r,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function hZ(r,e,{includeHydrateFallback:t}={}){return pZ(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function pZ(r){return[...new Set(r)]}function mZ(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function gZ(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let s=JSON.stringify(mZ(i));return t.has(s)||(t.add(s),n.push({key:s,link:i})),n},[])}function vZ(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&Wf(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function g5(){let r=P.useContext(iv);return _N(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function yZ(){let r=P.useContext(OM);return _N(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var bN=P.createContext(void 0);bN.displayName="FrameworkContext";function v5(){let r=P.useContext(bN);return _N(r,"You must render this element inside a <HydratedRouter> element"),r}function wZ(r,e){let t=P.useContext(bN),[n,i]=P.useState(!1),[s,a]=P.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:f}=e,d=P.useRef(null);P.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let _=b=>{b.forEach(C=>{a(C.isIntersecting)})},w=new IntersectionObserver(_,{threshold:.5});return d.current&&w.observe(d.current),()=>{w.disconnect()}}},[r]),P.useEffect(()=>{if(n){let _=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(_)}}},[n]);let p=()=>{i(!0)},g=()=>{i(!1),a(!1)};return t?r!=="intent"?[s,d,{}]:[s,d,{onFocus:gy(o,p),onBlur:gy(l,g),onMouseEnter:gy(c,p),onMouseLeave:gy(u,g),onTouchStart:gy(f,p)}]:[!1,d,{}]}function gy(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function _Z({page:r,...e}){let{router:t}=g5(),n=P.useMemo(()=>a5(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?P.createElement(SZ,{page:r,matches:n,...e}):null}function bZ(r){let{manifest:e,routeModules:t}=v5(),[n,i]=P.useState([]);return P.useEffect(()=>{let s=!1;return dZ(r,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[r,e,t]),n}function SZ({page:r,matches:e,...t}){let n=ad(),{manifest:i,routeModules:s}=v5(),{basename:a}=g5(),{loaderData:o,matches:l}=yZ(),c=P.useMemo(()=>a6(r,e,l,i,n,"data"),[r,e,l,i,n]),u=P.useMemo(()=>a6(r,e,l,i,n,"assets"),[r,e,l,i,n]),f=P.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let g=new Set,_=!1;if(e.forEach(b=>{var M;let C=i.routes[b.route.id];!C||!C.hasLoader||(!c.some(A=>A.route.id===b.route.id)&&b.route.id in o&&((M=s[b.route.id])!=null&&M.shouldRevalidate)||C.hasClientLoader?_=!0:g.add(b.route.id))}),g.size===0)return[];let w=vZ(r,a);return _&&g.size>0&&w.searchParams.set("_routes",e.filter(b=>g.has(b.route.id)).map(b=>b.route.id).join(",")),[w.pathname+w.search]},[a,o,n,i,c,e,r,s]),d=P.useMemo(()=>hZ(u,i),[u,i]),p=bZ(u);return P.createElement(P.Fragment,null,f.map(g=>P.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...t})),d.map(g=>P.createElement("link",{key:g,rel:"modulepreload",href:g,...t})),p.map(({key:g,link:_})=>P.createElement("link",{key:g,..._})))}function xZ(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var y5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{y5&&(window.__reactRouterVersion="7.4.0")}catch{}function CZ({basename:r,children:e,window:t}){let n=P.useRef();n.current==null&&(n.current=hq({window:t,v5Compat:!0}));let i=n.current,[s,a]=P.useState({action:i.action,location:i.location}),o=P.useCallback(l=>{P.startTransition(()=>a(l))},[a]);return P.useLayoutEffect(()=>i.listen(o),[i,o]),P.createElement(tZ,{basename:r,children:e,location:s.location,navigationType:s.action,navigator:i})}var w5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gl=P.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:f,...d},p){let{basename:g}=P.useContext(Hc),_=typeof c=="string"&&w5.test(c),w,b=!1;if(typeof c=="string"&&_&&(w=c,y5))try{let D=new URL(window.location.href),E=c.startsWith("//")?new URL(D.protocol+c):new URL(c),B=Wf(E.pathname,g);E.origin===D.origin&&B!=null?c=B+E.search+E.hash:b=!0}catch{zc(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=Uq(c,{relative:i}),[M,A,k]=wZ(n,d),O=TZ(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:i,viewTransition:f});function R(D){e&&e(D),D.defaultPrevented||O(D)}let I=P.createElement("a",{...d,...k,href:w||C,onClick:b||s?e:R,ref:xZ(p,A),target:l,"data-discover":!_&&t==="render"?"true":void 0});return M&&!_?P.createElement(P.Fragment,null,I,P.createElement(_Z,{page:C})):I});Gl.displayName="Link";var gu=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:s,to:a,viewTransition:o,children:l,...c},u){let f=I_(a,{relative:c.relative}),d=ad(),p=P.useContext(OM),{navigator:g,basename:_}=P.useContext(Hc),w=p!=null&&DZ(f)&&o===!0,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,C=d.pathname,M=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(C=C.toLowerCase(),M=M?M.toLowerCase():null,b=b.toLowerCase()),M&&_&&(M=Wf(M,_)||M);const A=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let k=C===b||!i&&C.startsWith(b)&&C.charAt(A)==="/",O=M!=null&&(M===b||!i&&M.startsWith(b)&&M.charAt(b.length)==="/"),R={isActive:k,isPending:O,isTransitioning:w},I=k?e:void 0,D;typeof n=="function"?D=n(R):D=[n,k?"active":null,O?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let E=typeof s=="function"?s(R):s;return P.createElement(Gl,{...c,"aria-current":I,className:D,ref:u,style:E,to:a,viewTransition:o},typeof l=="function"?l(R):l)});gu.displayName="NavLink";var MZ=P.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:s,method:a=tx,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:f,...d},p)=>{let g=LZ(),_=NZ(o,{relative:c}),w=a.toLowerCase()==="get"?"get":"post",b=typeof o=="string"&&w5.test(o),C=M=>{if(l&&l(M),M.defaultPrevented)return;M.preventDefault();let A=M.nativeEvent.submitter,k=(A==null?void 0:A.getAttribute("formmethod"))||a;g(A||M.currentTarget,{fetcherKey:e,method:k,navigate:t,replace:i,state:s,relative:c,preventScrollReset:u,viewTransition:f})};return P.createElement("form",{ref:p,method:w,action:_,onSubmit:n?l:C,...d,"data-discover":!b&&r==="render"?"true":void 0})});MZ.displayName="Form";function AZ(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _5(r){let e=P.useContext(iv);return Ai(e,AZ(r)),e}function TZ(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=Yc(),l=ad(),c=I_(r,{relative:s});return P.useCallback(u=>{if(aZ(u,e)){u.preventDefault();let f=t!==void 0?t:Lw(l)===Lw(c);o(r,{replace:f,state:n,preventScrollReset:i,relative:s,viewTransition:a})}},[l,o,c,t,n,e,r,i,s,a])}var EZ=0,IZ=()=>`__${String(++EZ)}__`;function LZ(){let{router:r}=_5("useSubmit"),{basename:e}=P.useContext(Hc),t=Kq();return P.useCallback(async(n,i={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=cZ(n,e);if(i.navigate===!1){let u=i.fetcherKey||IZ();await r.fetch(u,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await r.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function NZ(r,{relative:e}={}){let{basename:t}=P.useContext(Hc),n=P.useContext(Wc);Ai(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...I_(r||".",{relative:e})},a=ad();if(r==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(f=>f).forEach(f=>o.append("index",f));let u=o.toString();s.search=u?`?${u}`:""}}return(!r||r===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Ff([t,s.pathname])),Lw(s)}function DZ(r,e={}){let t=P.useContext(u5);Ai(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=_5("useViewTransitionState"),i=I_(r,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Wf(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=Wf(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Vx(i.pathname,a)!=null||Vx(i.pathname,s)!=null}new TextEncoder;var ME={exports:{}},vy={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o6;function kZ(){if(o6)return vy;o6=1;var r=nv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,c){var u,f={},d=null,p=null;c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),l.ref!==void 0&&(p=l.ref);for(u in l)n.call(l,u)&&!s.hasOwnProperty(u)&&(f[u]=l[u]);if(o&&o.defaultProps)for(u in l=o.defaultProps,l)f[u]===void 0&&(f[u]=l[u]);return{$$typeof:e,type:o,key:d,ref:p,props:f,_owner:i.current}}return vy.Fragment=t,vy.jsx=a,vy.jsxs=a,vy}var l6;function RZ(){return l6||(l6=1,ME.exports=kZ()),ME.exports}var SN=RZ();const S=SN.jsx,j=SN.jsxs,Br=SN.Fragment,b5=P.createContext({});function S5(r){const e=P.useRef(null);return e.current===null&&(e.current=r()),e.current}const xN=typeof window<"u",x5=xN?P.useLayoutEffect:P.useEffect,CN=P.createContext(null),C5=P.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});function PZ(r=!0){const e=P.useContext(CN);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,s=P.useId();P.useEffect(()=>{if(r)return i(s)},[r]);const a=P.useCallback(()=>r&&n&&n(s),[s,n,r]);return!t&&n?[!1,a]:[!0]}function MN(r,e){r.indexOf(e)===-1&&r.push(e)}function AN(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const fl=r=>r;let M5=fl;const OZ={useManualTiming:!1};function TN(r){let e;return()=>(e===void 0&&(e=r()),e)}const w1=(r,e,t)=>{const n=e-r;return n===0?1:(t-r)/n};class EN{constructor(){this.subscriptions=[]}add(e){return MN(this.subscriptions,e),()=>AN(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,n);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Bf=r=>r*1e3,Uf=r=>r/1e3;function A5(r,e){return e?r*(1e3/e):0}const FZ=TN(()=>window.ScrollTimeline!==void 0);class BZ{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map(i=>{if(FZ()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{n.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class UZ extends BZ{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function IN(r,e){return r?r[e]||r.default||r:void 0}const XI=2e4;function T5(r){let e=0;const t=50;let n=r.next(e);for(;!n.done&&e<XI;)e+=t,n=r.next(e);return e>=XI?1/0:e}function LN(r){return typeof r=="function"}function c6(r,e){r.timeline=e,r.onfinish=null}const NN=r=>Array.isArray(r)&&typeof r[0]=="number",jZ={linearEasing:void 0};function zZ(r,e){const t=TN(r);return()=>{var n;return(n=jZ[e])!==null&&n!==void 0?n:t()}}const Gx=zZ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),E5=(r,e,t=10)=>{let n="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)n+=r(w1(0,i-1,s))+", ";return`linear(${n.substring(0,n.length-2)})`};function I5(r){return!!(typeof r=="function"&&Gx()||!r||typeof r=="string"&&(r in QI||Gx())||NN(r)||Array.isArray(r)&&r.every(I5))}const Gy=([r,e,t,n])=>`cubic-bezier(${r}, ${e}, ${t}, ${n})`,QI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gy([0,.65,.55,1]),circOut:Gy([.55,0,1,.45]),backIn:Gy([.31,.01,.66,-.59]),backOut:Gy([.33,1.53,.69,.99])};function L5(r,e){if(r)return typeof r=="function"&&Gx()?E5(r,e):NN(r)?Gy(r):Array.isArray(r)?r.map(t=>L5(t,e)||QI.easeOut):QI[r]}const f2=["read","resolveKeyframes","update","preRender","render","postRender"];function VZ(r,e){let t=new Set,n=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){a.has(u)&&(c.schedule(u),r()),u(o)}const c={schedule:(u,f=!1,d=!1)=>{const g=d&&i?t:n;return f&&a.add(u),g.has(u)||g.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(o=u,i){s=!0;return}i=!0,[t,n]=[n,t],t.forEach(l),t.clear(),i=!1,s&&(s=!1,c.process(u))}};return c}const GZ=40;function N5(r,e){let t=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=f2.reduce((b,C)=>(b[C]=VZ(s),b),{}),{read:o,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:d}=a,p=()=>{const b=performance.now();t=!1,i.delta=n?1e3/60:Math.max(Math.min(b-i.timestamp,GZ),1),i.timestamp=b,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),f.process(i),d.process(i),i.isProcessing=!1,t&&e&&(n=!1,r(p))},g=()=>{t=!0,n=!0,i.isProcessing||r(p)};return{schedule:f2.reduce((b,C)=>{const M=a[C];return b[C]=(A,k=!1,O=!1)=>(t||g(),M.schedule(A,k,O)),b},{}),cancel:b=>{for(let C=0;C<f2.length;C++)a[f2[C]].cancel(b)},state:i,steps:a}}const{schedule:di,cancel:bh,state:ma,steps:AE}=N5(typeof requestAnimationFrame<"u"?requestAnimationFrame:fl,!0),{schedule:DN}=N5(queueMicrotask,!1);let rx;function HZ(){rx=void 0}const bu={now:()=>(rx===void 0&&bu.set(ma.isProcessing||OZ.useManualTiming?ma.timestamp:performance.now()),rx),set:r=>{rx=r,queueMicrotask(HZ)}},Ac={x:!1,y:!1};function D5(){return Ac.x||Ac.y}function WZ(r){return r==="x"||r==="y"?Ac[r]?null:(Ac[r]=!0,()=>{Ac[r]=!1}):Ac.x||Ac.y?null:(Ac.x=Ac.y=!0,()=>{Ac.x=Ac.y=!1})}function k5(r,e,t){var n;if(r instanceof EventTarget)return[r];if(typeof r=="string"){let i=document;const s=(n=void 0)!==null&&n!==void 0?n:i.querySelectorAll(r);return s?Array.from(s):[]}return Array.from(r)}function R5(r,e){const t=k5(r),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[t,i,()=>n.abort()]}function u6(r){return!(r.pointerType==="touch"||D5())}function YZ(r,e,t={}){const[n,i,s]=R5(r,t),a=o=>{if(!u6(o))return;const{target:l}=o,c=e(l,o);if(typeof c!="function"||!l)return;const u=f=>{u6(f)&&(c(f),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return n.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}function f6(r,e){const t=`${e}PointerCapture`;if(r.target instanceof Element&&t in r.target&&r.pointerId!==void 0)try{r.target[t](r.pointerId)}catch{}}const P5=(r,e)=>e?r===e?!0:P5(r,e.parentElement):!1,kN=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,JZ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function XZ(r){return JZ.has(r.tagName)||r.tabIndex!==-1}const Hy=new WeakSet;function d6(r){return e=>{e.key==="Enter"&&r(e)}}function TE(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const QZ=(r,e)=>{const t=r.currentTarget;if(!t)return;const n=d6(()=>{if(Hy.has(t))return;TE(t,"down");const i=d6(()=>{TE(t,"up")}),s=()=>TE(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function h6(r){return kN(r)&&!D5()}function KZ(r,e,t={}){const[n,i,s]=R5(r,t),a=o=>{const l=o.currentTarget;if(!l||!h6(o)||Hy.has(l))return;Hy.add(l),f6(o,"set");const c=e(l,o),u=(p,g)=>{l.removeEventListener("pointerup",f),l.removeEventListener("pointercancel",d),f6(p,"release"),!(!h6(p)||!Hy.has(l))&&(Hy.delete(l),typeof c=="function"&&c(p,{success:g}))},f=p=>{(p.isTrusted?qZ(p,l instanceof Element?l.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?u(p,!1):u(p,!(l instanceof Element)||P5(l,p.target))},d=p=>{u(p,!1)};l.addEventListener("pointerup",f,i),l.addEventListener("pointercancel",d,i),l.addEventListener("lostpointercapture",d,i)};return n.forEach(o=>{o=t.useGlobalTarget?window:o;let l=!1;o instanceof HTMLElement&&(l=!0,!XZ(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0)),o.addEventListener("pointerdown",a,i),l&&o.addEventListener("focus",c=>QZ(c,i),i)}),s}function qZ(r,e){return r.clientX<e.left||r.clientX>e.right||r.clientY<e.top||r.clientY>e.bottom}const p6=30,ZZ=r=>!isNaN(parseFloat(r));class $Z{constructor(e,t={}){this.version="12.5.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const s=bu.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=bu.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZZ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new EN);const n=this.events[e].add(t);return e==="change"?()=>{n(),di.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bu.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>p6)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,p6);return A5(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nw(r,e){return new $Z(r,e)}const O5=P.createContext({strict:!1}),m6={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_1={};for(const r in m6)_1[r]={isEnabled:e=>m6[r].some(t=>!!e[t])};function e$(r){for(const e in r)_1[e]={..._1[e],...r[e]}}const t$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hx(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||t$.has(r)}let F5=r=>!Hx(r);function n$(r){r&&(F5=e=>e.startsWith("on")?!Hx(e):r(e))}try{n$(require("@emotion/is-prop-valid").default)}catch{}function r$(r,e,t){const n={};for(const i in r)i==="values"&&typeof r.values=="object"||(F5(i)||t===!0&&Hx(i)||!e&&!Hx(i)||r.draggable&&i.startsWith("onDrag"))&&(n[i]=r[i]);return n}function i$(r){if(typeof Proxy>"u")return r;const e=new Map,t=(...n)=>r(...n);return new Proxy(t,{get:(n,i)=>i==="create"?r:(e.has(i)||e.set(i,r(i)),e.get(i))})}const UM=P.createContext({});function jM(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function Dw(r){return typeof r=="string"||Array.isArray(r)}const RN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],PN=["initial",...RN];function zM(r){return jM(r.animate)||PN.some(e=>Dw(r[e]))}function B5(r){return!!(zM(r)||r.variants)}function s$(r,e){if(zM(r)){const{initial:t,animate:n}=r;return{initial:t===!1||Dw(t)?t:void 0,animate:Dw(n)?n:void 0}}return r.inherit!==!1?e:{}}function a$(r){const{initial:e,animate:t}=s$(r,P.useContext(UM));return P.useMemo(()=>({initial:e,animate:t}),[g6(e),g6(t)])}function g6(r){return Array.isArray(r)?r.join(" "):r}const o$=Symbol.for("motionComponentSymbol");function F0(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function l$(r,e,t){return P.useCallback(n=>{n&&r.onMount&&r.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):F0(t)&&(t.current=n))},[e])}const ON=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),c$="framerAppearId",U5="data-"+ON(c$),j5=P.createContext({});function u$(r,e,t,n,i){var s,a;const{visualElement:o}=P.useContext(UM),l=P.useContext(O5),c=P.useContext(CN),u=P.useContext(C5).reducedMotion,f=P.useRef(null);n=n||l.renderer,!f.current&&n&&(f.current=n(r,{visualState:e,parent:o,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const d=f.current,p=P.useContext(j5);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&f$(f.current,t,i,p);const g=P.useRef(!1);P.useInsertionEffect(()=>{d&&g.current&&d.update(t,c)});const _=t[U5],w=P.useRef(!!_&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,_))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,_)));return x5(()=>{d&&(g.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),DN.render(d.render),w.current&&d.animationState&&d.animationState.animateChanges())}),P.useEffect(()=>{d&&(!w.current&&d.animationState&&d.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,_)}),w.current=!1))}),d}function f$(r,e,t,n){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:z5(r.parent)),r.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&F0(o),visualElement:r,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:c})}function z5(r){if(r)return r.options.allowProjection!==!1?r.projection:z5(r.parent)}function d$({preloadedFeatures:r,createVisualElement:e,useRender:t,useVisualState:n,Component:i}){var s,a;r&&e$(r);function o(c,u){let f;const d={...P.useContext(C5),...c,layoutId:h$(c)},{isStatic:p}=d,g=a$(c),_=n(c,p);if(!p&&xN){p$();const w=m$(d);f=w.MeasureLayout,g.visualElement=u$(i,_,d,e,w.ProjectionNode)}return j(UM.Provider,{value:g,children:[f&&g.visualElement?S(f,{visualElement:g.visualElement,...d}):null,t(i,c,l$(_,g.visualElement,u),_,p,g.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=P.forwardRef(o);return l[o$]=i,l}function h$({layoutId:r}){const e=P.useContext(b5).id;return e&&r!==void 0?e+"-"+r:r}function p$(r,e){P.useContext(O5).strict}function m$(r){const{drag:e,layout:t}=_1;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(r)||t!=null&&t.isEnabled(r)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const V5=r=>e=>typeof e=="string"&&e.startsWith(r),FN=V5("--"),g$=V5("var(--"),BN=r=>g$(r)?v$.test(r.split("/*")[0].trim()):!1,v$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,kw={};function y$(r){for(const e in r)kw[e]=r[e],FN(e)&&(kw[e].isCSSVariable=!0)}const av=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ig=new Set(av);function G5(r,{layout:e,layoutId:t}){return ig.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!kw[r]||r==="opacity")}const Va=r=>!!(r&&r.getVelocity),H5=(r,e)=>e&&typeof r=="number"?e.transform(r):r,Yf=(r,e,t)=>t>e?e:t<r?r:t,ov={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Rw={...ov,transform:r=>Yf(0,1,r)},d2={...ov,default:1},L_=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),rh=L_("deg"),Su=L_("%"),On=L_("px"),w$=L_("vh"),_$=L_("vw"),v6={...Su,parse:r=>Su.parse(r)/100,transform:r=>Su.transform(r*100)},b$={borderWidth:On,borderTopWidth:On,borderRightWidth:On,borderBottomWidth:On,borderLeftWidth:On,borderRadius:On,radius:On,borderTopLeftRadius:On,borderTopRightRadius:On,borderBottomRightRadius:On,borderBottomLeftRadius:On,width:On,maxWidth:On,height:On,maxHeight:On,top:On,right:On,bottom:On,left:On,padding:On,paddingTop:On,paddingRight:On,paddingBottom:On,paddingLeft:On,margin:On,marginTop:On,marginRight:On,marginBottom:On,marginLeft:On,backgroundPositionX:On,backgroundPositionY:On},S$={rotate:rh,rotateX:rh,rotateY:rh,rotateZ:rh,scale:d2,scaleX:d2,scaleY:d2,scaleZ:d2,skew:rh,skewX:rh,skewY:rh,distance:On,translateX:On,translateY:On,translateZ:On,x:On,y:On,z:On,perspective:On,transformPerspective:On,opacity:Rw,originX:v6,originY:v6,originZ:On},y6={...ov,transform:Math.round},UN={...b$,...S$,zIndex:y6,size:On,fillOpacity:Rw,strokeOpacity:Rw,numOctaves:y6},x$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},C$=av.length;function M$(r,e,t){let n="",i=!0;for(let s=0;s<C$;s++){const a=av[s],o=r[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const c=H5(o,UN[a]);if(!l){i=!1;const u=x$[a]||a;n+=`${u}(${c}) `}t&&(e[a]=c)}}return n=n.trim(),t?n=t(e,i?"":n):i&&(n="none"),n}function jN(r,e,t){const{style:n,vars:i,transformOrigin:s}=r;let a=!1,o=!1;for(const l in e){const c=e[l];if(ig.has(l)){a=!0;continue}else if(FN(l)){i[l]=c;continue}else{const u=H5(c,UN[l]);l.startsWith("origin")?(o=!0,s[l]=u):n[l]=u}}if(e.transform||(a||t?n.transform=M$(e,r.transform,t):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;n.transformOrigin=`${l} ${c} ${u}`}}const zN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function W5(r,e,t){for(const n in e)!Va(e[n])&&!G5(n,t)&&(r[n]=e[n])}function A$({transformTemplate:r},e){return P.useMemo(()=>{const t=zN();return jN(t,e,r),Object.assign({},t.vars,t.style)},[e])}function T$(r,e){const t=r.style||{},n={};return W5(n,t,r),Object.assign(n,A$(r,e)),n}function E$(r,e){const t={},n=T$(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=n,t}const I$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function VN(r){return typeof r!="string"||r.includes("-")?!1:!!(I$.indexOf(r)>-1||/[A-Z]/u.test(r))}const L$={offset:"stroke-dashoffset",array:"stroke-dasharray"},N$={offset:"strokeDashoffset",array:"strokeDasharray"};function D$(r,e,t=1,n=0,i=!0){r.pathLength=1;const s=i?L$:N$;r[s.offset]=On.transform(-n);const a=On.transform(e),o=On.transform(t);r[s.array]=`${a} ${o}`}function w6(r,e,t){return typeof r=="string"?r:On.transform(e+t*r)}function k$(r,e,t){const n=w6(e,r.x,r.width),i=w6(t,r.y,r.height);return`${n} ${i}`}function GN(r,{attrX:e,attrY:t,attrScale:n,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},u,f){if(jN(r,c,f),u){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:d,style:p,dimensions:g}=r;d.transform&&(g&&(p.transform=d.transform),delete d.transform),g&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=k$(g,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(d.x=e),t!==void 0&&(d.y=t),n!==void 0&&(d.scale=n),a!==void 0&&D$(d,a,o,l,!1)}const Y5=()=>({...zN(),attrs:{}}),HN=r=>typeof r=="string"&&r.toLowerCase()==="svg";function R$(r,e,t,n){const i=P.useMemo(()=>{const s=Y5();return GN(s,e,HN(n),r.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(r.style){const s={};W5(s,r.style,r),i.style={...s,...i.style}}return i}function P$(r=!1){return(t,n,i,{latestValues:s},a)=>{const l=(VN(t)?R$:E$)(n,s,a,t),c=r$(n,typeof t=="string",r),u=t!==P.Fragment?{...c,...l,ref:i}:{},{children:f}=n,d=P.useMemo(()=>Va(f)?f.get():f,[f]);return P.createElement(t,{...u,children:d})}}function _6(r){const e=[{},{}];return r==null||r.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function WN(r,e,t,n){if(typeof e=="function"){const[i,s]=_6(n);e=e(t!==void 0?t:r.custom,i,s)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[i,s]=_6(n);e=e(t!==void 0?t:r.custom,i,s)}return e}const KI=r=>Array.isArray(r),O$=r=>!!(r&&typeof r=="object"&&r.mix&&r.toValue),F$=r=>KI(r)?r[r.length-1]||0:r;function ix(r){const e=Va(r)?r.get():r;return O$(e)?e.toValue():e}function B$({scrapeMotionValuesFromProps:r,createRenderState:e,onUpdate:t},n,i,s){const a={latestValues:U$(n,i,s,r),renderState:e()};return t&&(a.onMount=o=>t({props:n,current:o,...a}),a.onUpdate=o=>t(o)),a}const J5=r=>(e,t)=>{const n=P.useContext(UM),i=P.useContext(CN),s=()=>B$(r,e,n,i);return t?s():S5(s)};function U$(r,e,t,n){const i={},s=n(r,{});for(const d in s)i[d]=ix(s[d]);let{initial:a,animate:o}=r;const l=zM(r),c=B5(r);e&&c&&!l&&r.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let u=t?t.initial===!1:!1;u=u||a===!1;const f=u?o:a;if(f&&typeof f!="boolean"&&!jM(f)){const d=Array.isArray(f)?f:[f];for(let p=0;p<d.length;p++){const g=WN(r,d[p]);if(g){const{transitionEnd:_,transition:w,...b}=g;for(const C in b){let M=b[C];if(Array.isArray(M)){const A=u?M.length-1:0;M=M[A]}M!==null&&(i[C]=M)}for(const C in _)i[C]=_[C]}}}return i}function YN(r,e,t){var n;const{style:i}=r,s={};for(const a in i)(Va(i[a])||e.style&&Va(e.style[a])||G5(a,r)||((n=t==null?void 0:t.getValue(a))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[a]=i[a]);return s}const j$={useVisualState:J5({scrapeMotionValuesFromProps:YN,createRenderState:zN})};function X5(r,e){try{e.dimensions=typeof r.getBBox=="function"?r.getBBox():r.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function Q5(r,{style:e,vars:t},n,i){Object.assign(r.style,e,i&&i.getProjectionStyles(n));for(const s in t)r.style.setProperty(s,t[s])}const K5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function q5(r,e,t,n){Q5(r,e,void 0,n);for(const i in e.attrs)r.setAttribute(K5.has(i)?i:ON(i),e.attrs[i])}function Z5(r,e,t){const n=YN(r,e,t);for(const i in r)if(Va(r[i])||Va(e[i])){const s=av.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=r[i]}return n}const b6=["x","y","width","height","cx","cy","r"],z$={useVisualState:J5({scrapeMotionValuesFromProps:Z5,createRenderState:Y5,onUpdate:({props:r,prevProps:e,current:t,renderState:n,latestValues:i})=>{if(!t)return;let s=!!r.drag;if(!s){for(const o in i)if(ig.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<b6.length;o++){const l=b6[o];r[l]!==e[l]&&(a=!0)}a&&di.read(()=>{X5(t,n),di.render(()=>{GN(n,i,HN(t.tagName),r.transformTemplate),q5(t,n)})})}})};function V$(r,e){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...VN(n)?z$:j$,preloadedFeatures:r,useRender:P$(i),createVisualElement:e,Component:n};return d$(a)}}function Pw(r,e,t){const n=r.getProps();return WN(n,e,t!==void 0?t:n.custom,r)}const $5=new Set(["width","height","top","left","right","bottom",...av]);function G$(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,Nw(t))}function JN(r,e){const t=Pw(r,e);let{transitionEnd:n={},transition:i={},...s}=t||{};s={...s,...n};for(const a in s){const o=F$(s[a]);G$(r,a,o)}}function H$(r){return!!(Va(r)&&r.add)}function qI(r,e){const t=r.getValue("willChange");if(H$(t))return t.add(e)}function e8(r){return r.props[U5]}const t8=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,W$=1e-7,Y$=12;function J$(r,e,t,n,i){let s,a,o=0;do a=e+(t-e)/2,s=t8(a,n,i)-r,s>0?t=a:e=a;while(Math.abs(s)>W$&&++o<Y$);return a}function N_(r,e,t,n){if(r===e&&t===n)return fl;const i=s=>J$(s,0,1,r,t);return s=>s===0||s===1?s:t8(i(s),e,n)}const n8=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,r8=r=>e=>1-r(1-e),i8=N_(.33,1.53,.69,.99),XN=r8(i8),s8=n8(XN),a8=r=>(r*=2)<1?.5*XN(r):.5*(2-Math.pow(2,-10*(r-1))),QN=r=>1-Math.sin(Math.acos(r)),o8=r8(QN),l8=n8(QN),c8=r=>/^0[^.\s]+$/u.test(r);function X$(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||c8(r):!0}const rw=r=>Math.round(r*1e5)/1e5,KN=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Q$(r){return r==null}const K$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qN=(r,e)=>t=>!!(typeof t=="string"&&K$.test(t)&&t.startsWith(r)||e&&!Q$(t)&&Object.prototype.hasOwnProperty.call(t,e)),u8=(r,e,t)=>n=>{if(typeof n!="string")return n;const[i,s,a,o]=n.match(KN);return{[r]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},q$=r=>Yf(0,255,r),EE={...ov,transform:r=>Math.round(q$(r))},cm={test:qN("rgb","red"),parse:u8("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:n=1})=>"rgba("+EE.transform(r)+", "+EE.transform(e)+", "+EE.transform(t)+", "+rw(Rw.transform(n))+")"};function Z$(r){let e="",t="",n="",i="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),n=r.substring(5,7),i=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),n=r.substring(3,4),i=r.substring(4,5),e+=e,t+=t,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const ZI={test:qN("#"),parse:Z$,transform:cm.transform},B0={test:qN("hsl","hue"),parse:u8("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(r)+", "+Su.transform(rw(e))+", "+Su.transform(rw(t))+", "+rw(Rw.transform(n))+")"},Fa={test:r=>cm.test(r)||ZI.test(r)||B0.test(r),parse:r=>cm.test(r)?cm.parse(r):B0.test(r)?B0.parse(r):ZI.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?cm.transform(r):B0.transform(r)},$$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function eee(r){var e,t;return isNaN(r)&&typeof r=="string"&&(((e=r.match(KN))===null||e===void 0?void 0:e.length)||0)+(((t=r.match($$))===null||t===void 0?void 0:t.length)||0)>0}const f8="number",d8="color",tee="var",nee="var(",S6="${}",ree=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ow(r){const e=r.toString(),t=[],n={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(ree,l=>(Fa.test(l)?(n.color.push(s),i.push(d8),t.push(Fa.parse(l))):l.startsWith(nee)?(n.var.push(s),i.push(tee),t.push(l)):(n.number.push(s),i.push(f8),t.push(parseFloat(l))),++s,S6)).split(S6);return{values:t,split:o,indexes:n,types:i}}function h8(r){return Ow(r).values}function p8(r){const{split:e,types:t}=Ow(r),n=e.length;return i=>{let s="";for(let a=0;a<n;a++)if(s+=e[a],i[a]!==void 0){const o=t[a];o===f8?s+=rw(i[a]):o===d8?s+=Fa.transform(i[a]):s+=i[a]}return s}}const iee=r=>typeof r=="number"?0:r;function see(r){const e=h8(r);return p8(r)(e.map(iee))}const Sh={test:eee,parse:h8,createTransformer:p8,getAnimatableNone:see},aee=new Set(["brightness","contrast","saturate","opacity"]);function oee(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[n]=t.match(KN)||[];if(!n)return r;const i=t.replace(n,"");let s=aee.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+i+")"}const lee=/\b([a-z-]*)\(.*?\)/gu,$I={...Sh,getAnimatableNone:r=>{const e=r.match(lee);return e?e.map(oee).join(" "):r}},cee={...UN,color:Fa,backgroundColor:Fa,outlineColor:Fa,fill:Fa,stroke:Fa,borderColor:Fa,borderTopColor:Fa,borderRightColor:Fa,borderBottomColor:Fa,borderLeftColor:Fa,filter:$I,WebkitFilter:$I},m8=r=>cee[r];function g8(r,e){let t=m8(r);return t!==$I&&(t=Sh),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const uee=new Set(["auto","none","0"]);function fee(r,e,t){let n=0,i;for(;n<r.length&&!i;){const s=r[n];typeof s=="string"&&!uee.has(s)&&Ow(s).values.length&&(i=r[n]),n++}if(i&&t)for(const s of e)r[s]=g8(t,i)}const um=r=>r*180/Math.PI,eL=r=>{const e=um(Math.atan2(r[1],r[0]));return tL(e)},dee={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:eL,rotateZ:eL,skewX:r=>um(Math.atan(r[1])),skewY:r=>um(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},tL=r=>(r=r%360,r<0&&(r+=360),r),x6=eL,C6=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),M6=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),hee={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:C6,scaleY:M6,scale:r=>(C6(r)+M6(r))/2,rotateX:r=>tL(um(Math.atan2(r[6],r[5]))),rotateY:r=>tL(um(Math.atan2(-r[2],r[0]))),rotateZ:x6,rotate:x6,skewX:r=>um(Math.atan(r[4])),skewY:r=>um(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function A6(r){return r.includes("scale")?1:0}function nL(r,e){if(!r||r==="none")return A6(e);const t=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(t)n=hee,i=t;else{const o=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=dee,i=o}if(!i)return A6(e);const s=n[e],a=i[1].split(",").map(mee);return typeof s=="function"?s(a):a[s]}const pee=(r,e)=>{const{transform:t="none"}=getComputedStyle(r);return nL(t,e)};function mee(r){return parseFloat(r.trim())}const T6=r=>r===ov||r===On,gee=new Set(["x","y","z"]),vee=av.filter(r=>!gee.has(r));function yee(r){const e=[];return vee.forEach(t=>{const n=r.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const b1={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:(r,{transform:e})=>nL(e,"x"),y:(r,{transform:e})=>nL(e,"y")};b1.translateX=b1.x;b1.translateY=b1.y;const Tm=new Set;let rL=!1,iL=!1;function v8(){if(iL){const r=Array.from(Tm).filter(n=>n.needsMeasurement),e=new Set(r.map(n=>n.element)),t=new Map;e.forEach(n=>{const i=yee(n);i.length&&(t.set(n,i),n.render())}),r.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=t.get(n);i&&i.forEach(([s,a])=>{var o;(o=n.getValue(s))===null||o===void 0||o.set(a)})}),r.forEach(n=>n.measureEndState()),r.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}iL=!1,rL=!1,Tm.forEach(r=>r.complete()),Tm.clear()}function y8(){Tm.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(iL=!0)})}function wee(){y8(),v8()}class ZN{constructor(e,t,n,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Tm.add(this),rL||(rL=!0,di.read(y8),di.resolveKeyframes(v8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i==null?void 0:i.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&t){const l=n.readValue(t,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Tm.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Tm.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const w8=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r),_ee=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bee(r){const e=_ee.exec(r);if(!e)return[,];const[,t,n,i]=e;return[`--${t??n}`,i]}function _8(r,e,t=1){const[n,i]=bee(r);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const a=s.trim();return w8(a)?parseFloat(a):a}return BN(i)?_8(i,e,t+1):i}const b8=r=>e=>e.test(r),See={test:r=>r==="auto",parse:r=>r},S8=[ov,On,Su,rh,_$,w$,See],E6=r=>S8.find(b8(r));class x8 extends ZN{constructor(e,t,n,i,s){super(e,t,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),BN(c))){const u=_8(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!$5.has(n)||e.length!==2)return;const[i,s]=e,a=E6(i),o=E6(s);if(a!==o)if(T6(a)&&T6(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)X$(e[i])&&n.push(i);n.length&&fee(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=b1[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=b1[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const I6=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(Sh.test(r)||r==="0")&&!r.startsWith("url("));function xee(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function Cee(r,e,t,n){const i=r[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=r[r.length-1],a=I6(i,e),o=I6(s,e);return!a||!o?!1:xee(r)||(t==="spring"||LN(t))&&n}const Mee=r=>r!==null;function VM(r,{repeat:e,repeatType:t="loop"},n){const i=r.filter(Mee),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||n===void 0?i[s]:n}const Aee=40;class C8{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=bu.now(),this.options={autoplay:e,delay:t,type:n,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Aee?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&wee(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=bu.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:c}=this.options;if(!c&&!Cee(e,n,i,s))if(a)this.options.duration=0;else{l&&l(VM(e,this.options,t)),o&&o(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,t);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Pi=(r,e,t)=>r+(e-r)*t;function IE(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function Tee({hue:r,saturation:e,lightness:t,alpha:n}){r/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=IE(l,o,r+1/3),s=IE(l,o,r),a=IE(l,o,r-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:n}}function Wx(r,e){return t=>t>0?e:r}const LE=(r,e,t)=>{const n=r*r,i=t*(e*e-n)+n;return i<0?0:Math.sqrt(i)},Eee=[ZI,cm,B0],Iee=r=>Eee.find(e=>e.test(r));function L6(r){const e=Iee(r);if(!e)return!1;let t=e.parse(r);return e===B0&&(t=Tee(t)),t}const N6=(r,e)=>{const t=L6(r),n=L6(e);if(!t||!n)return Wx(r,e);const i={...t};return s=>(i.red=LE(t.red,n.red,s),i.green=LE(t.green,n.green,s),i.blue=LE(t.blue,n.blue,s),i.alpha=Pi(t.alpha,n.alpha,s),cm.transform(i))},Lee=(r,e)=>t=>e(r(t)),D_=(...r)=>r.reduce(Lee),sL=new Set(["none","hidden"]);function Nee(r,e){return sL.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function Dee(r,e){return t=>Pi(r,e,t)}function $N(r){return typeof r=="number"?Dee:typeof r=="string"?BN(r)?Wx:Fa.test(r)?N6:Pee:Array.isArray(r)?M8:typeof r=="object"?Fa.test(r)?N6:kee:Wx}function M8(r,e){const t=[...r],n=t.length,i=r.map((s,a)=>$N(s)(s,e[a]));return s=>{for(let a=0;a<n;a++)t[a]=i[a](s);return t}}function kee(r,e){const t={...r,...e},n={};for(const i in t)r[i]!==void 0&&e[i]!==void 0&&(n[i]=$N(r[i])(r[i],e[i]));return i=>{for(const s in n)t[s]=n[s](i);return t}}function Ree(r,e){var t;const n=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=r.indexes[a][i[a]],l=(t=r.values[o])!==null&&t!==void 0?t:0;n[s]=l,i[a]++}return n}const Pee=(r,e)=>{const t=Sh.createTransformer(e),n=Ow(r),i=Ow(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?sL.has(r)&&!i.values.length||sL.has(e)&&!n.values.length?Nee(r,e):D_(M8(Ree(n,i),i.values),t):Wx(r,e)};function A8(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?Pi(r,e,t):$N(r)(r,e)}const Oee=5;function T8(r,e,t){const n=Math.max(e-Oee,0);return A5(t-r(n),e-n)}const Xi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},D6=.001;function Fee({duration:r=Xi.duration,bounce:e=Xi.bounce,velocity:t=Xi.velocity,mass:n=Xi.mass}){let i,s,a=1-e;a=Yf(Xi.minDamping,Xi.maxDamping,a),r=Yf(Xi.minDuration,Xi.maxDuration,Uf(r)),a<1?(i=c=>{const u=c*a,f=u*r,d=u-t,p=aL(c,a),g=Math.exp(-f);return D6-d/p*g},s=c=>{const f=c*a*r,d=f*t+t,p=Math.pow(a,2)*Math.pow(c,2)*r,g=Math.exp(-f),_=aL(Math.pow(c,2),a);return(-i(c)+D6>0?-1:1)*((d-p)*g)/_}):(i=c=>{const u=Math.exp(-c*r),f=(c-t)*r+1;return-.001+u*f},s=c=>{const u=Math.exp(-c*r),f=(t-c)*(r*r);return u*f});const o=5/r,l=Uee(i,s,o);if(r=Bf(r),isNaN(l))return{stiffness:Xi.stiffness,damping:Xi.damping,duration:r};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:a*2*Math.sqrt(n*c),duration:r}}}const Bee=12;function Uee(r,e,t){let n=t;for(let i=1;i<Bee;i++)n=n-r(n)/e(n);return n}function aL(r,e){return r*Math.sqrt(1-e*e)}const jee=["duration","bounce"],zee=["stiffness","damping","mass"];function k6(r,e){return e.some(t=>r[t]!==void 0)}function Vee(r){let e={velocity:Xi.velocity,stiffness:Xi.stiffness,damping:Xi.damping,mass:Xi.mass,isResolvedFromDuration:!1,...r};if(!k6(r,zee)&&k6(r,jee))if(r.visualDuration){const t=r.visualDuration,n=2*Math.PI/(t*1.2),i=n*n,s=2*Yf(.05,1,1-(r.bounce||0))*Math.sqrt(i);e={...e,mass:Xi.mass,stiffness:i,damping:s}}else{const t=Fee(r);e={...e,...t,mass:Xi.mass},e.isResolvedFromDuration=!0}return e}function E8(r=Xi.visualDuration,e=Xi.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:n,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:d,isResolvedFromDuration:p}=Vee({...t,velocity:-Uf(t.velocity||0)}),g=d||0,_=c/(2*Math.sqrt(l*u)),w=a-s,b=Uf(Math.sqrt(l/u)),C=Math.abs(w)<5;n||(n=C?Xi.restSpeed.granular:Xi.restSpeed.default),i||(i=C?Xi.restDelta.granular:Xi.restDelta.default);let M;if(_<1){const k=aL(b,_);M=O=>{const R=Math.exp(-_*b*O);return a-R*((g+_*b*w)/k*Math.sin(k*O)+w*Math.cos(k*O))}}else if(_===1)M=k=>a-Math.exp(-b*k)*(w+(g+b*w)*k);else{const k=b*Math.sqrt(_*_-1);M=O=>{const R=Math.exp(-_*b*O),I=Math.min(k*O,300);return a-R*((g+_*b*w)*Math.sinh(I)+k*w*Math.cosh(I))/k}}const A={calculatedDuration:p&&f||null,next:k=>{const O=M(k);if(p)o.done=k>=f;else{let R=0;_<1&&(R=k===0?Bf(g):T8(M,k,O));const I=Math.abs(R)<=n,D=Math.abs(a-O)<=i;o.done=I&&D}return o.value=o.done?a:O,o},toString:()=>{const k=Math.min(T5(A),XI),O=E5(R=>A.next(k*R).value,k,30);return k+"ms "+O}};return A}function R6({keyframes:r,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){const f=r[0],d={done:!1,value:f},p=I=>o!==void 0&&I<o||l!==void 0&&I>l,g=I=>o===void 0?l:l===void 0||Math.abs(o-I)<Math.abs(l-I)?o:l;let _=t*e;const w=f+_,b=a===void 0?w:a(w);b!==w&&(_=b-f);const C=I=>-_*Math.exp(-I/n),M=I=>b+C(I),A=I=>{const D=C(I),E=M(I);d.done=Math.abs(D)<=c,d.value=d.done?b:E};let k,O;const R=I=>{p(d.value)&&(k=I,O=E8({keyframes:[d.value,g(d.value)],velocity:T8(M,I,d.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return R(0),{calculatedDuration:null,next:I=>{let D=!1;return!O&&k===void 0&&(D=!0,A(I),R(I)),k!==void 0&&I>=k?O.next(I-k):(!D&&A(I),d)}}}const Gee=N_(.42,0,1,1),Hee=N_(0,0,.58,1),I8=N_(.42,0,.58,1),Wee=r=>Array.isArray(r)&&typeof r[0]!="number",Yee={linear:fl,easeIn:Gee,easeInOut:I8,easeOut:Hee,circIn:QN,circInOut:l8,circOut:o8,backIn:XN,backInOut:s8,backOut:i8,anticipate:a8},P6=r=>{if(NN(r)){M5(r.length===4);const[e,t,n,i]=r;return N_(e,t,n,i)}else if(typeof r=="string")return Yee[r];return r};function Jee(r,e,t){const n=[],i=t||A8,s=r.length-1;for(let a=0;a<s;a++){let o=i(r[a],r[a+1]);if(e){const l=Array.isArray(e)?e[a]||fl:e;o=D_(l,o)}n.push(o)}return n}function Xee(r,e,{clamp:t=!0,ease:n,mixer:i}={}){const s=r.length;if(M5(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=r[0]===r[1];r[0]>r[s-1]&&(r=[...r].reverse(),e=[...e].reverse());const o=Jee(e,n,i),l=o.length,c=u=>{if(a&&u<r[0])return e[0];let f=0;if(l>1)for(;f<r.length-2&&!(u<r[f+1]);f++);const d=w1(r[f],r[f+1],u);return o[f](d)};return t?u=>c(Yf(r[0],r[s-1],u)):c}function Qee(r,e){const t=r[r.length-1];for(let n=1;n<=e;n++){const i=w1(0,e,n);r.push(Pi(t,1,i))}}function Kee(r){const e=[0];return Qee(e,r.length-1),e}function qee(r,e){return r.map(t=>t*e)}function Zee(r,e){return r.map(()=>e||I8).splice(0,r.length-1)}function Yx({duration:r=300,keyframes:e,times:t,ease:n="easeInOut"}){const i=Wee(n)?n.map(P6):P6(n),s={done:!1,value:e[0]},a=qee(t&&t.length===e.length?t:Kee(e),r),o=Xee(a,e,{ease:Array.isArray(i)?i:Zee(e,i)});return{calculatedDuration:r,next:l=>(s.value=o(l),s.done=l>=r,s)}}const $ee=r=>{const e=({timestamp:t})=>r(t);return{start:()=>di.update(e,!0),stop:()=>bh(e),now:()=>ma.isProcessing?ma.timestamp:bu.now()}},ete={decay:R6,inertia:R6,tween:Yx,keyframes:Yx,spring:E8},tte=r=>r/100;class eD extends C8{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:n,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||ZN,o=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(s,o,t,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=LN(t)?t:ete[t]||Yx;let l,c;o!==Yx&&typeof e[0]!="number"&&(l=D_(tte,A8(e[0],e[1])),e=[0,100]);const u=o({...this.options,keyframes:e});s==="mirror"&&(c=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=T5(u));const{calculatedDuration:f}=u,d=f+i,p=d*(n+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:d,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:n}=this;if(!n){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=n;if(this.startTime===null)return s.next(0);const{delay:d,repeat:p,repeatType:g,repeatDelay:_,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-d*(this.speed>=0?1:-1),C=this.speed>=0?b<0:b>u;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let M=this.currentTime,A=s;if(p){const I=Math.min(this.currentTime,u)/f;let D=Math.floor(I),E=I%1;!E&&I>=1&&(E=1),E===1&&D--,D=Math.min(D,p+1),!!(D%2)&&(g==="reverse"?(E=1-E,_&&(E-=_/f)):g==="mirror"&&(A=a)),M=Yf(0,1,E)*f}const k=C?{done:!1,value:l[0]}:A.next(M);o&&(k.value=o(k.value));let{done:O}=k;!C&&c!==null&&(O=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return R&&i!==void 0&&(k.value=VM(l,this.options,i)),w&&w(k.value),R&&this.finish(),k}get duration(){const{resolved:e}=this;return e?Uf(e.calculatedDuration):0}get time(){return Uf(this.currentTime)}set time(e){e=Bf(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Uf(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=$ee,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const nte=new Set(["opacity","clipPath","filter","transform"]);function rte(r,e,t,{delay:n=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=L5(o,i);return Array.isArray(u)&&(c.easing=u),r.animate(c,{delay:n,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const ite=TN(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Jx=10,ste=2e4;function ate(r){return LN(r.type)||r.type==="spring"||!I5(r.ease)}function ote(r,e){const t=new eD({...e,keyframes:r,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:r[0]};const i=[];let s=0;for(;!n.done&&s<ste;)n=t.sample(s),i.push(n.value),s+=Jx;return{times:void 0,keyframes:i,duration:s-Jx,ease:"linear"}}const L8={anticipate:a8,backInOut:s8,circInOut:l8};function lte(r){return r in L8}class O6 extends C8{constructor(e){super(e);const{name:t,motionValue:n,element:i,keyframes:s}=this.options;this.resolver=new x8(s,(a,o)=>this.onKeyframesResolved(a,o),t,n,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:c}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Gx()&&lte(s)&&(s=L8[s]),ate(this.options)){const{onComplete:f,onUpdate:d,motionValue:p,element:g,..._}=this.options,w=ote(e,_);e=w.keyframes,e.length===1&&(e[1]=e[0]),n=w.duration,i=w.times,s=w.ease,a="keyframes"}const u=rte(o.owner.current,l,e,{...this.options,duration:n,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(c6(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:f}=this.options;o.set(VM(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:i,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Uf(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Uf(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=Bf(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return fl;const{animation:n}=t;c6(n,e)}return fl}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:i,type:s,ease:a,times:o}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:d,...p}=this.options,g=new eD({...p,keyframes:n,duration:i,type:s,ease:a,times:o,isGenerator:!0}),_=Bf(this.time);c.setWithVelocity(g.sample(_-Jx).value,g.sample(_).value,Jx)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return ite()&&n&&nte.has(n)&&!l&&!c&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const cte={type:"spring",stiffness:500,damping:25,restSpeed:10},ute=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),fte={type:"keyframes",duration:.8},dte={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hte=(r,{keyframes:e})=>e.length>2?fte:ig.has(r)?r.startsWith("scale")?ute(e[1]):cte:dte;function pte({when:r,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const tD=(r,e,t,n={},i,s)=>a=>{const o=IN(n,r)||{},l=o.delay||n.delay||0;let{elapsed:c=0}=n;c=c-Bf(l);let u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:d=>{e.set(d),o.onUpdate&&o.onUpdate(d)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:r,motionValue:e,element:s?void 0:i};pte(o)||(u={...u,...hte(r,u)}),u.duration&&(u.duration=Bf(u.duration)),u.repeatDelay&&(u.repeatDelay=Bf(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),u.allowFlatten=!o.type&&!o.ease,f&&!s&&e.get()!==void 0){const d=VM(u.keyframes,o);if(d!==void 0)return di.update(()=>{u.onUpdate(d),u.onComplete()}),new UZ([])}return!s&&O6.supports(u)?new O6(u):new eD(u)};function mte({protectedKeys:r,needsAnimating:e},t){const n=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function N8(r,e,{delay:t=0,transitionOverride:n,type:i}={}){var s;let{transition:a=r.getDefaultTransition(),transitionEnd:o,...l}=e;n&&(a=n);const c=[],u=i&&r.animationState&&r.animationState.getState()[i];for(const f in l){const d=r.getValue(f,(s=r.latestValues[f])!==null&&s!==void 0?s:null),p=l[f];if(p===void 0||u&&mte(u,f))continue;const g={delay:t,...IN(a||{},f)};let _=!1;if(window.MotionHandoffAnimation){const b=e8(r);if(b){const C=window.MotionHandoffAnimation(b,f,di);C!==null&&(g.startTime=C,_=!0)}}qI(r,f),d.start(tD(f,d,p,r.shouldReduceMotion&&$5.has(f)?{type:!1}:g,r,_));const w=d.animation;w&&c.push(w)}return o&&Promise.all(c).then(()=>{di.update(()=>{o&&JN(r,o)})}),c}function oL(r,e,t={}){var n;const i=Pw(r,e,t.type==="exit"?(n=r.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=r.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const a=i?()=>Promise.all(N8(r,i,t)):()=>Promise.resolve(),o=r.variantChildren&&r.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:d}=s;return gte(r,e,u+c,f,d,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>u())}else return Promise.all([a(),o(t.delay)])}function gte(r,e,t=0,n=0,i=1,s){const a=[],o=(r.variantChildren.size-1)*n,l=i===1?(c=0)=>c*n:(c=0)=>o-c*n;return Array.from(r.variantChildren).sort(vte).forEach((c,u)=>{c.notify("AnimationStart",e),a.push(oL(c,e,{...s,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function vte(r,e){return r.sortNodePosition(e)}function D8(r,e,t={}){r.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>oL(r,s,t));n=Promise.all(i)}else if(typeof e=="string")n=oL(r,e,t);else{const i=typeof e=="function"?Pw(r,e,t.custom):e;n=Promise.all(N8(r,i,t))}return n.then(()=>{r.notify("AnimationComplete",e)})}function k8(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0}const yte=PN.length;function R8(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?R8(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<yte;t++){const n=PN[t],i=r.props[n];(Dw(i)||i===!1)&&(e[n]=i)}return e}const wte=[...RN].reverse(),_te=RN.length;function bte(r){return e=>Promise.all(e.map(({animation:t,options:n})=>D8(r,t,n)))}function Ste(r){let e=bte(r),t=F6(),n=!0;const i=l=>(c,u)=>{var f;const d=Pw(r,u,l==="exit"?(f=r.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(d){const{transition:p,transitionEnd:g,..._}=d;c={...c,..._,...g}}return c};function s(l){e=l(r)}function a(l){const{props:c}=r,u=R8(r.parent)||{},f=[],d=new Set;let p={},g=1/0;for(let w=0;w<_te;w++){const b=wte[w],C=t[b],M=c[b]!==void 0?c[b]:u[b],A=Dw(M),k=b===l?C.isActive:null;k===!1&&(g=w);let O=M===u[b]&&M!==c[b]&&A;if(O&&n&&r.manuallyAnimateOnMount&&(O=!1),C.protectedKeys={...p},!C.isActive&&k===null||!M&&!C.prevProp||jM(M)||typeof M=="boolean")continue;const R=xte(C.prevProp,M);let I=R||b===l&&C.isActive&&!O&&A||w>g&&A,D=!1;const E=Array.isArray(M)?M:[M];let B=E.reduce(i(b),{});k===!1&&(B={});const{prevResolvedValues:U={}}=C,V={...U,...B},X=ue=>{I=!0,d.has(ue)&&(D=!0,d.delete(ue)),C.needsAnimating[ue]=!0;const ne=r.getValue(ue);ne&&(ne.liveStyle=!1)};for(const ue in V){const ne=B[ue],oe=U[ue];if(p.hasOwnProperty(ue))continue;let q=!1;KI(ne)&&KI(oe)?q=!k8(ne,oe):q=ne!==oe,q?ne!=null?X(ue):d.add(ue):ne!==void 0&&d.has(ue)?X(ue):C.protectedKeys[ue]=!0}C.prevProp=M,C.prevResolvedValues=B,C.isActive&&(p={...p,...B}),n&&r.blockInitialAnimation&&(I=!1),I&&(!(O&&R)||D)&&f.push(...E.map(ue=>({animation:ue,options:{type:b}})))}if(d.size){const w={};if(typeof c.initial!="boolean"){const b=Pw(r,Array.isArray(c.initial)?c.initial[0]:c.initial);b&&b.transition&&(w.transition=b.transition)}d.forEach(b=>{const C=r.getBaseTarget(b),M=r.getValue(b);M&&(M.liveStyle=!0),w[b]=C??null}),f.push({animation:w})}let _=!!f.length;return n&&(c.initial===!1||c.initial===c.animate)&&!r.manuallyAnimateOnMount&&(_=!1),n=!1,_?e(f):Promise.resolve()}function o(l,c){var u;if(t[l].isActive===c)return Promise.resolve();(u=r.variantChildren)===null||u===void 0||u.forEach(d=>{var p;return(p=d.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),t[l].isActive=c;const f=a(l);for(const d in t)t[d].protectedKeys={};return f}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>t,reset:()=>{t=F6(),n=!0}}}function xte(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!k8(e,r):!1}function Pp(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function F6(){return{animate:Pp(!0),whileInView:Pp(),whileHover:Pp(),whileTap:Pp(),whileDrag:Pp(),whileFocus:Pp(),exit:Pp()}}class Vh{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Cte extends Vh{constructor(e){super(e),e.animationState||(e.animationState=Ste(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();jM(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Mte=0;class Ate extends Vh{constructor(){super(...arguments),this.id=Mte++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Tte={animation:{Feature:Cte},exit:{Feature:Ate}};function Fw(r,e,t,n={passive:!0}){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t)}function k_(r){return{point:{x:r.pageX,y:r.pageY}}}const Ete=r=>e=>kN(e)&&r(e,k_(e));function iw(r,e,t,n){return Fw(r,e,Ete(t),n)}function P8({top:r,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:r,max:n}}}function Ite({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function Lte(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),n=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}const O8=1e-4,Nte=1-O8,Dte=1+O8,F8=.01,kte=0-F8,Rte=0+F8;function po(r){return r.max-r.min}function Pte(r,e,t){return Math.abs(r-e)<=t}function B6(r,e,t,n=.5){r.origin=n,r.originPoint=Pi(e.min,e.max,r.origin),r.scale=po(t)/po(e),r.translate=Pi(t.min,t.max,r.origin)-r.originPoint,(r.scale>=Nte&&r.scale<=Dte||isNaN(r.scale))&&(r.scale=1),(r.translate>=kte&&r.translate<=Rte||isNaN(r.translate))&&(r.translate=0)}function sw(r,e,t,n){B6(r.x,e.x,t.x,n?n.originX:void 0),B6(r.y,e.y,t.y,n?n.originY:void 0)}function U6(r,e,t){r.min=t.min+e.min,r.max=r.min+po(e)}function Ote(r,e,t){U6(r.x,e.x,t.x),U6(r.y,e.y,t.y)}function j6(r,e,t){r.min=e.min-t.min,r.max=r.min+po(e)}function aw(r,e,t){j6(r.x,e.x,t.x),j6(r.y,e.y,t.y)}const z6=()=>({translate:0,scale:1,origin:0,originPoint:0}),U0=()=>({x:z6(),y:z6()}),V6=()=>({min:0,max:0}),rs=()=>({x:V6(),y:V6()});function Rl(r){return[r("x"),r("y")]}function NE(r){return r===void 0||r===1}function lL({scale:r,scaleX:e,scaleY:t}){return!NE(r)||!NE(e)||!NE(t)}function Zp(r){return lL(r)||B8(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function B8(r){return G6(r.x)||G6(r.y)}function G6(r){return r&&r!=="0%"}function Xx(r,e,t){const n=r-t,i=e*n;return t+i}function H6(r,e,t,n,i){return i!==void 0&&(r=Xx(r,i,n)),Xx(r,t,n)+e}function cL(r,e=0,t=1,n,i){r.min=H6(r.min,e,t,n,i),r.max=H6(r.max,e,t,n,i)}function U8(r,{x:e,y:t}){cL(r.x,e.translate,e.scale,e.originPoint),cL(r.y,t.translate,t.scale,t.originPoint)}const W6=.999999999999,Y6=1.0000000000001;function Fte(r,e,t,n=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=t[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&z0(r,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,U8(r,a)),n&&Zp(s.latestValues)&&z0(r,s.latestValues))}e.x<Y6&&e.x>W6&&(e.x=1),e.y<Y6&&e.y>W6&&(e.y=1)}function j0(r,e){r.min=r.min+e,r.max=r.max+e}function J6(r,e,t,n,i=.5){const s=Pi(r.min,r.max,i);cL(r,e,t,s,n)}function z0(r,e){J6(r.x,e.x,e.scaleX,e.scale,e.originX),J6(r.y,e.y,e.scaleY,e.scale,e.originY)}function j8(r,e){return P8(Lte(r.getBoundingClientRect(),e))}function Bte(r,e,t){const n=j8(r,t),{scroll:i}=e;return i&&(j0(n.x,i.offset.x),j0(n.y,i.offset.y)),n}const z8=({current:r})=>r?r.ownerDocument.defaultView:null,X6=(r,e)=>Math.abs(r-e);function Ute(r,e){const t=X6(r.x,e.x),n=X6(r.y,e.y);return Math.sqrt(t**2+n**2)}class V8{constructor(e,t,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=kE(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,p=Ute(f.offset,{x:0,y:0})>=3;if(!d&&!p)return;const{point:g}=f,{timestamp:_}=ma;this.history.push({...g,timestamp:_});const{onStart:w,onMove:b}=this.handlers;d||(w&&w(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,f)},this.handlePointerMove=(f,d)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=DE(d,this.transformPagePoint),di.update(this.updatePoint,!0)},this.handlePointerUp=(f,d)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=kE(f.type==="pointercancel"?this.lastMoveEventInfo:DE(d,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,w),g&&g(f,w)},!kN(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=i||window;const a=k_(e),o=DE(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=ma;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,kE(o,this.history)),this.removeListeners=D_(iw(this.contextWindow,"pointermove",this.handlePointerMove),iw(this.contextWindow,"pointerup",this.handlePointerUp),iw(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),bh(this.updatePoint)}}function DE(r,e){return e?{point:e(r.point)}:r}function Q6(r,e){return{x:r.x-e.x,y:r.y-e.y}}function kE({point:r},e){return{point:r,delta:Q6(r,G8(e)),offset:Q6(r,jte(e)),velocity:zte(e,.1)}}function jte(r){return r[0]}function G8(r){return r[r.length-1]}function zte(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,n=null;const i=G8(r);for(;t>=0&&(n=r[t],!(i.timestamp-n.timestamp>Bf(e)));)t--;if(!n)return{x:0,y:0};const s=Uf(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Vte(r,{min:e,max:t},n){return e!==void 0&&r<e?r=n?Pi(e,r,n.min):Math.max(r,e):t!==void 0&&r>t&&(r=n?Pi(t,r,n.max):Math.min(r,t)),r}function K6(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function Gte(r,{top:e,left:t,bottom:n,right:i}){return{x:K6(r.x,t,i),y:K6(r.y,e,n)}}function q6(r,e){let t=e.min-r.min,n=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,n]=[n,t]),{min:t,max:n}}function Hte(r,e){return{x:q6(r.x,e.x),y:q6(r.y,e.y)}}function Wte(r,e){let t=.5;const n=po(r),i=po(e);return i>n?t=w1(e.min,e.max-n,r.min):n>i&&(t=w1(r.min,r.max-i,e.min)),Yf(0,1,t)}function Yte(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const uL=.35;function Jte(r=uL){return r===!1?r=0:r===!0&&(r=uL),{x:Z6(r,"left","right"),y:Z6(r,"top","bottom")}}function Z6(r,e,t){return{min:$6(r,e),max:$6(r,t)}}function $6(r,e){return typeof r=="number"?r:r[e]||0}const Xte=new WeakMap;class Qte{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rs(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(k_(u).point)},s=(u,f)=>{const{drag:d,dragPropagation:p,onDragStart:g}=this.getProps();if(d&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=WZ(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rl(w=>{let b=this.getAxisMotionValue(w).get()||0;if(Su.test(b)){const{projection:C}=this.visualElement;if(C&&C.layout){const M=C.layout.layoutBox[w];M&&(b=po(M)*(parseFloat(b)/100))}}this.originPoint[w]=b}),g&&di.postRender(()=>g(u,f)),qI(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},a=(u,f)=>{const{dragPropagation:d,dragDirectionLock:p,onDirectionLock:g,onDrag:_}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:w}=f;if(p&&this.currentDirection===null){this.currentDirection=Kte(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),_&&_(u,f)},o=(u,f)=>this.stop(u,f),l=()=>Rl(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new V8(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:z8(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&di.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!h2(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=Vte(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&F0(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Gte(i.layoutBox,t):this.constraints=!1,this.elastic=Jte(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Rl(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Yte(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!F0(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Bte(n,i.root,this.visualElement.getTransformPagePoint());let a=Hte(i.layout.layoutBox,s);if(t){const o=t(Ite(a));this.hasMutatedConstraints=!!o,o&&(a=P8(o))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Rl(u=>{if(!h2(u,t,this.currentDirection))return;let f=l&&l[u]||{};a&&(f={min:0,max:0});const d=i?200:1e6,p=i?40:1e7,g={type:"inertia",velocity:n?e[u]:0,bounceStiffness:d,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return qI(this.visualElement,e),n.start(tD(e,n,0,t,this.visualElement,!1))}stopAnimation(){Rl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Rl(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Rl(t=>{const{drag:n}=this.getProps();if(!h2(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[t];s.set(e[t]-Pi(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!F0(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Rl(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=Wte({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Rl(a=>{if(!h2(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(Pi(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;Xte.set(this.visualElement,this);const e=this.visualElement.current,t=iw(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();F0(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),di.read(n);const a=Fw(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Rl(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),t(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=uL,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function h2(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function Kte(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class qte extends Vh{constructor(e){super(e),this.removeGroupControls=fl,this.removeListeners=fl,this.controls=new Qte(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fl}unmount(){this.removeGroupControls(),this.removeListeners()}}const eO=r=>(e,t)=>{r&&di.postRender(()=>r(e,t))};class Zte extends Vh{constructor(){super(...arguments),this.removePointerDownListener=fl}onPointerDown(e){this.session=new V8(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:z8(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:eO(e),onStart:eO(t),onMove:n,onEnd:(s,a)=>{delete this.session,i&&di.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=iw(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const sx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tO(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const yy={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(On.test(r))r=parseFloat(r);else return r;const t=tO(r,e.target.x),n=tO(r,e.target.y);return`${t}% ${n}%`}},$te={correct:(r,{treeScale:e,projectionDelta:t})=>{const n=r,i=Sh.parse(r);if(i.length>5)return n;const s=Sh.createTransformer(r),a=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const c=Pi(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),s(i)}};class ene extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;y$(tne),s&&(t.group&&t.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),sx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:s}=this.props,a=n.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||di.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),DN.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function H8(r){const[e,t]=PZ(),n=P.useContext(b5);return S(ene,{...r,layoutGroup:n,switchLayoutGroup:P.useContext(j5),isPresent:e,safeToRemove:t})}const tne={borderRadius:{...yy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yy,borderTopRightRadius:yy,borderBottomLeftRadius:yy,borderBottomRightRadius:yy,boxShadow:$te};function nne(r,e,t){const n=Va(r)?r:Nw(r);return n.start(tD("",n,e,t)),n.animation}function rne(r){return r instanceof SVGElement&&r.tagName!=="svg"}const ine=(r,e)=>r.depth-e.depth;class sne{constructor(){this.children=[],this.isDirty=!1}add(e){MN(this.children,e),this.isDirty=!0}remove(e){AN(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ine),this.isDirty=!1,this.children.forEach(e)}}function ane(r,e){const t=bu.now(),n=({timestamp:i})=>{const s=i-t;s>=e&&(bh(n),r(s-e))};return di.read(n,!0),()=>bh(n)}const W8=["TopLeft","TopRight","BottomLeft","BottomRight"],one=W8.length,nO=r=>typeof r=="string"?parseFloat(r):r,rO=r=>typeof r=="number"||On.test(r);function lne(r,e,t,n,i,s){i?(r.opacity=Pi(0,t.opacity!==void 0?t.opacity:1,cne(n)),r.opacityExit=Pi(e.opacity!==void 0?e.opacity:1,0,une(n))):s&&(r.opacity=Pi(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,n));for(let a=0;a<one;a++){const o=`border${W8[a]}Radius`;let l=iO(e,o),c=iO(t,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||rO(l)===rO(c)?(r[o]=Math.max(Pi(nO(l),nO(c),n),0),(Su.test(c)||Su.test(l))&&(r[o]+="%")):r[o]=c}(e.rotate||t.rotate)&&(r.rotate=Pi(e.rotate||0,t.rotate||0,n))}function iO(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const cne=Y8(0,.5,o8),une=Y8(.5,.95,fl);function Y8(r,e,t){return n=>n<r?0:n>e?1:t(w1(r,e,n))}function sO(r,e){r.min=e.min,r.max=e.max}function Ll(r,e){sO(r.x,e.x),sO(r.y,e.y)}function aO(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function oO(r,e,t,n,i){return r-=e,r=Xx(r,1/t,n),i!==void 0&&(r=Xx(r,1/i,n)),r}function fne(r,e=0,t=1,n=.5,i,s=r,a=r){if(Su.test(e)&&(e=parseFloat(e),e=Pi(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Pi(s.min,s.max,n);r===s&&(o-=e),r.min=oO(r.min,e,t,o,i),r.max=oO(r.max,e,t,o,i)}function lO(r,e,[t,n,i],s,a){fne(r,e[t],e[n],e[i],e.scale,s,a)}const dne=["x","scaleX","originX"],hne=["y","scaleY","originY"];function cO(r,e,t,n){lO(r.x,e,dne,t?t.x:void 0,n?n.x:void 0),lO(r.y,e,hne,t?t.y:void 0,n?n.y:void 0)}function uO(r){return r.translate===0&&r.scale===1}function J8(r){return uO(r.x)&&uO(r.y)}function fO(r,e){return r.min===e.min&&r.max===e.max}function pne(r,e){return fO(r.x,e.x)&&fO(r.y,e.y)}function dO(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function X8(r,e){return dO(r.x,e.x)&&dO(r.y,e.y)}function hO(r){return po(r.x)/po(r.y)}function pO(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class mne{constructor(){this.members=[]}add(e){MN(this.members,e),e.scheduleRender()}remove(e){if(AN(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let n;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function gne(r,e,t){let n="";const i=r.x.translate/e.x,s=r.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((i||s||a)&&(n=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:d,skewX:p,skewY:g}=t;c&&(n=`perspective(${c}px) ${n}`),u&&(n+=`rotate(${u}deg) `),f&&(n+=`rotateX(${f}deg) `),d&&(n+=`rotateY(${d}deg) `),p&&(n+=`skewX(${p}deg) `),g&&(n+=`skewY(${g}deg) `)}const o=r.x.scale*e.x,l=r.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const RE=["","X","Y","Z"],vne={visibility:"hidden"},mO=1e3;let yne=0;function PE(r,e,t,n){const{latestValues:i}=e;i[r]&&(t[r]=i[r],e.setStaticValue(r,0),n&&(n[r]=0))}function Q8(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=e8(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",di,!(i||s))}const{parent:n}=r;n&&!n.hasCheckedOptimisedAppear&&Q8(n)}function K8({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=yne++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bne),this.nodes.forEach(Ane),this.nodes.forEach(Tne),this.nodes.forEach(Sne)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new sne)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new EN),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=rne(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),r){let f;const d=()=>this.root.updateBlockedByResize=!1;r(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=ane(d,250),sx.hasAnimatedSinceResize&&(sx.hasAnimatedSinceResize=!1,this.nodes.forEach(vO))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||Dne,{onLayoutAnimationStart:w,onLayoutAnimationComplete:b}=u.getProps(),C=!this.targetLayout||!X8(this.targetLayout,g),M=!d&&p;if(this.options.layoutRoot||this.resumeFrom||M||d&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,M);const A={...IN(_,"layout"),onPlay:w,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else d||vO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,bh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ene),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Q8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gO);return}this.isUpdating||this.nodes.forEach(Cne),this.isUpdating=!1,this.nodes.forEach(Mne),this.nodes.forEach(wne),this.nodes.forEach(_ne),this.clearAllSnapshots();const o=bu.now();ma.delta=Yf(0,1e3/60,o-ma.timestamp),ma.timestamp=o,ma.isProcessing=!0,AE.update.process(ma),AE.preRender.process(ma),AE.render.process(ma),ma.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,DN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(xne),this.sharedNodes.forEach(Ine)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,di.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){di.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!po(this.snapshot.measuredBox.x)&&!po(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=rs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!J8(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&(o||Zp(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),kne(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return rs();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Rne))){const{scroll:u}=this.root;u&&(j0(l.x,u.offset.x),j0(l.y,u.offset.y))}return l}removeElementScroll(a){var o;const l=rs();if(Ll(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:d}=u;u!==this.root&&f&&d.layoutScroll&&(f.wasRoot&&Ll(l,a),j0(l.x,f.offset.x),j0(l.y,f.offset.y))}return l}applyTransform(a,o=!1){const l=rs();Ll(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&z0(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Zp(u.latestValues)&&z0(l,u.latestValues)}return Zp(this.latestValues)&&z0(l,this.latestValues),l}removeTransform(a){const o=rs();Ll(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Zp(c.latestValues))continue;lL(c.latestValues)&&c.updateSnapshot();const u=rs(),f=c.measurePageBox();Ll(u,f),cO(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Zp(this.latestValues)&&cO(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ma.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=ma.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rs(),this.relativeTargetOrigin=rs(),aw(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ll(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=rs(),this.targetWithTransforms=rs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ote(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ll(this.target,this.layout.layoutBox),U8(this.target,this.targetDelta)):Ll(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rs(),this.relativeTargetOrigin=rs(),aw(this.relativeTargetOrigin,this.target,p.target),Ll(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||lL(this.parent.latestValues)||B8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ma.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Ll(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,p=this.treeScale.y;Fte(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=rs());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(aO(this.prevProjectionDelta.x,this.projectionDelta.x),aO(this.prevProjectionDelta.y,this.projectionDelta.y)),sw(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==p||!pO(this.projectionDelta.x,this.prevProjectionDelta.x)||!pO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=U0(),this.projectionDelta=U0(),this.projectionDeltaWithTransform=U0()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=U0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=rs(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,_=p!==g,w=this.getStack(),b=!w||w.members.length<=1,C=!!(_&&!b&&this.options.crossfade===!0&&!this.path.some(Nne));this.animationProgress=0;let M;this.mixTargetDelta=A=>{const k=A/1e3;yO(f.x,a.x,k),yO(f.y,a.y,k),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(aw(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Lne(this.relativeTarget,this.relativeTargetOrigin,d,k),M&&pne(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=rs()),Ll(M,this.relativeTarget)),_&&(this.animationValues=u,lne(u,c,this.latestValues,k,C,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(bh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=di.update(()=>{sx.hasAnimatedSinceResize=!0,this.currentAnimation=nne(0,mO,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&q8(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||rs();const f=po(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+f;const d=po(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+d}Ll(o,l),z0(o,u),sw(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new mne),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&PE("z",a,c,this.animationValues);for(let u=0;u<RE.length;u++)PE(`rotate${RE[u]}`,a,c,this.animationValues),PE(`skew${RE[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return vne;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=ix(a==null?void 0:a.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=ix(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Zp(this.latestValues)&&(_.transform=u?u({},""):"none",this.hasProjected=!1),_}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=gne(this.projectionDeltaWithTransform,this.treeScale,d),u&&(c.transform=u(d,c.transform));const{x:p,y:g}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(o=d.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const _ in kw){if(d[_]===void 0)continue;const{correct:w,applyTo:b,isCSSVariable:C}=kw[_],M=c.transform==="none"?d[_]:w(d[_],f);if(b){const A=b.length;for(let k=0;k<A;k++)c[b[k]]=M}else C?this.options.visualElement.renderState.vars[_]=M:c[_]=M}return this.options.layoutId&&(c.pointerEvents=f===this?ix(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(gO),this.root.sharedNodes.clear()}}}function wne(r){r.updateLayout()}function _ne(r){var e;const t=((e=r.resumeFrom)===null||e===void 0?void 0:e.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&t&&r.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=r.layout,{animationType:s}=r.options,a=t.source!==r.layout.source;s==="size"?Rl(f=>{const d=a?t.measuredBox[f]:t.layoutBox[f],p=po(d);d.min=n[f].min,d.max=d.min+p}):q8(s,t.layoutBox,n)&&Rl(f=>{const d=a?t.measuredBox[f]:t.layoutBox[f],p=po(n[f]);d.max=d.min+p,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[f].max=r.relativeTarget[f].min+p)});const o=U0();sw(o,n,t.layoutBox);const l=U0();a?sw(l,r.applyTransform(i,!0),t.measuredBox):sw(l,n,t.layoutBox);const c=!J8(o);let u=!1;if(!r.resumeFrom){const f=r.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:p}=f;if(d&&p){const g=rs();aw(g,t.layoutBox,d.layoutBox);const _=rs();aw(_,n,p.layoutBox),X8(g,_)||(u=!0),f.options.layoutRoot&&(r.relativeTarget=_,r.relativeTargetOrigin=g,r.relativeParent=f)}}}r.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(r.isLead()){const{onExitComplete:n}=r.options;n&&n()}r.options.transition=void 0}function bne(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function Sne(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function xne(r){r.clearSnapshot()}function gO(r){r.clearMeasurements()}function Cne(r){r.isLayoutDirty=!1}function Mne(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function vO(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function Ane(r){r.resolveTargetDelta()}function Tne(r){r.calcProjection()}function Ene(r){r.resetSkewAndRotation()}function Ine(r){r.removeLeadSnapshot()}function yO(r,e,t){r.translate=Pi(e.translate,0,t),r.scale=Pi(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function wO(r,e,t,n){r.min=Pi(e.min,t.min,n),r.max=Pi(e.max,t.max,n)}function Lne(r,e,t,n){wO(r.x,e.x,t.x,n),wO(r.y,e.y,t.y,n)}function Nne(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const Dne={duration:.45,ease:[.4,0,.1,1]},_O=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),bO=_O("applewebkit/")&&!_O("chrome/")?Math.round:fl;function SO(r){r.min=bO(r.min),r.max=bO(r.max)}function kne(r){SO(r.x),SO(r.y)}function q8(r,e,t){return r==="position"||r==="preserve-aspect"&&!Pte(hO(e),hO(t),.2)}function Rne(r){var e;return r!==r.root&&((e=r.scroll)===null||e===void 0?void 0:e.wasRoot)}const Pne=K8({attachResizeListener:(r,e)=>Fw(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),OE={current:void 0},Z8=K8({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!OE.current){const r=new Pne({});r.mount(window),r.setOptions({layoutScroll:!0}),OE.current=r}return OE.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),One={pan:{Feature:Zte},drag:{Feature:qte,ProjectionNode:Z8,MeasureLayout:H8}};function xO(r,e,t){const{props:n}=r;r.animationState&&n.whileHover&&r.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=n[i];s&&di.postRender(()=>s(e,k_(e)))}class Fne extends Vh{mount(){const{current:e}=this.node;e&&(this.unmount=YZ(e,(t,n)=>(xO(this.node,n,"Start"),i=>xO(this.node,i,"End"))))}unmount(){}}class Bne extends Vh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=D_(Fw(this.node.current,"focus",()=>this.onFocus()),Fw(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function CO(r,e,t){const{props:n}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&n.whileTap&&r.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=n[i];s&&di.postRender(()=>s(e,k_(e)))}class Une extends Vh{mount(){const{current:e}=this.node;e&&(this.unmount=KZ(e,(t,n)=>(CO(this.node,n,"Start"),(i,{success:s})=>CO(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const fL=new WeakMap,FE=new WeakMap,jne=r=>{const e=fL.get(r.target);e&&e(r)},zne=r=>{r.forEach(jne)};function Vne({root:r,...e}){const t=r||document;FE.has(t)||FE.set(t,{});const n=FE.get(t),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(zne,{root:r,...e})),n[i]}function Gne(r,e,t){const n=Vne(e);return fL.set(r,t),n.observe(r),()=>{fL.delete(r),n.unobserve(r)}}const Hne={some:0,all:1};class Wne extends Vh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:Hne[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),d=c?u:f;d&&d(l)};return Gne(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Yne(e,t))&&this.startObserver()}unmount(){}}function Yne({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const Jne={inView:{Feature:Wne},tap:{Feature:Une},focus:{Feature:Bne},hover:{Feature:Fne}},Xne={layout:{ProjectionNode:Z8,MeasureLayout:H8}},dL={current:null},$8={current:!1};function Qne(){if($8.current=!0,!!xN)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>dL.current=r.matches;r.addListener(e),e()}else dL.current=!1}const Kne=[...S8,Fa,Sh],qne=r=>Kne.find(b8(r)),Zne=new WeakMap;function $ne(r,e,t){for(const n in e){const i=e[n],s=t[n];if(Va(i))r.addValue(n,i);else if(Va(s))r.addValue(n,Nw(i,{owner:r}));else if(s!==i)if(r.hasValue(n)){const a=r.getValue(n);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=r.getStaticValue(n);r.addValue(n,Nw(a!==void 0?a:i,{owner:r}))}}for(const n in t)e[n]===void 0&&r.removeValue(n);return e}const MO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ere{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ZN,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=bu.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,di.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=a;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=zM(t),this.isVariantNode=B5(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in d){const g=d[p];l[p]!==void 0&&Va(g)&&g.set(l[p],!1)}}mount(e){this.current=e,Zne.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),$8.current||Qne(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:dL.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),bh(this.notifyUpdate),bh(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=ig.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&di.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in _1){const t=_1[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rs()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<MO.length;n++){const i=MO[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=$ne(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=Nw(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(w8(i)||c8(i))?i=parseFloat(i):!qne(i)&&Sh.test(t)&&(i=g8(e,t)),this.setBaseTarget(e,Va(i)?i.get():i)),Va(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const a=WN(this.props,n,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);a&&(i=a[e])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Va(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new EN),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class eV extends ere{constructor(){super(...arguments),this.KeyframeResolver=x8}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Va(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function tre(r){return window.getComputedStyle(r)}class nre extends eV{constructor(){super(...arguments),this.type="html",this.renderInstance=Q5}readValueFromInstance(e,t){if(ig.has(t))return pee(e,t);{const n=tre(e),i=(FN(t)?n.getPropertyValue(t):n[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return j8(e,t)}build(e,t,n){jN(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return YN(e,t,n)}}class rre extends eV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=rs,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&X5(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ig.has(t)){const n=m8(t);return n&&n.default||0}return t=K5.has(t)?t:ON(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return Z5(e,t,n)}onBindTransform(){this.current&&!this.renderState.dimensions&&di.postRender(this.updateDimensions)}build(e,t,n){GN(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,i){q5(e,t,n,i)}mount(e){this.isSVGTag=HN(e.tagName),super.mount(e)}}const ire=(r,e)=>VN(r)?new rre(e):new nre(e,{allowProjection:r!==P.Fragment}),sre=V$({...Tte,...Jne,...One,...Xne},ire),Ol=i$(sre);function are(r){r.values.forEach(e=>e.stop())}function hL(r,e){[...e].reverse().forEach(n=>{const i=r.getVariant(n);i&&JN(r,i),r.variantChildren&&r.variantChildren.forEach(s=>{hL(s,e)})})}function ore(r,e){if(Array.isArray(e))return hL(r,e);if(typeof e=="string")return hL(r,[e]);JN(r,e)}function lre(){const r=new Set,e={subscribe(t){return r.add(t),()=>void r.delete(t)},start(t,n){const i=[];return r.forEach(s=>{i.push(D8(s,t,{transitionOverride:n}))}),Promise.all(i)},set(t){return r.forEach(n=>{ore(n,t)})},stop(){r.forEach(t=>{are(t)})},mount(){return()=>{e.stop()}}};return e}function cre(){const r=S5(lre);return x5(r.mount,[]),r}const tV=cre,ure={some:0,all:1};function fre(r,e,{root:t,margin:n,amount:i="some"}={}){const s=k5(r),a=new WeakMap,o=c=>{c.forEach(u=>{const f=a.get(u.target);if(u.isIntersecting!==!!f)if(u.isIntersecting){const d=e(u.target,u);typeof d=="function"?a.set(u.target,d):l.unobserve(u.target)}else typeof f=="function"&&(f(u),a.delete(u.target))})},l=new IntersectionObserver(o,{root:t,rootMargin:n,threshold:typeof i=="number"?i:ure[i]});return s.forEach(c=>l.observe(c)),()=>l.disconnect()}function nV(r,{root:e,margin:t,amount:n,once:i=!1,initial:s=!1}={}){const[a,o]=P.useState(s);return P.useEffect(()=>{if(!r.current||i&&a)return;const l=()=>(o(!0),i?void 0:()=>o(!1)),c={root:e&&e.current||void 0,margin:t,amount:n};return fre(r.current,l,c)},[e,r,t,i,n]),a}/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dre=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rV=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hre={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pre=P.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...o},l)=>P.createElement("svg",{ref:l,...hre,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:rV("lucide",i),...o},[...a.map(([c,u])=>P.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=(r,e)=>{const t=P.forwardRef(({className:n,...i},s)=>P.createElement(pre,{ref:s,iconNode:e,className:rV(`lucide-${dre(r)}`,n),...i}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mre=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gre=an("ArrowLeft",mre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vre=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],yre=an("ArrowRight",vre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wre=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ow=an("Award",wre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _re=[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]],bre=an("Brush",_re);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sre=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],iV=an("Calendar",Sre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xre=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],GM=an("Check",xre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cre=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yc=an("ChevronDown",Cre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mre=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],pL=an("ChevronLeft",Mre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Are=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],HM=an("ChevronRight",Are);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tre=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],wc=an("ChevronUp",Tre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ere=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],sV=an("CircleAlert",Ere);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ire=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],aV=an("CircleCheckBig",Ire);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Nre=an("CircleHelp",Lre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Z0=an("Clock",Dre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kre=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],mL=an("Copy",kre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rre=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ax=an("Crown",Rre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pre=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ore=an("DollarSign",Pre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fre=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Bre=an("Download",Fre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ure=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],jre=an("Droplet",Ure);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],Vre=an("Eraser",zre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gre=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],p2=an("EyeOff",Gre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hre=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wy=an("Eye",Hre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wre=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Yre=an("FileText",Wre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jre=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],Xre=an("Flag",Jre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qre=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],AO=an("FolderOpen",Qre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Bw=an("Grid3x3",Kre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qre=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],S1=an("Heart",qre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],$0=an("Image",Zre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],eie=an("Info",$re);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tie=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],V0=an("Layers",tie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nie=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],oV=an("LoaderCircle",nie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rie=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],iie=an("Loader",rie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sie=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],TO=an("LockOpen",sie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aie=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fm=an("Lock",aie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oie=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],WM=an("MessageSquare",oie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lie=[["path",{d:"M5 12h14",key:"1ays0h"}]],cie=an("Minus",lie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uie=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],Uw=an("Palette",uie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fie=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],lV=an("Pen",fie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const die=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],nD=an("Plus",die);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hie=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],pie=an("Redo",hie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mie=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jw=an("RefreshCw",mie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gie=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],EO=an("Repeat",gie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vie=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],cV=an("RotateCcw",vie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yie=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],uV=an("RotateCw",yie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wie=[["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z",key:"4rw317"}],["path",{d:"M11.38 12a2.4 2.4 0 0 1-.4-4.77 2.4 2.4 0 0 1 3.2-2.77 2.4 2.4 0 0 1 3.47-.63 2.4 2.4 0 0 1 3.37 3.37 2.4 2.4 0 0 1-1.1 3.7 2.51 2.51 0 0 1 .03 1.1",key:"10xrj0"}],["path",{d:"m13 12 4-4",key:"1hckqy"}],["path",{d:"M10.9 7.25A3.99 3.99 0 0 0 4 10c0 .73.2 1.41.54 2",key:"1p4srx"}]],_ie=an("Salad",wie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bie=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],YM=an("Save",bie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sie=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],xie=an("Scissors",Sie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cie=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],rD=an("Search",Cie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mie=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Aie=an("Send",Mie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tie=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Eie=an("Share2",Tie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iie=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Lie=an("Shield",Iie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nie=[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]],Qx=an("Shirt",Nie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Die=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],Om=an("ShoppingBag",Die);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kie=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Rie=an("SlidersHorizontal",kie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pie=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],ox=an("Sparkles",Pie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oie=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],m2=an("SquarePen",Oie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fie=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],IO=an("StarOff",Fie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bie=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Fm=an("Star",Bie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uie=[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]],jie=an("Subscript",Uie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zie=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],fV=an("Sun",zie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vie=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],Gie=an("ThumbsUp",Vie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hie=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],x1=an("Trash2",Hie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wie=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],C1=an("Trophy",Wie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yie=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],lx=an("Type",Yie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jie=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Xie=an("Undo",Jie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qie=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],JM=an("Upload",Qie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kie=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],iD=an("User",Kie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qie=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Zie=an("Users",qie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ie=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],cx=an("WandSparkles",$ie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ese=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],tse=an("Wind",ese);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nse=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Oc=an("X",nse);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rse=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ise=an("Zap",rse);var ux={exports:{}},sse=ux.exports,LO;function ase(){return LO||(LO=1,function(r,e){(function(t,n){r.exports=n(nv())})(typeof self<"u"?self:sse,t=>(()=>{var n={7403:(o,l,c)=>{c.d(l,{default:()=>ne});var u=c(4087),f=c.n(u);const d=function(oe){return new RegExp(/<[a-z][\s\S]*>/i).test(oe)},p=function(oe,q){return Math.floor(Math.random()*(q-oe+1))+oe};var g="TYPE_CHARACTER",_="REMOVE_CHARACTER",w="REMOVE_ALL",b="REMOVE_LAST_VISIBLE_NODE",C="PAUSE_FOR",M="CALL_FUNCTION",A="ADD_HTML_TAG_ELEMENT",k="CHANGE_DELETE_SPEED",O="CHANGE_DELAY",R="CHANGE_CURSOR",I="PASTE_STRING",D="HTML_TAG";function E(oe){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},E(oe)}function B(oe,q){var J=Object.keys(oe);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(oe);q&&(ie=ie.filter(function(he){return Object.getOwnPropertyDescriptor(oe,he).enumerable})),J.push.apply(J,ie)}return J}function U(oe){for(var q=1;q<arguments.length;q++){var J=arguments[q]!=null?arguments[q]:{};q%2?B(Object(J),!0).forEach(function(ie){ee(oe,ie,J[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(J)):B(Object(J)).forEach(function(ie){Object.defineProperty(oe,ie,Object.getOwnPropertyDescriptor(J,ie))})}return oe}function V(oe){return function(q){if(Array.isArray(q))return X(q)}(oe)||function(q){if(typeof Symbol<"u"&&q[Symbol.iterator]!=null||q["@@iterator"]!=null)return Array.from(q)}(oe)||function(q,J){if(q){if(typeof q=="string")return X(q,J);var ie=Object.prototype.toString.call(q).slice(8,-1);return ie==="Object"&&q.constructor&&(ie=q.constructor.name),ie==="Map"||ie==="Set"?Array.from(q):ie==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ie)?X(q,J):void 0}}(oe)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function X(oe,q){(q==null||q>oe.length)&&(q=oe.length);for(var J=0,ie=new Array(q);J<q;J++)ie[J]=oe[J];return ie}function te(oe,q){for(var J=0;J<q.length;J++){var ie=q[J];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(oe,ue(ie.key),ie)}}function ee(oe,q,J){return(q=ue(q))in oe?Object.defineProperty(oe,q,{value:J,enumerable:!0,configurable:!0,writable:!0}):oe[q]=J,oe}function ue(oe){var q=function(J,ie){if(E(J)!=="object"||J===null)return J;var he=J[Symbol.toPrimitive];if(he!==void 0){var $=he.call(J,"string");if(E($)!=="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(J)}(oe);return E(q)==="symbol"?q:String(q)}const ne=function(){function oe(ie,he){var $=this;if(function(pe,we){if(!(pe instanceof we))throw new TypeError("Cannot call a class as a function")}(this,oe),ee(this,"state",{cursorAnimation:null,lastFrameTime:null,pauseUntil:null,eventQueue:[],eventLoop:null,eventLoopPaused:!1,reverseCalledEvents:[],calledEvents:[],visibleNodes:[],initialOptions:null,elements:{container:null,wrapper:document.createElement("span"),cursor:document.createElement("span")}}),ee(this,"options",{strings:null,cursor:"|",delay:"natural",pauseFor:1500,deleteSpeed:"natural",loop:!1,autoStart:!1,devMode:!1,skipAddStyles:!1,wrapperClassName:"Typewriter__wrapper",cursorClassName:"Typewriter__cursor",stringSplitter:null,onCreateTextNode:null,onRemoveNode:null}),ee(this,"setupWrapperElement",function(){$.state.elements.container&&($.state.elements.wrapper.className=$.options.wrapperClassName,$.state.elements.cursor.className=$.options.cursorClassName,$.state.elements.cursor.innerHTML=$.options.cursor,$.state.elements.container.innerHTML="",$.state.elements.container.appendChild($.state.elements.wrapper),$.state.elements.container.appendChild($.state.elements.cursor))}),ee(this,"start",function(){return $.state.eventLoopPaused=!1,$.runEventLoop(),$}),ee(this,"pause",function(){return $.state.eventLoopPaused=!0,$}),ee(this,"stop",function(){return $.state.eventLoop&&((0,u.cancel)($.state.eventLoop),$.state.eventLoop=null),$}),ee(this,"pauseFor",function(pe){return $.addEventToQueue(C,{ms:pe}),$}),ee(this,"typeOutAllStrings",function(){return typeof $.options.strings=="string"?($.typeString($.options.strings).pauseFor($.options.pauseFor),$):($.options.strings.forEach(function(pe){$.typeString(pe).pauseFor($.options.pauseFor).deleteAll($.options.deleteSpeed)}),$)}),ee(this,"typeString",function(pe){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(d(pe))return $.typeOutHTMLString(pe,we);if(pe){var ke=($.options||{}).stringSplitter,Pe=typeof ke=="function"?ke(pe):pe.split("");$.typeCharacters(Pe,we)}return $}),ee(this,"pasteString",function(pe){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return d(pe)?$.typeOutHTMLString(pe,we,!0):(pe&&$.addEventToQueue(I,{character:pe,node:we}),$)}),ee(this,"typeOutHTMLString",function(pe){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ke=arguments.length>2?arguments[2]:void 0,Pe=function(Ge){var ce=document.createElement("div");return ce.innerHTML=Ge,ce.childNodes}(pe);if(Pe.length>0)for(var je=0;je<Pe.length;je++){var Ke=Pe[je],Ie=Ke.innerHTML;Ke&&Ke.nodeType!==3?(Ke.innerHTML="",$.addEventToQueue(A,{node:Ke,parentNode:we}),ke?$.pasteString(Ie,Ke):$.typeString(Ie,Ke)):Ke.textContent&&(ke?$.pasteString(Ke.textContent,we):$.typeString(Ke.textContent,we))}return $}),ee(this,"deleteAll",function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"natural";return $.addEventToQueue(w,{speed:pe}),$}),ee(this,"changeDeleteSpeed",function(pe){if(!pe)throw new Error("Must provide new delete speed");return $.addEventToQueue(k,{speed:pe}),$}),ee(this,"changeDelay",function(pe){if(!pe)throw new Error("Must provide new delay");return $.addEventToQueue(O,{delay:pe}),$}),ee(this,"changeCursor",function(pe){if(!pe)throw new Error("Must provide new cursor");return $.addEventToQueue(R,{cursor:pe}),$}),ee(this,"deleteChars",function(pe){if(!pe)throw new Error("Must provide amount of characters to delete");for(var we=0;we<pe;we++)$.addEventToQueue(_);return $}),ee(this,"callFunction",function(pe,we){if(!pe||typeof pe!="function")throw new Error("Callback must be a function");return $.addEventToQueue(M,{cb:pe,thisArg:we}),$}),ee(this,"typeCharacters",function(pe){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!pe||!Array.isArray(pe))throw new Error("Characters must be an array");return pe.forEach(function(ke){$.addEventToQueue(g,{character:ke,node:we})}),$}),ee(this,"removeCharacters",function(pe){if(!pe||!Array.isArray(pe))throw new Error("Characters must be an array");return pe.forEach(function(){$.addEventToQueue(_)}),$}),ee(this,"addEventToQueue",function(pe,we){var ke=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return $.addEventToStateProperty(pe,we,ke,"eventQueue")}),ee(this,"addReverseCalledEvent",function(pe,we){var ke=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return $.options.loop?$.addEventToStateProperty(pe,we,ke,"reverseCalledEvents"):$}),ee(this,"addEventToStateProperty",function(pe,we){var ke=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Pe=arguments.length>3?arguments[3]:void 0,je={eventName:pe,eventArgs:we||{}};return $.state[Pe]=ke?[je].concat(V($.state[Pe])):[].concat(V($.state[Pe]),[je]),$}),ee(this,"runEventLoop",function(){$.state.lastFrameTime||($.state.lastFrameTime=Date.now());var pe=Date.now(),we=pe-$.state.lastFrameTime;if(!$.state.eventQueue.length){if(!$.options.loop)return;$.state.eventQueue=V($.state.calledEvents),$.state.calledEvents=[],$.options=U({},$.state.initialOptions)}if($.state.eventLoop=f()($.runEventLoop),!$.state.eventLoopPaused){if($.state.pauseUntil){if(pe<$.state.pauseUntil)return;$.state.pauseUntil=null}var ke,Pe=V($.state.eventQueue),je=Pe.shift();if(!(we<=(ke=je.eventName===b||je.eventName===_?$.options.deleteSpeed==="natural"?p(40,80):$.options.deleteSpeed:$.options.delay==="natural"?p(120,160):$.options.delay))){var Ke=je.eventName,Ie=je.eventArgs;switch($.logInDevMode({currentEvent:je,state:$.state,delay:ke}),Ke){case I:case g:var Ge=Ie.character,ce=Ie.node,_t=document.createTextNode(Ge),_e=_t;$.options.onCreateTextNode&&typeof $.options.onCreateTextNode=="function"&&(_e=$.options.onCreateTextNode(Ge,_t)),_e&&(ce?ce.appendChild(_e):$.state.elements.wrapper.appendChild(_e)),$.state.visibleNodes=[].concat(V($.state.visibleNodes),[{type:"TEXT_NODE",character:Ge,node:_e}]);break;case _:Pe.unshift({eventName:b,eventArgs:{removingCharacterNode:!0}});break;case C:var Ne=je.eventArgs.ms;$.state.pauseUntil=Date.now()+parseInt(Ne);break;case M:var Ce=je.eventArgs,He=Ce.cb,Ee=Ce.thisArg;He.call(Ee,{elements:$.state.elements});break;case A:var Z=je.eventArgs,W=Z.node,re=Z.parentNode;re?re.appendChild(W):$.state.elements.wrapper.appendChild(W),$.state.visibleNodes=[].concat(V($.state.visibleNodes),[{type:D,node:W,parentNode:re||$.state.elements.wrapper}]);break;case w:var be=$.state.visibleNodes,ve=Ie.speed,Je=[];ve&&Je.push({eventName:k,eventArgs:{speed:ve,temp:!0}});for(var $e=0,it=be.length;$e<it;$e++)Je.push({eventName:b,eventArgs:{removingCharacterNode:!1}});ve&&Je.push({eventName:k,eventArgs:{speed:$.options.deleteSpeed,temp:!0}}),Pe.unshift.apply(Pe,Je);break;case b:var pt=je.eventArgs.removingCharacterNode;if($.state.visibleNodes.length){var Ft=$.state.visibleNodes.pop(),Le=Ft.type,at=Ft.node,vt=Ft.character;$.options.onRemoveNode&&typeof $.options.onRemoveNode=="function"&&$.options.onRemoveNode({node:at,character:vt}),at&&at.parentNode.removeChild(at),Le===D&&pt&&Pe.unshift({eventName:b,eventArgs:{}})}break;case k:$.options.deleteSpeed=je.eventArgs.speed;break;case O:$.options.delay=je.eventArgs.delay;break;case R:$.options.cursor=je.eventArgs.cursor,$.state.elements.cursor.innerHTML=je.eventArgs.cursor}$.options.loop&&(je.eventName===b||je.eventArgs&&je.eventArgs.temp||($.state.calledEvents=[].concat(V($.state.calledEvents),[je]))),$.state.eventQueue=Pe,$.state.lastFrameTime=pe}}}),ie)if(typeof ie=="string"){var ge=document.querySelector(ie);if(!ge)throw new Error("Could not find container element");this.state.elements.container=ge}else this.state.elements.container=ie;he&&(this.options=U(U({},this.options),he)),this.state.initialOptions=U({},this.options),this.init()}var q,J;return q=oe,(J=[{key:"init",value:function(){var ie,he;this.setupWrapperElement(),this.addEventToQueue(R,{cursor:this.options.cursor},!0),this.addEventToQueue(w,null,!0),!window||window.___TYPEWRITER_JS_STYLES_ADDED___||this.options.skipAddStyles||(ie=".Typewriter__cursor{-webkit-animation:Typewriter-cursor 1s infinite;animation:Typewriter-cursor 1s infinite;margin-left:1px}@-webkit-keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}@keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}",(he=document.createElement("style")).appendChild(document.createTextNode(ie)),document.head.appendChild(he),window.___TYPEWRITER_JS_STYLES_ADDED___=!0),this.options.autoStart===!0&&this.options.strings&&this.typeOutAllStrings().start()}},{key:"logInDevMode",value:function(ie){this.options.devMode&&console.log(ie)}}])&&te(q.prototype,J),Object.defineProperty(q,"prototype",{writable:!1}),oe}()},8552:(o,l,c)=>{var u=c(852)(c(5639),"DataView");o.exports=u},1989:(o,l,c)=>{var u=c(1789),f=c(401),d=c(7667),p=c(1327),g=c(1866);function _(w){var b=-1,C=w==null?0:w.length;for(this.clear();++b<C;){var M=w[b];this.set(M[0],M[1])}}_.prototype.clear=u,_.prototype.delete=f,_.prototype.get=d,_.prototype.has=p,_.prototype.set=g,o.exports=_},8407:(o,l,c)=>{var u=c(7040),f=c(4125),d=c(2117),p=c(7518),g=c(4705);function _(w){var b=-1,C=w==null?0:w.length;for(this.clear();++b<C;){var M=w[b];this.set(M[0],M[1])}}_.prototype.clear=u,_.prototype.delete=f,_.prototype.get=d,_.prototype.has=p,_.prototype.set=g,o.exports=_},7071:(o,l,c)=>{var u=c(852)(c(5639),"Map");o.exports=u},3369:(o,l,c)=>{var u=c(4785),f=c(1285),d=c(6e3),p=c(9916),g=c(5265);function _(w){var b=-1,C=w==null?0:w.length;for(this.clear();++b<C;){var M=w[b];this.set(M[0],M[1])}}_.prototype.clear=u,_.prototype.delete=f,_.prototype.get=d,_.prototype.has=p,_.prototype.set=g,o.exports=_},3818:(o,l,c)=>{var u=c(852)(c(5639),"Promise");o.exports=u},8525:(o,l,c)=>{var u=c(852)(c(5639),"Set");o.exports=u},8668:(o,l,c)=>{var u=c(3369),f=c(619),d=c(2385);function p(g){var _=-1,w=g==null?0:g.length;for(this.__data__=new u;++_<w;)this.add(g[_])}p.prototype.add=p.prototype.push=f,p.prototype.has=d,o.exports=p},6384:(o,l,c)=>{var u=c(8407),f=c(7465),d=c(3779),p=c(7599),g=c(4758),_=c(4309);function w(b){var C=this.__data__=new u(b);this.size=C.size}w.prototype.clear=f,w.prototype.delete=d,w.prototype.get=p,w.prototype.has=g,w.prototype.set=_,o.exports=w},2705:(o,l,c)=>{var u=c(5639).Symbol;o.exports=u},1149:(o,l,c)=>{var u=c(5639).Uint8Array;o.exports=u},577:(o,l,c)=>{var u=c(852)(c(5639),"WeakMap");o.exports=u},4963:o=>{o.exports=function(l,c){for(var u=-1,f=l==null?0:l.length,d=0,p=[];++u<f;){var g=l[u];c(g,u,l)&&(p[d++]=g)}return p}},4636:(o,l,c)=>{var u=c(2545),f=c(5694),d=c(1469),p=c(4144),g=c(5776),_=c(6719),w=Object.prototype.hasOwnProperty;o.exports=function(b,C){var M=d(b),A=!M&&f(b),k=!M&&!A&&p(b),O=!M&&!A&&!k&&_(b),R=M||A||k||O,I=R?u(b.length,String):[],D=I.length;for(var E in b)!C&&!w.call(b,E)||R&&(E=="length"||k&&(E=="offset"||E=="parent")||O&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||g(E,D))||I.push(E);return I}},2488:o=>{o.exports=function(l,c){for(var u=-1,f=c.length,d=l.length;++u<f;)l[d+u]=c[u];return l}},2908:o=>{o.exports=function(l,c){for(var u=-1,f=l==null?0:l.length;++u<f;)if(c(l[u],u,l))return!0;return!1}},8470:(o,l,c)=>{var u=c(7813);o.exports=function(f,d){for(var p=f.length;p--;)if(u(f[p][0],d))return p;return-1}},8866:(o,l,c)=>{var u=c(2488),f=c(1469);o.exports=function(d,p,g){var _=p(d);return f(d)?_:u(_,g(d))}},4239:(o,l,c)=>{var u=c(2705),f=c(9607),d=c(2333),p=u?u.toStringTag:void 0;o.exports=function(g){return g==null?g===void 0?"[object Undefined]":"[object Null]":p&&p in Object(g)?f(g):d(g)}},9454:(o,l,c)=>{var u=c(4239),f=c(7005);o.exports=function(d){return f(d)&&u(d)=="[object Arguments]"}},939:(o,l,c)=>{var u=c(2492),f=c(7005);o.exports=function d(p,g,_,w,b){return p===g||(p==null||g==null||!f(p)&&!f(g)?p!=p&&g!=g:u(p,g,_,w,d,b))}},2492:(o,l,c)=>{var u=c(6384),f=c(7114),d=c(8351),p=c(6096),g=c(4160),_=c(1469),w=c(4144),b=c(6719),C="[object Arguments]",M="[object Array]",A="[object Object]",k=Object.prototype.hasOwnProperty;o.exports=function(O,R,I,D,E,B){var U=_(O),V=_(R),X=U?M:g(O),te=V?M:g(R),ee=(X=X==C?A:X)==A,ue=(te=te==C?A:te)==A,ne=X==te;if(ne&&w(O)){if(!w(R))return!1;U=!0,ee=!1}if(ne&&!ee)return B||(B=new u),U||b(O)?f(O,R,I,D,E,B):d(O,R,X,I,D,E,B);if(!(1&I)){var oe=ee&&k.call(O,"__wrapped__"),q=ue&&k.call(R,"__wrapped__");if(oe||q){var J=oe?O.value():O,ie=q?R.value():R;return B||(B=new u),E(J,ie,I,D,B)}}return!!ne&&(B||(B=new u),p(O,R,I,D,E,B))}},8458:(o,l,c)=>{var u=c(3560),f=c(5346),d=c(3218),p=c(346),g=/^\[object .+?Constructor\]$/,_=Function.prototype,w=Object.prototype,b=_.toString,C=w.hasOwnProperty,M=RegExp("^"+b.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");o.exports=function(A){return!(!d(A)||f(A))&&(u(A)?M:g).test(p(A))}},8749:(o,l,c)=>{var u=c(4239),f=c(1780),d=c(7005),p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p["[object Arguments]"]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p["[object Function]"]=p["[object Map]"]=p["[object Number]"]=p["[object Object]"]=p["[object RegExp]"]=p["[object Set]"]=p["[object String]"]=p["[object WeakMap]"]=!1,o.exports=function(g){return d(g)&&f(g.length)&&!!p[u(g)]}},280:(o,l,c)=>{var u=c(5726),f=c(6916),d=Object.prototype.hasOwnProperty;o.exports=function(p){if(!u(p))return f(p);var g=[];for(var _ in Object(p))d.call(p,_)&&_!="constructor"&&g.push(_);return g}},2545:o=>{o.exports=function(l,c){for(var u=-1,f=Array(l);++u<l;)f[u]=c(u);return f}},1717:o=>{o.exports=function(l){return function(c){return l(c)}}},4757:o=>{o.exports=function(l,c){return l.has(c)}},4429:(o,l,c)=>{var u=c(5639)["__core-js_shared__"];o.exports=u},7114:(o,l,c)=>{var u=c(8668),f=c(2908),d=c(4757);o.exports=function(p,g,_,w,b,C){var M=1&_,A=p.length,k=g.length;if(A!=k&&!(M&&k>A))return!1;var O=C.get(p),R=C.get(g);if(O&&R)return O==g&&R==p;var I=-1,D=!0,E=2&_?new u:void 0;for(C.set(p,g),C.set(g,p);++I<A;){var B=p[I],U=g[I];if(w)var V=M?w(U,B,I,g,p,C):w(B,U,I,p,g,C);if(V!==void 0){if(V)continue;D=!1;break}if(E){if(!f(g,function(X,te){if(!d(E,te)&&(B===X||b(B,X,_,w,C)))return E.push(te)})){D=!1;break}}else if(B!==U&&!b(B,U,_,w,C)){D=!1;break}}return C.delete(p),C.delete(g),D}},8351:(o,l,c)=>{var u=c(2705),f=c(1149),d=c(7813),p=c(7114),g=c(8776),_=c(1814),w=u?u.prototype:void 0,b=w?w.valueOf:void 0;o.exports=function(C,M,A,k,O,R,I){switch(A){case"[object DataView]":if(C.byteLength!=M.byteLength||C.byteOffset!=M.byteOffset)return!1;C=C.buffer,M=M.buffer;case"[object ArrayBuffer]":return!(C.byteLength!=M.byteLength||!R(new f(C),new f(M)));case"[object Boolean]":case"[object Date]":case"[object Number]":return d(+C,+M);case"[object Error]":return C.name==M.name&&C.message==M.message;case"[object RegExp]":case"[object String]":return C==M+"";case"[object Map]":var D=g;case"[object Set]":var E=1&k;if(D||(D=_),C.size!=M.size&&!E)return!1;var B=I.get(C);if(B)return B==M;k|=2,I.set(C,M);var U=p(D(C),D(M),k,O,R,I);return I.delete(C),U;case"[object Symbol]":if(b)return b.call(C)==b.call(M)}return!1}},6096:(o,l,c)=>{var u=c(8234),f=Object.prototype.hasOwnProperty;o.exports=function(d,p,g,_,w,b){var C=1&g,M=u(d),A=M.length;if(A!=u(p).length&&!C)return!1;for(var k=A;k--;){var O=M[k];if(!(C?O in p:f.call(p,O)))return!1}var R=b.get(d),I=b.get(p);if(R&&I)return R==p&&I==d;var D=!0;b.set(d,p),b.set(p,d);for(var E=C;++k<A;){var B=d[O=M[k]],U=p[O];if(_)var V=C?_(U,B,O,p,d,b):_(B,U,O,d,p,b);if(!(V===void 0?B===U||w(B,U,g,_,b):V)){D=!1;break}E||(E=O=="constructor")}if(D&&!E){var X=d.constructor,te=p.constructor;X==te||!("constructor"in d)||!("constructor"in p)||typeof X=="function"&&X instanceof X&&typeof te=="function"&&te instanceof te||(D=!1)}return b.delete(d),b.delete(p),D}},1957:(o,l,c)=>{var u=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g;o.exports=u},8234:(o,l,c)=>{var u=c(8866),f=c(9551),d=c(3674);o.exports=function(p){return u(p,d,f)}},5050:(o,l,c)=>{var u=c(7019);o.exports=function(f,d){var p=f.__data__;return u(d)?p[typeof d=="string"?"string":"hash"]:p.map}},852:(o,l,c)=>{var u=c(8458),f=c(7801);o.exports=function(d,p){var g=f(d,p);return u(g)?g:void 0}},9607:(o,l,c)=>{var u=c(2705),f=Object.prototype,d=f.hasOwnProperty,p=f.toString,g=u?u.toStringTag:void 0;o.exports=function(_){var w=d.call(_,g),b=_[g];try{_[g]=void 0;var C=!0}catch{}var M=p.call(_);return C&&(w?_[g]=b:delete _[g]),M}},9551:(o,l,c)=>{var u=c(4963),f=c(479),d=Object.prototype.propertyIsEnumerable,p=Object.getOwnPropertySymbols,g=p?function(_){return _==null?[]:(_=Object(_),u(p(_),function(w){return d.call(_,w)}))}:f;o.exports=g},4160:(o,l,c)=>{var u=c(8552),f=c(7071),d=c(3818),p=c(8525),g=c(577),_=c(4239),w=c(346),b="[object Map]",C="[object Promise]",M="[object Set]",A="[object WeakMap]",k="[object DataView]",O=w(u),R=w(f),I=w(d),D=w(p),E=w(g),B=_;(u&&B(new u(new ArrayBuffer(1)))!=k||f&&B(new f)!=b||d&&B(d.resolve())!=C||p&&B(new p)!=M||g&&B(new g)!=A)&&(B=function(U){var V=_(U),X=V=="[object Object]"?U.constructor:void 0,te=X?w(X):"";if(te)switch(te){case O:return k;case R:return b;case I:return C;case D:return M;case E:return A}return V}),o.exports=B},7801:o=>{o.exports=function(l,c){return l==null?void 0:l[c]}},1789:(o,l,c)=>{var u=c(4536);o.exports=function(){this.__data__=u?u(null):{},this.size=0}},401:o=>{o.exports=function(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c}},7667:(o,l,c)=>{var u=c(4536),f=Object.prototype.hasOwnProperty;o.exports=function(d){var p=this.__data__;if(u){var g=p[d];return g==="__lodash_hash_undefined__"?void 0:g}return f.call(p,d)?p[d]:void 0}},1327:(o,l,c)=>{var u=c(4536),f=Object.prototype.hasOwnProperty;o.exports=function(d){var p=this.__data__;return u?p[d]!==void 0:f.call(p,d)}},1866:(o,l,c)=>{var u=c(4536);o.exports=function(f,d){var p=this.__data__;return this.size+=this.has(f)?0:1,p[f]=u&&d===void 0?"__lodash_hash_undefined__":d,this}},5776:o=>{var l=/^(?:0|[1-9]\d*)$/;o.exports=function(c,u){var f=typeof c;return!!(u=u??9007199254740991)&&(f=="number"||f!="symbol"&&l.test(c))&&c>-1&&c%1==0&&c<u}},7019:o=>{o.exports=function(l){var c=typeof l;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?l!=="__proto__":l===null}},5346:(o,l,c)=>{var u,f=c(4429),d=(u=/[^.]+$/.exec(f&&f.keys&&f.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"";o.exports=function(p){return!!d&&d in p}},5726:o=>{var l=Object.prototype;o.exports=function(c){var u=c&&c.constructor;return c===(typeof u=="function"&&u.prototype||l)}},7040:o=>{o.exports=function(){this.__data__=[],this.size=0}},4125:(o,l,c)=>{var u=c(8470),f=Array.prototype.splice;o.exports=function(d){var p=this.__data__,g=u(p,d);return!(g<0||(g==p.length-1?p.pop():f.call(p,g,1),--this.size,0))}},2117:(o,l,c)=>{var u=c(8470);o.exports=function(f){var d=this.__data__,p=u(d,f);return p<0?void 0:d[p][1]}},7518:(o,l,c)=>{var u=c(8470);o.exports=function(f){return u(this.__data__,f)>-1}},4705:(o,l,c)=>{var u=c(8470);o.exports=function(f,d){var p=this.__data__,g=u(p,f);return g<0?(++this.size,p.push([f,d])):p[g][1]=d,this}},4785:(o,l,c)=>{var u=c(1989),f=c(8407),d=c(7071);o.exports=function(){this.size=0,this.__data__={hash:new u,map:new(d||f),string:new u}}},1285:(o,l,c)=>{var u=c(5050);o.exports=function(f){var d=u(this,f).delete(f);return this.size-=d?1:0,d}},6e3:(o,l,c)=>{var u=c(5050);o.exports=function(f){return u(this,f).get(f)}},9916:(o,l,c)=>{var u=c(5050);o.exports=function(f){return u(this,f).has(f)}},5265:(o,l,c)=>{var u=c(5050);o.exports=function(f,d){var p=u(this,f),g=p.size;return p.set(f,d),this.size+=p.size==g?0:1,this}},8776:o=>{o.exports=function(l){var c=-1,u=Array(l.size);return l.forEach(function(f,d){u[++c]=[d,f]}),u}},4536:(o,l,c)=>{var u=c(852)(Object,"create");o.exports=u},6916:(o,l,c)=>{var u=c(5569)(Object.keys,Object);o.exports=u},1167:(o,l,c)=>{o=c.nmd(o);var u=c(1957),f=l&&!l.nodeType&&l,d=f&&o&&!o.nodeType&&o,p=d&&d.exports===f&&u.process,g=function(){try{return d&&d.require&&d.require("util").types||p&&p.binding&&p.binding("util")}catch{}}();o.exports=g},2333:o=>{var l=Object.prototype.toString;o.exports=function(c){return l.call(c)}},5569:o=>{o.exports=function(l,c){return function(u){return l(c(u))}}},5639:(o,l,c)=>{var u=c(1957),f=typeof self=="object"&&self&&self.Object===Object&&self,d=u||f||Function("return this")();o.exports=d},619:o=>{o.exports=function(l){return this.__data__.set(l,"__lodash_hash_undefined__"),this}},2385:o=>{o.exports=function(l){return this.__data__.has(l)}},1814:o=>{o.exports=function(l){var c=-1,u=Array(l.size);return l.forEach(function(f){u[++c]=f}),u}},7465:(o,l,c)=>{var u=c(8407);o.exports=function(){this.__data__=new u,this.size=0}},3779:o=>{o.exports=function(l){var c=this.__data__,u=c.delete(l);return this.size=c.size,u}},7599:o=>{o.exports=function(l){return this.__data__.get(l)}},4758:o=>{o.exports=function(l){return this.__data__.has(l)}},4309:(o,l,c)=>{var u=c(8407),f=c(7071),d=c(3369);o.exports=function(p,g){var _=this.__data__;if(_ instanceof u){var w=_.__data__;if(!f||w.length<199)return w.push([p,g]),this.size=++_.size,this;_=this.__data__=new d(w)}return _.set(p,g),this.size=_.size,this}},346:o=>{var l=Function.prototype.toString;o.exports=function(c){if(c!=null){try{return l.call(c)}catch{}try{return c+""}catch{}}return""}},7813:o=>{o.exports=function(l,c){return l===c||l!=l&&c!=c}},5694:(o,l,c)=>{var u=c(9454),f=c(7005),d=Object.prototype,p=d.hasOwnProperty,g=d.propertyIsEnumerable,_=u(function(){return arguments}())?u:function(w){return f(w)&&p.call(w,"callee")&&!g.call(w,"callee")};o.exports=_},1469:o=>{var l=Array.isArray;o.exports=l},8612:(o,l,c)=>{var u=c(3560),f=c(1780);o.exports=function(d){return d!=null&&f(d.length)&&!u(d)}},4144:(o,l,c)=>{o=c.nmd(o);var u=c(5639),f=c(5062),d=l&&!l.nodeType&&l,p=d&&o&&!o.nodeType&&o,g=p&&p.exports===d?u.Buffer:void 0,_=(g?g.isBuffer:void 0)||f;o.exports=_},8446:(o,l,c)=>{var u=c(939);o.exports=function(f,d){return u(f,d)}},3560:(o,l,c)=>{var u=c(4239),f=c(3218);o.exports=function(d){if(!f(d))return!1;var p=u(d);return p=="[object Function]"||p=="[object GeneratorFunction]"||p=="[object AsyncFunction]"||p=="[object Proxy]"}},1780:o=>{o.exports=function(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=9007199254740991}},3218:o=>{o.exports=function(l){var c=typeof l;return l!=null&&(c=="object"||c=="function")}},7005:o=>{o.exports=function(l){return l!=null&&typeof l=="object"}},6719:(o,l,c)=>{var u=c(8749),f=c(1717),d=c(1167),p=d&&d.isTypedArray,g=p?f(p):u;o.exports=g},3674:(o,l,c)=>{var u=c(4636),f=c(280),d=c(8612);o.exports=function(p){return d(p)?u(p):f(p)}},479:o=>{o.exports=function(){return[]}},5062:o=>{o.exports=function(){return!1}},75:function(o){(function(){var l,c,u,f,d,p;typeof performance<"u"&&performance!==null&&performance.now?o.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(o.exports=function(){return(l()-d)/1e6},c=process.hrtime,f=(l=function(){var g;return 1e9*(g=c())[0]+g[1]})(),p=1e9*process.uptime(),d=f-p):Date.now?(o.exports=function(){return Date.now()-u},u=Date.now()):(o.exports=function(){return new Date().getTime()-u},u=new Date().getTime())}).call(this)},4087:(o,l,c)=>{for(var u=c(75),f=typeof window>"u"?c.g:window,d=["moz","webkit"],p="AnimationFrame",g=f["request"+p],_=f["cancel"+p]||f["cancelRequest"+p],w=0;!g&&w<d.length;w++)g=f[d[w]+"Request"+p],_=f[d[w]+"Cancel"+p]||f[d[w]+"CancelRequest"+p];if(!g||!_){var b=0,C=0,M=[];g=function(A){if(M.length===0){var k=u(),O=Math.max(0,16.666666666666668-(k-b));b=O+k,setTimeout(function(){var R=M.slice(0);M.length=0;for(var I=0;I<R.length;I++)if(!R[I].cancelled)try{R[I].callback(b)}catch(D){setTimeout(function(){throw D},0)}},Math.round(O))}return M.push({handle:++C,callback:A,cancelled:!1}),C},_=function(A){for(var k=0;k<M.length;k++)M[k].handle===A&&(M[k].cancelled=!0)}}o.exports=function(A){return g.call(f,A)},o.exports.cancel=function(){_.apply(f,arguments)},o.exports.polyfill=function(A){A||(A=f),A.requestAnimationFrame=g,A.cancelAnimationFrame=_}},8156:o=>{o.exports=t}},i={};function s(o){var l=i[o];if(l!==void 0)return l.exports;var c=i[o]={id:o,loaded:!1,exports:{}};return n[o].call(c.exports,c,c.exports,s),c.loaded=!0,c.exports}s.n=o=>{var l=o&&o.__esModule?()=>o.default:()=>o;return s.d(l,{a:l}),l},s.d=(o,l)=>{for(var c in l)s.o(l,c)&&!s.o(o,c)&&Object.defineProperty(o,c,{enumerable:!0,get:l[c]})},s.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),s.o=(o,l)=>Object.prototype.hasOwnProperty.call(o,l),s.nmd=o=>(o.paths=[],o.children||(o.children=[]),o);var a={};return(()=>{s.d(a,{default:()=>M});var o=s(8156),l=s.n(o),c=s(7403),u=s(8446),f=s.n(u);function d(A){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},d(A)}function p(A,k){for(var O=0;O<k.length;O++){var R=k[O];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(A,b(R.key),R)}}function g(A,k){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,R){return O.__proto__=R,O},g(A,k)}function _(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function w(A){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},w(A)}function b(A){var k=function(O,R){if(d(O)!=="object"||O===null)return O;var I=O[Symbol.toPrimitive];if(I!==void 0){var D=I.call(O,"string");if(d(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(A);return d(k)==="symbol"?k:String(k)}var C=function(A){(function(B,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");B.prototype=Object.create(U&&U.prototype,{constructor:{value:B,writable:!0,configurable:!0}}),Object.defineProperty(B,"prototype",{writable:!1}),U&&g(B,U)})(E,A);var k,O,R,I,D=(R=E,I=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var B,U=w(R);if(I){var V=w(this).constructor;B=Reflect.construct(U,arguments,V)}else B=U.apply(this,arguments);return function(X,te){if(te&&(d(te)==="object"||typeof te=="function"))return te;if(te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _(X)}(this,B)});function E(){var B,U,V,X;(function(ne,oe){if(!(ne instanceof oe))throw new TypeError("Cannot call a class as a function")})(this,E);for(var te=arguments.length,ee=new Array(te),ue=0;ue<te;ue++)ee[ue]=arguments[ue];return U=_(B=D.call.apply(D,[this].concat(ee))),X={instance:null},(V=b(V="state"))in U?Object.defineProperty(U,V,{value:X,enumerable:!0,configurable:!0,writable:!0}):U[V]=X,B}return k=E,(O=[{key:"componentDidMount",value:function(){var B=this,U=new c.default(this.typewriter,this.props.options);this.setState({instance:U},function(){var V=B.props.onInit;V&&V(U)})}},{key:"componentDidUpdate",value:function(B){f()(this.props.options,B.options)||this.setState({instance:new c.default(this.typewriter,this.props.options)})}},{key:"componentWillUnmount",value:function(){this.state.instance&&this.state.instance.stop()}},{key:"render",value:function(){var B=this,U=this.props.component;return l().createElement(U,{ref:function(V){return B.typewriter=V},className:"Typewriter","data-testid":"typewriter-wrapper"})}}])&&p(k.prototype,O),Object.defineProperty(k,"prototype",{writable:!1}),E}(o.Component);C.defaultProps={component:"div"};const M=C})(),a.default})())}(ux)),ux.exports}ase();const ose="/assets/StyleMarket-9udsmTrq.jpg",lse="/assets/StyleStudio-DuVyUcXP.jpg",cse="/assets/style_society-Dr896uLv.jpg";function use(){const[r,e]=P.useState({x:0,y:0});return P.useEffect(()=>{const t=n=>{e({x:n.clientX,y:n.clientY})};return window.addEventListener("mousemove",t),()=>{window.removeEventListener("mousemove",t)}},[]),j("div",{className:"home-container",children:[S("div",{className:"cursor-glow",style:{left:`${r.x}px`,top:`${r.y}px`}}),S(fse,{}),S(dse,{}),S(hse,{}),S(pse,{}),S(mse,{})]})}function fse(){}function dse(){const[r,e]=P.useState(0);return P.useEffect(()=>{const t=()=>{e(window.scrollY)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),j("section",{className:"hero-section",children:[S("div",{className:"hero-background",style:{transform:`translateY(${r*.4}px)`}}),j("div",{className:"hero-decorative-elements",children:[S("div",{className:"decorative-circle circle-1"}),S("div",{className:"decorative-circle circle-2"}),S("div",{className:"decorative-line line-1"}),S("div",{className:"decorative-line line-2"})]}),S("div",{className:"hero-content",children:j(Ol.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"hero-text-container",children:[S("div",{className:"hero-badge",children:"Fashion Design Platform"}),S("h1",{className:"hero-title",children:S("span",{className:"hero-title-animation",children:"Styloft"})}),S("div",{className:"hero-divider",children:S("div",{className:"divider-accent"})}),S("p",{className:"hero-description",style:{fontFamily:"Montserrat, sans-serif"},children:"Your all-in-one fashion design platform that empowers creators to design, collaborate, and showcase innovative fashion concepts in a vibrant community."}),j(Ol.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.8},className:"hero-buttons",children:[j(Gl,{to:"/register",className:"button primary-button",children:[S("span",{className:"button-text",children:"Get Started"}),S("span",{className:"button-icon",children:""})]}),S("a",{href:"https://styloft.live",target:"_blank",rel:"noopener noreferrer",className:"button outline-button",children:S("span",{className:"button-text",children:"Learn More"})})]})]})}),j(Ol.div,{className:"scroll-indicator",animate:{y:[0,10,0]},transition:{repeat:Number.POSITIVE_INFINITY,duration:1.5},children:[S("span",{className:"scroll-text",children:"Scroll"}),S(HM,{className:"scroll-icon"})]})]})}function hse(){const r=P.useRef(null),e=nV(r,{once:!0}),t=tV();P.useEffect(()=>{e&&t.start("visible")},[e,t]);const n=[{icon:S(ox,{className:"feature-icon"}),title:"Creative Freedom",description:"Express your unique vision with our intuitive design tools that empower your creativity without limitations."},{icon:S(xie,{className:"feature-icon"}),title:"Collaboration",description:"Connect with designers and manufacturers to bring your fashion concepts to life through seamless teamwork."},{icon:S(ise,{className:"feature-icon"}),title:"Innovation",description:"Stay ahead with cutting-edge tools and technologies that push the boundaries of fashion design."},{icon:S(Uw,{className:"feature-icon"}),title:"Global Reach",description:"Showcase your work to a worldwide audience and connect with fashion enthusiasts across the globe."}],i={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},s={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.6}}};return j("section",{ref:r,className:"about-section",id:"about",children:[S("div",{className:"about-bg-pattern"}),j("div",{className:"container",children:[j(Ol.div,{initial:{opacity:0,y:20},animate:t,variants:{visible:{opacity:1,y:0,transition:{duration:.6}}},className:"section-header",children:[S("div",{className:"section-badge",children:"Who We Are"}),S("h2",{className:"section-title",children:"About Styloft"}),S("div",{className:"section-divider",children:S("div",{className:"divider-accent"})})]}),j(Ol.p,{initial:{opacity:0},animate:t,variants:{visible:{opacity:1,transition:{duration:.6,delay:.2}}},className:"about-intro",children:["Welcome to ",S("span",{className:"highlight",children:"Styloft"}),"  a platform where creativity and innovation come together in fashion design. We empower designers, students, and businesses to create, collaborate, and showcase their unique designs through our comprehensive suite of tools and vibrant community."]}),S(Ol.div,{variants:i,initial:"hidden",animate:t,className:"feature-grid",children:n.map((a,o)=>S(Ol.div,{variants:s,children:j("div",{className:"feature-card",children:[j("div",{className:"feature-icon-container",children:[a.icon,S("div",{className:"icon-glow"})]}),S("h3",{className:"feature-title",children:a.title}),S("p",{className:"feature-description",children:a.description}),S("div",{className:"feature-card-accent"})]})},o))}),S(Ol.div,{initial:{opacity:0},animate:t,variants:{visible:{opacity:1,transition:{duration:.6,delay:.8}}},className:"about-cta",children:S("p",{className:"cta-text",children:"Join Styloft today and be part of the future of fashion design."})})]})]})}function pse(){const r=P.useRef(null),e=nV(r,{once:!0}),t=tV();P.useEffect(()=>{e&&t.start("visible")},[e,t]);const n=[{title:"STYLE MARKET",image:ose,description:"Connect with designers, explore exclusive clothing collections, and shop one-of-a-kind pieces in our vibrant marketplace.",link:"/stylemarket",accent:"#FF6B6B"},{title:"STYLE STUDIO",image:lse,description:"Design and customize your own fashion pieces with our intuitive tools and professional features.",link:"/stylestudio",accent:"#4ECDC4"},{title:"STYLE SOCIETY",image:cse,description:"Join our community of fashion enthusiasts, share ideas, and collaborate with fellow designers.",link:"/stylesociety",accent:"#FFD166"}],i={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.3}}},s={hidden:{y:40,opacity:0},visible:{y:0,opacity:1,transition:{duration:.8,ease:"easeOut"}}};return j("section",{ref:r,className:"style-section",id:"explore",children:[S("div",{className:"bg-circle top-right"}),S("div",{className:"bg-circle bottom-left"}),j("div",{className:"container",children:[j(Ol.div,{initial:{opacity:0,y:20},animate:t,variants:{visible:{opacity:1,y:0,transition:{duration:.6}}},className:"section-header",children:[S("div",{className:"section-badge",children:"Our Services"}),S("h2",{className:"section-title",children:"Explore Now"}),S("div",{className:"section-divider",children:S("div",{className:"divider-accent"})})]}),S(Ol.div,{variants:i,initial:"hidden",animate:t,className:"style-grid",children:n.map((a,o)=>S(Ol.div,{variants:s,className:"style-card-container",children:j("div",{className:"style-card",children:[S("div",{className:"style-image",children:S("img",{src:a.image||"/placeholder.svg",alt:a.title,className:"style-img"})}),S("div",{className:"style-overlay"}),j("div",{className:"style-content",children:[S("div",{className:"style-tag",style:{backgroundColor:a.accent},children:o+1}),S("h3",{className:"style-title",children:a.title}),S("p",{className:"style-description",children:a.description}),j(Gl,{to:a.link,className:"style-button",style:{backgroundColor:a.accent},children:[S("span",{children:"Explore"}),S(HM,{className:"button-icon-small"})]})]}),S("div",{className:"card-corner",style:{borderColor:a.accent}})]})},o))})]})]})}function mse(){return j("section",{className:"cta-section",children:[S("div",{className:"cta-pattern-bg"}),j("div",{className:"cta-shapes",children:[S("div",{className:"cta-shape shape-1"}),S("div",{className:"cta-shape shape-2"}),S("div",{className:"cta-shape shape-3"})]}),j(Ol.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"container cta-container",children:[j("div",{className:"cta-badge",children:[S(Fm,{className:"badge-icon"}),S("span",{children:"Join Our Community"})]}),S("h2",{className:"cta-title",children:"Ready to Transform Your Fashion Ideas?"}),S("p",{className:"cta-description",children:"Join Styloft today and become part of a growing community of fashion innovators. Create, collaborate, and showcase your designs to the world."}),j("div",{className:"cta-buttons",children:[j(Gl,{to:"/register",className:"button primary-button",children:[S("span",{className:"button-text",children:"Sign Up Now"}),S("span",{className:"button-icon",children:""})]}),S(Gl,{to:"/login",className:"button outline-button white-outline",children:S("span",{className:"button-text",children:"Sign In"})})]}),j("div",{className:"cta-testimonial",children:[j("div",{className:"testimonial-avatars",children:[S("div",{className:"avatar avatar-1"}),S("div",{className:"avatar avatar-2"}),S("div",{className:"avatar avatar-3"}),S("div",{className:"avatar avatar-more",children:"+"})]}),j("div",{className:"testimonial-text",children:[j("div",{className:"testimonial-stars",children:[" ",S("span",{className:"testimonial-rating",children:"4.9/5"})]}),S("p",{children:"from over 1,000 designer reviews"})]})]})]})]})}const gse=()=>{};var NO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},vse=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=r[t++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=r[t++],a=r[t++],o=r[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=r[t++],a=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},hV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const s=r[i],a=i+1<r.length,o=a?r[i+1]:0,l=i+2<r.length,c=l?r[i+2]:0,u=s>>2,f=(s&3)<<4|o>>4;let d=(o&15)<<2|c>>6,p=c&63;l||(p=64,a||(d=64)),n.push(t[u],t[f],t[d],t[p])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(dV(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):vse(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const s=t[r.charAt(i++)],o=i<r.length?t[r.charAt(i)]:0;++i;const c=i<r.length?t[r.charAt(i)]:64;++i;const f=i<r.length?t[r.charAt(i)]:64;if(++i,s==null||o==null||c==null||f==null)throw new yse;const d=s<<2|o>>4;if(n.push(d),c!==64){const p=o<<4&240|c>>2;if(n.push(p),f!==64){const g=c<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class yse extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wse=function(r){const e=dV(r);return hV.encodeByteArray(e,!0)},Kx=function(r){return wse(r).replace(/\./g,"")},pV=function(r){try{return hV.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _se(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bse=()=>_se().__FIREBASE_DEFAULTS__,Sse=()=>{if(typeof process>"u"||typeof NO>"u")return;const r=NO.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},xse=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&pV(r[1]);return e&&JSON.parse(e)},XM=()=>{try{return gse()||bse()||Sse()||xse()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},mV=r=>{var e,t;return(t=(e=XM())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},Cse=r=>{const e=mV(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},gV=()=>{var r;return(r=XM())===null||r===void 0?void 0:r.config},vV=r=>{var e;return(e=XM())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mse{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ase(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,s=r.sub||r.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Kx(JSON.stringify(t)),Kx(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tse(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wa())}function Ese(){var r;const e=(r=XM())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ise(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Lse(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Nse(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Dse(){const r=Wa();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function kse(){return!Ese()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rse(){try{return typeof indexedDB=="object"}catch{return!1}}function Pse(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ose="FirebaseError";class od extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=Ose,Object.setPrototypeOf(this,od.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R_.prototype.create)}}class R_{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Fse(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new od(i,o,n)}}function Fse(r,e){return r.replace(Bse,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Bse=/\{\$([^}]+)}/g;function Use(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Jf(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const s=r[i],a=e[i];if(DO(s)&&DO(a)){if(!Jf(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function DO(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function jse(r,e){const t=new zse(r,e);return t.subscribe.bind(t)}class zse{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");Vse(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=BE),i.error===void 0&&(i.error=BE),i.complete===void 0&&(i.complete=BE);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vse(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function BE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(r){return r&&r._delegate?r._delegate:r}class Bm{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gse=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new Mse;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Wse(e))try{this.getOrInitializeService({instanceIdentifier:$p})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=$p){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$p){return this.instances.has(e)}getOptions(e=$p){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Hse(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=$p){return this.component?this.component.multipleInstances?e:$p:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Hse(r){return r===$p?void 0:r}function Wse(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yse{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Gse(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(yr||(yr={}));const Jse={debug:yr.DEBUG,verbose:yr.VERBOSE,info:yr.INFO,warn:yr.WARN,error:yr.ERROR,silent:yr.SILENT},Xse=yr.INFO,Qse={[yr.DEBUG]:"log",[yr.VERBOSE]:"log",[yr.INFO]:"info",[yr.WARN]:"warn",[yr.ERROR]:"error"},Kse=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=Qse[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sD{constructor(e){this.name=e,this._logLevel=Xse,this._logHandler=Kse,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Jse[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yr.DEBUG,...e),this._logHandler(this,yr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yr.VERBOSE,...e),this._logHandler(this,yr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yr.INFO,...e),this._logHandler(this,yr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yr.WARN,...e),this._logHandler(this,yr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yr.ERROR,...e),this._logHandler(this,yr.ERROR,...e)}}const qse=(r,e)=>e.some(t=>r instanceof t);let kO,RO;function Zse(){return kO||(kO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $se(){return RO||(RO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yV=new WeakMap,gL=new WeakMap,wV=new WeakMap,UE=new WeakMap,aD=new WeakMap;function eae(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",s),r.removeEventListener("error",a)},s=()=>{t(ph(r.result)),i()},a=()=>{n(r.error),i()};r.addEventListener("success",s),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&yV.set(t,r)}).catch(()=>{}),aD.set(e,r),e}function tae(r){if(gL.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",a),r.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",s),r.addEventListener("error",a),r.addEventListener("abort",a)});gL.set(r,e)}let vL={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return gL.get(r);if(e==="objectStoreNames")return r.objectStoreNames||wV.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ph(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function nae(r){vL=r(vL)}function rae(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(jE(this),e,...t);return wV.set(n,e.sort?e.sort():[e]),ph(n)}:$se().includes(r)?function(...e){return r.apply(jE(this),e),ph(yV.get(this))}:function(...e){return ph(r.apply(jE(this),e))}}function iae(r){return typeof r=="function"?rae(r):(r instanceof IDBTransaction&&tae(r),qse(r,Zse())?new Proxy(r,vL):r)}function ph(r){if(r instanceof IDBRequest)return eae(r);if(UE.has(r))return UE.get(r);const e=iae(r);return e!==r&&(UE.set(r,e),aD.set(e,r)),e}const jE=r=>aD.get(r);function sae(r,e,{blocked:t,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(r,e),o=ph(a);return n&&a.addEventListener("upgradeneeded",l=>{n(ph(a.result),l.oldVersion,l.newVersion,ph(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const aae=["get","getKey","getAll","getAllKeys","count"],oae=["put","add","delete","clear"],zE=new Map;function PO(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(zE.get(e))return zE.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=oae.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||aae.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[t](...o),i&&l.done]))[0]};return zE.set(e,s),s}nae(r=>({...r,get:(e,t,n)=>PO(e,t)||r.get(e,t,n),has:(e,t)=>!!PO(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lae{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cae(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function cae(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yL="@firebase/app",OO="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=new sD("@firebase/app"),uae="@firebase/app-compat",fae="@firebase/analytics-compat",dae="@firebase/analytics",hae="@firebase/app-check-compat",pae="@firebase/app-check",mae="@firebase/auth",gae="@firebase/auth-compat",vae="@firebase/database",yae="@firebase/data-connect",wae="@firebase/database-compat",_ae="@firebase/functions",bae="@firebase/functions-compat",Sae="@firebase/installations",xae="@firebase/installations-compat",Cae="@firebase/messaging",Mae="@firebase/messaging-compat",Aae="@firebase/performance",Tae="@firebase/performance-compat",Eae="@firebase/remote-config",Iae="@firebase/remote-config-compat",Lae="@firebase/storage",Nae="@firebase/storage-compat",Dae="@firebase/firestore",kae="@firebase/vertexai",Rae="@firebase/firestore-compat",Pae="firebase",Oae="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL="[DEFAULT]",Fae={[yL]:"fire-core",[uae]:"fire-core-compat",[dae]:"fire-analytics",[fae]:"fire-analytics-compat",[pae]:"fire-app-check",[hae]:"fire-app-check-compat",[mae]:"fire-auth",[gae]:"fire-auth-compat",[vae]:"fire-rtdb",[yae]:"fire-data-connect",[wae]:"fire-rtdb-compat",[_ae]:"fire-fn",[bae]:"fire-fn-compat",[Sae]:"fire-iid",[xae]:"fire-iid-compat",[Cae]:"fire-fcm",[Mae]:"fire-fcm-compat",[Aae]:"fire-perf",[Tae]:"fire-perf-compat",[Eae]:"fire-rc",[Iae]:"fire-rc-compat",[Lae]:"fire-gcs",[Nae]:"fire-gcs-compat",[Dae]:"fire-fst",[Rae]:"fire-fst-compat",[kae]:"fire-vertex","fire-js":"fire-js",[Pae]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new Map,Bae=new Map,_L=new Map;function FO(r,e){try{r.container.addComponent(e)}catch(t){Xf.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function M1(r){const e=r.name;if(_L.has(e))return Xf.debug(`There were multiple attempts to register component ${e}.`),!1;_L.set(e,r);for(const t of qx.values())FO(t,r);for(const t of Bae.values())FO(t,r);return!0}function oD(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Fl(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uae={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mh=new R_("app","Firebase",Uae);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jae{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Bm("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=Oae;function _V(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:wL,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw mh.create("bad-app-name",{appName:String(i)});if(t||(t=gV()),!t)throw mh.create("no-options");const s=qx.get(i);if(s){if(Jf(t,s.options)&&Jf(n,s.config))return s;throw mh.create("duplicate-app",{appName:i})}const a=new Yse(i);for(const l of _L.values())a.addComponent(l);const o=new jae(t,n,a);return qx.set(i,o),o}function bV(r=wL){const e=qx.get(r);if(!e&&r===wL&&gV())return _V();if(!e)throw mh.create("no-app",{appName:r});return e}function gh(r,e,t){var n;let i=(n=Fae[r])!==null&&n!==void 0?n:r;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xf.warn(o.join(" "));return}M1(new Bm(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zae="firebase-heartbeat-database",Vae=1,zw="firebase-heartbeat-store";let VE=null;function SV(){return VE||(VE=sae(zae,Vae,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(zw)}catch(t){console.warn(t)}}}}).catch(r=>{throw mh.create("idb-open",{originalErrorMessage:r.message})})),VE}async function Gae(r){try{const t=(await SV()).transaction(zw),n=await t.objectStore(zw).get(xV(r));return await t.done,n}catch(e){if(e instanceof od)Xf.warn(e.message);else{const t=mh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xf.warn(t.message)}}}async function BO(r,e){try{const n=(await SV()).transaction(zw,"readwrite");await n.objectStore(zw).put(e,xV(r)),await n.done}catch(t){if(t instanceof od)Xf.warn(t.message);else{const n=mh.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Xf.warn(n.message)}}}function xV(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hae=1024,Wae=30;class Yae{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Xae(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=UO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Wae){const a=Qae(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Xf.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=UO(),{heartbeatsToSend:n,unsentEntries:i}=Jae(this._heartbeatsCache.heartbeats),s=Kx(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Xf.warn(t),""}}}function UO(){return new Date().toISOString().substring(0,10)}function Jae(r,e=Hae){const t=[];let n=r.slice();for(const i of r){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),jO(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),jO(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class Xae{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rse()?Pse().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Gae(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return BO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return BO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function jO(r){return Kx(JSON.stringify({version:2,heartbeats:r})).length}function Qae(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kae(r){M1(new Bm("platform-logger",e=>new lae(e),"PRIVATE")),M1(new Bm("heartbeat",e=>new Yae(e),"PRIVATE")),gh(yL,OO,r),gh(yL,OO,"esm2017"),gh("fire-js","")}Kae("");function lD(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function CV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qae=CV,MV=new R_("auth","Firebase",CV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new sD("@firebase/auth");function Zae(r,...e){Zx.logLevel<=yr.WARN&&Zx.warn(`Auth (${lv}): ${r}`,...e)}function fx(r,...e){Zx.logLevel<=yr.ERROR&&Zx.error(`Auth (${lv}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(r,...e){throw uD(r,...e)}function Fc(r,...e){return uD(r,...e)}function cD(r,e,t){const n=Object.assign(Object.assign({},qae()),{[e]:t});return new R_("auth","Firebase",n).create(e,{appName:r.name})}function vh(r){return cD(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $ae(r,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&Nu(r,"argument-error"),cD(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function uD(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return MV.create(r,...e)}function Vn(r,e,...t){if(!r)throw uD(e,...t)}function Lf(r){const e="INTERNAL ASSERTION FAILED: "+r;throw fx(e),new Error(e)}function Qf(r,e){r||Lf(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function eoe(){return zO()==="http:"||zO()==="https:"}function zO(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function toe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eoe()||Lse()||"connection"in navigator)?navigator.onLine:!0}function noe(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qf(t>e,"Short delay should be less than long delay!"),this.isMobile=Tse()||Nse()}get(){return toe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(r,e){Qf(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const roe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ioe=new O_(3e4,6e4);function F_(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Gh(r,e,t,n,i={}){return TV(r,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=P_(Object.assign({key:r.config.apiKey},a)).slice(1),l=await r._getAdditionalHeaders();l["Content-Type"]="application/json",r.languageCode&&(l["X-Firebase-Locale"]=r.languageCode);const c=Object.assign({method:e,headers:l},s);return Ise()||(c.referrerPolicy="no-referrer"),AV.fetch()(IV(r,r.config.apiHost,t,o),c)})}async function TV(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},roe),e);try{const i=new aoe(r),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw g2(r,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw g2(r,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw g2(r,"email-already-in-use",a);if(l==="USER_DISABLED")throw g2(r,"user-disabled",a);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw cD(r,u,c);Nu(r,u)}}catch(i){if(i instanceof od)throw i;Nu(r,"network-request-failed",{message:String(i)})}}async function EV(r,e,t,n,i={}){const s=await Gh(r,e,t,n,i);return"mfaPendingCredential"in s&&Nu(r,"multi-factor-auth-required",{_serverResponse:s}),s}function IV(r,e,t,n){const i=`${e}${t}?${n}`;return r.config.emulator?fD(r.config,i):`${r.config.apiScheme}://${i}`}function soe(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aoe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Fc(this.auth,"network-request-failed")),ioe.get())})}}function g2(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Fc(r,e,n);return i.customData._tokenResponse=t,i}function VO(r){return r!==void 0&&r.enterprise!==void 0}class ooe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return soe(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function loe(r,e){return Gh(r,"GET","/v2/recaptchaConfig",F_(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function coe(r,e){return Gh(r,"POST","/v1/accounts:delete",e)}async function LV(r,e){return Gh(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uoe(r,e=!1){const t=Bs(r),n=await t.getIdToken(e),i=dD(n);Vn(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:lw(GE(i.auth_time)),issuedAtTime:lw(GE(i.iat)),expirationTime:lw(GE(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function GE(r){return Number(r)*1e3}function dD(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return fx("JWT malformed, contained fewer than 3 sections"),null;try{const i=pV(t);return i?JSON.parse(i):(fx("Failed to decode base64 JWT payload"),null)}catch(i){return fx("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function GO(r){const e=dD(r);return Vn(e,"internal-error"),Vn(typeof e.exp<"u","internal-error"),Vn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof od&&foe(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function foe({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class doe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lw(this.lastLoginAt),this.creationTime=lw(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(r){var e;const t=r.auth,n=await r.getIdToken(),i=await A1(r,LV(t,{idToken:n}));Vn(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];r._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?NV(s.providerUserInfo):[],o=poe(r.providerData,a),l=r.isAnonymous,c=!(r.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new SL(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(r,f)}async function hoe(r){const e=Bs(r);await $x(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function poe(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function NV(r){return r.map(e=>{var{providerId:t}=e,n=lD(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function moe(r,e){const t=await TV(r,{},async()=>{const n=P_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=r.config,a=IV(r,i,"/v1/token",`key=${s}`),o=await r._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",AV.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function goe(r,e){return Gh(r,"POST","/v2/accounts:revokeToken",F_(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Vn(e.idToken,"internal-error"),Vn(typeof e.idToken<"u","internal-error"),Vn(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Vn(e.length!==0,"internal-error");const t=GO(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Vn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await moe(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,a=new e1;return n&&(Vn(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(Vn(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Vn(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e1,this.toJSON())}_performRefresh(){return Lf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(r,e){Vn(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Nf{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,s=lD(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new doe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new SL(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await A1(this,this.stsTokenManager.getToken(this.auth,e));return Vn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uoe(this,e)}reload(){return hoe(this)}_assign(e){this!==e&&(Vn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Nf(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Vn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await $x(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fl(this.auth.app))return Promise.reject(vh(this.auth));const e=await this.getIdToken();return await A1(this,coe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,s,a,o,l,c,u;const f=(n=t.displayName)!==null&&n!==void 0?n:void 0,d=(i=t.email)!==null&&i!==void 0?i:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,g=(a=t.photoURL)!==null&&a!==void 0?a:void 0,_=(o=t.tenantId)!==null&&o!==void 0?o:void 0,w=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=t.createdAt)!==null&&c!==void 0?c:void 0,C=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:M,emailVerified:A,isAnonymous:k,providerData:O,stsTokenManager:R}=t;Vn(M&&R,e,"internal-error");const I=e1.fromJSON(this.name,R);Vn(typeof M=="string",e,"internal-error"),zd(f,e.name),zd(d,e.name),Vn(typeof A=="boolean",e,"internal-error"),Vn(typeof k=="boolean",e,"internal-error"),zd(p,e.name),zd(g,e.name),zd(_,e.name),zd(w,e.name),zd(b,e.name),zd(C,e.name);const D=new Nf({uid:M,auth:e,email:d,emailVerified:A,displayName:f,isAnonymous:k,photoURL:g,phoneNumber:p,tenantId:_,stsTokenManager:I,createdAt:b,lastLoginAt:C});return O&&Array.isArray(O)&&(D.providerData=O.map(E=>Object.assign({},E))),w&&(D._redirectEventId=w),D}static async _fromIdTokenResponse(e,t,n=!1){const i=new e1;i.updateFromServerResponse(t);const s=new Nf({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await $x(s),s}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];Vn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?NV(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new e1;o.updateFromIdToken(n);const l=new Nf({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new SL(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new Map;function Df(r){Qf(r instanceof Function,"Expected a class definition");let e=HO.get(r);return e?(Qf(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,HO.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}DV.type="NONE";const WO=DV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(r,e,t){return`firebase:${r}:${e}:${t}`}class t1{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=dx(this.userKey,i.apiKey,s),this.fullPersistenceKey=dx("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Nf._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new t1(Df(WO),e,n);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Df(WO);const a=dx(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const u=await c._get(a);if(u){const f=Nf._fromJSON(e,u);c!==s&&(o=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new t1(s,e,n):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new t1(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BV(e))return"Blackberry";if(UV(e))return"Webos";if(RV(e))return"Safari";if((e.includes("chrome/")||PV(e))&&!e.includes("edge/"))return"Chrome";if(FV(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function kV(r=Wa()){return/firefox\//i.test(r)}function RV(r=Wa()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PV(r=Wa()){return/crios\//i.test(r)}function OV(r=Wa()){return/iemobile/i.test(r)}function FV(r=Wa()){return/android/i.test(r)}function BV(r=Wa()){return/blackberry/i.test(r)}function UV(r=Wa()){return/webos/i.test(r)}function hD(r=Wa()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function voe(r=Wa()){var e;return hD(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yoe(){return Dse()&&document.documentMode===10}function jV(r=Wa()){return hD(r)||FV(r)||UV(r)||BV(r)||/windows phone/i.test(r)||OV(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(r,e=[]){let t;switch(r){case"Browser":t=YO(Wa());break;case"Worker":t=`${YO(Wa())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${lv}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class woe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _oe(r,e={}){return Gh(r,"GET","/v2/passwordPolicy",F_(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const boe=6;class Soe{constructor(e){var t,n,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:boe,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,s,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xoe{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JO(this),this.idTokenSubscription=new JO(this),this.beforeStateQueue=new woe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=MV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Df(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await t1.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await LV(this,{idToken:e}),n=await Nf._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Fl(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Vn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $x(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=noe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fl(this.app))return Promise.reject(vh(this));const t=e?Bs(e):null;return t&&Vn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Vn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fl(this.app)?Promise.reject(vh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fl(this.app)?Promise.reject(vh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Df(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _oe(this),t=new Soe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new R_("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await goe(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Df(e)||this._popupRedirectResolver;Vn(t,this,"argument-error"),this.redirectPersistenceManager=await t1.create(this,[Df(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Vn(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,n,i);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Vn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Fl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Zae(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function sg(r){return Bs(r)}let JO=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=jse(t=>this.observer=t)}get next(){return Vn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QM={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Coe(r){QM=r}function VV(r){return QM.loadJS(r)}function Moe(){return QM.recaptchaEnterpriseScript}function Aoe(){return QM.gapiScript}function Toe(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Eoe{constructor(){this.enterprise=new Ioe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ioe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Loe="recaptcha-enterprise",GV="NO_RECAPTCHA";class Noe{constructor(e){this.type=Loe,this.auth=sg(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{loe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new ooe(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;VO(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(GV)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Eoe().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{n(this.auth).then(o=>{if(!t&&VO(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Moe();l.length!==0&&(l+=o),VV(l).then(()=>{i(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function XO(r,e,t,n=!1,i=!1){const s=new Noe(r);let a;if(i)a=GV;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Doe(r,e,t,n,i){var s;if(!((s=r._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await XO(r,e,t,t==="getOobCode");return n(r,a)}else return n(r,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await XO(r,e,t,t==="getOobCode");return n(r,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function koe(r,e){const t=oD(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Jf(s,e??{}))return i;Nu(i,"already-initialized")}return t.initialize({options:e})}function Roe(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Df);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Poe(r,e,t){const n=sg(r);Vn(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=HV(e),{host:a,port:o}=Ooe(e),l=o===null?"":`:${o}`,c={url:`${s}//${a}${l}/`},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Vn(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Vn(Jf(c,n.config.emulator)&&Jf(u,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=c,n.emulatorConfig=u,n.settings.appVerificationDisabledForTesting=!0,Foe()}function HV(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Ooe(r){const e=HV(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:QO(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:QO(a)}}}function QO(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Foe(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Lf("not implemented")}_getIdTokenResponse(e){return Lf("not implemented")}_linkToIdToken(e,t){return Lf("not implemented")}_getReauthenticationResolver(e){return Lf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(r,e){return EV(r,"POST","/v1/accounts:signInWithIdp",F_(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Boe="http://localhost";class Um extends WV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Um(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nu("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=lD(t,["providerId","signInMethod"]);if(!n||!i)return null;const a=new Um(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return n1(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,n1(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,n1(e,t)}buildRequest(){const e={requestUri:Boe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=P_(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_ extends pD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends B_{constructor(){super("facebook.com")}static credential(e){return Um._fromParams({providerId:ah.PROVIDER_ID,signInMethod:ah.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ah.credentialFromTaggedObject(e)}static credentialFromError(e){return ah.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ah.credential(e.oauthAccessToken)}catch{return null}}}ah.FACEBOOK_SIGN_IN_METHOD="facebook.com";ah.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf extends B_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Um._fromParams({providerId:Tf.PROVIDER_ID,signInMethod:Tf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Tf.credentialFromTaggedObject(e)}static credentialFromError(e){return Tf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Tf.credential(t,n)}catch{return null}}}Tf.GOOGLE_SIGN_IN_METHOD="google.com";Tf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends B_{constructor(){super("github.com")}static credential(e){return Um._fromParams({providerId:oh.PROVIDER_ID,signInMethod:oh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oh.credentialFromTaggedObject(e)}static credentialFromError(e){return oh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oh.credential(e.oauthAccessToken)}catch{return null}}}oh.GITHUB_SIGN_IN_METHOD="github.com";oh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends B_{constructor(){super("twitter.com")}static credential(e,t){return Um._fromParams({providerId:lh.PROVIDER_ID,signInMethod:lh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lh.credentialFromTaggedObject(e)}static credentialFromError(e){return lh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return lh.credential(t,n)}catch{return null}}}lh.TWITTER_SIGN_IN_METHOD="twitter.com";lh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uoe(r,e){return EV(r,"POST","/v1/accounts:signUp",F_(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await Nf._fromIdTokenResponse(e,n,i),a=KO(n);return new jm({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=KO(n);return new jm({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function KO(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC extends od{constructor(e,t,n,i){var s;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,eC.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new eC(e,t,n,i)}}function YV(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?eC._fromErrorAndOperation(r,s,e,n):s})}async function joe(r,e,t=!1){const n=await A1(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return jm._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zoe(r,e,t=!1){const{auth:n}=r;if(Fl(n.app))return Promise.reject(vh(n));const i="reauthenticate";try{const s=await A1(r,YV(n,i,e,r),t);Vn(s.idToken,n,"internal-error");const a=dD(s.idToken);Vn(a,n,"internal-error");const{sub:o}=a;return Vn(r.uid===o,n,"user-mismatch"),jm._forOperation(r,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Nu(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Voe(r,e,t=!1){if(Fl(r.app))return Promise.reject(vh(r));const n="signIn",i=await YV(r,n,e),s=await jm._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Goe(r){const e=sg(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Hoe(r,e,t){if(Fl(r.app))return Promise.reject(vh(r));const n=sg(r),a=await Doe(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Uoe).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Goe(r),l}),o=await jm._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Woe(r,e){return Gh(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qO(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Bs(r),s={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await A1(n,Woe(n.auth,s));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const o=n.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function Yoe(r,e,t,n){return Bs(r).onIdTokenChanged(e,t,n)}function Joe(r,e,t){return Bs(r).beforeAuthStateChanged(e,t)}function JV(r,e,t,n){return Bs(r).onAuthStateChanged(e,t,n)}const tC="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tC,"1"),this.storage.removeItem(tC),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xoe=1e3,Qoe=10;class QV extends XV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);yoe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Qoe):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},Xoe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}QV.type="LOCAL";const Koe=QV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV extends XV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}KV.type="SESSION";const qV=KV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qoe(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new KM(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async c=>c(t.origin,s)),l=await qoe(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}KM.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zoe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=mD("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(){return window}function $oe(r){xu().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(){return typeof xu().WorkerGlobalScope<"u"&&typeof xu().importScripts=="function"}async function ele(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tle(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function nle(){return ZV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V="firebaseLocalStorageDb",rle=1,nC="firebaseLocalStorage",eG="fbase_key";class U_{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function qM(r,e){return r.transaction([nC],e?"readwrite":"readonly").objectStore(nC)}function ile(){const r=indexedDB.deleteDatabase($V);return new U_(r).toPromise()}function xL(){const r=indexedDB.open($V,rle);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(nC,{keyPath:eG})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(nC)?e(n):(n.close(),await ile(),e(await xL()))})})}async function ZO(r,e,t){const n=qM(r,!0).put({[eG]:e,value:t});return new U_(n).toPromise()}async function sle(r,e){const t=qM(r,!1).get(e),n=await new U_(t).toPromise();return n===void 0?null:n.value}function $O(r,e){const t=qM(r,!0).delete(e);return new U_(t).toPromise()}const ale=800,ole=3;class tG{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xL(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>ole)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=KM._getInstance(nle()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ele(),!this.activeServiceWorker)return;this.sender=new Zoe(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tle()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xL();return await ZO(e,tC,"1"),await $O(e,tC),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ZO(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>sle(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$O(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=qM(i,!1).getAll();return new U_(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ale)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tG.type="LOCAL";const lle=tG;new O_(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nG(r,e){return e?Df(e):(Vn(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD extends WV{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return n1(e,this._buildIdpRequest())}_linkToIdToken(e,t){return n1(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return n1(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cle(r){return Voe(r.auth,new gD(r),r.bypassAuthState)}function ule(r){const{auth:e,user:t}=r;return Vn(t,e,"internal-error"),zoe(t,new gD(r),r.bypassAuthState)}async function fle(r){const{auth:e,user:t}=r;return Vn(t,e,"internal-error"),joe(t,new gD(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cle;case"linkViaPopup":case"linkViaRedirect":return fle;case"reauthViaPopup":case"reauthViaRedirect":return ule;default:Nu(this.auth,"internal-error")}}resolve(e){Qf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dle=new O_(2e3,1e4);async function iG(r,e,t){if(Fl(r.app))return Promise.reject(Fc(r,"operation-not-supported-in-this-environment"));const n=sg(r);$ae(r,e,pD);const i=nG(n,t);return new dm(n,"signInViaPopup",e,i).executeNotNull()}class dm extends rG{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,dm.currentPopupAction&&dm.currentPopupAction.cancel(),dm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Vn(e,this.auth,"internal-error"),e}async onExecution(){Qf(this.filter.length===1,"Popup operations only handle one event");const e=mD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dle.get())};e()}}dm.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hle="pendingRedirect",hx=new Map;class ple extends rG{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=hx.get(this.auth._key());if(!e){try{const n=await mle(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}hx.set(this.auth._key(),e)}return this.bypassAuthState||hx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mle(r,e){const t=yle(e),n=vle(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function gle(r,e){hx.set(r._key(),e)}function vle(r){return Df(r._redirectPersistence)}function yle(r){return dx(hle,r.config.apiKey,r.name)}async function wle(r,e,t=!1){if(Fl(r.app))return Promise.reject(vh(r));const n=sg(r),i=nG(n,e),a=await new ple(n,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _le=10*60*1e3;class ble{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Sle(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!sG(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(Fc(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_le&&this.cachedEventUids.clear(),this.cachedEventUids.has(eF(e))}saveEventToCache(e){this.cachedEventUids.add(eF(e)),this.lastProcessedEventTime=Date.now()}}function eF(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function sG({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Sle(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sG(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xle(r,e={}){return Gh(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cle=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mle=/^https?/;async function Ale(r){if(r.config.emulator)return;const{authorizedDomains:e}=await xle(r);for(const t of e)try{if(Tle(t))return}catch{}Nu(r,"unauthorized-domain")}function Tle(r){const e=bL(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!Mle.test(t))return!1;if(Cle.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ele=new O_(3e4,6e4);function tF(){const r=xu().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Ile(r){return new Promise((e,t)=>{var n,i,s;function a(){tF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tF(),t(Fc(r,"network-request-failed"))},timeout:Ele.get()})}if(!((i=(n=xu().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=xu().gapi)===null||s===void 0)&&s.load)a();else{const o=Toe("iframefcb");return xu()[o]=()=>{gapi.load?a():t(Fc(r,"network-request-failed"))},VV(`${Aoe()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw px=null,e})}let px=null;function Lle(r){return px=px||Ile(r),px}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nle=new O_(5e3,15e3),Dle="__/auth/iframe",kle="emulator/auth/iframe",Rle={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ple=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ole(r){const e=r.config;Vn(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?fD(e,kle):`https://${r.config.authDomain}/${Dle}`,n={apiKey:e.apiKey,appName:r.name,v:lv},i=Ple.get(r.config.apiHost);i&&(n.eid=i);const s=r._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${P_(n).slice(1)}`}async function Fle(r){const e=await Lle(r),t=xu().gapi;return Vn(t,r,"internal-error"),e.open({where:document.body,url:Ole(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rle,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Fc(r,"network-request-failed"),o=xu().setTimeout(()=>{s(a)},Nle.get());function l(){xu().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ble={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ule=500,jle=600,zle="_blank",Vle="http://localhost";class nF{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Gle(r,e,t,n=Ule,i=jle){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Ble),{width:n.toString(),height:i.toString(),top:s,left:a}),c=Wa().toLowerCase();t&&(o=PV(c)?zle:t),kV(c)&&(e=e||Vle,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[p,g])=>`${d}${p}=${g},`,"");if(voe(c)&&o!=="_self")return Hle(e||"",o),new nF(null);const f=window.open(e||"",o,u);Vn(f,r,"popup-blocked");try{f.focus()}catch{}return new nF(f)}function Hle(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wle="__/auth/handler",Yle="emulator/auth/handler",Jle=encodeURIComponent("fac");async function rF(r,e,t,n,i,s){Vn(r.config.authDomain,r,"auth-domain-config-required"),Vn(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:lv,eventId:i};if(e instanceof pD){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",Use(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))a[u]=f}if(e instanceof B_){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(a.scopes=u.join(","))}r.tenantId&&(a.tid=r.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await r._getAppCheckToken(),c=l?`#${Jle}=${encodeURIComponent(l)}`:"";return`${Xle(r)}?${P_(o).slice(1)}${c}`}function Xle({config:r}){return r.emulator?fD(r,Yle):`https://${r.authDomain}/${Wle}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="webStorageSupport";class Qle{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qV,this._completeRedirectFn=wle,this._overrideRedirectResult=gle}async _openPopup(e,t,n,i){var s;Qf((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await rF(e,t,n,bL(),i);return Gle(e,a,mD())}async _openRedirect(e,t,n,i){await this._originValidation(e);const s=await rF(e,t,n,bL(),i);return $oe(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Qf(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Fle(e),n=new ble(e);return t.register("authEvent",i=>(Vn(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(HE,{type:HE},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[HE];a!==void 0&&t(!!a),Nu(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ale(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jV()||RV()||hD()}}const Kle=Qle;var iF="@firebase/auth",sF="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qle{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Vn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zle(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $le(r){M1(new Bm("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Vn(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zV(r)},c=new xoe(n,i,s,l);return Roe(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),M1(new Bm("auth-internal",e=>{const t=sg(e.getProvider("auth").getImmediate());return(n=>new qle(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gh(iF,sF,Zle(r)),gh(iF,sF,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ece=5*60,tce=vV("authIdTokenMaxAge")||ece;let aF=null;const nce=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>tce)return;const i=t==null?void 0:t.token;aF!==i&&(aF=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function rce(r=bV()){const e=oD(r,"auth");if(e.isInitialized())return e.getImmediate();const t=koe(r,{popupRedirectResolver:Kle,persistence:[lle,Koe,qV]}),n=vV("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=nce(s.toString());Joe(t,a,()=>a(t.currentUser)),Yoe(t,o=>a(o))}}const i=mV("auth");return i&&Poe(t,`http://${i}`),t}function ice(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}Coe({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const s=Fc("internal-error");s.customData=i,t(s)},n.type="text/javascript",n.charset="UTF-8",ice().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$le("Browser");var sce="firebase",ace="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gh(sce,ace,"app");var oF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yh,aG;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function D(){}D.prototype=I.prototype,R.D=I.prototype,R.prototype=new D,R.prototype.constructor=R,R.C=function(E,B,U){for(var V=Array(arguments.length-2),X=2;X<arguments.length;X++)V[X-2]=arguments[X];return I.prototype[B].apply(E,V)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,I,D){D||(D=0);var E=Array(16);if(typeof I=="string")for(var B=0;16>B;++B)E[B]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(B=0;16>B;++B)E[B]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=R.g[0],D=R.g[1],B=R.g[2];var U=R.g[3],V=I+(U^D&(B^U))+E[0]+3614090360&4294967295;I=D+(V<<7&4294967295|V>>>25),V=U+(B^I&(D^B))+E[1]+3905402710&4294967295,U=I+(V<<12&4294967295|V>>>20),V=B+(D^U&(I^D))+E[2]+606105819&4294967295,B=U+(V<<17&4294967295|V>>>15),V=D+(I^B&(U^I))+E[3]+3250441966&4294967295,D=B+(V<<22&4294967295|V>>>10),V=I+(U^D&(B^U))+E[4]+4118548399&4294967295,I=D+(V<<7&4294967295|V>>>25),V=U+(B^I&(D^B))+E[5]+1200080426&4294967295,U=I+(V<<12&4294967295|V>>>20),V=B+(D^U&(I^D))+E[6]+2821735955&4294967295,B=U+(V<<17&4294967295|V>>>15),V=D+(I^B&(U^I))+E[7]+4249261313&4294967295,D=B+(V<<22&4294967295|V>>>10),V=I+(U^D&(B^U))+E[8]+1770035416&4294967295,I=D+(V<<7&4294967295|V>>>25),V=U+(B^I&(D^B))+E[9]+2336552879&4294967295,U=I+(V<<12&4294967295|V>>>20),V=B+(D^U&(I^D))+E[10]+4294925233&4294967295,B=U+(V<<17&4294967295|V>>>15),V=D+(I^B&(U^I))+E[11]+2304563134&4294967295,D=B+(V<<22&4294967295|V>>>10),V=I+(U^D&(B^U))+E[12]+1804603682&4294967295,I=D+(V<<7&4294967295|V>>>25),V=U+(B^I&(D^B))+E[13]+4254626195&4294967295,U=I+(V<<12&4294967295|V>>>20),V=B+(D^U&(I^D))+E[14]+2792965006&4294967295,B=U+(V<<17&4294967295|V>>>15),V=D+(I^B&(U^I))+E[15]+1236535329&4294967295,D=B+(V<<22&4294967295|V>>>10),V=I+(B^U&(D^B))+E[1]+4129170786&4294967295,I=D+(V<<5&4294967295|V>>>27),V=U+(D^B&(I^D))+E[6]+3225465664&4294967295,U=I+(V<<9&4294967295|V>>>23),V=B+(I^D&(U^I))+E[11]+643717713&4294967295,B=U+(V<<14&4294967295|V>>>18),V=D+(U^I&(B^U))+E[0]+3921069994&4294967295,D=B+(V<<20&4294967295|V>>>12),V=I+(B^U&(D^B))+E[5]+3593408605&4294967295,I=D+(V<<5&4294967295|V>>>27),V=U+(D^B&(I^D))+E[10]+38016083&4294967295,U=I+(V<<9&4294967295|V>>>23),V=B+(I^D&(U^I))+E[15]+3634488961&4294967295,B=U+(V<<14&4294967295|V>>>18),V=D+(U^I&(B^U))+E[4]+3889429448&4294967295,D=B+(V<<20&4294967295|V>>>12),V=I+(B^U&(D^B))+E[9]+568446438&4294967295,I=D+(V<<5&4294967295|V>>>27),V=U+(D^B&(I^D))+E[14]+3275163606&4294967295,U=I+(V<<9&4294967295|V>>>23),V=B+(I^D&(U^I))+E[3]+4107603335&4294967295,B=U+(V<<14&4294967295|V>>>18),V=D+(U^I&(B^U))+E[8]+1163531501&4294967295,D=B+(V<<20&4294967295|V>>>12),V=I+(B^U&(D^B))+E[13]+2850285829&4294967295,I=D+(V<<5&4294967295|V>>>27),V=U+(D^B&(I^D))+E[2]+4243563512&4294967295,U=I+(V<<9&4294967295|V>>>23),V=B+(I^D&(U^I))+E[7]+1735328473&4294967295,B=U+(V<<14&4294967295|V>>>18),V=D+(U^I&(B^U))+E[12]+2368359562&4294967295,D=B+(V<<20&4294967295|V>>>12),V=I+(D^B^U)+E[5]+4294588738&4294967295,I=D+(V<<4&4294967295|V>>>28),V=U+(I^D^B)+E[8]+2272392833&4294967295,U=I+(V<<11&4294967295|V>>>21),V=B+(U^I^D)+E[11]+1839030562&4294967295,B=U+(V<<16&4294967295|V>>>16),V=D+(B^U^I)+E[14]+4259657740&4294967295,D=B+(V<<23&4294967295|V>>>9),V=I+(D^B^U)+E[1]+2763975236&4294967295,I=D+(V<<4&4294967295|V>>>28),V=U+(I^D^B)+E[4]+1272893353&4294967295,U=I+(V<<11&4294967295|V>>>21),V=B+(U^I^D)+E[7]+4139469664&4294967295,B=U+(V<<16&4294967295|V>>>16),V=D+(B^U^I)+E[10]+3200236656&4294967295,D=B+(V<<23&4294967295|V>>>9),V=I+(D^B^U)+E[13]+681279174&4294967295,I=D+(V<<4&4294967295|V>>>28),V=U+(I^D^B)+E[0]+3936430074&4294967295,U=I+(V<<11&4294967295|V>>>21),V=B+(U^I^D)+E[3]+3572445317&4294967295,B=U+(V<<16&4294967295|V>>>16),V=D+(B^U^I)+E[6]+76029189&4294967295,D=B+(V<<23&4294967295|V>>>9),V=I+(D^B^U)+E[9]+3654602809&4294967295,I=D+(V<<4&4294967295|V>>>28),V=U+(I^D^B)+E[12]+3873151461&4294967295,U=I+(V<<11&4294967295|V>>>21),V=B+(U^I^D)+E[15]+530742520&4294967295,B=U+(V<<16&4294967295|V>>>16),V=D+(B^U^I)+E[2]+3299628645&4294967295,D=B+(V<<23&4294967295|V>>>9),V=I+(B^(D|~U))+E[0]+4096336452&4294967295,I=D+(V<<6&4294967295|V>>>26),V=U+(D^(I|~B))+E[7]+1126891415&4294967295,U=I+(V<<10&4294967295|V>>>22),V=B+(I^(U|~D))+E[14]+2878612391&4294967295,B=U+(V<<15&4294967295|V>>>17),V=D+(U^(B|~I))+E[5]+4237533241&4294967295,D=B+(V<<21&4294967295|V>>>11),V=I+(B^(D|~U))+E[12]+1700485571&4294967295,I=D+(V<<6&4294967295|V>>>26),V=U+(D^(I|~B))+E[3]+2399980690&4294967295,U=I+(V<<10&4294967295|V>>>22),V=B+(I^(U|~D))+E[10]+4293915773&4294967295,B=U+(V<<15&4294967295|V>>>17),V=D+(U^(B|~I))+E[1]+2240044497&4294967295,D=B+(V<<21&4294967295|V>>>11),V=I+(B^(D|~U))+E[8]+1873313359&4294967295,I=D+(V<<6&4294967295|V>>>26),V=U+(D^(I|~B))+E[15]+4264355552&4294967295,U=I+(V<<10&4294967295|V>>>22),V=B+(I^(U|~D))+E[6]+2734768916&4294967295,B=U+(V<<15&4294967295|V>>>17),V=D+(U^(B|~I))+E[13]+1309151649&4294967295,D=B+(V<<21&4294967295|V>>>11),V=I+(B^(D|~U))+E[4]+4149444226&4294967295,I=D+(V<<6&4294967295|V>>>26),V=U+(D^(I|~B))+E[11]+3174756917&4294967295,U=I+(V<<10&4294967295|V>>>22),V=B+(I^(U|~D))+E[2]+718787259&4294967295,B=U+(V<<15&4294967295|V>>>17),V=D+(U^(B|~I))+E[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(B+(V<<21&4294967295|V>>>11))&4294967295,R.g[2]=R.g[2]+B&4294967295,R.g[3]=R.g[3]+U&4294967295}n.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var D=I-this.blockSize,E=this.B,B=this.h,U=0;U<I;){if(B==0)for(;U<=D;)i(this,R,U),U+=this.blockSize;if(typeof R=="string"){for(;U<I;)if(E[B++]=R.charCodeAt(U++),B==this.blockSize){i(this,E),B=0;break}}else for(;U<I;)if(E[B++]=R[U++],B==this.blockSize){i(this,E),B=0;break}}this.h=B,this.o+=I},n.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var D=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=D&255,D/=256;for(this.u(R),R=Array(16),I=D=0;4>I;++I)for(var E=0;32>E;E+=8)R[D++]=this.g[I]>>>E&255;return R};function s(R,I){var D=o;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=I(R)}function a(R,I){this.h=I;for(var D=[],E=!0,B=R.length-1;0<=B;B--){var U=R[B]|0;E&&U==I||(D[B]=U,E=!1)}this.g=D}var o={};function l(R){return-128<=R&&128>R?s(R,function(I){return new a([I|0],0>I?-1:0)}):new a([R|0],0>R?-1:0)}function c(R){if(isNaN(R)||!isFinite(R))return f;if(0>R)return w(c(-R));for(var I=[],D=1,E=0;R>=D;E++)I[E]=R/D|0,D*=4294967296;return new a(I,0)}function u(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return w(u(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=c(Math.pow(I,8)),E=f,B=0;B<R.length;B+=8){var U=Math.min(8,R.length-B),V=parseInt(R.substring(B,B+U),I);8>U?(U=c(Math.pow(I,U)),E=E.j(U).add(c(V))):(E=E.j(D),E=E.add(c(V)))}return E}var f=l(0),d=l(1),p=l(16777216);r=a.prototype,r.m=function(){if(_(this))return-w(this).m();for(var R=0,I=1,D=0;D<this.g.length;D++){var E=this.i(D);R+=(0<=E?E:4294967296+E)*I,I*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(g(this))return"0";if(_(this))return"-"+w(this).toString(R);for(var I=c(Math.pow(R,6)),D=this,E="";;){var B=A(D,I).g;D=b(D,B.j(I));var U=((0<D.g.length?D.g[0]:D.h)>>>0).toString(R);if(D=B,g(D))return U+E;for(;6>U.length;)U="0"+U;E=U+E}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function g(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function _(R){return R.h==-1}r.l=function(R){return R=b(this,R),_(R)?-1:g(R)?0:1};function w(R){for(var I=R.g.length,D=[],E=0;E<I;E++)D[E]=~R.g[E];return new a(D,~R.h).add(d)}r.abs=function(){return _(this)?w(this):this},r.add=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],E=0,B=0;B<=I;B++){var U=E+(this.i(B)&65535)+(R.i(B)&65535),V=(U>>>16)+(this.i(B)>>>16)+(R.i(B)>>>16);E=V>>>16,U&=65535,V&=65535,D[B]=V<<16|U}return new a(D,D[D.length-1]&-2147483648?-1:0)};function b(R,I){return R.add(w(I))}r.j=function(R){if(g(this)||g(R))return f;if(_(this))return _(R)?w(this).j(w(R)):w(w(this).j(R));if(_(R))return w(this.j(w(R)));if(0>this.l(p)&&0>R.l(p))return c(this.m()*R.m());for(var I=this.g.length+R.g.length,D=[],E=0;E<2*I;E++)D[E]=0;for(E=0;E<this.g.length;E++)for(var B=0;B<R.g.length;B++){var U=this.i(E)>>>16,V=this.i(E)&65535,X=R.i(B)>>>16,te=R.i(B)&65535;D[2*E+2*B]+=V*te,C(D,2*E+2*B),D[2*E+2*B+1]+=U*te,C(D,2*E+2*B+1),D[2*E+2*B+1]+=V*X,C(D,2*E+2*B+1),D[2*E+2*B+2]+=U*X,C(D,2*E+2*B+2)}for(E=0;E<I;E++)D[E]=D[2*E+1]<<16|D[2*E];for(E=I;E<2*I;E++)D[E]=0;return new a(D,0)};function C(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function M(R,I){this.g=R,this.h=I}function A(R,I){if(g(I))throw Error("division by zero");if(g(R))return new M(f,f);if(_(R))return I=A(w(R),I),new M(w(I.g),w(I.h));if(_(I))return I=A(R,w(I)),new M(w(I.g),I.h);if(30<R.g.length){if(_(R)||_(I))throw Error("slowDivide_ only works with positive integers.");for(var D=d,E=I;0>=E.l(R);)D=k(D),E=k(E);var B=O(D,1),U=O(E,1);for(E=O(E,2),D=O(D,2);!g(E);){var V=U.add(E);0>=V.l(R)&&(B=B.add(D),U=V),E=O(E,1),D=O(D,1)}return I=b(R,B.j(I)),new M(B,I)}for(B=f;0<=R.l(I);){for(D=Math.max(1,Math.floor(R.m()/I.m())),E=Math.ceil(Math.log(D)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),U=c(D),V=U.j(I);_(V)||0<V.l(R);)D-=E,U=c(D),V=U.j(I);g(U)&&(U=d),B=B.add(U),R=b(R,V)}return new M(B,R)}r.A=function(R){return A(this,R).h},r.and=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],E=0;E<I;E++)D[E]=this.i(E)&R.i(E);return new a(D,this.h&R.h)},r.or=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],E=0;E<I;E++)D[E]=this.i(E)|R.i(E);return new a(D,this.h|R.h)},r.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],E=0;E<I;E++)D[E]=this.i(E)^R.i(E);return new a(D,this.h^R.h)};function k(R){for(var I=R.g.length+1,D=[],E=0;E<I;E++)D[E]=R.i(E)<<1|R.i(E-1)>>>31;return new a(D,R.h)}function O(R,I){var D=I>>5;I%=32;for(var E=R.g.length-D,B=[],U=0;U<E;U++)B[U]=0<I?R.i(U+D)>>>I|R.i(U+D+1)<<32-I:R.i(U+D);return new a(B,R.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,aG=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,yh=a}).apply(typeof oF<"u"?oF:typeof self<"u"?self:typeof window<"u"?window:{});var v2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oG,Yy,lG,mx,CL,cG,uG,fG;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,H,K){return T==Array.prototype||T==Object.prototype||(T[H]=K.value),T};function t(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof v2=="object"&&v2];for(var H=0;H<T.length;++H){var K=T[H];if(K&&K.Math==Math)return K}throw Error("Cannot find global object")}var n=t(this);function i(T,H){if(H)e:{var K=n;T=T.split(".");for(var de=0;de<T.length-1;de++){var Ze=T[de];if(!(Ze in K))break e;K=K[Ze]}T=T[T.length-1],de=K[T],H=H(de),H!=de&&H!=null&&e(K,T,{configurable:!0,writable:!0,value:H})}}function s(T,H){T instanceof String&&(T+="");var K=0,de=!1,Ze={next:function(){if(!de&&K<T.length){var ft=K++;return{value:H(ft,T[ft]),done:!1}}return de=!0,{done:!0,value:void 0}}};return Ze[Symbol.iterator]=function(){return Ze},Ze}i("Array.prototype.values",function(T){return T||function(){return s(this,function(H,K){return K})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(T){var H=typeof T;return H=H!="object"?H:T?Array.isArray(T)?"array":H:"null",H=="array"||H=="object"&&typeof T.length=="number"}function c(T){var H=typeof T;return H=="object"&&T!=null||H=="function"}function u(T,H,K){return T.call.apply(T.bind,arguments)}function f(T,H,K){if(!T)throw Error();if(2<arguments.length){var de=Array.prototype.slice.call(arguments,2);return function(){var Ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ze,de),T.apply(H,Ze)}}return function(){return T.apply(H,arguments)}}function d(T,H,K){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,d.apply(null,arguments)}function p(T,H){var K=Array.prototype.slice.call(arguments,1);return function(){var de=K.slice();return de.push.apply(de,arguments),T.apply(this,de)}}function g(T,H){function K(){}K.prototype=H.prototype,T.aa=H.prototype,T.prototype=new K,T.prototype.constructor=T,T.Qb=function(de,Ze,ft){for(var jt=Array(arguments.length-2),pr=2;pr<arguments.length;pr++)jt[pr-2]=arguments[pr];return H.prototype[Ze].apply(de,jt)}}function _(T){const H=T.length;if(0<H){const K=Array(H);for(let de=0;de<H;de++)K[de]=T[de];return K}return[]}function w(T,H){for(let K=1;K<arguments.length;K++){const de=arguments[K];if(l(de)){const Ze=T.length||0,ft=de.length||0;T.length=Ze+ft;for(let jt=0;jt<ft;jt++)T[Ze+jt]=de[jt]}else T.push(de)}}class b{constructor(H,K){this.i=H,this.j=K,this.h=0,this.g=null}get(){let H;return 0<this.h?(this.h--,H=this.g,this.g=H.next,H.next=null):H=this.i(),H}}function C(T){return/^[\s\xa0]*$/.test(T)}function M(){var T=o.navigator;return T&&(T=T.userAgent)?T:""}function A(T){return A[" "](T),T}A[" "]=function(){};var k=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function O(T,H,K){for(const de in T)H.call(K,T[de],de,T)}function R(T,H){for(const K in T)H.call(void 0,T[K],K,T)}function I(T){const H={};for(const K in T)H[K]=T[K];return H}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(T,H){let K,de;for(let Ze=1;Ze<arguments.length;Ze++){de=arguments[Ze];for(K in de)T[K]=de[K];for(let ft=0;ft<D.length;ft++)K=D[ft],Object.prototype.hasOwnProperty.call(de,K)&&(T[K]=de[K])}}function B(T){var H=1;T=T.split(":");const K=[];for(;0<H&&T.length;)K.push(T.shift()),H--;return T.length&&K.push(T.join(":")),K}function U(T){o.setTimeout(()=>{throw T},0)}function V(){var T=oe;let H=null;return T.g&&(H=T.g,T.g=T.g.next,T.g||(T.h=null),H.next=null),H}class X{constructor(){this.h=this.g=null}add(H,K){const de=te.get();de.set(H,K),this.h?this.h.next=de:this.g=de,this.h=de}}var te=new b(()=>new ee,T=>T.reset());class ee{constructor(){this.next=this.g=this.h=null}set(H,K){this.h=H,this.g=K,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ne=!1,oe=new X,q=()=>{const T=o.Promise.resolve(void 0);ue=()=>{T.then(J)}};var J=()=>{for(var T;T=V();){try{T.h.call(T.g)}catch(K){U(K)}var H=te;H.j(T),100>H.h&&(H.h++,T.next=H.g,H.g=T)}ne=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(T,H){this.type=T,this.g=this.target=H,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var T=!1,H=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const K=()=>{};o.addEventListener("test",K,H),o.removeEventListener("test",K,H)}catch{}return T}();function ge(T,H){if(he.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var K=this.type=T.type,de=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=H,H=T.relatedTarget){if(k){e:{try{A(H.nodeName);var Ze=!0;break e}catch{}Ze=!1}Ze||(H=null)}}else K=="mouseover"?H=T.fromElement:K=="mouseout"&&(H=T.toElement);this.relatedTarget=H,de?(this.clientX=de.clientX!==void 0?de.clientX:de.pageX,this.clientY=de.clientY!==void 0?de.clientY:de.pageY,this.screenX=de.screenX||0,this.screenY=de.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:pe[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&ge.aa.h.call(this)}}g(ge,he);var pe={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),ke=0;function Pe(T,H,K,de,Ze){this.listener=T,this.proxy=null,this.src=H,this.type=K,this.capture=!!de,this.ha=Ze,this.key=++ke,this.da=this.fa=!1}function je(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function Ke(T){this.src=T,this.g={},this.h=0}Ke.prototype.add=function(T,H,K,de,Ze){var ft=T.toString();T=this.g[ft],T||(T=this.g[ft]=[],this.h++);var jt=Ge(T,H,de,Ze);return-1<jt?(H=T[jt],K||(H.fa=!1)):(H=new Pe(H,this.src,ft,!!de,Ze),H.fa=K,T.push(H)),H};function Ie(T,H){var K=H.type;if(K in T.g){var de=T.g[K],Ze=Array.prototype.indexOf.call(de,H,void 0),ft;(ft=0<=Ze)&&Array.prototype.splice.call(de,Ze,1),ft&&(je(H),T.g[K].length==0&&(delete T.g[K],T.h--))}}function Ge(T,H,K,de){for(var Ze=0;Ze<T.length;++Ze){var ft=T[Ze];if(!ft.da&&ft.listener==H&&ft.capture==!!K&&ft.ha==de)return Ze}return-1}var ce="closure_lm_"+(1e6*Math.random()|0),_t={};function _e(T,H,K,de,Ze){if(Array.isArray(H)){for(var ft=0;ft<H.length;ft++)_e(T,H[ft],K,de,Ze);return null}return K=ve(K),T&&T[we]?T.K(H,K,c(de)?!!de.capture:!1,Ze):Ne(T,H,K,!1,de,Ze)}function Ne(T,H,K,de,Ze,ft){if(!H)throw Error("Invalid event type");var jt=c(Ze)?!!Ze.capture:!!Ze,pr=re(T);if(pr||(T[ce]=pr=new Ke(T)),K=pr.add(H,K,de,jt,ft),K.proxy)return K;if(de=Ce(),K.proxy=de,de.src=T,de.listener=K,T.addEventListener)$||(Ze=jt),Ze===void 0&&(Ze=!1),T.addEventListener(H.toString(),de,Ze);else if(T.attachEvent)T.attachEvent(Z(H.toString()),de);else if(T.addListener&&T.removeListener)T.addListener(de);else throw Error("addEventListener and attachEvent are unavailable.");return K}function Ce(){function T(K){return H.call(T.src,T.listener,K)}const H=W;return T}function He(T,H,K,de,Ze){if(Array.isArray(H))for(var ft=0;ft<H.length;ft++)He(T,H[ft],K,de,Ze);else de=c(de)?!!de.capture:!!de,K=ve(K),T&&T[we]?(T=T.i,H=String(H).toString(),H in T.g&&(ft=T.g[H],K=Ge(ft,K,de,Ze),-1<K&&(je(ft[K]),Array.prototype.splice.call(ft,K,1),ft.length==0&&(delete T.g[H],T.h--)))):T&&(T=re(T))&&(H=T.g[H.toString()],T=-1,H&&(T=Ge(H,K,de,Ze)),(K=-1<T?H[T]:null)&&Ee(K))}function Ee(T){if(typeof T!="number"&&T&&!T.da){var H=T.src;if(H&&H[we])Ie(H.i,T);else{var K=T.type,de=T.proxy;H.removeEventListener?H.removeEventListener(K,de,T.capture):H.detachEvent?H.detachEvent(Z(K),de):H.addListener&&H.removeListener&&H.removeListener(de),(K=re(H))?(Ie(K,T),K.h==0&&(K.src=null,H[ce]=null)):je(T)}}}function Z(T){return T in _t?_t[T]:_t[T]="on"+T}function W(T,H){if(T.da)T=!0;else{H=new ge(H,this);var K=T.listener,de=T.ha||T.src;T.fa&&Ee(T),T=K.call(de,H)}return T}function re(T){return T=T[ce],T instanceof Ke?T:null}var be="__closure_events_fn_"+(1e9*Math.random()>>>0);function ve(T){return typeof T=="function"?T:(T[be]||(T[be]=function(H){return T.handleEvent(H)}),T[be])}function Je(){ie.call(this),this.i=new Ke(this),this.M=this,this.F=null}g(Je,ie),Je.prototype[we]=!0,Je.prototype.removeEventListener=function(T,H,K,de){He(this,T,H,K,de)};function $e(T,H){var K,de=T.F;if(de)for(K=[];de;de=de.F)K.push(de);if(T=T.M,de=H.type||H,typeof H=="string")H=new he(H,T);else if(H instanceof he)H.target=H.target||T;else{var Ze=H;H=new he(de,T),E(H,Ze)}if(Ze=!0,K)for(var ft=K.length-1;0<=ft;ft--){var jt=H.g=K[ft];Ze=it(jt,de,!0,H)&&Ze}if(jt=H.g=T,Ze=it(jt,de,!0,H)&&Ze,Ze=it(jt,de,!1,H)&&Ze,K)for(ft=0;ft<K.length;ft++)jt=H.g=K[ft],Ze=it(jt,de,!1,H)&&Ze}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var T=this.i,H;for(H in T.g){for(var K=T.g[H],de=0;de<K.length;de++)je(K[de]);delete T.g[H],T.h--}}this.F=null},Je.prototype.K=function(T,H,K,de){return this.i.add(String(T),H,!1,K,de)},Je.prototype.L=function(T,H,K,de){return this.i.add(String(T),H,!0,K,de)};function it(T,H,K,de){if(H=T.i.g[String(H)],!H)return!0;H=H.concat();for(var Ze=!0,ft=0;ft<H.length;++ft){var jt=H[ft];if(jt&&!jt.da&&jt.capture==K){var pr=jt.listener,Vi=jt.ha||jt.src;jt.fa&&Ie(T.i,jt),Ze=pr.call(Vi,de)!==!1&&Ze}}return Ze&&!de.defaultPrevented}function pt(T,H,K){if(typeof T=="function")K&&(T=d(T,K));else if(T&&typeof T.handleEvent=="function")T=d(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(H)?-1:o.setTimeout(T,H||0)}function Ft(T){T.g=pt(()=>{T.g=null,T.i&&(T.i=!1,Ft(T))},T.l);const H=T.h;T.h=null,T.m.apply(null,H)}class Le extends ie{constructor(H,K){super(),this.m=H,this.l=K,this.h=null,this.i=!1,this.g=null}j(H){this.h=arguments,this.g?this.i=!0:Ft(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function at(T){ie.call(this),this.h=T,this.g={}}g(at,ie);var vt=[];function qe(T){O(T.g,function(H,K){this.g.hasOwnProperty(K)&&Ee(H)},T),T.g={}}at.prototype.N=function(){at.aa.N.call(this),qe(this)},at.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var et=o.JSON.stringify,Me=o.JSON.parse,tt=class{stringify(T){return o.JSON.stringify(T,void 0)}parse(T){return o.JSON.parse(T,void 0)}};function Tt(){}Tt.prototype.h=null;function Ae(T){return T.h||(T.h=T.i())}function Oe(){}var Ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yt(){he.call(this,"d")}g(yt,he);function Lt(){he.call(this,"c")}g(Lt,he);var xt={},Yt=null;function on(){return Yt=Yt||new Je}xt.La="serverreachability";function Zt(T){he.call(this,xt.La,T)}g(Zt,he);function qt(T){const H=on();$e(H,new Zt(H))}xt.STAT_EVENT="statevent";function Xe(T,H){he.call(this,xt.STAT_EVENT,T),this.stat=H}g(Xe,he);function ot(T){const H=on();$e(H,new Xe(H,T))}xt.Ma="timingevent";function Dt(T,H){he.call(this,xt.Ma,T),this.size=H}g(Dt,he);function nn(T,H){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){T()},H)}function Fn(){this.g=!0}Fn.prototype.xa=function(){this.g=!1};function Or(T,H,K,de,Ze,ft){T.info(function(){if(T.g)if(ft)for(var jt="",pr=ft.split("&"),Vi=0;Vi<pr.length;Vi++){var lr=pr[Vi].split("=");if(1<lr.length){var Gi=lr[0];lr=lr[1];var Tr=Gi.split("_");jt=2<=Tr.length&&Tr[1]=="type"?jt+(Gi+"="+lr+"&"):jt+(Gi+"=redacted&")}}else jt=null;else jt=ft;return"XMLHTTP REQ ("+de+") [attempt "+Ze+"]: "+H+`
`+K+`
`+jt})}function Yn(T,H,K,de,Ze,ft,jt){T.info(function(){return"XMLHTTP RESP ("+de+") [ attempt "+Ze+"]: "+H+`
`+K+`
`+ft+" "+jt})}function sr(T,H,K,de){T.info(function(){return"XMLHTTP TEXT ("+H+"): "+ni(T,K)+(de?" "+de:"")})}function xn(T,H){T.info(function(){return"TIMEOUT: "+H})}Fn.prototype.info=function(){};function ni(T,H){if(!T.g)return H;if(!H)return null;try{var K=JSON.parse(H);if(K){for(T=0;T<K.length;T++)if(Array.isArray(K[T])){var de=K[T];if(!(2>de.length)){var Ze=de[1];if(Array.isArray(Ze)&&!(1>Ze.length)){var ft=Ze[0];if(ft!="noop"&&ft!="stop"&&ft!="close")for(var jt=1;jt<Ze.length;jt++)Ze[jt]=""}}}}return et(K)}catch{return H}}var Ii={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},se={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fe;function Re(){}g(Re,Tt),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},fe=new Re;function nt(T,H,K,de){this.j=T,this.i=H,this.l=K,this.R=de||1,this.U=new at(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}var gt={},Ot={};function kt(T,H,K){T.L=1,T.v=Dr(gn(H)),T.m=K,T.P=!0,ae(T,null)}function ae(T,H){T.F=Date.now(),me(T),T.A=gn(T.v);var K=T.A,de=T.R;Array.isArray(de)||(de=[String(de)]),Vs(K.i,"t",de),T.C=0,K=T.j.J,T.h=new mt,T.g=Gu(T.j,K?H:null,!T.m),0<T.O&&(T.M=new Le(d(T.Y,T,T.g),T.O)),H=T.U,K=T.g,de=T.ca;var Ze="readystatechange";Array.isArray(Ze)||(Ze&&(vt[0]=Ze.toString()),Ze=vt);for(var ft=0;ft<Ze.length;ft++){var jt=_e(K,Ze[ft],de||H.handleEvent,!1,H.h||H);if(!jt)break;H.g[jt.key]=jt}H=T.H?I(T.H):{},T.m?(T.u||(T.u="POST"),H["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,H)):(T.u="GET",T.g.ea(T.A,T.u,null,H)),qt(),Or(T.i,T.u,T.A,T.l,T.R,T.m)}nt.prototype.ca=function(T){T=T.target;const H=this.M;H&&jr(T)==3?H.j():this.Y(T)},nt.prototype.Y=function(T){try{if(T==this.g)e:{const Tr=jr(this.g);var H=this.g.Ba();const li=this.g.Z();if(!(3>Tr)&&(Tr!=3||this.g&&(this.h.h||this.g.oa()||_i(this.g)))){this.J||Tr!=4||H==7||(H==8||0>=li?qt(3):qt(2)),st(this);var K=this.g.Z();this.X=K;t:if(Se(this)){var de=_i(this.g);T="";var Ze=de.length,ft=jr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ct(this),dt(this);var jt="";break t}this.h.i=new o.TextDecoder}for(H=0;H<Ze;H++)this.h.h=!0,T+=this.h.i.decode(de[H],{stream:!(ft&&H==Ze-1)});de.length=0,this.h.g+=T,this.C=0,jt=this.h.g}else jt=this.g.oa();if(this.o=K==200,Yn(this.i,this.u,this.A,this.l,this.R,Tr,K),this.o){if(this.T&&!this.K){t:{if(this.g){var pr,Vi=this.g;if((pr=Vi.g?Vi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(pr)){var lr=pr;break t}}lr=null}if(K=lr)sr(this.i,this.l,K,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,It(this,K);else{this.o=!1,this.s=3,ot(12),Ct(this),dt(this);break e}}if(this.P){K=!0;let cr;for(;!this.J&&this.C<jt.length;)if(cr=De(this,jt),cr==Ot){Tr==4&&(this.s=4,ot(14),K=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(cr==gt){this.s=4,ot(15),sr(this.i,this.l,jt,"[Invalid Chunk]"),K=!1;break}else sr(this.i,this.l,cr,null),It(this,cr);if(Se(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tr!=4||jt.length!=0||this.h.h||(this.s=1,ot(16),K=!1),this.o=this.o&&K,!K)sr(this.i,this.l,jt,"[Invalid Chunked Response]"),Ct(this),dt(this);else if(0<jt.length&&!this.W){this.W=!0;var Gi=this.j;Gi.g==this&&Gi.ba&&!Gi.M&&(Gi.j.info("Great, no buffering proxy detected. Bytes received: "+jt.length),qa(Gi),Gi.M=!0,ot(11))}}else sr(this.i,this.l,jt,null),It(this,jt);Tr==4&&Ct(this),this.o&&!this.J&&(Tr==4?zu(this.j,this):(this.o=!1,me(this)))}else Wo(this.g),K==400&&0<jt.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Ct(this),dt(this)}}}catch{}finally{}};function Se(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function De(T,H){var K=T.C,de=H.indexOf(`
`,K);return de==-1?Ot:(K=Number(H.substring(K,de)),isNaN(K)?gt:(de+=1,de+K>H.length?Ot:(H=H.slice(de,de+K),T.C=de+K,H)))}nt.prototype.cancel=function(){this.J=!0,Ct(this)};function me(T){T.S=Date.now()+T.I,Fe(T,T.I)}function Fe(T,H){if(T.B!=null)throw Error("WatchDog timer not null");T.B=nn(d(T.ba,T),H)}function st(T){T.B&&(o.clearTimeout(T.B),T.B=null)}nt.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(xn(this.i,this.A),this.L!=2&&(qt(),ot(17)),Ct(this),this.s=2,dt(this)):Fe(this,this.S-T)};function dt(T){T.j.G==0||T.J||zu(T.j,T)}function Ct(T){st(T);var H=T.M;H&&typeof H.ma=="function"&&H.ma(),T.M=null,qe(T.U),T.g&&(H=T.g,T.g=null,H.abort(),H.ma())}function It(T,H){try{var K=T.j;if(K.G!=0&&(K.g==T||Wt(K.h,T))){if(!T.K&&Wt(K.h,T)&&K.G==3){try{var de=K.Da.g.parse(H)}catch{de=null}if(Array.isArray(de)&&de.length==3){var Ze=de;if(Ze[0]==0){e:if(!K.u){if(K.g)if(K.g.F+3e3<T.F)Zl(K),Ta(K);else break e;ju(K),ot(18)}}else K.za=Ze[1],0<K.za-K.T&&37500>Ze[2]&&K.F&&K.v==0&&!K.C&&(K.C=nn(d(K.Za,K),6e3));if(1>=Jt(K.h)&&K.ca){try{K.ca()}catch{}K.ca=void 0}}else bl(K,11)}else if((T.K||K.g==T)&&Zl(K),!C(H))for(Ze=K.Da.g.parse(H),H=0;H<Ze.length;H++){let lr=Ze[H];if(K.T=lr[0],lr=lr[1],K.G==2)if(lr[0]=="c"){K.K=lr[1],K.ia=lr[2];const Gi=lr[3];Gi!=null&&(K.la=Gi,K.j.info("VER="+K.la));const Tr=lr[4];Tr!=null&&(K.Aa=Tr,K.j.info("SVER="+K.Aa));const li=lr[5];li!=null&&typeof li=="number"&&0<li&&(de=1.5*li,K.L=de,K.j.info("backChannelRequestTimeoutMs_="+de)),de=K;const cr=T.g;if(cr){const Jo=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jo){var ft=de.h;ft.g||Jo.indexOf("spdy")==-1&&Jo.indexOf("quic")==-1&&Jo.indexOf("h2")==-1||(ft.j=ft.l,ft.g=new Set,ft.h&&(Mn(ft,ft.h),ft.h=null))}if(de.D){const Ws=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ws&&(de.ya=Ws,Tn(de.I,de.D,Ws))}}K.G=3,K.l&&K.l.ua(),K.ba&&(K.R=Date.now()-T.F,K.j.info("Handshake RTT: "+K.R+"ms")),de=K;var jt=T;if(de.qa=hd(de,de.J?de.ia:null,de.W),jt.K){sn(de.h,jt);var pr=jt,Vi=de.L;Vi&&(pr.I=Vi),pr.B&&(st(pr),me(pr)),de.g=jt}else ql(de);0<K.i.length&&oi(K)}else lr[0]!="stop"&&lr[0]!="close"||bl(K,7);else K.G==3&&(lr[0]=="stop"||lr[0]=="close"?lr[0]=="stop"?bl(K,7):bi(K):lr[0]!="noop"&&K.l&&K.l.ta(lr),K.v=0)}}qt(4)}catch{}}var Gt=class{constructor(T,H){this.g=T,this.map=H}};function Ut(T){this.l=T||10,o.PerformanceNavigationTiming?(T=o.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Et(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function Jt(T){return T.h?1:T.g?T.g.size:0}function Wt(T,H){return T.h?T.h==H:T.g?T.g.has(H):!1}function Mn(T,H){T.g?T.g.add(H):T.h=H}function sn(T,H){T.h&&T.h==H?T.h=null:T.g&&T.g.has(H)&&T.g.delete(H)}Ut.prototype.cancel=function(){if(this.i=fn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function fn(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let H=T.i;for(const K of T.g.values())H=H.concat(K.D);return H}return _(T.i)}function Qt(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(l(T)){for(var H=[],K=T.length,de=0;de<K;de++)H.push(T[de]);return H}H=[],K=0;for(de in T)H[K++]=T[de];return H}function Bn(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(l(T)||typeof T=="string"){var H=[];T=T.length;for(var K=0;K<T;K++)H.push(K);return H}H=[],K=0;for(const de in T)H[K++]=de;return H}}}function pn(T,H){if(T.forEach&&typeof T.forEach=="function")T.forEach(H,void 0);else if(l(T)||typeof T=="string")Array.prototype.forEach.call(T,H,void 0);else for(var K=Bn(T),de=Qt(T),Ze=de.length,ft=0;ft<Ze;ft++)H.call(void 0,de[ft],K&&K[ft],T)}var In=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ar(T,H){if(T){T=T.split("&");for(var K=0;K<T.length;K++){var de=T[K].indexOf("="),Ze=null;if(0<=de){var ft=T[K].substring(0,de);Ze=T[K].substring(de+1)}else ft=T[K];H(ft,Ze?decodeURIComponent(Ze.replace(/\+/g," ")):"")}}}function An(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof An){this.h=T.h,Sn(this,T.j),this.o=T.o,this.g=T.g,gr(this,T.s),this.l=T.l;var H=T.i,K=new Cs;K.i=H.i,H.g&&(K.g=new Map(H.g),K.h=H.h),qn(this,K),this.m=T.m}else T&&(H=String(T).match(In))?(this.h=!1,Sn(this,H[1]||"",!0),this.o=Un(H[2]||""),this.g=Un(H[3]||"",!0),gr(this,H[4]),this.l=Un(H[5]||"",!0),qn(this,H[6]||"",!0),this.m=Un(H[7]||"")):(this.h=!1,this.i=new Cs(null,this.h))}An.prototype.toString=function(){var T=[],H=this.j;H&&T.push(ai(H,Xl,!0),":");var K=this.g;return(K||H=="file")&&(T.push("//"),(H=this.o)&&T.push(ai(H,Xl,!0),"@"),T.push(encodeURIComponent(String(K)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),K=this.s,K!=null&&T.push(":",String(K))),(K=this.l)&&(this.g&&K.charAt(0)!="/"&&T.push("/"),T.push(ai(K,K.charAt(0)=="/"?wo:eu,!0))),(K=this.i.toString())&&T.push("?",K),(K=this.m)&&T.push("#",ai(K,xa)),T.join("")};function gn(T){return new An(T)}function Sn(T,H,K){T.j=K?Un(H,!0):H,T.j&&(T.j=T.j.replace(/:$/,""))}function gr(T,H){if(H){if(H=Number(H),isNaN(H)||0>H)throw Error("Bad port number "+H);T.s=H}else T.s=null}function qn(T,H,K){H instanceof Cs?(T.i=H,Ca(T.i,T.h)):(K||(H=ai(H,Ql)),T.i=new Cs(H,T.h))}function Tn(T,H,K){T.i.set(H,K)}function Dr(T){return Tn(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function Un(T,H){return T?H?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function ai(T,H,K){return typeof T=="string"?(T=encodeURI(T).replace(H,_l),K&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function _l(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var Xl=/[#\/\?@]/g,eu=/[#\?:]/g,wo=/[#\?]/g,Ql=/[#\?@]/g,xa=/#/g;function Cs(T,H){this.h=this.g=null,this.i=T||null,this.j=!!H}function Kr(T){T.g||(T.g=new Map,T.h=0,T.i&&Ar(T.i,function(H,K){T.add(decodeURIComponent(H.replace(/\+/g," ")),K)}))}r=Cs.prototype,r.add=function(T,H){Kr(this),this.i=null,T=Ms(this,T);var K=this.g.get(T);return K||this.g.set(T,K=[]),K.push(H),this.h+=1,this};function Pn(T,H){Kr(T),H=Ms(T,H),T.g.has(H)&&(T.i=null,T.h-=T.g.get(H).length,T.g.delete(H))}function ra(T,H){return Kr(T),H=Ms(T,H),T.g.has(H)}r.forEach=function(T,H){Kr(this),this.g.forEach(function(K,de){K.forEach(function(Ze){T.call(H,Ze,de,this)},this)},this)},r.na=function(){Kr(this);const T=Array.from(this.g.values()),H=Array.from(this.g.keys()),K=[];for(let de=0;de<H.length;de++){const Ze=T[de];for(let ft=0;ft<Ze.length;ft++)K.push(H[de])}return K},r.V=function(T){Kr(this);let H=[];if(typeof T=="string")ra(this,T)&&(H=H.concat(this.g.get(Ms(this,T))));else{T=Array.from(this.g.values());for(let K=0;K<T.length;K++)H=H.concat(T[K])}return H},r.set=function(T,H){return Kr(this),this.i=null,T=Ms(this,T),ra(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[H]),this.h+=1,this},r.get=function(T,H){return T?(T=this.V(T),0<T.length?String(T[0]):H):H};function Vs(T,H,K){Pn(T,H),0<K.length&&(T.i=null,T.g.set(Ms(T,H),_(K)),T.h+=K.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],H=Array.from(this.g.keys());for(var K=0;K<H.length;K++){var de=H[K];const ft=encodeURIComponent(String(de)),jt=this.V(de);for(de=0;de<jt.length;de++){var Ze=ft;jt[de]!==""&&(Ze+="="+encodeURIComponent(String(jt[de]))),T.push(Ze)}}return this.i=T.join("&")};function Ms(T,H){return H=String(H),T.j&&(H=H.toLowerCase()),H}function Ca(T,H){H&&!T.j&&(Kr(T),T.i=null,T.g.forEach(function(K,de){var Ze=de.toLowerCase();de!=Ze&&(Pn(this,de),Vs(this,Ze,K))},T)),T.j=H}function fd(T,H){const K=new Fn;if(o.Image){const de=new Image;de.onload=p(ji,K,"TestLoadImage: loaded",!0,H,de),de.onerror=p(ji,K,"TestLoadImage: error",!1,H,de),de.onabort=p(ji,K,"TestLoadImage: abort",!1,H,de),de.ontimeout=p(ji,K,"TestLoadImage: timeout",!1,H,de),o.setTimeout(function(){de.ontimeout&&de.ontimeout()},1e4),de.src=T}else H(!1)}function qr(T,H){const K=new Fn,de=new AbortController,Ze=setTimeout(()=>{de.abort(),ji(K,"TestPingServer: timeout",!1,H)},1e4);fetch(T,{signal:de.signal}).then(ft=>{clearTimeout(Ze),ft.ok?ji(K,"TestPingServer: ok",!0,H):ji(K,"TestPingServer: server error",!1,H)}).catch(()=>{clearTimeout(Ze),ji(K,"TestPingServer: error",!1,H)})}function ji(T,H,K,de,Ze){try{Ze&&(Ze.onload=null,Ze.onerror=null,Ze.onabort=null,Ze.ontimeout=null),de(K)}catch{}}function dd(){this.g=new tt}function us(T,H,K){const de=K||"";try{pn(T,function(Ze,ft){let jt=Ze;c(Ze)&&(jt=et(Ze)),H.push(de+ft+"="+encodeURIComponent(jt))})}catch(Ze){throw H.push(de+"type="+encodeURIComponent("_badmap")),Ze}}function Qa(T){this.l=T.Ub||null,this.j=T.eb||!1}g(Qa,Tt),Qa.prototype.g=function(){return new Ka(this.l,this.j)},Qa.prototype.i=function(T){return function(){return T}}({});function Ka(T,H){Je.call(this),this.D=T,this.o=H,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Ka,Je),r=Ka.prototype,r.open=function(T,H){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=H,this.readyState=1,Ma(this)},r.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const H={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(H.body=T),(this.D||o).fetch(new Request(this.A,H)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ia(this)),this.readyState=0},r.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Ma(this)),this.g&&(this.readyState=3,Ma(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gs(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gs(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}r.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var H=T.value?T.value:new Uint8Array(0);(H=this.v.decode(H,{stream:!T.done}))&&(this.response=this.responseText+=H)}T.done?ia(this):Ma(this),this.readyState==3&&Gs(this)}},r.Ra=function(T){this.g&&(this.response=this.responseText=T,ia(this))},r.Qa=function(T){this.g&&(this.response=T,ia(this))},r.ga=function(){this.g&&ia(this)};function ia(T){T.readyState=4,T.l=null,T.j=null,T.v=null,Ma(T)}r.setRequestHeader=function(T,H){this.u.append(T,H)},r.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],H=this.h.entries();for(var K=H.next();!K.done;)K=K.value,T.push(K[0]+": "+K[1]),K=H.next();return T.join(`\r
`)};function Ma(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(Ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function Li(T){let H="";return O(T,function(K,de){H+=de,H+=":",H+=K,H+=`\r
`}),H}function wi(T,H,K){e:{for(de in K){var de=!1;break e}de=!0}de||(K=Li(K),typeof T=="string"?K!=null&&encodeURIComponent(String(K)):Tn(T,H,K))}function Sr(T){Je.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Sr,Je);var Aa=/^https?$/i,Kl=["POST","PUT"];r=Sr.prototype,r.Ha=function(T){this.J=T},r.ea=function(T,H,K,de){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);H=H?H.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fe.g(),this.v=this.o?Ae(this.o):Ae(fe),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(H,String(T),!0),this.B=!1}catch(ft){Go(this,ft);return}if(T=K||"",K=new Map(this.headers),de)if(Object.getPrototypeOf(de)===Object.prototype)for(var Ze in de)K.set(Ze,de[Ze]);else if(typeof de.keys=="function"&&typeof de.get=="function")for(const ft of de.keys())K.set(ft,de.get(ft));else throw Error("Unknown input type for opt_headers: "+String(de));de=Array.from(K.keys()).find(ft=>ft.toLowerCase()=="content-type"),Ze=o.FormData&&T instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Kl,H,void 0))||de||Ze||K.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ft,jt]of K)this.g.setRequestHeader(ft,jt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_o(this),this.u=!0,this.g.send(T),this.u=!1}catch(ft){Go(this,ft)}};function Go(T,H){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=H,T.m=5,qi(T),Zi(T)}function qi(T){T.A||(T.A=!0,$e(T,"complete"),$e(T,"error"))}r.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,$e(this,"complete"),$e(this,"abort"),Zi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zi(this,!0)),Sr.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ho(this):this.bb())},r.bb=function(){Ho(this)};function Ho(T){if(T.h&&typeof a<"u"&&(!T.v[1]||jr(T)!=4||T.Z()!=2)){if(T.u&&jr(T)==4)pt(T.Ea,0,T);else if($e(T,"readystatechange"),jr(T)==4){T.h=!1;try{const jt=T.Z();e:switch(jt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var H=!0;break e;default:H=!1}var K;if(!(K=H)){var de;if(de=jt===0){var Ze=String(T.D).match(In)[1]||null;!Ze&&o.self&&o.self.location&&(Ze=o.self.location.protocol.slice(0,-1)),de=!Aa.test(Ze?Ze.toLowerCase():"")}K=de}if(K)$e(T,"complete"),$e(T,"success");else{T.m=6;try{var ft=2<jr(T)?T.g.statusText:""}catch{ft=""}T.l=ft+" ["+T.Z()+"]",qi(T)}}finally{Zi(T)}}}}function Zi(T,H){if(T.g){_o(T);const K=T.g,de=T.v[0]?()=>{}:null;T.g=null,T.v=null,H||$e(T,"ready");try{K.onreadystatechange=de}catch{}}}function _o(T){T.I&&(o.clearTimeout(T.I),T.I=null)}r.isActive=function(){return!!this.g};function jr(T){return T.g?T.g.readyState:0}r.Z=function(){try{return 2<jr(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(T){if(this.g){var H=this.g.responseText;return T&&H.indexOf(T)==0&&(H=H.substring(T.length)),Me(H)}};function _i(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function Wo(T){const H={};T=(T.g&&2<=jr(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let de=0;de<T.length;de++){if(C(T[de]))continue;var K=B(T[de]);const Ze=K[0];if(K=K[1],typeof K!="string")continue;K=K.trim();const ft=H[Ze]||[];H[Ze]=ft,ft.push(K)}R(H,function(de){return de.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zi(T,H,K){return K&&K.internalChannelParams&&K.internalChannelParams[T]||H}function bo(T){this.Aa=0,this.i=[],this.j=new Fn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zi("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zi("baseRetryDelayMs",5e3,T),this.cb=zi("retryDelaySeedMs",1e4,T),this.Wa=zi("forwardChannelMaxRetries",2,T),this.wa=zi("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Ut(T&&T.concurrentRequestLimit),this.Da=new dd,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=bo.prototype,r.la=8,r.G=1,r.connect=function(T,H,K,de){ot(0),this.W=T,this.H=H||{},K&&de!==void 0&&(this.H.OSID=K,this.H.OAID=de),this.F=this.X,this.I=hd(this,null,this.W),oi(this)};function bi(T){if(hi(T),T.G==3){var H=T.U++,K=gn(T.I);if(Tn(K,"SID",T.K),Tn(K,"RID",H),Tn(K,"TYPE","terminate"),Ni(T,K),H=new nt(T,T.j,H),H.L=2,H.v=Dr(gn(K)),K=!1,o.navigator&&o.navigator.sendBeacon)try{K=o.navigator.sendBeacon(H.v.toString(),"")}catch{}!K&&o.Image&&(new Image().src=H.v,K=!0),K||(H.g=Gu(H.j,null),H.g.ea(H.v)),H.F=Date.now(),me(H)}tp(T)}function Ta(T){T.g&&(qa(T),T.g.cancel(),T.g=null)}function hi(T){Ta(T),T.u&&(o.clearTimeout(T.u),T.u=null),Zl(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&o.clearTimeout(T.s),T.s=null)}function oi(T){if(!Et(T.h)&&!T.s){T.s=!0;var H=T.Ga;ue||q(),ne||(ue(),ne=!0),oe.add(H,T),T.B=0}}function pi(T,H){return Jt(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=H.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=nn(d(T.Ga,T,H),Vu(T,T.B)),T.B++,!0)}r.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const Ze=new nt(this,this.j,T);let ft=this.o;if(this.S&&(ft?(ft=I(ft),E(ft,this.S)):ft=this.S),this.m!==null||this.O||(Ze.H=ft,ft=null),this.P)e:{for(var H=0,K=0;K<this.i.length;K++){t:{var de=this.i[K];if("__data__"in de.map&&(de=de.map.__data__,typeof de=="string")){de=de.length;break t}de=void 0}if(de===void 0)break;if(H+=de,4096<H){H=K;break e}if(H===4096||K===this.i.length-1){H=K+1;break e}}H=1e3}else H=1e3;H=sa(this,Ze,H),K=gn(this.I),Tn(K,"RID",T),Tn(K,"CVER",22),this.D&&Tn(K,"X-HTTP-Session-Id",this.D),Ni(this,K),ft&&(this.O?H="headers="+encodeURIComponent(String(Li(ft)))+"&"+H:this.m&&wi(K,this.m,ft)),Mn(this.h,Ze),this.Ua&&Tn(K,"TYPE","init"),this.P?(Tn(K,"$req",H),Tn(K,"SID","null"),Ze.T=!0,kt(Ze,K,null)):kt(Ze,K,H),this.G=2}}else this.G==3&&(T?Zr(this,T):this.i.length==0||Et(this.h)||Zr(this))};function Zr(T,H){var K;H?K=H.l:K=T.U++;const de=gn(T.I);Tn(de,"SID",T.K),Tn(de,"RID",K),Tn(de,"AID",T.T),Ni(T,de),T.m&&T.o&&wi(de,T.m,T.o),K=new nt(T,T.j,K,T.B+1),T.m===null&&(K.H=T.o),H&&(T.i=H.D.concat(T.i)),H=sa(T,K,1e3),K.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),Mn(T.h,K),kt(K,de,H)}function Ni(T,H){T.H&&O(T.H,function(K,de){Tn(H,de,K)}),T.l&&pn({},function(K,de){Tn(H,de,K)})}function sa(T,H,K){K=Math.min(T.i.length,K);var de=T.l?d(T.l.Na,T.l,T):null;e:{var Ze=T.i;let ft=-1;for(;;){const jt=["count="+K];ft==-1?0<K?(ft=Ze[0].g,jt.push("ofs="+ft)):ft=0:jt.push("ofs="+ft);let pr=!0;for(let Vi=0;Vi<K;Vi++){let lr=Ze[Vi].g;const Gi=Ze[Vi].map;if(lr-=ft,0>lr)ft=Math.max(0,Ze[Vi].g-100),pr=!1;else try{us(Gi,jt,"req"+lr+"_")}catch{de&&de(Gi)}}if(pr){de=jt.join("&");break e}}}return T=T.i.splice(0,K),H.D=T,de}function ql(T){if(!T.g&&!T.u){T.Y=1;var H=T.Fa;ue||q(),ne||(ue(),ne=!0),oe.add(H,T),T.v=0}}function ju(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=nn(d(T.Fa,T),Vu(T,T.v)),T.v++,!0)}r.Fa=function(){if(this.u=null,Yo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=nn(d(this.ab,this),T)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Ta(this),Yo(this))};function qa(T){T.A!=null&&(o.clearTimeout(T.A),T.A=null)}function Yo(T){T.g=new nt(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var H=gn(T.qa);Tn(H,"RID","rpc"),Tn(H,"SID",T.K),Tn(H,"AID",T.T),Tn(H,"CI",T.F?"0":"1"),!T.F&&T.ja&&Tn(H,"TO",T.ja),Tn(H,"TYPE","xmlhttp"),Ni(T,H),T.m&&T.o&&wi(H,T.m,T.o),T.L&&(T.g.I=T.L);var K=T.g;T=T.ia,K.L=1,K.v=Dr(gn(H)),K.m=null,K.P=!0,ae(K,T)}r.Za=function(){this.C!=null&&(this.C=null,Ta(this),ju(this),ot(19))};function Zl(T){T.C!=null&&(o.clearTimeout(T.C),T.C=null)}function zu(T,H){var K=null;if(T.g==H){Zl(T),qa(T),T.g=null;var de=2}else if(Wt(T.h,H))K=H.D,sn(T.h,H),de=1;else return;if(T.G!=0){if(H.o)if(de==1){K=H.m?H.m.length:0,H=Date.now()-H.F;var Ze=T.B;de=on(),$e(de,new Dt(de,K)),oi(T)}else ql(T);else if(Ze=H.s,Ze==3||Ze==0&&0<H.X||!(de==1&&pi(T,H)||de==2&&ju(T)))switch(K&&0<K.length&&(H=T.h,H.i=H.i.concat(K)),Ze){case 1:bl(T,5);break;case 4:bl(T,10);break;case 3:bl(T,6);break;default:bl(T,2)}}}function Vu(T,H){let K=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(K*=2),K*H}function bl(T,H){if(T.j.info("Error code "+H),H==2){var K=d(T.fb,T),de=T.Xa;const Ze=!de;de=new An(de||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Sn(de,"https"),Dr(de),Ze?fd(de.toString(),K):qr(de.toString(),K)}else ot(2);T.G=0,T.l&&T.l.sa(H),tp(T),hi(T)}r.fb=function(T){T?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function tp(T){if(T.G=0,T.ka=[],T.l){const H=fn(T.h);(H.length!=0||T.i.length!=0)&&(w(T.ka,H),w(T.ka,T.i),T.h.i.length=0,_(T.i),T.i.length=0),T.l.ra()}}function hd(T,H,K){var de=K instanceof An?gn(K):new An(K);if(de.g!="")H&&(de.g=H+"."+de.g),gr(de,de.s);else{var Ze=o.location;de=Ze.protocol,H=H?H+"."+Ze.hostname:Ze.hostname,Ze=+Ze.port;var ft=new An(null);de&&Sn(ft,de),H&&(ft.g=H),Ze&&gr(ft,Ze),K&&(ft.l=K),de=ft}return K=T.D,H=T.ya,K&&H&&Tn(de,K,H),Tn(de,"VER",T.la),Ni(T,de),de}function Gu(T,H,K){if(H&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return H=T.Ca&&!T.pa?new Sr(new Qa({eb:K})):new Sr(T.pa),H.Ha(T.J),H}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function pd(){}r=pd.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Hu(){}Hu.prototype.g=function(T,H){return new Hs(T,H)};function Hs(T,H){Je.call(this),this.g=new bo(H),this.l=T,this.h=H&&H.messageUrlParams||null,T=H&&H.messageHeaders||null,H&&H.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=H&&H.initMessageHeaders||null,H&&H.messageContentType&&(T?T["X-WebChannel-Content-Type"]=H.messageContentType:T={"X-WebChannel-Content-Type":H.messageContentType}),H&&H.va&&(T?T["X-WebChannel-Client-Profile"]=H.va:T={"X-WebChannel-Client-Profile":H.va}),this.g.S=T,(T=H&&H.Sb)&&!C(T)&&(this.g.m=T),this.v=H&&H.supportsCrossDomainXhr||!1,this.u=H&&H.sendRawJson||!1,(H=H&&H.httpSessionIdParam)&&!C(H)&&(this.g.D=H,T=this.h,T!==null&&H in T&&(T=this.h,H in T&&delete T[H])),this.j=new aa(this)}g(Hs,Je),Hs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hs.prototype.close=function(){bi(this.g)},Hs.prototype.o=function(T){var H=this.g;if(typeof T=="string"){var K={};K.__data__=T,T=K}else this.u&&(K={},K.__data__=et(T),T=K);H.i.push(new Gt(H.Ya++,T)),H.G==3&&oi(H)},Hs.prototype.N=function(){this.g.l=null,delete this.j,bi(this.g),delete this.g,Hs.aa.N.call(this)};function md(T){yt.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var H=T.__sm__;if(H){e:{for(const K in H){T=K;break e}T=void 0}(this.i=T)&&(T=this.i,H=H!==null&&T in H?H[T]:void 0),this.data=H}else this.data=T}g(md,yt);function $l(){Lt.call(this),this.status=1}g($l,Lt);function aa(T){this.g=T}g(aa,pd),aa.prototype.ua=function(){$e(this.g,"a")},aa.prototype.ta=function(T){$e(this.g,new md(T))},aa.prototype.sa=function(T){$e(this.g,new $l)},aa.prototype.ra=function(){$e(this.g,"b")},Hu.prototype.createWebChannel=Hu.prototype.g,Hs.prototype.send=Hs.prototype.o,Hs.prototype.open=Hs.prototype.m,Hs.prototype.close=Hs.prototype.close,fG=function(){return new Hu},uG=function(){return on()},cG=xt,CL={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ii.NO_ERROR=0,Ii.TIMEOUT=8,Ii.HTTP_ERROR=6,mx=Ii,se.COMPLETE="complete",lG=se,Oe.EventType=Ye,Ye.OPEN="a",Ye.CLOSE="b",Ye.ERROR="c",Ye.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Yy=Oe,Sr.prototype.listenOnce=Sr.prototype.L,Sr.prototype.getLastError=Sr.prototype.Ka,Sr.prototype.getLastErrorCode=Sr.prototype.Ba,Sr.prototype.getStatus=Sr.prototype.Z,Sr.prototype.getResponseJson=Sr.prototype.Oa,Sr.prototype.getResponseText=Sr.prototype.oa,Sr.prototype.send=Sr.prototype.ea,Sr.prototype.setWithCredentials=Sr.prototype.Ha,oG=Sr}).apply(typeof v2<"u"?v2:typeof self<"u"?self:typeof window<"u"?window:{});const lF="@firebase/firestore",cF="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ua.UNAUTHENTICATED=new Ua(null),Ua.GOOGLE_CREDENTIALS=new Ua("google-credentials-uid"),Ua.FIRST_PARTY=new Ua("first-party-uid"),Ua.MOCK_USER=new Ua("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cv="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=new sD("@firebase/firestore");function I0(){return zm.logLevel}function un(r,...e){if(zm.logLevel<=yr.DEBUG){const t=e.map(vD);zm.debug(`Firestore (${cv}): ${r}`,...t)}}function Kf(r,...e){if(zm.logLevel<=yr.ERROR){const t=e.map(vD);zm.error(`Firestore (${cv}): ${r}`,...t)}}function T1(r,...e){if(zm.logLevel<=yr.WARN){const t=e.map(vD);zm.warn(`Firestore (${cv}): ${r}`,...t)}}function vD(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(r="Unexpected state"){const e=`FIRESTORE (${cv}) INTERNAL ASSERTION FAILED: `+r;throw Kf(e),new Error(e)}function Wr(r,e){r||jn()}function Kn(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tn extends od{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ua.UNAUTHENTICATED))}shutdown(){}}class lce{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cce{constructor(e){this.t=e,this.currentUser=Ua.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Wr(this.o===void 0);let n=this.i;const i=l=>this.i!==n?(n=this.i,t(l)):Promise.resolve();let s=new jf;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jf,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{un("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(un("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jf)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(un("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Wr(typeof n.accessToken=="string"),new dG(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Wr(e===null||typeof e=="string"),new Ua(e)}}class uce{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ua.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class fce{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new uce(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ua.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dce{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Fl(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Wr(this.o===void 0);const n=s=>{s.error!=null&&un("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,un("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{un("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):un("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new uF(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Wr(typeof t.token=="string"),this.R=t.token,new uF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hce(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hG(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=hce(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%62))}return n}}function ar(r,e){return r<e?-1:r>e?1:0}function ML(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),i=e.codePointAt(t);if(n!==i){if(n<128&&i<128)return ar(n,i);{const s=hG(),a=pce(s.encode(fF(r,t)),s.encode(fF(e,t)));return a!==0?a:ar(n,i)}}t+=n>65535?2:1}return ar(r.length,e.length)}function fF(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function pce(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return ar(r[t],e[t]);return ar(r.length,e.length)}function E1(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=-62135596800,hF=1e6;class Rs{static now(){return Rs.fromMillis(Date.now())}static fromDate(e){return Rs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*hF);return new Rs(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new tn(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new tn(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<dF)throw new tn(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tn(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hF}_compareTo(e){return this.seconds===e.seconds?ar(this.nanoseconds,e.nanoseconds):ar(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-dF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{static fromTimestamp(e){return new Wn(e)}static min(){return new Wn(new Rs(0,0))}static max(){return new Wn(new Rs(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="__name__";class hu{constructor(e,t,n){t===void 0?t=0:t>e.length&&jn(),n===void 0?n=e.length-t:n>e.length-t&&jn(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return hu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hu?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=hu.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return ar(e.length,t.length)}static compareSegments(e,t){const n=hu.isNumericId(e),i=hu.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?hu.extractNumericId(e).compare(hu.extractNumericId(t)):ML(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yh.fromString(e.substring(4,e.length-2))}}class fi extends hu{construct(e,t,n){return new fi(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new tn(At.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new fi(t)}static emptyPath(){return new fi([])}}const mce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ya extends hu{construct(e,t,n){return new ya(e,t,n)}static isValidIdentifier(e){return mce.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ya.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pF}static keyField(){return new ya([pF])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(n.length===0)throw new tn(At.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new tn(At.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new tn(At.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new tn(At.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ya(t)}static emptyPath(){return new ya([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.path=e}static fromPath(e){return new En(fi.fromString(e))}static fromName(e){return new En(fi.fromString(e).popFirst(5))}static empty(){return new En(fi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return fi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new En(new fi(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=-1;function gce(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Wn.fromTimestamp(n===1e9?new Rs(t+1,0):new Rs(t,n));return new xh(i,En.empty(),e)}function vce(r){return new xh(r.readTime,r.key,Vw)}class xh{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new xh(Wn.min(),En.empty(),Vw)}static max(){return new xh(Wn.max(),En.empty(),Vw)}}function yce(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=En.comparator(r.documentKey,e.documentKey),t!==0?t:ar(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _ce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uv(r){if(r.code!==At.FAILED_PRECONDITION||r.message!==wce)throw r;un("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&jn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Nt((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Nt?t:Nt.resolve(t)}catch(t){return Nt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Nt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Nt.reject(t)}static resolve(e){return new Nt((t,n)=>{t(e)})}static reject(e){return new Nt((t,n)=>{n(e)})}static waitFor(e){return new Nt((t,n)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&t()},l=>n(l))}),a=!0,s===i&&t()})}static or(e){let t=Nt.resolve(!1);for(const n of e)t=t.next(i=>i?Nt.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,s)=>{n.push(t.call(this,i,s))}),this.waitFor(n)}static mapArray(e,t){return new Nt((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{a[c]=u,++o,o===s&&n(a)},u=>i(u))}})}static doWhile(e,t){return new Nt((n,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):n()};s()})}}function bce(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fv(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.oe(n),this._e=n=>t.writeSequenceNumber(n))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}ZM.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=-1;function $M(r){return r==null}function rC(r){return r===0&&1/r==-1/0}function Sce(r){return typeof r=="number"&&Number.isInteger(r)&&!rC(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mG="";function xce(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=mF(e)),e=Cce(r.get(t),e);return mF(e)}function Cce(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="";break;case mG:t+="";break;default:t+=s}}return t}function mF(r){return r+mG+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Hh(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function gG(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t){this.comparator=e,this.root=t||ga.EMPTY}insert(e,t){return new Ui(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ga.BLACK,null,null))}remove(e){return new Ui(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ga.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new y2(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new y2(this.root,e,this.comparator,!1)}getReverseIterator(){return new y2(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new y2(this.root,e,this.comparator,!0)}}class y2{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ga{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=n??ga.RED,this.left=i??ga.EMPTY,this.right=s??ga.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new ga(e??this.key,t??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ga.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ga.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ga.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ga.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw jn();const e=this.left.check();if(e!==this.right.check())throw jn();return e+(this.isRed()?0:1)}}ga.EMPTY=null,ga.RED=!0,ga.BLACK=!1;ga.EMPTY=new class{constructor(){this.size=0}get key(){throw jn()}get value(){throw jn()}get color(){throw jn()}get left(){throw jn()}get right(){throw jn()}copy(e,t,n,i,s){return this}insert(e,t,n){return new ga(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.comparator=e,this.data=new Ui(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vF(this.data.getIterator())}getIteratorFrom(e){return new vF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Ps)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ps(this.comparator);return t.data=e,t}}class vF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.fields=e,e.sort(ya.comparator)}static empty(){return new cl([])}unionWith(e){let t=new Ps(ya.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new cl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return E1(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vG("Invalid base64 string: "+s):s}}(e);return new ba(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new ba(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ar(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ba.EMPTY_BYTE_STRING=new ba("");const Mce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ch(r){if(Wr(!!r),typeof r=="string"){let e=0;const t=Mce.exec(r);if(Wr(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:is(r.seconds),nanos:is(r.nanos)}}function is(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Mh(r){return typeof r=="string"?ba.fromBase64String(r):ba.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yG="server_timestamp",wG="__type__",_G="__previous_value__",bG="__local_write_time__";function eA(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[wG])===null||t===void 0?void 0:t.stringValue)===yG}function tA(r){const e=r.mapValue.fields[_G];return eA(e)?tA(e):e}function Gw(r){const e=Ch(r.mapValue.fields[bG].timestampValue);return new Rs(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ace{constructor(e,t,n,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}const iC="(default)";class Hw{constructor(e,t){this.projectId=e,this.database=t||iC}static empty(){return new Hw("","")}get isDefaultDatabase(){return this.database===iC}isEqual(e){return e instanceof Hw&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SG="__type__",Tce="__max__",w2={mapValue:{}},xG="__vector__",sC="value";function Ah(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?eA(r)?4:Ice(r)?9007199254740991:Ece(r)?10:11:jn()}function Du(r,e){if(r===e)return!0;const t=Ah(r);if(t!==Ah(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Gw(r).isEqual(Gw(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Ch(i.timestampValue),o=Ch(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,s){return Mh(i.bytesValue).isEqual(Mh(s.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,s){return is(i.geoPointValue.latitude)===is(s.geoPointValue.latitude)&&is(i.geoPointValue.longitude)===is(s.geoPointValue.longitude)}(r,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return is(i.integerValue)===is(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=is(i.doubleValue),o=is(s.doubleValue);return a===o?rC(a)===rC(o):isNaN(a)&&isNaN(o)}return!1}(r,e);case 9:return E1(r.arrayValue.values||[],e.arrayValue.values||[],Du);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(gF(a)!==gF(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Du(a[l],o[l])))return!1;return!0}(r,e);default:return jn()}}function Ww(r,e){return(r.values||[]).find(t=>Du(t,e))!==void 0}function I1(r,e){if(r===e)return 0;const t=Ah(r),n=Ah(e);if(t!==n)return ar(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return ar(r.booleanValue,e.booleanValue);case 2:return function(s,a){const o=is(s.integerValue||s.doubleValue),l=is(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(r,e);case 3:return yF(r.timestampValue,e.timestampValue);case 4:return yF(Gw(r),Gw(e));case 5:return ML(r.stringValue,e.stringValue);case 6:return function(s,a){const o=Mh(s),l=Mh(a);return o.compareTo(l)}(r.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=ar(o[c],l[c]);if(u!==0)return u}return ar(o.length,l.length)}(r.referenceValue,e.referenceValue);case 8:return function(s,a){const o=ar(is(s.latitude),is(a.latitude));return o!==0?o:ar(is(s.longitude),is(a.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return wF(r.arrayValue,e.arrayValue);case 10:return function(s,a){var o,l,c,u;const f=s.fields||{},d=a.fields||{},p=(o=f[sC])===null||o===void 0?void 0:o.arrayValue,g=(l=d[sC])===null||l===void 0?void 0:l.arrayValue,_=ar(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:wF(p,g)}(r.mapValue,e.mapValue);case 11:return function(s,a){if(s===w2.mapValue&&a===w2.mapValue)return 0;if(s===w2.mapValue)return 1;if(a===w2.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const d=ML(l[f],u[f]);if(d!==0)return d;const p=I1(o[l[f]],c[u[f]]);if(p!==0)return p}return ar(l.length,u.length)}(r.mapValue,e.mapValue);default:throw jn()}}function yF(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ar(r,e);const t=Ch(r),n=Ch(e),i=ar(t.seconds,n.seconds);return i!==0?i:ar(t.nanos,n.nanos)}function wF(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const s=I1(t[i],n[i]);if(s)return s}return ar(t.length,n.length)}function L1(r){return AL(r)}function AL(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=Ch(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Mh(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return En.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const s of t.values||[])i?i=!1:n+=",",n+=AL(s);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${AL(t.fields[a])}`;return i+"}"}(r.mapValue):jn()}function gx(r){switch(Ah(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tA(r);return e?16+gx(e):16;case 5:return 2*r.stringValue.length;case 6:return Mh(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,s)=>i+gx(s),0)}(r.arrayValue);case 10:case 11:return function(n){let i=0;return Hh(n.fields,(s,a)=>{i+=s.length+gx(a)}),i}(r.mapValue);default:throw jn()}}function aC(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function TL(r){return!!r&&"integerValue"in r}function wD(r){return!!r&&"arrayValue"in r}function _F(r){return!!r&&"nullValue"in r}function bF(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function vx(r){return!!r&&"mapValue"in r}function Ece(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[SG])===null||t===void 0?void 0:t.stringValue)===xG}function cw(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Hh(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=cw(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cw(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Ice(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Tce}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.value=e}static empty(){return new ko({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!vx(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cw(t)}setAll(e){let t=ya.emptyPath(),n={},i=[];e.forEach((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,n,i),n={},i=[],t=o.popLast()}a?n[o.lastSegment()]=cw(a):i.push(o.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());vx(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Du(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];vx(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Hh(t,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new ko(cw(this.value))}}function CG(r){const e=[];return Hh(r.fields,(t,n)=>{const i=new ya([t]);if(vx(n)){const s=CG(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new cl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,t,n,i,s,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new ja(e,0,Wn.min(),Wn.min(),Wn.min(),ko.empty(),0)}static newFoundDocument(e,t,n,i){return new ja(e,1,t,Wn.min(),n,i,0)}static newNoDocument(e,t){return new ja(e,2,t,Wn.min(),Wn.min(),ko.empty(),0)}static newUnknownDocument(e,t){return new ja(e,3,t,Wn.min(),Wn.min(),ko.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Wn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ko.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ko.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ja&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ja(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,t){this.position=e,this.inclusive=t}}function SF(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],a=r.position[i];if(s.field.isKeyField()?n=En.comparator(En.fromName(a.referenceValue),t.key):n=I1(a,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function xF(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Du(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,t="asc"){this.field=e,this.dir=t}}function Lce(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{}class _s extends MG{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new Dce(e,t,n):t==="array-contains"?new Pce(e,n):t==="in"?new Oce(e,n):t==="not-in"?new Fce(e,n):t==="array-contains-any"?new Bce(e,n):new _s(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new kce(e,n):new Rce(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(I1(t,this.value)):t!==null&&Ah(this.value)===Ah(t)&&this.matchesComparison(I1(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return jn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vc extends MG{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Vc(e,t)}matches(e){return AG(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function AG(r){return r.op==="and"}function TG(r){return Nce(r)&&AG(r)}function Nce(r){for(const e of r.filters)if(e instanceof Vc)return!1;return!0}function EL(r){if(r instanceof _s)return r.field.canonicalString()+r.op.toString()+L1(r.value);if(TG(r))return r.filters.map(e=>EL(e)).join(",");{const e=r.filters.map(t=>EL(t)).join(",");return`${r.op}(${e})`}}function EG(r,e){return r instanceof _s?function(n,i){return i instanceof _s&&n.op===i.op&&n.field.isEqual(i.field)&&Du(n.value,i.value)}(r,e):r instanceof Vc?function(n,i){return i instanceof Vc&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,a,o)=>s&&EG(a,i.filters[o]),!0):!1}(r,e):void jn()}function IG(r){return r instanceof _s?function(t){return`${t.field.canonicalString()} ${t.op} ${L1(t.value)}`}(r):r instanceof Vc?function(t){return t.op.toString()+" {"+t.getFilters().map(IG).join(" ,")+"}"}(r):"Filter"}class Dce extends _s{constructor(e,t,n){super(e,t,n),this.key=En.fromName(n.referenceValue)}matches(e){const t=En.comparator(e.key,this.key);return this.matchesComparison(t)}}class kce extends _s{constructor(e,t){super(e,"in",t),this.keys=LG("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Rce extends _s{constructor(e,t){super(e,"not-in",t),this.keys=LG("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function LG(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>En.fromName(n.referenceValue))}class Pce extends _s{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wD(t)&&Ww(t.arrayValue,this.value)}}class Oce extends _s{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ww(this.value.arrayValue,t)}}class Fce extends _s{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ww(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ww(this.value.arrayValue,t)}}class Bce extends _s{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Ww(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uce{constructor(e,t=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.le=null}}function CF(r,e=null,t=[],n=[],i=null,s=null,a=null){return new Uce(r,e,t,n,i,s,a)}function _D(r){const e=Kn(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>EL(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),$M(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>L1(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>L1(n)).join(",")),e.le=t}return e.le}function bD(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Lce(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!EG(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!xF(r.startAt,e.startAt)&&xF(r.endAt,e.endAt)}function IL(r){return En.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t=null,n=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function jce(r,e,t,n,i,s,a,o){return new Wh(r,e,t,n,i,s,a,o)}function nA(r){return new Wh(r)}function MF(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function SD(r){return r.collectionGroup!==null}function r1(r){const e=Kn(r);if(e.he===null){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Ps(ya.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new Yw(s,n))}),t.has(ya.keyField().canonicalString())||e.he.push(new Yw(ya.keyField(),n))}return e.he}function Cu(r){const e=Kn(r);return e.Pe||(e.Pe=zce(e,r1(r))),e.Pe}function zce(r,e){if(r.limitType==="F")return CF(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Yw(i.field,s)});const t=r.endAt?new N1(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new N1(r.startAt.position,r.startAt.inclusive):null;return CF(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function LL(r,e){const t=r.filters.concat([e]);return new Wh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function oC(r,e,t){return new Wh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function rA(r,e){return bD(Cu(r),Cu(e))&&r.limitType===e.limitType}function NG(r){return`${_D(Cu(r))}|lt:${r.limitType}`}function L0(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>IG(i)).join(", ")}]`),$M(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>L1(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>L1(i)).join(",")),`Target(${n})`}(Cu(r))}; limitType=${r.limitType})`}function iA(r,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):En.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(r,e)&&function(n,i){for(const s of r1(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(a,o,l){const c=SF(a,o,l);return a.inclusive?c<=0:c<0}(n.startAt,r1(n),i)||n.endAt&&!function(a,o,l){const c=SF(a,o,l);return a.inclusive?c>=0:c>0}(n.endAt,r1(n),i))}(r,e)}function Vce(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function DG(r){return(e,t)=>{let n=!1;for(const i of r1(r)){const s=Gce(i,e,t);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function Gce(r,e,t){const n=r.field.isKeyField()?En.comparator(e.key,t.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?I1(l,c):jn()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return jn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hh(this.inner,(t,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return gG(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hce=new Ui(En.comparator);function qf(){return Hce}const kG=new Ui(En.comparator);function Jy(...r){let e=kG;for(const t of r)e=e.insert(t.key,t);return e}function RG(r){let e=kG;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function hm(){return uw()}function PG(){return uw()}function uw(){return new ag(r=>r.toString(),(r,e)=>r.isEqual(e))}const Wce=new Ui(En.comparator),Yce=new Ps(En.comparator);function _r(...r){let e=Yce;for(const t of r)e=e.add(t);return e}const Jce=new Ps(ar);function Xce(){return Jce}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rC(e)?"-0":e}}function OG(r){return{integerValue:""+r}}function Qce(r,e){return Sce(e)?OG(e):xD(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this._=void 0}}function Kce(r,e,t){return r instanceof Jw?function(i,s){const a={fields:{[wG]:{stringValue:yG},[bG]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&eA(s)&&(s=tA(s)),s&&(a.fields[_G]=s),{mapValue:a}}(t,e):r instanceof D1?BG(r,e):r instanceof k1?UG(r,e):function(i,s){const a=FG(i,s),o=AF(a)+AF(i.Ie);return TL(a)&&TL(i.Ie)?OG(o):xD(i.serializer,o)}(r,e)}function qce(r,e,t){return r instanceof D1?BG(r,e):r instanceof k1?UG(r,e):t}function FG(r,e){return r instanceof lC?function(n){return TL(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Jw extends sA{}class D1 extends sA{constructor(e){super(),this.elements=e}}function BG(r,e){const t=jG(e);for(const n of r.elements)t.some(i=>Du(i,n))||t.push(n);return{arrayValue:{values:t}}}class k1 extends sA{constructor(e){super(),this.elements=e}}function UG(r,e){let t=jG(e);for(const n of r.elements)t=t.filter(i=>!Du(i,n));return{arrayValue:{values:t}}}class lC extends sA{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function AF(r){return is(r.integerValue||r.doubleValue)}function jG(r){return wD(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t){this.field=e,this.transform=t}}function Zce(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof D1&&i instanceof D1||n instanceof k1&&i instanceof k1?E1(n.elements,i.elements,Du):n instanceof lC&&i instanceof lC?Du(n.Ie,i.Ie):n instanceof Jw&&i instanceof Jw}(r.transform,e.transform)}class $ce{constructor(e,t){this.version=e,this.transformResults=t}}class Vl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vl}static exists(e){return new Vl(void 0,e)}static updateTime(e){return new Vl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yx(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class aA{}function zG(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new MD(r.key,Vl.none()):new j_(r.key,r.data,Vl.none());{const t=r.data,n=ko.empty();let i=new Ps(ya.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new Yh(r.key,n,new cl(i.toArray()),Vl.none())}}function eue(r,e,t){r instanceof j_?function(i,s,a){const o=i.value.clone(),l=EF(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(r,e,t):r instanceof Yh?function(i,s,a){if(!yx(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=EF(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(VG(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(r,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function fw(r,e,t,n){return r instanceof j_?function(s,a,o,l){if(!yx(s.precondition,a))return o;const c=s.value.clone(),u=IF(s.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(r,e,t,n):r instanceof Yh?function(s,a,o,l){if(!yx(s.precondition,a))return o;const c=IF(s.fieldTransforms,l,a),u=a.data;return u.setAll(VG(s)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(r,e,t,n):function(s,a,o){return yx(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(r,e,t)}function tue(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),s=FG(n.transform,i||null);s!=null&&(t===null&&(t=ko.empty()),t.set(n.field,s))}return t||null}function TF(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&E1(n,i,(s,a)=>Zce(s,a))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class j_ extends aA{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yh extends aA{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VG(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function EF(r,e,t){const n=new Map;Wr(r.length===t.length);for(let i=0;i<t.length;i++){const s=r[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,qce(a,o,t[i]))}return n}function IF(r,e,t){const n=new Map;for(const i of r){const s=i.transform,a=t.data.field(i.field);n.set(i.field,Kce(s,a,e))}return n}class MD extends aA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nue extends aA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rue{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&eue(s,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=fw(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=fw(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=PG();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const l=zG(a,o);l!==null&&n.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Wn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_r())}isEqual(e){return this.batchId===e.batchId&&E1(this.mutations,e.mutations,(t,n)=>TF(t,n))&&E1(this.baseMutations,e.baseMutations,(t,n)=>TF(t,n))}}class AD{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Wr(e.mutations.length===n.length);let i=function(){return Wce}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new AD(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iue{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sue{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ys,Ir;function aue(r){switch(r){case At.OK:return jn();case At.CANCELLED:case At.UNKNOWN:case At.DEADLINE_EXCEEDED:case At.RESOURCE_EXHAUSTED:case At.INTERNAL:case At.UNAVAILABLE:case At.UNAUTHENTICATED:return!1;case At.INVALID_ARGUMENT:case At.NOT_FOUND:case At.ALREADY_EXISTS:case At.PERMISSION_DENIED:case At.FAILED_PRECONDITION:case At.ABORTED:case At.OUT_OF_RANGE:case At.UNIMPLEMENTED:case At.DATA_LOSS:return!0;default:return jn()}}function GG(r){if(r===void 0)return Kf("GRPC error has no .code"),At.UNKNOWN;switch(r){case ys.OK:return At.OK;case ys.CANCELLED:return At.CANCELLED;case ys.UNKNOWN:return At.UNKNOWN;case ys.DEADLINE_EXCEEDED:return At.DEADLINE_EXCEEDED;case ys.RESOURCE_EXHAUSTED:return At.RESOURCE_EXHAUSTED;case ys.INTERNAL:return At.INTERNAL;case ys.UNAVAILABLE:return At.UNAVAILABLE;case ys.UNAUTHENTICATED:return At.UNAUTHENTICATED;case ys.INVALID_ARGUMENT:return At.INVALID_ARGUMENT;case ys.NOT_FOUND:return At.NOT_FOUND;case ys.ALREADY_EXISTS:return At.ALREADY_EXISTS;case ys.PERMISSION_DENIED:return At.PERMISSION_DENIED;case ys.FAILED_PRECONDITION:return At.FAILED_PRECONDITION;case ys.ABORTED:return At.ABORTED;case ys.OUT_OF_RANGE:return At.OUT_OF_RANGE;case ys.UNIMPLEMENTED:return At.UNIMPLEMENTED;case ys.DATA_LOSS:return At.DATA_LOSS;default:return jn()}}(Ir=ys||(ys={}))[Ir.OK=0]="OK",Ir[Ir.CANCELLED=1]="CANCELLED",Ir[Ir.UNKNOWN=2]="UNKNOWN",Ir[Ir.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ir[Ir.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ir[Ir.NOT_FOUND=5]="NOT_FOUND",Ir[Ir.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ir[Ir.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ir[Ir.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ir[Ir.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ir[Ir.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ir[Ir.ABORTED=10]="ABORTED",Ir[Ir.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ir[Ir.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ir[Ir.INTERNAL=13]="INTERNAL",Ir[Ir.UNAVAILABLE=14]="UNAVAILABLE",Ir[Ir.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oue=new yh([4294967295,4294967295],0);function LF(r){const e=hG().encode(r),t=new aG;return t.update(e),new Uint8Array(t.digest())}function NF(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yh([t,n],0),new yh([i,s],0)]}class TD{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Xy(`Invalid padding: ${t}`);if(n<0)throw new Xy(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Xy(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Xy(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=yh.fromNumber(this.Ee)}Ae(e,t,n){let i=e.add(t.multiply(yh.fromNumber(n)));return i.compare(oue)===1&&(i=new yh([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=LF(e),[n,i]=NF(t);for(let s=0;s<this.hashCount;s++){const a=this.Ae(n,i,s);if(!this.Re(a))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new TD(s,i,t);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ee===0)return;const t=LF(e),[n,i]=NF(t);for(let s=0;s<this.hashCount;s++){const a=this.Ae(n,i,s);this.Ve(a)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Xy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,z_.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new oA(Wn.min(),i,new Ui(ar),qf(),_r())}}class z_{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new z_(n,t,_r(),_r(),_r())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,t,n,i){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=i}}class HG{constructor(e,t){this.targetId=e,this.ge=t}}class WG{constructor(e,t,n=ba.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class DF{constructor(){this.pe=0,this.ye=kF(),this.we=ba.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=_r(),t=_r(),n=_r();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:jn()}}),new z_(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=kF()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Wr(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class lue{constructor(e){this.ke=e,this.qe=new Map,this.Qe=qf(),this.$e=_2(),this.Ue=_2(),this.Ke=new Ui(ar)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:jn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((n,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,n=e.ge.count,i=this.Xe(t);if(i){const s=i.target;if(IL(s))if(n===0){const a=new En(s.path);this.ze(t,a,ja.newNoDocument(a,Wn.min()))}else Wr(n===1);else{const a=this.et(t);if(a!==n){const o=this.tt(e),l=o?this.nt(o,e,a):1;if(l!==0){this.Ye(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=Mh(n).toUint8Array()}catch(l){if(l instanceof vG)return T1("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new TD(a,i,s)}catch(l){return T1(l instanceof Xy?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ee===0?null:o}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let i=0;return n.forEach(s=>{const a=this.ke.it(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.ze(t,s,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((s,a)=>{const o=this.Xe(a);if(o){if(s.current&&IL(o.target)){const l=new En(o.target.path);this._t(l).has(a)||this.ut(a,l)||this.ze(a,l,ja.newNoDocument(l,e))}s.ve&&(t.set(a,s.Fe()),s.Me())}});let n=_r();this.Ue.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.Qe.forEach((s,a)=>a.setReadTime(e));const i=new oA(e,t,this.Ke,this.Qe,n);return this.Qe=qf(),this.$e=_2(),this.Ue=_2(),this.Ke=new Ui(ar),i}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new DF,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Ps(ar),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Ps(ar),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||un("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new DF),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function _2(){return new Ui(En.comparator)}function kF(){return new Ui(En.comparator)}const cue={asc:"ASCENDING",desc:"DESCENDING"},uue={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fue={and:"AND",or:"OR"};class due{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function NL(r,e){return r.useProto3Json||$M(e)?e:{value:e}}function cC(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YG(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function hue(r,e){return cC(r,e.toTimestamp())}function Mu(r){return Wr(!!r),Wn.fromTimestamp(function(t){const n=Ch(t);return new Rs(n.seconds,n.nanos)}(r))}function ED(r,e){return DL(r,e).canonicalString()}function DL(r,e){const t=function(i){return new fi(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function JG(r){const e=fi.fromString(r);return Wr(ZG(e)),e}function kL(r,e){return ED(r.databaseId,e.path)}function WE(r,e){const t=JG(e);if(t.get(1)!==r.databaseId.projectId)throw new tn(At.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new tn(At.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new En(QG(t))}function XG(r,e){return ED(r.databaseId,e)}function pue(r){const e=JG(r);return e.length===4?fi.emptyPath():QG(e)}function RL(r){return new fi(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function QG(r){return Wr(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function RF(r,e,t){return{name:kL(r,e),fields:t.value.mapValue.fields}}function mue(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:jn()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Wr(u===void 0||typeof u=="string"),ba.fromBase64String(u||"")):(Wr(u===void 0||u instanceof Buffer||u instanceof Uint8Array),ba.fromUint8Array(u||new Uint8Array))}(r,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?At.UNKNOWN:GG(c.code);return new tn(u,c.message||"")}(a);t=new WG(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=WE(r,n.document.name),s=Mu(n.document.updateTime),a=n.document.createTime?Mu(n.document.createTime):Wn.min(),o=new ko({mapValue:{fields:n.document.fields}}),l=ja.newFoundDocument(i,s,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];t=new wx(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=WE(r,n.document),s=n.readTime?Mu(n.readTime):Wn.min(),a=ja.newNoDocument(i,s),o=n.removedTargetIds||[];t=new wx([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=WE(r,n.document),s=n.removedTargetIds||[];t=new wx([],s,i,null)}else{if(!("filter"in e))return jn();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new sue(i,s),o=n.targetId;t=new HG(o,a)}}return t}function gue(r,e){let t;if(e instanceof j_)t={update:RF(r,e.key,e.value)};else if(e instanceof MD)t={delete:kL(r,e.key)};else if(e instanceof Yh)t={update:RF(r,e.key,e.data),updateMask:Mue(e.fieldMask)};else{if(!(e instanceof nue))return jn();t={verify:kL(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(s,a){const o=a.transform;if(o instanceof Jw)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof D1)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof k1)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof lC)return{fieldPath:a.field.canonicalString(),increment:o.Ie};throw jn()}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:hue(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:jn()}(r,e.precondition)),t}function vue(r,e){return r&&r.length>0?(Wr(e!==void 0),r.map(t=>function(i,s){let a=i.updateTime?Mu(i.updateTime):Mu(s);return a.isEqual(Wn.min())&&(a=Mu(s)),new $ce(a,i.transformResults||[])}(t,e))):[]}function yue(r,e){return{documents:[XG(r,e.path)]}}function wue(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=XG(r,i);const s=function(c){if(c.length!==0)return qG(Vc.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:N0(d.field),direction:Sue(d.dir)}}(u))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=NL(r,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:t,parent:i}}function _ue(r){let e=pue(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){Wr(n===1);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(f){const d=KG(f);return d instanceof Vc&&TG(d)?d.getFilters():[d]}(t.where));let a=[];t.orderBy&&(a=function(f){return f.map(d=>function(g){return new Yw(D0(g.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(d))}(t.orderBy));let o=null;t.limit&&(o=function(f){let d;return d=typeof f=="object"?f.value:f,$M(d)?null:d}(t.limit));let l=null;t.startAt&&(l=function(f){const d=!!f.before,p=f.values||[];return new N1(p,d)}(t.startAt));let c=null;return t.endAt&&(c=function(f){const d=!f.before,p=f.values||[];return new N1(p,d)}(t.endAt)),jce(e,i,a,s,o,"F",l,c)}function bue(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return jn()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function KG(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=D0(t.unaryFilter.field);return _s.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=D0(t.unaryFilter.field);return _s.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=D0(t.unaryFilter.field);return _s.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=D0(t.unaryFilter.field);return _s.create(a,"!=",{nullValue:"NULL_VALUE"});default:return jn()}}(r):r.fieldFilter!==void 0?function(t){return _s.create(D0(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jn()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Vc.create(t.compositeFilter.filters.map(n=>KG(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return jn()}}(t.compositeFilter.op))}(r):jn()}function Sue(r){return cue[r]}function xue(r){return uue[r]}function Cue(r){return fue[r]}function N0(r){return{fieldPath:r.canonicalString()}}function D0(r){return ya.fromServerFormat(r.fieldPath)}function qG(r){return r instanceof _s?function(t){if(t.op==="=="){if(bF(t.value))return{unaryFilter:{field:N0(t.field),op:"IS_NAN"}};if(_F(t.value))return{unaryFilter:{field:N0(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bF(t.value))return{unaryFilter:{field:N0(t.field),op:"IS_NOT_NAN"}};if(_F(t.value))return{unaryFilter:{field:N0(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:N0(t.field),op:xue(t.op),value:t.value}}}(r):r instanceof Vc?function(t){const n=t.getFilters().map(i=>qG(i));return n.length===1?n[0]:{compositeFilter:{op:Cue(t.op),filters:n}}}(r):jn()}function Mue(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ZG(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t,n,i,s=Wn.min(),a=Wn.min(),o=ba.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new fh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aue{constructor(e){this.Tt=e}}function Tue(r){const e=_ue({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?oC(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eue{constructor(){this.Tn=new Iue}addToCollectionParentIndex(e,t){return this.Tn.add(t),Nt.resolve()}getCollectionParents(e,t){return Nt.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Nt.resolve()}deleteFieldIndex(e,t){return Nt.resolve()}deleteAllFieldIndexes(e){return Nt.resolve()}createTargetIndexes(e,t){return Nt.resolve()}getDocumentsMatchingTarget(e,t){return Nt.resolve(null)}getIndexType(e,t){return Nt.resolve(0)}getFieldIndexes(e,t){return Nt.resolve([])}getNextCollectionGroupToUpdate(e){return Nt.resolve(null)}getMinOffset(e,t){return Nt.resolve(xh.min())}getMinOffsetFromCollectionGroup(e,t){return Nt.resolve(xh.min())}updateCollectionGroup(e,t,n){return Nt.resolve()}updateIndexEntries(e,t){return Nt.resolve()}}class Iue{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Ps(fi.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Ps(fi.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$G=41943040;class Lo{static withCacheSize(e){return new Lo(e,Lo.DEFAULT_COLLECTION_PERCENTILE,Lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lo.DEFAULT_COLLECTION_PERCENTILE=10,Lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lo.DEFAULT=new Lo($G,Lo.DEFAULT_COLLECTION_PERCENTILE,Lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lo.DISABLED=new Lo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new R1(0)}static Kn(){return new R1(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF="LruGarbageCollector",Lue=1048576;function FF([r,e],[t,n]){const i=ar(r,t);return i===0?ar(e,n):i}class Nue{constructor(e){this.Hn=e,this.buffer=new Ps(FF),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();FF(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Due{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){un(OF,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fv(t)?un(OF,"Ignoring IndexedDB error during garbage collection: ",t):await uv(t)}await this.er(3e5)})}}class kue{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return Nt.resolve(ZM.ae);const n=new Nue(t);return this.tr.forEachTarget(e,i=>n.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>n.Zn(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(un("LruGarbageCollector","Garbage collection skipped; disabled"),Nt.resolve(PF)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(un("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PF):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,i,s,a,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(un("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,a=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(n=f,o=Date.now(),this.removeTargets(e,n,t))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(c=Date.now(),I0()<=yr.DEBUG&&un("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),Nt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function Rue(r,e){return new kue(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pue{constructor(){this.changes=new ag(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ja.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Nt.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oue{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fue{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&fw(n.mutation,i,cl.empty(),Rs.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,_r()).next(()=>n))}getLocalViewOfDocuments(e,t,n=_r()){const i=hm();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(s=>{let a=Jy();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const n=hm();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,_r()))}populateOverlays(e,t,n){const i=[];return n.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{t.set(a,o)})})}computeViews(e,t,n,i){let s=qf();const a=uw(),o=function(){return uw()}();return t.forEach((l,c)=>{const u=n.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Yh)?s=s.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),fw(u.mutation,c,u.mutation.getFieldMask(),Rs.now())):a.set(c.key,cl.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>a.set(c,u)),t.forEach((c,u)=>{var f;return o.set(c,new Oue(u,(f=a.get(c))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,t){const n=uw();let i=new Ui((a,o)=>a-o),s=_r();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=n.get(l)||cl.empty();u=o.applyToLocalView(c,u),n.set(l,u);const f=(i.get(o.batchId)||_r()).add(l);i=i.insert(o.batchId,f)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,f=PG();u.forEach(d=>{if(!s.has(d)){const p=zG(t.get(d),n.get(d));p!==null&&f.set(d,p),s=s.add(d)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Nt.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(a){return En.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):SD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):Nt.resolve(hm());let o=Vw,l=s;return a.next(c=>Nt.forEach(c,(u,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(u)?Nt.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,_r())).next(u=>({batchId:o,changes:RG(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new En(t)).next(n=>{let i=Jy();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const s=t.collectionGroup;let a=Jy();return this.indexManager.getCollectionParents(e,s).next(o=>Nt.forEach(o,l=>{const c=function(f,d){return new Wh(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,n,i).next(u=>{u.forEach((f,d)=>{a=a.insert(f,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,i))).next(a=>{s.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,ja.newInvalidDocument(u)))});let o=Jy();return a.forEach((l,c)=>{const u=s.get(l);u!==void 0&&fw(u.mutation,c,cl.empty(),Rs.now()),iA(t,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bue{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Nt.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Mu(i.createTime)}}(t)),Nt.resolve()}getNamedQuery(e,t){return Nt.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:Tue(i.bundledQuery),readTime:Mu(i.readTime)}}(t)),Nt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uue{constructor(){this.overlays=new Ui(En.comparator),this.Rr=new Map}getOverlay(e,t){return Nt.resolve(this.overlays.get(t))}getOverlays(e,t){const n=hm();return Nt.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,s)=>{this.Et(e,t,s)}),Nt.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Rr.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(n)),Nt.resolve()}getOverlaysForCollection(e,t,n){const i=hm(),s=t.length+1,a=new En(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>n&&i.set(l.getKey(),l)}return Nt.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new Ui((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>n){let u=s.get(c.largestBatchId);u===null&&(u=hm(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=hm(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=i)););return Nt.resolve(o)}Et(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.Rr.get(i.largestBatchId).delete(n.key);this.Rr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new iue(t,n));let s=this.Rr.get(t);s===void 0&&(s=_r(),this.Rr.set(t,s)),this.Rr.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jue{constructor(){this.sessionToken=ba.EMPTY_BYTE_STRING}getSessionToken(e){return Nt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Nt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this.Vr=new Ps(Zs.mr),this.gr=new Ps(Zs.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new Zs(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.wr(new Zs(e,t))}Sr(e,t){e.forEach(n=>this.removeReference(n,t))}br(e){const t=new En(new fi([])),n=new Zs(t,e),i=new Zs(t,e+1),s=[];return this.gr.forEachInRange([n,i],a=>{this.wr(a),s.push(a.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new En(new fi([])),n=new Zs(t,e),i=new Zs(t,e+1);let s=_r();return this.gr.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new Zs(e,0),n=this.Vr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Zs{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return En.comparator(e.key,t.key)||ar(e.Cr,t.Cr)}static pr(e,t){return ar(e.Cr,t.Cr)||En.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Ps(Zs.mr)}checkEmpty(e){return Nt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new rue(s,t,n,i);this.mutationQueue.push(a);for(const o of i)this.Mr=this.Mr.add(new Zs(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Nt.resolve(a)}lookupMutationBatch(e,t){return Nt.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Nr(n),s=i<0?0:i;return Nt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Nt.resolve(this.mutationQueue.length===0?yD:this.Fr-1)}getAllMutationBatches(e){return Nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Zs(t,0),i=new Zs(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([n,i],a=>{const o=this.Or(a.Cr);s.push(o)}),Nt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ps(ar);return t.forEach(i=>{const s=new Zs(i,0),a=new Zs(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,a],o=>{n=n.add(o.Cr)})}),Nt.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;En.isDocumentKey(s)||(s=s.child(""));const a=new Zs(new En(s),0);let o=new Ps(ar);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===i&&(o=o.add(l.Cr)),!0)},a),Nt.resolve(this.Br(o))}Br(e){const t=[];return e.forEach(n=>{const i=this.Or(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Wr(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return Nt.forEach(t.mutations,i=>{const s=new Zs(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=n})}qn(e){}containsKey(e,t){const n=new Zs(t,0),i=this.Mr.firstAfterOrEqual(n);return Nt.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Nt.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vue{constructor(e){this.kr=e,this.docs=function(){return new Ui(En.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,a=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Nt.resolve(n?n.document.mutableCopy():ja.newInvalidDocument(t))}getEntries(e,t){let n=qf();return t.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():ja.newInvalidDocument(i))}),Nt.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=qf();const a=t.path,o=new En(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||yce(vce(u),n)<=0||(i.has(u.key)||iA(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Nt.resolve(s)}getAllFromCollectionGroup(e,t,n,i){jn()}qr(e,t){return Nt.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new Gue(this)}getSize(e){return Nt.resolve(this.size)}}class Gue extends Pue{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(n)}),Nt.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hue{constructor(e){this.persistence=e,this.Qr=new ag(t=>_D(t),bD),this.lastRemoteSnapshotVersion=Wn.min(),this.highestTargetId=0,this.$r=0,this.Ur=new ID,this.targetCount=0,this.Kr=R1.Un()}forEachTarget(e,t){return this.Qr.forEach((n,i)=>t(i)),Nt.resolve()}getLastRemoteSnapshotVersion(e){return Nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Nt.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),Nt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),Nt.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new R1(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Nt.resolve()}updateTargetData(e,t){return this.zn(t),Nt.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,Nt.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.Qr.forEach((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.Qr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Nt.waitFor(s).next(()=>i)}getTargetCount(e){return Nt.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return Nt.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),Nt.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Nt.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),Nt.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return Nt.resolve(n)}containsKey(e,t){return Nt.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new ZM(0),this.zr=!1,this.zr=!0,this.jr=new jue,this.referenceDelegate=e(this),this.Hr=new Hue(this),this.indexManager=new Eue,this.remoteDocumentCache=function(i){return new Vue(i)}(n=>this.referenceDelegate.Jr(n)),this.serializer=new Aue(t),this.Yr=new Bue(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Uue,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new zue(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){un("MemoryPersistence","Starting transaction:",e);const i=new Wue(this.Gr.next());return this.referenceDelegate.Zr(),n(i).next(s=>this.referenceDelegate.Xr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}ei(e,t){return Nt.or(Object.values(this.Wr).map(n=>()=>n.containsKey(e,t)))}}class Wue extends _ce{constructor(e){super(),this.currentSequenceNumber=e}}class LD{constructor(e){this.persistence=e,this.ti=new ID,this.ni=null}static ri(e){return new LD(e)}get ii(){if(this.ni)return this.ni;throw jn()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),Nt.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),Nt.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Nt.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ii.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Nt.forEach(this.ii,n=>{const i=En.fromPath(n);return this.si(e,i).next(s=>{s||t.removeEntry(i,Wn.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(n=>{n?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Nt.or([()=>Nt.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class uC{constructor(e,t){this.persistence=e,this.oi=new ag(n=>xce(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=Rue(this,t)}static ri(e,t){return new uC(e,t)}Zr(){}Xr(e){return Nt.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}sr(e){let t=0;return this.rr(e,n=>{t++}).next(()=>t)}rr(e,t){return Nt.forEach(this.oi,(n,i)=>this.ar(e,n,i).next(s=>s?Nt.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,a=>this.ar(e,a,t).next(o=>{o||(n++,s.removeEntry(a,Wn.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Nt.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Nt.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Nt.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Nt.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gx(e.data.value)),t}ar(e,t,n){return Nt.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return Nt.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=i}static Yi(e,t){let n=_r(),i=_r();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ND(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yue{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jue{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return kse()?8:bce(Wa())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,i){const s={result:null};return this.rs(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ss(e,t,i,n).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Yue;return this._s(e,t,a).next(o=>{if(s.result=o,this.Xi)return this.us(e,t,a,o.size)})}).next(()=>s.result)}us(e,t,n,i){return n.documentReadCount<this.es?(I0()<=yr.DEBUG&&un("QueryEngine","SDK will not create cache indexes for query:",L0(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Nt.resolve()):(I0()<=yr.DEBUG&&un("QueryEngine","Query:",L0(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ts*i?(I0()<=yr.DEBUG&&un("QueryEngine","The SDK decides to create cache indexes for query:",L0(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cu(t))):Nt.resolve())}rs(e,t){if(MF(t))return Nt.resolve(null);let n=Cu(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=oC(t,null,"F"),n=Cu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const a=_r(...s);return this.ns.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.cs(t,o);return this.ls(t,c,a,l.readTime)?this.rs(e,oC(t,null,"F")):this.hs(e,c,t,l)}))})))}ss(e,t,n,i){return MF(t)||i.isEqual(Wn.min())?Nt.resolve(null):this.ns.getDocuments(e,n).next(s=>{const a=this.cs(t,s);return this.ls(t,a,n,i)?Nt.resolve(null):(I0()<=yr.DEBUG&&un("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),L0(t)),this.hs(e,a,t,gce(i,Vw)).next(o=>o))})}cs(e,t){let n=new Ps(DG(e));return t.forEach((i,s)=>{iA(e,s)&&(n=n.add(s))}),n}ls(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,t,n){return I0()<=yr.DEBUG&&un("QueryEngine","Using full collection scan to execute query:",L0(t)),this.ns.getDocumentsMatchingQuery(e,t,xh.min(),n)}hs(e,t,n,i){return this.ns.getDocumentsMatchingQuery(e,n,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD="LocalStore",Xue=3e8;class Que{constructor(e,t,n,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Ui(ar),this.Is=new ag(s=>_D(s),bD),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fue(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function Kue(r,e,t,n){return new Que(r,e,t,n)}async function tH(r,e){const t=Kn(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,t.As(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{const a=[],o=[];let l=_r();for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(n,l).next(c=>({Rs:c,removedBatchIds:a,addedBatchIds:o}))})})}function que(r,e){const t=Kn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const f=c.batch,d=f.keys();let p=Nt.resolve();return d.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(_=>{const w=c.docVersions.get(g);Wr(w!==null),_.version.compareTo(w)<0&&(f.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=_r();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function nH(r){const e=Kn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function Zue(r,e){const t=Kn(r),n=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const o=[];e.targetChanges.forEach((u,f)=>{const d=i.get(f);if(!d)return;o.push(t.Hr.removeMatchingKeys(s,u.removedDocuments,f).next(()=>t.Hr.addMatchingKeys(s,u.addedDocuments,f)));let p=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(ba.EMPTY_BYTE_STRING,Wn.min()).withLastLimboFreeSnapshotVersion(Wn.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),i=i.insert(f,p),function(_,w,b){return _.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=Xue?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(d,p,u)&&o.push(t.Hr.updateTargetData(s,p))});let l=qf(),c=_r();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),o.push($ue(s,a,e.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!n.isEqual(Wn.min())){const u=t.Hr.getLastRemoteSnapshotVersion(s).next(f=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(u)}return Nt.waitFor(o).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ts=i,s))}function $ue(r,e,t){let n=_r(),i=_r();return t.forEach(s=>n=n.add(s)),e.getEntries(r,n).next(s=>{let a=qf();return t.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Wn.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):un(DD,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Vs:a,fs:i}})}function efe(r,e){const t=Kn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=yD),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function tfe(r,e){const t=Kn(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.Hr.getTargetData(n,e).next(s=>s?(i=s,Nt.resolve(i)):t.Hr.allocateTargetId(n).next(a=>(i=new fh(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.Hr.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.Ts.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(n.targetId,n),t.Is.set(e,n.targetId)),n})}async function PL(r,e,t){const n=Kn(r),i=n.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!fv(a))throw a;un(DD,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ts=n.Ts.remove(e),n.Is.delete(i.target)}function BF(r,e,t){const n=Kn(r);let i=Wn.min(),s=_r();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const f=Kn(l),d=f.Is.get(u);return d!==void 0?Nt.resolve(f.Ts.get(d)):f.Hr.getTargetData(c,u)}(n,a,Cu(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>n.Ps.getDocumentsMatchingQuery(a,e,t?i:Wn.min(),t?s:_r())).next(o=>(nfe(n,Vce(e),o),{documents:o,gs:s})))}function nfe(r,e,t){let n=r.Es.get(e)||Wn.min();t.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),r.Es.set(e,n)}class UF{constructor(){this.activeTargetIds=Xce()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rfe{constructor(){this.ho=new UF,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new UF,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ife{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF="ConnectivityMonitor";class zF{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){un(jF,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){un(jF,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b2=null;function OL(){return b2===null?b2=function(){return 268435456+Math.round(2147483648*Math.random())}():b2++,"0x"+b2.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="RestConnection",sfe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class afe{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${i}`,this.wo=this.databaseId.database===iC?`project_id=${n}`:`project_id=${n}&database_id=${i}`}So(e,t,n,i,s){const a=OL(),o=this.bo(e,t.toUriEncodedString());un(YE,`Sending RPC '${e}' ${a}:`,o,n);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,i,s),this.vo(e,o,l,n).then(c=>(un(YE,`Received RPC '${e}' ${a}: `,c),c),c=>{throw T1(YE,`RPC '${e}' ${a} failed with error: `,c,"url: ",o,"request:",n),c})}Co(e,t,n,i,s,a){return this.So(e,t,n,i,s)}Do(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cv}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}bo(e,t){const n=sfe[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ofe{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="WebChannelConnection";class lfe extends afe{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,i){const s=OL();return new Promise((a,o)=>{const l=new oG;l.setWithCredentials(!0),l.listenOnce(lG.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case mx.NO_ERROR:const u=l.getResponseJson();un(ka,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),a(u);break;case mx.TIMEOUT:un(ka,`RPC '${e}' ${s} timed out`),o(new tn(At.DEADLINE_EXCEEDED,"Request time out"));break;case mx.HTTP_ERROR:const f=l.getStatus();if(un(ka,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const g=function(w){const b=w.toLowerCase().replace(/_/g,"-");return Object.values(At).indexOf(b)>=0?b:At.UNKNOWN}(p.status);o(new tn(g,p.message))}else o(new tn(At.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new tn(At.UNAVAILABLE,"Connection failed."));break;default:jn()}}finally{un(ka,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);un(ka,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,n,15)})}Wo(e,t,n){const i=OL(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=fG(),o=uG(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,n),l.encodeInitMessageHeaders=!0;const u=s.join("");un(ka,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=a.createWebChannel(u,l);let d=!1,p=!1;const g=new ofe({Fo:w=>{p?un(ka,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(d||(un(ka,`Opening RPC '${e}' stream ${i} transport.`),f.open(),d=!0),un(ka,`RPC '${e}' stream ${i} sending:`,w),f.send(w))},Mo:()=>f.close()}),_=(w,b,C)=>{w.listen(b,M=>{try{C(M)}catch(A){setTimeout(()=>{throw A},0)}})};return _(f,Yy.EventType.OPEN,()=>{p||(un(ka,`RPC '${e}' stream ${i} transport opened.`),g.Qo())}),_(f,Yy.EventType.CLOSE,()=>{p||(p=!0,un(ka,`RPC '${e}' stream ${i} transport closed`),g.Uo())}),_(f,Yy.EventType.ERROR,w=>{p||(p=!0,T1(ka,`RPC '${e}' stream ${i} transport errored:`,w),g.Uo(new tn(At.UNAVAILABLE,"The operation could not be completed")))}),_(f,Yy.EventType.MESSAGE,w=>{var b;if(!p){const C=w.data[0];Wr(!!C);const M=C,A=(M==null?void 0:M.error)||((b=M[0])===null||b===void 0?void 0:b.error);if(A){un(ka,`RPC '${e}' stream ${i} received error:`,A);const k=A.status;let O=function(D){const E=ys[D];if(E!==void 0)return GG(E)}(k),R=A.message;O===void 0&&(O=At.INTERNAL,R="Unknown error status: "+k+" with message "+A.message),p=!0,g.Uo(new tn(O,R)),f.close()}else un(ka,`RPC '${e}' stream ${i} received:`,C),g.Ko(C)}}),_(o,cG.STAT_EVENT,w=>{w.stat===CL.PROXY?un(ka,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===CL.NOPROXY&&un(ka,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.$o()},0),g}}function JE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(r){return new due(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-n);i>0&&un("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF="PersistentStream";class iH{constructor(e,t,n,i,s,a,o,l){this.Ti=e,this.n_=n,this.r_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new rH(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===At.RESOURCE_EXHAUSTED?(Kf(t.toString()),Kf("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===At.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.i_===t&&this.V_(n,i)},n=>{e(()=>{const i=new tn(At.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(i)})})}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{n(()=>this.listener.xo())}),this.stream.No(()=>{n(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{n(()=>this.m_(i))}),this.stream.onMessage(i=>{n(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return un(VF,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(un(VF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cfe extends iH{constructor(e,t,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=mue(this.serializer,e),n=function(s){if(!("targetChange"in s))return Wn.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Wn.min():a.readTime?Mu(a.readTime):Wn.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=RL(this.serializer),t.addTarget=function(s,a){let o;const l=a.target;if(o=IL(l)?{documents:yue(s,l)}:{query:wue(s,l).ht},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=YG(s,a.resumeToken);const c=NL(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Wn.min())>0){o.readTime=cC(s,a.snapshotVersion.toTimestamp());const c=NL(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=bue(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=RL(this.serializer),t.removeTarget=e,this.I_(t)}}class ufe extends iH{constructor(e,t,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Wr(!!e.streamToken),this.lastStreamToken=e.streamToken,Wr(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Wr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=vue(e.writeResults,e.commitTime),n=Mu(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=RL(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>gue(this.serializer,n))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ffe{}class dfe extends ffe{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new tn(At.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.So(e,DL(t,n),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===At.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new tn(At.UNKNOWN,s.toString())})}Co(e,t,n,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Co(e,DL(t,n),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===At.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new tn(At.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class hfe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Kf(t),this.N_=!1):un("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="RemoteStore";class pfe{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(a=>{n.enqueueAndForget(async()=>{og(this)&&(un(Vm,"Restarting streams for network reachability change."),await async function(l){const c=Kn(l);c.W_.add(4),await V_(c),c.j_.set("Unknown"),c.W_.delete(4),await cA(c)}(this))})}),this.j_=new hfe(n,i)}}async function cA(r){if(og(r))for(const e of r.G_)await e(!0)}async function V_(r){for(const e of r.G_)await e(!1)}function sH(r,e){const t=Kn(r);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),OD(t)?PD(t):dv(t).c_()&&RD(t,e))}function kD(r,e){const t=Kn(r),n=dv(t);t.K_.delete(e),n.c_()&&aH(t,e),t.K_.size===0&&(n.c_()?n.P_():og(t)&&t.j_.set("Unknown"))}function RD(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Wn.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dv(r).y_(e)}function aH(r,e){r.H_.Ne(e),dv(r).w_(e)}function PD(r){r.H_=new lue({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.K_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),dv(r).start(),r.j_.B_()}function OD(r){return og(r)&&!dv(r).u_()&&r.K_.size>0}function og(r){return Kn(r).W_.size===0}function oH(r){r.H_=void 0}async function mfe(r){r.j_.set("Online")}async function gfe(r){r.K_.forEach((e,t)=>{RD(r,e)})}async function vfe(r,e){oH(r),OD(r)?(r.j_.q_(e),PD(r)):r.j_.set("Unknown")}async function yfe(r,e,t){if(r.j_.set("Online"),e instanceof WG&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.K_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.K_.delete(o),i.H_.removeTarget(o))}(r,e)}catch(n){un(Vm,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await fC(r,n)}else if(e instanceof wx?r.H_.We(e):e instanceof HG?r.H_.Ze(e):r.H_.je(e),!t.isEqual(Wn.min()))try{const n=await nH(r.localStore);t.compareTo(n)>=0&&await function(s,a){const o=s.H_.ot(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.K_.get(c);u&&s.K_.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=s.K_.get(l);if(!u)return;s.K_.set(l,u.withResumeToken(ba.EMPTY_BYTE_STRING,u.snapshotVersion)),aH(s,l);const f=new fh(u.target,l,c,u.sequenceNumber);RD(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(r,t)}catch(n){un(Vm,"Failed to raise snapshot:",n),await fC(r,n)}}async function fC(r,e,t){if(!fv(e))throw e;r.W_.add(1),await V_(r),r.j_.set("Offline"),t||(t=()=>nH(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{un(Vm,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await cA(r)})}function lH(r,e){return e().catch(t=>fC(r,t,e))}async function uA(r){const e=Kn(r),t=Th(e);let n=e.U_.length>0?e.U_[e.U_.length-1].batchId:yD;for(;wfe(e);)try{const i=await efe(e.localStore,n);if(i===null){e.U_.length===0&&t.P_();break}n=i.batchId,_fe(e,i)}catch(i){await fC(e,i)}cH(e)&&uH(e)}function wfe(r){return og(r)&&r.U_.length<10}function _fe(r,e){r.U_.push(e);const t=Th(r);t.c_()&&t.S_&&t.b_(e.mutations)}function cH(r){return og(r)&&!Th(r).u_()&&r.U_.length>0}function uH(r){Th(r).start()}async function bfe(r){Th(r).C_()}async function Sfe(r){const e=Th(r);for(const t of r.U_)e.b_(t.mutations)}async function xfe(r,e,t){const n=r.U_.shift(),i=AD.from(n,e,t);await lH(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await uA(r)}async function Cfe(r,e){e&&Th(r).S_&&await async function(n,i){if(function(a){return aue(a)&&a!==At.ABORTED}(i.code)){const s=n.U_.shift();Th(n).h_(),await lH(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await uA(n)}}(r,e),cH(r)&&uH(r)}async function GF(r,e){const t=Kn(r);t.asyncQueue.verifyOperationInProgress(),un(Vm,"RemoteStore received new credentials");const n=og(t);t.W_.add(3),await V_(t),n&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await cA(t)}async function Mfe(r,e){const t=Kn(r);e?(t.W_.delete(2),await cA(t)):e||(t.W_.add(2),await V_(t),t.j_.set("Unknown"))}function dv(r){return r.J_||(r.J_=function(t,n,i){const s=Kn(t);return s.M_(),new cfe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{xo:mfe.bind(null,r),No:gfe.bind(null,r),Lo:vfe.bind(null,r),p_:yfe.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),OD(r)?PD(r):r.j_.set("Unknown")):(await r.J_.stop(),oH(r))})),r.J_}function Th(r){return r.Y_||(r.Y_=function(t,n,i){const s=Kn(t);return s.M_(),new ufe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:bfe.bind(null,r),Lo:Cfe.bind(null,r),D_:Sfe.bind(null,r),v_:xfe.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await uA(r)):(await r.Y_.stop(),r.U_.length>0&&(un(Vm,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new jf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,s){const a=Date.now()+n,o=new FD(e,t,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tn(At.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function BD(r,e){if(Kf("AsyncQueue",`${e}: ${r}`),fv(r))return new tn(At.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{static emptySet(e){return new i1(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||En.comparator(t.key,n.key):(t,n)=>En.comparator(t.key,n.key),this.keyedMap=Jy(),this.sortedSet=new Ui(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof i1)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new i1;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(){this.Z_=new Ui(En.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?e.type!==0&&n.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&n.type!==1?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Z_=this.Z_.remove(t):e.type===1&&n.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):jn():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class P1{constructor(e,t,n,i,s,a,o,l,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,i,s){const a=[];return t.forEach(o=>{a.push({type:0,doc:o})}),new P1(e,t,i1.emptySet(t),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rA(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Afe{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class Tfe{constructor(){this.queries=WF(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,n){const i=Kn(t),s=i.queries;i.queries=WF(),s.forEach((a,o)=>{for(const l of o.ta)l.onError(n)})})(this,new tn(At.ABORTED,"Firestore shutting down"))}}function WF(){return new ag(r=>NG(r),rA)}async function UD(r,e){const t=Kn(r);let n=3;const i=e.query;let s=t.queries.get(i);s?!s.na()&&e.ra()&&(n=2):(s=new Afe,n=e.ra()?0:1);try{switch(n){case 0:s.ea=await t.onListen(i,!0);break;case 1:s.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=BD(a,`Initialization of query '${L0(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&zD(t)}async function jD(r,e){const t=Kn(r),n=e.query;let i=3;const s=t.queries.get(n);if(s){const a=s.ta.indexOf(e);a>=0&&(s.ta.splice(a,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function Efe(r,e){const t=Kn(r);let n=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.ta)o.oa(i)&&(n=!0);a.ea=i}}n&&zD(t)}function Ife(r,e,t){const n=Kn(r),i=n.queries.get(e);if(i)for(const s of i.ta)s.onError(t);n.queries.delete(e)}function zD(r){r.ia.forEach(e=>{e.next()})}var FL,YF;(YF=FL||(FL={}))._a="default",YF.Cache="cache";class VD{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new P1(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const n=t!=="Offline";return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=P1.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==FL.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(e){this.key=e}}class dH{constructor(e){this.key=e}}class Lfe{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=_r(),this.mutatedKeys=_r(),this.ya=DG(e),this.wa=new i1(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new HF,i=t?t.wa:this.wa;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const d=i.get(u),p=iA(this.query,f)?f:null,g=!!d&&this.mutatedKeys.has(d.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;d&&p?d.data.isEqual(p.data)?g!==_&&(n.track({type:3,doc:p}),w=!0):this.va(d,p)||(n.track({type:2,doc:p}),w=!0,(l&&this.ya(p,l)>0||c&&this.ya(p,c)<0)&&(o=!0)):!d&&p?(n.track({type:0,doc:p}),w=!0):d&&!p&&(n.track({type:1,doc:d}),w=!0,(l||c)&&(o=!0)),w&&(p?(a=a.add(p),s=_?s.add(u):s.delete(u)):(a=a.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),s=s.delete(u.key),n.track({type:1,doc:u})}return{wa:a,Da:n,ls:o,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort((u,f)=>function(p,g){const _=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jn()}};return _(p)-_(g)}(u.type,f.type)||this.ya(u.doc,f.doc)),this.Ca(n),i=i!=null&&i;const o=t&&!i?this.Fa():[],l=this.pa.size===0&&this.current&&!i?1:0,c=l!==this.ga;return this.ga=l,a.length!==0||c?{snapshot:new P1(this.query,e.wa,s,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new HF,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=_r(),this.wa.forEach(n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))});const t=[];return e.forEach(n=>{this.pa.has(n)||t.push(new dH(n))}),this.pa.forEach(n=>{e.has(n)||t.push(new fH(n))}),t}Oa(e){this.fa=e.gs,this.pa=_r();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return P1.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const GD="SyncEngine";class Nfe{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Dfe{constructor(e){this.key=e,this.Ba=!1}}class kfe{constructor(e,t,n,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new ag(o=>NG(o),rA),this.qa=new Map,this.Qa=new Set,this.$a=new Ui(En.comparator),this.Ua=new Map,this.Ka=new ID,this.Wa={},this.Ga=new Map,this.za=R1.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Rfe(r,e,t=!0){const n=yH(r);let i;const s=n.ka.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await hH(n,e,t,!0),i}async function Pfe(r,e){const t=yH(r);await hH(t,e,!0,!1)}async function hH(r,e,t,n){const i=await tfe(r.localStore,Cu(e)),s=i.targetId,a=r.sharedClientState.addLocalQueryTarget(s,t);let o;return n&&(o=await Ofe(r,e,s,a==="current",i.resumeToken)),r.isPrimaryClient&&t&&sH(r.remoteStore,i),o}async function Ofe(r,e,t,n,i){r.Ha=(f,d,p)=>async function(_,w,b,C){let M=w.view.ba(b);M.ls&&(M=await BF(_.localStore,w.query,!1).then(({documents:R})=>w.view.ba(R,M)));const A=C&&C.targetChanges.get(w.targetId),k=C&&C.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(M,_.isPrimaryClient,A,k);return XF(_,w.targetId,O.Ma),O.snapshot}(r,f,d,p);const s=await BF(r.localStore,e,!0),a=new Lfe(e,s.gs),o=a.ba(s.documents),l=z_.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),c=a.applyChanges(o,r.isPrimaryClient,l);XF(r,t,c.Ma);const u=new Nfe(e,t,a);return r.ka.set(e,u),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),c.snapshot}async function Ffe(r,e,t){const n=Kn(r),i=n.ka.get(e),s=n.qa.get(i.targetId);if(s.length>1)return n.qa.set(i.targetId,s.filter(a=>!rA(a,e))),void n.ka.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await PL(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&kD(n.remoteStore,i.targetId),BL(n,i.targetId)}).catch(uv)):(BL(n,i.targetId),await PL(n.localStore,i.targetId,!0))}async function Bfe(r,e){const t=Kn(r),n=t.ka.get(e),i=t.qa.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),kD(t.remoteStore,n.targetId))}async function Ufe(r,e,t){const n=Yfe(r);try{const i=await function(a,o){const l=Kn(a),c=Rs.now(),u=o.reduce((p,g)=>p.add(g.key),_r());let f,d;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=qf(),_=_r();return l.ds.getEntries(p,u).next(w=>{g=w,g.forEach((b,C)=>{C.isValidDocument()||(_=_.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(w=>{f=w;const b=[];for(const C of o){const M=tue(C,f.get(C.key).overlayedDocument);M!=null&&b.push(new Yh(C.key,M,CG(M.value.mapValue),Vl.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,b,o)}).next(w=>{d=w;const b=w.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(p,w.batchId,b)})}).then(()=>({batchId:d.batchId,changes:RG(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let c=a.Wa[a.currentUser.toKey()];c||(c=new Ui(ar)),c=c.insert(o,l),a.Wa[a.currentUser.toKey()]=c}(n,i.batchId,t),await G_(n,i.changes),await uA(n.remoteStore)}catch(i){const s=BD(i,"Failed to persist write");t.reject(s)}}async function pH(r,e){const t=Kn(r);try{const n=await Zue(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Ua.get(s);a&&(Wr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Ba=!0:i.modifiedDocuments.size>0?Wr(a.Ba):i.removedDocuments.size>0&&(Wr(a.Ba),a.Ba=!1))}),await G_(t,n,e)}catch(n){await uv(n)}}function JF(r,e,t){const n=Kn(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.ka.forEach((s,a)=>{const o=a.view.sa(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=Kn(a);l.onlineState=o;let c=!1;l.queries.forEach((u,f)=>{for(const d of f.ta)d.sa(o)&&(c=!0)}),c&&zD(l)}(n.eventManager,e),i.length&&n.La.p_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function jfe(r,e,t){const n=Kn(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Ua.get(e),s=i&&i.key;if(s){let a=new Ui(En.comparator);a=a.insert(s,ja.newNoDocument(s,Wn.min()));const o=_r().add(s),l=new oA(Wn.min(),new Map,new Ui(ar),a,o);await pH(n,l),n.$a=n.$a.remove(s),n.Ua.delete(e),HD(n)}else await PL(n.localStore,e,!1).then(()=>BL(n,e,t)).catch(uv)}async function zfe(r,e){const t=Kn(r),n=e.batch.batchId;try{const i=await que(t.localStore,e);gH(t,n,null),mH(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await G_(t,i)}catch(i){await uv(i)}}async function Vfe(r,e,t){const n=Kn(r);try{const i=await function(a,o){const l=Kn(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(f=>(Wr(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);gH(n,e,t),mH(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await G_(n,i)}catch(i){await uv(i)}}function mH(r,e){(r.Ga.get(e)||[]).forEach(t=>{t.resolve()}),r.Ga.delete(e)}function gH(r,e,t){const n=Kn(r);let i=n.Wa[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),n.Wa[n.currentUser.toKey()]=i}}function BL(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.qa.get(e))r.ka.delete(n),t&&r.La.Ja(n,t);r.qa.delete(e),r.isPrimaryClient&&r.Ka.br(e).forEach(n=>{r.Ka.containsKey(n)||vH(r,n)})}function vH(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(kD(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ua.delete(t),HD(r))}function XF(r,e,t){for(const n of t)n instanceof fH?(r.Ka.addReference(n.key,e),Gfe(r,n)):n instanceof dH?(un(GD,"Document no longer in limbo: "+n.key),r.Ka.removeReference(n.key,e),r.Ka.containsKey(n.key)||vH(r,n.key)):jn()}function Gfe(r,e){const t=e.key,n=t.path.canonicalString();r.$a.get(t)||r.Qa.has(n)||(un(GD,"New document in limbo: "+t),r.Qa.add(n),HD(r))}function HD(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new En(fi.fromString(e)),n=r.za.next();r.Ua.set(n,new Dfe(t)),r.$a=r.$a.insert(t,n),sH(r.remoteStore,new fh(Cu(nA(t.path)),n,"TargetPurposeLimboResolution",ZM.ae))}}async function G_(r,e,t){const n=Kn(r),i=[],s=[],a=[];n.ka.isEmpty()||(n.ka.forEach((o,l)=>{a.push(n.Ha(l,e,t).then(c=>{var u;if((c||t)&&n.isPrimaryClient){const f=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=ND.Yi(l.targetId,c);s.push(f)}}))}),await Promise.all(a),n.La.p_(i),await async function(l,c){const u=Kn(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Nt.forEach(c,d=>Nt.forEach(d.Hi,p=>u.persistence.referenceDelegate.addReference(f,d.targetId,p)).next(()=>Nt.forEach(d.Ji,p=>u.persistence.referenceDelegate.removeReference(f,d.targetId,p)))))}catch(f){if(!fv(f))throw f;un(DD,"Failed to update sequence numbers: "+f)}for(const f of c){const d=f.targetId;if(!f.fromCache){const p=u.Ts.get(d),g=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(g);u.Ts=u.Ts.insert(d,_)}}}(n.localStore,s))}async function Hfe(r,e){const t=Kn(r);if(!t.currentUser.isEqual(e)){un(GD,"User change. New user:",e.toKey());const n=await tH(t.localStore,e);t.currentUser=e,function(s,a){s.Ga.forEach(o=>{o.forEach(l=>{l.reject(new tn(At.CANCELLED,a))})}),s.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await G_(t,n.Rs)}}function Wfe(r,e){const t=Kn(r),n=t.Ua.get(e);if(n&&n.Ba)return _r().add(n.key);{let i=_r();const s=t.qa.get(e);if(!s)return i;for(const a of s){const o=t.ka.get(a);i=i.unionWith(o.view.Sa)}return i}}function yH(r){const e=Kn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=pH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jfe.bind(null,e),e.La.p_=Efe.bind(null,e.eventManager),e.La.Ja=Ife.bind(null,e.eventManager),e}function Yfe(r){const e=Kn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vfe.bind(null,e),e}class dC{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lA(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return Kue(this.persistence,new Jue,e.initialUser,this.serializer)}Xa(e){return new eH(LD.ri,this.serializer)}Za(e){return new rfe}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dC.provider={build:()=>new dC};class Jfe extends dC{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Wr(this.persistence.referenceDelegate instanceof uC);const n=this.persistence.referenceDelegate.garbageCollector;return new Due(n,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Lo.withCacheSize(this.cacheSizeBytes):Lo.DEFAULT;return new eH(n=>uC.ri(n,t),this.serializer)}}class UL{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>JF(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hfe.bind(null,this.syncEngine),await Mfe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Tfe}()}createDatastore(e){const t=lA(e.databaseInfo.databaseId),n=function(s){return new lfe(s)}(e.databaseInfo);return function(s,a,o,l){return new dfe(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,s,a,o){return new pfe(n,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,t=>JF(this.syncEngine,t,0),function(){return zF.D()?new zF:new ife}())}createSyncEngine(e,t){return function(i,s,a,o,l,c,u){const f=new kfe(i,s,a,o,l,c);return u&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Kn(i);un(Vm,"RemoteStore shutting down."),s.W_.add(5),await V_(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}UL.provider={build:()=>new UL};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Kf("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="FirestoreClient";class Xfe{constructor(e,t,n,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Ua.UNAUTHENTICATED,this.clientId=pG.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async a=>{un(Eh,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(un(Eh,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=BD(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function XE(r,e){r.asyncQueue.verifyOperationInProgress(),un(Eh,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await tH(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function QF(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Qfe(r);un(Eh,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>GF(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>GF(e.remoteStore,i)),r._onlineComponents=e}async function Qfe(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){un(Eh,"Using user provided OfflineComponentProvider");try{await XE(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===At.FAILED_PRECONDITION||i.code===At.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;T1("Error using user provided cache. Falling back to memory cache: "+t),await XE(r,new dC)}}else un(Eh,"Using default OfflineComponentProvider"),await XE(r,new Jfe(void 0));return r._offlineComponents}async function wH(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(un(Eh,"Using user provided OnlineComponentProvider"),await QF(r,r._uninitializedComponentsProvider._online)):(un(Eh,"Using default OnlineComponentProvider"),await QF(r,new UL))),r._onlineComponents}function Kfe(r){return wH(r).then(e=>e.syncEngine)}async function hC(r){const e=await wH(r),t=e.eventManager;return t.onListen=Rfe.bind(null,e.syncEngine),t.onUnlisten=Ffe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Pfe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Bfe.bind(null,e.syncEngine),t}function qfe(r,e,t={}){const n=new jf;return r.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const u=new WD({next:d=>{u.su(),a.enqueueAndForget(()=>jD(s,f));const p=d.docs.has(o);!p&&d.fromCache?c.reject(new tn(At.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&l&&l.source==="server"?c.reject(new tn(At.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),f=new VD(nA(o.path),u,{includeMetadataChanges:!0,Ta:!0});return UD(s,f)}(await hC(r),r.asyncQueue,e,t,n)),n.promise}function Zfe(r,e,t={}){const n=new jf;return r.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const u=new WD({next:d=>{u.su(),a.enqueueAndForget(()=>jD(s,f)),d.fromCache&&l.source==="server"?c.reject(new tn(At.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),f=new VD(o,u,{includeMetadataChanges:!0,Ta:!0});return UD(s,f)}(await hC(r),r.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _H(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bH(r,e,t){if(!t)throw new tn(At.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function $fe(r,e,t,n){if(e===!0&&n===!0)throw new tn(At.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function qF(r){if(!En.isDocumentKey(r))throw new tn(At.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ZF(r){if(En.isDocumentKey(r))throw new tn(At.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function fA(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":jn()}function Po(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new tn(At.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fA(r);throw new tn(At.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function ede(r,e){if(e<=0)throw new tn(At.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SH="firestore.googleapis.com",$F=!0;class eB{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new tn(At.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SH,this.ssl=$F}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:$F;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$G;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Lue)throw new tn(At.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$fe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_H((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new tn(At.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new tn(At.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new tn(At.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dA{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eB({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tn(At.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new tn(At.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eB(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new oce;switch(n.type){case"firstParty":return new fce(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new tn(At.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=KF.get(t);n&&(un("ComponentProvider","Removing Datastore"),KF.delete(t),n.terminate())}(this),Promise.resolve()}}function tde(r,e,t,n={}){var i;const s=(r=Po(r,dA))._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:r._getEmulatorOptions()}),o=`${e}:${t}`;s.host!==SH&&s.host!==o&&T1("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:o,ssl:!1,emulatorOptions:n});if(!Jf(l,a)&&(r._setSettings(l),n.mockUserToken)){let c,u;if(typeof n.mockUserToken=="string")c=n.mockUserToken,u=Ua.MOCK_USER;else{c=Ase(n.mockUserToken,(i=r._app)===null||i===void 0?void 0:i.options.projectId);const f=n.mockUserToken.sub||n.mockUserToken.user_id;if(!f)throw new tn(At.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ua(f)}r._authCredentials=new lce(new dG(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Jc(this.firestore,e,this._query)}}class Ga{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ga(this.firestore,e,this._key)}}class wh extends Jc{constructor(e,t,n){super(e,t,nA(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ga(this.firestore,null,new En(e))}withConverter(e){return new wh(this.firestore,e,this._path)}}function dh(r,e,...t){if(r=Bs(r),bH("collection","path",e),r instanceof dA){const n=fi.fromString(e,...t);return ZF(n),new wh(r,null,n)}{if(!(r instanceof Ga||r instanceof wh))throw new tn(At.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(fi.fromString(e,...t));return ZF(n),new wh(r.firestore,null,n)}}function Qr(r,e,...t){if(r=Bs(r),arguments.length===1&&(e=pG.newId()),bH("doc","path",e),r instanceof dA){const n=fi.fromString(e,...t);return qF(n),new Ga(r,null,new En(n))}{if(!(r instanceof Ga||r instanceof wh))throw new tn(At.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(fi.fromString(e,...t));return qF(n),new Ga(r.firestore,r instanceof wh?r.converter:null,new En(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="AsyncQueue";class nB{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new rH(this,"async_queue_retry"),this.Su=()=>{const n=JE();n&&un(tB,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.bu=e;const t=JE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=JE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new jf;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!fv(e))throw e;un(tB,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(n=>{this.gu=n,this.pu=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw Kf("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.pu=!1,n))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=FD.createAndSchedule(this,e,t,n,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&jn()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function rB(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(r,["next","error","complete"])}class Zf extends dA{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new nB,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nB(e),this._firestoreClient=void 0,await e}}}function nde(r,e){const t=typeof r=="object"?r:bV(),n=typeof r=="string"?r:iC,i=oD(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=Cse("firestore");s&&tde(i,...s)}return i}function hA(r){if(r._terminated)throw new tn(At.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||rde(r),r._firestoreClient}function rde(r){var e,t,n;const i=r._freezeSettings(),s=function(o,l,c,u){return new Ace(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,_H(u.experimentalLongPollingOptions),u.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new Xfe(r._authCredentials,r._appCheckCredentials,r._queue,s,r._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this._byteString=e}static fromBase64String(e){try{return new O1(ba.fromBase64String(e))}catch(t){throw new tn(At.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new O1(ba.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new tn(At.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ya(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new tn(At.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new tn(At.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ar(this._lat,e._lat)||ar(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ide=/^__.*__$/;class sde{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Yh(e,this.data,this.fieldMask,t,this.fieldTransforms):new j_(e,this.data,t,this.fieldTransforms)}}class xH{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Yh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CH(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jn()}}class mA{constructor(e,t,n,i,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new mA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:n,Qu:!1});return i.$u(e),i}Uu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:n,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return pC(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(CH(this.Lu)&&ide.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class ade{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||lA(e)}ju(e,t,n,i=!1){return new mA({Lu:e,methodName:t,zu:n,path:ya.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function H_(r){const e=r._freezeSettings(),t=lA(r._databaseId);return new ade(r._databaseId,!!e.ignoreUndefinedProperties,t)}function MH(r,e,t,n,i,s={}){const a=r.ju(s.merge||s.mergeFields?2:0,e,t,i);qD("Data must be an object, but it was:",a,n);const o=EH(n,a);let l,c;if(s.merge)l=new cl(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const d=jL(e,f,t);if(!a.contains(d))throw new tn(At.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);LH(u,d)||u.push(d)}l=new cl(u),c=a.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=a.fieldTransforms;return new sde(new ko(o),l,c)}class gA extends hv{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gA}}function AH(r,e,t){return new mA({Lu:3,zu:e.settings.zu,methodName:r._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class XD extends hv{_toFieldTransform(e){return new CD(e.path,new Jw)}isEqual(e){return e instanceof XD}}class QD extends hv{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=AH(this,e,!0),n=this.Hu.map(s=>lg(s,t)),i=new D1(n);return new CD(e.path,i)}isEqual(e){return e instanceof QD&&Jf(this.Hu,e.Hu)}}class KD extends hv{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=AH(this,e,!0),n=this.Hu.map(s=>lg(s,t)),i=new k1(n);return new CD(e.path,i)}isEqual(e){return e instanceof KD&&Jf(this.Hu,e.Hu)}}function ode(r,e,t,n){const i=r.ju(1,e,t);qD("Data must be an object, but it was:",i,n);const s=[],a=ko.empty();Hh(n,(l,c)=>{const u=ZD(e,l,t);c=Bs(c);const f=i.Uu(u);if(c instanceof gA)s.push(u);else{const d=lg(c,f);d!=null&&(s.push(u),a.set(u,d))}});const o=new cl(s);return new xH(a,o,i.fieldTransforms)}function lde(r,e,t,n,i,s){const a=r.ju(1,e,t),o=[jL(e,n,t)],l=[i];if(s.length%2!=0)throw new tn(At.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)o.push(jL(e,s[d])),l.push(s[d+1]);const c=[],u=ko.empty();for(let d=o.length-1;d>=0;--d)if(!LH(c,o[d])){const p=o[d];let g=l[d];g=Bs(g);const _=a.Uu(p);if(g instanceof gA)c.push(p);else{const w=lg(g,_);w!=null&&(c.push(p),u.set(p,w))}}const f=new cl(c);return new xH(u,f,a.fieldTransforms)}function TH(r,e,t,n=!1){return lg(t,r.ju(n?4:3,e))}function lg(r,e){if(IH(r=Bs(r)))return qD("Unsupported field value:",e,r),EH(r,e);if(r instanceof hv)return function(n,i){if(!CH(i.Lu))throw i.Wu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(n,i){const s=[];let a=0;for(const o of n){let l=lg(o,i.Ku(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(r,e)}return function(n,i){if((n=Bs(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Qce(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Rs.fromDate(n);return{timestampValue:cC(i.serializer,s)}}if(n instanceof Rs){const s=new Rs(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:cC(i.serializer,s)}}if(n instanceof YD)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof O1)return{bytesValue:YG(i.serializer,n._byteString)};if(n instanceof Ga){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ED(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof JD)return function(a,o){return{mapValue:{fields:{[SG]:{stringValue:xG},[sC]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Wu("VectorValues must only contain numeric values.");return xD(o.serializer,c)})}}}}}}(n,i);throw i.Wu(`Unsupported field value: ${fA(n)}`)}(r,e)}function EH(r,e){const t={};return gG(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hh(r,(n,i)=>{const s=lg(i,e.qu(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function IH(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Rs||r instanceof YD||r instanceof O1||r instanceof Ga||r instanceof hv||r instanceof JD)}function qD(r,e,t){if(!IH(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const n=fA(t);throw n==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+n)}}function jL(r,e,t){if((e=Bs(e))instanceof pA)return e._internalPath;if(typeof e=="string")return ZD(r,e);throw pC("Field path arguments must be of type string or ",r,!1,void 0,t)}const cde=new RegExp("[~\\*/\\[\\]]");function ZD(r,e,t){if(e.search(cde)>=0)throw pC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new pA(...e.split("."))._internalPath}catch{throw pC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function pC(r,e,t,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new tn(At.INVALID_ARGUMENT,o+r+l)}function LH(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ga(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ude(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ude extends $D{data(){return super.data()}}function vA(r,e){return typeof e=="string"?ZD(r,e):e instanceof pA?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NH(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new tn(At.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ek{}class W_ extends ek{}function s1(r,e,...t){let n=[];e instanceof ek&&n.push(e),n=n.concat(t),function(s){const a=s.filter(l=>l instanceof tk).length,o=s.filter(l=>l instanceof yA).length;if(a>1||a>0&&o>0)throw new tn(At.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)r=i._apply(r);return r}class yA extends W_{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new yA(e,t,n)}_apply(e){const t=this._parse(e);return kH(e._query,t),new Jc(e.firestore,e.converter,LL(e._query,t))}_parse(e){const t=H_(e.firestore);return function(s,a,o,l,c,u,f){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new tn(At.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){oB(f,u);const g=[];for(const _ of f)g.push(aB(l,s,_));d={arrayValue:{values:g}}}else d=aB(l,s,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||oB(f,u),d=TH(o,a,f,u==="in"||u==="not-in");return _s.create(c,u,d)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function iB(r,e,t){const n=e,i=vA("where",r);return yA._create(i,n,t)}class tk extends ek{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new tk(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:Vc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)kH(a,l),a=LL(a,l)}(e._query,t),new Jc(e.firestore,e.converter,LL(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nk extends W_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new nk(e,t)}_apply(e){const t=function(i,s,a){if(i.startAt!==null)throw new tn(At.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new tn(At.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yw(s,a)}(e._query,this._field,this._direction);return new Jc(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new Wh(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function zL(r,e="asc"){const t=e,n=vA("orderBy",r);return nk._create(n,t)}class rk extends W_{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new rk(e,t,n)}_apply(e){return new Jc(e.firestore,e.converter,oC(e._query,this._limit,this._limitType))}}function sB(r){return ede("limit",r),rk._create("limit",r,"F")}class ik extends W_{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ik(e,t,n)}_apply(e){const t=DH(e,this.type,this._docOrFields,this._inclusive);return new Jc(e.firestore,e.converter,function(i,s){return new Wh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function fde(...r){return ik._create("startAt",r,!0)}class sk extends W_{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new sk(e,t,n)}_apply(e){const t=DH(e,this.type,this._docOrFields,this._inclusive);return new Jc(e.firestore,e.converter,function(i,s){return new Wh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function dde(...r){return sk._create("endAt",r,!0)}function DH(r,e,t,n){if(t[0]=Bs(t[0]),t[0]instanceof $D)return function(s,a,o,l,c){if(!l)throw new tn(At.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const f of r1(s))if(f.field.isKeyField())u.push(aC(a,l.key));else{const d=l.data.field(f.field);if(eA(d))throw new tn(At.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const p=f.field.canonicalString();throw new tn(At.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(d)}return new N1(u,c)}(r._query,r.firestore._databaseId,e,t[0]._document,n);{const i=H_(r.firestore);return function(a,o,l,c,u,f){const d=a.explicitOrderBy;if(u.length>d.length)throw new tn(At.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<u.length;g++){const _=u[g];if(d[g].field.isKeyField()){if(typeof _!="string")throw new tn(At.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof _}`);if(!SD(a)&&_.indexOf("/")!==-1)throw new tn(At.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${_}' contains a slash.`);const w=a.path.child(fi.fromString(_));if(!En.isDocumentKey(w))throw new tn(At.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${w}' is not because it contains an odd number of segments.`);const b=new En(w);p.push(aC(o,b))}else{const w=TH(l,c,_);p.push(w)}}return new N1(p,f)}(r._query,r.firestore._databaseId,i,e,t,n)}}function aB(r,e,t){if(typeof(t=Bs(t))=="string"){if(t==="")throw new tn(At.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SD(e)&&t.indexOf("/")!==-1)throw new tn(At.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(fi.fromString(t));if(!En.isDocumentKey(n))throw new tn(At.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return aC(r,new En(n))}if(t instanceof Ga)return aC(r,t._key);throw new tn(At.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fA(t)}.`)}function oB(r,e){if(!Array.isArray(r)||r.length===0)throw new tn(At.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kH(r,e){const t=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new tn(At.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new tn(At.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class hde{convertValue(e,t="none"){switch(Ah(e)){case 0:return null;case 1:return e.booleanValue;case 2:return is(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw jn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Hh(e,(i,s)=>{n[i]=this.convertValue(s,t)}),n}convertVectorValue(e){var t,n,i;const s=(i=(n=(t=e.fields)===null||t===void 0?void 0:t[sC].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(a=>is(a.doubleValue));return new JD(s)}convertGeoPoint(e){return new YD(is(e.latitude),is(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=tA(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gw(e));default:return null}}convertTimestamp(e){const t=Ch(e);return new Rs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=fi.fromString(e);Wr(ZG(n));const i=new Hw(n.get(1),n.get(3)),s=new En(n.popFirst(5));return i.isEqual(t)||Kf(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RH(r,e,t){let n;return n=r?r.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class PH extends $D{constructor(e,t,n,i,s,a){super(e,t,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _x(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(vA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class _x extends PH{data(e={}){return super.data(e)}}class OH{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qy(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new _x(this._firestore,this._userDataWriter,n.key,n,new Qy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new tn(At.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new _x(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Qy(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new _x(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Qy(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:pde(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function pde(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(r){r=Po(r,Ga);const e=Po(r.firestore,Zf);return qfe(hA(e),r._key).then(t=>BH(e,r,t))}class ak extends hde{constructor(e){super(),this.firestore=e}convertBytes(e){return new O1(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ga(this.firestore,null,t)}}function a1(r){r=Po(r,Jc);const e=Po(r.firestore,Zf),t=hA(e),n=new ak(e);return NH(r._query),Zfe(t,r._query).then(i=>new OH(e,n,r,i))}function mC(r,e,t){r=Po(r,Ga);const n=Po(r.firestore,Zf),i=RH(r.converter,e);return wA(n,[MH(H_(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,Vl.none())])}function va(r,e,t,...n){r=Po(r,Ga);const i=Po(r.firestore,Zf),s=H_(i);let a;return a=typeof(e=Bs(e))=="string"||e instanceof pA?lde(s,"updateDoc",r._key,e,t,n):ode(s,"updateDoc",r._key,e),wA(i,[a.toMutation(r._key,Vl.exists(!0))])}function mde(r){return wA(Po(r.firestore,Zf),[new MD(r._key,Vl.none())])}function FH(r,e){const t=Po(r.firestore,Zf),n=Qr(r),i=RH(r.converter,e);return wA(t,[MH(H_(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,Vl.exists(!1))]).then(()=>n)}function B1(r,...e){var t,n,i;r=Bs(r);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||rB(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(rB(e[a])){const f=e[a];e[a]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[a+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[a+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let l,c,u;if(r instanceof Ga)c=Po(r.firestore,Zf),u=nA(r._key.path),l={next:f=>{e[a]&&e[a](BH(c,r,f))},error:e[a+1],complete:e[a+2]};else{const f=Po(r,Jc);c=Po(f.firestore,Zf),u=f._query;const d=new ak(c);l={next:p=>{e[a]&&e[a](new OH(c,d,f,p))},error:e[a+1],complete:e[a+2]},NH(r._query)}return function(d,p,g,_){const w=new WD(_),b=new VD(p,w,g);return d.asyncQueue.enqueueAndForget(async()=>UD(await hC(d),b)),()=>{w.su(),d.asyncQueue.enqueueAndForget(async()=>jD(await hC(d),b))}}(hA(c),u,o,l)}function wA(r,e){return function(n,i){const s=new jf;return n.asyncQueue.enqueueAndForget(async()=>Ufe(await Kfe(n),i,s)),s.promise}(hA(r),e)}function BH(r,e,t){const n=t.docs.get(e._key),i=new ak(r);return new PH(r,i,e._key,n,new Qy(t.hasPendingWrites,t.fromCache),e.converter)}function gde(){return new XD("serverTimestamp")}function Gm(...r){return new QD("arrayUnion",r)}function Xw(...r){return new KD("arrayRemove",r)}(function(e,t=!0){(function(i){cv=i})(lv),M1(new Bm("firestore",(n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new Zf(new cce(n.getProvider("auth-internal")),new dce(a,n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new tn(At.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hw(c.options.projectId,u)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),gh(lF,cF,e),gh(lF,cF,"esm2017")})();const vde={apiKey:"AIzaSyDWx2yZLGV6LlDRzWN6il182qf7QSHyUjI",authDomain:"styloft-d3299.firebaseapp.com",projectId:"styloft-d3299",storageBucket:"styloft-d3299.firebasestorage.app",messagingSenderId:"179587982655",appId:"1:179587982655:web:f3d04a7ac3cb5863145f8a",measurementId:"G-M0DVTYB6X9"},UH=_V(vde),wr=nde(UH),ol=rce(UH),jH=new Tf;/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function yde(r,e,t){return(e=_de(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function lB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function zt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lB(Object(t),!0).forEach(function(n){yde(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):lB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function wde(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function _de(r){var e=wde(r,"string");return typeof e=="symbol"?e:e+""}const cB=()=>{};let ok={},zH={},VH=null,GH={mark:cB,measure:cB};try{typeof window<"u"&&(ok=window),typeof document<"u"&&(zH=document),typeof MutationObserver<"u"&&(VH=MutationObserver),typeof performance<"u"&&(GH=performance)}catch{}const{userAgent:uB=""}=ok.navigator||{},Ih=ok,yi=zH,fB=VH,S2=GH;Ih.document;const ld=!!yi.documentElement&&!!yi.head&&typeof yi.addEventListener=="function"&&typeof yi.createElement=="function",HH=~uB.indexOf("MSIE")||~uB.indexOf("Trident/");var bde=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,Sde=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,WH={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},xde={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},YH=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Ya="classic",_A="duotone",Cde="sharp",Mde="sharp-duotone",JH=[Ya,_A,Cde,Mde],Ade={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},Tde={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},Ede=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),Ide={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},Lde=["fak","fa-kit","fakd","fa-kit-duotone"],dB={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},Nde=["kit"],Dde={kit:{"fa-kit":"fak"}},kde=["fak","fakd"],Rde={kit:{fak:"fa-kit"}},hB={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},x2={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Pde=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Ode=["fak","fa-kit","fakd","fa-kit-duotone"],Fde={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},Bde={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},Ude={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},VL={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},jde=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],GL=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...Pde,...jde],zde=["solid","regular","light","thin","duotone","brands"],XH=[1,2,3,4,5,6,7,8,9,10],Vde=XH.concat([11,12,13,14,15,16,17,18,19,20]),Gde=[...Object.keys(Ude),...zde,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",x2.GROUP,x2.SWAP_OPACITY,x2.PRIMARY,x2.SECONDARY].concat(XH.map(r=>"".concat(r,"x"))).concat(Vde.map(r=>"w-".concat(r))),Hde={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const $f="___FONT_AWESOME___",HL=16,QH="fa",KH="svg-inline--fa",Hm="data-fa-i2svg",WL="data-fa-pseudo-element",Wde="data-fa-pseudo-element-pending",lk="data-prefix",ck="data-icon",pB="fontawesome-i2svg",Yde="async",Jde=["HTML","HEAD","STYLE","SCRIPT"],qH=(()=>{try{return!0}catch{return!1}})();function Y_(r){return new Proxy(r,{get(e,t){return t in e?e[t]:e[Ya]}})}const ZH=zt({},WH);ZH[Ya]=zt(zt(zt(zt({},{"fa-duotone":"duotone"}),WH[Ya]),dB.kit),dB["kit-duotone"]);const Xde=Y_(ZH),YL=zt({},Ide);YL[Ya]=zt(zt(zt(zt({},{duotone:"fad"}),YL[Ya]),hB.kit),hB["kit-duotone"]);const mB=Y_(YL),JL=zt({},VL);JL[Ya]=zt(zt({},JL[Ya]),Rde.kit);const uk=Y_(JL),XL=zt({},Bde);XL[Ya]=zt(zt({},XL[Ya]),Dde.kit);Y_(XL);const Qde=bde,$H="fa-layers-text",Kde=Sde,qde=zt({},Ade);Y_(qde);const Zde=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],QE=xde,$de=[...Nde,...Gde],dw=Ih.FontAwesomeConfig||{};function ehe(r){var e=yi.querySelector("script["+r+"]");if(e)return e.getAttribute(r)}function the(r){return r===""?!0:r==="false"?!1:r==="true"?!0:r}yi&&typeof yi.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[t,n]=e;const i=the(ehe(t));i!=null&&(dw[n]=i)});const e7={styleDefault:"solid",familyDefault:Ya,cssPrefix:QH,replacementClass:KH,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};dw.familyPrefix&&(dw.cssPrefix=dw.familyPrefix);const U1=zt(zt({},e7),dw);U1.autoReplaceSvg||(U1.observeMutations=!1);const Cn={};Object.keys(e7).forEach(r=>{Object.defineProperty(Cn,r,{enumerable:!0,set:function(e){U1[r]=e,hw.forEach(t=>t(Cn))},get:function(){return U1[r]}})});Object.defineProperty(Cn,"familyPrefix",{enumerable:!0,set:function(r){U1.cssPrefix=r,hw.forEach(e=>e(Cn))},get:function(){return U1.cssPrefix}});Ih.FontAwesomeConfig=Cn;const hw=[];function nhe(r){return hw.push(r),()=>{hw.splice(hw.indexOf(r),1)}}const Vd=HL,yu={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function rhe(r){if(!r||!ld)return;const e=yi.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=r;const t=yi.head.childNodes;let n=null;for(let i=t.length-1;i>-1;i--){const s=t[i],a=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(n=s)}return yi.head.insertBefore(e,n),r}const ihe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Qw(){let r=12,e="";for(;r-- >0;)e+=ihe[Math.random()*62|0];return e}function pv(r){const e=[];for(let t=(r||[]).length>>>0;t--;)e[t]=r[t];return e}function fk(r){return r.classList?pv(r.classList):(r.getAttribute("class")||"").split(" ").filter(e=>e)}function t7(r){return"".concat(r).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function she(r){return Object.keys(r||{}).reduce((e,t)=>e+"".concat(t,'="').concat(t7(r[t]),'" '),"").trim()}function bA(r){return Object.keys(r||{}).reduce((e,t)=>e+"".concat(t,": ").concat(r[t].trim(),";"),"")}function dk(r){return r.size!==yu.size||r.x!==yu.x||r.y!==yu.y||r.rotate!==yu.rotate||r.flipX||r.flipY}function ahe(r){let{transform:e,containerWidth:t,iconWidth:n}=r;const i={transform:"translate(".concat(t/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),a="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),o="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(a," ").concat(o)},c={transform:"translate(".concat(n/2*-1," -256)")};return{outer:i,inner:l,path:c}}function ohe(r){let{transform:e,width:t=HL,height:n=HL,startCentered:i=!1}=r,s="";return i&&HH?s+="translate(".concat(e.x/Vd-t/2,"em, ").concat(e.y/Vd-n/2,"em) "):i?s+="translate(calc(-50% + ".concat(e.x/Vd,"em), calc(-50% + ").concat(e.y/Vd,"em)) "):s+="translate(".concat(e.x/Vd,"em, ").concat(e.y/Vd,"em) "),s+="scale(".concat(e.size/Vd*(e.flipX?-1:1),", ").concat(e.size/Vd*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var lhe=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function n7(){const r=QH,e=KH,t=Cn.cssPrefix,n=Cn.replacementClass;let i=lhe;if(t!==r||n!==e){const s=new RegExp("\\.".concat(r,"\\-"),"g"),a=new RegExp("\\--".concat(r,"\\-"),"g"),o=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(t,"-")).replace(a,"--".concat(t,"-")).replace(o,".".concat(n))}return i}let gB=!1;function KE(){Cn.autoAddCss&&!gB&&(rhe(n7()),gB=!0)}var che={mixout(){return{dom:{css:n7,insertCss:KE}}},hooks(){return{beforeDOMElementCreation(){KE()},beforeI2svg(){KE()}}}};const ed=Ih||{};ed[$f]||(ed[$f]={});ed[$f].styles||(ed[$f].styles={});ed[$f].hooks||(ed[$f].hooks={});ed[$f].shims||(ed[$f].shims=[]);var wu=ed[$f];const r7=[],i7=function(){yi.removeEventListener("DOMContentLoaded",i7),gC=1,r7.map(r=>r())};let gC=!1;ld&&(gC=(yi.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(yi.readyState),gC||yi.addEventListener("DOMContentLoaded",i7));function uhe(r){ld&&(gC?setTimeout(r,0):r7.push(r))}function J_(r){const{tag:e,attributes:t={},children:n=[]}=r;return typeof r=="string"?t7(r):"<".concat(e," ").concat(she(t),">").concat(n.map(J_).join(""),"</").concat(e,">")}function vB(r,e,t){if(r&&r[e]&&r[e][t])return{prefix:e,iconName:t,icon:r[e][t]}}var qE=function(e,t,n,i){var s=Object.keys(e),a=s.length,o=t,l,c,u;for(n===void 0?(l=1,u=e[s[0]]):(l=0,u=n);l<a;l++)c=s[l],u=o(u,e[c],c,e);return u};function fhe(r){const e=[];let t=0;const n=r.length;for(;t<n;){const i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){const s=r.charCodeAt(t++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}function QL(r){const e=fhe(r);return e.length===1?e[0].toString(16):null}function dhe(r,e){const t=r.length;let n=r.charCodeAt(e),i;return n>=55296&&n<=56319&&t>e+1&&(i=r.charCodeAt(e+1),i>=56320&&i<=57343)?(n-55296)*1024+i-56320+65536:n}function yB(r){return Object.keys(r).reduce((e,t)=>{const n=r[t];return!!n.icon?e[n.iconName]=n.icon:e[t]=n,e},{})}function KL(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:n=!1}=t,i=yB(e);typeof wu.hooks.addPack=="function"&&!n?wu.hooks.addPack(r,yB(e)):wu.styles[r]=zt(zt({},wu.styles[r]||{}),i),r==="fas"&&KL("fa",e)}const{styles:Kw,shims:hhe}=wu,s7=Object.keys(uk),phe=s7.reduce((r,e)=>(r[e]=Object.keys(uk[e]),r),{});let hk=null,a7={},o7={},l7={},c7={},u7={};function mhe(r){return~$de.indexOf(r)}function ghe(r,e){const t=e.split("-"),n=t[0],i=t.slice(1).join("-");return n===r&&i!==""&&!mhe(i)?i:null}const f7=()=>{const r=n=>qE(Kw,(i,s,a)=>(i[a]=qE(s,n,{}),i),{});a7=r((n,i,s)=>(i[3]&&(n[i[3]]=s),i[2]&&i[2].filter(o=>typeof o=="number").forEach(o=>{n[o.toString(16)]=s}),n)),o7=r((n,i,s)=>(n[s]=s,i[2]&&i[2].filter(o=>typeof o=="string").forEach(o=>{n[o]=s}),n)),u7=r((n,i,s)=>{const a=i[2];return n[s]=s,a.forEach(o=>{n[o]=s}),n});const e="far"in Kw||Cn.autoFetchSvg,t=qE(hhe,(n,i)=>{const s=i[0];let a=i[1];const o=i[2];return a==="far"&&!e&&(a="fas"),typeof s=="string"&&(n.names[s]={prefix:a,iconName:o}),typeof s=="number"&&(n.unicodes[s.toString(16)]={prefix:a,iconName:o}),n},{names:{},unicodes:{}});l7=t.names,c7=t.unicodes,hk=SA(Cn.styleDefault,{family:Cn.familyDefault})};nhe(r=>{hk=SA(r.styleDefault,{family:Cn.familyDefault})});f7();function pk(r,e){return(a7[r]||{})[e]}function vhe(r,e){return(o7[r]||{})[e]}function pm(r,e){return(u7[r]||{})[e]}function d7(r){return l7[r]||{prefix:null,iconName:null}}function yhe(r){const e=c7[r],t=pk("fas",r);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function Lh(){return hk}const h7=()=>({prefix:null,iconName:null,rest:[]});function whe(r){let e=Ya;const t=s7.reduce((n,i)=>(n[i]="".concat(Cn.cssPrefix,"-").concat(i),n),{});return JH.forEach(n=>{(r.includes(t[n])||r.some(i=>phe[n].includes(i)))&&(e=n)}),e}function SA(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:t=Ya}=e,n=Xde[t][r];if(t===_A&&!r)return"fad";const i=mB[t][r]||mB[t][n],s=r in wu.styles?r:null;return i||s||null}function _he(r){let e=[],t=null;return r.forEach(n=>{const i=ghe(Cn.cssPrefix,n);i?t=i:n&&e.push(n)}),{iconName:t,rest:e}}function wB(r){return r.sort().filter((e,t,n)=>n.indexOf(e)===t)}function xA(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:t=!1}=e;let n=null;const i=GL.concat(Ode),s=wB(r.filter(f=>i.includes(f))),a=wB(r.filter(f=>!GL.includes(f))),o=s.filter(f=>(n=f,!YH.includes(f))),[l=null]=o,c=whe(s),u=zt(zt({},_he(a)),{},{prefix:SA(l,{family:c})});return zt(zt(zt({},u),Che({values:r,family:c,styles:Kw,config:Cn,canonical:u,givenPrefix:n})),bhe(t,n,u))}function bhe(r,e,t){let{prefix:n,iconName:i}=t;if(r||!n||!i)return{prefix:n,iconName:i};const s=e==="fa"?d7(i):{},a=pm(n,i);return i=s.iconName||a||i,n=s.prefix||n,n==="far"&&!Kw.far&&Kw.fas&&!Cn.autoFetchSvg&&(n="fas"),{prefix:n,iconName:i}}const She=JH.filter(r=>r!==Ya||r!==_A),xhe=Object.keys(VL).filter(r=>r!==Ya).map(r=>Object.keys(VL[r])).flat();function Che(r){const{values:e,family:t,canonical:n,givenPrefix:i="",styles:s={},config:a={}}=r,o=t===_A,l=e.includes("fa-duotone")||e.includes("fad"),c=a.familyDefault==="duotone",u=n.prefix==="fad"||n.prefix==="fa-duotone";if(!o&&(l||c||u)&&(n.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(n.prefix="fab"),!n.prefix&&She.includes(t)&&(Object.keys(s).find(d=>xhe.includes(d))||a.autoFetchSvg)){const d=Ede.get(t).defaultShortPrefixId;n.prefix=d,n.iconName=pm(n.prefix,n.iconName)||n.iconName}return(n.prefix==="fa"||i==="fa")&&(n.prefix=Lh()||"fas"),n}class Mhe{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.reduce(this._pullDefinitions,{});Object.keys(i).forEach(s=>{this.definitions[s]=zt(zt({},this.definitions[s]||{}),i[s]),KL(s,i[s]);const a=uk[Ya][s];a&&KL(a,i[s]),f7()})}reset(){this.definitions={}}_pullDefinitions(e,t){const n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map(i=>{const{prefix:s,iconName:a,icon:o}=n[i],l=o[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=o)}),e[s][a]=o}),e}}let _B=[],G0={};const o1={},Ahe=Object.keys(o1);function The(r,e){let{mixoutsTo:t}=e;return _B=r,G0={},Object.keys(o1).forEach(n=>{Ahe.indexOf(n)===-1&&delete o1[n]}),_B.forEach(n=>{const i=n.mixout?n.mixout():{};if(Object.keys(i).forEach(s=>{typeof i[s]=="function"&&(t[s]=i[s]),typeof i[s]=="object"&&Object.keys(i[s]).forEach(a=>{t[s]||(t[s]={}),t[s][a]=i[s][a]})}),n.hooks){const s=n.hooks();Object.keys(s).forEach(a=>{G0[a]||(G0[a]=[]),G0[a].push(s[a])})}n.provides&&n.provides(o1)}),t}function qL(r,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i];return(G0[r]||[]).forEach(a=>{e=a.apply(null,[e,...n])}),e}function Wm(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];(G0[r]||[]).forEach(s=>{s.apply(null,t)})}function Nh(){const r=arguments[0],e=Array.prototype.slice.call(arguments,1);return o1[r]?o1[r].apply(null,e):void 0}function ZL(r){r.prefix==="fa"&&(r.prefix="fas");let{iconName:e}=r;const t=r.prefix||Lh();if(e)return e=pm(t,e)||e,vB(p7.definitions,t,e)||vB(wu.styles,t,e)}const p7=new Mhe,Ehe=()=>{Cn.autoReplaceSvg=!1,Cn.observeMutations=!1,Wm("noAuto")},Ihe={i2svg:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ld?(Wm("beforeI2svg",r),Nh("pseudoElements2svg",r),Nh("i2svg",r)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=r;Cn.autoReplaceSvg===!1&&(Cn.autoReplaceSvg=!0),Cn.observeMutations=!0,uhe(()=>{Nhe({autoReplaceSvgRoot:e}),Wm("watch",r)})}},Lhe={icon:r=>{if(r===null)return null;if(typeof r=="object"&&r.prefix&&r.iconName)return{prefix:r.prefix,iconName:pm(r.prefix,r.iconName)||r.iconName};if(Array.isArray(r)&&r.length===2){const e=r[1].indexOf("fa-")===0?r[1].slice(3):r[1],t=SA(r[0]);return{prefix:t,iconName:pm(t,e)||e}}if(typeof r=="string"&&(r.indexOf("".concat(Cn.cssPrefix,"-"))>-1||r.match(Qde))){const e=xA(r.split(" "),{skipLookups:!0});return{prefix:e.prefix||Lh(),iconName:pm(e.prefix,e.iconName)||e.iconName}}if(typeof r=="string"){const e=Lh();return{prefix:e,iconName:pm(e,r)||r}}}},yl={noAuto:Ehe,config:Cn,dom:Ihe,parse:Lhe,library:p7,findIconDefinition:ZL,toHtml:J_},Nhe=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=yi}=r;(Object.keys(wu.styles).length>0||Cn.autoFetchSvg)&&ld&&Cn.autoReplaceSvg&&yl.dom.i2svg({node:e})};function CA(r,e){return Object.defineProperty(r,"abstract",{get:e}),Object.defineProperty(r,"html",{get:function(){return r.abstract.map(t=>J_(t))}}),Object.defineProperty(r,"node",{get:function(){if(!ld)return;const t=yi.createElement("div");return t.innerHTML=r.html,t.children}}),r}function Dhe(r){let{children:e,main:t,mask:n,attributes:i,styles:s,transform:a}=r;if(dk(a)&&t.found&&!n.found){const{width:o,height:l}=t,c={x:o/l/2,y:.5};i.style=bA(zt(zt({},s),{},{"transform-origin":"".concat(c.x+a.x/16,"em ").concat(c.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function khe(r){let{prefix:e,iconName:t,children:n,attributes:i,symbol:s}=r;const a=s===!0?"".concat(e,"-").concat(Cn.cssPrefix,"-").concat(t):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:zt(zt({},i),{},{id:a}),children:n}]}]}function mk(r){const{icons:{main:e,mask:t},prefix:n,iconName:i,transform:s,symbol:a,title:o,maskId:l,titleId:c,extra:u,watchable:f=!1}=r,{width:d,height:p}=t.found?t:e,g=kde.includes(n),_=[Cn.replacementClass,i?"".concat(Cn.cssPrefix,"-").concat(i):""].filter(k=>u.classes.indexOf(k)===-1).filter(k=>k!==""||!!k).concat(u.classes).join(" ");let w={children:[],attributes:zt(zt({},u.attributes),{},{"data-prefix":n,"data-icon":i,class:_,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(d," ").concat(p)})};const b=g&&!~u.classes.indexOf("fa-fw")?{width:"".concat(d/p*16*.0625,"em")}:{};f&&(w.attributes[Hm]=""),o&&(w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(c||Qw())},children:[o]}),delete w.attributes.title);const C=zt(zt({},w),{},{prefix:n,iconName:i,main:e,mask:t,maskId:l,transform:s,symbol:a,styles:zt(zt({},b),u.styles)}),{children:M,attributes:A}=t.found&&e.found?Nh("generateAbstractMask",C)||{children:[],attributes:{}}:Nh("generateAbstractIcon",C)||{children:[],attributes:{}};return C.children=M,C.attributes=A,a?khe(C):Dhe(C)}function bB(r){const{content:e,width:t,height:n,transform:i,title:s,extra:a,watchable:o=!1}=r,l=zt(zt(zt({},a.attributes),s?{title:s}:{}),{},{class:a.classes.join(" ")});o&&(l[Hm]="");const c=zt({},a.styles);dk(i)&&(c.transform=ohe({transform:i,startCentered:!0,width:t,height:n}),c["-webkit-transform"]=c.transform);const u=bA(c);u.length>0&&(l.style=u);const f=[];return f.push({tag:"span",attributes:l,children:[e]}),s&&f.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),f}function Rhe(r){const{content:e,title:t,extra:n}=r,i=zt(zt(zt({},n.attributes),t?{title:t}:{}),{},{class:n.classes.join(" ")}),s=bA(n.styles);s.length>0&&(i.style=s);const a=[];return a.push({tag:"span",attributes:i,children:[e]}),t&&a.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),a}const{styles:ZE}=wu;function $L(r){const e=r[0],t=r[1],[n]=r.slice(4);let i=null;return Array.isArray(n)?i={tag:"g",attributes:{class:"".concat(Cn.cssPrefix,"-").concat(QE.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Cn.cssPrefix,"-").concat(QE.SECONDARY),fill:"currentColor",d:n[0]}},{tag:"path",attributes:{class:"".concat(Cn.cssPrefix,"-").concat(QE.PRIMARY),fill:"currentColor",d:n[1]}}]}:i={tag:"path",attributes:{fill:"currentColor",d:n}},{found:!0,width:e,height:t,icon:i}}const Phe={found:!1,width:512,height:512};function Ohe(r,e){!qH&&!Cn.showMissingIcons&&r&&console.error('Icon with name "'.concat(r,'" and prefix "').concat(e,'" is missing.'))}function e3(r,e){let t=e;return e==="fa"&&Cn.styleDefault!==null&&(e=Lh()),new Promise((n,i)=>{if(t==="fa"){const s=d7(r)||{};r=s.iconName||r,e=s.prefix||e}if(r&&e&&ZE[e]&&ZE[e][r]){const s=ZE[e][r];return n($L(s))}Ohe(r,e),n(zt(zt({},Phe),{},{icon:Cn.showMissingIcons&&r?Nh("missingIconAbstract")||{}:{}}))})}const SB=()=>{},t3=Cn.measurePerformance&&S2&&S2.mark&&S2.measure?S2:{mark:SB,measure:SB},Ky='FA "6.7.2"',Fhe=r=>(t3.mark("".concat(Ky," ").concat(r," begins")),()=>m7(r)),m7=r=>{t3.mark("".concat(Ky," ").concat(r," ends")),t3.measure("".concat(Ky," ").concat(r),"".concat(Ky," ").concat(r," begins"),"".concat(Ky," ").concat(r," ends"))};var gk={begin:Fhe,end:m7};const bx=()=>{};function xB(r){return typeof(r.getAttribute?r.getAttribute(Hm):null)=="string"}function Bhe(r){const e=r.getAttribute?r.getAttribute(lk):null,t=r.getAttribute?r.getAttribute(ck):null;return e&&t}function Uhe(r){return r&&r.classList&&r.classList.contains&&r.classList.contains(Cn.replacementClass)}function jhe(){return Cn.autoReplaceSvg===!0?Sx.replace:Sx[Cn.autoReplaceSvg]||Sx.replace}function zhe(r){return yi.createElementNS("http://www.w3.org/2000/svg",r)}function Vhe(r){return yi.createElement(r)}function g7(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:t=r.tag==="svg"?zhe:Vhe}=e;if(typeof r=="string")return yi.createTextNode(r);const n=t(r.tag);return Object.keys(r.attributes||[]).forEach(function(s){n.setAttribute(s,r.attributes[s])}),(r.children||[]).forEach(function(s){n.appendChild(g7(s,{ceFn:t}))}),n}function Ghe(r){let e=" ".concat(r.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const Sx={replace:function(r){const e=r[0];if(e.parentNode)if(r[1].forEach(t=>{e.parentNode.insertBefore(g7(t),e)}),e.getAttribute(Hm)===null&&Cn.keepOriginalSource){let t=yi.createComment(Ghe(e));e.parentNode.replaceChild(t,e)}else e.remove()},nest:function(r){const e=r[0],t=r[1];if(~fk(e).indexOf(Cn.replacementClass))return Sx.replace(r);const n=new RegExp("".concat(Cn.cssPrefix,"-.*"));if(delete t[0].attributes.id,t[0].attributes.class){const s=t[0].attributes.class.split(" ").reduce((a,o)=>(o===Cn.replacementClass||o.match(n)?a.toSvg.push(o):a.toNode.push(o),a),{toNode:[],toSvg:[]});t[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const i=t.map(s=>J_(s)).join(`
`);e.setAttribute(Hm,""),e.innerHTML=i}};function CB(r){r()}function v7(r,e){const t=typeof e=="function"?e:bx;if(r.length===0)t();else{let n=CB;Cn.mutateApproach===Yde&&(n=Ih.requestAnimationFrame||CB),n(()=>{const i=jhe(),s=gk.begin("mutate");r.map(i),s(),t()})}}let vk=!1;function y7(){vk=!0}function n3(){vk=!1}let vC=null;function MB(r){if(!fB||!Cn.observeMutations)return;const{treeCallback:e=bx,nodeCallback:t=bx,pseudoElementsCallback:n=bx,observeMutationsRoot:i=yi}=r;vC=new fB(s=>{if(vk)return;const a=Lh();pv(s).forEach(o=>{if(o.type==="childList"&&o.addedNodes.length>0&&!xB(o.addedNodes[0])&&(Cn.searchPseudoElements&&n(o.target),e(o.target)),o.type==="attributes"&&o.target.parentNode&&Cn.searchPseudoElements&&n(o.target.parentNode),o.type==="attributes"&&xB(o.target)&&~Zde.indexOf(o.attributeName))if(o.attributeName==="class"&&Bhe(o.target)){const{prefix:l,iconName:c}=xA(fk(o.target));o.target.setAttribute(lk,l||a),c&&o.target.setAttribute(ck,c)}else Uhe(o.target)&&t(o.target)})}),ld&&vC.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function Hhe(){vC&&vC.disconnect()}function Whe(r){const e=r.getAttribute("style");let t=[];return e&&(t=e.split(";").reduce((n,i)=>{const s=i.split(":"),a=s[0],o=s.slice(1);return a&&o.length>0&&(n[a]=o.join(":").trim()),n},{})),t}function Yhe(r){const e=r.getAttribute("data-prefix"),t=r.getAttribute("data-icon"),n=r.innerText!==void 0?r.innerText.trim():"";let i=xA(fk(r));return i.prefix||(i.prefix=Lh()),e&&t&&(i.prefix=e,i.iconName=t),i.iconName&&i.prefix||(i.prefix&&n.length>0&&(i.iconName=vhe(i.prefix,r.innerText)||pk(i.prefix,QL(r.innerText))),!i.iconName&&Cn.autoFetchSvg&&r.firstChild&&r.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=r.firstChild.data)),i}function Jhe(r){const e=pv(r.attributes).reduce((i,s)=>(i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i),{}),t=r.getAttribute("title"),n=r.getAttribute("data-fa-title-id");return Cn.autoA11y&&(t?e["aria-labelledby"]="".concat(Cn.replacementClass,"-title-").concat(n||Qw()):(e["aria-hidden"]="true",e.focusable="false")),e}function Xhe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:yu,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function AB(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:t,prefix:n,rest:i}=Yhe(r),s=Jhe(r),a=qL("parseNodeAttributes",{},r);let o=e.styleParser?Whe(r):[];return zt({iconName:t,title:r.getAttribute("title"),titleId:r.getAttribute("data-fa-title-id"),prefix:n,transform:yu,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:o,attributes:s}},a)}const{styles:Qhe}=wu;function w7(r){const e=Cn.autoReplaceSvg==="nest"?AB(r,{styleParser:!1}):AB(r);return~e.extra.classes.indexOf($H)?Nh("generateLayersText",r,e):Nh("generateSvgReplacementMutation",r,e)}function Khe(){return[...Lde,...GL]}function TB(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ld)return Promise.resolve();const t=yi.documentElement.classList,n=u=>t.add("".concat(pB,"-").concat(u)),i=u=>t.remove("".concat(pB,"-").concat(u)),s=Cn.autoFetchSvg?Khe():YH.concat(Object.keys(Qhe));s.includes("fa")||s.push("fa");const a=[".".concat($H,":not([").concat(Hm,"])")].concat(s.map(u=>".".concat(u,":not([").concat(Hm,"])"))).join(", ");if(a.length===0)return Promise.resolve();let o=[];try{o=pv(r.querySelectorAll(a))}catch{}if(o.length>0)n("pending"),i("complete");else return Promise.resolve();const l=gk.begin("onTree"),c=o.reduce((u,f)=>{try{const d=w7(f);d&&u.push(d)}catch(d){qH||d.name==="MissingIcon"&&console.error(d)}return u},[]);return new Promise((u,f)=>{Promise.all(c).then(d=>{v7(d,()=>{n("active"),n("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(d=>{l(),f(d)})})}function qhe(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;w7(r).then(t=>{t&&v7([t],e)})}function Zhe(r){return function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=(e||{}).icon?e:ZL(e||{});let{mask:i}=t;return i&&(i=(i||{}).icon?i:ZL(i||{})),r(n,zt(zt({},t),{},{mask:i}))}}const $he=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:t=yu,symbol:n=!1,mask:i=null,maskId:s=null,title:a=null,titleId:o=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!r)return;const{prefix:f,iconName:d,icon:p}=r;return CA(zt({type:"icon"},r),()=>(Wm("beforeDOMElementCreation",{iconDefinition:r,params:e}),Cn.autoA11y&&(a?c["aria-labelledby"]="".concat(Cn.replacementClass,"-title-").concat(o||Qw()):(c["aria-hidden"]="true",c.focusable="false")),mk({icons:{main:$L(p),mask:i?$L(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:f,iconName:d,transform:zt(zt({},yu),t),symbol:n,title:a,maskId:s,titleId:o,extra:{attributes:c,styles:u,classes:l}})))};var epe={mixout(){return{icon:Zhe($he)}},hooks(){return{mutationObserverCallbacks(r){return r.treeCallback=TB,r.nodeCallback=qhe,r}}},provides(r){r.i2svg=function(e){const{node:t=yi,callback:n=()=>{}}=e;return TB(t,n)},r.generateSvgReplacementMutation=function(e,t){const{iconName:n,title:i,titleId:s,prefix:a,transform:o,symbol:l,mask:c,maskId:u,extra:f}=t;return new Promise((d,p)=>{Promise.all([e3(n,a),c.iconName?e3(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(g=>{let[_,w]=g;d([e,mk({icons:{main:_,mask:w},prefix:a,iconName:n,transform:o,symbol:l,maskId:u,title:i,titleId:s,extra:f,watchable:!0})])}).catch(p)})},r.generateAbstractIcon=function(e){let{children:t,attributes:n,main:i,transform:s,styles:a}=e;const o=bA(a);o.length>0&&(n.style=o);let l;return dk(s)&&(l=Nh("generateAbstractTransformGrouping",{main:i,transform:s,containerWidth:i.width,iconWidth:i.width})),t.push(l||i.icon),{children:t,attributes:n}}}},tpe={mixout(){return{layer(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:t=[]}=e;return CA({type:"layer"},()=>{Wm("beforeDOMElementCreation",{assembler:r,params:e});let n=[];return r(i=>{Array.isArray(i)?i.map(s=>{n=n.concat(s.abstract)}):n=n.concat(i.abstract)}),[{tag:"span",attributes:{class:["".concat(Cn.cssPrefix,"-layers"),...t].join(" ")},children:n}]})}}}},npe={mixout(){return{counter(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:t=null,classes:n=[],attributes:i={},styles:s={}}=e;return CA({type:"counter",content:r},()=>(Wm("beforeDOMElementCreation",{content:r,params:e}),Rhe({content:r.toString(),title:t,extra:{attributes:i,styles:s,classes:["".concat(Cn.cssPrefix,"-layers-counter"),...n]}})))}}}},rpe={mixout(){return{text(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:t=yu,title:n=null,classes:i=[],attributes:s={},styles:a={}}=e;return CA({type:"text",content:r},()=>(Wm("beforeDOMElementCreation",{content:r,params:e}),bB({content:r,transform:zt(zt({},yu),t),title:n,extra:{attributes:s,styles:a,classes:["".concat(Cn.cssPrefix,"-layers-text"),...i]}})))}}},provides(r){r.generateLayersText=function(e,t){const{title:n,transform:i,extra:s}=t;let a=null,o=null;if(HH){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();a=c.width/l,o=c.height/l}return Cn.autoA11y&&!n&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,bB({content:e.innerHTML,width:a,height:o,transform:i,title:n,extra:s,watchable:!0})])}}};const ipe=new RegExp('"',"ug"),EB=[1105920,1112319],IB=zt(zt(zt(zt({},{FontAwesome:{normal:"fas",400:"fas"}}),Tde),Hde),Fde),r3=Object.keys(IB).reduce((r,e)=>(r[e.toLowerCase()]=IB[e],r),{}),spe=Object.keys(r3).reduce((r,e)=>{const t=r3[e];return r[e]=t[900]||[...Object.entries(t)][0][1],r},{});function ape(r){const e=r.replace(ipe,""),t=dhe(e,0),n=t>=EB[0]&&t<=EB[1],i=e.length===2?e[0]===e[1]:!1;return{value:QL(i?e[0]:e),isSecondary:n||i}}function ope(r,e){const t=r.replace(/^['"]|['"]$/g,"").toLowerCase(),n=parseInt(e),i=isNaN(n)?"normal":n;return(r3[t]||{})[i]||spe[t]}function LB(r,e){const t="".concat(Wde).concat(e.replace(":","-"));return new Promise((n,i)=>{if(r.getAttribute(t)!==null)return n();const a=pv(r.children).filter(d=>d.getAttribute(WL)===e)[0],o=Ih.getComputedStyle(r,e),l=o.getPropertyValue("font-family"),c=l.match(Kde),u=o.getPropertyValue("font-weight"),f=o.getPropertyValue("content");if(a&&!c)return r.removeChild(a),n();if(c&&f!=="none"&&f!==""){const d=o.getPropertyValue("content");let p=ope(l,u);const{value:g,isSecondary:_}=ape(d),w=c[0].startsWith("FontAwesome");let b=pk(p,g),C=b;if(w){const M=yhe(g);M.iconName&&M.prefix&&(b=M.iconName,p=M.prefix)}if(b&&!_&&(!a||a.getAttribute(lk)!==p||a.getAttribute(ck)!==C)){r.setAttribute(t,C),a&&r.removeChild(a);const M=Xhe(),{extra:A}=M;A.attributes[WL]=e,e3(b,p).then(k=>{const O=mk(zt(zt({},M),{},{icons:{main:k,mask:h7()},prefix:p,iconName:C,extra:A,watchable:!0})),R=yi.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?r.insertBefore(R,r.firstChild):r.appendChild(R),R.outerHTML=O.map(I=>J_(I)).join(`
`),r.removeAttribute(t),n()}).catch(i)}else n()}else n()})}function lpe(r){return Promise.all([LB(r,"::before"),LB(r,"::after")])}function cpe(r){return r.parentNode!==document.head&&!~Jde.indexOf(r.tagName.toUpperCase())&&!r.getAttribute(WL)&&(!r.parentNode||r.parentNode.tagName!=="svg")}function NB(r){if(ld)return new Promise((e,t)=>{const n=pv(r.querySelectorAll("*")).filter(cpe).map(lpe),i=gk.begin("searchPseudoElements");y7(),Promise.all(n).then(()=>{i(),n3(),e()}).catch(()=>{i(),n3(),t()})})}var upe={hooks(){return{mutationObserverCallbacks(r){return r.pseudoElementsCallback=NB,r}}},provides(r){r.pseudoElements2svg=function(e){const{node:t=yi}=e;Cn.searchPseudoElements&&NB(t)}}};let DB=!1;var fpe={mixout(){return{dom:{unwatch(){y7(),DB=!0}}}},hooks(){return{bootstrap(){MB(qL("mutationObserverCallbacks",{}))},noAuto(){Hhe()},watch(r){const{observeMutationsRoot:e}=r;DB?n3():MB(qL("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const kB=r=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return r.toLowerCase().split(" ").reduce((t,n)=>{const i=n.toLowerCase().split("-"),s=i[0];let a=i.slice(1).join("-");if(s&&a==="h")return t.flipX=!0,t;if(s&&a==="v")return t.flipY=!0,t;if(a=parseFloat(a),isNaN(a))return t;switch(s){case"grow":t.size=t.size+a;break;case"shrink":t.size=t.size-a;break;case"left":t.x=t.x-a;break;case"right":t.x=t.x+a;break;case"up":t.y=t.y-a;break;case"down":t.y=t.y+a;break;case"rotate":t.rotate=t.rotate+a;break}return t},e)};var dpe={mixout(){return{parse:{transform:r=>kB(r)}}},hooks(){return{parseNodeAttributes(r,e){const t=e.getAttribute("data-fa-transform");return t&&(r.transform=kB(t)),r}}},provides(r){r.generateAbstractTransformGrouping=function(e){let{main:t,transform:n,containerWidth:i,iconWidth:s}=e;const a={transform:"translate(".concat(i/2," 256)")},o="translate(".concat(n.x*32,", ").concat(n.y*32,") "),l="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),c="rotate(".concat(n.rotate," 0 0)"),u={transform:"".concat(o," ").concat(l," ").concat(c)},f={transform:"translate(".concat(s/2*-1," -256)")},d={outer:a,inner:u,path:f};return{tag:"g",attributes:zt({},d.outer),children:[{tag:"g",attributes:zt({},d.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:zt(zt({},t.icon.attributes),d.path)}]}]}}}};const $E={x:0,y:0,width:"100%",height:"100%"};function RB(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r.attributes&&(r.attributes.fill||e)&&(r.attributes.fill="black"),r}function hpe(r){return r.tag==="g"?r.children:[r]}var ppe={hooks(){return{parseNodeAttributes(r,e){const t=e.getAttribute("data-fa-mask"),n=t?xA(t.split(" ").map(i=>i.trim())):h7();return n.prefix||(n.prefix=Lh()),r.mask=n,r.maskId=e.getAttribute("data-fa-mask-id"),r}}},provides(r){r.generateAbstractMask=function(e){let{children:t,attributes:n,main:i,mask:s,maskId:a,transform:o}=e;const{width:l,icon:c}=i,{width:u,icon:f}=s,d=ahe({transform:o,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:zt(zt({},$E),{},{fill:"white"})},g=c.children?{children:c.children.map(RB)}:{},_={tag:"g",attributes:zt({},d.inner),children:[RB(zt({tag:c.tag,attributes:zt(zt({},c.attributes),d.path)},g))]},w={tag:"g",attributes:zt({},d.outer),children:[_]},b="mask-".concat(a||Qw()),C="clip-".concat(a||Qw()),M={tag:"mask",attributes:zt(zt({},$E),{},{id:b,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,w]},A={tag:"defs",children:[{tag:"clipPath",attributes:{id:C},children:hpe(f)},M]};return t.push(A,{tag:"rect",attributes:zt({fill:"currentColor","clip-path":"url(#".concat(C,")"),mask:"url(#".concat(b,")")},$E)}),{children:t,attributes:n}}}},mpe={provides(r){let e=!1;Ih.matchMedia&&(e=Ih.matchMedia("(prefers-reduced-motion: reduce)").matches),r.missingIconAbstract=function(){const t=[],n={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};t.push({tag:"path",attributes:zt(zt({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=zt(zt({},i),{},{attributeName:"opacity"}),a={tag:"circle",attributes:zt(zt({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||a.children.push({tag:"animate",attributes:zt(zt({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:zt(zt({},s),{},{values:"1;0;1;1;0;1;"})}),t.push(a),t.push({tag:"path",attributes:zt(zt({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:zt(zt({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||t.push({tag:"path",attributes:zt(zt({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:zt(zt({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:t}}}},gpe={hooks(){return{parseNodeAttributes(r,e){const t=e.getAttribute("data-fa-symbol"),n=t===null?!1:t===""?!0:t;return r.symbol=n,r}}}},vpe=[che,epe,tpe,npe,rpe,upe,fpe,dpe,ppe,mpe,gpe];The(vpe,{mixoutsTo:yl});yl.noAuto;yl.config;yl.library;yl.dom;const i3=yl.parse;yl.findIconDefinition;yl.toHtml;const ype=yl.icon;yl.layer;yl.text;yl.counter;var e4={exports:{}},t4,PB;function wpe(){if(PB)return t4;PB=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return t4=r,t4}var n4,OB;function _pe(){if(OB)return n4;OB=1;var r=wpe();function e(){}function t(){}return t.resetWarningCache=e,n4=function(){function n(a,o,l,c,u,f){if(f!==r){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}n.isRequired=n;function i(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},n4}var FB;function bpe(){return FB||(FB=1,e4.exports=_pe()()),e4.exports}var Spe=bpe();const bn=pN(Spe);function BB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function pu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(t),!0).forEach(function(n){H0(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):BB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function yC(r){"@babel/helpers - typeof";return yC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yC(r)}function H0(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xpe(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function Cpe(r,e){if(r==null)return{};var t=xpe(r,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function s3(r){return Mpe(r)||Ape(r)||Tpe(r)||Epe()}function Mpe(r){if(Array.isArray(r))return a3(r)}function Ape(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Tpe(r,e){if(r){if(typeof r=="string")return a3(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a3(r,e)}}function a3(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Epe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ipe(r){var e,t=r.beat,n=r.fade,i=r.beatFade,s=r.bounce,a=r.shake,o=r.flash,l=r.spin,c=r.spinPulse,u=r.spinReverse,f=r.pulse,d=r.fixedWidth,p=r.inverse,g=r.border,_=r.listItem,w=r.flip,b=r.size,C=r.rotation,M=r.pull,A=(e={"fa-beat":t,"fa-fade":n,"fa-beat-fade":i,"fa-bounce":s,"fa-shake":a,"fa-flash":o,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":f,"fa-fw":d,"fa-inverse":p,"fa-border":g,"fa-li":_,"fa-flip":w===!0,"fa-flip-horizontal":w==="horizontal"||w==="both","fa-flip-vertical":w==="vertical"||w==="both"},H0(e,"fa-".concat(b),typeof b<"u"&&b!==null),H0(e,"fa-rotate-".concat(C),typeof C<"u"&&C!==null&&C!==0),H0(e,"fa-pull-".concat(M),typeof M<"u"&&M!==null),H0(e,"fa-swap-opacity",r.swapOpacity),e);return Object.keys(A).map(function(k){return A[k]?k:null}).filter(function(k){return k})}function Lpe(r){return r=r-0,r===r}function _7(r){return Lpe(r)?r:(r=r.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),r.substr(0,1).toLowerCase()+r.substr(1))}var Npe=["style"];function Dpe(r){return r.charAt(0).toUpperCase()+r.slice(1)}function kpe(r){return r.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n=t.indexOf(":"),i=_7(t.slice(0,n)),s=t.slice(n+1).trim();return i.startsWith("webkit")?e[Dpe(i)]=s:e[i]=s,e},{})}function b7(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var n=(e.children||[]).map(function(l){return b7(r,l)}),i=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=kpe(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[_7(c)]=u}return l},{attrs:{}}),s=t.style,a=s===void 0?{}:s,o=Cpe(t,Npe);return i.attrs.style=pu(pu({},i.attrs.style),a),r.apply(void 0,[e.tag,pu(pu({},i.attrs),o)].concat(s3(n)))}var S7=!1;try{S7=!0}catch{}function Rpe(){if(!S7&&console&&typeof console.error=="function"){var r;(r=console).error.apply(r,arguments)}}function UB(r){if(r&&yC(r)==="object"&&r.prefix&&r.iconName&&r.icon)return r;if(i3.icon)return i3.icon(r);if(r===null)return null;if(r&&yC(r)==="object"&&r.prefix&&r.iconName)return r;if(Array.isArray(r)&&r.length===2)return{prefix:r[0],iconName:r[1]};if(typeof r=="string")return{prefix:"fas",iconName:r}}function r4(r,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?H0({},r,e):{}}var jB={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Do=ir.forwardRef(function(r,e){var t=pu(pu({},jB),r),n=t.icon,i=t.mask,s=t.symbol,a=t.className,o=t.title,l=t.titleId,c=t.maskId,u=UB(n),f=r4("classes",[].concat(s3(Ipe(t)),s3((a||"").split(" ")))),d=r4("transform",typeof t.transform=="string"?i3.transform(t.transform):t.transform),p=r4("mask",UB(i)),g=ype(u,pu(pu(pu(pu({},f),d),p),{},{symbol:s,title:o,titleId:l,maskId:c}));if(!g)return Rpe("Could not find icon",u),null;var _=g.abstract,w={ref:e};return Object.keys(t).forEach(function(b){jB.hasOwnProperty(b)||(w[b]=t[b])}),Ppe(_[0],w)});Do.displayName="FontAwesomeIcon";Do.propTypes={beat:bn.bool,border:bn.bool,beatFade:bn.bool,bounce:bn.bool,className:bn.string,fade:bn.bool,flash:bn.bool,mask:bn.oneOfType([bn.object,bn.array,bn.string]),maskId:bn.string,fixedWidth:bn.bool,inverse:bn.bool,flip:bn.oneOf([!0,!1,"horizontal","vertical","both"]),icon:bn.oneOfType([bn.object,bn.array,bn.string]),listItem:bn.bool,pull:bn.oneOf(["right","left"]),pulse:bn.bool,rotation:bn.oneOf([0,90,180,270]),shake:bn.bool,size:bn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:bn.bool,spinPulse:bn.bool,spinReverse:bn.bool,symbol:bn.oneOfType([bn.bool,bn.string]),title:bn.string,titleId:bn.string,transform:bn.oneOfType([bn.string,bn.object]),swapOpacity:bn.bool};var Ppe=b7.bind(null,ir.createElement);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const Ope={prefix:"fas",iconName:"file-lines",icon:[384,512,[128441,128462,61686,"file-alt","file-text"],"f15c","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM112 256l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},Fpe=Ope,Bpe={prefix:"fas",iconName:"calendar-days",icon:[448,512,["calendar-alt"],"f073","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm64 80l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm128 0l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM64 400l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zm112 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16z"]},Upe=Bpe,jpe={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"]},zpe=jpe,Vpe={prefix:"fas",iconName:"image",icon:[512,512,[],"f03e","M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM323.8 202.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6L170.7 297c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4s12.4 13.6 21.6 13.6l96 0 32 0 208 0c8.9 0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"]},Gpe={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-242.7c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32L64 32zm0 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 224c-17.7 0-32-14.3-32-32l0-64zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},Hpe=Gpe,Wpe={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"]},Ype={prefix:"fas",iconName:"camera",icon:[512,512,[62258,"camera-alt"],"f030","M149.1 64.8L138.7 96 64 96C28.7 96 0 124.7 0 160L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64l-74.7 0L362.9 64.8C356.4 45.2 338.1 32 317.4 32L194.6 32c-20.7 0-39 13.2-45.5 32.8zM256 192a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"]},Jpe={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"]},Xpe=Jpe,Qpe={prefix:"fas",iconName:"copy",icon:[448,512,[],"f0c5","M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z"]},Kpe={prefix:"fas",iconName:"face-smile",icon:[512,512,[128578,"smile"],"f118","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM164.1 325.5C182 346.2 212.6 368 256 368s74-21.8 91.9-42.5c5.8-6.7 15.9-7.4 22.6-1.6s7.4 15.9 1.6 22.6C349.8 372.1 311.1 400 256 400s-93.8-27.9-116.1-53.5c-5.8-6.7-5.1-16.8 1.6-22.6s16.8-5.1 22.6 1.6zM144.4 208a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm192-32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},qpe=Kpe,Zpe={prefix:"fas",iconName:"thumbtack",icon:[384,512,[128204,128392,"thumb-tack"],"f08d","M32 32C32 14.3 46.3 0 64 0L320 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-29.5 0 11.4 148.2c36.7 19.9 65.7 53.2 79.5 94.7l1 3c3.3 9.8 1.6 20.5-4.4 28.8s-15.7 13.3-26 13.3L32 352c-10.3 0-19.9-4.9-26-13.3s-7.7-19.1-4.4-28.8l1-3c13.8-41.5 42.8-74.8 79.5-94.7L93.5 64 64 64C46.3 64 32 49.7 32 32zM160 384l64 0 0 96c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-96z"]},$pe={prefix:"fas",iconName:"paper-plane",icon:[512,512,[61913],"f1d8","M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480l0-83.6c0-4 1.5-7.8 4.2-10.8L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"]};function o3(r){return[].concat(r)}function yk(r){return r.startsWith(":")}function x7(r){return MA(r)&&(r==="*"||r.length>1&&":>~.+*".includes(r.slice(0,1))||T7(r))}function C7(r,e){return(MA(e)||typeof e=="number")&&!A7(r)&&!yk(r)&&!M7(r)}function M7(r){return r.startsWith("@media")}function eme(r){return r==="."}function A7(r){return r==="--"}function MA(r){return r+""===r}function T7(r){return MA(r)&&(r.startsWith("&")||yk(r))}function wC(r,e=""){return r.filter(Boolean).join(e)}function E7(r,e){let t=0;if(e.length===0)return t.toString();for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)-t+i,t=t&t}return`${r??"cl"}_${t.toString(36)}`}function tme(r,e){return r==="content"?`"${e}"`:e}function nme(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function zB(r,e){return`${r}:${e}`}function rme(r){return r?`.${r}`:""}function ime(r,e){return r?`${r}
${e}`:e}var I7=class L7{constructor(e,t,n,i){this.sheet=e,this.property=t,this.value=n,this.selector=i,this.property=t,this.value=n,this.joined=zB(t,n);const s=this.selector.preconditions.concat(this.selector.postconditions);this.hash=this.selector.hasConditions?this.selector.scopeClassName:E7(this.sheet.name,this.joined),this.key=wC([this.joined,s,this.hash])}toString(){let e=l3(this.selector.preconditions,{right:this.hash});return e=l3(this.selector.postconditions,{left:e}),`${e} {${L7.genRule(this.property,this.value)}}`}static genRule(e,t){const n=nme(e);return zB(n,tme(e,t))+";"}};function l3(r,{left:e="",right:t=""}={}){const n=r.reduce((i,s)=>yk(s)?i+s:T7(s)?i+s.slice(1):wC([i,s]," "),e);return wC([n,rme(t)]," ")}var sme=class xx{constructor(e,t=null,{preconditions:n,postconditions:i}={}){this.sheet=e,this.preconditions=[],this.scopeClassName=null,this.scopeName=null,this.postconditions=[],this.preconditions=n?o3(n):[],this.postconditions=i?o3(i):[],this.setScope(t)}setScope(e){return e?(this.scopeClassName||(this.scopeName=e,this.scopeClassName=E7(this.sheet.name,e+this.sheet.count)),this):this}get hasConditions(){return this.preconditions.length>0||this.postconditions.length>0}addScope(e){return new xx(this.sheet,e,{preconditions:this.preconditions,postconditions:this.postconditions})}addPrecondition(e){return new xx(this.sheet,this.scopeClassName,{postconditions:this.postconditions,preconditions:this.preconditions.concat(e)})}addPostcondition(e){return new xx(this.sheet,this.scopeClassName,{preconditions:this.preconditions,postconditions:this.postconditions.concat(e)})}createRule(e,t){return new I7(this.sheet,e,t,this)}},ame=class{constructor(r,e){this.name=r,this.rootNode=e,this.storedStyles={},this.storedClasses={},this.style="",this.count=0,this.id=`flairup-${r}`,this.styleTag=this.createStyleTag()}getStyle(){return this.style}append(r){this.style=ime(this.style,r)}apply(){this.count++,this.styleTag&&(this.styleTag.innerHTML=this.style)}isApplied(){return!!this.styleTag}createStyleTag(){if(typeof document>"u"||this.isApplied()||this.rootNode===null)return this.styleTag;const r=document.createElement("style");return r.type="text/css",r.id=this.id,(this.rootNode??document.head).appendChild(r),r}addRule(r){const e=this.storedClasses[r.key];return MA(e)?e:(this.storedClasses[r.key]=r.hash,this.storedStyles[r.hash]=[r.property,r.value],this.append(r.toString()),r.hash)}};function wk(r,e){for(const t in r)e(t.trim(),r[t])}function br(...r){const e=r.reduce((t,n)=>(n instanceof Set?t.push(...n):typeof n=="string"?t.push(n):Array.isArray(n)?t.push(br(...n)):typeof n=="object"&&Object.entries(n).forEach(([i,s])=>{s&&t.push(i)}),t),[]);return wC(e," ").trim()}function ome(r,e){const t=new ame(r,e);return{create:n,getStyle:t.getStyle.bind(t),isApplied:t.isApplied.bind(t)};function n(i){const s={};return N7(t,i,new sme(t)).forEach(([o,l,c])=>{AA(t,l,c).forEach(u=>{a(o,u)})}),t.apply(),s;function a(o,l){s[o]=s[o]??new Set,s[o].add(l)}}}function N7(r,e,t){const n=[];return wk(e,(i,s)=>{if(x7(i))return N7(r,s,t.addPrecondition(i)).forEach(a=>n.push(a));n.push([i,e[i],t.addScope(i)])}),n}function AA(r,e,t){const n=new Set;return wk(e,(i,s)=>{let a=[];if(x7(i))a=AA(r,s,t.addPostcondition(i));else if(eme(i))a=o3(s);else if(M7(i))a=cme(r,s,i,t);else if(A7(i))a=lme(r,s,t);else if(C7(i,s)){const o=t.createRule(i,s);r.addRule(o),n.add(o.hash)}return D7(a,n)}),n}function D7(r,e){return r.forEach(t=>e.add(t)),e}function lme(r,e,t){const n=new Set,i=[];if(wk(e,(s,a)=>{if(C7(s,a)){i.push(I7.genRule(s,a));return}const o=AA(r,a??{},t);D7(o,n)}),!t.scopeClassName)return n;if(i.length){const s=i.join(" ");r.append(`${l3(t.preconditions,{right:t.scopeClassName})} {${s}}`)}return n.add(t.scopeClassName),n}function cme(r,e,t,n){r.append(t+" {");const i=AA(r,e,n);return r.append("}"),i}function Bi(){return Bi=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Bi.apply(this,arguments)}function ume(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,c3(r,e)}function c3(r,e){return c3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},c3(r,e)}function k7(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function fme(r,e){if(r){if(typeof r=="string")return VB(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return VB(r,e)}}function VB(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function dme(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=fme(r))||e){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hr;(function(r){r.hiddenOnSearch="epr-hidden-on-search",r.searchActive="epr-search-active",r.hidden="epr-hidden",r.visible="epr-visible",r.active="epr-active",r.emoji="epr-emoji",r.category="epr-emoji-category",r.label="epr-emoji-category-label",r.categoryContent="epr-emoji-category-content",r.emojiHasVariations="epr-emoji-has-variations",r.scrollBody="epr-body",r.emojiList="epr-emoji-list",r.external="__EmojiPicker__",r.emojiPicker="EmojiPickerReact",r.open="epr-open",r.vertical="epr-vertical",r.horizontal="epr-horizontal",r.variationPicker="epr-emoji-variation-picker",r.darkTheme="epr-dark-theme",r.autoTheme="epr-auto-theme"})(hr||(hr={}));function Ja(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.map(function(n){return"."+n}).join("")}var Ei=ome("epr",null),Cx={display:"none",opacity:"0",pointerEvents:"none",visibility:"hidden",overflow:"hidden"},_k=Ei.create({hidden:Bi({".":hr.hidden},Cx)}),hme=P.memo(function(){return P.createElement("style",{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:Ei.getStyle()}})}),cg=Ei.create({".epr-main":{":has(input:not(:placeholder-shown))":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},hiddenOnSearch:Bi({".":hr.hiddenOnSearch},Cx)},":has(input(:placeholder-shown))":{visibleOnSearchOnly:Cx}},hiddenOnReactions:{transition:"all 0.5s ease-in-out"},".epr-reactions":{hiddenOnReactions:{height:"0px",width:"0px",opacity:"0",pointerEvents:"none",overflow:"hidden"}},".EmojiPickerReact:not(.epr-search-active)":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"},"&.epr-active":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},visibleOnSearchOnly:Bi({".":"epr-visible-on-search-only"},Cx)}});function Dh(r,e){var t,n;return{".epr-dark-theme":(t={},t[r]=e,t),".epr-auto-theme":(n={},n[r]={"@media (prefers-color-scheme: dark)":e},n)}}function R7(r,e){var t,n,i=(t=r.customEmojis)!=null?t:[],s=(n=e.customEmojis)!=null?n:[];return r.open===e.open&&r.emojiVersion===e.emojiVersion&&r.reactionsDefaultOpen===e.reactionsDefaultOpen&&r.searchPlaceHolder===e.searchPlaceHolder&&r.searchPlaceholder===e.searchPlaceholder&&r.defaultSkinTone===e.defaultSkinTone&&r.skinTonesDisabled===e.skinTonesDisabled&&r.autoFocusSearch===e.autoFocusSearch&&r.emojiStyle===e.emojiStyle&&r.theme===e.theme&&r.suggestedEmojisMode===e.suggestedEmojisMode&&r.lazyLoadEmojis===e.lazyLoadEmojis&&r.className===e.className&&r.height===e.height&&r.width===e.width&&r.style===e.style&&r.searchDisabled===e.searchDisabled&&r.skinTonePickerLocation===e.skinTonePickerLocation&&i.length===s.length}var pme=["1f44d","2764-fe0f","1f603","1f622","1f64f","1f44e","1f621"],qw;(function(r){r.RECENT="recent",r.FREQUENT="frequent"})(qw||(qw={}));var ul;(function(r){r.NATIVE="native",r.APPLE="apple",r.TWITTER="twitter",r.GOOGLE="google",r.FACEBOOK="facebook"})(ul||(ul={}));var Zw;(function(r){r.DARK="dark",r.LIGHT="light",r.AUTO="auto"})(Zw||(Zw={}));var Lc;(function(r){r.NEUTRAL="neutral",r.LIGHT="1f3fb",r.MEDIUM_LIGHT="1f3fc",r.MEDIUM="1f3fd",r.MEDIUM_DARK="1f3fe",r.DARK="1f3ff"})(Lc||(Lc={}));var fr;(function(r){r.SUGGESTED="suggested",r.CUSTOM="custom",r.SMILEYS_PEOPLE="smileys_people",r.ANIMALS_NATURE="animals_nature",r.FOOD_DRINK="food_drink",r.TRAVEL_PLACES="travel_places",r.ACTIVITIES="activities",r.OBJECTS="objects",r.SYMBOLS="symbols",r.FLAGS="flags"})(fr||(fr={}));var j1;(function(r){r.SEARCH="SEARCH",r.PREVIEW="PREVIEW"})(j1||(j1={}));var Nl,mme=[fr.SUGGESTED,fr.CUSTOM,fr.SMILEYS_PEOPLE,fr.ANIMALS_NATURE,fr.FOOD_DRINK,fr.TRAVEL_PLACES,fr.ACTIVITIES,fr.OBJECTS,fr.SYMBOLS,fr.FLAGS],gme={name:"Recently Used",category:fr.SUGGESTED},P7=(Nl={},Nl[fr.SUGGESTED]={category:fr.SUGGESTED,name:"Frequently Used"},Nl[fr.CUSTOM]={category:fr.CUSTOM,name:"Custom Emojis"},Nl[fr.SMILEYS_PEOPLE]={category:fr.SMILEYS_PEOPLE,name:"Smileys & People"},Nl[fr.ANIMALS_NATURE]={category:fr.ANIMALS_NATURE,name:"Animals & Nature"},Nl[fr.FOOD_DRINK]={category:fr.FOOD_DRINK,name:"Food & Drink"},Nl[fr.TRAVEL_PLACES]={category:fr.TRAVEL_PLACES,name:"Travel & Places"},Nl[fr.ACTIVITIES]={category:fr.ACTIVITIES,name:"Activities"},Nl[fr.OBJECTS]={category:fr.OBJECTS,name:"Objects"},Nl[fr.SYMBOLS]={category:fr.SYMBOLS,name:"Symbols"},Nl[fr.FLAGS]={category:fr.FLAGS,name:"Flags"},Nl);function O7(r){return mme.map(function(e){return Bi({},P7[e],r&&r[e]&&r[e])})}function bk(r){return r.category}function F7(r){return r.name}function vme(r,e){var t;r===void 0&&(r=[]),e===void 0&&(e={});var n={};e.suggestionMode===qw.RECENT&&(n[fr.SUGGESTED]=gme);var i=O7(n);return(t=r)!=null&&t.length?r.map(function(s){return typeof s=="string"?GB(s,n[s]):Bi({},GB(s.category,n[s.category]),s)}):i}function GB(r,e){return e===void 0&&(e={}),Object.assign(P7[r],e)}var yme="https://cdn.jsdelivr.net/npm/emoji-datasource-apple/img/apple/64/",wme="https://cdn.jsdelivr.net/npm/emoji-datasource-facebook/img/facebook/64/",_me="https://cdn.jsdelivr.net/npm/emoji-datasource-twitter/img/twitter/64/",bme="https://cdn.jsdelivr.net/npm/emoji-datasource-google/img/google/64/";function Sme(r){switch(r){case ul.TWITTER:return _me;case ul.GOOGLE:return bme;case ul.FACEBOOK:return wme;case ul.APPLE:default:return yme}}var xme=[],Cme=[{n:["grinning","grinning face"],u:"1f600",a:"1.0"},{n:["smiley","smiling face with open mouth"],u:"1f603",a:"0.6"},{n:["smile","smiling face with open mouth and smiling eyes"],u:"1f604",a:"0.6"},{n:["grin","grinning face with smiling eyes"],u:"1f601",a:"0.6"},{n:["laughing","satisfied","smiling face with open mouth and tightly-closed eyes"],u:"1f606",a:"0.6"},{n:["sweat smile","smiling face with open mouth and cold sweat"],u:"1f605",a:"0.6"},{n:["rolling on the floor laughing"],u:"1f923",a:"3.0"},{n:["joy","face with tears of joy"],u:"1f602",a:"0.6"},{n:["slightly smiling face"],u:"1f642",a:"1.0"},{n:["upside-down face","upside down face"],u:"1f643",a:"1.0"},{n:["melting face"],u:"1fae0",a:"14.0"},{n:["wink","winking face"],u:"1f609",a:"0.6"},{n:["blush","smiling face with smiling eyes"],u:"1f60a",a:"0.6"},{n:["innocent","smiling face with halo"],u:"1f607",a:"1.0"},{n:["smiling face with 3 hearts","smiling face with smiling eyes and three hearts"],u:"1f970",a:"11.0"},{n:["heart eyes","smiling face with heart-shaped eyes"],u:"1f60d",a:"0.6"},{n:["star-struck","grinning face with star eyes"],u:"1f929",a:"5.0"},{n:["kissing heart","face throwing a kiss"],u:"1f618",a:"0.6"},{n:["kissing","kissing face"],u:"1f617",a:"1.0"},{n:["relaxed","white smiling face"],u:"263a-fe0f",a:"0.6"},{n:["kissing closed eyes","kissing face with closed eyes"],u:"1f61a",a:"0.6"},{n:["kissing smiling eyes","kissing face with smiling eyes"],u:"1f619",a:"1.0"},{n:["smiling face with tear"],u:"1f972",a:"13.0"},{n:["yum","face savouring delicious food"],u:"1f60b",a:"0.6"},{n:["stuck out tongue","face with stuck-out tongue"],u:"1f61b",a:"1.0"},{n:["stuck out tongue winking eye","face with stuck-out tongue and winking eye"],u:"1f61c",a:"0.6"},{n:["zany face","grinning face with one large and one small eye"],u:"1f92a",a:"5.0"},{n:["stuck out tongue closed eyes","face with stuck-out tongue and tightly-closed eyes"],u:"1f61d",a:"0.6"},{n:["money-mouth face","money mouth face"],u:"1f911",a:"1.0"},{n:["hugging face"],u:"1f917",a:"1.0"},{n:["face with hand over mouth","smiling face with smiling eyes and hand covering mouth"],u:"1f92d",a:"5.0"},{n:["face with open eyes and hand over mouth"],u:"1fae2",a:"14.0"},{n:["face with peeking eye"],u:"1fae3",a:"14.0"},{n:["shushing face","face with finger covering closed lips"],u:"1f92b",a:"5.0"},{n:["thinking face"],u:"1f914",a:"1.0"},{n:["saluting face"],u:"1fae1",a:"14.0"},{n:["zipper-mouth face","zipper mouth face"],u:"1f910",a:"1.0"},{n:["face with raised eyebrow","face with one eyebrow raised"],u:"1f928",a:"5.0"},{n:["neutral face"],u:"1f610",a:"0.7"},{n:["expressionless","expressionless face"],u:"1f611",a:"1.0"},{n:["no mouth","face without mouth"],u:"1f636",a:"1.0"},{n:["dotted line face"],u:"1fae5",a:"14.0"},{n:["face in clouds"],u:"1f636-200d-1f32b-fe0f",a:"13.1"},{n:["smirk","smirking face"],u:"1f60f",a:"0.6"},{n:["unamused","unamused face"],u:"1f612",a:"0.6"},{n:["face with rolling eyes"],u:"1f644",a:"1.0"},{n:["grimacing","grimacing face"],u:"1f62c",a:"1.0"},{n:["face exhaling"],u:"1f62e-200d-1f4a8",a:"13.1"},{n:["lying face"],u:"1f925",a:"3.0"},{n:["relieved","relieved face"],u:"1f60c",a:"0.6"},{n:["pensive","pensive face"],u:"1f614",a:"0.6"},{n:["sleepy","sleepy face"],u:"1f62a",a:"0.6"},{n:["drooling face"],u:"1f924",a:"3.0"},{n:["sleeping","sleeping face"],u:"1f634",a:"1.0"},{n:["mask","face with medical mask"],u:"1f637",a:"0.6"},{n:["face with thermometer"],u:"1f912",a:"1.0"},{n:["face with head-bandage","face with head bandage"],u:"1f915",a:"1.0"},{n:["nauseated face"],u:"1f922",a:"3.0"},{n:["face vomiting","face with open mouth vomiting"],u:"1f92e",a:"5.0"},{n:["sneezing face"],u:"1f927",a:"3.0"},{n:["hot face","overheated face"],u:"1f975",a:"11.0"},{n:["cold face","freezing face"],u:"1f976",a:"11.0"},{n:["woozy face","face with uneven eyes and wavy mouth"],u:"1f974",a:"11.0"},{n:["dizzy face"],u:"1f635",a:"0.6"},{n:["face with spiral eyes"],u:"1f635-200d-1f4ab",a:"13.1"},{n:["exploding head","shocked face with exploding head"],u:"1f92f",a:"5.0"},{n:["face with cowboy hat"],u:"1f920",a:"3.0"},{n:["partying face","face with party horn and party hat"],u:"1f973",a:"11.0"},{n:["disguised face"],u:"1f978",a:"13.0"},{n:["sunglasses","smiling face with sunglasses"],u:"1f60e",a:"1.0"},{n:["nerd face"],u:"1f913",a:"1.0"},{n:["face with monocle"],u:"1f9d0",a:"5.0"},{n:["confused","confused face"],u:"1f615",a:"1.0"},{n:["face with diagonal mouth"],u:"1fae4",a:"14.0"},{n:["worried","worried face"],u:"1f61f",a:"1.0"},{n:["slightly frowning face"],u:"1f641",a:"1.0"},{n:["frowning face","white frowning face"],u:"2639-fe0f",a:"0.7"},{n:["open mouth","face with open mouth"],u:"1f62e",a:"1.0"},{n:["hushed","hushed face"],u:"1f62f",a:"1.0"},{n:["astonished","astonished face"],u:"1f632",a:"0.6"},{n:["flushed","flushed face"],u:"1f633",a:"0.6"},{n:["pleading face","face with pleading eyes"],u:"1f97a",a:"11.0"},{n:["face holding back tears"],u:"1f979",a:"14.0"},{n:["frowning","frowning face with open mouth"],u:"1f626",a:"1.0"},{n:["anguished","anguished face"],u:"1f627",a:"1.0"},{n:["fearful","fearful face"],u:"1f628",a:"0.6"},{n:["cold sweat","face with open mouth and cold sweat"],u:"1f630",a:"0.6"},{n:["disappointed relieved","disappointed but relieved face"],u:"1f625",a:"0.6"},{n:["cry","crying face"],u:"1f622",a:"0.6"},{n:["sob","loudly crying face"],u:"1f62d",a:"0.6"},{n:["scream","face screaming in fear"],u:"1f631",a:"0.6"},{n:["confounded","confounded face"],u:"1f616",a:"0.6"},{n:["persevere","persevering face"],u:"1f623",a:"0.6"},{n:["disappointed","disappointed face"],u:"1f61e",a:"0.6"},{n:["sweat","face with cold sweat"],u:"1f613",a:"0.6"},{n:["weary","weary face"],u:"1f629",a:"0.6"},{n:["tired face"],u:"1f62b",a:"0.6"},{n:["yawning face"],u:"1f971",a:"12.0"},{n:["triumph","face with look of triumph"],u:"1f624",a:"0.6"},{n:["rage","pouting face"],u:"1f621",a:"0.6"},{n:["angry","angry face"],u:"1f620",a:"0.6"},{n:["face with symbols on mouth","serious face with symbols covering mouth"],u:"1f92c",a:"5.0"},{n:["smiling imp","smiling face with horns"],u:"1f608",a:"1.0"},{n:["imp"],u:"1f47f",a:"0.6"},{n:["skull"],u:"1f480",a:"0.6"},{n:["skull and crossbones"],u:"2620-fe0f",a:"1.0"},{n:["poop","shit","hankey","pile of poo"],u:"1f4a9",a:"0.6"},{n:["clown face"],u:"1f921",a:"3.0"},{n:["japanese ogre"],u:"1f479",a:"0.6"},{n:["japanese goblin"],u:"1f47a",a:"0.6"},{n:["ghost"],u:"1f47b",a:"0.6"},{n:["alien","extraterrestrial alien"],u:"1f47d",a:"0.6"},{n:["alien monster","space invader"],u:"1f47e",a:"0.6"},{n:["robot face"],u:"1f916",a:"1.0"},{n:["smiley cat","smiling cat face with open mouth"],u:"1f63a",a:"0.6"},{n:["smile cat","grinning cat face with smiling eyes"],u:"1f638",a:"0.6"},{n:["joy cat","cat face with tears of joy"],u:"1f639",a:"0.6"},{n:["heart eyes cat","smiling cat face with heart-shaped eyes"],u:"1f63b",a:"0.6"},{n:["smirk cat","cat face with wry smile"],u:"1f63c",a:"0.6"},{n:["kissing cat","kissing cat face with closed eyes"],u:"1f63d",a:"0.6"},{n:["scream cat","weary cat face"],u:"1f640",a:"0.6"},{n:["crying cat face"],u:"1f63f",a:"0.6"},{n:["pouting cat","pouting cat face"],u:"1f63e",a:"0.6"},{n:["see no evil","see-no-evil monkey"],u:"1f648",a:"0.6"},{n:["hear no evil","hear-no-evil monkey"],u:"1f649",a:"0.6"},{n:["speak no evil","speak-no-evil monkey"],u:"1f64a",a:"0.6"},{n:["kiss","kiss mark"],u:"1f48b",a:"0.6"},{n:["love letter"],u:"1f48c",a:"0.6"},{n:["cupid","heart with arrow"],u:"1f498",a:"0.6"},{n:["gift heart","heart with ribbon"],u:"1f49d",a:"0.6"},{n:["sparkling heart"],u:"1f496",a:"0.6"},{n:["heartpulse","growing heart"],u:"1f497",a:"0.6"},{n:["heartbeat","beating heart"],u:"1f493",a:"0.6"},{n:["revolving hearts"],u:"1f49e",a:"0.6"},{n:["two hearts"],u:"1f495",a:"0.6"},{n:["heart decoration"],u:"1f49f",a:"0.6"},{n:["heart exclamation","heavy heart exclamation mark ornament"],u:"2763-fe0f",a:"1.0"},{n:["broken heart"],u:"1f494",a:"0.6"},{n:["heart on fire"],u:"2764-fe0f-200d-1f525",a:"13.1"},{n:["mending heart"],u:"2764-fe0f-200d-1fa79",a:"13.1"},{n:["heart","heavy black heart"],u:"2764-fe0f",a:"0.6"},{n:["orange heart"],u:"1f9e1",a:"5.0"},{n:["yellow heart"],u:"1f49b",a:"0.6"},{n:["green heart"],u:"1f49a",a:"0.6"},{n:["blue heart"],u:"1f499",a:"0.6"},{n:["purple heart"],u:"1f49c",a:"0.6"},{n:["brown heart"],u:"1f90e",a:"12.0"},{n:["black heart"],u:"1f5a4",a:"3.0"},{n:["white heart"],u:"1f90d",a:"12.0"},{n:["100","hundred points symbol"],u:"1f4af",a:"0.6"},{n:["anger","anger symbol"],u:"1f4a2",a:"0.6"},{n:["boom","collision","collision symbol"],u:"1f4a5",a:"0.6"},{n:["dizzy","dizzy symbol"],u:"1f4ab",a:"0.6"},{n:["sweat drops","splashing sweat symbol"],u:"1f4a6",a:"0.6"},{n:["dash","dash symbol"],u:"1f4a8",a:"0.6"},{n:["hole"],u:"1f573-fe0f",a:"0.7"},{n:["bomb"],u:"1f4a3",a:"0.6"},{n:["speech balloon"],u:"1f4ac",a:"0.6"},{n:["eye in speech bubble","eye-in-speech-bubble"],u:"1f441-fe0f-200d-1f5e8-fe0f",a:"2.0"},{n:["left speech bubble"],u:"1f5e8-fe0f",a:"2.0"},{n:["right anger bubble"],u:"1f5ef-fe0f",a:"0.7"},{n:["thought balloon"],u:"1f4ad",a:"1.0"},{n:["zzz","sleeping symbol"],u:"1f4a4",a:"0.6"},{n:["wave","waving hand sign"],u:"1f44b",v:["1f44b-1f3fb","1f44b-1f3fc","1f44b-1f3fd","1f44b-1f3fe","1f44b-1f3ff"],a:"0.6"},{n:["raised back of hand"],u:"1f91a",v:["1f91a-1f3fb","1f91a-1f3fc","1f91a-1f3fd","1f91a-1f3fe","1f91a-1f3ff"],a:"3.0"},{n:["hand with fingers splayed","raised hand with fingers splayed"],u:"1f590-fe0f",v:["1f590-1f3fb","1f590-1f3fc","1f590-1f3fd","1f590-1f3fe","1f590-1f3ff"],a:"0.7"},{n:["hand","raised hand"],u:"270b",v:["270b-1f3fb","270b-1f3fc","270b-1f3fd","270b-1f3fe","270b-1f3ff"],a:"0.6"},{n:["spock-hand","raised hand with part between middle and ring fingers"],u:"1f596",v:["1f596-1f3fb","1f596-1f3fc","1f596-1f3fd","1f596-1f3fe","1f596-1f3ff"],a:"1.0"},{n:["rightwards hand"],u:"1faf1",v:["1faf1-1f3fb","1faf1-1f3fc","1faf1-1f3fd","1faf1-1f3fe","1faf1-1f3ff"],a:"14.0"},{n:["leftwards hand"],u:"1faf2",v:["1faf2-1f3fb","1faf2-1f3fc","1faf2-1f3fd","1faf2-1f3fe","1faf2-1f3ff"],a:"14.0"},{n:["palm down hand"],u:"1faf3",v:["1faf3-1f3fb","1faf3-1f3fc","1faf3-1f3fd","1faf3-1f3fe","1faf3-1f3ff"],a:"14.0"},{n:["palm up hand"],u:"1faf4",v:["1faf4-1f3fb","1faf4-1f3fc","1faf4-1f3fd","1faf4-1f3fe","1faf4-1f3ff"],a:"14.0"},{n:["ok hand","ok hand sign"],u:"1f44c",v:["1f44c-1f3fb","1f44c-1f3fc","1f44c-1f3fd","1f44c-1f3fe","1f44c-1f3ff"],a:"0.6"},{n:["pinched fingers"],u:"1f90c",v:["1f90c-1f3fb","1f90c-1f3fc","1f90c-1f3fd","1f90c-1f3fe","1f90c-1f3ff"],a:"13.0"},{n:["pinching hand"],u:"1f90f",v:["1f90f-1f3fb","1f90f-1f3fc","1f90f-1f3fd","1f90f-1f3fe","1f90f-1f3ff"],a:"12.0"},{n:["v","victory hand"],u:"270c-fe0f",v:["270c-1f3fb","270c-1f3fc","270c-1f3fd","270c-1f3fe","270c-1f3ff"],a:"0.6"},{n:["crossed fingers","hand with index and middle fingers crossed"],u:"1f91e",v:["1f91e-1f3fb","1f91e-1f3fc","1f91e-1f3fd","1f91e-1f3fe","1f91e-1f3ff"],a:"3.0"},{n:["hand with index finger and thumb crossed"],u:"1faf0",v:["1faf0-1f3fb","1faf0-1f3fc","1faf0-1f3fd","1faf0-1f3fe","1faf0-1f3ff"],a:"14.0"},{n:["i love you hand sign"],u:"1f91f",v:["1f91f-1f3fb","1f91f-1f3fc","1f91f-1f3fd","1f91f-1f3fe","1f91f-1f3ff"],a:"5.0"},{n:["the horns","sign of the horns"],u:"1f918",v:["1f918-1f3fb","1f918-1f3fc","1f918-1f3fd","1f918-1f3fe","1f918-1f3ff"],a:"1.0"},{n:["call me hand"],u:"1f919",v:["1f919-1f3fb","1f919-1f3fc","1f919-1f3fd","1f919-1f3fe","1f919-1f3ff"],a:"3.0"},{n:["point left","white left pointing backhand index"],u:"1f448",v:["1f448-1f3fb","1f448-1f3fc","1f448-1f3fd","1f448-1f3fe","1f448-1f3ff"],a:"0.6"},{n:["point right","white right pointing backhand index"],u:"1f449",v:["1f449-1f3fb","1f449-1f3fc","1f449-1f3fd","1f449-1f3fe","1f449-1f3ff"],a:"0.6"},{n:["point up 2","white up pointing backhand index"],u:"1f446",v:["1f446-1f3fb","1f446-1f3fc","1f446-1f3fd","1f446-1f3fe","1f446-1f3ff"],a:"0.6"},{n:["middle finger","reversed hand with middle finger extended"],u:"1f595",v:["1f595-1f3fb","1f595-1f3fc","1f595-1f3fd","1f595-1f3fe","1f595-1f3ff"],a:"1.0"},{n:["point down","white down pointing backhand index"],u:"1f447",v:["1f447-1f3fb","1f447-1f3fc","1f447-1f3fd","1f447-1f3fe","1f447-1f3ff"],a:"0.6"},{n:["point up","white up pointing index"],u:"261d-fe0f",v:["261d-1f3fb","261d-1f3fc","261d-1f3fd","261d-1f3fe","261d-1f3ff"],a:"0.6"},{n:["index pointing at the viewer"],u:"1faf5",v:["1faf5-1f3fb","1faf5-1f3fc","1faf5-1f3fd","1faf5-1f3fe","1faf5-1f3ff"],a:"14.0"},{n:["+1","thumbsup","thumbs up sign"],u:"1f44d",v:["1f44d-1f3fb","1f44d-1f3fc","1f44d-1f3fd","1f44d-1f3fe","1f44d-1f3ff"],a:"0.6"},{n:["-1","thumbsdown","thumbs down sign"],u:"1f44e",v:["1f44e-1f3fb","1f44e-1f3fc","1f44e-1f3fd","1f44e-1f3fe","1f44e-1f3ff"],a:"0.6"},{n:["fist","raised fist"],u:"270a",v:["270a-1f3fb","270a-1f3fc","270a-1f3fd","270a-1f3fe","270a-1f3ff"],a:"0.6"},{n:["punch","facepunch","fisted hand sign"],u:"1f44a",v:["1f44a-1f3fb","1f44a-1f3fc","1f44a-1f3fd","1f44a-1f3fe","1f44a-1f3ff"],a:"0.6"},{n:["left-facing fist"],u:"1f91b",v:["1f91b-1f3fb","1f91b-1f3fc","1f91b-1f3fd","1f91b-1f3fe","1f91b-1f3ff"],a:"3.0"},{n:["right-facing fist"],u:"1f91c",v:["1f91c-1f3fb","1f91c-1f3fc","1f91c-1f3fd","1f91c-1f3fe","1f91c-1f3ff"],a:"3.0"},{n:["clap","clapping hands sign"],u:"1f44f",v:["1f44f-1f3fb","1f44f-1f3fc","1f44f-1f3fd","1f44f-1f3fe","1f44f-1f3ff"],a:"0.6"},{n:["raised hands","person raising both hands in celebration"],u:"1f64c",v:["1f64c-1f3fb","1f64c-1f3fc","1f64c-1f3fd","1f64c-1f3fe","1f64c-1f3ff"],a:"0.6"},{n:["heart hands"],u:"1faf6",v:["1faf6-1f3fb","1faf6-1f3fc","1faf6-1f3fd","1faf6-1f3fe","1faf6-1f3ff"],a:"14.0"},{n:["open hands","open hands sign"],u:"1f450",v:["1f450-1f3fb","1f450-1f3fc","1f450-1f3fd","1f450-1f3fe","1f450-1f3ff"],a:"0.6"},{n:["palms up together"],u:"1f932",v:["1f932-1f3fb","1f932-1f3fc","1f932-1f3fd","1f932-1f3fe","1f932-1f3ff"],a:"5.0"},{n:["handshake"],u:"1f91d",v:["1f91d-1f3fb","1f91d-1f3fc","1f91d-1f3fd","1f91d-1f3fe","1f91d-1f3ff","1faf1-1f3fb-200d-1faf2-1f3fc","1faf1-1f3fb-200d-1faf2-1f3fd","1faf1-1f3fb-200d-1faf2-1f3fe","1faf1-1f3fb-200d-1faf2-1f3ff","1faf1-1f3fc-200d-1faf2-1f3fb","1faf1-1f3fc-200d-1faf2-1f3fd","1faf1-1f3fc-200d-1faf2-1f3fe","1faf1-1f3fc-200d-1faf2-1f3ff","1faf1-1f3fd-200d-1faf2-1f3fb","1faf1-1f3fd-200d-1faf2-1f3fc","1faf1-1f3fd-200d-1faf2-1f3fe","1faf1-1f3fd-200d-1faf2-1f3ff","1faf1-1f3fe-200d-1faf2-1f3fb","1faf1-1f3fe-200d-1faf2-1f3fc","1faf1-1f3fe-200d-1faf2-1f3fd","1faf1-1f3fe-200d-1faf2-1f3ff","1faf1-1f3ff-200d-1faf2-1f3fb","1faf1-1f3ff-200d-1faf2-1f3fc","1faf1-1f3ff-200d-1faf2-1f3fd","1faf1-1f3ff-200d-1faf2-1f3fe"],a:"3.0"},{n:["pray","person with folded hands"],u:"1f64f",v:["1f64f-1f3fb","1f64f-1f3fc","1f64f-1f3fd","1f64f-1f3fe","1f64f-1f3ff"],a:"0.6"},{n:["writing hand"],u:"270d-fe0f",v:["270d-1f3fb","270d-1f3fc","270d-1f3fd","270d-1f3fe","270d-1f3ff"],a:"0.7"},{n:["nail care","nail polish"],u:"1f485",v:["1f485-1f3fb","1f485-1f3fc","1f485-1f3fd","1f485-1f3fe","1f485-1f3ff"],a:"0.6"},{n:["selfie"],u:"1f933",v:["1f933-1f3fb","1f933-1f3fc","1f933-1f3fd","1f933-1f3fe","1f933-1f3ff"],a:"3.0"},{n:["muscle","flexed biceps"],u:"1f4aa",v:["1f4aa-1f3fb","1f4aa-1f3fc","1f4aa-1f3fd","1f4aa-1f3fe","1f4aa-1f3ff"],a:"0.6"},{n:["mechanical arm"],u:"1f9be",a:"12.0"},{n:["mechanical leg"],u:"1f9bf",a:"12.0"},{n:["leg"],u:"1f9b5",v:["1f9b5-1f3fb","1f9b5-1f3fc","1f9b5-1f3fd","1f9b5-1f3fe","1f9b5-1f3ff"],a:"11.0"},{n:["foot"],u:"1f9b6",v:["1f9b6-1f3fb","1f9b6-1f3fc","1f9b6-1f3fd","1f9b6-1f3fe","1f9b6-1f3ff"],a:"11.0"},{n:["ear"],u:"1f442",v:["1f442-1f3fb","1f442-1f3fc","1f442-1f3fd","1f442-1f3fe","1f442-1f3ff"],a:"0.6"},{n:["ear with hearing aid"],u:"1f9bb",v:["1f9bb-1f3fb","1f9bb-1f3fc","1f9bb-1f3fd","1f9bb-1f3fe","1f9bb-1f3ff"],a:"12.0"},{n:["nose"],u:"1f443",v:["1f443-1f3fb","1f443-1f3fc","1f443-1f3fd","1f443-1f3fe","1f443-1f3ff"],a:"0.6"},{n:["brain"],u:"1f9e0",a:"5.0"},{n:["anatomical heart"],u:"1fac0",a:"13.0"},{n:["lungs"],u:"1fac1",a:"13.0"},{n:["tooth"],u:"1f9b7",a:"11.0"},{n:["bone"],u:"1f9b4",a:"11.0"},{n:["eyes"],u:"1f440",a:"0.6"},{n:["eye"],u:"1f441-fe0f",a:"0.7"},{n:["tongue"],u:"1f445",a:"0.6"},{n:["lips","mouth"],u:"1f444",a:"0.6"},{n:["biting lip"],u:"1fae6",a:"14.0"},{n:["baby"],u:"1f476",v:["1f476-1f3fb","1f476-1f3fc","1f476-1f3fd","1f476-1f3fe","1f476-1f3ff"],a:"0.6"},{n:["child"],u:"1f9d2",v:["1f9d2-1f3fb","1f9d2-1f3fc","1f9d2-1f3fd","1f9d2-1f3fe","1f9d2-1f3ff"],a:"5.0"},{n:["boy"],u:"1f466",v:["1f466-1f3fb","1f466-1f3fc","1f466-1f3fd","1f466-1f3fe","1f466-1f3ff"],a:"0.6"},{n:["girl"],u:"1f467",v:["1f467-1f3fb","1f467-1f3fc","1f467-1f3fd","1f467-1f3fe","1f467-1f3ff"],a:"0.6"},{n:["adult"],u:"1f9d1",v:["1f9d1-1f3fb","1f9d1-1f3fc","1f9d1-1f3fd","1f9d1-1f3fe","1f9d1-1f3ff"],a:"5.0"},{n:["person with blond hair"],u:"1f471",v:["1f471-1f3fb","1f471-1f3fc","1f471-1f3fd","1f471-1f3fe","1f471-1f3ff"],a:"0.6"},{n:["man"],u:"1f468",v:["1f468-1f3fb","1f468-1f3fc","1f468-1f3fd","1f468-1f3fe","1f468-1f3ff"],a:"0.6"},{n:["bearded person"],u:"1f9d4",v:["1f9d4-1f3fb","1f9d4-1f3fc","1f9d4-1f3fd","1f9d4-1f3fe","1f9d4-1f3ff"],a:"5.0"},{n:["man: beard","man with beard"],u:"1f9d4-200d-2642-fe0f",v:["1f9d4-1f3fb-200d-2642-fe0f","1f9d4-1f3fc-200d-2642-fe0f","1f9d4-1f3fd-200d-2642-fe0f","1f9d4-1f3fe-200d-2642-fe0f","1f9d4-1f3ff-200d-2642-fe0f"],a:"13.1"},{n:["woman: beard","woman with beard"],u:"1f9d4-200d-2640-fe0f",v:["1f9d4-1f3fb-200d-2640-fe0f","1f9d4-1f3fc-200d-2640-fe0f","1f9d4-1f3fd-200d-2640-fe0f","1f9d4-1f3fe-200d-2640-fe0f","1f9d4-1f3ff-200d-2640-fe0f"],a:"13.1"},{n:["man: red hair","red haired man"],u:"1f468-200d-1f9b0",v:["1f468-1f3fb-200d-1f9b0","1f468-1f3fc-200d-1f9b0","1f468-1f3fd-200d-1f9b0","1f468-1f3fe-200d-1f9b0","1f468-1f3ff-200d-1f9b0"],a:"11.0"},{n:["man: curly hair","curly haired man"],u:"1f468-200d-1f9b1",v:["1f468-1f3fb-200d-1f9b1","1f468-1f3fc-200d-1f9b1","1f468-1f3fd-200d-1f9b1","1f468-1f3fe-200d-1f9b1","1f468-1f3ff-200d-1f9b1"],a:"11.0"},{n:["man: white hair","white haired man"],u:"1f468-200d-1f9b3",v:["1f468-1f3fb-200d-1f9b3","1f468-1f3fc-200d-1f9b3","1f468-1f3fd-200d-1f9b3","1f468-1f3fe-200d-1f9b3","1f468-1f3ff-200d-1f9b3"],a:"11.0"},{n:["bald man","man: bald"],u:"1f468-200d-1f9b2",v:["1f468-1f3fb-200d-1f9b2","1f468-1f3fc-200d-1f9b2","1f468-1f3fd-200d-1f9b2","1f468-1f3fe-200d-1f9b2","1f468-1f3ff-200d-1f9b2"],a:"11.0"},{n:["woman"],u:"1f469",v:["1f469-1f3fb","1f469-1f3fc","1f469-1f3fd","1f469-1f3fe","1f469-1f3ff"],a:"0.6"},{n:["woman: red hair","red haired woman"],u:"1f469-200d-1f9b0",v:["1f469-1f3fb-200d-1f9b0","1f469-1f3fc-200d-1f9b0","1f469-1f3fd-200d-1f9b0","1f469-1f3fe-200d-1f9b0","1f469-1f3ff-200d-1f9b0"],a:"11.0"},{n:["person: red hair","red haired person"],u:"1f9d1-200d-1f9b0",v:["1f9d1-1f3fb-200d-1f9b0","1f9d1-1f3fc-200d-1f9b0","1f9d1-1f3fd-200d-1f9b0","1f9d1-1f3fe-200d-1f9b0","1f9d1-1f3ff-200d-1f9b0"],a:"12.1"},{n:["woman: curly hair","curly haired woman"],u:"1f469-200d-1f9b1",v:["1f469-1f3fb-200d-1f9b1","1f469-1f3fc-200d-1f9b1","1f469-1f3fd-200d-1f9b1","1f469-1f3fe-200d-1f9b1","1f469-1f3ff-200d-1f9b1"],a:"11.0"},{n:["person: curly hair","curly haired person"],u:"1f9d1-200d-1f9b1",v:["1f9d1-1f3fb-200d-1f9b1","1f9d1-1f3fc-200d-1f9b1","1f9d1-1f3fd-200d-1f9b1","1f9d1-1f3fe-200d-1f9b1","1f9d1-1f3ff-200d-1f9b1"],a:"12.1"},{n:["woman: white hair","white haired woman"],u:"1f469-200d-1f9b3",v:["1f469-1f3fb-200d-1f9b3","1f469-1f3fc-200d-1f9b3","1f469-1f3fd-200d-1f9b3","1f469-1f3fe-200d-1f9b3","1f469-1f3ff-200d-1f9b3"],a:"11.0"},{n:["person: white hair","white haired person"],u:"1f9d1-200d-1f9b3",v:["1f9d1-1f3fb-200d-1f9b3","1f9d1-1f3fc-200d-1f9b3","1f9d1-1f3fd-200d-1f9b3","1f9d1-1f3fe-200d-1f9b3","1f9d1-1f3ff-200d-1f9b3"],a:"12.1"},{n:["bald woman","woman: bald"],u:"1f469-200d-1f9b2",v:["1f469-1f3fb-200d-1f9b2","1f469-1f3fc-200d-1f9b2","1f469-1f3fd-200d-1f9b2","1f469-1f3fe-200d-1f9b2","1f469-1f3ff-200d-1f9b2"],a:"11.0"},{n:["bald person","person: bald"],u:"1f9d1-200d-1f9b2",v:["1f9d1-1f3fb-200d-1f9b2","1f9d1-1f3fc-200d-1f9b2","1f9d1-1f3fd-200d-1f9b2","1f9d1-1f3fe-200d-1f9b2","1f9d1-1f3ff-200d-1f9b2"],a:"12.1"},{n:["woman: blond hair","blond-haired-woman"],u:"1f471-200d-2640-fe0f",v:["1f471-1f3fb-200d-2640-fe0f","1f471-1f3fc-200d-2640-fe0f","1f471-1f3fd-200d-2640-fe0f","1f471-1f3fe-200d-2640-fe0f","1f471-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man: blond hair","blond-haired-man"],u:"1f471-200d-2642-fe0f",v:["1f471-1f3fb-200d-2642-fe0f","1f471-1f3fc-200d-2642-fe0f","1f471-1f3fd-200d-2642-fe0f","1f471-1f3fe-200d-2642-fe0f","1f471-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["older adult"],u:"1f9d3",v:["1f9d3-1f3fb","1f9d3-1f3fc","1f9d3-1f3fd","1f9d3-1f3fe","1f9d3-1f3ff"],a:"5.0"},{n:["older man"],u:"1f474",v:["1f474-1f3fb","1f474-1f3fc","1f474-1f3fd","1f474-1f3fe","1f474-1f3ff"],a:"0.6"},{n:["older woman"],u:"1f475",v:["1f475-1f3fb","1f475-1f3fc","1f475-1f3fd","1f475-1f3fe","1f475-1f3ff"],a:"0.6"},{n:["person frowning"],u:"1f64d",v:["1f64d-1f3fb","1f64d-1f3fc","1f64d-1f3fd","1f64d-1f3fe","1f64d-1f3ff"],a:"0.6"},{n:["man frowning","man-frowning"],u:"1f64d-200d-2642-fe0f",v:["1f64d-1f3fb-200d-2642-fe0f","1f64d-1f3fc-200d-2642-fe0f","1f64d-1f3fd-200d-2642-fe0f","1f64d-1f3fe-200d-2642-fe0f","1f64d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman frowning","woman-frowning"],u:"1f64d-200d-2640-fe0f",v:["1f64d-1f3fb-200d-2640-fe0f","1f64d-1f3fc-200d-2640-fe0f","1f64d-1f3fd-200d-2640-fe0f","1f64d-1f3fe-200d-2640-fe0f","1f64d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with pouting face"],u:"1f64e",v:["1f64e-1f3fb","1f64e-1f3fc","1f64e-1f3fd","1f64e-1f3fe","1f64e-1f3ff"],a:"0.6"},{n:["man pouting","man-pouting"],u:"1f64e-200d-2642-fe0f",v:["1f64e-1f3fb-200d-2642-fe0f","1f64e-1f3fc-200d-2642-fe0f","1f64e-1f3fd-200d-2642-fe0f","1f64e-1f3fe-200d-2642-fe0f","1f64e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman pouting","woman-pouting"],u:"1f64e-200d-2640-fe0f",v:["1f64e-1f3fb-200d-2640-fe0f","1f64e-1f3fc-200d-2640-fe0f","1f64e-1f3fd-200d-2640-fe0f","1f64e-1f3fe-200d-2640-fe0f","1f64e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["no good","face with no good gesture"],u:"1f645",v:["1f645-1f3fb","1f645-1f3fc","1f645-1f3fd","1f645-1f3fe","1f645-1f3ff"],a:"0.6"},{n:["man gesturing no","man-gesturing-no"],u:"1f645-200d-2642-fe0f",v:["1f645-1f3fb-200d-2642-fe0f","1f645-1f3fc-200d-2642-fe0f","1f645-1f3fd-200d-2642-fe0f","1f645-1f3fe-200d-2642-fe0f","1f645-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing no","woman-gesturing-no"],u:"1f645-200d-2640-fe0f",v:["1f645-1f3fb-200d-2640-fe0f","1f645-1f3fc-200d-2640-fe0f","1f645-1f3fd-200d-2640-fe0f","1f645-1f3fe-200d-2640-fe0f","1f645-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ok woman","face with ok gesture"],u:"1f646",v:["1f646-1f3fb","1f646-1f3fc","1f646-1f3fd","1f646-1f3fe","1f646-1f3ff"],a:"0.6"},{n:["man gesturing ok","man-gesturing-ok"],u:"1f646-200d-2642-fe0f",v:["1f646-1f3fb-200d-2642-fe0f","1f646-1f3fc-200d-2642-fe0f","1f646-1f3fd-200d-2642-fe0f","1f646-1f3fe-200d-2642-fe0f","1f646-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing ok","woman-gesturing-ok"],u:"1f646-200d-2640-fe0f",v:["1f646-1f3fb-200d-2640-fe0f","1f646-1f3fc-200d-2640-fe0f","1f646-1f3fd-200d-2640-fe0f","1f646-1f3fe-200d-2640-fe0f","1f646-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["information desk person"],u:"1f481",v:["1f481-1f3fb","1f481-1f3fc","1f481-1f3fd","1f481-1f3fe","1f481-1f3ff"],a:"0.6"},{n:["man tipping hand","man-tipping-hand"],u:"1f481-200d-2642-fe0f",v:["1f481-1f3fb-200d-2642-fe0f","1f481-1f3fc-200d-2642-fe0f","1f481-1f3fd-200d-2642-fe0f","1f481-1f3fe-200d-2642-fe0f","1f481-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman tipping hand","woman-tipping-hand"],u:"1f481-200d-2640-fe0f",v:["1f481-1f3fb-200d-2640-fe0f","1f481-1f3fc-200d-2640-fe0f","1f481-1f3fd-200d-2640-fe0f","1f481-1f3fe-200d-2640-fe0f","1f481-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["raising hand","happy person raising one hand"],u:"1f64b",v:["1f64b-1f3fb","1f64b-1f3fc","1f64b-1f3fd","1f64b-1f3fe","1f64b-1f3ff"],a:"0.6"},{n:["man raising hand","man-raising-hand"],u:"1f64b-200d-2642-fe0f",v:["1f64b-1f3fb-200d-2642-fe0f","1f64b-1f3fc-200d-2642-fe0f","1f64b-1f3fd-200d-2642-fe0f","1f64b-1f3fe-200d-2642-fe0f","1f64b-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman raising hand","woman-raising-hand"],u:"1f64b-200d-2640-fe0f",v:["1f64b-1f3fb-200d-2640-fe0f","1f64b-1f3fc-200d-2640-fe0f","1f64b-1f3fd-200d-2640-fe0f","1f64b-1f3fe-200d-2640-fe0f","1f64b-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["deaf person"],u:"1f9cf",v:["1f9cf-1f3fb","1f9cf-1f3fc","1f9cf-1f3fd","1f9cf-1f3fe","1f9cf-1f3ff"],a:"12.0"},{n:["deaf man"],u:"1f9cf-200d-2642-fe0f",v:["1f9cf-1f3fb-200d-2642-fe0f","1f9cf-1f3fc-200d-2642-fe0f","1f9cf-1f3fd-200d-2642-fe0f","1f9cf-1f3fe-200d-2642-fe0f","1f9cf-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["deaf woman"],u:"1f9cf-200d-2640-fe0f",v:["1f9cf-1f3fb-200d-2640-fe0f","1f9cf-1f3fc-200d-2640-fe0f","1f9cf-1f3fd-200d-2640-fe0f","1f9cf-1f3fe-200d-2640-fe0f","1f9cf-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["bow","person bowing deeply"],u:"1f647",v:["1f647-1f3fb","1f647-1f3fc","1f647-1f3fd","1f647-1f3fe","1f647-1f3ff"],a:"0.6"},{n:["man bowing","man-bowing"],u:"1f647-200d-2642-fe0f",v:["1f647-1f3fb-200d-2642-fe0f","1f647-1f3fc-200d-2642-fe0f","1f647-1f3fd-200d-2642-fe0f","1f647-1f3fe-200d-2642-fe0f","1f647-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bowing","woman-bowing"],u:"1f647-200d-2640-fe0f",v:["1f647-1f3fb-200d-2640-fe0f","1f647-1f3fc-200d-2640-fe0f","1f647-1f3fd-200d-2640-fe0f","1f647-1f3fe-200d-2640-fe0f","1f647-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["face palm"],u:"1f926",v:["1f926-1f3fb","1f926-1f3fc","1f926-1f3fd","1f926-1f3fe","1f926-1f3ff"],a:"3.0"},{n:["man facepalming","man-facepalming"],u:"1f926-200d-2642-fe0f",v:["1f926-1f3fb-200d-2642-fe0f","1f926-1f3fc-200d-2642-fe0f","1f926-1f3fd-200d-2642-fe0f","1f926-1f3fe-200d-2642-fe0f","1f926-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman facepalming","woman-facepalming"],u:"1f926-200d-2640-fe0f",v:["1f926-1f3fb-200d-2640-fe0f","1f926-1f3fc-200d-2640-fe0f","1f926-1f3fd-200d-2640-fe0f","1f926-1f3fe-200d-2640-fe0f","1f926-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["shrug"],u:"1f937",v:["1f937-1f3fb","1f937-1f3fc","1f937-1f3fd","1f937-1f3fe","1f937-1f3ff"],a:"3.0"},{n:["man shrugging","man-shrugging"],u:"1f937-200d-2642-fe0f",v:["1f937-1f3fb-200d-2642-fe0f","1f937-1f3fc-200d-2642-fe0f","1f937-1f3fd-200d-2642-fe0f","1f937-1f3fe-200d-2642-fe0f","1f937-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman shrugging","woman-shrugging"],u:"1f937-200d-2640-fe0f",v:["1f937-1f3fb-200d-2640-fe0f","1f937-1f3fc-200d-2640-fe0f","1f937-1f3fd-200d-2640-fe0f","1f937-1f3fe-200d-2640-fe0f","1f937-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["health worker"],u:"1f9d1-200d-2695-fe0f",v:["1f9d1-1f3fb-200d-2695-fe0f","1f9d1-1f3fc-200d-2695-fe0f","1f9d1-1f3fd-200d-2695-fe0f","1f9d1-1f3fe-200d-2695-fe0f","1f9d1-1f3ff-200d-2695-fe0f"],a:"12.1"},{n:["male-doctor","man health worker"],u:"1f468-200d-2695-fe0f",v:["1f468-1f3fb-200d-2695-fe0f","1f468-1f3fc-200d-2695-fe0f","1f468-1f3fd-200d-2695-fe0f","1f468-1f3fe-200d-2695-fe0f","1f468-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["female-doctor","woman health worker"],u:"1f469-200d-2695-fe0f",v:["1f469-1f3fb-200d-2695-fe0f","1f469-1f3fc-200d-2695-fe0f","1f469-1f3fd-200d-2695-fe0f","1f469-1f3fe-200d-2695-fe0f","1f469-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["student"],u:"1f9d1-200d-1f393",v:["1f9d1-1f3fb-200d-1f393","1f9d1-1f3fc-200d-1f393","1f9d1-1f3fd-200d-1f393","1f9d1-1f3fe-200d-1f393","1f9d1-1f3ff-200d-1f393"],a:"12.1"},{n:["man student","male-student"],u:"1f468-200d-1f393",v:["1f468-1f3fb-200d-1f393","1f468-1f3fc-200d-1f393","1f468-1f3fd-200d-1f393","1f468-1f3fe-200d-1f393","1f468-1f3ff-200d-1f393"],a:"4.0"},{n:["woman student","female-student"],u:"1f469-200d-1f393",v:["1f469-1f3fb-200d-1f393","1f469-1f3fc-200d-1f393","1f469-1f3fd-200d-1f393","1f469-1f3fe-200d-1f393","1f469-1f3ff-200d-1f393"],a:"4.0"},{n:["teacher"],u:"1f9d1-200d-1f3eb",v:["1f9d1-1f3fb-200d-1f3eb","1f9d1-1f3fc-200d-1f3eb","1f9d1-1f3fd-200d-1f3eb","1f9d1-1f3fe-200d-1f3eb","1f9d1-1f3ff-200d-1f3eb"],a:"12.1"},{n:["man teacher","male-teacher"],u:"1f468-200d-1f3eb",v:["1f468-1f3fb-200d-1f3eb","1f468-1f3fc-200d-1f3eb","1f468-1f3fd-200d-1f3eb","1f468-1f3fe-200d-1f3eb","1f468-1f3ff-200d-1f3eb"],a:"4.0"},{n:["woman teacher","female-teacher"],u:"1f469-200d-1f3eb",v:["1f469-1f3fb-200d-1f3eb","1f469-1f3fc-200d-1f3eb","1f469-1f3fd-200d-1f3eb","1f469-1f3fe-200d-1f3eb","1f469-1f3ff-200d-1f3eb"],a:"4.0"},{n:["judge"],u:"1f9d1-200d-2696-fe0f",v:["1f9d1-1f3fb-200d-2696-fe0f","1f9d1-1f3fc-200d-2696-fe0f","1f9d1-1f3fd-200d-2696-fe0f","1f9d1-1f3fe-200d-2696-fe0f","1f9d1-1f3ff-200d-2696-fe0f"],a:"12.1"},{n:["man judge","male-judge"],u:"1f468-200d-2696-fe0f",v:["1f468-1f3fb-200d-2696-fe0f","1f468-1f3fc-200d-2696-fe0f","1f468-1f3fd-200d-2696-fe0f","1f468-1f3fe-200d-2696-fe0f","1f468-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["woman judge","female-judge"],u:"1f469-200d-2696-fe0f",v:["1f469-1f3fb-200d-2696-fe0f","1f469-1f3fc-200d-2696-fe0f","1f469-1f3fd-200d-2696-fe0f","1f469-1f3fe-200d-2696-fe0f","1f469-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["farmer"],u:"1f9d1-200d-1f33e",v:["1f9d1-1f3fb-200d-1f33e","1f9d1-1f3fc-200d-1f33e","1f9d1-1f3fd-200d-1f33e","1f9d1-1f3fe-200d-1f33e","1f9d1-1f3ff-200d-1f33e"],a:"12.1"},{n:["man farmer","male-farmer"],u:"1f468-200d-1f33e",v:["1f468-1f3fb-200d-1f33e","1f468-1f3fc-200d-1f33e","1f468-1f3fd-200d-1f33e","1f468-1f3fe-200d-1f33e","1f468-1f3ff-200d-1f33e"],a:"4.0"},{n:["woman farmer","female-farmer"],u:"1f469-200d-1f33e",v:["1f469-1f3fb-200d-1f33e","1f469-1f3fc-200d-1f33e","1f469-1f3fd-200d-1f33e","1f469-1f3fe-200d-1f33e","1f469-1f3ff-200d-1f33e"],a:"4.0"},{n:["cook"],u:"1f9d1-200d-1f373",v:["1f9d1-1f3fb-200d-1f373","1f9d1-1f3fc-200d-1f373","1f9d1-1f3fd-200d-1f373","1f9d1-1f3fe-200d-1f373","1f9d1-1f3ff-200d-1f373"],a:"12.1"},{n:["man cook","male-cook"],u:"1f468-200d-1f373",v:["1f468-1f3fb-200d-1f373","1f468-1f3fc-200d-1f373","1f468-1f3fd-200d-1f373","1f468-1f3fe-200d-1f373","1f468-1f3ff-200d-1f373"],a:"4.0"},{n:["woman cook","female-cook"],u:"1f469-200d-1f373",v:["1f469-1f3fb-200d-1f373","1f469-1f3fc-200d-1f373","1f469-1f3fd-200d-1f373","1f469-1f3fe-200d-1f373","1f469-1f3ff-200d-1f373"],a:"4.0"},{n:["mechanic"],u:"1f9d1-200d-1f527",v:["1f9d1-1f3fb-200d-1f527","1f9d1-1f3fc-200d-1f527","1f9d1-1f3fd-200d-1f527","1f9d1-1f3fe-200d-1f527","1f9d1-1f3ff-200d-1f527"],a:"12.1"},{n:["man mechanic","male-mechanic"],u:"1f468-200d-1f527",v:["1f468-1f3fb-200d-1f527","1f468-1f3fc-200d-1f527","1f468-1f3fd-200d-1f527","1f468-1f3fe-200d-1f527","1f468-1f3ff-200d-1f527"],a:"4.0"},{n:["woman mechanic","female-mechanic"],u:"1f469-200d-1f527",v:["1f469-1f3fb-200d-1f527","1f469-1f3fc-200d-1f527","1f469-1f3fd-200d-1f527","1f469-1f3fe-200d-1f527","1f469-1f3ff-200d-1f527"],a:"4.0"},{n:["factory worker"],u:"1f9d1-200d-1f3ed",v:["1f9d1-1f3fb-200d-1f3ed","1f9d1-1f3fc-200d-1f3ed","1f9d1-1f3fd-200d-1f3ed","1f9d1-1f3fe-200d-1f3ed","1f9d1-1f3ff-200d-1f3ed"],a:"12.1"},{n:["man factory worker","male-factory-worker"],u:"1f468-200d-1f3ed",v:["1f468-1f3fb-200d-1f3ed","1f468-1f3fc-200d-1f3ed","1f468-1f3fd-200d-1f3ed","1f468-1f3fe-200d-1f3ed","1f468-1f3ff-200d-1f3ed"],a:"4.0"},{n:["woman factory worker","female-factory-worker"],u:"1f469-200d-1f3ed",v:["1f469-1f3fb-200d-1f3ed","1f469-1f3fc-200d-1f3ed","1f469-1f3fd-200d-1f3ed","1f469-1f3fe-200d-1f3ed","1f469-1f3ff-200d-1f3ed"],a:"4.0"},{n:["office worker"],u:"1f9d1-200d-1f4bc",v:["1f9d1-1f3fb-200d-1f4bc","1f9d1-1f3fc-200d-1f4bc","1f9d1-1f3fd-200d-1f4bc","1f9d1-1f3fe-200d-1f4bc","1f9d1-1f3ff-200d-1f4bc"],a:"12.1"},{n:["man office worker","male-office-worker"],u:"1f468-200d-1f4bc",v:["1f468-1f3fb-200d-1f4bc","1f468-1f3fc-200d-1f4bc","1f468-1f3fd-200d-1f4bc","1f468-1f3fe-200d-1f4bc","1f468-1f3ff-200d-1f4bc"],a:"4.0"},{n:["woman office worker","female-office-worker"],u:"1f469-200d-1f4bc",v:["1f469-1f3fb-200d-1f4bc","1f469-1f3fc-200d-1f4bc","1f469-1f3fd-200d-1f4bc","1f469-1f3fe-200d-1f4bc","1f469-1f3ff-200d-1f4bc"],a:"4.0"},{n:["scientist"],u:"1f9d1-200d-1f52c",v:["1f9d1-1f3fb-200d-1f52c","1f9d1-1f3fc-200d-1f52c","1f9d1-1f3fd-200d-1f52c","1f9d1-1f3fe-200d-1f52c","1f9d1-1f3ff-200d-1f52c"],a:"12.1"},{n:["man scientist","male-scientist"],u:"1f468-200d-1f52c",v:["1f468-1f3fb-200d-1f52c","1f468-1f3fc-200d-1f52c","1f468-1f3fd-200d-1f52c","1f468-1f3fe-200d-1f52c","1f468-1f3ff-200d-1f52c"],a:"4.0"},{n:["woman scientist","female-scientist"],u:"1f469-200d-1f52c",v:["1f469-1f3fb-200d-1f52c","1f469-1f3fc-200d-1f52c","1f469-1f3fd-200d-1f52c","1f469-1f3fe-200d-1f52c","1f469-1f3ff-200d-1f52c"],a:"4.0"},{n:["technologist"],u:"1f9d1-200d-1f4bb",v:["1f9d1-1f3fb-200d-1f4bb","1f9d1-1f3fc-200d-1f4bb","1f9d1-1f3fd-200d-1f4bb","1f9d1-1f3fe-200d-1f4bb","1f9d1-1f3ff-200d-1f4bb"],a:"12.1"},{n:["man technologist","male-technologist"],u:"1f468-200d-1f4bb",v:["1f468-1f3fb-200d-1f4bb","1f468-1f3fc-200d-1f4bb","1f468-1f3fd-200d-1f4bb","1f468-1f3fe-200d-1f4bb","1f468-1f3ff-200d-1f4bb"],a:"4.0"},{n:["woman technologist","female-technologist"],u:"1f469-200d-1f4bb",v:["1f469-1f3fb-200d-1f4bb","1f469-1f3fc-200d-1f4bb","1f469-1f3fd-200d-1f4bb","1f469-1f3fe-200d-1f4bb","1f469-1f3ff-200d-1f4bb"],a:"4.0"},{n:["singer"],u:"1f9d1-200d-1f3a4",v:["1f9d1-1f3fb-200d-1f3a4","1f9d1-1f3fc-200d-1f3a4","1f9d1-1f3fd-200d-1f3a4","1f9d1-1f3fe-200d-1f3a4","1f9d1-1f3ff-200d-1f3a4"],a:"12.1"},{n:["man singer","male-singer"],u:"1f468-200d-1f3a4",v:["1f468-1f3fb-200d-1f3a4","1f468-1f3fc-200d-1f3a4","1f468-1f3fd-200d-1f3a4","1f468-1f3fe-200d-1f3a4","1f468-1f3ff-200d-1f3a4"],a:"4.0"},{n:["woman singer","female-singer"],u:"1f469-200d-1f3a4",v:["1f469-1f3fb-200d-1f3a4","1f469-1f3fc-200d-1f3a4","1f469-1f3fd-200d-1f3a4","1f469-1f3fe-200d-1f3a4","1f469-1f3ff-200d-1f3a4"],a:"4.0"},{n:["artist"],u:"1f9d1-200d-1f3a8",v:["1f9d1-1f3fb-200d-1f3a8","1f9d1-1f3fc-200d-1f3a8","1f9d1-1f3fd-200d-1f3a8","1f9d1-1f3fe-200d-1f3a8","1f9d1-1f3ff-200d-1f3a8"],a:"12.1"},{n:["man artist","male-artist"],u:"1f468-200d-1f3a8",v:["1f468-1f3fb-200d-1f3a8","1f468-1f3fc-200d-1f3a8","1f468-1f3fd-200d-1f3a8","1f468-1f3fe-200d-1f3a8","1f468-1f3ff-200d-1f3a8"],a:"4.0"},{n:["woman artist","female-artist"],u:"1f469-200d-1f3a8",v:["1f469-1f3fb-200d-1f3a8","1f469-1f3fc-200d-1f3a8","1f469-1f3fd-200d-1f3a8","1f469-1f3fe-200d-1f3a8","1f469-1f3ff-200d-1f3a8"],a:"4.0"},{n:["pilot"],u:"1f9d1-200d-2708-fe0f",v:["1f9d1-1f3fb-200d-2708-fe0f","1f9d1-1f3fc-200d-2708-fe0f","1f9d1-1f3fd-200d-2708-fe0f","1f9d1-1f3fe-200d-2708-fe0f","1f9d1-1f3ff-200d-2708-fe0f"],a:"12.1"},{n:["man pilot","male-pilot"],u:"1f468-200d-2708-fe0f",v:["1f468-1f3fb-200d-2708-fe0f","1f468-1f3fc-200d-2708-fe0f","1f468-1f3fd-200d-2708-fe0f","1f468-1f3fe-200d-2708-fe0f","1f468-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["woman pilot","female-pilot"],u:"1f469-200d-2708-fe0f",v:["1f469-1f3fb-200d-2708-fe0f","1f469-1f3fc-200d-2708-fe0f","1f469-1f3fd-200d-2708-fe0f","1f469-1f3fe-200d-2708-fe0f","1f469-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["astronaut"],u:"1f9d1-200d-1f680",v:["1f9d1-1f3fb-200d-1f680","1f9d1-1f3fc-200d-1f680","1f9d1-1f3fd-200d-1f680","1f9d1-1f3fe-200d-1f680","1f9d1-1f3ff-200d-1f680"],a:"12.1"},{n:["man astronaut","male-astronaut"],u:"1f468-200d-1f680",v:["1f468-1f3fb-200d-1f680","1f468-1f3fc-200d-1f680","1f468-1f3fd-200d-1f680","1f468-1f3fe-200d-1f680","1f468-1f3ff-200d-1f680"],a:"4.0"},{n:["woman astronaut","female-astronaut"],u:"1f469-200d-1f680",v:["1f469-1f3fb-200d-1f680","1f469-1f3fc-200d-1f680","1f469-1f3fd-200d-1f680","1f469-1f3fe-200d-1f680","1f469-1f3ff-200d-1f680"],a:"4.0"},{n:["firefighter"],u:"1f9d1-200d-1f692",v:["1f9d1-1f3fb-200d-1f692","1f9d1-1f3fc-200d-1f692","1f9d1-1f3fd-200d-1f692","1f9d1-1f3fe-200d-1f692","1f9d1-1f3ff-200d-1f692"],a:"12.1"},{n:["man firefighter","male-firefighter"],u:"1f468-200d-1f692",v:["1f468-1f3fb-200d-1f692","1f468-1f3fc-200d-1f692","1f468-1f3fd-200d-1f692","1f468-1f3fe-200d-1f692","1f468-1f3ff-200d-1f692"],a:"4.0"},{n:["woman firefighter","female-firefighter"],u:"1f469-200d-1f692",v:["1f469-1f3fb-200d-1f692","1f469-1f3fc-200d-1f692","1f469-1f3fd-200d-1f692","1f469-1f3fe-200d-1f692","1f469-1f3ff-200d-1f692"],a:"4.0"},{n:["cop","police officer"],u:"1f46e",v:["1f46e-1f3fb","1f46e-1f3fc","1f46e-1f3fd","1f46e-1f3fe","1f46e-1f3ff"],a:"0.6"},{n:["man police officer","male-police-officer"],u:"1f46e-200d-2642-fe0f",v:["1f46e-1f3fb-200d-2642-fe0f","1f46e-1f3fc-200d-2642-fe0f","1f46e-1f3fd-200d-2642-fe0f","1f46e-1f3fe-200d-2642-fe0f","1f46e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman police officer","female-police-officer"],u:"1f46e-200d-2640-fe0f",v:["1f46e-1f3fb-200d-2640-fe0f","1f46e-1f3fc-200d-2640-fe0f","1f46e-1f3fd-200d-2640-fe0f","1f46e-1f3fe-200d-2640-fe0f","1f46e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["detective","sleuth or spy"],u:"1f575-fe0f",v:["1f575-1f3fb","1f575-1f3fc","1f575-1f3fd","1f575-1f3fe","1f575-1f3ff"],a:"0.7"},{n:["man detective","male-detective"],u:"1f575-fe0f-200d-2642-fe0f",v:["1f575-1f3fb-200d-2642-fe0f","1f575-1f3fc-200d-2642-fe0f","1f575-1f3fd-200d-2642-fe0f","1f575-1f3fe-200d-2642-fe0f","1f575-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman detective","female-detective"],u:"1f575-fe0f-200d-2640-fe0f",v:["1f575-1f3fb-200d-2640-fe0f","1f575-1f3fc-200d-2640-fe0f","1f575-1f3fd-200d-2640-fe0f","1f575-1f3fe-200d-2640-fe0f","1f575-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["guardsman"],u:"1f482",v:["1f482-1f3fb","1f482-1f3fc","1f482-1f3fd","1f482-1f3fe","1f482-1f3ff"],a:"0.6"},{n:["man guard","male-guard"],u:"1f482-200d-2642-fe0f",v:["1f482-1f3fb-200d-2642-fe0f","1f482-1f3fc-200d-2642-fe0f","1f482-1f3fd-200d-2642-fe0f","1f482-1f3fe-200d-2642-fe0f","1f482-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman guard","female-guard"],u:"1f482-200d-2640-fe0f",v:["1f482-1f3fb-200d-2640-fe0f","1f482-1f3fc-200d-2640-fe0f","1f482-1f3fd-200d-2640-fe0f","1f482-1f3fe-200d-2640-fe0f","1f482-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ninja"],u:"1f977",v:["1f977-1f3fb","1f977-1f3fc","1f977-1f3fd","1f977-1f3fe","1f977-1f3ff"],a:"13.0"},{n:["construction worker"],u:"1f477",v:["1f477-1f3fb","1f477-1f3fc","1f477-1f3fd","1f477-1f3fe","1f477-1f3ff"],a:"0.6"},{n:["man construction worker","male-construction-worker"],u:"1f477-200d-2642-fe0f",v:["1f477-1f3fb-200d-2642-fe0f","1f477-1f3fc-200d-2642-fe0f","1f477-1f3fd-200d-2642-fe0f","1f477-1f3fe-200d-2642-fe0f","1f477-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman construction worker","female-construction-worker"],u:"1f477-200d-2640-fe0f",v:["1f477-1f3fb-200d-2640-fe0f","1f477-1f3fc-200d-2640-fe0f","1f477-1f3fd-200d-2640-fe0f","1f477-1f3fe-200d-2640-fe0f","1f477-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with crown"],u:"1fac5",v:["1fac5-1f3fb","1fac5-1f3fc","1fac5-1f3fd","1fac5-1f3fe","1fac5-1f3ff"],a:"14.0"},{n:["prince"],u:"1f934",v:["1f934-1f3fb","1f934-1f3fc","1f934-1f3fd","1f934-1f3fe","1f934-1f3ff"],a:"3.0"},{n:["princess"],u:"1f478",v:["1f478-1f3fb","1f478-1f3fc","1f478-1f3fd","1f478-1f3fe","1f478-1f3ff"],a:"0.6"},{n:["man with turban"],u:"1f473",v:["1f473-1f3fb","1f473-1f3fc","1f473-1f3fd","1f473-1f3fe","1f473-1f3ff"],a:"0.6"},{n:["man wearing turban","man-wearing-turban"],u:"1f473-200d-2642-fe0f",v:["1f473-1f3fb-200d-2642-fe0f","1f473-1f3fc-200d-2642-fe0f","1f473-1f3fd-200d-2642-fe0f","1f473-1f3fe-200d-2642-fe0f","1f473-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman wearing turban","woman-wearing-turban"],u:"1f473-200d-2640-fe0f",v:["1f473-1f3fb-200d-2640-fe0f","1f473-1f3fc-200d-2640-fe0f","1f473-1f3fd-200d-2640-fe0f","1f473-1f3fe-200d-2640-fe0f","1f473-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man with gua pi mao"],u:"1f472",v:["1f472-1f3fb","1f472-1f3fc","1f472-1f3fd","1f472-1f3fe","1f472-1f3ff"],a:"0.6"},{n:["person with headscarf"],u:"1f9d5",v:["1f9d5-1f3fb","1f9d5-1f3fc","1f9d5-1f3fd","1f9d5-1f3fe","1f9d5-1f3ff"],a:"5.0"},{n:["man in tuxedo","person in tuxedo"],u:"1f935",v:["1f935-1f3fb","1f935-1f3fc","1f935-1f3fd","1f935-1f3fe","1f935-1f3ff"],a:"3.0"},{n:["man in tuxedo"],u:"1f935-200d-2642-fe0f",v:["1f935-1f3fb-200d-2642-fe0f","1f935-1f3fc-200d-2642-fe0f","1f935-1f3fd-200d-2642-fe0f","1f935-1f3fe-200d-2642-fe0f","1f935-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman in tuxedo"],u:"1f935-200d-2640-fe0f",v:["1f935-1f3fb-200d-2640-fe0f","1f935-1f3fc-200d-2640-fe0f","1f935-1f3fd-200d-2640-fe0f","1f935-1f3fe-200d-2640-fe0f","1f935-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["bride with veil"],u:"1f470",v:["1f470-1f3fb","1f470-1f3fc","1f470-1f3fd","1f470-1f3fe","1f470-1f3ff"],a:"0.6"},{n:["man with veil"],u:"1f470-200d-2642-fe0f",v:["1f470-1f3fb-200d-2642-fe0f","1f470-1f3fc-200d-2642-fe0f","1f470-1f3fd-200d-2642-fe0f","1f470-1f3fe-200d-2642-fe0f","1f470-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman with veil"],u:"1f470-200d-2640-fe0f",v:["1f470-1f3fb-200d-2640-fe0f","1f470-1f3fc-200d-2640-fe0f","1f470-1f3fd-200d-2640-fe0f","1f470-1f3fe-200d-2640-fe0f","1f470-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["pregnant woman"],u:"1f930",v:["1f930-1f3fb","1f930-1f3fc","1f930-1f3fd","1f930-1f3fe","1f930-1f3ff"],a:"3.0"},{n:["pregnant man"],u:"1fac3",v:["1fac3-1f3fb","1fac3-1f3fc","1fac3-1f3fd","1fac3-1f3fe","1fac3-1f3ff"],a:"14.0"},{n:["pregnant person"],u:"1fac4",v:["1fac4-1f3fb","1fac4-1f3fc","1fac4-1f3fd","1fac4-1f3fe","1fac4-1f3ff"],a:"14.0"},{n:["breast-feeding"],u:"1f931",v:["1f931-1f3fb","1f931-1f3fc","1f931-1f3fd","1f931-1f3fe","1f931-1f3ff"],a:"5.0"},{n:["woman feeding baby"],u:"1f469-200d-1f37c",v:["1f469-1f3fb-200d-1f37c","1f469-1f3fc-200d-1f37c","1f469-1f3fd-200d-1f37c","1f469-1f3fe-200d-1f37c","1f469-1f3ff-200d-1f37c"],a:"13.0"},{n:["man feeding baby"],u:"1f468-200d-1f37c",v:["1f468-1f3fb-200d-1f37c","1f468-1f3fc-200d-1f37c","1f468-1f3fd-200d-1f37c","1f468-1f3fe-200d-1f37c","1f468-1f3ff-200d-1f37c"],a:"13.0"},{n:["person feeding baby"],u:"1f9d1-200d-1f37c",v:["1f9d1-1f3fb-200d-1f37c","1f9d1-1f3fc-200d-1f37c","1f9d1-1f3fd-200d-1f37c","1f9d1-1f3fe-200d-1f37c","1f9d1-1f3ff-200d-1f37c"],a:"13.0"},{n:["angel","baby angel"],u:"1f47c",v:["1f47c-1f3fb","1f47c-1f3fc","1f47c-1f3fd","1f47c-1f3fe","1f47c-1f3ff"],a:"0.6"},{n:["santa","father christmas"],u:"1f385",v:["1f385-1f3fb","1f385-1f3fc","1f385-1f3fd","1f385-1f3fe","1f385-1f3ff"],a:"0.6"},{n:["mrs claus","mother christmas"],u:"1f936",v:["1f936-1f3fb","1f936-1f3fc","1f936-1f3fd","1f936-1f3fe","1f936-1f3ff"],a:"3.0"},{n:["mx claus"],u:"1f9d1-200d-1f384",v:["1f9d1-1f3fb-200d-1f384","1f9d1-1f3fc-200d-1f384","1f9d1-1f3fd-200d-1f384","1f9d1-1f3fe-200d-1f384","1f9d1-1f3ff-200d-1f384"],a:"13.0"},{n:["superhero"],u:"1f9b8",v:["1f9b8-1f3fb","1f9b8-1f3fc","1f9b8-1f3fd","1f9b8-1f3fe","1f9b8-1f3ff"],a:"11.0"},{n:["man superhero","male superhero"],u:"1f9b8-200d-2642-fe0f",v:["1f9b8-1f3fb-200d-2642-fe0f","1f9b8-1f3fc-200d-2642-fe0f","1f9b8-1f3fd-200d-2642-fe0f","1f9b8-1f3fe-200d-2642-fe0f","1f9b8-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman superhero","female superhero"],u:"1f9b8-200d-2640-fe0f",v:["1f9b8-1f3fb-200d-2640-fe0f","1f9b8-1f3fc-200d-2640-fe0f","1f9b8-1f3fd-200d-2640-fe0f","1f9b8-1f3fe-200d-2640-fe0f","1f9b8-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["supervillain"],u:"1f9b9",v:["1f9b9-1f3fb","1f9b9-1f3fc","1f9b9-1f3fd","1f9b9-1f3fe","1f9b9-1f3ff"],a:"11.0"},{n:["man supervillain","male supervillain"],u:"1f9b9-200d-2642-fe0f",v:["1f9b9-1f3fb-200d-2642-fe0f","1f9b9-1f3fc-200d-2642-fe0f","1f9b9-1f3fd-200d-2642-fe0f","1f9b9-1f3fe-200d-2642-fe0f","1f9b9-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman supervillain","female supervillain"],u:"1f9b9-200d-2640-fe0f",v:["1f9b9-1f3fb-200d-2640-fe0f","1f9b9-1f3fc-200d-2640-fe0f","1f9b9-1f3fd-200d-2640-fe0f","1f9b9-1f3fe-200d-2640-fe0f","1f9b9-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["mage"],u:"1f9d9",v:["1f9d9-1f3fb","1f9d9-1f3fc","1f9d9-1f3fd","1f9d9-1f3fe","1f9d9-1f3ff"],a:"5.0"},{n:["man mage","male mage"],u:"1f9d9-200d-2642-fe0f",v:["1f9d9-1f3fb-200d-2642-fe0f","1f9d9-1f3fc-200d-2642-fe0f","1f9d9-1f3fd-200d-2642-fe0f","1f9d9-1f3fe-200d-2642-fe0f","1f9d9-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman mage","female mage"],u:"1f9d9-200d-2640-fe0f",v:["1f9d9-1f3fb-200d-2640-fe0f","1f9d9-1f3fc-200d-2640-fe0f","1f9d9-1f3fd-200d-2640-fe0f","1f9d9-1f3fe-200d-2640-fe0f","1f9d9-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fairy"],u:"1f9da",v:["1f9da-1f3fb","1f9da-1f3fc","1f9da-1f3fd","1f9da-1f3fe","1f9da-1f3ff"],a:"5.0"},{n:["man fairy","male fairy"],u:"1f9da-200d-2642-fe0f",v:["1f9da-1f3fb-200d-2642-fe0f","1f9da-1f3fc-200d-2642-fe0f","1f9da-1f3fd-200d-2642-fe0f","1f9da-1f3fe-200d-2642-fe0f","1f9da-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman fairy","female fairy"],u:"1f9da-200d-2640-fe0f",v:["1f9da-1f3fb-200d-2640-fe0f","1f9da-1f3fc-200d-2640-fe0f","1f9da-1f3fd-200d-2640-fe0f","1f9da-1f3fe-200d-2640-fe0f","1f9da-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["vampire"],u:"1f9db",v:["1f9db-1f3fb","1f9db-1f3fc","1f9db-1f3fd","1f9db-1f3fe","1f9db-1f3ff"],a:"5.0"},{n:["man vampire","male vampire"],u:"1f9db-200d-2642-fe0f",v:["1f9db-1f3fb-200d-2642-fe0f","1f9db-1f3fc-200d-2642-fe0f","1f9db-1f3fd-200d-2642-fe0f","1f9db-1f3fe-200d-2642-fe0f","1f9db-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman vampire","female vampire"],u:"1f9db-200d-2640-fe0f",v:["1f9db-1f3fb-200d-2640-fe0f","1f9db-1f3fc-200d-2640-fe0f","1f9db-1f3fd-200d-2640-fe0f","1f9db-1f3fe-200d-2640-fe0f","1f9db-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["merperson"],u:"1f9dc",v:["1f9dc-1f3fb","1f9dc-1f3fc","1f9dc-1f3fd","1f9dc-1f3fe","1f9dc-1f3ff"],a:"5.0"},{n:["merman"],u:"1f9dc-200d-2642-fe0f",v:["1f9dc-1f3fb-200d-2642-fe0f","1f9dc-1f3fc-200d-2642-fe0f","1f9dc-1f3fd-200d-2642-fe0f","1f9dc-1f3fe-200d-2642-fe0f","1f9dc-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["mermaid"],u:"1f9dc-200d-2640-fe0f",v:["1f9dc-1f3fb-200d-2640-fe0f","1f9dc-1f3fc-200d-2640-fe0f","1f9dc-1f3fd-200d-2640-fe0f","1f9dc-1f3fe-200d-2640-fe0f","1f9dc-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["elf"],u:"1f9dd",v:["1f9dd-1f3fb","1f9dd-1f3fc","1f9dd-1f3fd","1f9dd-1f3fe","1f9dd-1f3ff"],a:"5.0"},{n:["man elf","male elf"],u:"1f9dd-200d-2642-fe0f",v:["1f9dd-1f3fb-200d-2642-fe0f","1f9dd-1f3fc-200d-2642-fe0f","1f9dd-1f3fd-200d-2642-fe0f","1f9dd-1f3fe-200d-2642-fe0f","1f9dd-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman elf","female elf"],u:"1f9dd-200d-2640-fe0f",v:["1f9dd-1f3fb-200d-2640-fe0f","1f9dd-1f3fc-200d-2640-fe0f","1f9dd-1f3fd-200d-2640-fe0f","1f9dd-1f3fe-200d-2640-fe0f","1f9dd-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["genie"],u:"1f9de",a:"5.0"},{n:["man genie","male genie"],u:"1f9de-200d-2642-fe0f",a:"5.0"},{n:["woman genie","female genie"],u:"1f9de-200d-2640-fe0f",a:"5.0"},{n:["zombie"],u:"1f9df",a:"5.0"},{n:["man zombie","male zombie"],u:"1f9df-200d-2642-fe0f",a:"5.0"},{n:["woman zombie","female zombie"],u:"1f9df-200d-2640-fe0f",a:"5.0"},{n:["troll"],u:"1f9cc",a:"14.0"},{n:["massage","face massage"],u:"1f486",v:["1f486-1f3fb","1f486-1f3fc","1f486-1f3fd","1f486-1f3fe","1f486-1f3ff"],a:"0.6"},{n:["man getting massage","man-getting-massage"],u:"1f486-200d-2642-fe0f",v:["1f486-1f3fb-200d-2642-fe0f","1f486-1f3fc-200d-2642-fe0f","1f486-1f3fd-200d-2642-fe0f","1f486-1f3fe-200d-2642-fe0f","1f486-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting massage","woman-getting-massage"],u:"1f486-200d-2640-fe0f",v:["1f486-1f3fb-200d-2640-fe0f","1f486-1f3fc-200d-2640-fe0f","1f486-1f3fd-200d-2640-fe0f","1f486-1f3fe-200d-2640-fe0f","1f486-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["haircut"],u:"1f487",v:["1f487-1f3fb","1f487-1f3fc","1f487-1f3fd","1f487-1f3fe","1f487-1f3ff"],a:"0.6"},{n:["man getting haircut","man-getting-haircut"],u:"1f487-200d-2642-fe0f",v:["1f487-1f3fb-200d-2642-fe0f","1f487-1f3fc-200d-2642-fe0f","1f487-1f3fd-200d-2642-fe0f","1f487-1f3fe-200d-2642-fe0f","1f487-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting haircut","woman-getting-haircut"],u:"1f487-200d-2640-fe0f",v:["1f487-1f3fb-200d-2640-fe0f","1f487-1f3fc-200d-2640-fe0f","1f487-1f3fd-200d-2640-fe0f","1f487-1f3fe-200d-2640-fe0f","1f487-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["walking","pedestrian"],u:"1f6b6",v:["1f6b6-1f3fb","1f6b6-1f3fc","1f6b6-1f3fd","1f6b6-1f3fe","1f6b6-1f3ff"],a:"0.6"},{n:["man walking","man-walking"],u:"1f6b6-200d-2642-fe0f",v:["1f6b6-1f3fb-200d-2642-fe0f","1f6b6-1f3fc-200d-2642-fe0f","1f6b6-1f3fd-200d-2642-fe0f","1f6b6-1f3fe-200d-2642-fe0f","1f6b6-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman walking","woman-walking"],u:"1f6b6-200d-2640-fe0f",v:["1f6b6-1f3fb-200d-2640-fe0f","1f6b6-1f3fc-200d-2640-fe0f","1f6b6-1f3fd-200d-2640-fe0f","1f6b6-1f3fe-200d-2640-fe0f","1f6b6-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["standing person"],u:"1f9cd",v:["1f9cd-1f3fb","1f9cd-1f3fc","1f9cd-1f3fd","1f9cd-1f3fe","1f9cd-1f3ff"],a:"12.0"},{n:["man standing"],u:"1f9cd-200d-2642-fe0f",v:["1f9cd-1f3fb-200d-2642-fe0f","1f9cd-1f3fc-200d-2642-fe0f","1f9cd-1f3fd-200d-2642-fe0f","1f9cd-1f3fe-200d-2642-fe0f","1f9cd-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman standing"],u:"1f9cd-200d-2640-fe0f",v:["1f9cd-1f3fb-200d-2640-fe0f","1f9cd-1f3fc-200d-2640-fe0f","1f9cd-1f3fd-200d-2640-fe0f","1f9cd-1f3fe-200d-2640-fe0f","1f9cd-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["kneeling person"],u:"1f9ce",v:["1f9ce-1f3fb","1f9ce-1f3fc","1f9ce-1f3fd","1f9ce-1f3fe","1f9ce-1f3ff"],a:"12.0"},{n:["man kneeling"],u:"1f9ce-200d-2642-fe0f",v:["1f9ce-1f3fb-200d-2642-fe0f","1f9ce-1f3fc-200d-2642-fe0f","1f9ce-1f3fd-200d-2642-fe0f","1f9ce-1f3fe-200d-2642-fe0f","1f9ce-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman kneeling"],u:"1f9ce-200d-2640-fe0f",v:["1f9ce-1f3fb-200d-2640-fe0f","1f9ce-1f3fc-200d-2640-fe0f","1f9ce-1f3fd-200d-2640-fe0f","1f9ce-1f3fe-200d-2640-fe0f","1f9ce-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["person with white cane","person with probing cane"],u:"1f9d1-200d-1f9af",v:["1f9d1-1f3fb-200d-1f9af","1f9d1-1f3fc-200d-1f9af","1f9d1-1f3fd-200d-1f9af","1f9d1-1f3fe-200d-1f9af","1f9d1-1f3ff-200d-1f9af"],a:"12.1"},{n:["man with white cane","man with probing cane"],u:"1f468-200d-1f9af",v:["1f468-1f3fb-200d-1f9af","1f468-1f3fc-200d-1f9af","1f468-1f3fd-200d-1f9af","1f468-1f3fe-200d-1f9af","1f468-1f3ff-200d-1f9af"],a:"12.0"},{n:["woman with white cane","woman with probing cane"],u:"1f469-200d-1f9af",v:["1f469-1f3fb-200d-1f9af","1f469-1f3fc-200d-1f9af","1f469-1f3fd-200d-1f9af","1f469-1f3fe-200d-1f9af","1f469-1f3ff-200d-1f9af"],a:"12.0"},{n:["person in motorized wheelchair"],u:"1f9d1-200d-1f9bc",v:["1f9d1-1f3fb-200d-1f9bc","1f9d1-1f3fc-200d-1f9bc","1f9d1-1f3fd-200d-1f9bc","1f9d1-1f3fe-200d-1f9bc","1f9d1-1f3ff-200d-1f9bc"],a:"12.1"},{n:["man in motorized wheelchair"],u:"1f468-200d-1f9bc",v:["1f468-1f3fb-200d-1f9bc","1f468-1f3fc-200d-1f9bc","1f468-1f3fd-200d-1f9bc","1f468-1f3fe-200d-1f9bc","1f468-1f3ff-200d-1f9bc"],a:"12.0"},{n:["woman in motorized wheelchair"],u:"1f469-200d-1f9bc",v:["1f469-1f3fb-200d-1f9bc","1f469-1f3fc-200d-1f9bc","1f469-1f3fd-200d-1f9bc","1f469-1f3fe-200d-1f9bc","1f469-1f3ff-200d-1f9bc"],a:"12.0"},{n:["person in manual wheelchair"],u:"1f9d1-200d-1f9bd",v:["1f9d1-1f3fb-200d-1f9bd","1f9d1-1f3fc-200d-1f9bd","1f9d1-1f3fd-200d-1f9bd","1f9d1-1f3fe-200d-1f9bd","1f9d1-1f3ff-200d-1f9bd"],a:"12.1"},{n:["man in manual wheelchair"],u:"1f468-200d-1f9bd",v:["1f468-1f3fb-200d-1f9bd","1f468-1f3fc-200d-1f9bd","1f468-1f3fd-200d-1f9bd","1f468-1f3fe-200d-1f9bd","1f468-1f3ff-200d-1f9bd"],a:"12.0"},{n:["woman in manual wheelchair"],u:"1f469-200d-1f9bd",v:["1f469-1f3fb-200d-1f9bd","1f469-1f3fc-200d-1f9bd","1f469-1f3fd-200d-1f9bd","1f469-1f3fe-200d-1f9bd","1f469-1f3ff-200d-1f9bd"],a:"12.0"},{n:["runner","running"],u:"1f3c3",v:["1f3c3-1f3fb","1f3c3-1f3fc","1f3c3-1f3fd","1f3c3-1f3fe","1f3c3-1f3ff"],a:"0.6"},{n:["man running","man-running"],u:"1f3c3-200d-2642-fe0f",v:["1f3c3-1f3fb-200d-2642-fe0f","1f3c3-1f3fc-200d-2642-fe0f","1f3c3-1f3fd-200d-2642-fe0f","1f3c3-1f3fe-200d-2642-fe0f","1f3c3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman running","woman-running"],u:"1f3c3-200d-2640-fe0f",v:["1f3c3-1f3fb-200d-2640-fe0f","1f3c3-1f3fc-200d-2640-fe0f","1f3c3-1f3fd-200d-2640-fe0f","1f3c3-1f3fe-200d-2640-fe0f","1f3c3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["dancer"],u:"1f483",v:["1f483-1f3fb","1f483-1f3fc","1f483-1f3fd","1f483-1f3fe","1f483-1f3ff"],a:"0.6"},{n:["man dancing"],u:"1f57a",v:["1f57a-1f3fb","1f57a-1f3fc","1f57a-1f3fd","1f57a-1f3fe","1f57a-1f3ff"],a:"3.0"},{n:["person in suit levitating","man in business suit levitating"],u:"1f574-fe0f",v:["1f574-1f3fb","1f574-1f3fc","1f574-1f3fd","1f574-1f3fe","1f574-1f3ff"],a:"0.7"},{n:["dancers","woman with bunny ears"],u:"1f46f",a:"0.6"},{n:["men with bunny ears","men-with-bunny-ears-partying","man-with-bunny-ears-partying"],u:"1f46f-200d-2642-fe0f",a:"4.0"},{n:["women with bunny ears","women-with-bunny-ears-partying","woman-with-bunny-ears-partying"],u:"1f46f-200d-2640-fe0f",a:"4.0"},{n:["person in steamy room"],u:"1f9d6",v:["1f9d6-1f3fb","1f9d6-1f3fc","1f9d6-1f3fd","1f9d6-1f3fe","1f9d6-1f3ff"],a:"5.0"},{n:["man in steamy room"],u:"1f9d6-200d-2642-fe0f",v:["1f9d6-1f3fb-200d-2642-fe0f","1f9d6-1f3fc-200d-2642-fe0f","1f9d6-1f3fd-200d-2642-fe0f","1f9d6-1f3fe-200d-2642-fe0f","1f9d6-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in steamy room"],u:"1f9d6-200d-2640-fe0f",v:["1f9d6-1f3fb-200d-2640-fe0f","1f9d6-1f3fc-200d-2640-fe0f","1f9d6-1f3fd-200d-2640-fe0f","1f9d6-1f3fe-200d-2640-fe0f","1f9d6-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["person climbing"],u:"1f9d7",v:["1f9d7-1f3fb","1f9d7-1f3fc","1f9d7-1f3fd","1f9d7-1f3fe","1f9d7-1f3ff"],a:"5.0"},{n:["man climbing"],u:"1f9d7-200d-2642-fe0f",v:["1f9d7-1f3fb-200d-2642-fe0f","1f9d7-1f3fc-200d-2642-fe0f","1f9d7-1f3fd-200d-2642-fe0f","1f9d7-1f3fe-200d-2642-fe0f","1f9d7-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman climbing"],u:"1f9d7-200d-2640-fe0f",v:["1f9d7-1f3fb-200d-2640-fe0f","1f9d7-1f3fc-200d-2640-fe0f","1f9d7-1f3fd-200d-2640-fe0f","1f9d7-1f3fe-200d-2640-fe0f","1f9d7-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fencer"],u:"1f93a",a:"3.0"},{n:["horse racing"],u:"1f3c7",v:["1f3c7-1f3fb","1f3c7-1f3fc","1f3c7-1f3fd","1f3c7-1f3fe","1f3c7-1f3ff"],a:"1.0"},{n:["skier"],u:"26f7-fe0f",a:"0.7"},{n:["snowboarder"],u:"1f3c2",v:["1f3c2-1f3fb","1f3c2-1f3fc","1f3c2-1f3fd","1f3c2-1f3fe","1f3c2-1f3ff"],a:"0.6"},{n:["golfer","person golfing"],u:"1f3cc-fe0f",v:["1f3cc-1f3fb","1f3cc-1f3fc","1f3cc-1f3fd","1f3cc-1f3fe","1f3cc-1f3ff"],a:"0.7"},{n:["man golfing","man-golfing"],u:"1f3cc-fe0f-200d-2642-fe0f",v:["1f3cc-1f3fb-200d-2642-fe0f","1f3cc-1f3fc-200d-2642-fe0f","1f3cc-1f3fd-200d-2642-fe0f","1f3cc-1f3fe-200d-2642-fe0f","1f3cc-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman golfing","woman-golfing"],u:"1f3cc-fe0f-200d-2640-fe0f",v:["1f3cc-1f3fb-200d-2640-fe0f","1f3cc-1f3fc-200d-2640-fe0f","1f3cc-1f3fd-200d-2640-fe0f","1f3cc-1f3fe-200d-2640-fe0f","1f3cc-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["surfer"],u:"1f3c4",v:["1f3c4-1f3fb","1f3c4-1f3fc","1f3c4-1f3fd","1f3c4-1f3fe","1f3c4-1f3ff"],a:"0.6"},{n:["man surfing","man-surfing"],u:"1f3c4-200d-2642-fe0f",v:["1f3c4-1f3fb-200d-2642-fe0f","1f3c4-1f3fc-200d-2642-fe0f","1f3c4-1f3fd-200d-2642-fe0f","1f3c4-1f3fe-200d-2642-fe0f","1f3c4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman surfing","woman-surfing"],u:"1f3c4-200d-2640-fe0f",v:["1f3c4-1f3fb-200d-2640-fe0f","1f3c4-1f3fc-200d-2640-fe0f","1f3c4-1f3fd-200d-2640-fe0f","1f3c4-1f3fe-200d-2640-fe0f","1f3c4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["rowboat"],u:"1f6a3",v:["1f6a3-1f3fb","1f6a3-1f3fc","1f6a3-1f3fd","1f6a3-1f3fe","1f6a3-1f3ff"],a:"1.0"},{n:["man rowing boat","man-rowing-boat"],u:"1f6a3-200d-2642-fe0f",v:["1f6a3-1f3fb-200d-2642-fe0f","1f6a3-1f3fc-200d-2642-fe0f","1f6a3-1f3fd-200d-2642-fe0f","1f6a3-1f3fe-200d-2642-fe0f","1f6a3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman rowing boat","woman-rowing-boat"],u:"1f6a3-200d-2640-fe0f",v:["1f6a3-1f3fb-200d-2640-fe0f","1f6a3-1f3fc-200d-2640-fe0f","1f6a3-1f3fd-200d-2640-fe0f","1f6a3-1f3fe-200d-2640-fe0f","1f6a3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["swimmer"],u:"1f3ca",v:["1f3ca-1f3fb","1f3ca-1f3fc","1f3ca-1f3fd","1f3ca-1f3fe","1f3ca-1f3ff"],a:"0.6"},{n:["man swimming","man-swimming"],u:"1f3ca-200d-2642-fe0f",v:["1f3ca-1f3fb-200d-2642-fe0f","1f3ca-1f3fc-200d-2642-fe0f","1f3ca-1f3fd-200d-2642-fe0f","1f3ca-1f3fe-200d-2642-fe0f","1f3ca-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman swimming","woman-swimming"],u:"1f3ca-200d-2640-fe0f",v:["1f3ca-1f3fb-200d-2640-fe0f","1f3ca-1f3fc-200d-2640-fe0f","1f3ca-1f3fd-200d-2640-fe0f","1f3ca-1f3fe-200d-2640-fe0f","1f3ca-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with ball","person bouncing ball"],u:"26f9-fe0f",v:["26f9-1f3fb","26f9-1f3fc","26f9-1f3fd","26f9-1f3fe","26f9-1f3ff"],a:"0.7"},{n:["man bouncing ball","man-bouncing-ball"],u:"26f9-fe0f-200d-2642-fe0f",v:["26f9-1f3fb-200d-2642-fe0f","26f9-1f3fc-200d-2642-fe0f","26f9-1f3fd-200d-2642-fe0f","26f9-1f3fe-200d-2642-fe0f","26f9-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bouncing ball","woman-bouncing-ball"],u:"26f9-fe0f-200d-2640-fe0f",v:["26f9-1f3fb-200d-2640-fe0f","26f9-1f3fc-200d-2640-fe0f","26f9-1f3fd-200d-2640-fe0f","26f9-1f3fe-200d-2640-fe0f","26f9-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["weight lifter","person lifting weights"],u:"1f3cb-fe0f",v:["1f3cb-1f3fb","1f3cb-1f3fc","1f3cb-1f3fd","1f3cb-1f3fe","1f3cb-1f3ff"],a:"0.7"},{n:["man lifting weights","man-lifting-weights"],u:"1f3cb-fe0f-200d-2642-fe0f",v:["1f3cb-1f3fb-200d-2642-fe0f","1f3cb-1f3fc-200d-2642-fe0f","1f3cb-1f3fd-200d-2642-fe0f","1f3cb-1f3fe-200d-2642-fe0f","1f3cb-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman lifting weights","woman-lifting-weights"],u:"1f3cb-fe0f-200d-2640-fe0f",v:["1f3cb-1f3fb-200d-2640-fe0f","1f3cb-1f3fc-200d-2640-fe0f","1f3cb-1f3fd-200d-2640-fe0f","1f3cb-1f3fe-200d-2640-fe0f","1f3cb-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["bicyclist"],u:"1f6b4",v:["1f6b4-1f3fb","1f6b4-1f3fc","1f6b4-1f3fd","1f6b4-1f3fe","1f6b4-1f3ff"],a:"1.0"},{n:["man biking","man-biking"],u:"1f6b4-200d-2642-fe0f",v:["1f6b4-1f3fb-200d-2642-fe0f","1f6b4-1f3fc-200d-2642-fe0f","1f6b4-1f3fd-200d-2642-fe0f","1f6b4-1f3fe-200d-2642-fe0f","1f6b4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman biking","woman-biking"],u:"1f6b4-200d-2640-fe0f",v:["1f6b4-1f3fb-200d-2640-fe0f","1f6b4-1f3fc-200d-2640-fe0f","1f6b4-1f3fd-200d-2640-fe0f","1f6b4-1f3fe-200d-2640-fe0f","1f6b4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["mountain bicyclist"],u:"1f6b5",v:["1f6b5-1f3fb","1f6b5-1f3fc","1f6b5-1f3fd","1f6b5-1f3fe","1f6b5-1f3ff"],a:"1.0"},{n:["man mountain biking","man-mountain-biking"],u:"1f6b5-200d-2642-fe0f",v:["1f6b5-1f3fb-200d-2642-fe0f","1f6b5-1f3fc-200d-2642-fe0f","1f6b5-1f3fd-200d-2642-fe0f","1f6b5-1f3fe-200d-2642-fe0f","1f6b5-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman mountain biking","woman-mountain-biking"],u:"1f6b5-200d-2640-fe0f",v:["1f6b5-1f3fb-200d-2640-fe0f","1f6b5-1f3fc-200d-2640-fe0f","1f6b5-1f3fd-200d-2640-fe0f","1f6b5-1f3fe-200d-2640-fe0f","1f6b5-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person doing cartwheel"],u:"1f938",v:["1f938-1f3fb","1f938-1f3fc","1f938-1f3fd","1f938-1f3fe","1f938-1f3ff"],a:"3.0"},{n:["man cartwheeling","man-cartwheeling"],u:"1f938-200d-2642-fe0f",v:["1f938-1f3fb-200d-2642-fe0f","1f938-1f3fc-200d-2642-fe0f","1f938-1f3fd-200d-2642-fe0f","1f938-1f3fe-200d-2642-fe0f","1f938-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman cartwheeling","woman-cartwheeling"],u:"1f938-200d-2640-fe0f",v:["1f938-1f3fb-200d-2640-fe0f","1f938-1f3fc-200d-2640-fe0f","1f938-1f3fd-200d-2640-fe0f","1f938-1f3fe-200d-2640-fe0f","1f938-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["wrestlers"],u:"1f93c",a:"3.0"},{n:["men wrestling","man-wrestling"],u:"1f93c-200d-2642-fe0f",a:"4.0"},{n:["women wrestling","woman-wrestling"],u:"1f93c-200d-2640-fe0f",a:"4.0"},{n:["water polo"],u:"1f93d",v:["1f93d-1f3fb","1f93d-1f3fc","1f93d-1f3fd","1f93d-1f3fe","1f93d-1f3ff"],a:"3.0"},{n:["man playing water polo","man-playing-water-polo"],u:"1f93d-200d-2642-fe0f",v:["1f93d-1f3fb-200d-2642-fe0f","1f93d-1f3fc-200d-2642-fe0f","1f93d-1f3fd-200d-2642-fe0f","1f93d-1f3fe-200d-2642-fe0f","1f93d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing water polo","woman-playing-water-polo"],u:"1f93d-200d-2640-fe0f",v:["1f93d-1f3fb-200d-2640-fe0f","1f93d-1f3fc-200d-2640-fe0f","1f93d-1f3fd-200d-2640-fe0f","1f93d-1f3fe-200d-2640-fe0f","1f93d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["handball"],u:"1f93e",v:["1f93e-1f3fb","1f93e-1f3fc","1f93e-1f3fd","1f93e-1f3fe","1f93e-1f3ff"],a:"3.0"},{n:["man playing handball","man-playing-handball"],u:"1f93e-200d-2642-fe0f",v:["1f93e-1f3fb-200d-2642-fe0f","1f93e-1f3fc-200d-2642-fe0f","1f93e-1f3fd-200d-2642-fe0f","1f93e-1f3fe-200d-2642-fe0f","1f93e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing handball","woman-playing-handball"],u:"1f93e-200d-2640-fe0f",v:["1f93e-1f3fb-200d-2640-fe0f","1f93e-1f3fc-200d-2640-fe0f","1f93e-1f3fd-200d-2640-fe0f","1f93e-1f3fe-200d-2640-fe0f","1f93e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["juggling"],u:"1f939",v:["1f939-1f3fb","1f939-1f3fc","1f939-1f3fd","1f939-1f3fe","1f939-1f3ff"],a:"3.0"},{n:["man juggling","man-juggling"],u:"1f939-200d-2642-fe0f",v:["1f939-1f3fb-200d-2642-fe0f","1f939-1f3fc-200d-2642-fe0f","1f939-1f3fd-200d-2642-fe0f","1f939-1f3fe-200d-2642-fe0f","1f939-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman juggling","woman-juggling"],u:"1f939-200d-2640-fe0f",v:["1f939-1f3fb-200d-2640-fe0f","1f939-1f3fc-200d-2640-fe0f","1f939-1f3fd-200d-2640-fe0f","1f939-1f3fe-200d-2640-fe0f","1f939-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person in lotus position"],u:"1f9d8",v:["1f9d8-1f3fb","1f9d8-1f3fc","1f9d8-1f3fd","1f9d8-1f3fe","1f9d8-1f3ff"],a:"5.0"},{n:["man in lotus position"],u:"1f9d8-200d-2642-fe0f",v:["1f9d8-1f3fb-200d-2642-fe0f","1f9d8-1f3fc-200d-2642-fe0f","1f9d8-1f3fd-200d-2642-fe0f","1f9d8-1f3fe-200d-2642-fe0f","1f9d8-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in lotus position"],u:"1f9d8-200d-2640-fe0f",v:["1f9d8-1f3fb-200d-2640-fe0f","1f9d8-1f3fc-200d-2640-fe0f","1f9d8-1f3fd-200d-2640-fe0f","1f9d8-1f3fe-200d-2640-fe0f","1f9d8-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["bath"],u:"1f6c0",v:["1f6c0-1f3fb","1f6c0-1f3fc","1f6c0-1f3fd","1f6c0-1f3fe","1f6c0-1f3ff"],a:"0.6"},{n:["sleeping accommodation"],u:"1f6cc",v:["1f6cc-1f3fb","1f6cc-1f3fc","1f6cc-1f3fd","1f6cc-1f3fe","1f6cc-1f3ff"],a:"1.0"},{n:["people holding hands"],u:"1f9d1-200d-1f91d-200d-1f9d1",v:["1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff"],a:"12.0"},{n:["women holding hands","two women holding hands"],u:"1f46d",v:["1f46d-1f3fb","1f46d-1f3fc","1f46d-1f3fd","1f46d-1f3fe","1f46d-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f469-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fe"],a:"1.0"},{n:["couple","man and woman holding hands","woman and man holding hands"],u:"1f46b",v:["1f46b-1f3fb","1f46b-1f3fc","1f46b-1f3fd","1f46b-1f3fe","1f46b-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"0.6"},{n:["men holding hands","two men holding hands"],u:"1f46c",v:["1f46c-1f3fb","1f46c-1f3fc","1f46c-1f3fd","1f46c-1f3fe","1f46c-1f3ff","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"1.0"},{n:["kiss","couplekiss"],u:"1f48f",v:["1f48f-1f3fb","1f48f-1f3fc","1f48f-1f3fd","1f48f-1f3fe","1f48f-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-kiss-man","kiss: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["man-kiss-man","kiss: man, man"],u:"1f468-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-kiss-woman","kiss: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff"],a:"2.0"},{n:["couple with heart"],u:"1f491",v:["1f491-1f3fb","1f491-1f3fc","1f491-1f3fd","1f491-1f3fe","1f491-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-heart-man","couple with heart: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["man-heart-man","couple with heart: man, man"],u:"1f468-200d-2764-fe0f-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-heart-woman","couple with heart: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3ff"],a:"2.0"},{n:["family"],u:"1f46a",a:"0.6"},{n:["man-woman-boy","family: man, woman, boy"],u:"1f468-200d-1f469-200d-1f466",a:"2.0"},{n:["man-woman-girl","family: man, woman, girl"],u:"1f468-200d-1f469-200d-1f467",a:"2.0"},{n:["man-woman-girl-boy","family: man, woman, girl, boy"],u:"1f468-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["man-woman-boy-boy","family: man, woman, boy, boy"],u:"1f468-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["man-woman-girl-girl","family: man, woman, girl, girl"],u:"1f468-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-man-boy","family: man, man, boy"],u:"1f468-200d-1f468-200d-1f466",a:"2.0"},{n:["man-man-girl","family: man, man, girl"],u:"1f468-200d-1f468-200d-1f467",a:"2.0"},{n:["man-man-girl-boy","family: man, man, girl, boy"],u:"1f468-200d-1f468-200d-1f467-200d-1f466",a:"2.0"},{n:["man-man-boy-boy","family: man, man, boy, boy"],u:"1f468-200d-1f468-200d-1f466-200d-1f466",a:"2.0"},{n:["man-man-girl-girl","family: man, man, girl, girl"],u:"1f468-200d-1f468-200d-1f467-200d-1f467",a:"2.0"},{n:["woman-woman-boy","family: woman, woman, boy"],u:"1f469-200d-1f469-200d-1f466",a:"2.0"},{n:["woman-woman-girl","family: woman, woman, girl"],u:"1f469-200d-1f469-200d-1f467",a:"2.0"},{n:["woman-woman-girl-boy","family: woman, woman, girl, boy"],u:"1f469-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["woman-woman-boy-boy","family: woman, woman, boy, boy"],u:"1f469-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["woman-woman-girl-girl","family: woman, woman, girl, girl"],u:"1f469-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-boy","family: man, boy"],u:"1f468-200d-1f466",a:"4.0"},{n:["man-boy-boy","family: man, boy, boy"],u:"1f468-200d-1f466-200d-1f466",a:"4.0"},{n:["man-girl","family: man, girl"],u:"1f468-200d-1f467",a:"4.0"},{n:["man-girl-boy","family: man, girl, boy"],u:"1f468-200d-1f467-200d-1f466",a:"4.0"},{n:["man-girl-girl","family: man, girl, girl"],u:"1f468-200d-1f467-200d-1f467",a:"4.0"},{n:["woman-boy","family: woman, boy"],u:"1f469-200d-1f466",a:"4.0"},{n:["woman-boy-boy","family: woman, boy, boy"],u:"1f469-200d-1f466-200d-1f466",a:"4.0"},{n:["woman-girl","family: woman, girl"],u:"1f469-200d-1f467",a:"4.0"},{n:["woman-girl-boy","family: woman, girl, boy"],u:"1f469-200d-1f467-200d-1f466",a:"4.0"},{n:["woman-girl-girl","family: woman, girl, girl"],u:"1f469-200d-1f467-200d-1f467",a:"4.0"},{n:["speaking head","speaking head in silhouette"],u:"1f5e3-fe0f",a:"0.7"},{n:["bust in silhouette"],u:"1f464",a:"0.6"},{n:["busts in silhouette"],u:"1f465",a:"1.0"},{n:["people hugging"],u:"1fac2",a:"13.0"},{n:["footprints"],u:"1f463",a:"0.6"}],Mme=[{n:["monkey face"],u:"1f435",a:"0.6"},{n:["monkey"],u:"1f412",a:"0.6"},{n:["gorilla"],u:"1f98d",a:"3.0"},{n:["orangutan"],u:"1f9a7",a:"12.0"},{n:["dog","dog face"],u:"1f436",a:"0.6"},{n:["dog","dog2"],u:"1f415",a:"0.7"},{n:["guide dog"],u:"1f9ae",a:"12.0"},{n:["service dog"],u:"1f415-200d-1f9ba",a:"12.0"},{n:["poodle"],u:"1f429",a:"0.6"},{n:["wolf","wolf face"],u:"1f43a",a:"0.6"},{n:["fox face"],u:"1f98a",a:"3.0"},{n:["raccoon"],u:"1f99d",a:"11.0"},{n:["cat","cat face"],u:"1f431",a:"0.6"},{n:["cat","cat2"],u:"1f408",a:"0.7"},{n:["black cat"],u:"1f408-200d-2b1b",a:"13.0"},{n:["lion face"],u:"1f981",a:"1.0"},{n:["tiger","tiger face"],u:"1f42f",a:"0.6"},{n:["tiger","tiger2"],u:"1f405",a:"1.0"},{n:["leopard"],u:"1f406",a:"1.0"},{n:["horse","horse face"],u:"1f434",a:"0.6"},{n:["horse","racehorse"],u:"1f40e",a:"0.6"},{n:["unicorn face"],u:"1f984",a:"1.0"},{n:["zebra face"],u:"1f993",a:"5.0"},{n:["deer"],u:"1f98c",a:"3.0"},{n:["bison"],u:"1f9ac",a:"13.0"},{n:["cow","cow face"],u:"1f42e",a:"0.6"},{n:["ox"],u:"1f402",a:"1.0"},{n:["water buffalo"],u:"1f403",a:"1.0"},{n:["cow","cow2"],u:"1f404",a:"1.0"},{n:["pig","pig face"],u:"1f437",a:"0.6"},{n:["pig","pig2"],u:"1f416",a:"1.0"},{n:["boar"],u:"1f417",a:"0.6"},{n:["pig nose"],u:"1f43d",a:"0.6"},{n:["ram"],u:"1f40f",a:"1.0"},{n:["sheep"],u:"1f411",a:"0.6"},{n:["goat"],u:"1f410",a:"1.0"},{n:["dromedary camel"],u:"1f42a",a:"1.0"},{n:["camel","bactrian camel"],u:"1f42b",a:"0.6"},{n:["llama"],u:"1f999",a:"11.0"},{n:["giraffe face"],u:"1f992",a:"5.0"},{n:["elephant"],u:"1f418",a:"0.6"},{n:["mammoth"],u:"1f9a3",a:"13.0"},{n:["rhinoceros"],u:"1f98f",a:"3.0"},{n:["hippopotamus"],u:"1f99b",a:"11.0"},{n:["mouse","mouse face"],u:"1f42d",a:"0.6"},{n:["mouse","mouse2"],u:"1f401",a:"1.0"},{n:["rat"],u:"1f400",a:"1.0"},{n:["hamster","hamster face"],u:"1f439",a:"0.6"},{n:["rabbit","rabbit face"],u:"1f430",a:"0.6"},{n:["rabbit","rabbit2"],u:"1f407",a:"1.0"},{n:["chipmunk"],u:"1f43f-fe0f",a:"0.7"},{n:["beaver"],u:"1f9ab",a:"13.0"},{n:["hedgehog"],u:"1f994",a:"5.0"},{n:["bat"],u:"1f987",a:"3.0"},{n:["bear","bear face"],u:"1f43b",a:"0.6"},{n:["polar bear"],u:"1f43b-200d-2744-fe0f",a:"13.0"},{n:["koala"],u:"1f428",a:"0.6"},{n:["panda face"],u:"1f43c",a:"0.6"},{n:["sloth"],u:"1f9a5",a:"12.0"},{n:["otter"],u:"1f9a6",a:"12.0"},{n:["skunk"],u:"1f9a8",a:"12.0"},{n:["kangaroo"],u:"1f998",a:"11.0"},{n:["badger"],u:"1f9a1",a:"11.0"},{n:["feet","paw prints"],u:"1f43e",a:"0.6"},{n:["turkey"],u:"1f983",a:"1.0"},{n:["chicken"],u:"1f414",a:"0.6"},{n:["rooster"],u:"1f413",a:"1.0"},{n:["hatching chick"],u:"1f423",a:"0.6"},{n:["baby chick"],u:"1f424",a:"0.6"},{n:["hatched chick","front-facing baby chick"],u:"1f425",a:"0.6"},{n:["bird"],u:"1f426",a:"0.6"},{n:["penguin"],u:"1f427",a:"0.6"},{n:["dove","dove of peace"],u:"1f54a-fe0f",a:"0.7"},{n:["eagle"],u:"1f985",a:"3.0"},{n:["duck"],u:"1f986",a:"3.0"},{n:["swan"],u:"1f9a2",a:"11.0"},{n:["owl"],u:"1f989",a:"3.0"},{n:["dodo"],u:"1f9a4",a:"13.0"},{n:["feather"],u:"1fab6",a:"13.0"},{n:["flamingo"],u:"1f9a9",a:"12.0"},{n:["peacock"],u:"1f99a",a:"11.0"},{n:["parrot"],u:"1f99c",a:"11.0"},{n:["frog","frog face"],u:"1f438",a:"0.6"},{n:["crocodile"],u:"1f40a",a:"1.0"},{n:["turtle"],u:"1f422",a:"0.6"},{n:["lizard"],u:"1f98e",a:"3.0"},{n:["snake"],u:"1f40d",a:"0.6"},{n:["dragon face"],u:"1f432",a:"0.6"},{n:["dragon"],u:"1f409",a:"1.0"},{n:["sauropod"],u:"1f995",a:"5.0"},{n:["t-rex"],u:"1f996",a:"5.0"},{n:["whale","spouting whale"],u:"1f433",a:"0.6"},{n:["whale","whale2"],u:"1f40b",a:"1.0"},{n:["dolphin","flipper"],u:"1f42c",a:"0.6"},{n:["seal"],u:"1f9ad",a:"13.0"},{n:["fish"],u:"1f41f",a:"0.6"},{n:["tropical fish"],u:"1f420",a:"0.6"},{n:["blowfish"],u:"1f421",a:"0.6"},{n:["shark"],u:"1f988",a:"3.0"},{n:["octopus"],u:"1f419",a:"0.6"},{n:["shell","spiral shell"],u:"1f41a",a:"0.6"},{n:["coral"],u:"1fab8",a:"14.0"},{n:["snail"],u:"1f40c",a:"0.6"},{n:["butterfly"],u:"1f98b",a:"3.0"},{n:["bug"],u:"1f41b",a:"0.6"},{n:["ant"],u:"1f41c",a:"0.6"},{n:["bee","honeybee"],u:"1f41d",a:"0.6"},{n:["beetle"],u:"1fab2",a:"13.0"},{n:["ladybug","lady beetle"],u:"1f41e",a:"0.6"},{n:["cricket"],u:"1f997",a:"5.0"},{n:["cockroach"],u:"1fab3",a:"13.0"},{n:["spider"],u:"1f577-fe0f",a:"0.7"},{n:["spider web"],u:"1f578-fe0f",a:"0.7"},{n:["scorpion"],u:"1f982",a:"1.0"},{n:["mosquito"],u:"1f99f",a:"11.0"},{n:["fly"],u:"1fab0",a:"13.0"},{n:["worm"],u:"1fab1",a:"13.0"},{n:["microbe"],u:"1f9a0",a:"11.0"},{n:["bouquet"],u:"1f490",a:"0.6"},{n:["cherry blossom"],u:"1f338",a:"0.6"},{n:["white flower"],u:"1f4ae",a:"0.6"},{n:["lotus"],u:"1fab7",a:"14.0"},{n:["rosette"],u:"1f3f5-fe0f",a:"0.7"},{n:["rose"],u:"1f339",a:"0.6"},{n:["wilted flower"],u:"1f940",a:"3.0"},{n:["hibiscus"],u:"1f33a",a:"0.6"},{n:["sunflower"],u:"1f33b",a:"0.6"},{n:["blossom"],u:"1f33c",a:"0.6"},{n:["tulip"],u:"1f337",a:"0.6"},{n:["seedling"],u:"1f331",a:"0.6"},{n:["potted plant"],u:"1fab4",a:"13.0"},{n:["evergreen tree"],u:"1f332",a:"1.0"},{n:["deciduous tree"],u:"1f333",a:"1.0"},{n:["palm tree"],u:"1f334",a:"0.6"},{n:["cactus"],u:"1f335",a:"0.6"},{n:["ear of rice"],u:"1f33e",a:"0.6"},{n:["herb"],u:"1f33f",a:"0.6"},{n:["shamrock"],u:"2618-fe0f",a:"1.0"},{n:["four leaf clover"],u:"1f340",a:"0.6"},{n:["maple leaf"],u:"1f341",a:"0.6"},{n:["fallen leaf"],u:"1f342",a:"0.6"},{n:["leaves","leaf fluttering in wind"],u:"1f343",a:"0.6"},{n:["empty nest"],u:"1fab9",a:"14.0"},{n:["nest with eggs"],u:"1faba",a:"14.0"}],Ame=[{n:["grapes"],u:"1f347",a:"0.6"},{n:["melon"],u:"1f348",a:"0.6"},{n:["watermelon"],u:"1f349",a:"0.6"},{n:["tangerine"],u:"1f34a",a:"0.6"},{n:["lemon"],u:"1f34b",a:"1.0"},{n:["banana"],u:"1f34c",a:"0.6"},{n:["pineapple"],u:"1f34d",a:"0.6"},{n:["mango"],u:"1f96d",a:"11.0"},{n:["apple","red apple"],u:"1f34e",a:"0.6"},{n:["green apple"],u:"1f34f",a:"0.6"},{n:["pear"],u:"1f350",a:"1.0"},{n:["peach"],u:"1f351",a:"0.6"},{n:["cherries"],u:"1f352",a:"0.6"},{n:["strawberry"],u:"1f353",a:"0.6"},{n:["blueberries"],u:"1fad0",a:"13.0"},{n:["kiwifruit"],u:"1f95d",a:"3.0"},{n:["tomato"],u:"1f345",a:"0.6"},{n:["olive"],u:"1fad2",a:"13.0"},{n:["coconut"],u:"1f965",a:"5.0"},{n:["avocado"],u:"1f951",a:"3.0"},{n:["eggplant","aubergine"],u:"1f346",a:"0.6"},{n:["potato"],u:"1f954",a:"3.0"},{n:["carrot"],u:"1f955",a:"3.0"},{n:["corn","ear of maize"],u:"1f33d",a:"0.6"},{n:["hot pepper"],u:"1f336-fe0f",a:"0.7"},{n:["bell pepper"],u:"1fad1",a:"13.0"},{n:["cucumber"],u:"1f952",a:"3.0"},{n:["leafy green"],u:"1f96c",a:"11.0"},{n:["broccoli"],u:"1f966",a:"5.0"},{n:["garlic"],u:"1f9c4",a:"12.0"},{n:["onion"],u:"1f9c5",a:"12.0"},{n:["mushroom"],u:"1f344",a:"0.6"},{n:["peanuts"],u:"1f95c",a:"3.0"},{n:["beans"],u:"1fad8",a:"14.0"},{n:["chestnut"],u:"1f330",a:"0.6"},{n:["bread"],u:"1f35e",a:"0.6"},{n:["croissant"],u:"1f950",a:"3.0"},{n:["baguette bread"],u:"1f956",a:"3.0"},{n:["flatbread"],u:"1fad3",a:"13.0"},{n:["pretzel"],u:"1f968",a:"5.0"},{n:["bagel"],u:"1f96f",a:"11.0"},{n:["pancakes"],u:"1f95e",a:"3.0"},{n:["waffle"],u:"1f9c7",a:"12.0"},{n:["cheese wedge"],u:"1f9c0",a:"1.0"},{n:["meat on bone"],u:"1f356",a:"0.6"},{n:["poultry leg"],u:"1f357",a:"0.6"},{n:["cut of meat"],u:"1f969",a:"5.0"},{n:["bacon"],u:"1f953",a:"3.0"},{n:["hamburger"],u:"1f354",a:"0.6"},{n:["fries","french fries"],u:"1f35f",a:"0.6"},{n:["pizza","slice of pizza"],u:"1f355",a:"0.6"},{n:["hotdog","hot dog"],u:"1f32d",a:"1.0"},{n:["sandwich"],u:"1f96a",a:"5.0"},{n:["taco"],u:"1f32e",a:"1.0"},{n:["burrito"],u:"1f32f",a:"1.0"},{n:["tamale"],u:"1fad4",a:"13.0"},{n:["stuffed flatbread"],u:"1f959",a:"3.0"},{n:["falafel"],u:"1f9c6",a:"12.0"},{n:["egg"],u:"1f95a",a:"3.0"},{n:["cooking","fried egg"],u:"1f373",a:"0.6"},{n:["shallow pan of food"],u:"1f958",a:"3.0"},{n:["stew","pot of food"],u:"1f372",a:"0.6"},{n:["fondue"],u:"1fad5",a:"13.0"},{n:["bowl with spoon"],u:"1f963",a:"5.0"},{n:["green salad"],u:"1f957",a:"3.0"},{n:["popcorn"],u:"1f37f",a:"1.0"},{n:["butter"],u:"1f9c8",a:"12.0"},{n:["salt","salt shaker"],u:"1f9c2",a:"11.0"},{n:["canned food"],u:"1f96b",a:"5.0"},{n:["bento","bento box"],u:"1f371",a:"0.6"},{n:["rice cracker"],u:"1f358",a:"0.6"},{n:["rice ball"],u:"1f359",a:"0.6"},{n:["rice","cooked rice"],u:"1f35a",a:"0.6"},{n:["curry","curry and rice"],u:"1f35b",a:"0.6"},{n:["ramen","steaming bowl"],u:"1f35c",a:"0.6"},{n:["spaghetti"],u:"1f35d",a:"0.6"},{n:["sweet potato","roasted sweet potato"],u:"1f360",a:"0.6"},{n:["oden"],u:"1f362",a:"0.6"},{n:["sushi"],u:"1f363",a:"0.6"},{n:["fried shrimp"],u:"1f364",a:"0.6"},{n:["fish cake","fish cake with swirl design"],u:"1f365",a:"0.6"},{n:["moon cake"],u:"1f96e",a:"11.0"},{n:["dango"],u:"1f361",a:"0.6"},{n:["dumpling"],u:"1f95f",a:"5.0"},{n:["fortune cookie"],u:"1f960",a:"5.0"},{n:["takeout box"],u:"1f961",a:"5.0"},{n:["crab"],u:"1f980",a:"1.0"},{n:["lobster"],u:"1f99e",a:"11.0"},{n:["shrimp"],u:"1f990",a:"3.0"},{n:["squid"],u:"1f991",a:"3.0"},{n:["oyster"],u:"1f9aa",a:"12.0"},{n:["icecream","soft ice cream"],u:"1f366",a:"0.6"},{n:["shaved ice"],u:"1f367",a:"0.6"},{n:["ice cream"],u:"1f368",a:"0.6"},{n:["doughnut"],u:"1f369",a:"0.6"},{n:["cookie"],u:"1f36a",a:"0.6"},{n:["birthday","birthday cake"],u:"1f382",a:"0.6"},{n:["cake","shortcake"],u:"1f370",a:"0.6"},{n:["cupcake"],u:"1f9c1",a:"11.0"},{n:["pie"],u:"1f967",a:"5.0"},{n:["chocolate bar"],u:"1f36b",a:"0.6"},{n:["candy"],u:"1f36c",a:"0.6"},{n:["lollipop"],u:"1f36d",a:"0.6"},{n:["custard"],u:"1f36e",a:"0.6"},{n:["honey pot"],u:"1f36f",a:"0.6"},{n:["baby bottle"],u:"1f37c",a:"1.0"},{n:["glass of milk"],u:"1f95b",a:"3.0"},{n:["coffee","hot beverage"],u:"2615",a:"0.6"},{n:["teapot"],u:"1fad6",a:"13.0"},{n:["tea","teacup without handle"],u:"1f375",a:"0.6"},{n:["sake","sake bottle and cup"],u:"1f376",a:"0.6"},{n:["champagne","bottle with popping cork"],u:"1f37e",a:"1.0"},{n:["wine glass"],u:"1f377",a:"0.6"},{n:["cocktail","cocktail glass"],u:"1f378",a:"0.6"},{n:["tropical drink"],u:"1f379",a:"0.6"},{n:["beer","beer mug"],u:"1f37a",a:"0.6"},{n:["beers","clinking beer mugs"],u:"1f37b",a:"0.6"},{n:["clinking glasses"],u:"1f942",a:"3.0"},{n:["tumbler glass"],u:"1f943",a:"3.0"},{n:["pouring liquid"],u:"1fad7",a:"14.0"},{n:["cup with straw"],u:"1f964",a:"5.0"},{n:["bubble tea"],u:"1f9cb",a:"13.0"},{n:["beverage box"],u:"1f9c3",a:"12.0"},{n:["mate drink"],u:"1f9c9",a:"12.0"},{n:["ice cube"],u:"1f9ca",a:"12.0"},{n:["chopsticks"],u:"1f962",a:"5.0"},{n:["knife fork plate","fork and knife with plate"],u:"1f37d-fe0f",a:"0.7"},{n:["fork and knife"],u:"1f374",a:"0.6"},{n:["spoon"],u:"1f944",a:"3.0"},{n:["hocho","knife"],u:"1f52a",a:"0.6"},{n:["jar"],u:"1fad9",a:"14.0"},{n:["amphora"],u:"1f3fa",a:"1.0"}],Tme=[{n:["earth africa","earth globe europe-africa"],u:"1f30d",a:"0.7"},{n:["earth americas","earth globe americas"],u:"1f30e",a:"0.7"},{n:["earth asia","earth globe asia-australia"],u:"1f30f",a:"0.6"},{n:["globe with meridians"],u:"1f310",a:"1.0"},{n:["world map"],u:"1f5fa-fe0f",a:"0.7"},{n:["japan","silhouette of japan"],u:"1f5fe",a:"0.6"},{n:["compass"],u:"1f9ed",a:"11.0"},{n:["snow-capped mountain","snow capped mountain"],u:"1f3d4-fe0f",a:"0.7"},{n:["mountain"],u:"26f0-fe0f",a:"0.7"},{n:["volcano"],u:"1f30b",a:"0.6"},{n:["mount fuji"],u:"1f5fb",a:"0.6"},{n:["camping"],u:"1f3d5-fe0f",a:"0.7"},{n:["beach with umbrella"],u:"1f3d6-fe0f",a:"0.7"},{n:["desert"],u:"1f3dc-fe0f",a:"0.7"},{n:["desert island"],u:"1f3dd-fe0f",a:"0.7"},{n:["national park"],u:"1f3de-fe0f",a:"0.7"},{n:["stadium"],u:"1f3df-fe0f",a:"0.7"},{n:["classical building"],u:"1f3db-fe0f",a:"0.7"},{n:["building construction"],u:"1f3d7-fe0f",a:"0.7"},{n:["brick","bricks"],u:"1f9f1",a:"11.0"},{n:["rock"],u:"1faa8",a:"13.0"},{n:["wood"],u:"1fab5",a:"13.0"},{n:["hut"],u:"1f6d6",a:"13.0"},{n:["houses","house buildings"],u:"1f3d8-fe0f",a:"0.7"},{n:["derelict house","derelict house building"],u:"1f3da-fe0f",a:"0.7"},{n:["house","house building"],u:"1f3e0",a:"0.6"},{n:["house with garden"],u:"1f3e1",a:"0.6"},{n:["office","office building"],u:"1f3e2",a:"0.6"},{n:["post office","japanese post office"],u:"1f3e3",a:"0.6"},{n:["european post office"],u:"1f3e4",a:"1.0"},{n:["hospital"],u:"1f3e5",a:"0.6"},{n:["bank"],u:"1f3e6",a:"0.6"},{n:["hotel"],u:"1f3e8",a:"0.6"},{n:["love hotel"],u:"1f3e9",a:"0.6"},{n:["convenience store"],u:"1f3ea",a:"0.6"},{n:["school"],u:"1f3eb",a:"0.6"},{n:["department store"],u:"1f3ec",a:"0.6"},{n:["factory"],u:"1f3ed",a:"0.6"},{n:["japanese castle"],u:"1f3ef",a:"0.6"},{n:["european castle"],u:"1f3f0",a:"0.6"},{n:["wedding"],u:"1f492",a:"0.6"},{n:["tokyo tower"],u:"1f5fc",a:"0.6"},{n:["statue of liberty"],u:"1f5fd",a:"0.6"},{n:["church"],u:"26ea",a:"0.6"},{n:["mosque"],u:"1f54c",a:"1.0"},{n:["hindu temple"],u:"1f6d5",a:"12.0"},{n:["synagogue"],u:"1f54d",a:"1.0"},{n:["shinto shrine"],u:"26e9-fe0f",a:"0.7"},{n:["kaaba"],u:"1f54b",a:"1.0"},{n:["fountain"],u:"26f2",a:"0.6"},{n:["tent"],u:"26fa",a:"0.6"},{n:["foggy"],u:"1f301",a:"0.6"},{n:["night with stars"],u:"1f303",a:"0.6"},{n:["cityscape"],u:"1f3d9-fe0f",a:"0.7"},{n:["sunrise over mountains"],u:"1f304",a:"0.6"},{n:["sunrise"],u:"1f305",a:"0.6"},{n:["city sunset","cityscape at dusk"],u:"1f306",a:"0.6"},{n:["city sunrise","sunset over buildings"],u:"1f307",a:"0.6"},{n:["bridge at night"],u:"1f309",a:"0.6"},{n:["hotsprings","hot springs"],u:"2668-fe0f",a:"0.6"},{n:["carousel horse"],u:"1f3a0",a:"0.6"},{n:["playground slide"],u:"1f6dd",a:"14.0"},{n:["ferris wheel"],u:"1f3a1",a:"0.6"},{n:["roller coaster"],u:"1f3a2",a:"0.6"},{n:["barber","barber pole"],u:"1f488",a:"0.6"},{n:["circus tent"],u:"1f3aa",a:"0.6"},{n:["steam locomotive"],u:"1f682",a:"1.0"},{n:["railway car"],u:"1f683",a:"0.6"},{n:["high-speed train","bullettrain side"],u:"1f684",a:"0.6"},{n:["bullettrain front","high-speed train with bullet nose"],u:"1f685",a:"0.6"},{n:["train","train2"],u:"1f686",a:"1.0"},{n:["metro"],u:"1f687",a:"0.6"},{n:["light rail"],u:"1f688",a:"1.0"},{n:["station"],u:"1f689",a:"0.6"},{n:["tram"],u:"1f68a",a:"1.0"},{n:["monorail"],u:"1f69d",a:"1.0"},{n:["mountain railway"],u:"1f69e",a:"1.0"},{n:["train","tram car"],u:"1f68b",a:"1.0"},{n:["bus"],u:"1f68c",a:"0.6"},{n:["oncoming bus"],u:"1f68d",a:"0.7"},{n:["trolleybus"],u:"1f68e",a:"1.0"},{n:["minibus"],u:"1f690",a:"1.0"},{n:["ambulance"],u:"1f691",a:"0.6"},{n:["fire engine"],u:"1f692",a:"0.6"},{n:["police car"],u:"1f693",a:"0.6"},{n:["oncoming police car"],u:"1f694",a:"0.7"},{n:["taxi"],u:"1f695",a:"0.6"},{n:["oncoming taxi"],u:"1f696",a:"1.0"},{n:["car","red car","automobile"],u:"1f697",a:"0.6"},{n:["oncoming automobile"],u:"1f698",a:"0.7"},{n:["blue car","recreational vehicle"],u:"1f699",a:"0.6"},{n:["pickup truck"],u:"1f6fb",a:"13.0"},{n:["truck","delivery truck"],u:"1f69a",a:"0.6"},{n:["articulated lorry"],u:"1f69b",a:"1.0"},{n:["tractor"],u:"1f69c",a:"1.0"},{n:["racing car"],u:"1f3ce-fe0f",a:"0.7"},{n:["motorcycle","racing motorcycle"],u:"1f3cd-fe0f",a:"0.7"},{n:["motor scooter"],u:"1f6f5",a:"3.0"},{n:["manual wheelchair"],u:"1f9bd",a:"12.0"},{n:["motorized wheelchair"],u:"1f9bc",a:"12.0"},{n:["auto rickshaw"],u:"1f6fa",a:"12.0"},{n:["bike","bicycle"],u:"1f6b2",a:"0.6"},{n:["scooter"],u:"1f6f4",a:"3.0"},{n:["skateboard"],u:"1f6f9",a:"11.0"},{n:["roller skate"],u:"1f6fc",a:"13.0"},{n:["busstop","bus stop"],u:"1f68f",a:"0.6"},{n:["motorway"],u:"1f6e3-fe0f",a:"0.7"},{n:["railway track"],u:"1f6e4-fe0f",a:"0.7"},{n:["oil drum"],u:"1f6e2-fe0f",a:"0.7"},{n:["fuelpump","fuel pump"],u:"26fd",a:"0.6"},{n:["wheel"],u:"1f6de",a:"14.0"},{n:["rotating light","police cars revolving light"],u:"1f6a8",a:"0.6"},{n:["traffic light","horizontal traffic light"],u:"1f6a5",a:"0.6"},{n:["vertical traffic light"],u:"1f6a6",a:"1.0"},{n:["octagonal sign"],u:"1f6d1",a:"3.0"},{n:["construction","construction sign"],u:"1f6a7",a:"0.6"},{n:["anchor"],u:"2693",a:"0.6"},{n:["ring buoy"],u:"1f6df",a:"14.0"},{n:["boat","sailboat"],u:"26f5",a:"0.6"},{n:["canoe"],u:"1f6f6",a:"3.0"},{n:["speedboat"],u:"1f6a4",a:"0.6"},{n:["passenger ship"],u:"1f6f3-fe0f",a:"0.7"},{n:["ferry"],u:"26f4-fe0f",a:"0.7"},{n:["motor boat"],u:"1f6e5-fe0f",a:"0.7"},{n:["ship"],u:"1f6a2",a:"0.6"},{n:["airplane"],u:"2708-fe0f",a:"0.6"},{n:["small airplane"],u:"1f6e9-fe0f",a:"0.7"},{n:["airplane departure"],u:"1f6eb",a:"1.0"},{n:["airplane arriving"],u:"1f6ec",a:"1.0"},{n:["parachute"],u:"1fa82",a:"12.0"},{n:["seat"],u:"1f4ba",a:"0.6"},{n:["helicopter"],u:"1f681",a:"1.0"},{n:["suspension railway"],u:"1f69f",a:"1.0"},{n:["mountain cableway"],u:"1f6a0",a:"1.0"},{n:["aerial tramway"],u:"1f6a1",a:"1.0"},{n:["satellite"],u:"1f6f0-fe0f",a:"0.7"},{n:["rocket"],u:"1f680",a:"0.6"},{n:["flying saucer"],u:"1f6f8",a:"5.0"},{n:["bellhop bell"],u:"1f6ce-fe0f",a:"0.7"},{n:["luggage"],u:"1f9f3",a:"11.0"},{n:["hourglass"],u:"231b",a:"0.6"},{n:["hourglass flowing sand","hourglass with flowing sand"],u:"23f3",a:"0.6"},{n:["watch"],u:"231a",a:"0.6"},{n:["alarm clock"],u:"23f0",a:"0.6"},{n:["stopwatch"],u:"23f1-fe0f",a:"1.0"},{n:["timer clock"],u:"23f2-fe0f",a:"1.0"},{n:["mantelpiece clock"],u:"1f570-fe0f",a:"0.7"},{n:["clock12","clock face twelve oclock"],u:"1f55b",a:"0.6"},{n:["clock1230","clock face twelve-thirty"],u:"1f567",a:"0.7"},{n:["clock1","clock face one oclock"],u:"1f550",a:"0.6"},{n:["clock130","clock face one-thirty"],u:"1f55c",a:"0.7"},{n:["clock2","clock face two oclock"],u:"1f551",a:"0.6"},{n:["clock230","clock face two-thirty"],u:"1f55d",a:"0.7"},{n:["clock3","clock face three oclock"],u:"1f552",a:"0.6"},{n:["clock330","clock face three-thirty"],u:"1f55e",a:"0.7"},{n:["clock4","clock face four oclock"],u:"1f553",a:"0.6"},{n:["clock430","clock face four-thirty"],u:"1f55f",a:"0.7"},{n:["clock5","clock face five oclock"],u:"1f554",a:"0.6"},{n:["clock530","clock face five-thirty"],u:"1f560",a:"0.7"},{n:["clock6","clock face six oclock"],u:"1f555",a:"0.6"},{n:["clock630","clock face six-thirty"],u:"1f561",a:"0.7"},{n:["clock7","clock face seven oclock"],u:"1f556",a:"0.6"},{n:["clock730","clock face seven-thirty"],u:"1f562",a:"0.7"},{n:["clock8","clock face eight oclock"],u:"1f557",a:"0.6"},{n:["clock830","clock face eight-thirty"],u:"1f563",a:"0.7"},{n:["clock9","clock face nine oclock"],u:"1f558",a:"0.6"},{n:["clock930","clock face nine-thirty"],u:"1f564",a:"0.7"},{n:["clock10","clock face ten oclock"],u:"1f559",a:"0.6"},{n:["clock1030","clock face ten-thirty"],u:"1f565",a:"0.7"},{n:["clock11","clock face eleven oclock"],u:"1f55a",a:"0.6"},{n:["clock1130","clock face eleven-thirty"],u:"1f566",a:"0.7"},{n:["new moon","new moon symbol"],u:"1f311",a:"0.6"},{n:["waxing crescent moon","waxing crescent moon symbol"],u:"1f312",a:"1.0"},{n:["first quarter moon","first quarter moon symbol"],u:"1f313",a:"0.6"},{n:["moon","waxing gibbous moon","waxing gibbous moon symbol"],u:"1f314",a:"0.6"},{n:["full moon","full moon symbol"],u:"1f315",a:"0.6"},{n:["waning gibbous moon","waning gibbous moon symbol"],u:"1f316",a:"1.0"},{n:["last quarter moon","last quarter moon symbol"],u:"1f317",a:"1.0"},{n:["waning crescent moon","waning crescent moon symbol"],u:"1f318",a:"1.0"},{n:["crescent moon"],u:"1f319",a:"0.6"},{n:["new moon with face"],u:"1f31a",a:"1.0"},{n:["first quarter moon with face"],u:"1f31b",a:"0.6"},{n:["last quarter moon with face"],u:"1f31c",a:"0.7"},{n:["thermometer"],u:"1f321-fe0f",a:"0.7"},{n:["sunny","black sun with rays"],u:"2600-fe0f",a:"0.6"},{n:["full moon with face"],u:"1f31d",a:"1.0"},{n:["sun with face"],u:"1f31e",a:"1.0"},{n:["ringed planet"],u:"1fa90",a:"12.0"},{n:["star","white medium star"],u:"2b50",a:"0.6"},{n:["star2","glowing star"],u:"1f31f",a:"0.6"},{n:["stars","shooting star"],u:"1f320",a:"0.6"},{n:["milky way"],u:"1f30c",a:"0.6"},{n:["cloud"],u:"2601-fe0f",a:"0.6"},{n:["partly sunny","sun behind cloud"],u:"26c5",a:"0.6"},{n:["thunder cloud and rain","cloud with lightning and rain"],u:"26c8-fe0f",a:"0.7"},{n:["mostly sunny","sun small cloud","sun behind small cloud"],u:"1f324-fe0f",a:"0.7"},{n:["barely sunny","sun behind cloud","sun behind large cloud"],u:"1f325-fe0f",a:"0.7"},{n:["partly sunny rain","sun behind rain cloud"],u:"1f326-fe0f",a:"0.7"},{n:["rain cloud","cloud with rain"],u:"1f327-fe0f",a:"0.7"},{n:["snow cloud","cloud with snow"],u:"1f328-fe0f",a:"0.7"},{n:["lightning","lightning cloud","cloud with lightning"],u:"1f329-fe0f",a:"0.7"},{n:["tornado","tornado cloud"],u:"1f32a-fe0f",a:"0.7"},{n:["fog"],u:"1f32b-fe0f",a:"0.7"},{n:["wind face","wind blowing face"],u:"1f32c-fe0f",a:"0.7"},{n:["cyclone"],u:"1f300",a:"0.6"},{n:["rainbow"],u:"1f308",a:"0.6"},{n:["closed umbrella"],u:"1f302",a:"0.6"},{n:["umbrella"],u:"2602-fe0f",a:"0.7"},{n:["umbrella with rain drops"],u:"2614",a:"0.6"},{n:["umbrella on ground"],u:"26f1-fe0f",a:"0.7"},{n:["zap","high voltage sign"],u:"26a1",a:"0.6"},{n:["snowflake"],u:"2744-fe0f",a:"0.6"},{n:["snowman"],u:"2603-fe0f",a:"0.7"},{n:["snowman without snow"],u:"26c4",a:"0.6"},{n:["comet"],u:"2604-fe0f",a:"1.0"},{n:["fire"],u:"1f525",a:"0.6"},{n:["droplet"],u:"1f4a7",a:"0.6"},{n:["ocean","water wave"],u:"1f30a",a:"0.6"}],Eme=[{n:["jack-o-lantern","jack o lantern"],u:"1f383",a:"0.6"},{n:["christmas tree"],u:"1f384",a:"0.6"},{n:["fireworks"],u:"1f386",a:"0.6"},{n:["sparkler","firework sparkler"],u:"1f387",a:"0.6"},{n:["firecracker"],u:"1f9e8",a:"11.0"},{n:["sparkles"],u:"2728",a:"0.6"},{n:["balloon"],u:"1f388",a:"0.6"},{n:["tada","party popper"],u:"1f389",a:"0.6"},{n:["confetti ball"],u:"1f38a",a:"0.6"},{n:["tanabata tree"],u:"1f38b",a:"0.6"},{n:["bamboo","pine decoration"],u:"1f38d",a:"0.6"},{n:["dolls","japanese dolls"],u:"1f38e",a:"0.6"},{n:["flags","carp streamer"],u:"1f38f",a:"0.6"},{n:["wind chime"],u:"1f390",a:"0.6"},{n:["rice scene","moon viewing ceremony"],u:"1f391",a:"0.6"},{n:["red envelope","red gift envelope"],u:"1f9e7",a:"11.0"},{n:["ribbon"],u:"1f380",a:"0.6"},{n:["gift","wrapped present"],u:"1f381",a:"0.6"},{n:["reminder ribbon"],u:"1f397-fe0f",a:"0.7"},{n:["admission tickets"],u:"1f39f-fe0f",a:"0.7"},{n:["ticket"],u:"1f3ab",a:"0.6"},{n:["medal","military medal"],u:"1f396-fe0f",a:"0.7"},{n:["trophy"],u:"1f3c6",a:"0.6"},{n:["sports medal"],u:"1f3c5",a:"1.0"},{n:["first place medal"],u:"1f947",a:"3.0"},{n:["second place medal"],u:"1f948",a:"3.0"},{n:["third place medal"],u:"1f949",a:"3.0"},{n:["soccer","soccer ball"],u:"26bd",a:"0.6"},{n:["baseball"],u:"26be",a:"0.6"},{n:["softball"],u:"1f94e",a:"11.0"},{n:["basketball","basketball and hoop"],u:"1f3c0",a:"0.6"},{n:["volleyball"],u:"1f3d0",a:"1.0"},{n:["football","american football"],u:"1f3c8",a:"0.6"},{n:["rugby football"],u:"1f3c9",a:"1.0"},{n:["tennis","tennis racquet and ball"],u:"1f3be",a:"0.6"},{n:["flying disc"],u:"1f94f",a:"11.0"},{n:["bowling"],u:"1f3b3",a:"0.6"},{n:["cricket bat and ball"],u:"1f3cf",a:"1.0"},{n:["field hockey stick and ball"],u:"1f3d1",a:"1.0"},{n:["ice hockey stick and puck"],u:"1f3d2",a:"1.0"},{n:["lacrosse","lacrosse stick and ball"],u:"1f94d",a:"11.0"},{n:["table tennis paddle and ball"],u:"1f3d3",a:"1.0"},{n:["badminton racquet and shuttlecock"],u:"1f3f8",a:"1.0"},{n:["boxing glove"],u:"1f94a",a:"3.0"},{n:["martial arts uniform"],u:"1f94b",a:"3.0"},{n:["goal net"],u:"1f945",a:"3.0"},{n:["golf","flag in hole"],u:"26f3",a:"0.6"},{n:["ice skate"],u:"26f8-fe0f",a:"0.7"},{n:["fishing pole and fish"],u:"1f3a3",a:"0.6"},{n:["diving mask"],u:"1f93f",a:"12.0"},{n:["running shirt with sash"],u:"1f3bd",a:"0.6"},{n:["ski","ski and ski boot"],u:"1f3bf",a:"0.6"},{n:["sled"],u:"1f6f7",a:"5.0"},{n:["curling stone"],u:"1f94c",a:"5.0"},{n:["dart","direct hit"],u:"1f3af",a:"0.6"},{n:["yo-yo"],u:"1fa80",a:"12.0"},{n:["kite"],u:"1fa81",a:"12.0"},{n:["8ball","billiards"],u:"1f3b1",a:"0.6"},{n:["crystal ball"],u:"1f52e",a:"0.6"},{n:["magic wand"],u:"1fa84",a:"13.0"},{n:["nazar amulet"],u:"1f9ff",a:"11.0"},{n:["hamsa"],u:"1faac",a:"14.0"},{n:["video game"],u:"1f3ae",a:"0.6"},{n:["joystick"],u:"1f579-fe0f",a:"0.7"},{n:["slot machine"],u:"1f3b0",a:"0.6"},{n:["game die"],u:"1f3b2",a:"0.6"},{n:["jigsaw","jigsaw puzzle piece"],u:"1f9e9",a:"11.0"},{n:["teddy bear"],u:"1f9f8",a:"11.0"},{n:["pinata"],u:"1fa85",a:"13.0"},{n:["mirror ball"],u:"1faa9",a:"14.0"},{n:["nesting dolls"],u:"1fa86",a:"13.0"},{n:["spades","black spade suit"],u:"2660-fe0f",a:"0.6"},{n:["hearts","black heart suit"],u:"2665-fe0f",a:"0.6"},{n:["diamonds","black diamond suit"],u:"2666-fe0f",a:"0.6"},{n:["clubs","black club suit"],u:"2663-fe0f",a:"0.6"},{n:["chess pawn"],u:"265f-fe0f",a:"11.0"},{n:["black joker","playing card black joker"],u:"1f0cf",a:"0.6"},{n:["mahjong","mahjong tile red dragon"],u:"1f004",a:"0.6"},{n:["flower playing cards"],u:"1f3b4",a:"0.6"},{n:["performing arts"],u:"1f3ad",a:"0.6"},{n:["framed picture","frame with picture"],u:"1f5bc-fe0f",a:"0.7"},{n:["art","artist palette"],u:"1f3a8",a:"0.6"},{n:["thread","spool of thread"],u:"1f9f5",a:"11.0"},{n:["sewing needle"],u:"1faa1",a:"13.0"},{n:["yarn","ball of yarn"],u:"1f9f6",a:"11.0"},{n:["knot"],u:"1faa2",a:"13.0"}],Ime=[{n:["eyeglasses"],u:"1f453",a:"0.6"},{n:["sunglasses","dark sunglasses"],u:"1f576-fe0f",a:"0.7"},{n:["goggles"],u:"1f97d",a:"11.0"},{n:["lab coat"],u:"1f97c",a:"11.0"},{n:["safety vest"],u:"1f9ba",a:"12.0"},{n:["necktie"],u:"1f454",a:"0.6"},{n:["shirt","tshirt","t-shirt"],u:"1f455",a:"0.6"},{n:["jeans"],u:"1f456",a:"0.6"},{n:["scarf"],u:"1f9e3",a:"5.0"},{n:["gloves"],u:"1f9e4",a:"5.0"},{n:["coat"],u:"1f9e5",a:"5.0"},{n:["socks"],u:"1f9e6",a:"5.0"},{n:["dress"],u:"1f457",a:"0.6"},{n:["kimono"],u:"1f458",a:"0.6"},{n:["sari"],u:"1f97b",a:"12.0"},{n:["one-piece swimsuit"],u:"1fa71",a:"12.0"},{n:["briefs"],u:"1fa72",a:"12.0"},{n:["shorts"],u:"1fa73",a:"12.0"},{n:["bikini"],u:"1f459",a:"0.6"},{n:["womans clothes"],u:"1f45a",a:"0.6"},{n:["purse"],u:"1f45b",a:"0.6"},{n:["handbag"],u:"1f45c",a:"0.6"},{n:["pouch"],u:"1f45d",a:"0.6"},{n:["shopping bags"],u:"1f6cd-fe0f",a:"0.7"},{n:["school satchel"],u:"1f392",a:"0.6"},{n:["thong sandal"],u:"1fa74",a:"13.0"},{n:["shoe","mans shoe"],u:"1f45e",a:"0.6"},{n:["athletic shoe"],u:"1f45f",a:"0.6"},{n:["hiking boot"],u:"1f97e",a:"11.0"},{n:["flat shoe","womans flat shoe"],u:"1f97f",a:"11.0"},{n:["high heel","high-heeled shoe"],u:"1f460",a:"0.6"},{n:["sandal","womans sandal"],u:"1f461",a:"0.6"},{n:["ballet shoes"],u:"1fa70",a:"12.0"},{n:["boot","womans boots"],u:"1f462",a:"0.6"},{n:["crown"],u:"1f451",a:"0.6"},{n:["womans hat"],u:"1f452",a:"0.6"},{n:["tophat","top hat"],u:"1f3a9",a:"0.6"},{n:["mortar board","graduation cap"],u:"1f393",a:"0.6"},{n:["billed cap"],u:"1f9e2",a:"5.0"},{n:["military helmet"],u:"1fa96",a:"13.0"},{n:["rescue workers helmet","helmet with white cross"],u:"26d1-fe0f",a:"0.7"},{n:["prayer beads"],u:"1f4ff",a:"1.0"},{n:["lipstick"],u:"1f484",a:"0.6"},{n:["ring"],u:"1f48d",a:"0.6"},{n:["gem","gem stone"],u:"1f48e",a:"0.6"},{n:["mute","speaker with cancellation stroke"],u:"1f507",a:"1.0"},{n:["speaker"],u:"1f508",a:"0.7"},{n:["sound","speaker with one sound wave"],u:"1f509",a:"1.0"},{n:["loud sound","speaker with three sound waves"],u:"1f50a",a:"0.6"},{n:["loudspeaker","public address loudspeaker"],u:"1f4e2",a:"0.6"},{n:["mega","cheering megaphone"],u:"1f4e3",a:"0.6"},{n:["postal horn"],u:"1f4ef",a:"1.0"},{n:["bell"],u:"1f514",a:"0.6"},{n:["no bell","bell with cancellation stroke"],u:"1f515",a:"1.0"},{n:["musical score"],u:"1f3bc",a:"0.6"},{n:["musical note"],u:"1f3b5",a:"0.6"},{n:["notes","multiple musical notes"],u:"1f3b6",a:"0.6"},{n:["studio microphone"],u:"1f399-fe0f",a:"0.7"},{n:["level slider"],u:"1f39a-fe0f",a:"0.7"},{n:["control knobs"],u:"1f39b-fe0f",a:"0.7"},{n:["microphone"],u:"1f3a4",a:"0.6"},{n:["headphone","headphones"],u:"1f3a7",a:"0.6"},{n:["radio"],u:"1f4fb",a:"0.6"},{n:["saxophone"],u:"1f3b7",a:"0.6"},{n:["accordion"],u:"1fa97",a:"13.0"},{n:["guitar"],u:"1f3b8",a:"0.6"},{n:["musical keyboard"],u:"1f3b9",a:"0.6"},{n:["trumpet"],u:"1f3ba",a:"0.6"},{n:["violin"],u:"1f3bb",a:"0.6"},{n:["banjo"],u:"1fa95",a:"12.0"},{n:["drum with drumsticks"],u:"1f941",a:"3.0"},{n:["long drum"],u:"1fa98",a:"13.0"},{n:["iphone","mobile phone"],u:"1f4f1",a:"0.6"},{n:["calling","mobile phone with rightwards arrow at left"],u:"1f4f2",a:"0.6"},{n:["phone","telephone","black telephone"],u:"260e-fe0f",a:"0.6"},{n:["telephone receiver"],u:"1f4de",a:"0.6"},{n:["pager"],u:"1f4df",a:"0.6"},{n:["fax","fax machine"],u:"1f4e0",a:"0.6"},{n:["battery"],u:"1f50b",a:"0.6"},{n:["low battery"],u:"1faab",a:"14.0"},{n:["electric plug"],u:"1f50c",a:"0.6"},{n:["computer","personal computer"],u:"1f4bb",a:"0.6"},{n:["desktop computer"],u:"1f5a5-fe0f",a:"0.7"},{n:["printer"],u:"1f5a8-fe0f",a:"0.7"},{n:["keyboard"],u:"2328-fe0f",a:"1.0"},{n:["computer mouse","three button mouse"],u:"1f5b1-fe0f",a:"0.7"},{n:["trackball"],u:"1f5b2-fe0f",a:"0.7"},{n:["minidisc"],u:"1f4bd",a:"0.6"},{n:["floppy disk"],u:"1f4be",a:"0.6"},{n:["cd","optical disc"],u:"1f4bf",a:"0.6"},{n:["dvd"],u:"1f4c0",a:"0.6"},{n:["abacus"],u:"1f9ee",a:"11.0"},{n:["movie camera"],u:"1f3a5",a:"0.6"},{n:["film frames"],u:"1f39e-fe0f",a:"0.7"},{n:["film projector"],u:"1f4fd-fe0f",a:"0.7"},{n:["clapper","clapper board"],u:"1f3ac",a:"0.6"},{n:["tv","television"],u:"1f4fa",a:"0.6"},{n:["camera"],u:"1f4f7",a:"0.6"},{n:["camera with flash"],u:"1f4f8",a:"1.0"},{n:["video camera"],u:"1f4f9",a:"0.6"},{n:["vhs","videocassette"],u:"1f4fc",a:"0.6"},{n:["mag","left-pointing magnifying glass"],u:"1f50d",a:"0.6"},{n:["mag right","right-pointing magnifying glass"],u:"1f50e",a:"0.6"},{n:["candle"],u:"1f56f-fe0f",a:"0.7"},{n:["bulb","electric light bulb"],u:"1f4a1",a:"0.6"},{n:["flashlight","electric torch"],u:"1f526",a:"0.6"},{n:["lantern","izakaya lantern"],u:"1f3ee",a:"0.6"},{n:["diya lamp"],u:"1fa94",a:"12.0"},{n:["notebook with decorative cover"],u:"1f4d4",a:"0.6"},{n:["closed book"],u:"1f4d5",a:"0.6"},{n:["book","open book"],u:"1f4d6",a:"0.6"},{n:["green book"],u:"1f4d7",a:"0.6"},{n:["blue book"],u:"1f4d8",a:"0.6"},{n:["orange book"],u:"1f4d9",a:"0.6"},{n:["books"],u:"1f4da",a:"0.6"},{n:["notebook"],u:"1f4d3",a:"0.6"},{n:["ledger"],u:"1f4d2",a:"0.6"},{n:["page with curl"],u:"1f4c3",a:"0.6"},{n:["scroll"],u:"1f4dc",a:"0.6"},{n:["page facing up"],u:"1f4c4",a:"0.6"},{n:["newspaper"],u:"1f4f0",a:"0.6"},{n:["rolled-up newspaper","rolled up newspaper"],u:"1f5de-fe0f",a:"0.7"},{n:["bookmark tabs"],u:"1f4d1",a:"0.6"},{n:["bookmark"],u:"1f516",a:"0.6"},{n:["label"],u:"1f3f7-fe0f",a:"0.7"},{n:["moneybag","money bag"],u:"1f4b0",a:"0.6"},{n:["coin"],u:"1fa99",a:"13.0"},{n:["yen","banknote with yen sign"],u:"1f4b4",a:"0.6"},{n:["dollar","banknote with dollar sign"],u:"1f4b5",a:"0.6"},{n:["euro","banknote with euro sign"],u:"1f4b6",a:"1.0"},{n:["pound","banknote with pound sign"],u:"1f4b7",a:"1.0"},{n:["money with wings"],u:"1f4b8",a:"0.6"},{n:["credit card"],u:"1f4b3",a:"0.6"},{n:["receipt"],u:"1f9fe",a:"11.0"},{n:["chart","chart with upwards trend and yen sign"],u:"1f4b9",a:"0.6"},{n:["email","envelope"],u:"2709-fe0f",a:"0.6"},{n:["e-mail","e-mail symbol"],u:"1f4e7",a:"0.6"},{n:["incoming envelope"],u:"1f4e8",a:"0.6"},{n:["envelope with arrow","envelope with downwards arrow above"],u:"1f4e9",a:"0.6"},{n:["outbox tray"],u:"1f4e4",a:"0.6"},{n:["inbox tray"],u:"1f4e5",a:"0.6"},{n:["package"],u:"1f4e6",a:"0.6"},{n:["mailbox","closed mailbox with raised flag"],u:"1f4eb",a:"0.6"},{n:["mailbox closed","closed mailbox with lowered flag"],u:"1f4ea",a:"0.6"},{n:["mailbox with mail","open mailbox with raised flag"],u:"1f4ec",a:"0.7"},{n:["mailbox with no mail","open mailbox with lowered flag"],u:"1f4ed",a:"0.7"},{n:["postbox"],u:"1f4ee",a:"0.6"},{n:["ballot box with ballot"],u:"1f5f3-fe0f",a:"0.7"},{n:["pencil","pencil2"],u:"270f-fe0f",a:"0.6"},{n:["black nib"],u:"2712-fe0f",a:"0.6"},{n:["fountain pen","lower left fountain pen"],u:"1f58b-fe0f",a:"0.7"},{n:["pen","lower left ballpoint pen"],u:"1f58a-fe0f",a:"0.7"},{n:["paintbrush","lower left paintbrush"],u:"1f58c-fe0f",a:"0.7"},{n:["crayon","lower left crayon"],u:"1f58d-fe0f",a:"0.7"},{n:["memo","pencil"],u:"1f4dd",a:"0.6"},{n:["briefcase"],u:"1f4bc",a:"0.6"},{n:["file folder"],u:"1f4c1",a:"0.6"},{n:["open file folder"],u:"1f4c2",a:"0.6"},{n:["card index dividers"],u:"1f5c2-fe0f",a:"0.7"},{n:["date","calendar"],u:"1f4c5",a:"0.6"},{n:["calendar","tear-off calendar"],u:"1f4c6",a:"0.6"},{n:["spiral notepad","spiral note pad"],u:"1f5d2-fe0f",a:"0.7"},{n:["spiral calendar","spiral calendar pad"],u:"1f5d3-fe0f",a:"0.7"},{n:["card index"],u:"1f4c7",a:"0.6"},{n:["chart with upwards trend"],u:"1f4c8",a:"0.6"},{n:["chart with downwards trend"],u:"1f4c9",a:"0.6"},{n:["bar chart"],u:"1f4ca",a:"0.6"},{n:["clipboard"],u:"1f4cb",a:"0.6"},{n:["pushpin"],u:"1f4cc",a:"0.6"},{n:["round pushpin"],u:"1f4cd",a:"0.6"},{n:["paperclip"],u:"1f4ce",a:"0.6"},{n:["linked paperclips"],u:"1f587-fe0f",a:"0.7"},{n:["straight ruler"],u:"1f4cf",a:"0.6"},{n:["triangular ruler"],u:"1f4d0",a:"0.6"},{n:["scissors","black scissors"],u:"2702-fe0f",a:"0.6"},{n:["card file box"],u:"1f5c3-fe0f",a:"0.7"},{n:["file cabinet"],u:"1f5c4-fe0f",a:"0.7"},{n:["wastebasket"],u:"1f5d1-fe0f",a:"0.7"},{n:["lock"],u:"1f512",a:"0.6"},{n:["unlock","open lock"],u:"1f513",a:"0.6"},{n:["lock with ink pen"],u:"1f50f",a:"0.6"},{n:["closed lock with key"],u:"1f510",a:"0.6"},{n:["key"],u:"1f511",a:"0.6"},{n:["old key"],u:"1f5dd-fe0f",a:"0.7"},{n:["hammer"],u:"1f528",a:"0.6"},{n:["axe"],u:"1fa93",a:"12.0"},{n:["pick"],u:"26cf-fe0f",a:"0.7"},{n:["hammer and pick"],u:"2692-fe0f",a:"1.0"},{n:["hammer and wrench"],u:"1f6e0-fe0f",a:"0.7"},{n:["dagger","dagger knife"],u:"1f5e1-fe0f",a:"0.7"},{n:["crossed swords"],u:"2694-fe0f",a:"1.0"},{n:["gun","pistol"],u:"1f52b",a:"0.6"},{n:["boomerang"],u:"1fa83",a:"13.0"},{n:["bow and arrow"],u:"1f3f9",a:"1.0"},{n:["shield"],u:"1f6e1-fe0f",a:"0.7"},{n:["carpentry saw"],u:"1fa9a",a:"13.0"},{n:["wrench"],u:"1f527",a:"0.6"},{n:["screwdriver"],u:"1fa9b",a:"13.0"},{n:["nut and bolt"],u:"1f529",a:"0.6"},{n:["gear"],u:"2699-fe0f",a:"1.0"},{n:["clamp","compression"],u:"1f5dc-fe0f",a:"0.7"},{n:["scales","balance scale"],u:"2696-fe0f",a:"1.0"},{n:["probing cane"],u:"1f9af",a:"12.0"},{n:["link","link symbol"],u:"1f517",a:"0.6"},{n:["chains"],u:"26d3-fe0f",a:"0.7"},{n:["hook"],u:"1fa9d",a:"13.0"},{n:["toolbox"],u:"1f9f0",a:"11.0"},{n:["magnet"],u:"1f9f2",a:"11.0"},{n:["ladder"],u:"1fa9c",a:"13.0"},{n:["alembic"],u:"2697-fe0f",a:"1.0"},{n:["test tube"],u:"1f9ea",a:"11.0"},{n:["petri dish"],u:"1f9eb",a:"11.0"},{n:["dna","dna double helix"],u:"1f9ec",a:"11.0"},{n:["microscope"],u:"1f52c",a:"1.0"},{n:["telescope"],u:"1f52d",a:"1.0"},{n:["satellite antenna"],u:"1f4e1",a:"0.6"},{n:["syringe"],u:"1f489",a:"0.6"},{n:["drop of blood"],u:"1fa78",a:"12.0"},{n:["pill"],u:"1f48a",a:"0.6"},{n:["adhesive bandage"],u:"1fa79",a:"12.0"},{n:["crutch"],u:"1fa7c",a:"14.0"},{n:["stethoscope"],u:"1fa7a",a:"12.0"},{n:["x-ray"],u:"1fa7b",a:"14.0"},{n:["door"],u:"1f6aa",a:"0.6"},{n:["elevator"],u:"1f6d7",a:"13.0"},{n:["mirror"],u:"1fa9e",a:"13.0"},{n:["window"],u:"1fa9f",a:"13.0"},{n:["bed"],u:"1f6cf-fe0f",a:"0.7"},{n:["couch and lamp"],u:"1f6cb-fe0f",a:"0.7"},{n:["chair"],u:"1fa91",a:"12.0"},{n:["toilet"],u:"1f6bd",a:"0.6"},{n:["plunger"],u:"1faa0",a:"13.0"},{n:["shower"],u:"1f6bf",a:"1.0"},{n:["bathtub"],u:"1f6c1",a:"1.0"},{n:["mouse trap"],u:"1faa4",a:"13.0"},{n:["razor"],u:"1fa92",a:"12.0"},{n:["lotion bottle"],u:"1f9f4",a:"11.0"},{n:["safety pin"],u:"1f9f7",a:"11.0"},{n:["broom"],u:"1f9f9",a:"11.0"},{n:["basket"],u:"1f9fa",a:"11.0"},{n:["roll of paper"],u:"1f9fb",a:"11.0"},{n:["bucket"],u:"1faa3",a:"13.0"},{n:["soap","bar of soap"],u:"1f9fc",a:"11.0"},{n:["bubbles"],u:"1fae7",a:"14.0"},{n:["toothbrush"],u:"1faa5",a:"13.0"},{n:["sponge"],u:"1f9fd",a:"11.0"},{n:["fire extinguisher"],u:"1f9ef",a:"11.0"},{n:["shopping trolley"],u:"1f6d2",a:"3.0"},{n:["smoking","smoking symbol"],u:"1f6ac",a:"0.6"},{n:["coffin"],u:"26b0-fe0f",a:"1.0"},{n:["headstone"],u:"1faa6",a:"13.0"},{n:["funeral urn"],u:"26b1-fe0f",a:"1.0"},{n:["moyai"],u:"1f5ff",a:"0.6"},{n:["placard"],u:"1faa7",a:"13.0"},{n:["identification card"],u:"1faaa",a:"14.0"}],Lme=[{n:["atm","automated teller machine"],u:"1f3e7",a:"0.6"},{n:["put litter in its place","put litter in its place symbol"],u:"1f6ae",a:"1.0"},{n:["potable water","potable water symbol"],u:"1f6b0",a:"1.0"},{n:["wheelchair","wheelchair symbol"],u:"267f",a:"0.6"},{n:["mens","mens symbol"],u:"1f6b9",a:"0.6"},{n:["womens","womens symbol"],u:"1f6ba",a:"0.6"},{n:["restroom"],u:"1f6bb",a:"0.6"},{n:["baby symbol"],u:"1f6bc",a:"0.6"},{n:["wc","water closet"],u:"1f6be",a:"0.6"},{n:["passport control"],u:"1f6c2",a:"1.0"},{n:["customs"],u:"1f6c3",a:"1.0"},{n:["baggage claim"],u:"1f6c4",a:"1.0"},{n:["left luggage"],u:"1f6c5",a:"1.0"},{n:["warning","warning sign"],u:"26a0-fe0f",a:"0.6"},{n:["children crossing"],u:"1f6b8",a:"1.0"},{n:["no entry"],u:"26d4",a:"0.6"},{n:["no entry sign"],u:"1f6ab",a:"0.6"},{n:["no bicycles"],u:"1f6b3",a:"1.0"},{n:["no smoking","no smoking symbol"],u:"1f6ad",a:"0.6"},{n:["do not litter","do not litter symbol"],u:"1f6af",a:"1.0"},{n:["non-potable water","non-potable water symbol"],u:"1f6b1",a:"1.0"},{n:["no pedestrians"],u:"1f6b7",a:"1.0"},{n:["no mobile phones"],u:"1f4f5",a:"1.0"},{n:["underage","no one under eighteen symbol"],u:"1f51e",a:"0.6"},{n:["radioactive","radioactive sign"],u:"2622-fe0f",a:"1.0"},{n:["biohazard","biohazard sign"],u:"2623-fe0f",a:"1.0"},{n:["arrow up","upwards black arrow"],u:"2b06-fe0f",a:"0.6"},{n:["north east arrow","arrow upper right"],u:"2197-fe0f",a:"0.6"},{n:["arrow right","black rightwards arrow"],u:"27a1-fe0f",a:"0.6"},{n:["south east arrow","arrow lower right"],u:"2198-fe0f",a:"0.6"},{n:["arrow down","downwards black arrow"],u:"2b07-fe0f",a:"0.6"},{n:["south west arrow","arrow lower left"],u:"2199-fe0f",a:"0.6"},{n:["arrow left","leftwards black arrow"],u:"2b05-fe0f",a:"0.6"},{n:["north west arrow","arrow upper left"],u:"2196-fe0f",a:"0.6"},{n:["up down arrow","arrow up down"],u:"2195-fe0f",a:"0.6"},{n:["left right arrow"],u:"2194-fe0f",a:"0.6"},{n:["leftwards arrow with hook"],u:"21a9-fe0f",a:"0.6"},{n:["arrow right hook","rightwards arrow with hook"],u:"21aa-fe0f",a:"0.6"},{n:["arrow heading up","arrow pointing rightwards then curving upwards"],u:"2934-fe0f",a:"0.6"},{n:["arrow heading down","arrow pointing rightwards then curving downwards"],u:"2935-fe0f",a:"0.6"},{n:["arrows clockwise","clockwise downwards and upwards open circle arrows"],u:"1f503",a:"0.6"},{n:["arrows counterclockwise","anticlockwise downwards and upwards open circle arrows"],u:"1f504",a:"1.0"},{n:["back","back with leftwards arrow above"],u:"1f519",a:"0.6"},{n:["end","end with leftwards arrow above"],u:"1f51a",a:"0.6"},{n:["on","on with exclamation mark with left right arrow above"],u:"1f51b",a:"0.6"},{n:["soon","soon with rightwards arrow above"],u:"1f51c",a:"0.6"},{n:["top","top with upwards arrow above"],u:"1f51d",a:"0.6"},{n:["place of worship"],u:"1f6d0",a:"1.0"},{n:["atom symbol"],u:"269b-fe0f",a:"1.0"},{n:["om","om symbol"],u:"1f549-fe0f",a:"0.7"},{n:["star of david"],u:"2721-fe0f",a:"0.7"},{n:["wheel of dharma"],u:"2638-fe0f",a:"0.7"},{n:["yin yang"],u:"262f-fe0f",a:"0.7"},{n:["latin cross"],u:"271d-fe0f",a:"0.7"},{n:["orthodox cross"],u:"2626-fe0f",a:"1.0"},{n:["star and crescent"],u:"262a-fe0f",a:"0.7"},{n:["peace symbol"],u:"262e-fe0f",a:"1.0"},{n:["menorah with nine branches"],u:"1f54e",a:"1.0"},{n:["six pointed star","six pointed star with middle dot"],u:"1f52f",a:"0.6"},{n:["aries"],u:"2648",a:"0.6"},{n:["taurus"],u:"2649",a:"0.6"},{n:["gemini"],u:"264a",a:"0.6"},{n:["cancer"],u:"264b",a:"0.6"},{n:["leo"],u:"264c",a:"0.6"},{n:["virgo"],u:"264d",a:"0.6"},{n:["libra"],u:"264e",a:"0.6"},{n:["scorpius"],u:"264f",a:"0.6"},{n:["sagittarius"],u:"2650",a:"0.6"},{n:["capricorn"],u:"2651",a:"0.6"},{n:["aquarius"],u:"2652",a:"0.6"},{n:["pisces"],u:"2653",a:"0.6"},{n:["ophiuchus"],u:"26ce",a:"0.6"},{n:["twisted rightwards arrows"],u:"1f500",a:"1.0"},{n:["repeat","clockwise rightwards and leftwards open circle arrows"],u:"1f501",a:"1.0"},{n:["repeat one","clockwise rightwards and leftwards open circle arrows with circled one overlay"],u:"1f502",a:"1.0"},{n:["arrow forward","black right-pointing triangle"],u:"25b6-fe0f",a:"0.6"},{n:["fast forward","black right-pointing double triangle"],u:"23e9",a:"0.6"},{n:["next track button","black right pointing double triangle with vertical bar"],u:"23ed-fe0f",a:"0.7"},{n:["play or pause button","black right pointing triangle with double vertical bar"],u:"23ef-fe0f",a:"1.0"},{n:["arrow backward","black left-pointing triangle"],u:"25c0-fe0f",a:"0.6"},{n:["rewind","black left-pointing double triangle"],u:"23ea",a:"0.6"},{n:["last track button","black left pointing double triangle with vertical bar"],u:"23ee-fe0f",a:"0.7"},{n:["arrow up small","up-pointing small red triangle"],u:"1f53c",a:"0.6"},{n:["arrow double up","black up-pointing double triangle"],u:"23eb",a:"0.6"},{n:["arrow down small","down-pointing small red triangle"],u:"1f53d",a:"0.6"},{n:["arrow double down","black down-pointing double triangle"],u:"23ec",a:"0.6"},{n:["pause button","double vertical bar"],u:"23f8-fe0f",a:"0.7"},{n:["stop button","black square for stop"],u:"23f9-fe0f",a:"0.7"},{n:["record button","black circle for record"],u:"23fa-fe0f",a:"0.7"},{n:["eject","eject button"],u:"23cf-fe0f",a:"1.0"},{n:["cinema"],u:"1f3a6",a:"0.6"},{n:["low brightness","low brightness symbol"],u:"1f505",a:"1.0"},{n:["high brightness","high brightness symbol"],u:"1f506",a:"1.0"},{n:["signal strength","antenna with bars"],u:"1f4f6",a:"0.6"},{n:["vibration mode"],u:"1f4f3",a:"0.6"},{n:["mobile phone off"],u:"1f4f4",a:"0.6"},{n:["female sign"],u:"2640-fe0f",a:"4.0"},{n:["male sign"],u:"2642-fe0f",a:"4.0"},{n:["transgender symbol"],u:"26a7-fe0f",a:"13.0"},{n:["heavy multiplication x"],u:"2716-fe0f",a:"0.6"},{n:["heavy plus sign"],u:"2795",a:"0.6"},{n:["heavy minus sign"],u:"2796",a:"0.6"},{n:["heavy division sign"],u:"2797",a:"0.6"},{n:["heavy equals sign"],u:"1f7f0",a:"14.0"},{n:["infinity"],u:"267e-fe0f",a:"11.0"},{n:["bangbang","double exclamation mark"],u:"203c-fe0f",a:"0.6"},{n:["interrobang","exclamation question mark"],u:"2049-fe0f",a:"0.6"},{n:["question","black question mark ornament"],u:"2753",a:"0.6"},{n:["grey question","white question mark ornament"],u:"2754",a:"0.6"},{n:["grey exclamation","white exclamation mark ornament"],u:"2755",a:"0.6"},{n:["exclamation","heavy exclamation mark","heavy exclamation mark symbol"],u:"2757",a:"0.6"},{n:["wavy dash"],u:"3030-fe0f",a:"0.6"},{n:["currency exchange"],u:"1f4b1",a:"0.6"},{n:["heavy dollar sign"],u:"1f4b2",a:"0.6"},{n:["medical symbol","staff of aesculapius"],u:"2695-fe0f",a:"4.0"},{n:["recycle","black universal recycling symbol"],u:"267b-fe0f",a:"0.6"},{n:["fleur-de-lis","fleur de lis"],u:"269c-fe0f",a:"1.0"},{n:["trident","trident emblem"],u:"1f531",a:"0.6"},{n:["name badge"],u:"1f4db",a:"0.6"},{n:["beginner","japanese symbol for beginner"],u:"1f530",a:"0.6"},{n:["o","heavy large circle"],u:"2b55",a:"0.6"},{n:["white check mark","white heavy check mark"],u:"2705",a:"0.6"},{n:["ballot box with check"],u:"2611-fe0f",a:"0.6"},{n:["heavy check mark"],u:"2714-fe0f",a:"0.6"},{n:["x","cross mark"],u:"274c",a:"0.6"},{n:["negative squared cross mark"],u:"274e",a:"0.6"},{n:["curly loop"],u:"27b0",a:"0.6"},{n:["loop","double curly loop"],u:"27bf",a:"1.0"},{n:["part alternation mark"],u:"303d-fe0f",a:"0.6"},{n:["eight spoked asterisk"],u:"2733-fe0f",a:"0.6"},{n:["eight pointed black star"],u:"2734-fe0f",a:"0.6"},{n:["sparkle"],u:"2747-fe0f",a:"0.6"},{n:["copyright","copyright sign"],u:"00a9-fe0f",a:"0.6"},{n:["registered","registered sign"],u:"00ae-fe0f",a:"0.6"},{n:["tm","trade mark sign"],u:"2122-fe0f",a:"0.6"},{n:["hash","hash key"],u:"0023-fe0f-20e3",a:"0.6"},{n:["keycap: *","keycap star"],u:"002a-fe0f-20e3",a:"2.0"},{n:["zero","keycap 0"],u:"0030-fe0f-20e3",a:"0.6"},{n:["one","keycap 1"],u:"0031-fe0f-20e3",a:"0.6"},{n:["two","keycap 2"],u:"0032-fe0f-20e3",a:"0.6"},{n:["three","keycap 3"],u:"0033-fe0f-20e3",a:"0.6"},{n:["four","keycap 4"],u:"0034-fe0f-20e3",a:"0.6"},{n:["five","keycap 5"],u:"0035-fe0f-20e3",a:"0.6"},{n:["six","keycap 6"],u:"0036-fe0f-20e3",a:"0.6"},{n:["seven","keycap 7"],u:"0037-fe0f-20e3",a:"0.6"},{n:["eight","keycap 8"],u:"0038-fe0f-20e3",a:"0.6"},{n:["nine","keycap 9"],u:"0039-fe0f-20e3",a:"0.6"},{n:["keycap ten"],u:"1f51f",a:"0.6"},{n:["capital abcd","input symbol for latin capital letters"],u:"1f520",a:"0.6"},{n:["abcd","input symbol for latin small letters"],u:"1f521",a:"0.6"},{n:["1234","input symbol for numbers"],u:"1f522",a:"0.6"},{n:["symbols","input symbol for symbols"],u:"1f523",a:"0.6"},{n:["abc","input symbol for latin letters"],u:"1f524",a:"0.6"},{n:["a","negative squared latin capital letter a"],u:"1f170-fe0f",a:"0.6"},{n:["ab","negative squared ab"],u:"1f18e",a:"0.6"},{n:["b","negative squared latin capital letter b"],u:"1f171-fe0f",a:"0.6"},{n:["cl","squared cl"],u:"1f191",a:"0.6"},{n:["cool","squared cool"],u:"1f192",a:"0.6"},{n:["free","squared free"],u:"1f193",a:"0.6"},{n:["information source"],u:"2139-fe0f",a:"0.6"},{n:["id","squared id"],u:"1f194",a:"0.6"},{n:["m","circled latin capital letter m"],u:"24c2-fe0f",a:"0.6"},{n:["new","squared new"],u:"1f195",a:"0.6"},{n:["ng","squared ng"],u:"1f196",a:"0.6"},{n:["o2","negative squared latin capital letter o"],u:"1f17e-fe0f",a:"0.6"},{n:["ok","squared ok"],u:"1f197",a:"0.6"},{n:["parking","negative squared latin capital letter p"],u:"1f17f-fe0f",a:"0.6"},{n:["sos","squared sos"],u:"1f198",a:"0.6"},{n:["up","squared up with exclamation mark"],u:"1f199",a:"0.6"},{n:["vs","squared vs"],u:"1f19a",a:"0.6"},{n:["koko","squared katakana koko"],u:"1f201",a:"0.6"},{n:["sa","squared katakana sa"],u:"1f202-fe0f",a:"0.6"},{n:["u6708","squared cjk unified ideograph-6708"],u:"1f237-fe0f",a:"0.6"},{n:["u6709","squared cjk unified ideograph-6709"],u:"1f236",a:"0.6"},{n:["u6307","squared cjk unified ideograph-6307"],u:"1f22f",a:"0.6"},{n:["ideograph advantage","circled ideograph advantage"],u:"1f250",a:"0.6"},{n:["u5272","squared cjk unified ideograph-5272"],u:"1f239",a:"0.6"},{n:["u7121","squared cjk unified ideograph-7121"],u:"1f21a",a:"0.6"},{n:["u7981","squared cjk unified ideograph-7981"],u:"1f232",a:"0.6"},{n:["accept","circled ideograph accept"],u:"1f251",a:"0.6"},{n:["u7533","squared cjk unified ideograph-7533"],u:"1f238",a:"0.6"},{n:["u5408","squared cjk unified ideograph-5408"],u:"1f234",a:"0.6"},{n:["u7a7a","squared cjk unified ideograph-7a7a"],u:"1f233",a:"0.6"},{n:["congratulations","circled ideograph congratulation"],u:"3297-fe0f",a:"0.6"},{n:["secret","circled ideograph secret"],u:"3299-fe0f",a:"0.6"},{n:["u55b6","squared cjk unified ideograph-55b6"],u:"1f23a",a:"0.6"},{n:["u6e80","squared cjk unified ideograph-6e80"],u:"1f235",a:"0.6"},{n:["red circle","large red circle"],u:"1f534",a:"0.6"},{n:["large orange circle"],u:"1f7e0",a:"12.0"},{n:["large yellow circle"],u:"1f7e1",a:"12.0"},{n:["large green circle"],u:"1f7e2",a:"12.0"},{n:["large blue circle"],u:"1f535",a:"0.6"},{n:["large purple circle"],u:"1f7e3",a:"12.0"},{n:["large brown circle"],u:"1f7e4",a:"12.0"},{n:["black circle","medium black circle"],u:"26ab",a:"0.6"},{n:["white circle","medium white circle"],u:"26aa",a:"0.6"},{n:["large red square"],u:"1f7e5",a:"12.0"},{n:["large orange square"],u:"1f7e7",a:"12.0"},{n:["large yellow square"],u:"1f7e8",a:"12.0"},{n:["large green square"],u:"1f7e9",a:"12.0"},{n:["large blue square"],u:"1f7e6",a:"12.0"},{n:["large purple square"],u:"1f7ea",a:"12.0"},{n:["large brown square"],u:"1f7eb",a:"12.0"},{n:["black large square"],u:"2b1b",a:"0.6"},{n:["white large square"],u:"2b1c",a:"0.6"},{n:["black medium square"],u:"25fc-fe0f",a:"0.6"},{n:["white medium square"],u:"25fb-fe0f",a:"0.6"},{n:["black medium small square"],u:"25fe",a:"0.6"},{n:["white medium small square"],u:"25fd",a:"0.6"},{n:["black small square"],u:"25aa-fe0f",a:"0.6"},{n:["white small square"],u:"25ab-fe0f",a:"0.6"},{n:["large orange diamond"],u:"1f536",a:"0.6"},{n:["large blue diamond"],u:"1f537",a:"0.6"},{n:["small orange diamond"],u:"1f538",a:"0.6"},{n:["small blue diamond"],u:"1f539",a:"0.6"},{n:["small red triangle","up-pointing red triangle"],u:"1f53a",a:"0.6"},{n:["small red triangle down","down-pointing red triangle"],u:"1f53b",a:"0.6"},{n:["diamond shape with a dot inside"],u:"1f4a0",a:"0.6"},{n:["radio button"],u:"1f518",a:"0.6"},{n:["white square button"],u:"1f533",a:"0.6"},{n:["black square button"],u:"1f532",a:"0.6"}],Nme=[{n:["chequered flag","checkered flag"],u:"1f3c1",a:"0.6"},{n:["triangular flag on post"],u:"1f6a9",a:"0.6"},{n:["crossed flags"],u:"1f38c",a:"0.6"},{n:["waving black flag"],u:"1f3f4",a:"1.0"},{n:["white flag","waving white flag"],u:"1f3f3-fe0f",a:"0.7"},{n:["rainbow flag","rainbow-flag"],u:"1f3f3-fe0f-200d-1f308",a:"4.0"},{n:["transgender flag"],u:"1f3f3-fe0f-200d-26a7-fe0f",a:"13.0"},{n:["pirate flag"],u:"1f3f4-200d-2620-fe0f",a:"11.0"},{n:["flag-ac","ascension island flag"],u:"1f1e6-1f1e8",a:"2.0"},{n:["flag-ad","andorra flag"],u:"1f1e6-1f1e9",a:"2.0"},{n:["flag-ae","united arab emirates flag"],u:"1f1e6-1f1ea",a:"2.0"},{n:["flag-af","afghanistan flag"],u:"1f1e6-1f1eb",a:"2.0"},{n:["flag-ag","antigua & barbuda flag"],u:"1f1e6-1f1ec",a:"2.0"},{n:["flag-ai","anguilla flag"],u:"1f1e6-1f1ee",a:"2.0"},{n:["flag-al","albania flag"],u:"1f1e6-1f1f1",a:"2.0"},{n:["flag-am","armenia flag"],u:"1f1e6-1f1f2",a:"2.0"},{n:["flag-ao","angola flag"],u:"1f1e6-1f1f4",a:"2.0"},{n:["flag-aq","antarctica flag"],u:"1f1e6-1f1f6",a:"2.0"},{n:["flag-ar","argentina flag"],u:"1f1e6-1f1f7",a:"2.0"},{n:["flag-as","american samoa flag"],u:"1f1e6-1f1f8",a:"2.0"},{n:["flag-at","austria flag"],u:"1f1e6-1f1f9",a:"2.0"},{n:["flag-au","australia flag"],u:"1f1e6-1f1fa",a:"2.0"},{n:["flag-aw","aruba flag"],u:"1f1e6-1f1fc",a:"2.0"},{n:["flag-ax","land islands flag"],u:"1f1e6-1f1fd",a:"2.0"},{n:["flag-az","azerbaijan flag"],u:"1f1e6-1f1ff",a:"2.0"},{n:["flag-ba","bosnia & herzegovina flag"],u:"1f1e7-1f1e6",a:"2.0"},{n:["flag-bb","barbados flag"],u:"1f1e7-1f1e7",a:"2.0"},{n:["flag-bd","bangladesh flag"],u:"1f1e7-1f1e9",a:"2.0"},{n:["flag-be","belgium flag"],u:"1f1e7-1f1ea",a:"2.0"},{n:["flag-bf","burkina faso flag"],u:"1f1e7-1f1eb",a:"2.0"},{n:["flag-bg","bulgaria flag"],u:"1f1e7-1f1ec",a:"2.0"},{n:["flag-bh","bahrain flag"],u:"1f1e7-1f1ed",a:"2.0"},{n:["flag-bi","burundi flag"],u:"1f1e7-1f1ee",a:"2.0"},{n:["flag-bj","benin flag"],u:"1f1e7-1f1ef",a:"2.0"},{n:["flag-bl","st. barthlemy flag"],u:"1f1e7-1f1f1",a:"2.0"},{n:["flag-bm","bermuda flag"],u:"1f1e7-1f1f2",a:"2.0"},{n:["flag-bn","brunei flag"],u:"1f1e7-1f1f3",a:"2.0"},{n:["flag-bo","bolivia flag"],u:"1f1e7-1f1f4",a:"2.0"},{n:["flag-bq","caribbean netherlands flag"],u:"1f1e7-1f1f6",a:"2.0"},{n:["flag-br","brazil flag"],u:"1f1e7-1f1f7",a:"2.0"},{n:["flag-bs","bahamas flag"],u:"1f1e7-1f1f8",a:"2.0"},{n:["flag-bt","bhutan flag"],u:"1f1e7-1f1f9",a:"2.0"},{n:["flag-bv","bouvet island flag"],u:"1f1e7-1f1fb",a:"2.0"},{n:["flag-bw","botswana flag"],u:"1f1e7-1f1fc",a:"2.0"},{n:["flag-by","belarus flag"],u:"1f1e7-1f1fe",a:"2.0"},{n:["flag-bz","belize flag"],u:"1f1e7-1f1ff",a:"2.0"},{n:["flag-ca","canada flag"],u:"1f1e8-1f1e6",a:"2.0"},{n:["flag-cc","cocos (keeling) islands flag"],u:"1f1e8-1f1e8",a:"2.0"},{n:["flag-cd","congo - kinshasa flag"],u:"1f1e8-1f1e9",a:"2.0"},{n:["flag-cf","central african republic flag"],u:"1f1e8-1f1eb",a:"2.0"},{n:["flag-cg","congo - brazzaville flag"],u:"1f1e8-1f1ec",a:"2.0"},{n:["flag-ch","switzerland flag"],u:"1f1e8-1f1ed",a:"2.0"},{n:["flag-ci","cte divoire flag"],u:"1f1e8-1f1ee",a:"2.0"},{n:["flag-ck","cook islands flag"],u:"1f1e8-1f1f0",a:"2.0"},{n:["flag-cl","chile flag"],u:"1f1e8-1f1f1",a:"2.0"},{n:["flag-cm","cameroon flag"],u:"1f1e8-1f1f2",a:"2.0"},{n:["cn","flag-cn","china flag"],u:"1f1e8-1f1f3",a:"0.6"},{n:["flag-co","colombia flag"],u:"1f1e8-1f1f4",a:"2.0"},{n:["flag-cp","clipperton island flag"],u:"1f1e8-1f1f5",a:"2.0"},{n:["flag-cr","costa rica flag"],u:"1f1e8-1f1f7",a:"2.0"},{n:["flag-cu","cuba flag"],u:"1f1e8-1f1fa",a:"2.0"},{n:["flag-cv","cape verde flag"],u:"1f1e8-1f1fb",a:"2.0"},{n:["flag-cw","curaao flag"],u:"1f1e8-1f1fc",a:"2.0"},{n:["flag-cx","christmas island flag"],u:"1f1e8-1f1fd",a:"2.0"},{n:["flag-cy","cyprus flag"],u:"1f1e8-1f1fe",a:"2.0"},{n:["flag-cz","czechia flag"],u:"1f1e8-1f1ff",a:"2.0"},{n:["de","flag-de","germany flag"],u:"1f1e9-1f1ea",a:"0.6"},{n:["flag-dg","diego garcia flag"],u:"1f1e9-1f1ec",a:"2.0"},{n:["flag-dj","djibouti flag"],u:"1f1e9-1f1ef",a:"2.0"},{n:["flag-dk","denmark flag"],u:"1f1e9-1f1f0",a:"2.0"},{n:["flag-dm","dominica flag"],u:"1f1e9-1f1f2",a:"2.0"},{n:["flag-do","dominican republic flag"],u:"1f1e9-1f1f4",a:"2.0"},{n:["flag-dz","algeria flag"],u:"1f1e9-1f1ff",a:"2.0"},{n:["flag-ea","ceuta & melilla flag"],u:"1f1ea-1f1e6",a:"2.0"},{n:["flag-ec","ecuador flag"],u:"1f1ea-1f1e8",a:"2.0"},{n:["flag-ee","estonia flag"],u:"1f1ea-1f1ea",a:"2.0"},{n:["flag-eg","egypt flag"],u:"1f1ea-1f1ec",a:"2.0"},{n:["flag-eh","western sahara flag"],u:"1f1ea-1f1ed",a:"2.0"},{n:["flag-er","eritrea flag"],u:"1f1ea-1f1f7",a:"2.0"},{n:["es","flag-es","spain flag"],u:"1f1ea-1f1f8",a:"0.6"},{n:["flag-et","ethiopia flag"],u:"1f1ea-1f1f9",a:"2.0"},{n:["flag-eu","european union flag"],u:"1f1ea-1f1fa",a:"2.0"},{n:["flag-fi","finland flag"],u:"1f1eb-1f1ee",a:"2.0"},{n:["flag-fj","fiji flag"],u:"1f1eb-1f1ef",a:"2.0"},{n:["flag-fk","falkland islands flag"],u:"1f1eb-1f1f0",a:"2.0"},{n:["flag-fm","micronesia flag"],u:"1f1eb-1f1f2",a:"2.0"},{n:["flag-fo","faroe islands flag"],u:"1f1eb-1f1f4",a:"2.0"},{n:["fr","flag-fr","france flag"],u:"1f1eb-1f1f7",a:"0.6"},{n:["flag-ga","gabon flag"],u:"1f1ec-1f1e6",a:"2.0"},{n:["gb","uk","flag-gb","united kingdom flag"],u:"1f1ec-1f1e7",a:"0.6"},{n:["flag-gd","grenada flag"],u:"1f1ec-1f1e9",a:"2.0"},{n:["flag-ge","georgia flag"],u:"1f1ec-1f1ea",a:"2.0"},{n:["flag-gf","french guiana flag"],u:"1f1ec-1f1eb",a:"2.0"},{n:["flag-gg","guernsey flag"],u:"1f1ec-1f1ec",a:"2.0"},{n:["flag-gh","ghana flag"],u:"1f1ec-1f1ed",a:"2.0"},{n:["flag-gi","gibraltar flag"],u:"1f1ec-1f1ee",a:"2.0"},{n:["flag-gl","greenland flag"],u:"1f1ec-1f1f1",a:"2.0"},{n:["flag-gm","gambia flag"],u:"1f1ec-1f1f2",a:"2.0"},{n:["flag-gn","guinea flag"],u:"1f1ec-1f1f3",a:"2.0"},{n:["flag-gp","guadeloupe flag"],u:"1f1ec-1f1f5",a:"2.0"},{n:["flag-gq","equatorial guinea flag"],u:"1f1ec-1f1f6",a:"2.0"},{n:["flag-gr","greece flag"],u:"1f1ec-1f1f7",a:"2.0"},{n:["flag-gs","south georgia & south sandwich islands flag"],u:"1f1ec-1f1f8",a:"2.0"},{n:["flag-gt","guatemala flag"],u:"1f1ec-1f1f9",a:"2.0"},{n:["flag-gu","guam flag"],u:"1f1ec-1f1fa",a:"2.0"},{n:["flag-gw","guinea-bissau flag"],u:"1f1ec-1f1fc",a:"2.0"},{n:["flag-gy","guyana flag"],u:"1f1ec-1f1fe",a:"2.0"},{n:["flag-hk","hong kong sar china flag"],u:"1f1ed-1f1f0",a:"2.0"},{n:["flag-hm","heard & mcdonald islands flag"],u:"1f1ed-1f1f2",a:"2.0"},{n:["flag-hn","honduras flag"],u:"1f1ed-1f1f3",a:"2.0"},{n:["flag-hr","croatia flag"],u:"1f1ed-1f1f7",a:"2.0"},{n:["flag-ht","haiti flag"],u:"1f1ed-1f1f9",a:"2.0"},{n:["flag-hu","hungary flag"],u:"1f1ed-1f1fa",a:"2.0"},{n:["flag-ic","canary islands flag"],u:"1f1ee-1f1e8",a:"2.0"},{n:["flag-id","indonesia flag"],u:"1f1ee-1f1e9",a:"2.0"},{n:["flag-ie","ireland flag"],u:"1f1ee-1f1ea",a:"2.0"},{n:["flag-il","israel flag"],u:"1f1ee-1f1f1",a:"2.0"},{n:["flag-im","isle of man flag"],u:"1f1ee-1f1f2",a:"2.0"},{n:["flag-in","india flag"],u:"1f1ee-1f1f3",a:"2.0"},{n:["flag-io","british indian ocean territory flag"],u:"1f1ee-1f1f4",a:"2.0"},{n:["flag-iq","iraq flag"],u:"1f1ee-1f1f6",a:"2.0"},{n:["flag-ir","iran flag"],u:"1f1ee-1f1f7",a:"2.0"},{n:["flag-is","iceland flag"],u:"1f1ee-1f1f8",a:"2.0"},{n:["it","flag-it","italy flag"],u:"1f1ee-1f1f9",a:"0.6"},{n:["flag-je","jersey flag"],u:"1f1ef-1f1ea",a:"2.0"},{n:["flag-jm","jamaica flag"],u:"1f1ef-1f1f2",a:"2.0"},{n:["flag-jo","jordan flag"],u:"1f1ef-1f1f4",a:"2.0"},{n:["jp","flag-jp","japan flag"],u:"1f1ef-1f1f5",a:"0.6"},{n:["flag-ke","kenya flag"],u:"1f1f0-1f1ea",a:"2.0"},{n:["flag-kg","kyrgyzstan flag"],u:"1f1f0-1f1ec",a:"2.0"},{n:["flag-kh","cambodia flag"],u:"1f1f0-1f1ed",a:"2.0"},{n:["flag-ki","kiribati flag"],u:"1f1f0-1f1ee",a:"2.0"},{n:["flag-km","comoros flag"],u:"1f1f0-1f1f2",a:"2.0"},{n:["flag-kn","st. kitts & nevis flag"],u:"1f1f0-1f1f3",a:"2.0"},{n:["flag-kp","north korea flag"],u:"1f1f0-1f1f5",a:"2.0"},{n:["kr","flag-kr","south korea flag"],u:"1f1f0-1f1f7",a:"0.6"},{n:["flag-kw","kuwait flag"],u:"1f1f0-1f1fc",a:"2.0"},{n:["flag-ky","cayman islands flag"],u:"1f1f0-1f1fe",a:"2.0"},{n:["flag-kz","kazakhstan flag"],u:"1f1f0-1f1ff",a:"2.0"},{n:["flag-la","laos flag"],u:"1f1f1-1f1e6",a:"2.0"},{n:["flag-lb","lebanon flag"],u:"1f1f1-1f1e7",a:"2.0"},{n:["flag-lc","st. lucia flag"],u:"1f1f1-1f1e8",a:"2.0"},{n:["flag-li","liechtenstein flag"],u:"1f1f1-1f1ee",a:"2.0"},{n:["flag-lk","sri lanka flag"],u:"1f1f1-1f1f0",a:"2.0"},{n:["flag-lr","liberia flag"],u:"1f1f1-1f1f7",a:"2.0"},{n:["flag-ls","lesotho flag"],u:"1f1f1-1f1f8",a:"2.0"},{n:["flag-lt","lithuania flag"],u:"1f1f1-1f1f9",a:"2.0"},{n:["flag-lu","luxembourg flag"],u:"1f1f1-1f1fa",a:"2.0"},{n:["flag-lv","latvia flag"],u:"1f1f1-1f1fb",a:"2.0"},{n:["flag-ly","libya flag"],u:"1f1f1-1f1fe",a:"2.0"},{n:["flag-ma","morocco flag"],u:"1f1f2-1f1e6",a:"2.0"},{n:["flag-mc","monaco flag"],u:"1f1f2-1f1e8",a:"2.0"},{n:["flag-md","moldova flag"],u:"1f1f2-1f1e9",a:"2.0"},{n:["flag-me","montenegro flag"],u:"1f1f2-1f1ea",a:"2.0"},{n:["flag-mf","st. martin flag"],u:"1f1f2-1f1eb",a:"2.0"},{n:["flag-mg","madagascar flag"],u:"1f1f2-1f1ec",a:"2.0"},{n:["flag-mh","marshall islands flag"],u:"1f1f2-1f1ed",a:"2.0"},{n:["flag-mk","north macedonia flag"],u:"1f1f2-1f1f0",a:"2.0"},{n:["flag-ml","mali flag"],u:"1f1f2-1f1f1",a:"2.0"},{n:["flag-mm","myanmar (burma) flag"],u:"1f1f2-1f1f2",a:"2.0"},{n:["flag-mn","mongolia flag"],u:"1f1f2-1f1f3",a:"2.0"},{n:["flag-mo","macao sar china flag"],u:"1f1f2-1f1f4",a:"2.0"},{n:["flag-mp","northern mariana islands flag"],u:"1f1f2-1f1f5",a:"2.0"},{n:["flag-mq","martinique flag"],u:"1f1f2-1f1f6",a:"2.0"},{n:["flag-mr","mauritania flag"],u:"1f1f2-1f1f7",a:"2.0"},{n:["flag-ms","montserrat flag"],u:"1f1f2-1f1f8",a:"2.0"},{n:["flag-mt","malta flag"],u:"1f1f2-1f1f9",a:"2.0"},{n:["flag-mu","mauritius flag"],u:"1f1f2-1f1fa",a:"2.0"},{n:["flag-mv","maldives flag"],u:"1f1f2-1f1fb",a:"2.0"},{n:["flag-mw","malawi flag"],u:"1f1f2-1f1fc",a:"2.0"},{n:["flag-mx","mexico flag"],u:"1f1f2-1f1fd",a:"2.0"},{n:["flag-my","malaysia flag"],u:"1f1f2-1f1fe",a:"2.0"},{n:["flag-mz","mozambique flag"],u:"1f1f2-1f1ff",a:"2.0"},{n:["flag-na","namibia flag"],u:"1f1f3-1f1e6",a:"2.0"},{n:["flag-nc","new caledonia flag"],u:"1f1f3-1f1e8",a:"2.0"},{n:["flag-ne","niger flag"],u:"1f1f3-1f1ea",a:"2.0"},{n:["flag-nf","norfolk island flag"],u:"1f1f3-1f1eb",a:"2.0"},{n:["flag-ng","nigeria flag"],u:"1f1f3-1f1ec",a:"2.0"},{n:["flag-ni","nicaragua flag"],u:"1f1f3-1f1ee",a:"2.0"},{n:["flag-nl","netherlands flag"],u:"1f1f3-1f1f1",a:"2.0"},{n:["flag-no","norway flag"],u:"1f1f3-1f1f4",a:"2.0"},{n:["flag-np","nepal flag"],u:"1f1f3-1f1f5",a:"2.0"},{n:["flag-nr","nauru flag"],u:"1f1f3-1f1f7",a:"2.0"},{n:["flag-nu","niue flag"],u:"1f1f3-1f1fa",a:"2.0"},{n:["flag-nz","new zealand flag"],u:"1f1f3-1f1ff",a:"2.0"},{n:["flag-om","oman flag"],u:"1f1f4-1f1f2",a:"2.0"},{n:["flag-pa","panama flag"],u:"1f1f5-1f1e6",a:"2.0"},{n:["flag-pe","peru flag"],u:"1f1f5-1f1ea",a:"2.0"},{n:["flag-pf","french polynesia flag"],u:"1f1f5-1f1eb",a:"2.0"},{n:["flag-pg","papua new guinea flag"],u:"1f1f5-1f1ec",a:"2.0"},{n:["flag-ph","philippines flag"],u:"1f1f5-1f1ed",a:"2.0"},{n:["flag-pk","pakistan flag"],u:"1f1f5-1f1f0",a:"2.0"},{n:["flag-pl","poland flag"],u:"1f1f5-1f1f1",a:"2.0"},{n:["flag-pm","st. pierre & miquelon flag"],u:"1f1f5-1f1f2",a:"2.0"},{n:["flag-pn","pitcairn islands flag"],u:"1f1f5-1f1f3",a:"2.0"},{n:["flag-pr","puerto rico flag"],u:"1f1f5-1f1f7",a:"2.0"},{n:["flag-ps","palestinian territories flag"],u:"1f1f5-1f1f8",a:"2.0"},{n:["flag-pt","portugal flag"],u:"1f1f5-1f1f9",a:"2.0"},{n:["flag-pw","palau flag"],u:"1f1f5-1f1fc",a:"2.0"},{n:["flag-py","paraguay flag"],u:"1f1f5-1f1fe",a:"2.0"},{n:["flag-qa","qatar flag"],u:"1f1f6-1f1e6",a:"2.0"},{n:["flag-re","runion flag"],u:"1f1f7-1f1ea",a:"2.0"},{n:["flag-ro","romania flag"],u:"1f1f7-1f1f4",a:"2.0"},{n:["flag-rs","serbia flag"],u:"1f1f7-1f1f8",a:"2.0"},{n:["ru","flag-ru","russia flag"],u:"1f1f7-1f1fa",a:"0.6"},{n:["flag-rw","rwanda flag"],u:"1f1f7-1f1fc",a:"2.0"},{n:["flag-sa","saudi arabia flag"],u:"1f1f8-1f1e6",a:"2.0"},{n:["flag-sb","solomon islands flag"],u:"1f1f8-1f1e7",a:"2.0"},{n:["flag-sc","seychelles flag"],u:"1f1f8-1f1e8",a:"2.0"},{n:["flag-sd","sudan flag"],u:"1f1f8-1f1e9",a:"2.0"},{n:["flag-se","sweden flag"],u:"1f1f8-1f1ea",a:"2.0"},{n:["flag-sg","singapore flag"],u:"1f1f8-1f1ec",a:"2.0"},{n:["flag-sh","st. helena flag"],u:"1f1f8-1f1ed",a:"2.0"},{n:["flag-si","slovenia flag"],u:"1f1f8-1f1ee",a:"2.0"},{n:["flag-sj","svalbard & jan mayen flag"],u:"1f1f8-1f1ef",a:"2.0"},{n:["flag-sk","slovakia flag"],u:"1f1f8-1f1f0",a:"2.0"},{n:["flag-sl","sierra leone flag"],u:"1f1f8-1f1f1",a:"2.0"},{n:["flag-sm","san marino flag"],u:"1f1f8-1f1f2",a:"2.0"},{n:["flag-sn","senegal flag"],u:"1f1f8-1f1f3",a:"2.0"},{n:["flag-so","somalia flag"],u:"1f1f8-1f1f4",a:"2.0"},{n:["flag-sr","suriname flag"],u:"1f1f8-1f1f7",a:"2.0"},{n:["flag-ss","south sudan flag"],u:"1f1f8-1f1f8",a:"2.0"},{n:["flag-st","so tom & prncipe flag"],u:"1f1f8-1f1f9",a:"2.0"},{n:["flag-sv","el salvador flag"],u:"1f1f8-1f1fb",a:"2.0"},{n:["flag-sx","sint maarten flag"],u:"1f1f8-1f1fd",a:"2.0"},{n:["flag-sy","syria flag"],u:"1f1f8-1f1fe",a:"2.0"},{n:["flag-sz","eswatini flag"],u:"1f1f8-1f1ff",a:"2.0"},{n:["flag-ta","tristan da cunha flag"],u:"1f1f9-1f1e6",a:"2.0"},{n:["flag-tc","turks & caicos islands flag"],u:"1f1f9-1f1e8",a:"2.0"},{n:["flag-td","chad flag"],u:"1f1f9-1f1e9",a:"2.0"},{n:["flag-tf","french southern territories flag"],u:"1f1f9-1f1eb",a:"2.0"},{n:["flag-tg","togo flag"],u:"1f1f9-1f1ec",a:"2.0"},{n:["flag-th","thailand flag"],u:"1f1f9-1f1ed",a:"2.0"},{n:["flag-tj","tajikistan flag"],u:"1f1f9-1f1ef",a:"2.0"},{n:["flag-tk","tokelau flag"],u:"1f1f9-1f1f0",a:"2.0"},{n:["flag-tl","timor-leste flag"],u:"1f1f9-1f1f1",a:"2.0"},{n:["flag-tm","turkmenistan flag"],u:"1f1f9-1f1f2",a:"2.0"},{n:["flag-tn","tunisia flag"],u:"1f1f9-1f1f3",a:"2.0"},{n:["flag-to","tonga flag"],u:"1f1f9-1f1f4",a:"2.0"},{n:["flag-tr","turkey flag"],u:"1f1f9-1f1f7",a:"2.0"},{n:["flag-tt","trinidad & tobago flag"],u:"1f1f9-1f1f9",a:"2.0"},{n:["flag-tv","tuvalu flag"],u:"1f1f9-1f1fb",a:"2.0"},{n:["flag-tw","taiwan flag"],u:"1f1f9-1f1fc",a:"2.0"},{n:["flag-tz","tanzania flag"],u:"1f1f9-1f1ff",a:"2.0"},{n:["flag-ua","ukraine flag"],u:"1f1fa-1f1e6",a:"2.0"},{n:["flag-ug","uganda flag"],u:"1f1fa-1f1ec",a:"2.0"},{n:["flag-um","u.s. outlying islands flag"],u:"1f1fa-1f1f2",a:"2.0"},{n:["flag-un","united nations flag"],u:"1f1fa-1f1f3",a:"4.0"},{n:["us","flag-us","united states flag"],u:"1f1fa-1f1f8",a:"0.6"},{n:["flag-uy","uruguay flag"],u:"1f1fa-1f1fe",a:"2.0"},{n:["flag-uz","uzbekistan flag"],u:"1f1fa-1f1ff",a:"2.0"},{n:["flag-va","vatican city flag"],u:"1f1fb-1f1e6",a:"2.0"},{n:["flag-vc","st. vincent & grenadines flag"],u:"1f1fb-1f1e8",a:"2.0"},{n:["flag-ve","venezuela flag"],u:"1f1fb-1f1ea",a:"2.0"},{n:["flag-vg","british virgin islands flag"],u:"1f1fb-1f1ec",a:"2.0"},{n:["flag-vi","u.s. virgin islands flag"],u:"1f1fb-1f1ee",a:"2.0"},{n:["flag-vn","vietnam flag"],u:"1f1fb-1f1f3",a:"2.0"},{n:["flag-vu","vanuatu flag"],u:"1f1fb-1f1fa",a:"2.0"},{n:["flag-wf","wallis & futuna flag"],u:"1f1fc-1f1eb",a:"2.0"},{n:["flag-ws","samoa flag"],u:"1f1fc-1f1f8",a:"2.0"},{n:["flag-xk","kosovo flag"],u:"1f1fd-1f1f0",a:"2.0"},{n:["flag-ye","yemen flag"],u:"1f1fe-1f1ea",a:"2.0"},{n:["flag-yt","mayotte flag"],u:"1f1fe-1f1f9",a:"2.0"},{n:["flag-za","south africa flag"],u:"1f1ff-1f1e6",a:"2.0"},{n:["flag-zm","zambia flag"],u:"1f1ff-1f1f2",a:"2.0"},{n:["flag-zw","zimbabwe flag"],u:"1f1ff-1f1fc",a:"2.0"},{n:["england flag","flag-england"],u:"1f3f4-e0067-e0062-e0065-e006e-e0067-e007f",a:"5.0"},{n:["scotland flag","flag-scotland"],u:"1f3f4-e0067-e0062-e0073-e0063-e0074-e007f",a:"5.0"},{n:["wales flag","flag-wales"],u:"1f3f4-e0067-e0062-e0077-e006c-e0073-e007f",a:"5.0"}],$w={custom:xme,smileys_people:Cme,animals_nature:Mme,food_drink:Ame,travel_places:Tme,activities:Eme,objects:Ime,symbols:Lme,flags:Nme},_C=[Lc.NEUTRAL,Lc.LIGHT,Lc.MEDIUM_LIGHT,Lc.MEDIUM,Lc.MEDIUM_DARK,Lc.DARK],Dme=Object.entries(Lc).reduce(function(r,e){var t=e[0],n=e[1];return r[n]=t,r},{}),kme=_C.reduce(function(r,e){var t;return Object.assign(r,(t={},t[e]=e,t))},{}),jl;(function(r){r.name="n",r.unified="u",r.variations="v",r.added_in="a",r.imgUrl="imgUrl"})(jl||(jl={}));var pw={};setTimeout(function(){TA.reduce(function(r,e){return B7(e),r},pw)});function B7(r){var e=X_(r).flat().join("").toLowerCase().replace(/[^a-zA-Z\d]/g,"").split("");e.forEach(function(t){var n;pw[t]=(n=pw[t])!=null?n:{},pw[t][go(r)]=r})}function X_(r){var e;return(e=r[jl.name])!=null?e:[]}function Rme(r){return parseFloat(r[jl.added_in])}function u3(r){return r?X_(r)[0]:""}function Sk(r){var e=r.split("-"),t=e.splice(1,1),n=t[0];return kme[n]?e.join("-"):r}function go(r,e){var t,n=r[jl.unified];return!e||!mv(r)?n:(t=Ome(r,e))!=null?t:n}function Pme(r){var e;return(e=$w==null?void 0:$w[r])!=null?e:[]}function U7(r,e){return""+Sme(e)+r+".png"}function Q_(r){var e;return(e=r[jl.variations])!=null?e:[]}function mv(r){return Q_(r).length>0}function Ome(r,e){return e?Q_(r).find(function(t){return t.includes(e)}):go(r)}function z1(r){if(r){if(l1[r])return l1[r];var e=Sk(r);return l1[e]}}var TA=Object.values($w).flat();function Fme(r){$w[fr.CUSTOM].length=0,r.forEach(function(e){var t=Bme(e);$w[fr.CUSTOM].push(t),!l1[t[jl.unified]]&&(TA.push(t),l1[t[jl.unified]]=t,B7(t))})}function Bme(r){var e;return e={},e[jl.name]=r.names.map(function(t){return t.toLowerCase()}),e[jl.unified]=r.id.toLowerCase(),e[jl.added_in]="0",e[jl.imgUrl]=r.imgUrl,e}var l1={};setTimeout(function(){TA.reduce(function(r,e){return r[go(e)]=e,mv(e)&&Q_(e).forEach(function(t){r[t]=e}),r},l1)});function Ume(r){var e=r.split("-"),t=e[1];return _C.includes(t)?t:null}var jme=["2640-fe0f","2642-fe0f","2695-fe0f"],bC="Search",zme="No results found",j7=" found. Use up and down arrow keys to navigate.",Vme="1 result"+j7,Gme="%n results"+j7;function HB(r){var e,t;r===void 0&&(r={});var n=z7(),i=Object.assign(n.previewConfig,(e=r.previewConfig)!=null?e:{}),s=Object.assign(n,r),a=vme(r.categories,{suggestionMode:s.suggestedEmojisMode});s.hiddenEmojis.forEach(function(l){s.unicodeToHide.add(l)}),Fme((t=s.customEmojis)!=null?t:[]);var o=s.searchDisabled?j1.PREVIEW:s.skinTonePickerLocation;return Bi({},s,{categories:a,previewConfig:i,skinTonePickerLocation:o})}function z7(){return{autoFocusSearch:!0,categories:O7(),className:"",customEmojis:[],defaultSkinTone:Lc.NEUTRAL,emojiStyle:ul.APPLE,emojiVersion:null,getEmojiUrl:U7,height:450,lazyLoadEmojis:!1,previewConfig:Bi({},Hme),searchDisabled:!1,searchPlaceHolder:bC,searchPlaceholder:bC,skinTonePickerLocation:j1.SEARCH,skinTonesDisabled:!1,style:{},suggestedEmojisMode:qw.FREQUENT,theme:Zw.LIGHT,unicodeToHide:new Set(jme),width:350,reactionsDefaultOpen:!1,reactions:pme,open:!0,allowExpandReactions:!0,hiddenEmojis:[]}}var Hme={defaultEmoji:"1f60a",defaultCaption:"What's your mood?",showPreview:!0},Wme=["children"],V7=P.createContext(z7());function Yme(r){var e=r.children,t=k7(r,Wme),n=Jme(t);return P.createElement(V7.Provider,{value:n},e)}function Jme(r){var e,t=P.useState(function(){return HB(r)}),n=t[0],i=t[1];return P.useEffect(function(){R7(n,r)||i(HB(r))},[(e=r.customEmojis)==null?void 0:e.length,r.open,r.emojiVersion,r.reactionsDefaultOpen,r.searchPlaceHolder,r.searchPlaceholder,r.defaultSkinTone,r.skinTonesDisabled,r.autoFocusSearch,r.emojiStyle,r.theme,r.suggestedEmojisMode,r.lazyLoadEmojis,r.className,r.height,r.width,r.searchDisabled,r.skinTonePickerLocation,r.allowExpandReactions]),n}function Ki(){return P.useContext(V7)}var G7=ir.createContext({});function H7(){var r=ir.useContext(G7);return r}function Xme(r){var e=ir.useRef({onEmojiClick:r.onEmojiClick||C2,onReactionClick:r.onReactionClick||r.onEmojiClick,onSkinToneChange:r.onSkinToneChange||C2});return ir.useEffect(function(){e.current.onEmojiClick=r.onEmojiClick||C2,e.current.onReactionClick=r.onReactionClick||r.onEmojiClick},[r.onEmojiClick,r.onReactionClick]),ir.useEffect(function(){e.current.onSkinToneChange=r.onSkinToneChange||C2},[r.onSkinToneChange]),e}function C2(){}var e_;(function(r){r.REACTIONS="reactions",r.PICKER="picker"})(e_||(e_={}));function Qme(){var r,e=Ki(),t=e.searchPlaceHolder,n=e.searchPlaceholder;return(r=[t,n].find(function(i){return i!==bC}))!=null?r:bC}function Kme(){var r=Ki(),e=r.defaultSkinTone;return e}function W7(){var r=Ki(),e=r.allowExpandReactions;return e}function Y7(){var r=Ki(),e=r.skinTonesDisabled;return e}function ug(){var r=Ki(),e=r.emojiStyle;return e}function qme(){var r=Ki(),e=r.autoFocusSearch;return e}function J7(){var r=Ki(),e=r.categories;return e}function Zme(){var r=Ki(),e=r.customEmojis;return e}function $me(){var r=Ki(),e=r.open;return e}function ege(r){var e,t=H7(),n=t.current,i=(e=r===e_.REACTIONS?n.onReactionClick:n.onEmojiClick)!=null?e:n.onEmojiClick;return i||function(){}}function tge(){var r=H7(),e=r.current;return e.onSkinToneChange||function(){}}function X7(){var r=Ki(),e=r.previewConfig;return e}function nge(){var r=Ki(),e=r.theme;return e}function rge(){var r=Ki(),e=r.suggestedEmojisMode;return e}function ige(){var r=Ki(),e=r.lazyLoadEmojis;return e}function sge(){var r=Ki(),e=r.className;return e}function age(){var r=Ki(),e=r.height,t=r.width,n=r.style;return Bi({height:WB(e),width:WB(t)},n)}function oge(){var r=Ki(),e=r.reactionsDefaultOpen;return e}function lge(){var r=Ki(),e=r.emojiVersion;return e}function Q7(){var r=Ki(),e=r.searchDisabled;return e}function K7(){var r=Ki(),e=r.skinTonePickerLocation;return e}function cge(){var r=Ki(),e=r.unicodeToHide;return e}function uge(){var r=Ki(),e=r.reactions;return e}function fg(){var r=Ki(),e=r.getEmojiUrl;return e}function WB(r){return typeof r=="number"?r+"px":r}function fge(r){var e=r>0,t=r>1;return e?t?Gme.replace("%n",r.toString()):Vme:zme}function YB(r,e){e===void 0&&(e=0);var t=P.useState(r),n=t[0],i=t[1],s=P.useRef(null);function a(o){return new Promise(function(l){var c;s.current&&clearTimeout(s.current),s.current=(c=window)==null?void 0:c.setTimeout(function(){i(o),l(o)},e)})}return[n,a]}function dge(){var r=cge();return function(e){return r.has(e)}}function q7(){var r=P.useRef({}),e=lge();return P.useMemo(function(){var t=parseFloat(""+e);return!e||Number.isNaN(t)?r.current:TA.reduce(function(n,i){return pge(i,t)&&(n[go(i)]=!0),n},r.current)},[e])}function hge(){var r=q7(),e=dge();return function(n){var i=Sk(go(n));return!!(r[i]||e(i))}}function pge(r,e){return Rme(r)>e}function mge(r){P.useEffect(function(){r(!0)},[r])}function gge(r){var e=r.children,t=q7(),n=Kme(),i=oge(),s=P.useRef(pw),a=P.useRef(!1),o=P.useRef(!1),l=P.useRef(t),c=YB(Date.now(),200),u=YB("",100),f=P.useState(!1),d=P.useState(n),p=P.useState(null),g=P.useState(new Set),_=P.useState(null),w=P.useState(i),b=P.useState(!1),C=b[0],M=b[1];return mge(M),P.createElement(Wl.Provider,{value:{activeCategoryState:p,activeSkinTone:d,disallowClickRef:a,disallowMouseRef:o,disallowedEmojisRef:l,emojiVariationPickerState:_,emojisThatFailedToLoadState:g,filterRef:s,isPastInitialLoad:C,searchTerm:u,skinToneFanOpenState:f,suggestedUpdateState:c,reactionsModeState:w}},e)}var Wl=P.createContext({activeCategoryState:[null,function(){}],activeSkinTone:[Lc.NEUTRAL,function(){}],disallowClickRef:{current:!1},disallowMouseRef:{current:!1},disallowedEmojisRef:{current:{}},emojiVariationPickerState:[null,function(){}],emojisThatFailedToLoadState:[new Set,function(){}],filterRef:{current:{}},isPastInitialLoad:!0,searchTerm:["",function(){return new Promise(function(){})}],skinToneFanOpenState:[!1,function(){}],suggestedUpdateState:[Date.now(),function(){}],reactionsModeState:[!1,function(){}]});function xk(){var r=P.useContext(Wl),e=r.filterRef;return e}function vge(){var r=P.useContext(Wl),e=r.disallowClickRef;return e}function Ck(){var r=P.useContext(Wl),e=r.disallowMouseRef;return e}function EA(){var r=P.useContext(Wl),e=r.reactionsModeState;return e}function IA(){var r=P.useContext(Wl),e=r.searchTerm;return e}function Mk(){var r=P.useContext(Wl),e=r.activeSkinTone;return e}function Z7(){var r=P.useContext(Wl),e=r.emojisThatFailedToLoadState;return e}function yge(){var r=P.useContext(Wl),e=r.isPastInitialLoad;return e}function gv(){var r=P.useContext(Wl),e=r.emojiVariationPickerState;return e}function K_(){var r=P.useContext(Wl),e=r.skinToneFanOpenState;return e}function $7(){var r=P.useContext(Wl),e=r.suggestedUpdateState,t=e[0],n=e[1];return[t,function(){n(Date.now())}]}function LA(){var r=IA(),e=r[0];return!!e}function wl(r){r&&requestAnimationFrame(function(){r.focus()})}function eW(r){if(r){var e=r.previousElementSibling;wl(e)}}function tW(r){if(r){var e=r.nextElementSibling;wl(e)}}function nW(r){if(r){var e=r.firstElementChild;wl(e)}}function t_(){return document.activeElement}function wge(r){var e=r.children,t=P.useRef(null),n=P.useRef(null),i=P.useRef(null),s=P.useRef(null),a=P.useRef(null),o=P.useRef(null),l=P.useRef(null),c=P.useRef(null);return P.createElement(rW.Provider,{value:{AnchoredEmojiRef:n,BodyRef:i,CategoryNavigationRef:o,PickerMainRef:t,SearchInputRef:s,SkinTonePickerRef:a,VariationPickerRef:l,ReactionsRef:c}},e)}var rW=P.createContext({AnchoredEmojiRef:P.createRef(),BodyRef:P.createRef(),CategoryNavigationRef:P.createRef(),PickerMainRef:P.createRef(),SearchInputRef:P.createRef(),SkinTonePickerRef:P.createRef(),VariationPickerRef:P.createRef(),ReactionsRef:P.createRef()});function Jh(){return P.useContext(rW)}function q_(){return Jh().PickerMainRef}function NA(){return Jh().AnchoredEmojiRef}function iW(){var r=NA();return function(e){e===null&&r.current!==null&&wl(r.current),r.current=e}}function Yl(){return Jh().BodyRef}function _ge(){return Jh().ReactionsRef}function Xh(){return Jh().SearchInputRef}function Ak(){return Jh().SkinTonePickerRef}function Tk(){return Jh().CategoryNavigationRef}function bge(){return Jh().VariationPickerRef}function sW(r,e){e===void 0&&(e=0);var t=_W(r);t&&requestAnimationFrame(function(){t.scrollTop=e})}function Sge(r,e){var t=_W(r);t&&requestAnimationFrame(function(){t.scrollTop=t.scrollTop+e})}function xge(){var r=Yl();return P.useCallback(function(e){requestAnimationFrame(function(){r.current&&(r.current.scrollTop=e)})},[r])}function DA(r){if(!(!r||!h0e(r))&&!r.closest(Ja(hr.variationPicker))){var e=SW(r),t=bW(r);Sge(e,-(kk(Qh(r))-t))}}function kA(r){var e=Fk(r);wl(e),DA(e)}function Cge(r){var e=Fk(r);wl(e),e==null||e.click()}function Mge(r){wl(AW(r))}function Age(r){if(r){var e=TW(r);if(!e)return kA(PA(r));wl(e),DA(e)}}function Tge(r){if(r){var e=Ok(r);if(!e)return Mge(RA(r));wl(e),DA(e)}}function Ege(r,e){if(r){var t=Lge(r);if(!t)return e();wl(t),DA(t)}}function Ige(r){if(r){var e=Nge(r);return wl(e)}}function Lge(r){if(!r)return null;var e=EW(r),t=Qh(e),n=gW(e,r),i=vW(e,r),s=mW(e,r);if(i===0){var a=RA(t);return a?yW(V1(a),-1,s,n):null}return o0e(V1(e),i,s,n)}function Nge(r){if(!r)return null;var e=EW(r),t=Qh(e),n=gW(e,r),i=vW(e,r),s=mW(e,r);if(!i0e(e,r)){var a=PA(t);return a?yW(V1(a),0,s,n):null}var o=a0e(V1(e),i,s,n);return o}function dg(){var r=gv(),e=r[0],t=r[1],n=K_(),i=n[0],s=n[1],a=P.useCallback(function(){e&&t(null),i&&s(!1)},[e,i,t,s]);return a}function aW(){var r=gv(),e=r[0],t=K_(),n=t[0];return function(){return!!e||n}}function Dge(){var r=Ck();return function(){r.current=!0}}function oW(){var r=Ck();return function(){r.current=!1}}function lW(){var r=Ck();return function(){return r.current}}function kge(){var r=Yl(),e=oW(),t=lW();P.useEffect(function(){var n=r.current;n==null||n.addEventListener("mousemove",i,{passive:!0});function i(){t()&&e()}return function(){n==null||n.removeEventListener("mousemove",i)}},[r,e,t])}function hg(){var r=Xh();return P.useCallback(function(){wl(r.current)},[r])}function Rge(){var r=Ak();return P.useCallback(function(){r.current&&nW(r.current)},[r])}function cW(){var r=Tk();return P.useCallback(function(){r.current&&nW(r.current)},[r])}function Pge(){var r=xk();return function e(t){if(typeof t=="function")return e(t(r.current));r.current=t}}function uW(){var r=Ek(),e=Xh(),t=hg();return function(){e.current&&(e.current.value=""),r(""),t()}}function Oge(){var r=Xh(),e=Ek();return function(n){r.current?(r.current.value=""+r.current.value+n,e(f3(r.current.value))):e(f3(n))}}function Fge(){var r=Xh(),e=xk(),t=Pge(),n=Ek(),i=IA(),s=i[0],a=Gge(e.current,s);return{onChange:o,searchTerm:s,SearchInputRef:r,statusSearchResults:a};function o(l){var c=e.current,u=l.toLowerCase();if(c!=null&&c[u]||u.length<=1)return n(u);var f=Vge(u,c);if(!f)return n(u);t(function(d){var p;return Object.assign(d,(p={},p[u]=Bge(f,u),p))}),n(u)}}function Ek(){var r=IA(),e=r[1],t=q_();return function(i){requestAnimationFrame(function(){e(i&&(i==null?void 0:i.toLowerCase())).then(function(){sW(t.current,0)})})}}function Bge(r,e){var t={};for(var n in r){var i=r[n];Uge(i,e)&&(t[n]=i)}return t}function Uge(r,e){return X_(r).some(function(t){return t.includes(e)})}function jge(){var r=xk(),e=r.current,t=IA(),n=t[0];return function(i){return zge(i,e,n)}}function zge(r,e,t){var n;return!e||!t?!1:!((n=e[t])!=null&&n[r])}function Vge(r,e){if(!e)return null;if(e[r])return e[r];var t=Object.keys(e).sort(function(n,i){return i.length-n.length}).find(function(n){return r.includes(n)});return t?e[t]:null}function f3(r){return!r||typeof r!="string"?"":r.trim().toLowerCase()}function Gge(r,e){var t;if(!(r!=null&&r[e]))return"";var n=((t=Object.entries(r==null?void 0:r[e]))==null?void 0:t.length)||0;return fge(n)}function fW(){var r=iW(),e=gv(),t=e[1];return function(i){var s=Dk(i),a=s[0];a&&(r(i),t(a))}}function Ik(){var r=K7();return r===j1.SEARCH}function dW(){var r=K7();return r===j1.PREVIEW}var bs;(function(r){r.ArrowDown="ArrowDown",r.ArrowUp="ArrowUp",r.ArrowLeft="ArrowLeft",r.ArrowRight="ArrowRight",r.Escape="Escape",r.Enter="Enter",r.Space=" "})(bs||(bs={}));function Hge(){Wge(),Yge(),Jge(),Xge(),Qge()}function Wge(){var r=q_(),e=uW(),t=xge(),n=Xh(),i=hg(),s=aW(),a=Dge(),o=dg(),l=P.useMemo(function(){return function(u){var f=u.key;switch(a(),f){case bs.Escape:if(u.preventDefault(),s()){o();return}e(),t(0),i();break}}},[t,e,o,i,s,a]);P.useEffect(function(){var c=r.current;if(c)return c.addEventListener("keydown",l),function(){c.removeEventListener("keydown",l)}},[r,n,t,l])}function Yge(){var r=Rge(),e=q_(),t=Yl(),n=Xh(),i=K_(),s=i[1],a=hW(),o=Ik(),l=P.useMemo(function(){return function(u){var f=u.key;switch(f){case bs.ArrowRight:if(!o)return;u.preventDefault(),s(!0),r();break;case bs.ArrowDown:u.preventDefault(),a();break;case bs.Enter:u.preventDefault(),Cge(t.current);break}}},[r,a,s,t,o]);P.useEffect(function(){var c=n.current;if(c)return c.addEventListener("keydown",l),function(){c.removeEventListener("keydown",l)}},[e,n,l])}function Jge(){var r=Ak(),e=hg(),t=Xh(),n=hW(),i=K_(),s=i[0],a=i[1],o=dW(),l=Ik(),c=Lk(),u=P.useMemo(function(){return function(d){var p=d.key;if(l)switch(p){case bs.ArrowLeft:if(d.preventDefault(),!s)return e();JB(e);break;case bs.ArrowRight:if(d.preventDefault(),!s)return e();XB();break;case bs.ArrowDown:d.preventDefault(),s&&a(!1),n();break;default:c(d);break}if(o)switch(p){case bs.ArrowUp:if(d.preventDefault(),!s)return e();JB(e);break;case bs.ArrowDown:if(d.preventDefault(),!s)return e();XB();break;default:c(d);break}}},[s,e,a,n,c,o,l]);P.useEffect(function(){var f=r.current;if(f)return f.addEventListener("keydown",u),function(){f.removeEventListener("keydown",u)}},[r,t,s,u])}function Xge(){var r=hg(),e=Tk(),t=Yl(),n=Lk(),i=P.useMemo(function(){return function(a){var o=a.key;switch(o){case bs.ArrowUp:a.preventDefault(),r();break;case bs.ArrowRight:a.preventDefault(),tW(t_());break;case bs.ArrowLeft:a.preventDefault(),eW(t_());break;case bs.ArrowDown:a.preventDefault(),kA(t.current);break;default:n(a);break}}},[t,r,n]);P.useEffect(function(){var s=e.current;if(s)return s.addEventListener("keydown",i),function(){s.removeEventListener("keydown",i)}},[e,t,i])}function Qge(){var r=Yl(),e=Kge(),t=fW(),n=aW(),i=dg(),s=Lk(),a=P.useMemo(function(){return function(l){var c=l.key,u=Bc(t_());switch(c){case bs.ArrowRight:l.preventDefault(),Age(u);break;case bs.ArrowLeft:l.preventDefault(),Tge(u);break;case bs.ArrowDown:if(l.preventDefault(),n()){i();break}Ige(u);break;case bs.ArrowUp:if(l.preventDefault(),n()){i();break}Ege(u,e);break;case bs.Space:l.preventDefault(),t(l.target);break;default:s(l);break}}},[e,s,t,n,i]);P.useEffect(function(){var o=r.current;if(o)return o.addEventListener("keydown",a),function(){o.removeEventListener("keydown",a)}},[r,a])}function hW(){var r=cW(),e=LA(),t=Yl();return P.useCallback(function(){return e?kA(t.current):r()},[t,r,e])}function Kge(){var r=hg(),e=cW(),t=LA();return P.useCallback(function(){return t?r():e()},[r,t,e])}function JB(r){var e=t_();e&&(c0e(e)||r(),tW(e))}function XB(){var r=t_();r&&eW(r)}function Lk(){var r=Oge(),e=hg(),t=Q7(),n=dg();return function(s){var a=s.key;qge(s)||t||a.match(/(^[a-zA-Z0-9]$){1}/)&&(s.preventDefault(),n(),e(),r(a))}}function qge(r){var e=r.metaKey,t=r.ctrlKey,n=r.altKey;return e||t||n}function Zge(r,e,t){if(e&&t!==ul.NATIVE){var n=go(e);QB.has(n)||(Q_(e).forEach(function(i){var s=r(i,t);$ge(s)}),QB.add(n))}}var QB=new Set;function $ge(r){var e=new Image;e.src=r}function e0e(){var r=Yl(),e=ug(),t=fg();P.useEffect(function(){if(e===ul.NATIVE)return;var n=r.current;return n==null||n.addEventListener("focusin",i),function(){n==null||n.removeEventListener("focusin",i)};function i(s){var a=Bc(s.target);if(a){var o=Dk(a),l=o[0];l&&mv(l)&&Zge(t,l,e)}}},[r,e,t])}var t0e=["width","height"],pW=40;function n0e(r){var e=r.children;return P.createElement(gge,null,P.createElement(r0e,null,e))}function r0e(r){var e,t=r.children,n=EA(),i=n[0],s=nge(),a=LA(),o=q_(),l=sge(),c=age();Hge(),e0e();var u=c||{},f=u.width,d=u.height,p=k7(u,t0e);return P.createElement("aside",{className:br(wy.main,wy.baseVariables,s===Zw.DARK&&wy.darkTheme,s===Zw.AUTO&&wy.autoThemeDark,(e={},e[hr.searchActive]=a,e),i&&wy.reactionsMenu,l),ref:o,style:Bi({},p,!i&&{height:d,width:f})},t)}var KB={"--epr-emoji-variation-picker-bg-color":"var(--epr-dark-emoji-variation-picker-bg-color)","--epr-hover-bg-color-reduced-opacity":"var(--epr-dark-hover-bg-color-reduced-opacity)","--epr-highlight-color":"var(--epr-dark-highlight-color)","--epr-text-color":"var(--epr-dark-text-color)","--epr-hover-bg-color":"var(--epr-dark-hover-bg-color)","--epr-focus-bg-color":"var(--epr-dark-focus-bg-color)","--epr-search-input-bg-color":"var(--epr-dark-search-input-bg-color)","--epr-category-label-bg-color":"var(--epr-dark-category-label-bg-color)","--epr-picker-border-color":"var(--epr-dark-picker-border-color)","--epr-bg-color":"var(--epr-dark-bg-color)","--epr-reactions-bg-color":"var(--epr-dark-reactions-bg-color)","--epr-search-input-bg-color-active":"var(--epr-dark-search-input-bg-color-active)","--epr-emoji-variation-indicator-color":"var(--epr-dark-emoji-variation-indicator-color)","--epr-category-icon-active-color":"var(--epr-dark-category-icon-active-color)","--epr-skin-tone-picker-menu-color":"var(--epr-dark-skin-tone-picker-menu-color)","--epr-skin-tone-outer-border-color":"var(--epr-dark-skin-tone-outer-border-color)","--epr-skin-tone-inner-border-color":"var(--epr-dark-skin-tone-inner-border-color)"},wy=Ei.create({main:{".":["epr-main",hr.emojiPicker],position:"relative",display:"flex",flexDirection:"column",borderWidth:"1px",borderStyle:"solid",borderRadius:"var(--epr-picker-border-radius)",borderColor:"var(--epr-picker-border-color)",backgroundColor:"var(--epr-bg-color)",overflow:"hidden",transition:"all 0.3s ease-in-out, background-color 0.1s ease-in-out","*":{boxSizing:"border-box",fontFamily:"sans-serif"}},baseVariables:{"--":{"--epr-highlight-color":"#007aeb","--epr-hover-bg-color":"#e5f0fa","--epr-hover-bg-color-reduced-opacity":"#e5f0fa80","--epr-focus-bg-color":"#e0f0ff","--epr-text-color":"#858585","--epr-search-input-bg-color":"#f6f6f6","--epr-picker-border-color":"#e7e7e7","--epr-bg-color":"#fff","--epr-reactions-bg-color":"#ffffff90","--epr-category-icon-active-color":"#6aa8de","--epr-skin-tone-picker-menu-color":"#ffffff95","--epr-skin-tone-outer-border-color":"#555555","--epr-skin-tone-inner-border-color":"var(--epr-bg-color)","--epr-horizontal-padding":"10px","--epr-picker-border-radius":"8px","--epr-search-border-color":"var(--epr-highlight-color)","--epr-header-padding":"15px var(--epr-horizontal-padding)","--epr-active-skin-tone-indicator-border-color":"var(--epr-highlight-color)","--epr-active-skin-hover-color":"var(--epr-hover-bg-color)","--epr-search-input-bg-color-active":"var(--epr-search-input-bg-color)","--epr-search-input-padding":"0 30px","--epr-search-input-border-radius":"8px","--epr-search-input-height":"40px","--epr-search-input-text-color":"var(--epr-text-color)","--epr-search-input-placeholder-color":"var(--epr-text-color)","--epr-search-bar-inner-padding":"var(--epr-horizontal-padding)","--epr-category-navigation-button-size":"30px","--epr-emoji-variation-picker-height":"45px","--epr-emoji-variation-picker-bg-color":"var(--epr-bg-color)","--epr-preview-height":"70px","--epr-preview-text-size":"14px","--epr-preview-text-padding":"0 var(--epr-horizontal-padding)","--epr-preview-border-color":"var(--epr-picker-border-color)","--epr-preview-text-color":"var(--epr-text-color)","--epr-category-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-bg-color":"#ffffffe6","--epr-category-label-text-color":"var(--epr-text-color)","--epr-category-label-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-height":pW+"px","--epr-emoji-size":"30px","--epr-emoji-padding":"5px","--epr-emoji-fullsize":"calc(var(--epr-emoji-size) + var(--epr-emoji-padding) * 2)","--epr-emoji-hover-color":"var(--epr-hover-bg-color)","--epr-emoji-variation-indicator-color":"var(--epr-picker-border-color)","--epr-emoji-variation-indicator-color-hover":"var(--epr-text-color)","--epr-header-overlay-z-index":"3","--epr-emoji-variations-indictator-z-index":"1","--epr-category-label-z-index":"2","--epr-skin-variation-picker-z-index":"5","--epr-preview-z-index":"6","--epr-dark":"#000","--epr-dark-emoji-variation-picker-bg-color":"var(--epr-dark)","--epr-dark-highlight-color":"#c0c0c0","--epr-dark-text-color":"var(--epr-highlight-color)","--epr-dark-hover-bg-color":"#363636f6","--epr-dark-hover-bg-color-reduced-opacity":"#36363680","--epr-dark-focus-bg-color":"#474747","--epr-dark-search-input-bg-color":"#333333","--epr-dark-category-label-bg-color":"#222222e6","--epr-dark-picker-border-color":"#151617","--epr-dark-bg-color":"#222222","--epr-dark-reactions-bg-color":"#22222290","--epr-dark-search-input-bg-color-active":"var(--epr-dark)","--epr-dark-emoji-variation-indicator-color":"#444","--epr-dark-category-icon-active-color":"#3271b7","--epr-dark-skin-tone-picker-menu-color":"#22222295","--epr-dark-skin-tone-outer-border-color":"var(--epr-dark-picker-border-color)","--epr-dark-skin-tone-inner-border-color":"#FFFFFF"}},autoThemeDark:{".":hr.autoTheme,"@media (prefers-color-scheme: dark)":{"--":KB}},darkTheme:{".":hr.darkTheme,"--":KB},reactionsMenu:{".":"epr-reactions",height:"50px",display:"inline-flex",backgroundColor:"var(--epr-reactions-bg-color)",backdropFilter:"blur(8px)","--":{"--epr-picker-border-radius":"50px"}}});function mW(r,e){if(!r||!e)return 0;var t=r.getBoundingClientRect().width,n=e.getBoundingClientRect().width;return Math.floor(t/n)}function gW(r,e){if(!r||!e)return 0;var t=e.getBoundingClientRect().width,n=e.getBoundingClientRect().left,i=r.getBoundingClientRect().left;return Math.floor((n-i)/t)}function vW(r,e){if(!r||!e)return 0;var t=e.getBoundingClientRect().height,n=e.getBoundingClientRect().top,i=r.getBoundingClientRect().top;return Math.round((n-i)/t)}function i0e(r,e){if(!r||!e)return!1;var t=e.getBoundingClientRect().height,n=e.getBoundingClientRect().top,i=r.getBoundingClientRect().top,s=r.getBoundingClientRect().height;return Math.round(n-i+t)<s}function Nk(r,e,t){if(e===-1){var n=Math.floor((r.length-1)/t),i=n*t,s=r.length-1;return r.slice(i,s+1)}return r.slice(e*t,(e+1)*t)}function s0e(r,e,t){var n=e+1;return n*t>r.length?[]:Nk(r,n,t)}function yW(r,e,t,n){var i=Nk(r,e,t);return i[n]||i[i.length-1]||null}function a0e(r,e,t,n){var i=s0e(r,e,t);return i[n]||i[i.length-1]||null}function o0e(r,e,t,n){var i=Nk(r,e-1,t);return i[n]||i[i.length-1]||null}function l0e(r,e,t){if(!r||!e.length)return null;var n=r.getBoundingClientRect().top,i=r.getBoundingClientRect().bottom,s=n+u0e(r),a=e.find(function(o){var l=o.getBoundingClientRect().top,c=o.getBoundingClientRect().bottom,u=o.clientHeight*t,f=l+u,d=c-u;return f<s?!1:f>=n&&f<=i||d>=n&&d<=i});return a||null}function c0e(r){return!!r.nextElementSibling}function u0e(r){for(var e=Array.from(r.querySelectorAll(Ja(hr.label))),t=0,n=e;t<n.length;t++){var i=n[t],s=i.getBoundingClientRect().height;if(s>0)return s}return pW}var SC="button"+Ja(hr.emoji),f0e=[SC,Ja(hr.visible),":not("+Ja(hr.hidden)+")"].join("");function Bc(r){var e;return(e=r==null?void 0:r.closest(SC))!=null?e:null}function Dk(r){var e=xW(r),t=Rk(r);if(!e)return[];var n=z1(t??e);return n?[n,t]:[]}function d0e(r){var e;return!!(r!=null&&r.matches(SC)||!(r==null||(e=r.parentElement)==null)&&e.matches(SC))}function qB(r){var e;return(e=r==null?void 0:r.clientHeight)!=null?e:0}function wW(r){if(!r)return 0;var e=Bc(r),t=Qh(e),n=kk(t);return ZB(e)+ZB(t)+n}function kk(r){var e,t;if(!r)return 0;var n=r.querySelector(Ja(hr.categoryContent));return((e=r==null?void 0:r.clientHeight)!=null?e:0)-((t=n==null?void 0:n.clientHeight)!=null?t:0)}function h0e(r){return r?bW(r)<kk(Qh(r)):!1}function _W(r){return r?r.matches(Ja(hr.scrollBody))?r:r.querySelector(Ja(hr.scrollBody)):null}function bW(r){var e,t;return r?wW(r)-((e=(t=SW(r))==null?void 0:t.scrollTop)!=null?e:0):0}function SW(r){var e;return r&&(e=r.closest(Ja(hr.scrollBody)))!=null?e:null}function p0e(r){var e=Bc(r),t=Qh(e);return $B(e)+$B(t)}function ZB(r){var e;return(e=r==null?void 0:r.offsetTop)!=null?e:0}function $B(r){var e;return(e=r==null?void 0:r.offsetLeft)!=null?e:0}function Rk(r){var e;return(e=m0e(Bc(r),"unified"))!=null?e:null}function xW(r){var e=Rk(r);return e?Sk(e):null}function CW(r){return r?{unified:Rk(r),originalUnified:xW(r)}:{unified:null,originalUnified:null}}function m0e(r,e){var t;return(t=g0e(r)[e])!=null?t:null}function g0e(r){var e;return(e=r==null?void 0:r.dataset)!=null?e:{}}function Pk(r){return r.classList.contains(hr.visible)}function MW(r){return r?r.classList.contains(hr.hidden):!0}function V1(r){return r?Array.from(r.querySelectorAll(f0e)):[]}function AW(r){if(!r)return null;var e=V1(r),t=e.slice(-1),n=t[0];return n?Pk(n)?n:Ok(n):null}function TW(r){var e=r.nextElementSibling;return e?Pk(e)?e:TW(e):Fk(PA(r))}function Ok(r){var e=r.previousElementSibling;return e?Pk(e)?e:Ok(e):AW(RA(r))}function Fk(r){if(!r)return null;var e=V1(r);return l0e(r,e,.1)}function RA(r){var e=Qh(r);if(!e)return null;var t=e.previousElementSibling;return t?MW(t)?RA(t):t:null}function PA(r){var e=Qh(r);if(!e)return null;var t=e.nextElementSibling;return t?MW(t)?PA(t):t:null}function Qh(r){return r?r.closest(Ja(hr.category)):null}function EW(r){return r?r.closest(Ja(hr.categoryContent)):null}function IW(r){return r.split("-").map(function(e){return String.fromCodePoint(parseInt(e,16))}).join("")}var LW="epr_suggested";function NW(r){try{var e,t,n;if(!((e=window)!=null&&e.localStorage))return[];var i=JSON.parse((t=(n=window)==null?void 0:n.localStorage.getItem(LW))!=null?t:"[]");return r===qw.FREQUENT?i.sort(function(s,a){return a.count-s.count}):i}catch{return[]}}function v0e(r,e){var t=NW(),n=go(r,e),i=go(r),s=t.find(function(l){var c=l.unified;return c===n}),a;s?a=[s].concat(t.filter(function(l){return l!==s})):(s={unified:n,original:i,count:0},a=[s].concat(t)),s.count++,a.length=Math.min(a.length,14);try{var o;(o=window)==null||o.localStorage.setItem(LW,JSON.stringify(a))}catch{}}function y0e(r){return r.category===fr.CUSTOM}function DW(r){return r.imgUrl!==void 0}function kW(r,e){var t=P.useRef(),n=fW(),i=vge(),s=gv(),a=s[1],o=dg(),l=Mk(),c=l[0],u=ege(e),f=$7(),d=f[1],p=fg(),g=ug(),_=P.useCallback(function(M){if(!i.current){o();var A=e9(M),k=A[0],O=A[1];if(!(!k||!O)){var R=Ume(O)||c;d(),v0e(k,R),u(w0e(k,R,g,p),M)}}},[c,o,i,u,d,p,g]),w=P.useCallback(function(M){var A;t.current&&clearTimeout(t.current);var k=e9(M),O=k[0];!O||!mv(O)||(t.current=(A=window)==null?void 0:A.setTimeout(function(){i.current=!0,t.current=void 0,o(),n(M.target),a(O)},500))},[i,o,n,a]),b=P.useCallback(function(){t.current?(clearTimeout(t.current),t.current=void 0):i.current&&requestAnimationFrame(function(){i.current=!1})},[i]);P.useEffect(function(){if(r.current){var C=r.current;return C.addEventListener("click",_,{passive:!0}),C.addEventListener("mousedown",w,{passive:!0}),C.addEventListener("mouseup",b,{passive:!0}),function(){C==null||C.removeEventListener("click",_),C==null||C.removeEventListener("mousedown",w),C==null||C.removeEventListener("mouseup",b)}}},[r,_,w,b])}function e9(r){var e=r==null?void 0:r.target;return d0e(e)?Dk(e):[]}function w0e(r,e,t,n){var i=X_(r);if(DW(r)){var s=go(r);return{activeSkinTone:e,emoji:s,getImageUrl:function(){return r.imgUrl},imageUrl:r.imgUrl,isCustom:!0,names:i,unified:s,unifiedWithoutSkinTone:s}}var a=go(r,e);return{activeSkinTone:e,emoji:IW(a),getImageUrl:function(l){return l===void 0&&(l=t??ul.APPLE),n(a,l)},imageUrl:n(a,t??ul.APPLE),isCustom:!1,names:i,unified:a,unifiedWithoutSkinTone:go(r)}}function Z_(r){return P.createElement("button",Object.assign({type:"button"},r,{className:br(_0e.button,r.className)}),r.children)}var _0e=Ei.create({button:{".":"epr-btn",cursor:"pointer",border:"0",background:"none",outline:"none"}});function b0e(r){var e,t=r.emojiNames,n=r.unified,i=r.hidden,s=r.hiddenOnSearch,a=r.showVariations,o=a===void 0?!0:a,l=r.hasVariations,c=r.children,u=r.className,f=r.noBackground,d=f===void 0?!1:f;return P.createElement(Z_,{className:br(i4.emoji,i&&_k.hidden,s&&cg.hiddenOnSearch,(e={},e[hr.visible]=!i&&!s,e),!!(l&&o)&&i4.hasVariations,d&&i4.noBackground,u),"data-unified":n,"aria-label":S0e(t),"data-full-name":t},c)}function S0e(r){var e;return r[0].match("flag-")&&(e=r[1])!=null?e:r[0]}var i4=Ei.create({emoji:{".":hr.emoji,position:"relative",width:"var(--epr-emoji-fullsize)",height:"var(--epr-emoji-fullsize)",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",borderRadius:"8px",overflow:"hidden",transition:"background-color 0.2s",":hover":{backgroundColor:"var(--epr-emoji-hover-color)"},":focus":{backgroundColor:"var(--epr-focus-bg-color)"}},noBackground:{background:"none",":hover":{backgroundColor:"transparent",background:"none"},":focus":{backgroundColor:"transparent",background:"none"}},hasVariations:{".":hr.emojiHasVariations,":after":{content:"",display:"block",width:"0",height:"0",right:"0px",bottom:"1px",position:"absolute",borderLeft:"4px solid transparent",borderRight:"4px solid transparent",transform:"rotate(135deg)",borderBottom:"4px solid var(--epr-emoji-variation-indicator-color)",zIndex:"var(--epr-emoji-variations-indictator-z-index)"},":hover:after":{borderBottom:"4px solid var(--epr-emoji-variation-indicator-color-hover)"}}}),xC=Ei.create({external:{".":hr.external,fontSize:"0"},common:{alignSelf:"center",justifySelf:"center",display:"block"}});function t9(r){var e=r.emojiName,t=r.style,n=r.lazyLoad,i=n===void 0?!1:n,s=r.imgUrl,a=r.onError,o=r.className;return P.createElement("img",{src:s,alt:e,className:br(x0e.emojiImag,xC.external,xC.common,o),loading:i?"lazy":"eager",onError:a,style:t})}var x0e=Ei.create({emojiImag:{".":"epr-emoji-img",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",minWidth:"var(--epr-emoji-fullsize)",minHeight:"var(--epr-emoji-fullsize)",padding:"var(--epr-emoji-padding)"}});function C0e(r){var e=r.unified,t=r.style,n=r.className;return P.createElement("span",{className:br(M0e.nativeEmoji,xC.common,xC.external,n),"data-unified":e,style:t},IW(e))}var M0e=Ei.create({nativeEmoji:{".":"epr-emoji-native",fontFamily:'"Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "EmojiOne Color", "Android Emoji"!important',position:"relative",lineHeight:"100%",fontSize:"var(--epr-emoji-size)",textAlign:"center",alignSelf:"center",justifySelf:"center",letterSpacing:"0",padding:"var(--epr-emoji-padding)"}});function d3(r){var e=r.emoji,t=r.unified,n=r.emojiStyle,i=r.size,s=r.lazyLoad,a=r.getEmojiUrl,o=a===void 0?U7:a,l=r.className,c=Z7(),u=c[1],f={};i&&(f.width=f.height=f.fontSize=i+"px");var d=e||z1(t);if(!d)return null;if(DW(d))return P.createElement(t9,{style:f,emojiName:t,emojiStyle:ul.NATIVE,lazyLoad:s,imgUrl:d.imgUrl,onError:p,className:l});return P.createElement(P.Fragment,null,n===ul.NATIVE?P.createElement(C0e,{unified:t,style:f,className:l}):P.createElement(t9,{style:f,emojiName:u3(d),emojiStyle:n,lazyLoad:s,imgUrl:o(t,n),onError:p,className:l}));function p(){u(function(g){return new Set(g).add(t)})}}function OA(r){var e=r.emoji,t=r.unified,n=r.hidden,i=r.hiddenOnSearch,s=r.emojiStyle,a=r.showVariations,o=a===void 0?!0:a,l=r.size,c=r.lazyLoad,u=r.getEmojiUrl,f=r.className,d=r.noBackground,p=d===void 0?!1:d,g=mv(e);return P.createElement(b0e,{hasVariations:g,showVariations:o,hidden:n,hiddenOnSearch:i,emojiNames:X_(e),unified:t,noBackground:p},P.createElement(d3,{unified:t,emoji:e,size:l,emojiStyle:s,lazyLoad:c,getEmojiUrl:u,className:f}))}var A0e="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI4LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNS43LDEwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsMTAuOSw2LjEsMTEsNi4zLDExaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjRWNi43YzAtMC4zLTAuMi0wLjUtMC41LTAuNQoJQzkuOCw2LDkuNiw2LjIsOS42LDYuNXYzLjRINi4yQzUuOSw5LjksNS43LDEwLjEsNS43LDEwLjRMNS43LDEwLjR6Ii8+CjxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik01LjcsMzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDMxLDYuMywzMWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuMgoJQzUuOSwyOS45LDUuNywzMC4xLDUuNywzMC40TDUuNywzMC40eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNS43LDUwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsNTAuOSw2LjEsNTEsNi4zLDUxaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjR2LTMuNGMwLTAuMy0wLjItMC41LTAuNS0wLjUKCXMtMC41LDAuMi0wLjUsMC41djMuNEg2LjJDNS45LDQ5LjksNS43LDUwLjEsNS43LDUwLjRMNS43LDUwLjR6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik01LjcsNzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDcxLDYuMyw3MWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuNAoJQzUuOSw2OS45LDUuNyw3MC4xLDUuNyw3MC40TDUuNyw3MC40eiIvPgo8L3N2Zz4=";function T0e(){var r=EA(),e=r[1];return P.createElement(Z_,{"aria-label":"Show all Emojis",title:"Show all Emojis",tabIndex:0,className:br(E0e.plusSign),onClick:function(){return e(!1)}})}var E0e=Ei.create(Bi({plusSign:{fontSize:"20px",padding:"17px",color:"var(--epr-text-color)",borderRadius:"50%",textAlign:"center",lineHeight:"100%",width:"20px",height:"20px",display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.2s ease-in-out",":after":{content:"",minWidth:"20px",minHeight:"20px",backgroundImage:"url("+A0e+")",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",backgroundPositionY:"0"},":hover":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-20px"}},":focus":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-40px"}}}},Dh("plusSign",{":after":{backgroundPositionY:"-40px"},":hover:after":{backgroundPositionY:"-60px"}})));function I0e(){var r=EA(),e=r[0],t=_ge(),n=uge();kW(t,e_.REACTIONS);var i=ug(),s=W7(),a=fg();return e?P.createElement("ul",{className:br(n9.list,!e&&_k.hidden),ref:t},n.map(function(o){return P.createElement("li",{key:o},P.createElement(OA,{emoji:z1(o),emojiStyle:i,unified:o,showVariations:!1,className:br(n9.emojiButton),noBackground:!0,getEmojiUrl:a}))}),s?P.createElement("li",null,P.createElement(T0e,null)):null):null}var n9=Ei.create({list:{listStyle:"none",margin:"0",padding:"0 5px",display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%"},emojiButton:{":hover":{transform:"scale(1.2)"},":focus":{transform:"scale(1.2)"},":active":{transform:"scale(1.1)"},transition:"transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.5)"}});function L0e(r){var e=dg();P.useEffect(function(){var t=r.current;if(!t)return;t.addEventListener("scroll",n,{passive:!0});function n(){e()}return function(){t==null||t.removeEventListener("scroll",n)}},[r,e])}function N0e(){var r=Z7(),e=r[0],t=jge();return function(n){var i=go(n),s=e.has(i),a=t(i);return{failedToLoad:s,filteredOut:a,hidden:s||a}}}function RW(r){var e=r.categoryConfig,t=r.children,n=r.hidden,i=r.hiddenOnSearch,s=bk(e),a=F7(e);return P.createElement("li",{className:br(s4.category,n&&_k.hidden,i&&cg.hiddenOnSearch),"data-name":s,"aria-label":a},P.createElement("h2",{className:br(s4.label)},a),P.createElement("div",{className:br(s4.categoryContent)},t))}var s4=Ei.create({category:{".":hr.category,":not(:has(.epr-visible))":{display:"none"}},categoryContent:{".":hr.categoryContent,display:"grid",gridGap:"0",gridTemplateColumns:"repeat(auto-fill, var(--epr-emoji-fullsize))",justifyContent:"space-between",margin:"var(--epr-category-padding)",position:"relative"},label:{".":hr.label,alignItems:"center",backdropFilter:"blur(3px)",backgroundColor:"var(--epr-category-label-bg-color)",color:"var(--epr-category-label-text-color)",display:"flex",fontSize:"16px",fontWeight:"bold",height:"var(--epr-category-label-height)",margin:"0",padding:"var(--epr-category-label-padding)",position:"sticky",textTransform:"capitalize",top:"0",width:"100%",zIndex:"var(--epr-category-label-z-index)"}}),a4=!1;function D0e(){var r=P.useState(a4),e=r[0],t=r[1];return P.useEffect(function(){t(!0),a4=!0},[]),e||a4}function k0e(r){var e=r.categoryConfig,t=$7(),n=t[0],i=D0e(),s=rge(),a=fg(),o=P.useMemo(function(){var c;return(c=NW(s))!=null?c:[]},[n,s]),l=ug();return i?P.createElement(RW,{categoryConfig:e,hiddenOnSearch:!0,hidden:o.length===0},o.map(function(c){var u=z1(c.original);return u?P.createElement(OA,{showVariations:!1,unified:c.unified,emojiStyle:l,emoji:u,key:c.unified,getEmojiUrl:a}):null})):null}function R0e(){var r=J7(),e=P.useRef(0);return P.createElement("ul",{className:br(O0e.emojiList)},r.map(function(t){var n=bk(t);return n===fr.SUGGESTED?P.createElement(k0e,{key:n,categoryConfig:t}):P.createElement(P.Suspense,{key:n},P.createElement(P0e,{category:n,categoryConfig:t,renderdCategoriesCountRef:e}))}))}function P0e(r){var e=r.category,t=r.categoryConfig,n=r.renderdCategoriesCountRef,i=N0e(),s=ige(),a=ug(),o=yge(),l=Mk(),c=l[0],u=hge(),f=fg(),d=!Y7(),p=!o&&n.current>0?[]:Pme(e);p.length>0&&n.current++;var g=0,_=p.map(function(w){var b=go(w,c),C=i(w),M=C.failedToLoad,A=C.filteredOut,k=C.hidden,O=u(w);return(k||O)&&g++,O?null:P.createElement(OA,{showVariations:d,key:b,emoji:w,unified:b,hidden:M,hiddenOnSearch:A,emojiStyle:a,lazyLoad:s,getEmojiUrl:f})});return P.createElement(RW,{categoryConfig:t,hidden:g===_.length},_)}var O0e=Ei.create({emojiList:{".":hr.emojiList,listStyle:"none",margin:"0",padding:"0"}}),F0e="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI1MHB4IgoJIGhlaWdodD0iMTVweCIgdmlld0JveD0iMCAwIDUwIDE1IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MCAxNSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJMYXllcl8xIj4KPC9nPgo8ZyBpZD0iTGF5ZXJfMiI+Cgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiNFOEU3RTciIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KCTxwYXRoIGZpbGw9IiMwMTAyMDIiIHN0cm9rZT0iIzE1MTYxNyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMjYuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KPC9nPgo8L3N2Zz4=",c1;(function(r){r[r.Up=0]="Up",r[r.Down=1]="Down"})(c1||(c1={}));function B0e(){var r=NA(),e=bge(),t=gv(),n=t[0],i=ug(),s=j0e(e),a=s.getTop,o=s.getMenuDirection,l=iW(),c=U0e(e),u=fg(),f=Bc(r.current),d=!!(n&&f&&mv(n)&&f.classList.contains(hr.emojiHasVariations));P.useEffect(function(){d&&kA(e.current)},[e,d,r]);var p,g;return!d&&r.current?l(null):(p=a(),g=c()),P.createElement("div",{ref:e,className:br(M2.variationPicker,o()===c1.Down&&M2.pointingUp,d&&M2.visible),style:{top:p}},d&&n?[go(n)].concat(Q_(n)).slice(0,6).map(function(_){return P.createElement(OA,{key:_,emoji:n,unified:_,emojiStyle:i,showVariations:!1,getEmojiUrl:u})}):null,P.createElement("div",{className:br(M2.pointer),style:g}))}function U0e(r){var e=NA();return function(){var n={};if(!r.current)return n;if(e.current){var i=Bc(e.current),s=p0e(i);if(!i)return n;n.left=s+(i==null?void 0:i.clientWidth)/2}return n}}function j0e(r){var e=NA(),t=Yl(),n=c1.Up;return{getMenuDirection:i,getTop:s};function i(){return n}function s(){n=c1.Up;var a=0;if(!r.current)return 0;var o=qB(r.current);if(e.current){var l,c=t.current,u=Bc(e.current),f=qB(u);a=wW(u);var d=(l=c==null?void 0:c.scrollTop)!=null?l:0;d>a-o&&(n=c1.Down,a+=f+o)}return a-o}}var M2=Ei.create(Bi({variationPicker:{".":hr.variationPicker,position:"absolute",right:"15px",left:"15px",padding:"5px",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.2)",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"space-around",opacity:"0",visibility:"hidden",pointerEvents:"none",top:"-100%",border:"1px solid var(--epr-picker-border-color)",height:"var(--epr-emoji-variation-picker-height)",zIndex:"var(--epr-skin-variation-picker-z-index)",background:"var(--epr-emoji-variation-picker-bg-color)",transform:"scale(0.9)",transition:"transform 0.1s ease-out, opacity 0.2s ease-out"},visible:{opacity:"1",visibility:"visible",pointerEvents:"all",transform:"scale(1)"},pointingUp:{".":"pointing-up",transformOrigin:"center 0%",transform:"scale(0.9)"},".pointing-up":{pointer:{top:"0",transform:"rotate(180deg) translateY(100%) translateX(18px)"}},pointer:{".":"epr-emoji-pointer",content:"",position:"absolute",width:"25px",height:"15px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"50px 15px",top:"100%",transform:"translateX(-18px)",backgroundImage:"url("+F0e+")"}},Dh("pointer",{backgroundPosition:"-25px 0"})));function z0e(){var r=Yl();return L0e(r),kW(r,e_.PICKER),kge(),P.createElement("div",{className:br(V0e.body,cg.hiddenOnReactions),ref:r},P.createElement(B0e,null),P.createElement(R0e,null))}var V0e=Ei.create({body:{".":hr.scrollBody,flex:"1",overflowY:"scroll",overflowX:"hidden",position:"relative"}});function G0e(r,e){if(!r||!e)return 0;var t=r.getBoundingClientRect(),n=e.getBoundingClientRect();return n.height-(t.y-n.y)}function H0e(r,e){var t=Yl(),n=lW(),i=oW();P.useEffect(function(){if(!r)return;var s=t.current;s==null||s.addEventListener("keydown",l,{passive:!0}),s==null||s.addEventListener("mouseover",c,!0),s==null||s.addEventListener("focus",a,!0),s==null||s.addEventListener("mouseout",o,{passive:!0}),s==null||s.addEventListener("blur",o,!0);function a(u){var f=Bc(u.target);if(!f)return o();var d=CW(f),p=d.unified,g=d.originalUnified;if(!p||!g)return o();e({unified:p,originalUnified:g})}function o(u){if(u){var f=u.relatedTarget;if(!Bc(f))return e(null)}e(null)}function l(u){u.key==="Escape"&&e(null)}function c(u){if(!n()){var f=Bc(u.target);if(f){var d=G0e(f,s),p=f.getBoundingClientRect().height;if(d<p)return W0e(f,e);wl(f)}}}return function(){s==null||s.removeEventListener("mouseover",c),s==null||s.removeEventListener("mouseout",o),s==null||s.removeEventListener("focus",a,!0),s==null||s.removeEventListener("blur",o,!0),s==null||s.removeEventListener("keydown",l)}},[t,r,e,n,i])}function W0e(r,e){var t,n=CW(r),i=n.unified,s=n.originalUnified;!i||!s||((t=document.activeElement)==null||t.blur==null||t.blur(),e({unified:i,originalUnified:s}))}var A2,n_;(function(r){r.ROW="FlexRow",r.COLUMN="FlexColumn"})(n_||(n_={}));function PW(r){var e=r.children,t=r.className,n=r.style,i=n===void 0?{}:n,s=r.direction,a=s===void 0?n_.ROW:s;return P.createElement("div",{style:Bi({},i),className:br(r9.flex,t,r9[a])},e)}var r9=Ei.create((A2={flex:{display:"flex"}},A2[n_.ROW]={flexDirection:"row"},A2[n_.COLUMN]={flexDirection:"column"},A2));function Y0e(r){var e=r.className,t=r.style,n=t===void 0?{}:t;return P.createElement("div",{style:Bi({flex:1},n),className:br(e)})}function J0e(r){var e=r.children,t=r.className,n=r.style;return P.createElement("div",{style:Bi({},n,{position:"absolute"}),className:t},e)}function FA(r){var e=r.children,t=r.className,n=r.style;return P.createElement("div",{style:Bi({},n,{position:"relative"}),className:t},e)}function X0e(r){var e=r.isOpen,t=r.onClick,n=r.isActive,i=r.skinToneVariation,s=r.style;return P.createElement(Z_,{style:s,onClick:t,className:br("epr-tone-"+i,o4.tone,!e&&o4.closedTone,n&&o4.active),"aria-pressed":n,"aria-label":"Skin tone "+Dme[i]})}var o4=Ei.create({closedTone:{opacity:"0",zIndex:"0"},active:{".":"epr-active",zIndex:"1",opacity:"1"},tone:{".":"epr-tone",width:"var(--epr-skin-tone-size)",display:"block",cursor:"pointer",borderRadius:"4px",height:"var(--epr-skin-tone-size)",position:"absolute",right:"0",transition:"transform 0.3s ease-in-out, opacity 0.35s ease-in-out",zIndex:"0",border:"1px solid var(--epr-skin-tone-outer-border-color)",boxShadow:"inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)",":hover":{boxShadow:"0 0 0 3px var(--epr-active-skin-hover-color), inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)"},":focus":{boxShadow:"0 0 0 3px var(--epr-focus-bg-color)"},"&.epr-tone-neutral":{backgroundColor:"#ffd225"},"&.epr-tone-1f3fb":{backgroundColor:"#ffdfbd"},"&.epr-tone-1f3fc":{backgroundColor:"#e9c197"},"&.epr-tone-1f3fd":{backgroundColor:"#c88e62"},"&.epr-tone-1f3fe":{backgroundColor:"#a86637"},"&.epr-tone-1f3ff":{backgroundColor:"#60463a"}}}),qy=28;function Q0e(){return P.createElement(FA,{style:{height:qy}},P.createElement(J0e,{style:{bottom:0,right:0}},P.createElement(OW,{direction:r_.VERTICAL})))}function OW(r){var e=r.direction,t=e===void 0?r_.HORIZONTAL:e,n=Ak(),i=Y7(),s=K_(),a=s[0],o=s[1],l=Mk(),c=l[0],u=l[1],f=tge(),d=dg(),p=hg();if(i)return null;var g=qy*_C.length+"px",_=a?g:qy+"px",w=t===r_.VERTICAL;return P.createElement(FA,{className:br(_y.skinTones,w&&_y.vertical,a&&_y.open,w&&a&&_y.verticalShadow),style:w?{flexBasis:_,height:_}:{flexBasis:_}},P.createElement("div",{className:br(_y.select),ref:n},_C.map(function(b,C){var M=b===c;return P.createElement(X0e,{key:b,skinToneVariation:b,isOpen:a,style:{transform:br(w?"translateY(-"+C*(a?qy:0)+"px)":"translateX(-"+C*(a?qy:0)+"px)",a&&M&&"scale(1.3)")},isActive:M,onClick:function(){a?(u(b),f(b),p()):o(!0),d()}})})))}var r_;(function(r){r.VERTICAL="epr-vertical",r.HORIZONTAL="epr-horizontal"})(r_||(r_={}));var _y=Ei.create({skinTones:{".":"epr-skin-tones","--":{"--epr-skin-tone-size":"15px"},display:"flex",alignItems:"center",justifyContent:"flex-end",transition:"all 0.3s ease-in-out",padding:"10px 0"},vertical:{padding:"9px",alignItems:"flex-end",flexDirection:"column",borderRadius:"6px",border:"1px solid var(--epr-bg-color)"},verticalShadow:{boxShadow:"0px 0 7px var(--epr-picker-border-color)"},open:{backdropFilter:"blur(5px)",background:"var(--epr-skin-tone-picker-menu-color)",".epr-active":{border:"1px solid var(--epr-active-skin-tone-indicator-border-color)"}},select:{".":"epr-skin-tone-select",position:"relative",width:"var(--epr-skin-tone-size)",height:"var(--epr-skin-tone-size)"}});function K0e(){var r=X7(),e=dW();return r.showPreview?P.createElement(PW,{className:br(Mx.preview,cg.hiddenOnReactions)},P.createElement(q0e,null),P.createElement(Y0e,null),e?P.createElement(Q0e,null):null):null}function q0e(){var r,e=X7(),t=P.useState(null),n=t[0],i=t[1],s=ug(),a=gv(),o=a[0],l=fg();H0e(e.showPreview,i);var c=z1((r=n==null?void 0:n.unified)!=null?r:n==null?void 0:n.originalUnified),u=c!=null&&n!=null;return P.createElement(f,null);function f(){var d=o??z1(e.defaultEmoji);if(!d)return null;var p=o?u3(o):e.defaultCaption;return P.createElement(P.Fragment,null,P.createElement("div",null,u?P.createElement(d3,{unified:n==null?void 0:n.unified,emoji:c,emojiStyle:s,size:45,getEmojiUrl:l,className:br(Mx.emoji)}):d?P.createElement(d3,{unified:go(d),emoji:d,emojiStyle:s,size:45,getEmojiUrl:l,className:br(Mx.emoji)}):null),P.createElement("div",{className:br(Mx.label)},u?u3(c):p))}}var Mx=Ei.create({preview:{alignItems:"center",borderTop:"1px solid var(--epr-preview-border-color)",height:"var(--epr-preview-height)",padding:"0 var(--epr-horizontal-padding)",position:"relative",zIndex:"var(--epr-preview-z-index)"},label:{color:"var(--epr-preview-text-color)",fontSize:"var(--epr-preview-text-size)",padding:"var(--epr-preview-text-padding)",textTransform:"capitalize"},emoji:{padding:"0"}});function Z0e(r){var e;return(e=r==null?void 0:r.getAttribute("data-name"))!=null?e:null}function $0e(r){var e=Yl();P.useEffect(function(){var t=new Map,n=e.current,i=new IntersectionObserver(function(s){if(n){for(var a=dme(s),o;!(o=a()).done;){var l=o.value,c=Z0e(l.target);t.set(c,l.intersectionRatio)}var u=Array.from(t),f=u[u.length-1];if(f[1]==1)return r(f[0]);for(var d=0,p=u;d<p.length;d++){var g=p[d],_=g[0],w=g[1];if(w){r(_);break}}}},{threshold:[0,1]});n==null||n.querySelectorAll(Ja(hr.category)).forEach(function(s){i.observe(s)})},[e,r])}function e1e(){var r=Yl(),e=q_();return function(n){var i;if(r.current){var s=(i=r.current)==null?void 0:i.querySelector('[data-name="'+n+'"]');if(s){var a=s.offsetTop||0;sW(e.current,a)}}}}function t1e(){var r=Zme();return r?r.length===0:!1}var n1e="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMDBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgMjAwIDgwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyMDAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8ZyBpZD0iTGF5ZXJfMTEiPgoJPGc+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTIuOCwyOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjEtMS4yYy0wLjYsMC0xLjIsMC41LTEuMiwxLjJDMTEuNiwyOSwxMi4yLDI5LjUsMTIuOCwyOS41eiBNMTIuOCwyOGMwLjIsMCwwLjQsMC4yLDAuNCwwLjQKCQkJYzAsMC4yLTAuMiwwLjQtMC40LDAuNGMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzEyLjQsMjguMSwxMi42LDI4LDEyLjgsMjh6Ii8+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsMjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNywyNi4yLDEzLjgsMjMsMTAsMjN6IE0xMCwzNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiwzMy40LDEzLjQsMzYuMiwxMCwzNi4yeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsMzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDMxLjUsMTQuNywzMS4zLDE0LjYsMzEuMnogTTEwLDM0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywzMy4yLDExLjYsMzQuMSwxMCwzNC4xeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiwyOS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDI5LDYuNiwyOS41LDcuMiwyOS41eiBNNy4yLDI4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDI4LjEsNywyOCw3LjIsMjh6Ii8+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjQuMSwzMy40bDIuMywwYzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjMKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40di0yLjFDNjMuNywzMy42LDYzLjgsMzMuNCw2NC4xLDMzLjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTczLjUsMzMuNWgyLjRjMC4yLDAsMC40LDAuMiwwLjQsMC40djJjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMkM3My4xLDMzLjYsNzMuMywzMy41LDczLjUsMzMuNXoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjMuNywyOC40aDEyLjZ2NUg2My43VjI4LjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTY1LjUsMjMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN3YtMy4xQzYzLjcsMjQuNSw2NC41LDIzLjYsNjUuNSwyMy42eiIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNjYuMiIgY3k9IjMwLjkiIHJ4PSIwLjkiIHJ5PSIxIi8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSI3My44IiBjeT0iMzAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNOTYuNCwzMGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCwyNi40LDk2LjQsMzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTk2LjMsMjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4xYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xYy0wLjEtMC4xLTAuMS0wLjEtMC4xLTAuMmMwLjUtMC4xLDEuMi0wLjIsMi0wLjFjMS4yLDAsMi41LDAuMywzLjUsMS4xYzEsMC44LDEuNywxLjgsMi4xLDIuOAoJCQkJQzk2LjEsMjcuOSw5Ni4yLDI4LjMsOTYuMywyOC42eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik04NCwzMi4yYzAsMCwwLTAuMSwwLTAuMWMwLjktMC4yLDIuOS0wLjQsNC43LDAuNmMxLjEsMC43LDEuOSwxLjUsMi40LDIuMwoJCQkJYzAuNCwwLjUsMC42LDEsMC43LDEuM2MtMC40LDAuMS0xLDAuMi0xLjcsMC4zYy0xLDAtMi4xLTAuMS0zLjItMC44cy0xLjktMS42LTIuNC0yLjVDODQuMiwzMi44LDg0LjEsMzIuNSw4NCwzMi4yeiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTExNi4zLDI2LjhsLTEuNCwybC0wLjgtMC44bC0wLjYtMC42bDAsMC45bC0wLjEsOC4yaC02LjgKCQkJCWwtMC4xLTguMmwwLTAuOWwtMC42LDAuNmwtMC44LDAuOGwtMS40LTJsMi42LTIuOWMwLjEtMC4xLDAuMi0wLjEsMC4zLTAuMWgxLjNsMC40LDAuN2MwLjcsMS4zLDIuNiwxLjMsMy4zLTAuMWwwLjMtMC42aDEuMgoJCQkJYzAuMSwwLDAuMiwwLDAuMywwLjFsMC4zLTAuM2wtMC4zLDAuM0wxMTYuMywyNi44eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMTAuMSwyNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDI3LjdMMTEwLjEsMjcuN3oiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMTI2LjgsMzQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMzMuMSwxMjYuOCwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNiwzNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDMyLjEsMTM3LjYsMzMuMSwxMzcuNiwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNywyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDI2LjIsMTI2LjgsMjMuNSwxMjYuOCwyMy41eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSIjMzM3MUI3IiBkPSJNMTcwLjgsMjMuMUwxNzAuOCwyMy4xYy0wLjMsMC0wLjUsMC0wLjgsMGMtMi4xLDAtNCwxLTUuMywyLjVsLTAuMSwwbC0wLjEtMC4xbC0xLTEuMmwtMC4zLDMuNGwzLjQsMC4zCgkJCQlsLTEuMS0xLjNsLTAuMS0wLjFsMC4xLTAuMWMxLjEtMS41LDMtMi4zLDUtMi4xbDAsMGMzLjIsMC4zLDUuNSwzLjEsNS4yLDYuM2MtMC4zLDMtMy4xLDUuMy02LjEsNS4xYy0zLjEtMC4yLTUuNC0yLjktNS4zLTYKCQkJCWwtMS4zLTAuMWMtMC4yLDMuOCwyLjYsNy4xLDYuMyw3LjRjMy45LDAuMyw3LjMtMi42LDcuNi02LjVDMTc3LjIsMjYuOCwxNzQuNCwyMy41LDE3MC44LDIzLjF6Ii8+CgkJCTxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik0xNzAuMywyNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNnMtMC42LDAuMy0wLjYsMC42djMuMmMwLDAuMiwwLjEsMC4zLDAuMiwwLjRjMC4xLDAuMSwwLjMsMC4yLDAuNCwwLjIKCQkJCWgyLjRjMC40LDAsMC42LTAuMywwLjYtMC42YzAtMC40LTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJ2LTAuMkwxNzAuMywyNy40TDE3MC4zLDI3LjR6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTE4Ni4yLDIzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43di03LjdDMTgzLjQsMjQuNiwxODQuNywyMy40LDE4Ni4yLDIzLjR6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxODYiIGN5PSIyOC45IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxOTQiIGN5PSIyNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDMzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjI1IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNTYsMjQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgkJYzAsMC0wLjIsMC4xLTAuOSwwLjJjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMC44LTAuMy0xLjctMC41LTIuNS0wLjVjLTAuMiwwLTAuNCwwLTAuNSwwYy0xLjMsMC0yLjUsMC4zLTMuNiwxCgkJYy0wLjIsMC4xLTAuMiwwLjItMC4yLDAuNHYxMS42YzAsMC4zLDAuMSwwLjUsMC4zLDAuNWMwLjYsMCwwLjUtMC40LDAuNS0wLjZ2LTUuN2MwLjctMC4zLDMuMi0xLjEsNS44LTAuMQoJCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjR2LTUuN0MxNTYuMiwyNC42LDE1Ni4xLDI0LjQsMTU2LDI0LjN6IE0xNTUuNiwzMC4yCgkJYy0wLjEsMC0wLjcsMC4xLTEsMC4xYy0wLjcsMC0yLjQtMC4xLTMuOC0wLjZjLTIuNS0xLTUtMC41LTYuMi0wLjF2LTQuOWMwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMAoJCWMwLjcsMCwxLjUsMC4yLDIuMiwwLjRjMS42LDAuNiwzLjUsMC43LDQuMywwLjdjMC4yLDAsMC44LDAsMS0wLjFWMzAuMnoiLz4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTQ4LjEsMjMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCUM0My42LDI1LjUsNDUuNiwyMy41LDQ4LjEsMjMuNXoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMjguOGMtMC4yLDAuMS0wLjUsMS4yLDAsMS41YzEuNCwxLDguNSwwLjgsMTEuMywwLjYKCQkJYzAuOC0wLjEsMS42LTAuNCwxLjctMS4yYzAtMC4zLTAuMS0wLjYtMC42LTAuOSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMC42TDQzLjMsMzFjLTAuMiwwLjUsMC4yLDEsMC43LDAuOWMwLjMtMC4xLDAuNSwwLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMiwwbDAuMi0wLjFjMC4zLTAuMiwwLjgtMC4yLDEuMSwwLjFsMC4yLDAuMmMwLjMsMC4zLDAuOCwwLjIsMS0wLjJsMC4xLTAuMmMwLjEtMC4yLDAtMC4zLDAuMi0wLjMKCQkJYzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMi4yYy0wLjEsMC4yLTAuMywwLjgsMCwxLjFjMC4zLDAuNCwzLDEuMSw2LjQsMS4xCgkJCWMyLjIsMCw0LjYtMC4zLDYtMC42YzAuNS0wLjEsMC45LTAuNSwwLjgtMC45YzAtMC4yLTAuMi0wLjUtMC40LTAuNyIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMy4zYzAsMC41LDAuNiwyLjMsMS4zLDIuN2MxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQljMS4zLTAuMSwyLjUtMC43LDMuMi0xLjhjMC4zLTAuNSwwLjUtMSwwLjUtMS40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUxLjYiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUzIiBjeT0iMjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNTMiIGN5PSIyNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjU0LjMiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUwLjkiIGN5PSIyNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJPC9nPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMjQuMiwzMXYtNy42YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjYsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDMyLjksMjQuMiwzMiwyNC4yLDMxeiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiwzMGw1LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDM0LjFsNS40LTEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzMGwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzNC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMzMzcxQjciIGQ9Ik0yOS41LDMyLjRMMjksMzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVzMC40LDAsMC41LDAuMmwwLjEsMC4yCgkJCUMyOC4zLDMyLjgsMjkuMSwzMi45LDI5LjUsMzIuNHoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTMyLjQsMzIuMWwtMC4xLDAuMmMtMC40LDEtMS44LDEuMS0yLjMsMC4yIi8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjI3LjYiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjMyLjQiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xMi44LDQ5LjVjMC42LDAsMS4xLTAuNSwxLjEtMS4xCgkJCWMwLTAuNi0wLjUtMS4yLTEuMS0xLjJjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMkMxMS42LDQ5LDEyLjIsNDkuNSwxMi44LDQ5LjV6IE0xMi44LDQ4YzAuMiwwLDAuNCwwLjIsMC40LDAuNAoJCQljMCwwLjItMC4yLDAuNC0wLjQsMC40Yy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDMTIuNCw0OC4xLDEyLjYsNDgsMTIuOCw0OHoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNC42LDUxLjJjLTAuMS0wLjEtMC4yLTAuMi0wLjMtMC4ySDUuNwoJCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNyw1MS41LDE0LjcsNTEuMywxNC42LDUxLjJ6IE0xMCw1NC4xCgkJCWMtMS42LDAtMy0wLjktMy43LTIuMmg3LjNDMTMsNTMuMiwxMS42LDU0LjEsMTAsNTQuMXoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik03LjIsNDkuNWMwLjYsMCwxLjItMC41LDEuMi0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4yLTEuMmMtMC42LDAtMS4xLDAuNS0xLjEsMS4yQzYuMSw0OSw2LjYsNDkuNSw3LjIsNDkuNXogTTcuMiw0OGMwLjIsMCwwLjQsMC4yLDAuNCwwLjRjMCwwLjItMC4yLDAuNC0wLjQsMC40CgkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzYuOCw0OC4xLDcsNDgsNy4yLDQ4eiIvPgoJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEwLDQzYy0zLjgsMC03LDMuMS03LDdjMCwzLjgsMy4xLDcsNyw3CgkJCXM3LTMuMSw3LTdDMTcsNDYuMiwxMy44LDQzLDEwLDQzeiBNMTAsNTYuMmMtMy40LDAtNi4yLTIuOC02LjItNi4yYzAtMy40LDIuOC02LjIsNi4yLTYuMnM2LjIsMi44LDYuMiw2LjIKCQkJQzE2LjIsNTMuNCwxMy40LDU2LjIsMTAsNTYuMnoiLz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02NC4xLDUzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDUzLjYsNjMuOCw1My40LDY0LjEsNTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNzMuNSw1My41aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2MmMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuNAoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRsMC0yQzczLjEsNTMuNiw3My4zLDUzLjUsNzMuNSw1My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02My43LDQ4LjRoMTIuNnY1SDYzLjdWNDguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNjUuNSw0My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw0NC41LDY0LjUsNDMuNiw2NS41LDQzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI2Ni4yIiBjeT0iNTAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjczLjgiIGN5PSI1MC45IiByeD0iMC45IiByeT0iMSIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik05Ni40LDUwYzAsMy42LTIuOSw2LjUtNi40LDYuNXMtNi40LTIuOS02LjQtNi41czIuOS02LjUsNi40LTYuNVM5Ni40LDQ2LjQsOTYuNCw1MHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNOTYuMyw0OC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw0Ny45LDk2LjIsNDguMyw5Ni4zLDQ4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTg0LDUyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDUyLjgsODQuMSw1Mi41LDg0LDUyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNDYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDQ2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTExMC4xLDQ3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNDcuN0wxMTAuMSw0Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0xMjYuOCw1NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw1My4xLDEyNi44LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy42LDU0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNTIuMSwxMzcuNiw1My4xLDEzNy42LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy43LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNDYuMiwxMjYuOCw0My41LDEyNi44LDQzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIGQ9Ik0xNzAuOCw0My4xTDE3MC44LDQzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjUsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw0Ni44LDE3NC40LDQzLjUsMTcwLjgsNDMuMXoiLz4KCQkJPHBhdGggZmlsbD0iI0MwQzBCRiIgZD0iTTE3MC4zLDQ3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZjMC0wLjMtMC4zLTAuNi0wLjYtMC42aC0xLjZoLTAuMnYtMC4yTDE3MC4zLDQ3LjRMMTcwLjMsNDcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNMTg2LjIsNDMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw0NC43LDE4NC43LDQzLjQsMTg2LjIsNDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE4NiIgY3k9IjQ4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE5NCIgY3k9IjQ2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNTMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iI0MwQzBCRiIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw0NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDQ0LjYsMTU2LjEsNDQuNCwxNTYsNDQuM3ogTTE1NS42LDUwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY1MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNDguMSw0My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNDUuNSw0NS42LDQzLjUsNDguMSw0My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw0OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDEsOC41LDAuOCwxMS4zLDAuNgoJCQljMC44LTAuMSwxLjYtMC40LDEuNy0xLjJjMC0wLjMtMC4xLTAuNi0wLjYtMC45Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUwLjZMNDMuMyw1MWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45YzAuMy0wLjEsMC41LDAsMC43LDAuMwoJCQlsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjIsMC44LDAuMSwxLjIsMGwwLjUtMC4yYzAuNC0wLjIsMC45LTAuMiwxLjMsMGwwLjUsMC4yCgkJCWMwLjQsMC4yLDAuOCwwLjIsMS4yLDBsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC41LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUzLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTEuNiIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTMiIGN5PSI0NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI1MyIgY3k9IjQ3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTQuMyIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTAuOSIgY3k9IjQ1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0yNC4yLDUxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNTIuOSwyNC4yLDUyLDI0LjIsNTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDUwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsNTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDUwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDU0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTI5LjUsNTIuNEwyOSw1MS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNTIuOCwyOS4xLDUyLjksMjkuNSw1Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw1Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMjcuNiIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMzIuNCIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KCTxnPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsNzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDcxLjUsMTQuNyw3MS4zLDE0LjYsNzEuMnogTTEwLDc0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMyw3My4yLDExLjYsNzQuMSwxMCw3NC4xeiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsNjkuNWMwLjYsMCwxLjEtMC41LDEuMS0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4xLTEuMmMtMC42LDAtMS4yLDAuNS0xLjIsMS4yQzExLjYsNjksMTIuMiw2OS41LDEyLjgsNjkuNXogTTEyLjgsNjhjMC4yLDAsMC40LDAuMiwwLjQsMC40CgkJCWMwLDAuMi0wLjIsMC40LTAuNCwwLjRjLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDY4LjEsMTIuNiw2OCwxMi44LDY4eiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw2OS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDY5LDYuNiw2OS41LDcuMiw2OS41eiBNNy4yLDY4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDY4LjEsNyw2OCw3LjIsNjh6Ii8+CgkJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsNjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNyw2Ni4yLDEzLjgsNjMsMTAsNjN6IE0xMCw3Ni4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiw3My40LDEzLjQsNzYuMiwxMCw3Ni4yeiIvPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTY0LjEsNzMuNGwyLjMsMGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi4zCgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNHYtMi4xQzYzLjcsNzMuNiw2My44LDczLjQsNjQuMSw3My40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik03My41LDczLjVoMi40YzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMi4xQzczLjEsNzMuNiw3My4zLDczLjUsNzMuNSw3My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik02My43LDY4LjRoMTIuNnY1SDYzLjdWNjguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNjUuNSw2My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw2NC41LDY0LjUsNjMuNiw2NS41LDYzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI2Ni4yIiBjeT0iNzAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNzMuOCIgY3k9IjcwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNOTYuNCw3MGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCw2Ni40LDk2LjQsNzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTk2LjMsNjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4yYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xLjFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw2Ny45LDk2LjIsNjguMyw5Ni4zLDY4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTg0LDcyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDcyLjgsODQuMSw3Mi40LDg0LDcyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNjYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDY2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTExMC4xLDY3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNjcuN0wxMTAuMSw2Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0xMjYuOCw3NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw3My4xLDEyNi44LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy42LDc0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNzIuMSwxMzcuNiw3My4xLDEzNy42LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy43LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDYzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNjYuMiwxMjYuOCw2My41LDEyNi44LDYzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xNzAuOCw2My4xTDE3MC44LDYzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw2Ni44LDE3NC40LDYzLjUsMTcwLjgsNjMuMXoiLz4KCQkJPHBhdGggZmlsbD0iIzZBQTlERCIgZD0iTTE3MC4zLDY3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZTMTcyLjQsNzAsMTcyLDcwaC0xLjZoLTAuMnYtMC4yTDE3MC4zLDY3LjRMMTcwLjMsNjcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNMTg2LjIsNjMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw2NC43LDE4NC43LDYzLjQsMTg2LjIsNjMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE4NiIgY3k9IjY4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE5NCIgY3k9IjY2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNzMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw2NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDY0LjYsMTU2LjEsNjQuNCwxNTYsNjQuM3ogTTE1NS42LDcwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY3MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNDguMSw2My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNjUuNSw0NS42LDYzLjUsNDguMSw2My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw2OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDAuOSw4LjUsMC44LDExLjMsMC42CgkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsNzAuNkw0My4zLDcxYy0wLjIsMC41LDAuMiwxLDAuNywwLjljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDcyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDczLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTEuNiIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTMiIGN5PSI2NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI1MyIgY3k9IjY3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTQuMyIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTAuOSIgY3k9IjY1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0yNC4yLDcxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNzIuOSwyNC4yLDcyLDI0LjIsNzF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDcwLjFsNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiw3NC4xbDUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTM4LjgsNzAuMWwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCw3NC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiM2QUE5REQiIGQ9Ik0yOS41LDcyLjRMMjksNzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVjMC4yLTAuMSwwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNzIuOCwyOS4xLDcyLjksMjkuNSw3Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw3Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMjcuNiIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMzIuNCIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KPC9nPgo8Zz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMgoJCWMwLTAuNi0wLjUtMS4xLTEuMS0xLjFjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMVMxMi4yLDkuNSwxMi44LDkuNXogTTEyLjgsNy45YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDguMSwxMi42LDcuOSwxMi44LDcuOXoiLz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw5LjVjMC42LDAsMS4yLTAuNSwxLjItMS4yCgkJYzAtMC42LTAuNS0xLjEtMS4yLTEuMWMtMC42LDAtMS4xLDAuNS0xLjEsMS4xUzYuNiw5LjUsNy4yLDkuNXogTTcuMiw3LjljMC4yLDAsMC40LDAuMiwwLjQsMC40YzAsMC4yLTAuMiwwLjQtMC40LDAuNAoJCUM3LDguNyw2LjgsOC41LDYuOCw4LjNDNi44LDguMSw3LDcuOSw3LjIsNy45eiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTQuNiwxMS4yYy0wLjEtMC4xLTAuMi0wLjItMC4zLTAuMkg1LjcKCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNywxMS40LDE0LjcsMTEuMywxNC42LDExLjJ6IE0xMCwxNC4xCgkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywxMy4yLDExLjYsMTQuMSwxMCwxNC4xeiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsM2MtMy44LDAtNywzLjEtNyw3czMuMSw3LDcsN3M3LTMuMSw3LTcKCQlTMTMuOCwzLDEwLDN6IE0xMCwxNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJTNi42LDMuOCwxMCwzLjhzNi4yLDIuOCw2LjIsNi4yUzEzLjQsMTYuMiwxMCwxNi4yeiIvPgo8L2c+CjxnIGlkPSJDYXJfMDAwMDAwMTg5MzUzOTUwODU0MTM0MTM3NTAwMDAwMDA4MjUyNzM4Nzc4NDI3NzU3MTVfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NC4xLDEzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDEzLjYsNjMuOCwxMy40LDY0LjEsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNzMuNSwxMy40aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi40CgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNGwwLTIuMUM3My4xLDEzLjYsNzMuMywxMy40LDczLjUsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNjMuNyw4LjRoMTIuNnY1SDYzLjdWOC40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NS41LDMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN1Y1LjVDNjMuNyw0LjQsNjQuNSwzLjYsNjUuNSwzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI2Ni4yIiBjeT0iMTAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNzMuOCIgY3k9IjEwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+CjwvZz4KPGcgaWQ9IkFjdGl2aXRpZXMiPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjQsMTBjMCwzLjYtMi45LDYuNS02LjQsNi41cy02LjQtMi45LTYuNC02LjVzMi45LTYuNSw2LjQtNi41Uzk2LjQsNi40LDk2LjQsMTB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjMsOC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTEuMWMtMC4xLTAuMS0wLjEtMC4yLTAuMS0wLjJjMC41LTAuMSwxLjItMC4yLDItMC4yYzEuMiwwLDIuNSwwLjMsMy41LDEuMWMxLDAuOCwxLjcsMS44LDIuMSwyLjgKCQkJCUM5Ni4xLDcuOSw5Ni4yLDguMyw5Ni4zLDguNnoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNODQsMTIuMWMwLDAsMC0wLjEsMC0wLjFjMC45LTAuMiwyLjktMC40LDQuNywwLjZjMS4xLDAuNiwxLjksMS41LDIuNCwyLjMKCQkJCWMwLjQsMC41LDAuNiwxLDAuNywxLjNjLTAuNCwwLjEtMSwwLjItMS43LDAuM2MtMSwwLTIuMS0wLjEtMy4yLTAuOGMtMS4xLTAuNi0xLjktMS42LTIuNC0yLjVDODQuMiwxMi44LDg0LjEsMTIuNCw4NCwxMi4xeiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iT2JqZWN0c18wMDAwMDA2NDMxMjM3MTczOTEzMDMxNTI1MDAwMDAxMDIyNTg4OTAzMjIyODYzMjk3NV8iPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNi44bC0xLjQsMkwxMTQuMSw4bC0wLjYtMC43bDAsMC45bC0wLjEsOC4yaC02LjhsLTAuMS04LjIKCQkJCWwwLTAuOUwxMDUuOSw4bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDYuOHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTEwLjEsNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDcuN0wxMTAuMSw3Ljd6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJTeW1ib2xzXzAwMDAwMDk2NzQ2OTA3ODY5OTI5OTIxMTgwMDAwMDA2NDg0ODEyODMwMjgyNTgyNDE2XyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMTQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMTMuMSwxMjYuOCwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMzcuNiwxNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDEyLjEsMTM3LjYsMTMuMSwxMzcuNiwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMjYuOCw0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTEzNy43LDQuNHY5LjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDYuMiwxMjYuOCwzLjUsMTI2LjgsMy41eiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iUmVjZW50cyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTE3MC44LDMuMUwxNzAuOCwzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJTDE2Myw5LjVjLTAuMiwzLjgsMi42LDcuMSw2LjMsNy40YzMuOSwwLjQsNy4zLTIuNiw3LjYtNi41QzE3Ny4yLDYuOCwxNzQuNCwzLjUsMTcwLjgsMy4xeiIvPgoJCQk8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNMTcwLjMsNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNlMxNjksNy4xLDE2OSw3LjR2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZzLTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJWOS44TDE3MC4zLDcuNEwxNzAuMyw3LjR6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJDdXN0b21fMDAwMDAxODEwODcyMjk0MzQzMDIzMzY3ODAwMDAwMDUxNTIyNzc5NDU5NDA2NzQ0ODhfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xODYuMiwzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43VjYuMUMxODMuNCw0LjYsMTg0LjcsMy40LDE4Ni4yLDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjE4NiIgY3k9IjguOSIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMTk0IiBjeT0iNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDEzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS13aWR0aD0iMC4yNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTU2LDQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgljMCwwLTAuMiwwLjEtMC45LDAuMWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCWMtMC4yLDAuMS0wLjIsMC4yLTAuMiwwLjR2MTEuNmMwLDAuMywwLjEsMC41LDAuMywwLjVjMC42LDAsMC41LTAuNCwwLjUtMC42di01LjdjMC43LTAuMywzLjItMS4xLDUuOC0wLjFjMS42LDAuNiwzLjUsMC43LDQuMywwLjcKCWMwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjRWNC43QzE1Ni4yLDQuNSwxNTYuMSw0LjQsMTU2LDQuM3ogTTE1NS42LDEwLjJjLTAuMSwwLTAuNywwLjEtMSwwLjEKCWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0yLjUtMS01LTAuNS02LjItMC4xVjQuN2MwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMGMwLjcsMCwxLjUsMC4yLDIuMiwwLjQKCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVYxMC4yeiIvPgo8ZyBpZD0iRm9vZCI+Cgk8ZyBpZD0iTGF5ZXJfMTIiPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik00OC4xLDMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCQlDNDMuNiw1LjUsNDUuNiwzLjUsNDguMSwzLjV6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw4LjdjLTAuMiwwLjEtMC41LDEuMiwwLDEuNWMxLjQsMC45LDguNSwwLjgsMTEuMywwLjYKCQkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDEwLjZMNDMuMywxMWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45CgkJCQljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjNsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjEsMC44LDAuMSwxLjIsMGwwLjUtMC4yCgkJCQljMC40LTAuMiwwLjktMC4yLDEuMywwbDAuNSwwLjJjMC40LDAuMiwwLjgsMC4xLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjEsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yCgkJCQljMC4xLTAuMiwwLTAuMywwLjItMC40YzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMTIuMWMtMC4xLDAuMi0wLjMsMC44LDAsMS4xYzAuMywwLjQsMywxLjEsNi40LDEuMQoJCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwxMy4zYzAsMC41LDAuNiwyLjQsMS4zLDIuNmMxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQkJYzEuMy0wLjEsMi41LTAuNywzLjItMS44YzAuMy0wLjUsMC41LTEsMC41LTEuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTEuNiIgY3k9IjYuNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTMiIGN5PSI0LjkiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjUzIiBjeT0iNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1NC4zIiBjeT0iNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1MC45IiBjeT0iNC45IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJBbmltYWxzIj4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTI0LjIsMTFWMy41YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjcsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDEyLjksMjQuMiwxMS45LDI0LjIsMTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDEwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsMTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDEwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDE0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTI5LjUsMTIuNEwyOSwxMS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsMTIuNywyOS4xLDEyLjksMjkuNSwxMi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCwxMi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMjcuNiIgY3k9IjkuNyIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSIzMi40IiBjeT0iOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+CjwvZz4KPC9zdmc+";function r1e(r){var e,t=r.isActiveCategory,n=r.category,i=r.allowNavigation,s=r.categoryConfig,a=r.onClick;return P.createElement(Z_,{tabIndex:i?0:-1,className:br(s1e.catBtn,cg.categoryBtn,"epr-icn-"+n,(e={},e[hr.active]=t,e)),onClick:a,"aria-label":F7(s),"aria-selected":t,role:"tab","aria-controls":"epr-category-nav-id"})}var i9={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 3)"},i1e={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 2)"},s9={":not(.epr-search-active)":{catBtn:{":hover":i9,"&.epr-active":i9}}},s1e=Ei.create(Bi({catBtn:{".":"epr-cat-btn",display:"inline-block",transition:"opacity 0.2s ease-in-out",position:"relative",height:"var(--epr-category-navigation-button-size)",width:"var(--epr-category-navigation-button-size)",backgroundSize:"calc(var(--epr-category-navigation-button-size) * 10)",outline:"none",backgroundPosition:"0 0",backgroundImage:"url("+n1e+")",":focus:before":{content:"",position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",border:"2px solid var(--epr-category-icon-active-color)",borderRadius:"50%"},"&.epr-icn-suggested":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -8)"},"&.epr-icn-custom":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -9)"},"&.epr-icn-activities":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -4)"},"&.epr-icn-animals_nature":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -1)"},"&.epr-icn-flags":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -7)"},"&.epr-icn-food_drink":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -2)"},"&.epr-icn-objects":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -5)"},"&.epr-icn-smileys_people":{backgroundPositionX:"0px"},"&.epr-icn-symbols":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -6)"},"&.epr-icn-travel_places":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -3)"}}},Dh("catBtn",i1e),{".epr-dark-theme":Bi({},s9),".epr-auto-theme":Bi({},s9)}));function a1e(){var r=P.useState(null),e=r[0],t=r[1],n=e1e();$0e(t);var i=LA(),s=J7(),a=Tk(),o=t1e();return P.createElement("div",{className:br(o1e.nav),role:"tablist","aria-label":"Category navigation",id:"epr-category-nav-id",ref:a},s.map(function(l){var c=bk(l),u=c===e;if(y0e(l)&&o)return null;var f=!i&&!u;return P.createElement(r1e,{key:c,category:c,isActiveCategory:u,allowNavigation:f,categoryConfig:l,onClick:function(){t(c),n(c)}})}))}var o1e=Ei.create({nav:{".":"epr-category-nav",display:"flex",flexDirection:"row",justifyContent:"space-around",padding:"var(--epr-header-padding)"},".epr-search-active":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}},".epr-main:has(input:not(:placeholder-shown))":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}}}),FW="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNi45OCwxMy41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsOAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQyTDcuNzQsNy4yN2MtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywxMy4wNSw2Ljc3LDEzLjM5LDYuOTgsMTMuNTlMNi45OCwxMy41OXoiLz4KPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTEwLjE1LDE4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDE0Ljg0LDUuNzQsMTguNDMsMTAuMTUsMTguNDN6CgkgTTEwLjE1LDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0QzMuMjEsNi42LDYuMzMsMy40OSwxMC4xNSwzLjQ5CglMMTAuMTUsMy40OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTYuOTgsMzMuNTljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1czAuMjctMC4wNSwwLjM3LTAuMTVsMi40Mi0yLjQybDIuNDMsMi40MwoJYzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNWMwLjE0LDAsMC4yNy0wLjA1LDAuMzctMC4xNWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWwtMi40My0yLjQzTDEzLjMyLDI4CgljMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwbC0yLjQyLDIuNDJsLTIuNDEtMi40MWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywzMy4wNSw2Ljc3LDMzLjM5LDYuOTgsMzMuNTlMNi45OCwzMy41OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTEwLjE1LDM4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDM0Ljg0LDUuNzQsMzguNDMsMTAuMTUsMzguNDN6CgkgTTEwLjE1LDIzLjQ5YzMuODMsMCw2Ljk0LDMuMTEsNi45NCw2Ljk0YzAsMy44My0zLjExLDYuOTQtNi45NCw2Ljk0Yy0zLjgzLDAtNi45NC0zLjExLTYuOTQtNi45NAoJQzMuMjEsMjYuNiw2LjMzLDIzLjQ5LDEwLjE1LDIzLjQ5TDEwLjE1LDIzLjQ5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNi45OCw1My41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsNDgKCWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDBsLTIuNDIsMi40MmwtMi40MS0yLjQxYy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMAoJYy0wLjIxLDAuMjEtMC4yMSwwLjU0LDAsMC43NWwyLjQxLDIuNDFsLTIuNDIsMi40MkM2Ljc3LDUzLjA1LDYuNzcsNTMuMzksNi45OCw1My41OUw2Ljk4LDUzLjU5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNMTAuMTUsNTguNDNjNC40MSwwLDgtMy41OSw4LThjMC00LjQxLTMuNTktOC04LThjLTQuNDEsMC04LDMuNTktOCw4QzIuMTUsNTQuODQsNS43NCw1OC40MywxMC4xNSw1OC40M3oKCSBNMTAuMTUsNDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0CglDMy4yMSw0Ni42LDYuMzMsNDMuNDksMTAuMTUsNDMuNDlMMTAuMTUsNDMuNDl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik02Ljk4LDczLjU5YzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNXMwLjI3LTAuMDUsMC4zNy0wLjE1bDIuNDItMi40MmwyLjQzLDIuNDMKCWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVjMC4xNCwwLDAuMjctMC4wNSwwLjM3LTAuMTVjMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVsLTIuNDMtMi40M0wxMy4zMiw2OAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQybC0yLjQxLTIuNDFjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwCgljLTAuMjEsMC4yMS0wLjIxLDAuNTQsMCwwLjc1bDIuNDEsMi40MWwtMi40MiwyLjQyQzYuNzcsNzMuMDUsNi43Nyw3My4zOSw2Ljk4LDczLjU5TDYuOTgsNzMuNTl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xMC4xNSw3OC40M2M0LjQxLDAsOC0zLjU5LDgtOGMwLTQuNDEtMy41OS04LTgtOGMtNC40MSwwLTgsMy41OS04LDhDMi4xNSw3NC44NCw1Ljc0LDc4LjQzLDEwLjE1LDc4LjQzegoJIE0xMC4xNSw2My40OWMzLjgzLDAsNi45NCwzLjExLDYuOTQsNi45NGMwLDMuODMtMy4xMSw2Ljk0LTYuOTQsNi45NGMtMy44MywwLTYuOTQtMy4xMS02Ljk0LTYuOTQKCUMzLjIxLDY2LjYsNi4zMyw2My40OSwxMC4xNSw2My40OUwxMC4xNSw2My40OXoiLz4KPC9zdmc+";function l1e(){var r=uW();return P.createElement(Z_,{className:br(a9.btnClearSearch,cg.visibleOnSearchOnly),onClick:r,"aria-label":"Clear",title:"Clear"},P.createElement("div",{className:br(a9.icnClearnSearch)}))}var c1e={":hover":{"> .epr-icn-clear-search":{backgroundPositionY:"-60px"}}},a9=Ei.create(Bi({btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+FW+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},Dh("icnClearnSearch",{backgroundPositionY:"-40px"}),Dh("btnClearSearch",c1e))),l4=Ja(hr.emojiPicker)+" "+Ja(hr.emojiList),BW=["button",Ja(hr.emoji)].join(""),u1e=Ja(hr.category);function f1e(r){var e=r.value;if(!e)return null;var t=d1e(e);return P.createElement("style",null,`
    `+l4+" "+BW+` {
      display: none;
    }


    `+l4+" "+t+` {
      display: flex;
    }

    `+l4+" "+u1e+":not(:has("+t+`)) {
      display: none;
    }
  `)}function d1e(r){return[BW,'[data-full-name*="',f3(r),'"]'].join("")}var h1e="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCAyMCA0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgNDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTEyLDguODFjMCwyLjA4LTEuNjgsMy43Ni0zLjc2LDMuNzZjLTIuMDgsMC0zLjc2LTEuNjgtMy43Ni0zLjc2CgljMC0yLjA4LDEuNjgtMy43NiwzLjc2LTMuNzZDMTAuMzIsNS4wNSwxMiw2LjczLDEyLDguODF6IE0xMS4yMywxMi43MmMtMC44MywwLjY0LTEuODcsMS4wMS0yLjk5LDEuMDFjLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTIKCWMwLTIuNzIsMi4yLTQuOTIsNC45Mi00LjkyYzIuNzIsMCw0LjkyLDIuMiw0LjkyLDQuOTJjMCwxLjEzLTAuMzgsMi4xNi0xLjAxLDIuOTlsMy45NCwzLjkzYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyCgljLTAuMjUsMC4yNS0wLjY2LDAuMjUtMC45MiwwTDExLjIzLDEyLjcyeiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTEyLDI4LjgxYzAsMi4wOC0xLjY4LDMuNzYtMy43NiwzLjc2Yy0yLjA4LDAtMy43Ni0xLjY4LTMuNzYtMy43NgoJYzAtMi4wOCwxLjY4LTMuNzYsMy43Ni0zLjc2QzEwLjMyLDI1LjA1LDEyLDI2LjczLDEyLDI4LjgxeiBNMTEuMjMsMzIuNzJjLTAuODMsMC42NC0xLjg3LDEuMDEtMi45OSwxLjAxCgljLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTJjMC0yLjcyLDIuMi00LjkyLDQuOTItNC45MmMyLjcyLDAsNC45MiwyLjIsNC45Miw0LjkyYzAsMS4xMy0wLjM4LDIuMTYtMS4wMSwyLjk5bDMuOTQsMy45MwoJYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyYy0wLjI1LDAuMjUtMC42NiwwLjI1LTAuOTIsMEwxMS4yMywzMi43MnoiLz4KPC9zdmc+";function p1e(){return P.createElement("div",{className:br(m1e.icnSearch)})}var m1e=Ei.create(Bi({icnSearch:{".":"epr-icn-search",content:"",position:"absolute",top:"50%",left:"var(--epr-search-bar-inner-padding)",transform:"translateY(-50%)",width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"20px",backgroundImage:"url("+h1e+")"}},Dh("icnSearch",{backgroundPositionY:"-20px"})));function g1e(){var r=Q7(),e=Ik();return r?null:P.createElement(PW,{className:br(Ax.overlay)},P.createElement(v1e,null),e?P.createElement(OW,null):null)}function v1e(){var r=P.useState(0),e=r[0],t=r[1],n=dg(),i=Xh(),s=Qme(),a=qme(),o=Fge(),l=o.statusSearchResults,c=o.searchTerm,u=o.onChange,f=i==null?void 0:i.current,d=f==null?void 0:f.value;return P.createElement(FA,{className:br(Ax.searchContainer)},P.createElement(f1e,{value:d}),P.createElement("input",{autoFocus:a,"aria-label":"Type to search for an emoji",onFocus:n,className:br(Ax.search),type:"text","aria-controls":"epr-search-id",placeholder:s,onChange:function(g){t(e+1),setTimeout(function(){var _,w;u((_=g==null||(w=g.target)==null?void 0:w.value)!=null?_:d)})},ref:i}),c?P.createElement("div",{role:"status",className:br("epr-status-search-results",Ax.visuallyHidden),"aria-live":"polite",id:"epr-search-id","aria-atomic":"true"},l):null,P.createElement(p1e,null),P.createElement(l1e,null))}var Ax=Ei.create(Bi({overlay:{padding:"var(--epr-header-padding)",zIndex:"var(--epr-header-overlay-z-index)"},searchContainer:{".":"epr-search-container",flex:"1",display:"block",minWidth:"0"},visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"},search:{outline:"none",transition:"all 0.2s ease-in-out",color:"var(--epr-search-input-text-color)",borderRadius:"var(--epr-search-input-border-radius)",padding:"var(--epr-search-input-padding)",height:"var(--epr-search-input-height)",backgroundColor:"var(--epr-search-input-bg-color)",border:"1px solid var(--epr-search-input-bg-color)",width:"100%",":focus":{backgroundColor:"var(--epr-search-input-bg-color-active)",border:"1px solid var(--epr-search-border-color)"},"::placeholder":{color:"var(--epr-search-input-placeholder-color)"}},btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+FW+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},Dh("icnClearnSearch",{backgroundPositionY:"-40px"}),Dh("btnClearSearch",{":hover > .epr-icn-clear-search":{backgroundPositionY:"-60px"}})));function y1e(){return P.createElement(FA,{className:br("epr-header",cg.hiddenOnReactions)},P.createElement(g1e,null),P.createElement(a1e,null))}function w1e(r){return P.createElement(wge,null,P.createElement(hme,null),P.createElement(Yme,Object.assign({},r),P.createElement(_1e,null)))}function _1e(){var r=EA(),e=r[0],t=W7(),n=P.useState(!e),i=n[0],s=n[1],a=$me();return P.useEffect(function(){e&&!t||i||s(!0)},[i,t,e]),a?P.createElement(n0e,null,P.createElement(I0e,null),P.createElement(b1e,{renderAll:i})):null}function b1e(r){var e=r.renderAll;return e?P.createElement(P.Fragment,null,P.createElement(y1e,null),P.createElement(z0e,null),P.createElement(K0e,null)):null}var S1e=P.memo(w1e,R7),x1e=function(r){ume(e,r);function e(n){var i;return i=r.call(this,n)||this,i.state={hasError:!1},i}e.getDerivedStateFromError=function(){return{hasError:!0}};var t=e.prototype;return t.componentDidCatch=function(i,s){console.error("Emoji Picker React failed to render:",i,s)},t.render=function(){return this.state.hasError?null:this.props.children},e}(P.Component);function C1e(r){var e=Xme({onEmojiClick:r.onEmojiClick,onReactionClick:r.onReactionClick,onSkinToneChange:r.onSkinToneChange});return P.createElement(x1e,null,P.createElement(G7.Provider,{value:e},P.createElement(S1e,Object.assign({},r))))}const Tx="/assets/s-societybackground-Dvb4JnNP.jpg";function M1e({onClose:r,setPosts:e}){const[t,n]=P.useState(""),[i,s]=P.useState(!1),[a,o]=P.useState([]),[l,c]=P.useState([]),[u,f]=P.useState(!1),[d,p]=P.useState(null),[g,_]=P.useState("");P.useEffect(()=>{(async()=>{const k=JSON.parse(localStorage.getItem("currentUser"));if(k&&k.uid)try{const O=await F1(Qr(wr,"users",k.uid));if(O.exists()){const R=O.data();p({...k,photoURL:R.photoURL||k.photoURL||Tx,displayName:R.displayName||k.displayName||"Anonymous"})}else p(k)}catch(O){console.error("Error fetching updated user data:",O),p(k)}})()},[]);const w=async()=>{if(!(!t&&l.length===0)){s(!0);try{const A={text:t,files:l,createdAt:gde(),userName:(d==null?void 0:d.displayName)||"Anonymous",userProfile:(d==null?void 0:d.photoURL)||Tx,userId:d==null?void 0:d.uid},k=await FH(dh(wr,"posts"),A);e(O=>[{id:k.id,...A,createdAt:new Date},...O]),n(""),o([]),c([])}catch(A){console.error("Error adding post: ",A)}finally{s(!1),r()}}},b=async A=>{const k=Array.from(A.target.files);if(k.length+a.length>10){alert("You can only upload a maximum of 10 files.");return}const O=k.filter(R=>R.type.startsWith("image/")||R.type.startsWith("video/"));s(!0);try{const R=await Promise.all(O.map(C));c(I=>[...I,...R.filter(D=>D)])}catch(R){console.error("Error uploading files:",R)}finally{s(!1)}},C=async A=>{const k=new FormData;k.append("file",A),k.append("upload_preset","Styloft");try{const R=await(await fetch("https://api.cloudinary.com/v1_1/ds0xdh85j/image/upload",{method:"POST",body:k})).json();if(R.secure_url)return R.secure_url;throw new Error("Upload failed")}catch(O){return console.error("Cloudinary upload error:",O),null}},M=A=>{n(k=>k+A.emoji)};return j(Br,{children:[S("div",{className:"create-background-blur"}),j("div",{className:"createPost",children:[j("div",{className:"topic",children:[S("button",{className:"clossicon1",onClick:r,children:S("span",{className:"clossicon",children:"Close"})}),S("span",{className:"header",children:"Create Post"}),S("button",{className:`PostButton ${i?"Posting":""}`,onClick:w,disabled:i,children:i?"loading...":S(Do,{icon:$pe})})]}),S("div",{className:"createTop",children:d&&j("div",{className:"current-user-info",children:[S(Gl,{to:"/profile",children:S("img",{src:d.photoURL||Tx,className:"createImage",alt:"User Profile"})}),S("span",{className:"createUserName",children:d.displayName})]})}),S("div",{className:"createCenter",children:S("textarea",{placeholder:"What's on your mind?",rows:"4",cols:"70",className:"addPostInput",value:t,onChange:A=>n(A.target.value)})}),S("div",{className:"uploadedFilesContainer",children:S("div",{className:"uploadedFiles",children:l.map((A,k)=>S("div",{className:"filePreview1",children:A.endsWith(".mp4")?j("video",{controls:!0,className:"fileVideo",children:[S("source",{src:A,type:"video/mp4"}),"Your browser does not support the video tag."]}):S("img",{src:A,alt:`Uploaded file ${k}`,className:"fileImage"})},k))})}),j("div",{className:"createBottom",children:[S("label",{htmlFor:"file-input",className:"uploadButton",children:S(Do,{icon:Vpe,className:"PIcon"})}),S("input",{type:"file",id:"file-input",style:{display:"none"},accept:"image/*,video/*",multiple:!0,onChange:b}),S("label",{onClick:()=>f(!u),children:S(Do,{icon:qpe,className:"emojiIcon"})})]}),u&&S("div",{className:"emojiPickerContainer",children:S(C1e,{onEmojiClick:M})})]})]})}var UW={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o9=ir.createContext&&ir.createContext(UW),A1e=["attr","size","title"];function T1e(r,e){if(r==null)return{};var t=E1e(r,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function E1e(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function CC(){return CC=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},CC.apply(this,arguments)}function l9(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function MC(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l9(Object(t),!0).forEach(function(n){I1e(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):l9(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function I1e(r,e,t){return e=L1e(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function L1e(r){var e=N1e(r,"string");return typeof e=="symbol"?e:e+""}function N1e(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function jW(r){return r&&r.map((e,t)=>ir.createElement(e.tag,MC({key:t},e.attr),jW(e.child)))}function pg(r){return e=>ir.createElement(D1e,CC({attr:MC({},r.attr)},e),jW(r.child))}function D1e(r){var e=t=>{var{attr:n,size:i,title:s}=r,a=T1e(r,A1e),o=i||t.size||"1em",l;return t.className&&(l=t.className),r.className&&(l=(l?l+" ":"")+r.className),ir.createElement("svg",CC({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:l,style:MC(MC({color:r.color||t.color},t.style),r.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&ir.createElement("title",null,s),r.children)};return o9!==void 0?ir.createElement(o9.Consumer,null,t=>e(t)):e(UW)}function k1e(r){return pg({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(r)}function R1e(r){return pg({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(r)}function P1e(r){return pg({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(r)}function O1e(r){return pg({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(r)}function F1e(r){return pg({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M568.482 177.448L424.479 313.433C409.3 327.768 384 317.14 384 295.985v-71.963c-144.575.97-205.566 35.113-164.775 171.353 4.483 14.973-12.846 26.567-25.006 17.33C155.252 383.105 120 326.488 120 269.339c0-143.937 117.599-172.5 264-173.312V24.012c0-21.174 25.317-31.768 40.479-17.448l144.003 135.988c10.02 9.463 10.028 25.425 0 34.896zM384 379.128V448H64V128h50.916a11.99 11.99 0 0 0 8.648-3.693c14.953-15.568 32.237-27.89 51.014-37.676C185.708 80.83 181.584 64 169.033 64H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48v-88.806c0-8.288-8.197-14.066-16.011-11.302a71.83 71.83 0 0 1-34.189 3.377c-7.27-1.046-13.8 4.514-13.8 11.859z"},child:[]}]})(r)}function B1e(r){return pg({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(r)}function U1e(r){return pg({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29 7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160-93.3 160-208 160z"},child:[]}]})(r)}function j1e({post:r}){const[e,t]=P.useState([]),[n,i]=P.useState(!1),[s,a]=P.useState(null);P.useEffect(()=>{const c=JSON.parse(localStorage.getItem("currentUser"));c&&a(c)},[]),P.useEffect(()=>{if(!(r!=null&&r.id))return;const c=Qr(wr,"posts",r.id),u=B1(c,f=>{if(f.exists()){const d=f.data();t(d.likes||[])}});return()=>u()},[r==null?void 0:r.id]);const o=async c=>{if(c.preventDefault(),!(!(r!=null&&r.id)||!s))try{const u=Qr(wr,"posts",r.id);if(e.some(d=>d.userId===s.uid)){const d=e.find(p=>p.userId===s.uid);d&&await va(u,{likes:Xw(d)})}else{const d={userId:s.uid,userName:s.displayName||"Anonymous"};await va(u,{likes:Gm(d)})}}catch(u){console.error("Error updating like:",u)}},l=s&&e.some(c=>c.userId===s.uid);return j("div",{className:"like-container",children:[S("div",{className:"like-button-wrapper",children:j("button",{className:`like-button ${l?"liked":""}`,onClick:o,title:l?"Unlike":"Like",children:[S(O1e,{className:"like-icon"}),S("span",{className:"like-count",onClick:c=>{c.stopPropagation(),i(!n)},children:e.length>0&&e.length})]})}),e.length>0&&j("div",{className:"like-names",children:[S("strong",{})," ",[...new Map(e.map(c=>[c.userId,c])).values()].slice(0,2).map((c,u)=>j("span",{children:[c.userName,u<e.length-1?", ":""]},c.userId)),e.length>3&&j("span",{children:[" and ",e.length-3," others"]})]}),n&&j("div",{className:"likes-popup",children:[j("div",{className:"likes-header",children:[j("h4",{children:[e.length," ",e.length===1?"Like":"Likes"]}),S("button",{className:"close-button",onClick:()=>i(!1),children:""})]}),S("ul",{className:"likes-list",children:[...new Map(e.map(c=>[c.userId,c])).values()].map((c,u)=>S("li",{className:"like-item",children:S("div",{className:"like-user-info",children:S("strong",{children:c.userName})})},`${c.userId}-${u}`))})]})]})}function z1e({post:r}){const[e,t]=P.useState(""),[n,i]=P.useState(""),[s,a]=P.useState(!1),[o,l]=P.useState([]),[c,u]=P.useState(null);P.useEffect(()=>{const _=JSON.parse(localStorage.getItem("currentUser"));_!=null&&_.displayName&&(t(_.displayName),u(_.uid))},[]),P.useEffect(()=>{s&&f()},[s]);const f=async()=>{if(!(r!=null&&r.id))return console.error("Post ID is missing in fetchComments!");try{const _=Qr(wr,"posts",r.id),w=await F1(_);w.exists()&&l(w.data().comments||[])}catch(_){console.error("Error fetching comments: ",_)}},d=()=>{a(_=>!_)},p=async()=>{if(!n.trim())return alert("Comment cannot be empty!");if(!(r!=null&&r.id))return console.error("Post ID is missing!");const _={userId:c,userName:e,text:n,timestamp:new Date().toISOString()};try{const w=Qr(wr,"posts",r.id);await va(w,{comments:Gm(_)}),a(!0),f(),i("")}catch(w){console.error("Error adding comment: ",w)}},g=async _=>{if(!(r!=null&&r.id))return console.error("Post ID is missing!");try{const w=Qr(wr,"posts",r.id);await va(w,{comments:Xw(_)}),l(b=>b.filter(C=>C.timestamp!==_.timestamp))}catch(w){console.error("Error deleting comment: ",w)}};return j("div",{className:"comment-container",children:[S(U1e,{className:"comment-icon",onClick:d}),s&&j("div",{className:"comment-section",children:[j("div",{className:"comment-input-container",children:[S("input",{type:"text",placeholder:"Add a comment...",value:n,onChange:_=>i(_.target.value),onKeyDown:_=>_.key==="Enter"&&p()}),S("button",{onClick:p,className:"comment-button",children:"Comment"})]}),S("ul",{className:"comment-list",children:o.map((_,w)=>j("li",{className:"comment-item",children:[j("div",{className:"comment-user",children:[S(Gl,{to:`/profile/${_.userId}`,className:"comment-user-link",children:S("img",{src:_.profilePic||"../../assets/images/user-profile.png",alt:_.userName||"User",className:"comment-user-img"})}),j("strong",{children:[_.userName||_.userId,":"]})]}),S("div",{className:"comment-content",children:S("p",{children:_.text})}),_.userId===c&&S(B1e,{className:"delete-icon",onClick:()=>g(_)})]},w))})]})]})}function V1e({post:r}){const[e,t]=P.useState([]),[n,i]=P.useState(!1),[s,a]=P.useState(null);P.useEffect(()=>{const c=JSON.parse(localStorage.getItem("currentUser"));c&&a(c)},[]),P.useEffect(()=>{if(!(r!=null&&r.id))return;const c=Qr(wr,"posts",r.id),u=B1(c,f=>{if(f.exists()){const d=f.data();t(d.shares||[])}});return()=>u()},[r==null?void 0:r.id]);const o=async c=>{if(c.preventDefault(),!(!(r!=null&&r.id)||!s))try{const u=Qr(wr,"posts",r.id);if(e.some(d=>d.userId===s.uid)){const d=e.find(p=>p.userId===s.uid);d&&await va(u,{shares:Xw(d)})}else{const d={userId:s.uid,userName:s.displayName||"Anonymous"};await va(u,{shares:Gm(d)})}}catch(u){console.error("Error updating share:",u)}},l=s&&e.some(c=>c.userId===s.uid);return j("div",{className:"share-container",children:[S("div",{className:"share-button-wrapper",children:j("button",{className:`share-button ${l?"shared":""}`,onClick:o,title:l?"Unshare":"Share",children:[S(F1e,{className:"share-icon"}),S("span",{className:"share-count",onClick:c=>{c.stopPropagation(),i(!n)},children:e.length>0&&e.length})]})}),e.length>0&&j("div",{className:"share-names",children:[S("strong",{children:"Shared by:"})," ",[...new Map(e.map(c=>[c.userId,c])).values()].slice(0,3).map((c,u)=>j("span",{children:[c.userName,u<e.length-1?", ":""]},c.userId)),e.length>3&&j("span",{children:[" and ",e.length-3," others"]})]}),n&&j("div",{className:"shares-popup",children:[j("div",{className:"shares-header",children:[j("h4",{children:[e.length," ",e.length===1?"Share":"Shares"]}),S("button",{className:"close-button",onClick:()=>i(!1),children:""})]}),S("ul",{className:"shares-list",children:[...new Map(e.map(c=>[c.userId,c])).values()].map((c,u)=>S("li",{className:"share-item",children:S("div",{className:"share-user-info",children:S("strong",{children:c.userName})})},`${c.userId}-${u}`))})]})]})}function G1e(){const[r,e]=P.useState([]),[t,n]=P.useState(null),[i,s]=P.useState(null),[a,o]=P.useState(""),[l,c]=P.useState(!0);P.useEffect(()=>{const w=s1(dh(wr,"posts"),zL("createdAt","desc")),b=B1(w,C=>{let M=[],A=[];C.docs.forEach(k=>{const O={id:k.id,...k.data()};O.postType==="pinned"?M.push(O):A.push(O)}),e([...M,...A]),c(!1)});return()=>b()},[]);const u=async w=>{try{await mde(Qr(wr,"posts",w)),e(b=>b.filter(C=>C.id!==w))}catch(b){console.error("Error deleting post: ",b)}},f=w=>{const b=`${window.location.origin}/post/${w}`;navigator.clipboard.writeText(b),alert("Post link copied to clipboard!")},d=(w,b)=>{s(w),o(b)},p=async w=>{try{await va(Qr(wr,"posts",w),{text:a}),s(null)}catch(b){console.error("Error updating post: ",b)}},g=async(w,b)=>{let C=b==="pinned"?"normal":"pinned";try{await va(Qr(wr,"posts",w),{postType:C}),alert(C==="pinned"?"Post pinned!":"Post unpinned!")}catch(M){console.error("Error updating pin status: ",M)}},_=w=>{n(t===w?null:w)};return S("div",{className:"post-set",children:l?j("div",{className:"post-loading-container",children:[S(oV,{className:"post-loading-spinner"}),S("p",{children:"Loading posts..."})]}):S("div",{className:"post-list",children:r.map(w=>j("div",{className:`post ${w.postType==="pinned"?"pinned":""}`,children:[j("div",{className:"post-menu",children:[S(Do,{icon:Xpe,className:"menu-icon",onClick:()=>_(w.id)}),t===w.id&&j("div",{className:"menu-dropdown",children:[j("button",{className:"menu-item",onClick:()=>d(w.id,w.text),children:[S(Do,{icon:zpe})," Edit Post"]}),j("button",{className:"menu-item",onClick:()=>alert("Post saved!"),children:[S(Do,{icon:Hpe})," Save Post"]}),j("button",{className:"menu-item",onClick:()=>g(w.id,w.postType),children:[S(Do,{icon:Zpe})," ",w.postType==="pinned"?"Unpin Post":"Pin Post"]}),j("button",{className:"menu-item",onClick:()=>f(w.id),children:[S(Do,{icon:Qpe})," Copy Link"]}),j("button",{className:"menu-item delete",onClick:()=>u(w.id),children:[S(Do,{icon:Wpe})," Delete"]})]})]}),j("div",{className:"post-user",children:[S("img",{src:w.userProfile,alt:"User Profile",className:"post-user-img"}),S("span",{className:"post-user-name",children:w.userName}),S("small",{className:"post-timestamp",children:w.createdAt?new Date(w.createdAt.toDate()).toLocaleString():"Just now"})]}),i===w.id?j(Br,{children:[S("textarea",{className:"edit-input",value:a,onChange:b=>o(b.target.value)}),S("button",{className:"save-btn",onClick:()=>p(w.id),children:"Save"})]}):S("p",{children:w.text}),w.files&&w.files.length>0&&S("div",{className:"post-media",children:w.files.map((b,C)=>S("div",{className:"file-preview",children:b.endsWith(".mp4")?S("video",{controls:!0,className:"post-video",children:S("source",{src:b,type:"video/mp4"})}):S("img",{src:b,alt:`Uploaded file ${C}`,className:"post-image"})},C))}),j("div",{className:"p-action",children:[S(j1e,{post:w}),S(z1e,{post:w}),S(V1e,{post:w})]})]},w.id))})})}const H1e=({setPosts:r})=>{const[e,t]=P.useState(!1),[n,i]=P.useState(!1),[s,a]=P.useState(null),o=Yc();P.useEffect(()=>{(async()=>{const d=JSON.parse(localStorage.getItem("currentUser"));if(d&&d.uid){a(d);try{const p=Qr(wr,"users",d.uid),g=await F1(p);if(g.exists()){const _=g.data();a(w=>({...w,photoURL:_.photoURL||w.photoURL,displayName:_.displayName||w.displayName})),localStorage.setItem("currentUser",JSON.stringify({...d,photoURL:_.photoURL||d.photoURL,displayName:_.displayName||d.displayName}))}}catch(p){console.error("Error fetching latest user data:",p)}}})()},[]);const l=()=>{t(!0),i(!0)},c=()=>{t(!1),i(!1)},u=()=>{o("/profile")};return j("div",{className:"add-post-container",children:[j("div",{className:"add-post",children:[S("img",{src:(s==null?void 0:s.photoURL)||Tx,alt:"user",className:"createImage",onClick:u}),S("span",{className:`post-input ${n?"active":""}`,onClick:l,children:"What's on your mind?"})]}),j("div",{className:"post-options",children:[j("div",{className:"post-option",children:[S(Do,{icon:Ype,className:"Camicon"}),S("span",{children:"Media"})]}),j("div",{className:"post-option",children:[S(Do,{icon:Upe,className:"Calicon"}),S("span",{children:"Event"})]}),j("div",{className:"post-option",children:[S(Do,{icon:Fpe,className:"Filicon"}),S("span",{children:"Write article"})]})]}),e&&S(M1e,{onClose:c,setPosts:r})]})},i_="/assets/user-profile-R99tC7TI.png",W1e=({updateFollowingCount:r,updateFollowerCount:e})=>{const[t,n]=P.useState([]),[i,s]=P.useState({}),[a,o]=P.useState({}),[l,c]=P.useState(null),[u,f]=P.useState({}),[d,p]=P.useState(!0);P.useEffect(()=>{const C=JV(ol,async M=>{M?(c(M),await _(M.displayName||"Unknown User",M.photoURL,M.email),g(M.email)):c(null)});return()=>C()},[]);const g=async C=>{const M=dh(wr,"users",C,"following"),A=await a1(M),k={};A.forEach(O=>{k[O.id]=!0}),s(k)};P.useEffect(()=>{if(!l)return;const C=dh(wr,"feed"),M=B1(C,A=>{const k=A.docs.map(O=>({id:O.id,...O.data()})).filter(O=>O.email!==l.email&&!i[O.email]);n(k),p(!1)});return()=>M()},[l,i]),P.useEffect(()=>{if(!t.length)return;const C=t.map(A=>A.email).filter(Boolean);console.log("Watching profiles for emails:",C);const M=C.map(A=>{const k=Qr(wr,"users",A);return B1(k,O=>{if(O.exists()){const R=O.data();console.log(`Profile update for ${A}:`,R),f(I=>({...I,[A]:{photoURL:R.photoURL||null,displayName:R.displayName||R.name||"Unknown User"}}))}else console.log(`No document found for user ${A}`)},O=>{console.error(`Error listening to profile updates for ${A}:`,O)})});return()=>{M.forEach(A=>A())}},[t]);const _=async(C,M,A)=>{const k=dh(wr,"feed"),O=s1(k,iB("email","==",A));if((await a1(O)).empty)try{await FH(k,{name:C,avatar:M,email:A})}catch(I){console.error("Error adding to feed:",I)}},w=async(C,M)=>{if(l){console.log("Following:",C),s(A=>({...A,[C]:!0})),setTimeout(()=>{o(A=>({...A,[M]:!0}))},3e3);try{const A=Qr(wr,"users",l.uid),k=s1(dh(wr,"users"),iB("email","==",C)),O=await a1(k);if(O.empty)console.error("Could not find user document for:",C);else{const I=O.docs[0].id;await va(A,{following:Gm(I)}),await va(Qr(wr,"users",I),{followers:Gm(l.uid)}),console.log(" Followed:",C);const D=Qr(wr,"users",l.email,"following",C),E=Qr(wr,"users",C,"followers",l.email);await mC(D,{email:C}),await mC(E,{email:l.email}),r(l.email),e(C)}}catch(A){console.error(" Error following user:",A)}}},b=async C=>{try{n(M=>M.filter(A=>A.id!==C)),o(M=>({...M,[C]:!0}))}catch(M){console.error("Error deleting feed item:",M)}};return S("div",{className:"feds",children:d?S("div",{className:"feed-loader-container",children:S("div",{className:"feed-loader"})}):j("div",{className:"Feed-container",children:[S("div",{className:"Feed-header",children:S("p",{children:"Your Feed"})}),t.length===0?S("div",{className:"empty-feed-message",children:S("p",{children:"No new users to follow at this time"})}):t.map(C=>{var M;return a[C.id]?null:j("div",{className:"Feed-item",children:[console.log("Rendering feed item:",C.email,{profileUpdateAvailable:!!u[C.email],profilePhotoURL:(M=u[C.email])==null?void 0:M.photoURL,originalAvatar:C.avatar}),S("img",{src:u[C.email]&&u[C.email].photoURL||C.avatar,className:"Feed-avatar",alt:C.name||"User avatar",onError:A=>{console.log("Image failed to load, using default"),A.target.onerror=null,A.target.src=i_}}),S("div",{className:"Feed-info",children:S("p",{className:"Feed-title",children:u[C.email]&&u[C.email].displayName||C.name})}),j("div",{className:"Feed-actions",children:[S("button",{className:`followbtn ${i[C.email]?"following":""}`,onClick:()=>w(C.email,C.id),children:i[C.email]?"Following":"+ Follow"}),S("button",{className:"deletebtn",onClick:()=>b(C.id),children:" Delete"})]})]},C.id)})]})})},AC="/assets/profile-background-DJ4VBc1u.jpg",Y1e=()=>{const[r,e]=P.useState(i_),[t,n]=P.useState(AC),[i,s]=P.useState(""),[a,o]=P.useState(null),[l,c]=P.useState(""),[u,f]=P.useState(""),[d,p]=P.useState(!0),g=async w=>{try{p(!0);const b=Qr(wr,"users",w),C=await F1(b);if(C.exists()){const M=C.data();M.displayName&&s(M.displayName),M.photoURL&&e(M.photoURL),M.coverPhotoURL&&n(M.coverPhotoURL),M.aboutText&&c(M.aboutText),M.profession&&f(M.profession)}}catch(b){console.error("Error fetching user data:",b)}finally{p(!1)}};P.useEffect(()=>{const w=localStorage.getItem("currentUser");if(w)try{const b=JSON.parse(w);b&&b.uid&&(o(b.uid),g(b.uid),b.displayName&&s(b.displayName),b.photoURL&&e(b.photoURL),b.coverPhotoURL&&n(b.coverPhotoURL),b.aboutText&&c(b.aboutText),b.profession&&f(b.profession))}catch(b){console.error("Error parsing user from localStorage:",b)}return window.addEventListener("profileUpdated",_),()=>{window.removeEventListener("profileUpdated",_)}},[]);const _=w=>{w.detail&&w.detail.userId?g(w.detail.userId):a&&g(a)};return S("div",{className:"SocietyProfile-container",children:d?j("div",{className:"SocietyProfile-loader",children:[S("div",{className:"society-spinner"}),S("p",{children:"Loading Profile..."})]}):j(Br,{children:[j("div",{className:"SocietyProfile-header",children:[S("div",{className:"SocietyProfileCover-photo",children:S("img",{src:t,alt:"Cover",className:"SocietyProfileCover-img",onError:w=>{w.target.onerror=null,w.target.src=AC}})}),j("div",{className:"SocietyProfile-details",children:[S("div",{className:"SocietyProfile-pic-container",children:S("img",{src:r,alt:"Profile",className:"SocietyProfile-pic",onError:w=>{w.target.onerror=null,w.target.src=i_}})}),j("div",{className:"SocietyProfile-info",children:[S("h3",{children:i||"User"}),u&&S("p",{className:"society-profession",children:u})]})]})]}),j("div",{className:"SocietyProfile-about-section",children:[S("h4",{children:"About"}),S("div",{className:"SocietyProfile-about-content",children:S("p",{children:l||"No information provided."})})]})]})})};function J1e(){const[r,e]=P.useState(""),[t,n]=P.useState([]),[i,s]=P.useState([]),[a,o]=P.useState(""),[l,c]=P.useState(!1),[u,f]=P.useState(!1),d=Yc();P.useEffect(()=>{p()},[]);const p=async()=>{f(!0);try{const A=dh(wr,"users");console.log("Starting to fetch all users...");const k=s1(A),O=await a1(k);console.log(`Retrieved ${O.size} users from Firestore`);const R=[];O.forEach(I=>{const D=I.data();console.log(`Processing user: ${I.id}`,D),R.push({id:I.id,name:D.displayName||D.name||"User",photoURL:D.photoURL||"/dp.jpg",profession:D.profession||"",uid:D.uid||I.id})}),console.log(`Processed ${R.length} users successfully`),R.length===0&&console.warn("No users found in the database. Check Firestore permissions and data."),s(R),n(R)}catch(A){console.error("Error fetching all users:",A),alert(`Failed to load users: ${A.message}`)}finally{f(!1)}};P.useEffect(()=>{const A=setTimeout(()=>{r.trim()?_():n(i)},500);return()=>clearTimeout(A)},[r,i]);const g=A=>{e(A.target.value),c(!0)},_=async()=>{if(!r.trim()){n(i);return}f(!0),o("");try{console.log("Searching for:",r);const A=r.toLowerCase(),k=i.filter(E=>E.name.toLowerCase().includes(A)||E.profession&&E.profession.toLowerCase().includes(A));if(k.length>0){console.log("Found users by local filtering:",k.length),n(k);return}const O=dh(wr,"users"),R=s1(O,zL("displayName"),fde(r),dde(r+""),sB(20)),I=await a1(R),D=[];if(I.forEach(E=>{const B=E.data();D.push({id:E.id,name:B.displayName||B.name||"User",photoURL:B.photoURL||"/dp.jpg",profession:B.profession||"",uid:B.uid||E.id})}),console.log("Found users by Firestore query:",D.length),n(D),D.length===0){const E=s1(O,zL("displayName"),sB(50)),B=await a1(E),U=[];B.forEach(V=>{const X=V.data();X.displayName&&X.displayName.toLowerCase().includes(r.toLowerCase())&&U.push({id:V.id,name:X.displayName||"User",photoURL:X.photoURL||"/dp.jpg",profession:X.profession||"",uid:X.uid||V.id})}),console.log("Fallback search results:",U.length),U.length>0?n(U):(n([]),o("No users found matching your search."))}}catch(A){console.error("Error searching users:",A),o(`An error occurred while searching: ${A.message}`),n([])}finally{f(!1)}},w=()=>{_()},b=A=>{console.log("Navigating to profile with ID:",A),d(`/profile/${A}`),c(!1),e("")},C=()=>{c(!1),e("")},M=()=>{c(!0),r.trim()||n(i)};return P.useEffect(()=>{const A=k=>{k.target.closest(".stylesearch-container")||c(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[]),j("div",{className:"stylesearch-container",children:[j("div",{className:"stylesearch-bar",children:[S("input",{type:"text",placeholder:"Search Designers",className:"stylesearch-input",value:r,onChange:g,"aria-label":"Search Designers",onFocus:M}),S("button",{className:"stylesearch-button",onClick:w,children:S(rD,{className:"stylesearch-icon"})})]}),l&&j("div",{className:"search-result-container",children:[u?S("div",{className:"loading-indicator",children:S("p",{children:"Loading profiles..."})}):t.length>0?t.map(A=>j("div",{className:"search-result",onClick:()=>b(A.id),style:{cursor:"pointer"},children:[S("img",{src:A.photoURL||"/dp.jpg",alt:"avatar",className:"search-result-avatar",onError:k=>{k.target.onerror=null,k.target.src="/dp.jpg"}}),j("div",{className:"search-result-info",children:[S("p",{className:"search-result-name",children:A.name}),A.profession&&S("p",{className:"search-result-profession",children:A.profession})]})]},A.id)):S("div",{className:"no-result",children:S("p",{children:a||"No users found"})}),S("button",{className:"close-button",onClick:C,children:S(Oc,{className:"close-icon"})})]})]})}const X1e=[{id:1,image:"https://images.unsplash.com/photo-1539109136881-3be0616acf4b?auto=format&fit=crop&q=80&w=800",title:"Runway Collection",tagline:"Elegance Redefined",designer:"Haute Couture"},{id:2,image:"https://images.unsplash.com/photo-1490481651871-ab68de25d43d?auto=format&fit=crop&q=80&w=800",title:"Summer Essentials",tagline:"Bold & Beautiful",designer:"Chic Designs"},{id:3,image:"https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?auto=format&fit=crop&q=80&w=800",title:"Evening Glamour",tagline:"Timeless Sophistication",designer:"Luxe Fashion"},{id:4,image:"https://images.unsplash.com/photo-1496747611176-843222e1e57c?auto=format&fit=crop&q=80&w=800",title:"Urban Street Style",tagline:"Edgy & Trendsetting",designer:"Metro Vibes"}];function Q1e(){return S("div",{className:"trending-section",children:j("div",{className:"trending-container",children:[S("h1",{className:"trending-title",children:"Wear Your Confidence, Share Your Passion"}),S("p",{className:"trending-subtitle",children:"Discover the latest fashion trends"}),S("div",{className:"fashion-card-container",children:X1e.map(r=>j("div",{className:"fashion-card",children:[S("div",{className:"like-button-container",children:S("button",{className:"like-button",children:S(S1,{className:"heart-icon"})})}),S("div",{className:"image-container",children:S("img",{src:r.image||"/placeholder.svg",alt:r.title,className:"card-image"})}),j("div",{className:"card-content",children:[S("h3",{className:"card-title",children:r.title}),S("p",{className:"card-tagline",children:r.tagline}),j("div",{className:"card-footer",children:[S("span",{className:"designer-name",children:r.designer}),S("div",{className:"rating",children:[...Array(5)].map((e,t)=>S(Fm,{className:"star-icon"},t))})]})]})]},r.id))})]})})}function K1e(){return j("div",{children:[S(J1e,{}),S(H1e,{}),S(G1e,{}),S(W1e,{}),S(Y1e,{})]})}function q1e(){var u,f;const r=P.useRef(null),e=P.useRef(null),[t,n]=P.useState(""),[i,s]=P.useState(!1),a=Yc();P.useEffect(()=>{n("")},[(u=r.current)==null?void 0:u.value,(f=e.current)==null?void 0:f.value]);const o=()=>{r!=null&&r.current&&(r.current.value=""),e!=null&&e.current&&(e.current.value="")};return j(Br,{children:[S("div",{className:"image-section"}),S("div",{className:"login",children:j("div",{className:"wrapper",children:[S("h2",{className:"heading",children:"Sign in to Styloft"}),j("form",{onSubmit:async d=>{d.preventDefault(),s(!0);const p=r.current.value,g=e.current.value;try{const _=await fetch("https://styloftbackendnew-production.up.railway.app/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p,password:g})});if(!_.ok)throw new Error("Failed to login");const w=await _.json();localStorage.setItem("authToken",w.token),localStorage.setItem("profilePicture",w.userProfile.profilePicture),localStorage.setItem("currentUser",JSON.stringify(w.userProfile)),localStorage.setItem("userId",w.userProfile._id),console.log("Login successful",w.userProfile),o(),a("/")}catch(_){n(_.message||"Login failed"),console.error("Error:",_)}finally{s(!1)}},className:"form",children:[t&&S("span",{className:"error-msg",children:t}),S("p",{children:"Username or Email"}),S("input",{required:!0,ref:r,type:"email",placeholder:"Email"}),S("p",{children:"Password"}),S("input",{required:!0,ref:e,type:"password",placeholder:"Password"}),S("span",{className:"forgot-link",children:S("a",{href:"/forgot-password",children:"Forgot password?"})}),S("button",{disabled:i,type:"submit",className:"sign-in-button",children:i?"Loading...":"Sign in"}),S("div",{className:"divider",children:S("span",{children:"or sign in with email"})}),j("button",{type:"button",onClick:async()=>{try{const p=(await iG(ol,jH)).user,g=await p.getIdToken(),_=await fetch("https://styloftbackendnew-production.up.railway.app/user/google-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:g})});if(!_.ok)throw new Error("Google login failed");const w=await _.json();localStorage.setItem("authToken",w.token),localStorage.setItem("profilePicture",p.photoURL),localStorage.setItem("currentUser",JSON.stringify(w.userProfile)),localStorage.setItem("userId",w.userProfile._id),console.log("Google login successful",w.userProfile),console.log("Profile Picture URL:",p.photoURL),a("/")}catch(d){console.error("Google login failed",d),n("Google login failed")}},className:"google-sign-in-button",children:[S("img",{src:"https://img.icons8.com/color/48/000000/google-logo.png",className:"google-logo",alt:"Google"}),S("span",{children:"Sign in with Google"})]}),S("span",{className:"link",children:S("a",{href:"/register",children:"No account? Register here."})})]})]})})]})}function Z1e(){const r=P.useRef(null),e=P.useRef(null),t=P.useRef(null),n=P.useRef(null),i=P.useRef(null),[s,a]=P.useState(""),[o,l]=P.useState(!1),c=Yc(),u=()=>{[r,e,t,n,i].forEach(p=>(p==null?void 0:p.current)&&(p.current.value=""))};return j(Br,{children:[S("div",{className:"image-box"}),S("div",{className:"register",children:j("div",{className:"logincover",children:[S("h2",{className:"heading",children:"Create a Styloft Account"}),j("form",{onSubmit:async p=>{p.preventDefault(),l(!0),a("");const g=r.current.value.trim(),_=e.current.value.trim(),w=t.current.value.trim(),b=n.current.value,C=i.current.value;if(b!==C){a("Passwords do not match"),l(!1);return}try{const k=await(await Hoe(ol,w,b)).user.getIdToken(),O=await fetch("https://styloftbackendnew-production.up.railway.app/user/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:g,lastName:_,email:w,password:b})});if(!O.ok){const R=await O.json();throw new Error(R.message||"Failed to register")}console.log("Registration successful"),u(),c("/login")}catch(M){a(M.message||"Registration failed")}finally{l(!1)}},className:"form",children:[j("div",{className:"position-radio-group",children:[j("label",{children:[S("input",{type:"radio",name:"position",value:"Designer",required:!0}),"Designer"]}),j("label",{children:[S("input",{type:"radio",name:"position",value:"Student",required:!0}),"Student"]}),j("label",{children:[S("input",{type:"radio",name:"position",value:"Enthusiast",required:!0}),"Enthusiast"]})]}),s&&S("span",{className:"error-msg",children:s}),j("div",{className:"name-title",children:[S("p",{children:"First Name"}),S("p",{children:"Last Name"})]}),j("div",{className:"name-inputs",children:[S("input",{ref:r,type:"text",placeholder:"First Name","aria-label":"First Name",required:!0}),S("input",{ref:e,type:"text",placeholder:"Last Name","aria-label":"Last Name",required:!0})]}),S("p",{children:"Email"}),S("input",{ref:t,type:"email",placeholder:"Email","aria-label":"Email",required:!0}),S("p",{children:"Password"}),S("input",{ref:n,type:"password",placeholder:"Password","aria-label":"Password",required:!0}),S("p",{children:"Confirm Password"}),S("input",{ref:i,type:"password",placeholder:"Confirm Password","aria-label":"Confirm Password",required:!0}),S("button",{disabled:o,type:"submit",className:"register-button",children:o?"Loading...":"Register"}),S("div",{className:"divider",children:S("span",{children:"or register with email"})}),j("button",{type:"button",className:"social-btn google",onClick:async()=>{try{const g=(await iG(ol,jH)).user,_=await g.getIdToken(),w=await fetch("https://styloftbackendnew-production.up.railway.app/user/google-signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:_})});if(!w.ok){const C=await w.json();throw new Error(C.message||"Failed to register with Google")}const b=await w.json();localStorage.setItem("authToken",b.token),localStorage.setItem("profilePicture",g.photoURL),localStorage.setItem("currentUser",JSON.stringify(b.userProfile)),localStorage.setItem("userId",b.userProfile._id),console.log("Google Sign-In successful"),c("/")}catch(p){a(p.message||"Google Sign-In failed")}},children:[S("img",{src:"https://img.icons8.com/color/48/000000/google-logo.png",className:"google-logo",alt:"Google"}),S("span",{children:"Sign in with Google"})]}),S("span",{className:"link",children:S("a",{href:"/login",children:"Already have an account? Sign in here."})})]})]})})]})}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const $_="172",em={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},tm={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},zW=0,h3=1,VW=2,$1e=3,GW=0,BA=1,u1=2,Ec=3,ku=0,vo=1,ll=2,Au=0,Em=1,p3=2,m3=3,g3=4,HW=5,ch=100,WW=101,YW=102,JW=103,XW=104,QW=200,KW=201,qW=202,ZW=203,TC=204,EC=205,$W=206,eY=207,tY=208,nY=209,rY=210,iY=211,sY=212,aY=213,oY=214,IC=0,LC=1,NC=2,Ym=3,DC=4,kC=5,RC=6,PC=7,eb=0,lY=1,cY=2,Tu=0,uY=1,fY=2,dY=3,UA=4,hY=5,pY=6,mY=7,v3="attached",gY="detached",kh=300,Ru=301,Rh=302,G1=303,s_=304,vv=306,Ph=1e3,as=1001,H1=1002,$s=1003,jA=1004,eve=1004,mm=1005,tve=1005,dr=1006,f1=1007,nve=1007,zl=1008,d1=1008,jo=1009,zA=1010,VA=1011,W1=1012,tb=1013,Pu=1014,Mi=1015,ks=1016,GA=1017,HA=1018,Jm=1020,Bk=35902,Uk=1021,jk=1022,os=1023,zk=1024,Vk=1025,Im=1026,Xm=1027,nb=1028,rb=1029,Gk=1030,WA=1031,rve=1032,YA=1033,mw=33776,gw=33777,vw=33778,yw=33779,OC=35840,FC=35841,BC=35842,UC=35843,jC=36196,zC=37492,VC=37496,GC=37808,HC=37809,WC=37810,YC=37811,JC=37812,XC=37813,QC=37814,KC=37815,qC=37816,ZC=37817,$C=37818,eM=37819,tM=37820,nM=37821,ww=36492,rM=36494,iM=36495,Hk=36283,sM=36284,aM=36285,oM=36286,vY=2200,yY=2201,wY=2202,Y1=2300,J1=2301,Ex=2302,gm=2400,vm=2401,a_=2402,JA=2500,Wk=2501,_Y=0,Yk=1,lM=2,bY=3200,Jk=3201,ive=3202,sve=3203,Kh=0,SY=1,Ef="",co="srgb",Ou="srgb-linear",o_="linear",Jr="srgb",ave=0,nm=7680,ove=7681,lve=7682,cve=7683,uve=34055,fve=34056,dve=5386,hve=512,pve=513,mve=514,gve=515,vve=516,yve=517,wve=518,y3=519,xY=512,CY=513,MY=514,Xk=515,AY=516,TY=517,EY=518,IY=519,l_=35044,_ve=35048,bve=35040,Sve=35045,xve=35049,Cve=35041,Mve=35046,Ave=35050,Tve=35042,Eve="100",w3="300 es",Rc=2e3,c_=2001;let Uu=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}};const Ra=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let c9=1234567;const Lm=Math.PI/180,X1=180/Math.PI;function dl(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ra[r&255]+Ra[r>>8&255]+Ra[r>>16&255]+Ra[r>>24&255]+"-"+Ra[e&255]+Ra[e>>8&255]+"-"+Ra[e>>16&15|64]+Ra[e>>24&255]+"-"+Ra[t&63|128]+Ra[t>>8&255]+"-"+Ra[t>>16&255]+Ra[t>>24&255]+Ra[n&255]+Ra[n>>8&255]+Ra[n>>16&255]+Ra[n>>24&255]).toLowerCase()}function Qn(r,e,t){return Math.max(e,Math.min(t,r))}function Qk(r,e){return(r%e+e)%e}function Ive(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function Lve(r,e,t){return r!==e?(t-r)/(e-r):0}function _w(r,e,t){return(1-t)*r+t*e}function Nve(r,e,t,n){return _w(r,e,1-Math.exp(-t*n))}function Dve(r,e=1){return e-Math.abs(Qk(r,e*2)-e)}function kve(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function Rve(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function Pve(r,e){return r+Math.floor(Math.random()*(e-r+1))}function Ove(r,e){return r+Math.random()*(e-r)}function Fve(r){return r*(.5-Math.random())}function Bve(r){r!==void 0&&(c9=r);let e=c9+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Uve(r){return r*Lm}function jve(r){return r*X1}function zve(r){return(r&r-1)===0&&r!==0}function Vve(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function Gve(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function Hve(r,e,t,n,i){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+n)/2),u=a((e+n)/2),f=s((e-n)/2),d=a((e-n)/2),p=s((n-e)/2),g=a((n-e)/2);switch(i){case"XYX":r.set(o*u,l*f,l*d,o*c);break;case"YZY":r.set(l*d,o*u,l*f,o*c);break;case"ZXZ":r.set(l*f,l*d,o*u,o*c);break;case"XZX":r.set(o*u,l*g,l*p,o*c);break;case"YXY":r.set(l*p,o*u,l*g,o*c);break;case"ZYZ":r.set(l*g,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ho(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function nr(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const LY={DEG2RAD:Lm,RAD2DEG:X1,generateUUID:dl,clamp:Qn,euclideanModulo:Qk,mapLinear:Ive,inverseLerp:Lve,lerp:_w,damp:Nve,pingpong:Dve,smoothstep:kve,smootherstep:Rve,randInt:Pve,randFloat:Ove,randFloatSpread:Fve,seededRandom:Bve,degToRad:Uve,radToDeg:jve,isPowerOfTwo:zve,ceilPowerOfTwo:Vve,floorPowerOfTwo:Gve,setQuaternionFromProperEuler:Hve,normalize:nr,denormalize:ho};class Mt{constructor(e=0,t=0){Mt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Qn(this.x,e.x,t.x),this.y=Qn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Qn(this.x,e,t),this.y=Qn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Qn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Qn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*i+e.x,this.y=s*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Xn{constructor(e,t,n,i,s,a,o,l,c){Xn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,a,o,l,c)}set(e,t,n,i,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=n,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,a=n[0],o=n[3],l=n[6],c=n[1],u=n[4],f=n[7],d=n[2],p=n[5],g=n[8],_=i[0],w=i[3],b=i[6],C=i[1],M=i[4],A=i[7],k=i[2],O=i[5],R=i[8];return s[0]=a*_+o*C+l*k,s[3]=a*w+o*M+l*O,s[6]=a*b+o*A+l*R,s[1]=c*_+u*C+f*k,s[4]=c*w+u*M+f*O,s[7]=c*b+u*A+f*R,s[2]=d*_+p*C+g*k,s[5]=d*w+p*M+g*O,s[8]=d*b+p*A+g*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-n*s*u+n*o*l+i*s*c-i*a*l}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],f=u*a-o*c,d=o*l-u*s,p=c*s-a*l,g=t*f+n*d+i*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/g;return e[0]=f*_,e[1]=(i*c-u*n)*_,e[2]=(o*n-i*a)*_,e[3]=d*_,e[4]=(u*t-i*l)*_,e[5]=(i*s-o*t)*_,e[6]=p*_,e[7]=(n*l-c*t)*_,e[8]=(a*t-n*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*a+c*o)+a+e,-i*c,i*l,-i*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(c4.makeScale(e,t)),this}rotate(e){return this.premultiply(c4.makeRotation(-e)),this}translate(e,t){return this.premultiply(c4.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const c4=new Xn;function NY(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const Wve={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function W0(r,e){return new Wve[r](e)}function u_(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function DY(){const r=u_("canvas");return r.style.display="block",r}const u9={};function k0(r){r in u9||(u9[r]=!0,console.warn(r))}function Yve(r,e,t){return new Promise(function(n,i){function s(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:i();break;case r.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function Jve(r){const e=r.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Xve(r){const e=r.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const f9=new Xn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),d9=new Xn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Qve(){const r={enabled:!0,workingColorSpace:Ou,spaces:{},convert:function(i,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Jr&&(i.r=zf(i.r),i.g=zf(i.g),i.b=zf(i.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Jr&&(i.r=h1(i.r),i.g=h1(i.g),i.b=h1(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Ef?o_:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,a){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return r.define({[Ou]:{primaries:e,whitePoint:n,transfer:o_,toXYZ:f9,fromXYZ:d9,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:co},outputColorSpaceConfig:{drawingBufferColorSpace:co}},[co]:{primaries:e,whitePoint:n,transfer:Jr,toXYZ:f9,fromXYZ:d9,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:co}}}),r}const Nr=Qve();function zf(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function h1(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let n0;class kY{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{n0===void 0&&(n0=u_("canvas")),n0.width=e.width,n0.height=e.height;const n=n0.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=n0}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=u_("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=zf(s[a]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(zf(t[n]/255)*255):t[n]=zf(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Kve=0;class ym{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Kve++}),this.uuid=dl(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(u4(i[a].image)):s.push(u4(i[a]))}else s=u4(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function u4(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?kY.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let qve=0;class Ur extends Uu{constructor(e=Ur.DEFAULT_IMAGE,t=Ur.DEFAULT_MAPPING,n=as,i=as,s=dr,a=zl,o=os,l=jo,c=Ur.DEFAULT_ANISOTROPY,u=Ef){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:qve++}),this.uuid=dl(),this.name="",this.source=new ym(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Mt(0,0),this.repeat=new Mt(1,1),this.center=new Mt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Xn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==kh)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ph:e.x=e.x-Math.floor(e.x);break;case as:e.x=e.x<0?0:1;break;case H1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ph:e.y=e.y-Math.floor(e.y);break;case as:e.y=e.y<0?0:1;break;case H1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ur.DEFAULT_IMAGE=null;Ur.DEFAULT_MAPPING=kh;Ur.DEFAULT_ANISOTROPY=1;class Cr{constructor(e=0,t=0,n=0,i=1){Cr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const l=e.elements,c=l[0],u=l[4],f=l[8],d=l[1],p=l[5],g=l[9],_=l[2],w=l[6],b=l[10];if(Math.abs(u-d)<.01&&Math.abs(f-_)<.01&&Math.abs(g-w)<.01){if(Math.abs(u+d)<.1&&Math.abs(f+_)<.1&&Math.abs(g+w)<.1&&Math.abs(c+p+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(c+1)/2,A=(p+1)/2,k=(b+1)/2,O=(u+d)/4,R=(f+_)/4,I=(g+w)/4;return M>A&&M>k?M<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(M),i=O/n,s=R/n):A>k?A<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(A),n=O/i,s=I/i):k<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(k),n=R/s,i=I/s),this.set(n,i,s,t),this}let C=Math.sqrt((w-g)*(w-g)+(f-_)*(f-_)+(d-u)*(d-u));return Math.abs(C)<.001&&(C=1),this.x=(w-g)/C,this.y=(f-_)/C,this.z=(d-u)/C,this.w=Math.acos((c+p+b-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Qn(this.x,e.x,t.x),this.y=Qn(this.y,e.y,t.y),this.z=Qn(this.z,e.z,t.z),this.w=Qn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Qn(this.x,e,t),this.y=Qn(this.y,e,t),this.z=Qn(this.z,e,t),this.w=Qn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Qn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class XA extends Uu{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Cr(0,0,e,t),this.scissorTest=!1,this.viewport=new Cr(0,0,e,t);const i={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:dr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new Ur(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new ym(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class pl extends XA{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class ib extends Ur{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=$s,this.minFilter=$s,this.wrapR=as,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Zve extends pl{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new ib(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class QA extends Ur{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=$s,this.minFilter=$s,this.wrapR=as,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $ve extends pl{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new QA(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ea{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,a,o){let l=n[i+0],c=n[i+1],u=n[i+2],f=n[i+3];const d=s[a+0],p=s[a+1],g=s[a+2],_=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(o===1){e[t+0]=d,e[t+1]=p,e[t+2]=g,e[t+3]=_;return}if(f!==_||l!==d||c!==p||u!==g){let w=1-o;const b=l*d+c*p+u*g+f*_,C=b>=0?1:-1,M=1-b*b;if(M>Number.EPSILON){const k=Math.sqrt(M),O=Math.atan2(k,b*C);w=Math.sin(w*O)/k,o=Math.sin(o*O)/k}const A=o*C;if(l=l*w+d*A,c=c*w+p*A,u=u*w+g*A,f=f*w+_*A,w===1-o){const k=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=k,c*=k,u*=k,f*=k}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,n,i,s,a){const o=n[i],l=n[i+1],c=n[i+2],u=n[i+3],f=s[a],d=s[a+1],p=s[a+2],g=s[a+3];return e[t]=o*g+u*f+l*p-c*d,e[t+1]=l*g+u*d+c*f-o*p,e[t+2]=c*g+u*p+o*d-l*f,e[t+3]=u*g-o*f-l*d-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(n/2),u=o(i/2),f=o(s/2),d=l(n/2),p=l(i/2),g=l(s/2);switch(a){case"XYZ":this._x=d*u*f+c*p*g,this._y=c*p*f-d*u*g,this._z=c*u*g+d*p*f,this._w=c*u*f-d*p*g;break;case"YXZ":this._x=d*u*f+c*p*g,this._y=c*p*f-d*u*g,this._z=c*u*g-d*p*f,this._w=c*u*f+d*p*g;break;case"ZXY":this._x=d*u*f-c*p*g,this._y=c*p*f+d*u*g,this._z=c*u*g+d*p*f,this._w=c*u*f-d*p*g;break;case"ZYX":this._x=d*u*f-c*p*g,this._y=c*p*f+d*u*g,this._z=c*u*g-d*p*f,this._w=c*u*f+d*p*g;break;case"YZX":this._x=d*u*f+c*p*g,this._y=c*p*f+d*u*g,this._z=c*u*g-d*p*f,this._w=c*u*f-d*p*g;break;case"XZY":this._x=d*u*f-c*p*g,this._y=c*p*f-d*u*g,this._z=c*u*g+d*p*f,this._w=c*u*f+d*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],f=t[10],d=n+o+f;if(d>0){const p=.5/Math.sqrt(d+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(a-i)*p}else if(n>o&&n>f){const p=2*Math.sqrt(1+n-o-f);this._w=(u-l)/p,this._x=.25*p,this._y=(i+a)/p,this._z=(s+c)/p}else if(o>f){const p=2*Math.sqrt(1+o-n-f);this._w=(s-c)/p,this._x=(i+a)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+f-n-o);this._w=(a-i)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Qn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+a*o+i*c-s*l,this._y=i*u+a*l+s*o-n*c,this._z=s*u+a*c+n*l-i*o,this._w=a*u-n*o-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,a=this._w;let o=a*e._w+n*e._x+i*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const p=1-t;return this._w=p*a+t*this._w,this._x=p*n+t*this._x,this._y=p*i+t*this._y,this._z=p*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),f=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=a*f+this._w*d,this._x=n*f+this._x*d,this._y=i*f+this._y*d,this._z=s*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ye{constructor(e=0,t=0,n=0){ye.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(h9.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(h9.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*i-o*n),u=2*(o*t-s*i),f=2*(s*n-a*t);return this.x=t+l*c+a*f-o*u,this.y=n+l*u+o*c-s*f,this.z=i+l*f+s*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Qn(this.x,e.x,t.x),this.y=Qn(this.y,e.y,t.y),this.z=Qn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Qn(this.x,e,t),this.y=Qn(this.y,e,t),this.z=Qn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Qn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=i*l-s*o,this.y=s*a-n*l,this.z=n*o-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return f4.copy(this).projectOnVector(e),this.sub(f4)}reflect(e){return this.sub(f4.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Qn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const f4=new ye,h9=new ea;class ta{constructor(e=new ye(1/0,1/0,1/0),t=new ye(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(_c.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(_c.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=_c.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,_c):_c.fromBufferAttribute(s,a),_c.applyMatrix4(e.matrixWorld),this.expandByPoint(_c);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),T2.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),T2.copy(n.boundingBox)),T2.applyMatrix4(e.matrixWorld),this.union(T2)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,_c),_c.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(by),E2.subVectors(this.max,by),r0.subVectors(e.a,by),i0.subVectors(e.b,by),s0.subVectors(e.c,by),Gd.subVectors(i0,r0),Hd.subVectors(s0,i0),Op.subVectors(r0,s0);let t=[0,-Gd.z,Gd.y,0,-Hd.z,Hd.y,0,-Op.z,Op.y,Gd.z,0,-Gd.x,Hd.z,0,-Hd.x,Op.z,0,-Op.x,-Gd.y,Gd.x,0,-Hd.y,Hd.x,0,-Op.y,Op.x,0];return!d4(t,r0,i0,s0,E2)||(t=[1,0,0,0,1,0,0,0,1],!d4(t,r0,i0,s0,E2))?!1:(I2.crossVectors(Gd,Hd),t=[I2.x,I2.y,I2.z],d4(t,r0,i0,s0,E2))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_c).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(_c).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(gf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),gf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),gf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),gf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),gf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),gf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),gf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),gf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(gf),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const gf=[new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye],_c=new ye,T2=new ta,r0=new ye,i0=new ye,s0=new ye,Gd=new ye,Hd=new ye,Op=new ye,by=new ye,E2=new ye,I2=new ye,Fp=new ye;function d4(r,e,t,n,i){for(let s=0,a=r.length-3;s<=a;s+=3){Fp.fromArray(r,s);const o=i.x*Math.abs(Fp.x)+i.y*Math.abs(Fp.y)+i.z*Math.abs(Fp.z),l=e.dot(Fp),c=t.dot(Fp),u=n.dot(Fp);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const eye=new ta,Sy=new ye,h4=new ye;class na{constructor(e=new ye,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):eye.setFromPoints(e).getCenter(n);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Sy.subVectors(e,this.center);const t=Sy.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Sy,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(h4.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Sy.copy(e.center).add(h4)),this.expandByPoint(Sy.copy(e.center).sub(h4))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const vf=new ye,p4=new ye,L2=new ye,Wd=new ye,m4=new ye,N2=new ye,g4=new ye;class mg{constructor(e=new ye,t=new ye(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,vf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=vf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(vf.copy(this.origin).addScaledVector(this.direction,t),vf.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){p4.copy(e).add(t).multiplyScalar(.5),L2.copy(t).sub(e).normalize(),Wd.copy(this.origin).sub(p4);const s=e.distanceTo(t)*.5,a=-this.direction.dot(L2),o=Wd.dot(this.direction),l=-Wd.dot(L2),c=Wd.lengthSq(),u=Math.abs(1-a*a);let f,d,p,g;if(u>0)if(f=a*l-o,d=a*o-l,g=s*u,f>=0)if(d>=-g)if(d<=g){const _=1/u;f*=_,d*=_,p=f*(f+a*d+2*o)+d*(a*f+d+2*l)+c}else d=s,f=Math.max(0,-(a*d+o)),p=-f*f+d*(d+2*l)+c;else d=-s,f=Math.max(0,-(a*d+o)),p=-f*f+d*(d+2*l)+c;else d<=-g?(f=Math.max(0,-(-a*s+o)),d=f>0?-s:Math.min(Math.max(-s,-l),s),p=-f*f+d*(d+2*l)+c):d<=g?(f=0,d=Math.min(Math.max(-s,-l),s),p=d*(d+2*l)+c):(f=Math.max(0,-(a*s+o)),d=f>0?s:Math.min(Math.max(-s,-l),s),p=-f*f+d*(d+2*l)+c);else d=a>0?-s:s,f=Math.max(0,-(a*d+o)),p=-f*f+d*(d+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(p4).addScaledVector(L2,d),p}intersectSphere(e,t){vf.subVectors(e.center,this.origin);const n=vf.dot(this.direction),i=vf.dot(vf)-n*n,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=n-a,l=n+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,d=this.origin;return c>=0?(n=(e.min.x-d.x)*c,i=(e.max.x-d.x)*c):(n=(e.max.x-d.x)*c,i=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,a=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,a=(e.min.y-d.y)*u),n>a||s>i||((s>n||isNaN(n))&&(n=s),(a<i||isNaN(i))&&(i=a),f>=0?(o=(e.min.z-d.z)*f,l=(e.max.z-d.z)*f):(o=(e.max.z-d.z)*f,l=(e.min.z-d.z)*f),n>l||o>i)||((o>n||n!==n)&&(n=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,vf)!==null}intersectTriangle(e,t,n,i,s){m4.subVectors(t,e),N2.subVectors(n,e),g4.crossVectors(m4,N2);let a=this.direction.dot(g4),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Wd.subVectors(this.origin,e);const l=o*this.direction.dot(N2.crossVectors(Wd,N2));if(l<0)return null;const c=o*this.direction.dot(m4.cross(Wd));if(c<0||l+c>a)return null;const u=-o*Wd.dot(g4);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Nn{constructor(e,t,n,i,s,a,o,l,c,u,f,d,p,g,_,w){Nn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,a,o,l,c,u,f,d,p,g,_,w)}set(e,t,n,i,s,a,o,l,c,u,f,d,p,g,_,w){const b=this.elements;return b[0]=e,b[4]=t,b[8]=n,b[12]=i,b[1]=s,b[5]=a,b[9]=o,b[13]=l,b[2]=c,b[6]=u,b[10]=f,b[14]=d,b[3]=p,b[7]=g,b[11]=_,b[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Nn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/a0.setFromMatrixColumn(e,0).length(),s=1/a0.setFromMatrixColumn(e,1).length(),a=1/a0.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const d=a*u,p=a*f,g=o*u,_=o*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=p+g*c,t[5]=d-_*c,t[9]=-o*l,t[2]=_-d*c,t[6]=g+p*c,t[10]=a*l}else if(e.order==="YXZ"){const d=l*u,p=l*f,g=c*u,_=c*f;t[0]=d+_*o,t[4]=g*o-p,t[8]=a*c,t[1]=a*f,t[5]=a*u,t[9]=-o,t[2]=p*o-g,t[6]=_+d*o,t[10]=a*l}else if(e.order==="ZXY"){const d=l*u,p=l*f,g=c*u,_=c*f;t[0]=d-_*o,t[4]=-a*f,t[8]=g+p*o,t[1]=p+g*o,t[5]=a*u,t[9]=_-d*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const d=a*u,p=a*f,g=o*u,_=o*f;t[0]=l*u,t[4]=g*c-p,t[8]=d*c+_,t[1]=l*f,t[5]=_*c+d,t[9]=p*c-g,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const d=a*l,p=a*c,g=o*l,_=o*c;t[0]=l*u,t[4]=_-d*f,t[8]=g*f+p,t[1]=f,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=p*f+g,t[10]=d-_*f}else if(e.order==="XZY"){const d=a*l,p=a*c,g=o*l,_=o*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=d*f+_,t[5]=a*u,t[9]=p*f-g,t[2]=g*f-p,t[6]=o*u,t[10]=_*f+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(tye,e,nye)}lookAt(e,t,n){const i=this.elements;return rl.subVectors(e,t),rl.lengthSq()===0&&(rl.z=1),rl.normalize(),Yd.crossVectors(n,rl),Yd.lengthSq()===0&&(Math.abs(n.z)===1?rl.x+=1e-4:rl.z+=1e-4,rl.normalize(),Yd.crossVectors(n,rl)),Yd.normalize(),D2.crossVectors(rl,Yd),i[0]=Yd.x,i[4]=D2.x,i[8]=rl.x,i[1]=Yd.y,i[5]=D2.y,i[9]=rl.y,i[2]=Yd.z,i[6]=D2.z,i[10]=rl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,a=n[0],o=n[4],l=n[8],c=n[12],u=n[1],f=n[5],d=n[9],p=n[13],g=n[2],_=n[6],w=n[10],b=n[14],C=n[3],M=n[7],A=n[11],k=n[15],O=i[0],R=i[4],I=i[8],D=i[12],E=i[1],B=i[5],U=i[9],V=i[13],X=i[2],te=i[6],ee=i[10],ue=i[14],ne=i[3],oe=i[7],q=i[11],J=i[15];return s[0]=a*O+o*E+l*X+c*ne,s[4]=a*R+o*B+l*te+c*oe,s[8]=a*I+o*U+l*ee+c*q,s[12]=a*D+o*V+l*ue+c*J,s[1]=u*O+f*E+d*X+p*ne,s[5]=u*R+f*B+d*te+p*oe,s[9]=u*I+f*U+d*ee+p*q,s[13]=u*D+f*V+d*ue+p*J,s[2]=g*O+_*E+w*X+b*ne,s[6]=g*R+_*B+w*te+b*oe,s[10]=g*I+_*U+w*ee+b*q,s[14]=g*D+_*V+w*ue+b*J,s[3]=C*O+M*E+A*X+k*ne,s[7]=C*R+M*B+A*te+k*oe,s[11]=C*I+M*U+A*ee+k*q,s[15]=C*D+M*V+A*ue+k*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],f=e[6],d=e[10],p=e[14],g=e[3],_=e[7],w=e[11],b=e[15];return g*(+s*l*f-i*c*f-s*o*d+n*c*d+i*o*p-n*l*p)+_*(+t*l*p-t*c*d+s*a*d-i*a*p+i*c*u-s*l*u)+w*(+t*c*f-t*o*p-s*a*f+n*a*p+s*o*u-n*c*u)+b*(-i*o*u-t*l*f+t*o*d+i*a*f-n*a*d+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],p=e[11],g=e[12],_=e[13],w=e[14],b=e[15],C=f*w*c-_*d*c+_*l*p-o*w*p-f*l*b+o*d*b,M=g*d*c-u*w*c-g*l*p+a*w*p+u*l*b-a*d*b,A=u*_*c-g*f*c+g*o*p-a*_*p-u*o*b+a*f*b,k=g*f*l-u*_*l-g*o*d+a*_*d+u*o*w-a*f*w,O=t*C+n*M+i*A+s*k;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/O;return e[0]=C*R,e[1]=(_*d*s-f*w*s-_*i*p+n*w*p+f*i*b-n*d*b)*R,e[2]=(o*w*s-_*l*s+_*i*c-n*w*c-o*i*b+n*l*b)*R,e[3]=(f*l*s-o*d*s-f*i*c+n*d*c+o*i*p-n*l*p)*R,e[4]=M*R,e[5]=(u*w*s-g*d*s+g*i*p-t*w*p-u*i*b+t*d*b)*R,e[6]=(g*l*s-a*w*s-g*i*c+t*w*c+a*i*b-t*l*b)*R,e[7]=(a*d*s-u*l*s+u*i*c-t*d*c-a*i*p+t*l*p)*R,e[8]=A*R,e[9]=(g*f*s-u*_*s-g*n*p+t*_*p+u*n*b-t*f*b)*R,e[10]=(a*_*s-g*o*s+g*n*c-t*_*c-a*n*b+t*o*b)*R,e[11]=(u*o*s-a*f*s-u*n*c+t*f*c+a*n*p-t*o*p)*R,e[12]=k*R,e[13]=(u*_*i-g*f*i+g*n*d-t*_*d-u*n*w+t*f*w)*R,e[14]=(g*o*i-a*_*i-g*n*l+t*_*l+a*n*w-t*o*w)*R,e[15]=(a*f*i-u*o*i+u*n*l-t*f*l-a*n*d+t*o*d)*R,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+n,c*o-i*l,c*l+i*o,0,c*o+i*l,u*o+n,u*l-i*a,0,c*l-i*o,u*l+i*a,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,a){return this.set(1,n,s,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,f=o+o,d=s*c,p=s*u,g=s*f,_=a*u,w=a*f,b=o*f,C=l*c,M=l*u,A=l*f,k=n.x,O=n.y,R=n.z;return i[0]=(1-(_+b))*k,i[1]=(p+A)*k,i[2]=(g-M)*k,i[3]=0,i[4]=(p-A)*O,i[5]=(1-(d+b))*O,i[6]=(w+C)*O,i[7]=0,i[8]=(g+M)*R,i[9]=(w-C)*R,i[10]=(1-(d+_))*R,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=a0.set(i[0],i[1],i[2]).length();const a=a0.set(i[4],i[5],i[6]).length(),o=a0.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],bc.copy(this);const c=1/s,u=1/a,f=1/o;return bc.elements[0]*=c,bc.elements[1]*=c,bc.elements[2]*=c,bc.elements[4]*=u,bc.elements[5]*=u,bc.elements[6]*=u,bc.elements[8]*=f,bc.elements[9]*=f,bc.elements[10]*=f,t.setFromRotationMatrix(bc),n.x=s,n.y=a,n.z=o,this}makePerspective(e,t,n,i,s,a,o=Rc){const l=this.elements,c=2*s/(t-e),u=2*s/(n-i),f=(t+e)/(t-e),d=(n+i)/(n-i);let p,g;if(o===Rc)p=-(a+s)/(a-s),g=-2*a*s/(a-s);else if(o===c_)p=-a/(a-s),g=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,i,s,a,o=Rc){const l=this.elements,c=1/(t-e),u=1/(n-i),f=1/(a-s),d=(t+e)*c,p=(n+i)*u;let g,_;if(o===Rc)g=(a+s)*f,_=-2*f;else if(o===c_)g=s*f,_=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=_,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const a0=new ye,bc=new Nn,tye=new ye(0,0,0),nye=new ye(1,1,1),Yd=new ye,D2=new ye,rl=new ye,p9=new Nn,m9=new ea;class ml{constructor(e=0,t=0,n=0,i=ml.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],c=i[5],u=i[9],f=i[2],d=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(Qn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Qn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Qn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Qn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Qn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-Qn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return p9.makeRotationFromQuaternion(e),this.setFromRotationMatrix(p9,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return m9.setFromEuler(this),this.setFromQuaternion(m9,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ml.DEFAULT_ORDER="XYZ";class Nm{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let rye=0;const g9=new ye,o0=new ea,yf=new Nn,k2=new ye,xy=new ye,iye=new ye,sye=new ea,v9=new ye(1,0,0),y9=new ye(0,1,0),w9=new ye(0,0,1),_9={type:"added"},aye={type:"removed"},l0={type:"childadded",child:null},v4={type:"childremoved",child:null};class Mr extends Uu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:rye++}),this.uuid=dl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Mr.DEFAULT_UP.clone();const e=new ye,t=new ml,n=new ea,i=new ye(1,1,1);function s(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Nn},normalMatrix:{value:new Xn}}),this.matrix=new Nn,this.matrixWorld=new Nn,this.matrixAutoUpdate=Mr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Mr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Nm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return o0.setFromAxisAngle(e,t),this.quaternion.multiply(o0),this}rotateOnWorldAxis(e,t){return o0.setFromAxisAngle(e,t),this.quaternion.premultiply(o0),this}rotateX(e){return this.rotateOnAxis(v9,e)}rotateY(e){return this.rotateOnAxis(y9,e)}rotateZ(e){return this.rotateOnAxis(w9,e)}translateOnAxis(e,t){return g9.copy(e).applyQuaternion(this.quaternion),this.position.add(g9.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(v9,e)}translateY(e){return this.translateOnAxis(y9,e)}translateZ(e){return this.translateOnAxis(w9,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(yf.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?k2.copy(e):k2.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),xy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yf.lookAt(xy,k2,this.up):yf.lookAt(k2,xy,this.up),this.quaternion.setFromRotationMatrix(yf),i&&(yf.extractRotation(i.matrixWorld),o0.setFromRotationMatrix(yf),this.quaternion.premultiply(o0.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(_9),l0.child=e,this.dispatchEvent(l0),l0.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(aye),v4.child=e,this.dispatchEvent(v4),v4.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),yf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),yf.multiply(e.parent.matrixWorld)),e.applyMatrix4(yf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(_9),l0.child=e,this.dispatchEvent(l0),l0.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xy,e,iye),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xy,sye,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),f=a(e.shapes),d=a(e.skeletons),p=a(e.animations),g=a(e.nodes);o.length>0&&(n.geometries=o),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),u.length>0&&(n.images=u),f.length>0&&(n.shapes=f),d.length>0&&(n.skeletons=d),p.length>0&&(n.animations=p),g.length>0&&(n.nodes=g)}return n.object=i,n;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}Mr.DEFAULT_UP=new ye(0,1,0);Mr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Mr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Sc=new ye,wf=new ye,y4=new ye,_f=new ye,c0=new ye,u0=new ye,b9=new ye,w4=new ye,_4=new ye,b4=new ye,S4=new Cr,x4=new Cr,C4=new Cr;class Ro{constructor(e=new ye,t=new ye,n=new ye){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Sc.subVectors(e,t),i.cross(Sc);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){Sc.subVectors(i,t),wf.subVectors(n,t),y4.subVectors(e,t);const a=Sc.dot(Sc),o=Sc.dot(wf),l=Sc.dot(y4),c=wf.dot(wf),u=wf.dot(y4),f=a*c-o*o;if(f===0)return s.set(0,0,0),null;const d=1/f,p=(c*l-o*u)*d,g=(a*u-o*l)*d;return s.set(1-p-g,g,p)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,_f)===null?!1:_f.x>=0&&_f.y>=0&&_f.x+_f.y<=1}static getInterpolation(e,t,n,i,s,a,o,l){return this.getBarycoord(e,t,n,i,_f)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,_f.x),l.addScaledVector(a,_f.y),l.addScaledVector(o,_f.z),l)}static getInterpolatedAttribute(e,t,n,i,s,a){return S4.setScalar(0),x4.setScalar(0),C4.setScalar(0),S4.fromBufferAttribute(e,t),x4.fromBufferAttribute(e,n),C4.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(S4,s.x),a.addScaledVector(x4,s.y),a.addScaledVector(C4,s.z),a}static isFrontFacing(e,t,n,i){return Sc.subVectors(n,t),wf.subVectors(e,t),Sc.cross(wf).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Sc.subVectors(this.c,this.b),wf.subVectors(this.a,this.b),Sc.cross(wf).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ro.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ro.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,s){return Ro.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return Ro.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ro.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let a,o;c0.subVectors(i,n),u0.subVectors(s,n),w4.subVectors(e,n);const l=c0.dot(w4),c=u0.dot(w4);if(l<=0&&c<=0)return t.copy(n);_4.subVectors(e,i);const u=c0.dot(_4),f=u0.dot(_4);if(u>=0&&f<=u)return t.copy(i);const d=l*f-u*c;if(d<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(n).addScaledVector(c0,a);b4.subVectors(e,s);const p=c0.dot(b4),g=u0.dot(b4);if(g>=0&&p<=g)return t.copy(s);const _=p*c-l*g;if(_<=0&&c>=0&&g<=0)return o=c/(c-g),t.copy(n).addScaledVector(u0,o);const w=u*g-p*f;if(w<=0&&f-u>=0&&p-g>=0)return b9.subVectors(s,i),o=(f-u)/(f-u+(p-g)),t.copy(i).addScaledVector(b9,o);const b=1/(w+_+d);return a=_*b,o=d*b,t.copy(n).addScaledVector(c0,a).addScaledVector(u0,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const RY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Jd={h:0,s:0,l:0},R2={h:0,s:0,l:0};function M4(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class Kt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=co){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Nr.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=Nr.workingColorSpace){return this.r=e,this.g=t,this.b=n,Nr.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=Nr.workingColorSpace){if(e=Qk(e,1),t=Qn(t,0,1),n=Qn(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=M4(a,s,e+1/3),this.g=M4(a,s,e),this.b=M4(a,s,e-1/3)}return Nr.toWorkingColorSpace(this,i),this}setStyle(e,t=co){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=co){const n=RY[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=zf(e.r),this.g=zf(e.g),this.b=zf(e.b),this}copyLinearToSRGB(e){return this.r=h1(e.r),this.g=h1(e.g),this.b=h1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=co){return Nr.fromWorkingColorSpace(Pa.copy(this),e),Math.round(Qn(Pa.r*255,0,255))*65536+Math.round(Qn(Pa.g*255,0,255))*256+Math.round(Qn(Pa.b*255,0,255))}getHexString(e=co){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Nr.workingColorSpace){Nr.fromWorkingColorSpace(Pa.copy(this),t);const n=Pa.r,i=Pa.g,s=Pa.b,a=Math.max(n,i,s),o=Math.min(n,i,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const f=a-o;switch(c=u<=.5?f/(a+o):f/(2-a-o),a){case n:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-n)/f+2;break;case s:l=(n-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Nr.workingColorSpace){return Nr.fromWorkingColorSpace(Pa.copy(this),t),e.r=Pa.r,e.g=Pa.g,e.b=Pa.b,e}getStyle(e=co){Nr.fromWorkingColorSpace(Pa.copy(this),e);const t=Pa.r,n=Pa.g,i=Pa.b;return e!==co?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(Jd),this.setHSL(Jd.h+e,Jd.s+t,Jd.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Jd),e.getHSL(R2);const n=_w(Jd.h,R2.h,t),i=_w(Jd.s,R2.s,t),s=_w(Jd.l,R2.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Pa=new Kt;Kt.NAMES=RY;let oye=0;class Os extends Uu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:oye++}),this.uuid=dl(),this.name="",this.type="Material",this.blending=Em,this.side=ku,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=TC,this.blendDst=EC,this.blendEquation=ch,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Kt(0,0,0),this.blendAlpha=0,this.depthFunc=Ym,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=y3,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=nm,this.stencilZFail=nm,this.stencilZPass=nm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Em&&(n.blending=this.blending),this.side!==ku&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==TC&&(n.blendSrc=this.blendSrc),this.blendDst!==EC&&(n.blendDst=this.blendDst),this.blendEquation!==ch&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Ym&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==y3&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==nm&&(n.stencilFail=this.stencilFail),this.stencilZFail!==nm&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==nm&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=i(e.textures),a=i(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class mo extends Os{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Kt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ml,this.combine=eb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const If=lye();function lye(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(n[l]=1024>>-c-14,n[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(n[l]=c+15<<10,n[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(n[l]=31744,n[l|256]=64512,i[l]=24,i[l|256]=24):(n[l]=31744,n[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;(c&8388608)===0;)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:o}}function Io(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=Qn(r,-65504,65504),If.floatView[0]=r;const e=If.uint32View[0],t=e>>23&511;return If.baseTable[t]+((e&8388607)>>If.shiftTable[t])}function Zy(r){const e=r>>10;return If.uint32View[0]=If.mantissaTable[If.offsetTable[e]+(r&1023)]+If.exponentTable[e],If.floatView[0]}const wm={toHalfFloat:Io,fromHalfFloat:Zy},vs=new ye,P2=new Mt;class Pr{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=l_,this.updateRanges=[],this.gpuType=Mi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)P2.fromBufferAttribute(this,t),P2.applyMatrix3(e),this.setXY(t,P2.x,P2.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)vs.fromBufferAttribute(this,t),vs.applyMatrix3(e),this.setXYZ(t,vs.x,vs.y,vs.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)vs.fromBufferAttribute(this,t),vs.applyMatrix4(e),this.setXYZ(t,vs.x,vs.y,vs.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)vs.fromBufferAttribute(this,t),vs.applyNormalMatrix(e),this.setXYZ(t,vs.x,vs.y,vs.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)vs.fromBufferAttribute(this,t),vs.transformDirection(e),this.setXYZ(t,vs.x,vs.y,vs.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ho(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=nr(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ho(t,this.array)),t}setX(e,t){return this.normalized&&(t=nr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ho(t,this.array)),t}setY(e,t){return this.normalized&&(t=nr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ho(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ho(t,this.array)),t}setW(e,t){return this.normalized&&(t=nr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=nr(t,this.array),n=nr(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=nr(t,this.array),n=nr(n,this.array),i=nr(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=nr(t,this.array),n=nr(n,this.array),i=nr(i,this.array),s=nr(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==l_&&(e.usage=this.usage),e}}class cye extends Pr{constructor(e,t,n){super(new Int8Array(e),t,n)}}class uye extends Pr{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class fye extends Pr{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class dye extends Pr{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Kk extends Pr{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class hye extends Pr{constructor(e,t,n){super(new Int32Array(e),t,n)}}class qk extends Pr{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class pye extends Pr{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Zy(this.array[e*this.itemSize]);return this.normalized&&(t=ho(t,this.array)),t}setX(e,t){return this.normalized&&(t=nr(t,this.array)),this.array[e*this.itemSize]=Io(t),this}getY(e){let t=Zy(this.array[e*this.itemSize+1]);return this.normalized&&(t=ho(t,this.array)),t}setY(e,t){return this.normalized&&(t=nr(t,this.array)),this.array[e*this.itemSize+1]=Io(t),this}getZ(e){let t=Zy(this.array[e*this.itemSize+2]);return this.normalized&&(t=ho(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nr(t,this.array)),this.array[e*this.itemSize+2]=Io(t),this}getW(e){let t=Zy(this.array[e*this.itemSize+3]);return this.normalized&&(t=ho(t,this.array)),t}setW(e,t){return this.normalized&&(t=nr(t,this.array)),this.array[e*this.itemSize+3]=Io(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=nr(t,this.array),n=nr(n,this.array)),this.array[e+0]=Io(t),this.array[e+1]=Io(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=nr(t,this.array),n=nr(n,this.array),i=nr(i,this.array)),this.array[e+0]=Io(t),this.array[e+1]=Io(n),this.array[e+2]=Io(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=nr(t,this.array),n=nr(n,this.array),i=nr(i,this.array),s=nr(s,this.array)),this.array[e+0]=Io(t),this.array[e+1]=Io(n),this.array[e+2]=Io(i),this.array[e+3]=Io(s),this}}class wn extends Pr{constructor(e,t,n){super(new Float32Array(e),t,n)}}let mye=0;const Dl=new Nn,A4=new Mr,f0=new ye,il=new ta,Cy=new ta,qs=new ye;class $n extends Uu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:mye++}),this.uuid=dl(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(NY(e)?qk:Kk)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Xn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Dl.makeRotationFromQuaternion(e),this.applyMatrix4(Dl),this}rotateX(e){return Dl.makeRotationX(e),this.applyMatrix4(Dl),this}rotateY(e){return Dl.makeRotationY(e),this.applyMatrix4(Dl),this}rotateZ(e){return Dl.makeRotationZ(e),this.applyMatrix4(Dl),this}translate(e,t,n){return Dl.makeTranslation(e,t,n),this.applyMatrix4(Dl),this}scale(e,t,n){return Dl.makeScale(e,t,n),this.applyMatrix4(Dl),this}lookAt(e){return A4.lookAt(e),A4.updateMatrix(),this.applyMatrix4(A4.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(f0).negate(),this.translate(f0.x,f0.y,f0.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let i=0,s=e.length;i<s;i++){const a=e[i];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new wn(n,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ta);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ye(-1/0,-1/0,-1/0),new ye(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];il.setFromBufferAttribute(s),this.morphTargetsRelative?(qs.addVectors(this.boundingBox.min,il.min),this.boundingBox.expandByPoint(qs),qs.addVectors(this.boundingBox.max,il.max),this.boundingBox.expandByPoint(qs)):(this.boundingBox.expandByPoint(il.min),this.boundingBox.expandByPoint(il.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new na);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ye,1/0);return}if(e){const n=this.boundingSphere.center;if(il.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];Cy.setFromBufferAttribute(o),this.morphTargetsRelative?(qs.addVectors(il.min,Cy.min),il.expandByPoint(qs),qs.addVectors(il.max,Cy.max),il.expandByPoint(qs)):(il.expandByPoint(Cy.min),il.expandByPoint(Cy.max))}il.getCenter(n);let i=0;for(let s=0,a=e.count;s<a;s++)qs.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(qs));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)qs.fromBufferAttribute(o,c),l&&(f0.fromBufferAttribute(e,c),qs.add(f0)),i=Math.max(i,n.distanceToSquared(qs))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Pr(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let I=0;I<n.count;I++)o[I]=new ye,l[I]=new ye;const c=new ye,u=new ye,f=new ye,d=new Mt,p=new Mt,g=new Mt,_=new ye,w=new ye;function b(I,D,E){c.fromBufferAttribute(n,I),u.fromBufferAttribute(n,D),f.fromBufferAttribute(n,E),d.fromBufferAttribute(s,I),p.fromBufferAttribute(s,D),g.fromBufferAttribute(s,E),u.sub(c),f.sub(c),p.sub(d),g.sub(d);const B=1/(p.x*g.y-g.x*p.y);isFinite(B)&&(_.copy(u).multiplyScalar(g.y).addScaledVector(f,-p.y).multiplyScalar(B),w.copy(f).multiplyScalar(p.x).addScaledVector(u,-g.x).multiplyScalar(B),o[I].add(_),o[D].add(_),o[E].add(_),l[I].add(w),l[D].add(w),l[E].add(w))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let I=0,D=C.length;I<D;++I){const E=C[I],B=E.start,U=E.count;for(let V=B,X=B+U;V<X;V+=3)b(e.getX(V+0),e.getX(V+1),e.getX(V+2))}const M=new ye,A=new ye,k=new ye,O=new ye;function R(I){k.fromBufferAttribute(i,I),O.copy(k);const D=o[I];M.copy(D),M.sub(k.multiplyScalar(k.dot(D))).normalize(),A.crossVectors(O,D);const B=A.dot(l[I])<0?-1:1;a.setXYZW(I,M.x,M.y,M.z,B)}for(let I=0,D=C.length;I<D;++I){const E=C[I],B=E.start,U=E.count;for(let V=B,X=B+U;V<X;V+=3)R(e.getX(V+0)),R(e.getX(V+1)),R(e.getX(V+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Pr(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,p=n.count;d<p;d++)n.setXYZ(d,0,0,0);const i=new ye,s=new ye,a=new ye,o=new ye,l=new ye,c=new ye,u=new ye,f=new ye;if(e)for(let d=0,p=e.count;d<p;d+=3){const g=e.getX(d+0),_=e.getX(d+1),w=e.getX(d+2);i.fromBufferAttribute(t,g),s.fromBufferAttribute(t,_),a.fromBufferAttribute(t,w),u.subVectors(a,s),f.subVectors(i,s),u.cross(f),o.fromBufferAttribute(n,g),l.fromBufferAttribute(n,_),c.fromBufferAttribute(n,w),o.add(u),l.add(u),c.add(u),n.setXYZ(g,o.x,o.y,o.z),n.setXYZ(_,l.x,l.y,l.z),n.setXYZ(w,c.x,c.y,c.z)}else for(let d=0,p=t.count;d<p;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),a.fromBufferAttribute(t,d+2),u.subVectors(a,s),f.subVectors(i,s),u.cross(f),n.setXYZ(d+0,u.x,u.y,u.z),n.setXYZ(d+1,u.x,u.y,u.z),n.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)qs.fromBufferAttribute(e,t),qs.normalize(),e.setXYZ(t,qs.x,qs.y,qs.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,f=o.normalized,d=new c.constructor(l.length*u);let p=0,g=0;for(let _=0,w=l.length;_<w;_++){o.isInterleavedBufferAttribute?p=l[_]*o.data.stride+o.offset:p=l[_]*u;for(let b=0;b<u;b++)d[g++]=c[p++]}return new Pr(d,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new $n,n=this.index.array,i=this.attributes;for(const o in i){const l=i[o],c=e(l,n);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,f=c.length;u<f;u++){const d=c[u],p=e(d,n);l.push(p)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,d=c.length;f<d;f++){const p=c[f];u.push(p.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let d=0,p=f.length;d<p;d++)u.push(f[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const f=a[c];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const S9=new Nn,Bp=new mg,O2=new na,x9=new ye,F2=new ye,B2=new ye,U2=new ye,T4=new ye,j2=new ye,C9=new ye,z2=new ye;class si extends Mr{constructor(e=new $n,t=new mo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){j2.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],f=s[l];u!==0&&(T4.fromBufferAttribute(f,e),a?j2.addScaledVector(T4,u):j2.addScaledVector(T4.sub(t),u))}t.add(j2)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),O2.copy(n.boundingSphere),O2.applyMatrix4(s),Bp.copy(e.ray).recast(e.near),!(O2.containsPoint(Bp.origin)===!1&&(Bp.intersectSphere(O2,x9)===null||Bp.origin.distanceToSquared(x9)>(e.far-e.near)**2))&&(S9.copy(s).invert(),Bp.copy(e.ray).applyMatrix4(S9),!(n.boundingBox!==null&&Bp.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Bp)))}_computeIntersections(e,t,n){let i;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,d=s.groups,p=s.drawRange;if(o!==null)if(Array.isArray(a))for(let g=0,_=d.length;g<_;g++){const w=d[g],b=a[w.materialIndex],C=Math.max(w.start,p.start),M=Math.min(o.count,Math.min(w.start+w.count,p.start+p.count));for(let A=C,k=M;A<k;A+=3){const O=o.getX(A),R=o.getX(A+1),I=o.getX(A+2);i=V2(this,b,e,n,c,u,f,O,R,I),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const g=Math.max(0,p.start),_=Math.min(o.count,p.start+p.count);for(let w=g,b=_;w<b;w+=3){const C=o.getX(w),M=o.getX(w+1),A=o.getX(w+2);i=V2(this,a,e,n,c,u,f,C,M,A),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let g=0,_=d.length;g<_;g++){const w=d[g],b=a[w.materialIndex],C=Math.max(w.start,p.start),M=Math.min(l.count,Math.min(w.start+w.count,p.start+p.count));for(let A=C,k=M;A<k;A+=3){const O=A,R=A+1,I=A+2;i=V2(this,b,e,n,c,u,f,O,R,I),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const g=Math.max(0,p.start),_=Math.min(l.count,p.start+p.count);for(let w=g,b=_;w<b;w+=3){const C=w,M=w+1,A=w+2;i=V2(this,a,e,n,c,u,f,C,M,A),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}}}function gye(r,e,t,n,i,s,a,o){let l;if(e.side===vo?l=n.intersectTriangle(a,s,i,!0,o):l=n.intersectTriangle(i,s,a,e.side===ku,o),l===null)return null;z2.copy(o),z2.applyMatrix4(r.matrixWorld);const c=t.ray.origin.distanceTo(z2);return c<t.near||c>t.far?null:{distance:c,point:z2.clone(),object:r}}function V2(r,e,t,n,i,s,a,o,l,c){r.getVertexPosition(o,F2),r.getVertexPosition(l,B2),r.getVertexPosition(c,U2);const u=gye(r,e,t,n,F2,B2,U2,C9);if(u){const f=new ye;Ro.getBarycoord(C9,F2,B2,U2,f),i&&(u.uv=Ro.getInterpolatedAttribute(i,o,l,c,f,new Mt)),s&&(u.uv1=Ro.getInterpolatedAttribute(s,o,l,c,f,new Mt)),a&&(u.normal=Ro.getInterpolatedAttribute(a,o,l,c,f,new ye),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const d={a:o,b:l,c,normal:new ye,materialIndex:0};Ro.getNormal(F2,B2,U2,d.normal),u.face=d,u.barycoord=f}return u}class gg extends $n{constructor(e=1,t=1,n=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],f=[];let d=0,p=0;g("z","y","x",-1,-1,n,t,e,a,s,0),g("z","y","x",1,-1,n,t,-e,a,s,1),g("x","z","y",1,1,e,n,t,i,a,2),g("x","z","y",1,-1,e,n,-t,i,a,3),g("x","y","z",1,-1,e,t,n,i,s,4),g("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(l),this.setAttribute("position",new wn(c,3)),this.setAttribute("normal",new wn(u,3)),this.setAttribute("uv",new wn(f,2));function g(_,w,b,C,M,A,k,O,R,I,D){const E=A/R,B=k/I,U=A/2,V=k/2,X=O/2,te=R+1,ee=I+1;let ue=0,ne=0;const oe=new ye;for(let q=0;q<ee;q++){const J=q*B-V;for(let ie=0;ie<te;ie++){const he=ie*E-U;oe[_]=he*C,oe[w]=J*M,oe[b]=X,c.push(oe.x,oe.y,oe.z),oe[_]=0,oe[w]=0,oe[b]=O>0?1:-1,u.push(oe.x,oe.y,oe.z),f.push(ie/R),f.push(1-q/I),ue+=1}}for(let q=0;q<I;q++)for(let J=0;J<R;J++){const ie=d+J+te*q,he=d+J+te*(q+1),$=d+(J+1)+te*(q+1),ge=d+(J+1)+te*q;l.push(ie,he,ge),l.push(he,$,ge),ne+=6}o.addGroup(p,ne,D),p+=ne,d+=ue}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gg(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Q1(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function lo(r){const e={};for(let t=0;t<r.length;t++){const n=Q1(r[t]);for(const i in n)e[i]=n[i]}return e}function vye(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function PY(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Nr.workingColorSpace}const Zk={clone:Q1,merge:lo};var yye=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,wye=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class zo extends Os{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=yye,this.fragmentShader=wye,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Q1(e.uniforms),this.uniformsGroups=vye(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class sb extends Mr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Nn,this.projectionMatrix=new Nn,this.projectionMatrixInverse=new Nn,this.coordinateSystem=Rc}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Xd=new ye,M9=new Mt,A9=new Mt;let Qi=class extends sb{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=X1*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Lm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return X1*2*Math.atan(Math.tan(Lm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Xd.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Xd.x,Xd.y).multiplyScalar(-e/Xd.z),Xd.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Xd.x,Xd.y).multiplyScalar(-e/Xd.z)}getViewSize(e,t){return this.getViewBounds(e,M9,A9),t.subVectors(A9,M9)}setViewOffset(e,t,n,i,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Lm*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*i/l,t-=a.offsetY*n/c,i*=a.width/l,n*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const d0=-90,h0=1;class OY extends Mr{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Qi(d0,h0,e,t);i.layers=this.layers,this.add(i);const s=new Qi(d0,h0,e,t);s.layers=this.layers,this.add(s);const a=new Qi(d0,h0,e,t);a.layers=this.layers,this.add(a);const o=new Qi(d0,h0,e,t);o.layers=this.layers,this.add(o);const l=new Qi(d0,h0,e,t);l.layers=this.layers,this.add(l);const c=new Qi(d0,h0,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===Rc)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===c_)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,u]=this.children,f=e.getRenderTarget(),d=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const _=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,s),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,o),e.setRenderTarget(n,3,i),e.render(t,l),e.setRenderTarget(n,4,i),e.render(t,c),n.texture.generateMipmaps=_,e.setRenderTarget(n,5,i),e.render(t,u),e.setRenderTarget(f,d,p),e.xr.enabled=g,n.texture.needsPMREMUpdate=!0}}class ab extends Ur{constructor(e,t,n,i,s,a,o,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Ru,super(e,t,n,i,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class $k extends pl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new ab(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:dr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new gg(5,5,5),s=new zo({name:"CubemapFromEquirect",uniforms:Q1(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:vo,blending:Au});s.uniforms.tEquirect.value=t;const a=new si(i,s),o=t.minFilter;return t.minFilter===zl&&(t.minFilter=dr),new OY(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(s)}}class KA{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Kt(e),this.density=t}clone(){return new KA(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class qA{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Kt(e),this.near=t,this.far=n}clone(){return new qA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class ob extends Mr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ml,this.environmentIntensity=1,this.environmentRotation=new ml,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class lb{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=l_,this.updateRanges=[],this.version=0,this.uuid=dl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=dl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=dl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const oo=new ye;class Oh{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)oo.fromBufferAttribute(this,t),oo.applyMatrix4(e),this.setXYZ(t,oo.x,oo.y,oo.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)oo.fromBufferAttribute(this,t),oo.applyNormalMatrix(e),this.setXYZ(t,oo.x,oo.y,oo.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)oo.fromBufferAttribute(this,t),oo.transformDirection(e),this.setXYZ(t,oo.x,oo.y,oo.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=ho(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=nr(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=nr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=nr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=nr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=nr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ho(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ho(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ho(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ho(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=nr(t,this.array),n=nr(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=nr(t,this.array),n=nr(n,this.array),i=nr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=nr(t,this.array),n=nr(n,this.array),i=nr(i,this.array),s=nr(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Pr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Oh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class eR extends Os{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Kt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let p0;const My=new ye,m0=new ye,g0=new ye,v0=new Mt,Ay=new Mt,FY=new Nn,G2=new ye,Ty=new ye,H2=new ye,T9=new Mt,E4=new Mt,E9=new Mt;class BY extends Mr{constructor(e=new eR){if(super(),this.isSprite=!0,this.type="Sprite",p0===void 0){p0=new $n;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new lb(t,5);p0.setIndex([0,1,2,0,2,3]),p0.setAttribute("position",new Oh(n,3,0,!1)),p0.setAttribute("uv",new Oh(n,2,3,!1))}this.geometry=p0,this.material=e,this.center=new Mt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),m0.setFromMatrixScale(this.matrixWorld),FY.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),g0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&m0.multiplyScalar(-g0.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const a=this.center;W2(G2.set(-.5,-.5,0),g0,a,m0,i,s),W2(Ty.set(.5,-.5,0),g0,a,m0,i,s),W2(H2.set(.5,.5,0),g0,a,m0,i,s),T9.set(0,0),E4.set(1,0),E9.set(1,1);let o=e.ray.intersectTriangle(G2,Ty,H2,!1,My);if(o===null&&(W2(Ty.set(-.5,.5,0),g0,a,m0,i,s),E4.set(0,1),o=e.ray.intersectTriangle(G2,H2,Ty,!1,My),o===null))return;const l=e.ray.origin.distanceTo(My);l<e.near||l>e.far||t.push({distance:l,point:My.clone(),uv:Ro.getInterpolation(My,G2,Ty,H2,T9,E4,E9,new Mt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function W2(r,e,t,n,i,s){v0.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(Ay.x=s*v0.x-i*v0.y,Ay.y=i*v0.x+s*v0.y):Ay.copy(v0),r.copy(e),r.x+=Ay.x,r.y+=Ay.y,r.applyMatrix4(FY)}const Y2=new ye,I9=new ye;class UY extends Mr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const i=t.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Y2.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Y2);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Y2.setFromMatrixPosition(e.matrixWorld),I9.setFromMatrixPosition(this.matrixWorld);const n=Y2.distanceTo(I9)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),n>=a)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const L9=new ye,N9=new Cr,D9=new Cr,_ye=new ye,k9=new Nn,J2=new ye,I4=new na,R9=new Nn,L4=new mg;class tR extends si{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=v3,this.bindMatrix=new Nn,this.bindMatrixInverse=new Nn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ta),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,J2),this.boundingBox.expandByPoint(J2)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new na),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,J2),this.boundingSphere.expandByPoint(J2)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),I4.copy(this.boundingSphere),I4.applyMatrix4(i),e.ray.intersectsSphere(I4)!==!1&&(R9.copy(i).invert(),L4.copy(e.ray).applyMatrix4(R9),!(this.boundingBox!==null&&L4.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,L4)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Cr,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===v3?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===gY?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;N9.fromBufferAttribute(i.attributes.skinIndex,e),D9.fromBufferAttribute(i.attributes.skinWeight,e),L9.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=D9.getComponent(s);if(a!==0){const o=N9.getComponent(s);k9.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(_ye.copy(L9).applyMatrix4(k9),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class ZA extends Mr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Uc extends Ur{constructor(e=null,t=1,n=1,i,s,a,o,l,c=$s,u=$s,f,d){super(null,a,o,l,c,u,i,s,f,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const P9=new Nn,bye=new Nn;class cb{constructor(e=[],t=[]){this.uuid=dl(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Nn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Nn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:bye;P9.multiplyMatrices(o,t[s]),P9.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new cb(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Uc(t,e,e,os,Mi);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new ZA),this.bones.push(a),this.boneInverses.push(new Nn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const a=t[i];e.bones.push(a.uuid);const o=n[i];e.boneInverses.push(o.toArray())}return e}}class Fh extends Pr{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const y0=new Nn,O9=new Nn,X2=[],F9=new ta,Sye=new Nn,Ey=new si,Iy=new na;class nR extends si{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Fh(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,Sye)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ta),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,y0),F9.copy(e.boundingBox).applyMatrix4(y0),this.boundingBox.union(F9)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new na),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,y0),Iy.copy(e.boundingSphere).applyMatrix4(y0),this.boundingSphere.union(Iy)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=n.length+1,a=e*s+1;for(let o=0;o<n.length;o++)n[o]=i[a+o]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Ey.geometry=this.geometry,Ey.material=this.material,Ey.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Iy.copy(this.boundingSphere),Iy.applyMatrix4(n),e.ray.intersectsSphere(Iy)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,y0),O9.multiplyMatrices(n,y0),Ey.matrixWorld=O9,Ey.raycast(e,X2);for(let a=0,o=X2.length;a<o;a++){const l=X2[a];l.instanceId=s,l.object=this,t.push(l)}X2.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Fh(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new Uc(new Float32Array(i*this.count),i,this.count,nb,Mi));const s=this.morphTexture.source.data.data;let a=0;for(let c=0;c<n.length;c++)a+=n[c];const o=this.geometry.morphTargetsRelative?1:1-a,l=i*e;s[l]=o,s.set(n,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const N4=new ye,xye=new ye,Cye=new Xn;class Cf{constructor(e=new ye(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=N4.subVectors(n,t).cross(xye.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(N4),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Cye.getNormalMatrix(e),i=this.coplanarPoint(N4).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Up=new na,Q2=new ye;class ub{constructor(e=new Cf,t=new Cf,n=new Cf,i=new Cf,s=new Cf,a=new Cf){this.planes=[e,t,n,i,s,a]}set(e,t,n,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Rc){const n=this.planes,i=e.elements,s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],u=i[5],f=i[6],d=i[7],p=i[8],g=i[9],_=i[10],w=i[11],b=i[12],C=i[13],M=i[14],A=i[15];if(n[0].setComponents(l-s,d-c,w-p,A-b).normalize(),n[1].setComponents(l+s,d+c,w+p,A+b).normalize(),n[2].setComponents(l+a,d+u,w+g,A+C).normalize(),n[3].setComponents(l-a,d-u,w-g,A-C).normalize(),n[4].setComponents(l-o,d-f,w-_,A-M).normalize(),t===Rc)n[5].setComponents(l+o,d+f,w+_,A+M).normalize();else if(t===c_)n[5].setComponents(o,f,_,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Up.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Up.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Up)}intersectsSprite(e){return Up.center.set(0,0,0),Up.radius=.7071067811865476,Up.applyMatrix4(e.matrixWorld),this.intersectsSphere(Up)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Q2.x=i.normal.x>0?e.max.x:e.min.x,Q2.y=i.normal.y>0?e.max.y:e.min.y,Q2.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Q2)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function D4(r,e){return r-e}function Mye(r,e){return r.z-e.z}function Aye(r,e){return e.z-r.z}class Tye{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const o=s[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=i}reset(){this.list.length=0,this.index=0}}const Eo=new Nn,Eye=new Kt(1,1,1),k4=new ub,K2=new ta,jp=new na,Ly=new ye,B9=new ye,Iye=new ye,R4=new Tye,Oa=new si,q2=[];function Lye(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let s=0;s<i;s++)for(let a=0;a<n;a++)e.setComponent(s+t,a,r.getComponent(s,a))}else e.array.set(r.array,t*n);e.needsUpdate=!0}function zp(r,e){if(r.constructor!==e.constructor){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++)e[n]=r[n]}else{const t=Math.min(r.length,e.length);e.set(new r.constructor(r.buffer,0,t))}}class jY extends si{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,n=t*2,i){super(new $n,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Uc(t,e,e,os,Mi);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Uc(t,e,e,rb,Pu);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Uc(t,e,e,os,Mi);n.colorSpace=Nr.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:o,itemSize:l,normalized:c}=a,u=new o.constructor(n*l),f=new Pr(u,l,c);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Pr(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),s=t.getAttribute(n);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ta);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Eo),this.getBoundingBoxAt(s,K2).applyMatrix4(Eo),e.union(K2)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new na);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Eo),this.getBoundingSphereAt(s,jp).applyMatrix4(Eo),e.union(jp)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(D4),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=n):(i=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;Eo.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(Eye.toArray(a.image.data,i*4),a.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=n===-1?a.count:n),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(D4),l=this._availableGeometryIds.shift(),s[l]=i):(l=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,s=n.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(i&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,c=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const u in n.attributes){const f=t.getAttribute(u),d=n.getAttribute(u);Lye(f,d,l);const p=f.itemSize;for(let g=f.count,_=c;g<_;g++){const w=l+g;for(let b=0;b<p;b++)d.setComponent(w,b,0)}d.needsUpdate=!0,d.addUpdateRange(l*p,c*p)}if(i){const u=o.indexStart,f=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let d=0;d<a.count;d++)s.setX(u+d,l+a.getX(d));for(let d=a.count,p=f;d<p;d++)s.setX(u+d,l);s.needsUpdate=!0,s.addUpdateRange(u,o.reservedIndexCount)}return o.start=i?o.indexStart:o.vertexStart,o.count=i?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let i=0,s=n.length;i<s;i++)n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((a,o)=>o).sort((a,o)=>n[a].vertexStart-n[o].vertexStart),s=this.geometry;for(let a=0,o=n.length;a<o;a++){const l=i[a],c=n[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:u,vertexStart:f,reservedIndexCount:d}=c,p=s.index,g=p.array,_=e-f;for(let w=u;w<u+d;w++)g[w]=g[w]+_;p.array.copyWithin(t,u,u+d),p.addUpdateRange(t,d),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:f}=c,d=s.attributes;for(const p in d){const g=d[p],{array:_,itemSize:w}=g;_.copyWithin(e*w,u*w,(u+f)*w),g.addUpdateRange(e*w,f*w)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new ta,a=n.index,o=n.attributes.position;for(let l=i.start,c=i.start+i.count;l<c;l++){let u=l;a&&(u=a.getX(u)),s.expandByPoint(Ly.fromBufferAttribute(o,u))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new na;this.getBoundingBoxAt(e,K2),K2.getCenter(s.center);const a=n.index,o=n.attributes.position;let l=0;for(let c=i.start,u=i.start+i.count;c<u;c++){let f=c;a&&(f=a.getX(f)),Ly.fromBufferAttribute(o,f),l=Math.max(l,s.center.distanceToSquared(Ly))}s.radius=Math.sqrt(l),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(D4);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);zp(this._multiDrawCounts,i),zp(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const a=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;a.dispose(),this._initIndirectTexture(),zp(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),zp(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),zp(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...n.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new $n,this._initializeGeometry(s));const a=this.geometry;s.index&&zp(s.index.array,a.index.array);for(const o in s.attributes)zp(s.attributes[o].array,a.attributes[o].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,a=this.geometry;Oa.material=this.material,Oa.geometry.index=a.index,Oa.geometry.attributes=a.attributes,Oa.geometry.boundingBox===null&&(Oa.geometry.boundingBox=new ta),Oa.geometry.boundingSphere===null&&(Oa.geometry.boundingSphere=new na);for(let o=0,l=n.length;o<l;o++){if(!n[o].visible||!n[o].active)continue;const c=n[o].geometryIndex,u=i[c];Oa.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(o,Oa.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Oa.geometry.boundingBox),this.getBoundingSphereAt(c,Oa.geometry.boundingSphere),Oa.raycast(e,q2);for(let f=0,d=q2.length;f<d;f++){const p=q2[f];p.object=this,p.batchId=o,t.push(p)}q2.length=0}Oa.material=null,Oa.geometry.index=null,Oa.geometry.attributes={},Oa.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,f=this._geometryInfo,d=this.perObjectFrustumCulled,p=this._indirectTexture,g=p.image.data;d&&(Eo.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),k4.setFromProjectionMatrix(Eo,e.coordinateSystem));let _=0;if(this.sortObjects){Eo.copy(this.matrixWorld).invert(),Ly.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Eo),B9.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Eo);for(let C=0,M=l.length;C<M;C++)if(l[C].visible&&l[C].active){const A=l[C].geometryIndex;this.getMatrixAt(C,Eo),this.getBoundingSphereAt(A,jp).applyMatrix4(Eo);let k=!1;if(d&&(k=!k4.intersectsSphere(jp)),!k){const O=f[A],R=Iye.subVectors(jp.center,Ly).dot(B9);R4.push(O.start,O.count,R,C)}}const w=R4.list,b=this.customSort;b===null?w.sort(s.transparent?Aye:Mye):b.call(this,w,n);for(let C=0,M=w.length;C<M;C++){const A=w[C];c[_]=A.start*o,u[_]=A.count,g[_]=A.index,_++}R4.reset()}else for(let w=0,b=l.length;w<b;w++)if(l[w].visible&&l[w].active){const C=l[w].geometryIndex;let M=!1;if(d&&(this.getMatrixAt(w,Eo),this.getBoundingSphereAt(C,jp).applyMatrix4(Eo),M=!k4.intersectsSphere(jp)),!M){const A=f[C];c[_]=A.start*o,u[_]=A.count,g[_]=w,_++}}p.needsUpdate=!0,this._multiDrawCount=_,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,s,a){this.onBeforeRender(e,null,i,s,a)}}class Xa extends Os{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Kt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const cM=new ye,uM=new ye,U9=new Nn,Ny=new mg,Z2=new na,P4=new ye,j9=new ye;class td extends Mr{constructor(e=new $n,t=new Xa){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)cM.fromBufferAttribute(t,i-1),uM.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=cM.distanceTo(uM);e.setAttribute("lineDistance",new wn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Z2.copy(n.boundingSphere),Z2.applyMatrix4(i),Z2.radius+=s,e.ray.intersectsSphere(Z2)===!1)return;U9.copy(i).invert(),Ny.copy(e.ray).applyMatrix4(U9);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=this.isLineSegments?2:1,u=n.index,d=n.attributes.position;if(u!==null){const p=Math.max(0,a.start),g=Math.min(u.count,a.start+a.count);for(let _=p,w=g-1;_<w;_+=c){const b=u.getX(_),C=u.getX(_+1),M=$2(this,e,Ny,l,b,C);M&&t.push(M)}if(this.isLineLoop){const _=u.getX(g-1),w=u.getX(p),b=$2(this,e,Ny,l,_,w);b&&t.push(b)}}else{const p=Math.max(0,a.start),g=Math.min(d.count,a.start+a.count);for(let _=p,w=g-1;_<w;_+=c){const b=$2(this,e,Ny,l,_,_+1);b&&t.push(b)}if(this.isLineLoop){const _=$2(this,e,Ny,l,g-1,p);_&&t.push(_)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function $2(r,e,t,n,i,s){const a=r.geometry.attributes.position;if(cM.fromBufferAttribute(a,i),uM.fromBufferAttribute(a,s),t.distanceSqToSegment(cM,uM,P4,j9)>n)return;P4.applyMatrix4(r.matrixWorld);const l=e.ray.origin.distanceTo(P4);if(!(l<e.near||l>e.far))return{distance:l,point:j9.clone().applyMatrix4(r.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:r}}const z9=new ye,V9=new ye;class Xc extends td{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)z9.fromBufferAttribute(t,i),V9.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+z9.distanceTo(V9);e.setAttribute("lineDistance",new wn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class rR extends td{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class $A extends Os{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Kt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const G9=new Nn,_3=new mg,eS=new na,tS=new ye;class iR extends Mr{constructor(e=new $n,t=new $A){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),eS.copy(n.boundingSphere),eS.applyMatrix4(i),eS.radius+=s,e.ray.intersectsSphere(eS)===!1)return;G9.copy(i).invert(),_3.copy(e.ray).applyMatrix4(G9);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=n.index,f=n.attributes.position;if(c!==null){const d=Math.max(0,a.start),p=Math.min(c.count,a.start+a.count);for(let g=d,_=p;g<_;g++){const w=c.getX(g);tS.fromBufferAttribute(f,w),H9(tS,w,l,i,e,t,this)}}else{const d=Math.max(0,a.start),p=Math.min(f.count,a.start+a.count);for(let g=d,_=p;g<_;g++)tS.fromBufferAttribute(f,g),H9(tS,g,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function H9(r,e,t,n,i,s,a){const o=_3.distanceSqToPoint(r);if(o<t){const l=new ye;_3.closestPointToPoint(r,l),l.applyMatrix4(n);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class kf extends Mr{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Nye extends Ur{constructor(e,t,n,i,s,a,o,l,c){super(e,t,n,i,s,a,o,l,c),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:dr,this.magFilter=s!==void 0?s:dr,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Dye extends Ur{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=$s,this.minFilter=$s,this.generateMipmaps=!1,this.needsUpdate=!0}}class eT extends Ur{constructor(e,t,n,i,s,a,o,l,c,u,f,d){super(null,a,o,l,c,u,i,s,f,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class kye extends eT{constructor(e,t,n,i,s,a){super(e,t,n,s,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=as,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Rye extends eT{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Ru),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class zY extends Ur{constructor(e,t,n,i,s,a,o,l,c){super(e,t,n,i,s,a,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class tT extends Ur{constructor(e,t,n,i,s,a,o,l,c,u=Im){if(u!==Im&&u!==Xm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&u===Im&&(n=Pu),n===void 0&&u===Xm&&(n=Jm),super(null,i,s,a,o,l,u,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:$s,this.minFilter=l!==void 0?l:$s,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Qc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let a;t?a=t:a=e*n[s-1];let o=0,l=s-1,c;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),c=n[i]-a,c<0)o=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,n[i]===a)return i/(s-1);const u=n[i],d=n[i+1]-u,p=(a-u)/d;return(i+p)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const a=this.getPoint(i),o=this.getPoint(s),l=t||(a.isVector2?new Mt:new ye);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new ye,i=[],s=[],a=[],o=new ye,l=new Nn;for(let p=0;p<=e;p++){const g=p/e;i[p]=this.getTangentAt(g,new ye)}s[0]=new ye,a[0]=new ye;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),f=Math.abs(i[0].y),d=Math.abs(i[0].z);u<=c&&(c=u,n.set(1,0,0)),f<=c&&(c=f,n.set(0,1,0)),d<=c&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],o),a[0].crossVectors(i[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(i[p-1],i[p]),o.length()>Number.EPSILON){o.normalize();const g=Math.acos(Qn(i[p-1].dot(i[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(o,g))}a[p].crossVectors(i[p],s[p])}if(t===!0){let p=Math.acos(Qn(s[0].dot(s[e]),-1,1));p/=e,i[0].dot(o.crossVectors(s[0],s[e]))>0&&(p=-p);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],p*g)),a[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class nT extends Qc{constructor(e=0,t=0,n=1,i=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t=new Mt){const n=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(a?s=0:s=i),this.aClockwise===!0&&!a&&(s===i?s=-i:s=s-i);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),d=l-this.aX,p=c-this.aY;l=d*u-p*f+this.aX,c=d*f+p*u+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class VY extends nT{constructor(e,t,n,i,s,a){super(e,t,n,n,i,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function sR(){let r=0,e=0,t=0,n=0;function i(s,a,o,l){r=s,e=o,t=-3*s+3*a-2*o-l,n=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){i(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,f){let d=(a-s)/c-(o-s)/(c+u)+(o-a)/u,p=(o-a)/u-(l-a)/(u+f)+(l-o)/f;d*=u,p*=u,i(a,o,d,p)},calc:function(s){const a=s*s,o=a*s;return r+e*s+t*a+n*o}}}const nS=new ye,O4=new sR,F4=new sR,B4=new sR;class GY extends Qc{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new ye){const n=t,i=this.points,s=i.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=i[(o-1)%s]:(nS.subVectors(i[0],i[1]).add(i[0]),c=nS);const f=i[o%s],d=i[(o+1)%s];if(this.closed||o+2<s?u=i[(o+2)%s]:(nS.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=nS),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(f),p),_=Math.pow(f.distanceToSquared(d),p),w=Math.pow(d.distanceToSquared(u),p);_<1e-4&&(_=1),g<1e-4&&(g=_),w<1e-4&&(w=_),O4.initNonuniformCatmullRom(c.x,f.x,d.x,u.x,g,_,w),F4.initNonuniformCatmullRom(c.y,f.y,d.y,u.y,g,_,w),B4.initNonuniformCatmullRom(c.z,f.z,d.z,u.z,g,_,w)}else this.curveType==="catmullrom"&&(O4.initCatmullRom(c.x,f.x,d.x,u.x,this.tension),F4.initCatmullRom(c.y,f.y,d.y,u.y,this.tension),B4.initCatmullRom(c.z,f.z,d.z,u.z,this.tension));return n.set(O4.calc(l),F4.calc(l),B4.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new ye().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function W9(r,e,t,n,i){const s=(n-e)*.5,a=(i-t)*.5,o=r*r,l=r*o;return(2*t-2*n+s+a)*l+(-3*t+3*n-2*s-a)*o+s*r+t}function Pye(r,e){const t=1-r;return t*t*e}function Oye(r,e){return 2*(1-r)*r*e}function Fye(r,e){return r*r*e}function bw(r,e,t,n){return Pye(r,e)+Oye(r,t)+Fye(r,n)}function Bye(r,e){const t=1-r;return t*t*t*e}function Uye(r,e){const t=1-r;return 3*t*t*r*e}function jye(r,e){return 3*(1-r)*r*r*e}function zye(r,e){return r*r*r*e}function Sw(r,e,t,n,i){return Bye(r,e)+Uye(r,t)+jye(r,n)+zye(r,i)}class aR extends Qc{constructor(e=new Mt,t=new Mt,n=new Mt,i=new Mt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Mt){const n=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(Sw(e,i.x,s.x,a.x,o.x),Sw(e,i.y,s.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class HY extends Qc{constructor(e=new ye,t=new ye,n=new ye,i=new ye){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new ye){const n=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(Sw(e,i.x,s.x,a.x,o.x),Sw(e,i.y,s.y,a.y,o.y),Sw(e,i.z,s.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class oR extends Qc{constructor(e=new Mt,t=new Mt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Mt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Mt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WY extends Qc{constructor(e=new ye,t=new ye){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ye){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ye){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lR extends Qc{constructor(e=new Mt,t=new Mt,n=new Mt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Mt){const n=t,i=this.v0,s=this.v1,a=this.v2;return n.set(bw(e,i.x,s.x,a.x),bw(e,i.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cR extends Qc{constructor(e=new ye,t=new ye,n=new ye){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ye){const n=t,i=this.v0,s=this.v1,a=this.v2;return n.set(bw(e,i.x,s.x,a.x),bw(e,i.y,s.y,a.y),bw(e,i.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uR extends Qc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Mt){const n=t,i=this.points,s=(i.length-1)*e,a=Math.floor(s),o=s-a,l=i[a===0?a:a-1],c=i[a],u=i[a>i.length-2?i.length-1:a+1],f=i[a>i.length-3?i.length-1:a+2];return n.set(W9(o,l.x,c.x,u.x,f.x),W9(o,l.y,c.y,u.y,f.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Mt().fromArray(i))}return this}}var fM=Object.freeze({__proto__:null,ArcCurve:VY,CatmullRomCurve3:GY,CubicBezierCurve:aR,CubicBezierCurve3:HY,EllipseCurve:nT,LineCurve:oR,LineCurve3:WY,QuadraticBezierCurve:lR,QuadraticBezierCurve3:cR,SplineCurve:uR});class YY extends Qc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new fM[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const a=i[s]-n,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const a=s[i],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];n&&n.equals(u)||(t.push(u),n=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new fM[i.type]().fromJSON(i))}return this}}class f_ extends YY{constructor(e){super(),this.type="Path",this.currentPoint=new Mt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new oR(this.currentPoint.clone(),new Mt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new lR(this.currentPoint.clone(),new Mt(e,t),new Mt(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,a){const o=new aR(this.currentPoint.clone(),new Mt(e,t),new Mt(n,i),new Mt(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new uR(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,n,i,s,a),this}absarc(e,t,n,i,s,a){return this.absellipse(e,t,n,n,i,s,a),this}ellipse(e,t,n,i,s,a,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,n,i,s,a,o,l),this}absellipse(e,t,n,i,s,a,o,l){const c=new nT(e,t,n,i,s,a,o,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class fb extends $n{constructor(e=[new Mt(0,-.5),new Mt(.5,0),new Mt(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=Qn(i,0,Math.PI*2);const s=[],a=[],o=[],l=[],c=[],u=1/t,f=new ye,d=new Mt,p=new ye,g=new ye,_=new ye;let w=0,b=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:w=e[C+1].x-e[C].x,b=e[C+1].y-e[C].y,p.x=b*1,p.y=-w,p.z=b*0,_.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:w=e[C+1].x-e[C].x,b=e[C+1].y-e[C].y,p.x=b*1,p.y=-w,p.z=b*0,g.copy(p),p.x+=_.x,p.y+=_.y,p.z+=_.z,p.normalize(),l.push(p.x,p.y,p.z),_.copy(g)}for(let C=0;C<=t;C++){const M=n+C*u*i,A=Math.sin(M),k=Math.cos(M);for(let O=0;O<=e.length-1;O++){f.x=e[O].x*A,f.y=e[O].y,f.z=e[O].x*k,a.push(f.x,f.y,f.z),d.x=C/t,d.y=O/(e.length-1),o.push(d.x,d.y);const R=l[3*O+0]*A,I=l[3*O+1],D=l[3*O+0]*k;c.push(R,I,D)}}for(let C=0;C<t;C++)for(let M=0;M<e.length-1;M++){const A=M+C*e.length,k=A,O=A+e.length,R=A+e.length+1,I=A+1;s.push(k,O,I),s.push(R,I,O)}this.setIndex(s),this.setAttribute("position",new wn(a,3)),this.setAttribute("uv",new wn(o,2)),this.setAttribute("normal",new wn(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fb(e.points,e.segments,e.phiStart,e.phiLength)}}class rT extends fb{constructor(e=1,t=1,n=4,i=8){const s=new f_;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new rT(e.radius,e.length,e.capSegments,e.radialSegments)}}class iT extends $n{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],a=[],o=[],l=[],c=new ye,u=new Mt;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let f=0,d=3;f<=t;f++,d+=3){const p=n+f/t*i;c.x=e*Math.cos(p),c.y=e*Math.sin(p),a.push(c.x,c.y,c.z),o.push(0,0,1),u.x=(a[d]/e+1)/2,u.y=(a[d+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new wn(a,3)),this.setAttribute("normal",new wn(o,3)),this.setAttribute("uv",new wn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iT(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class yv extends $n{constructor(e=1,t=1,n=1,i=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],f=[],d=[],p=[];let g=0;const _=[],w=n/2;let b=0;C(),a===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(u),this.setAttribute("position",new wn(f,3)),this.setAttribute("normal",new wn(d,3)),this.setAttribute("uv",new wn(p,2));function C(){const A=new ye,k=new ye;let O=0;const R=(t-e)/n;for(let I=0;I<=s;I++){const D=[],E=I/s,B=E*(t-e)+e;for(let U=0;U<=i;U++){const V=U/i,X=V*l+o,te=Math.sin(X),ee=Math.cos(X);k.x=B*te,k.y=-E*n+w,k.z=B*ee,f.push(k.x,k.y,k.z),A.set(te,R,ee).normalize(),d.push(A.x,A.y,A.z),p.push(V,1-E),D.push(g++)}_.push(D)}for(let I=0;I<i;I++)for(let D=0;D<s;D++){const E=_[D][I],B=_[D+1][I],U=_[D+1][I+1],V=_[D][I+1];(e>0||D!==0)&&(u.push(E,B,V),O+=3),(t>0||D!==s-1)&&(u.push(B,U,V),O+=3)}c.addGroup(b,O,0),b+=O}function M(A){const k=g,O=new Mt,R=new ye;let I=0;const D=A===!0?e:t,E=A===!0?1:-1;for(let U=1;U<=i;U++)f.push(0,w*E,0),d.push(0,E,0),p.push(.5,.5),g++;const B=g;for(let U=0;U<=i;U++){const X=U/i*l+o,te=Math.cos(X),ee=Math.sin(X);R.x=D*ee,R.y=w*E,R.z=D*te,f.push(R.x,R.y,R.z),d.push(0,E,0),O.x=te*.5+.5,O.y=ee*.5*E+.5,p.push(O.x,O.y),g++}for(let U=0;U<i;U++){const V=k+U,X=B+U;A===!0?u.push(X,X+1,V):u.push(X+1,X,V),I+=3}c.addGroup(b,I,A===!0?1:2),b+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sT extends yv{constructor(e=1,t=1,n=32,i=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,n,i,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new sT(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qh extends $n{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],a=[];o(i),c(n),u(),this.setAttribute("position",new wn(s,3)),this.setAttribute("normal",new wn(s.slice(),3)),this.setAttribute("uv",new wn(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(C){const M=new ye,A=new ye,k=new ye;for(let O=0;O<t.length;O+=3)p(t[O+0],M),p(t[O+1],A),p(t[O+2],k),l(M,A,k,C)}function l(C,M,A,k){const O=k+1,R=[];for(let I=0;I<=O;I++){R[I]=[];const D=C.clone().lerp(A,I/O),E=M.clone().lerp(A,I/O),B=O-I;for(let U=0;U<=B;U++)U===0&&I===O?R[I][U]=D:R[I][U]=D.clone().lerp(E,U/B)}for(let I=0;I<O;I++)for(let D=0;D<2*(O-I)-1;D++){const E=Math.floor(D/2);D%2===0?(d(R[I][E+1]),d(R[I+1][E]),d(R[I][E])):(d(R[I][E+1]),d(R[I+1][E+1]),d(R[I+1][E]))}}function c(C){const M=new ye;for(let A=0;A<s.length;A+=3)M.x=s[A+0],M.y=s[A+1],M.z=s[A+2],M.normalize().multiplyScalar(C),s[A+0]=M.x,s[A+1]=M.y,s[A+2]=M.z}function u(){const C=new ye;for(let M=0;M<s.length;M+=3){C.x=s[M+0],C.y=s[M+1],C.z=s[M+2];const A=w(C)/2/Math.PI+.5,k=b(C)/Math.PI+.5;a.push(A,1-k)}g(),f()}function f(){for(let C=0;C<a.length;C+=6){const M=a[C+0],A=a[C+2],k=a[C+4],O=Math.max(M,A,k),R=Math.min(M,A,k);O>.9&&R<.1&&(M<.2&&(a[C+0]+=1),A<.2&&(a[C+2]+=1),k<.2&&(a[C+4]+=1))}}function d(C){s.push(C.x,C.y,C.z)}function p(C,M){const A=C*3;M.x=e[A+0],M.y=e[A+1],M.z=e[A+2]}function g(){const C=new ye,M=new ye,A=new ye,k=new ye,O=new Mt,R=new Mt,I=new Mt;for(let D=0,E=0;D<s.length;D+=9,E+=6){C.set(s[D+0],s[D+1],s[D+2]),M.set(s[D+3],s[D+4],s[D+5]),A.set(s[D+6],s[D+7],s[D+8]),O.set(a[E+0],a[E+1]),R.set(a[E+2],a[E+3]),I.set(a[E+4],a[E+5]),k.copy(C).add(M).add(A).divideScalar(3);const B=w(k);_(O,E+0,C,B),_(R,E+2,M,B),_(I,E+4,A,B)}}function _(C,M,A,k){k<0&&C.x===1&&(a[M]=C.x-1),A.x===0&&A.z===0&&(a[M]=k/2/Math.PI+.5)}function w(C){return Math.atan2(C.z,-C.x)}function b(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qh(e.vertices,e.indices,e.radius,e.details)}}class aT extends qh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new aT(e.radius,e.detail)}}const rS=new ye,iS=new ye,U4=new ye,sS=new Ro;class JY extends $n{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Lm*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),d={},p=[];for(let g=0;g<l;g+=3){a?(c[0]=a.getX(g),c[1]=a.getX(g+1),c[2]=a.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:_,b:w,c:b}=sS;if(_.fromBufferAttribute(o,c[0]),w.fromBufferAttribute(o,c[1]),b.fromBufferAttribute(o,c[2]),sS.getNormal(U4),f[0]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,f[1]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,f[2]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let C=0;C<3;C++){const M=(C+1)%3,A=f[C],k=f[M],O=sS[u[C]],R=sS[u[M]],I=`${A}_${k}`,D=`${k}_${A}`;D in d&&d[D]?(U4.dot(d[D].normal)<=s&&(p.push(O.x,O.y,O.z),p.push(R.x,R.y,R.z)),d[D]=null):I in d||(d[I]={index0:c[C],index1:c[M],normal:U4.clone()})}}for(const g in d)if(d[g]){const{index0:_,index1:w}=d[g];rS.fromBufferAttribute(o,_),iS.fromBufferAttribute(o,w),p.push(rS.x,rS.y,rS.z),p.push(iS.x,iS.y,iS.z)}this.setAttribute("position",new wn(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Dm extends f_{constructor(e){super(e),this.uuid=dl(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new f_().fromJSON(i))}return this}}const Vye={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=XY(r,0,i,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,f,d,p;if(n&&(s=Jye(r,e,s,t)),r.length>80*t){o=c=r[0],l=u=r[1];for(let g=t;g<i;g+=t)f=r[g],d=r[g+1],f<o&&(o=f),d<l&&(l=d),f>c&&(c=f),d>u&&(u=d);p=Math.max(c-o,u-l),p=p!==0?32767/p:0}return d_(s,a,t,o,l,p,0),a}};function XY(r,e,t,n,i){let s,a;if(i===iwe(r,e,t,n)>0)for(s=e;s<t;s+=n)a=Y9(s,r[s],r[s+1],a);else for(s=t-n;s>=e;s-=n)a=Y9(s,r[s],r[s+1],a);return a&&oT(a,a.next)&&(p_(a),a=a.next),a}function Qm(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(oT(t,t.next)||Oi(t.prev,t,t.next)===0)){if(p_(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function d_(r,e,t,n,i,s,a){if(!r)return;!a&&s&&Zye(r,n,i,s);let o=r,l,c;for(;r.prev!==r.next;){if(l=r.prev,c=r.next,s?Hye(r,n,i,s):Gye(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(c.i/t|0),p_(r),r=c.next,o=c.next;continue}if(r=c,r===o){a?a===1?(r=Wye(Qm(r),e,t),d_(r,e,t,n,i,s,2)):a===2&&Yye(r,e,t,n,i,s):d_(Qm(r),e,t,n,i,s,1);break}}}function Gye(r){const e=r.prev,t=r,n=r.next;if(Oi(e,t,n)>=0)return!1;const i=e.x,s=t.x,a=n.x,o=e.y,l=t.y,c=n.y,u=i<s?i<a?i:a:s<a?s:a,f=o<l?o<c?o:c:l<c?l:c,d=i>s?i>a?i:a:s>a?s:a,p=o>l?o>c?o:c:l>c?l:c;let g=n.next;for(;g!==e;){if(g.x>=u&&g.x<=d&&g.y>=f&&g.y<=p&&Y0(i,o,s,l,a,c,g.x,g.y)&&Oi(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Hye(r,e,t,n){const i=r.prev,s=r,a=r.next;if(Oi(i,s,a)>=0)return!1;const o=i.x,l=s.x,c=a.x,u=i.y,f=s.y,d=a.y,p=o<l?o<c?o:c:l<c?l:c,g=u<f?u<d?u:d:f<d?f:d,_=o>l?o>c?o:c:l>c?l:c,w=u>f?u>d?u:d:f>d?f:d,b=b3(p,g,e,t,n),C=b3(_,w,e,t,n);let M=r.prevZ,A=r.nextZ;for(;M&&M.z>=b&&A&&A.z<=C;){if(M.x>=p&&M.x<=_&&M.y>=g&&M.y<=w&&M!==i&&M!==a&&Y0(o,u,l,f,c,d,M.x,M.y)&&Oi(M.prev,M,M.next)>=0||(M=M.prevZ,A.x>=p&&A.x<=_&&A.y>=g&&A.y<=w&&A!==i&&A!==a&&Y0(o,u,l,f,c,d,A.x,A.y)&&Oi(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;M&&M.z>=b;){if(M.x>=p&&M.x<=_&&M.y>=g&&M.y<=w&&M!==i&&M!==a&&Y0(o,u,l,f,c,d,M.x,M.y)&&Oi(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;A&&A.z<=C;){if(A.x>=p&&A.x<=_&&A.y>=g&&A.y<=w&&A!==i&&A!==a&&Y0(o,u,l,f,c,d,A.x,A.y)&&Oi(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function Wye(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!oT(i,s)&&QY(i,n,n.next,s)&&h_(i,s)&&h_(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),p_(n),p_(n.next),n=r=s),n=n.next}while(n!==r);return Qm(n)}function Yye(r,e,t,n,i,s){let a=r;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&twe(a,o)){let l=KY(a,o);a=Qm(a,a.next),l=Qm(l,l.next),d_(a,e,t,n,i,s,0),d_(l,e,t,n,i,s,0);return}o=o.next}a=a.next}while(a!==r)}function Jye(r,e,t,n){const i=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*n,l=s<a-1?e[s+1]*n:r.length,c=XY(r,o,l,n,!1),c===c.next&&(c.steiner=!0),i.push(ewe(c));for(i.sort(Xye),s=0;s<i.length;s++)t=Qye(i[s],t);return t}function Xye(r,e){return r.x-e.x}function Qye(r,e){const t=Kye(r,e);if(!t)return e;const n=KY(t,r);return Qm(n,n.next),Qm(t,t.next)}function Kye(r,e){let t=e,n=-1/0,i;const s=r.x,a=r.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const d=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>n&&(n=d,i=t.x<t.next.x?t:t.next,d===s))return i}t=t.next}while(t!==e);if(!i)return null;const o=i,l=i.x,c=i.y;let u=1/0,f;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Y0(a<c?s:n,a,l,c,a<c?n:s,a,t.x,t.y)&&(f=Math.abs(a-t.y)/(s-t.x),h_(t,r)&&(f<u||f===u&&(t.x>i.x||t.x===i.x&&qye(i,t)))&&(i=t,u=f)),t=t.next;while(t!==o);return i}function qye(r,e){return Oi(r.prev,r,e.prev)<0&&Oi(e.next,r,r.next)<0}function Zye(r,e,t,n){let i=r;do i.z===0&&(i.z=b3(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,$ye(i)}function $ye(r){let e,t,n,i,s,a,o,l,c=1;do{for(t=r,r=null,s=null,a=0;t;){for(a++,n=t,o=0,e=0;e<c&&(o++,n=n.nextZ,!!n);e++);for(l=c;o>0||l>0&&n;)o!==0&&(l===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,o--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,c*=2}while(a>1);return r}function b3(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function ewe(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function Y0(r,e,t,n,i,s,a,o){return(i-a)*(e-o)>=(r-a)*(s-o)&&(r-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(i-a)*(n-o)}function twe(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!nwe(r,e)&&(h_(r,e)&&h_(e,r)&&rwe(r,e)&&(Oi(r.prev,r,e.prev)||Oi(r,e.prev,e))||oT(r,e)&&Oi(r.prev,r,r.next)>0&&Oi(e.prev,e,e.next)>0)}function Oi(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function oT(r,e){return r.x===e.x&&r.y===e.y}function QY(r,e,t,n){const i=oS(Oi(r,e,t)),s=oS(Oi(r,e,n)),a=oS(Oi(t,n,r)),o=oS(Oi(t,n,e));return!!(i!==s&&a!==o||i===0&&aS(r,t,e)||s===0&&aS(r,n,e)||a===0&&aS(t,r,n)||o===0&&aS(t,e,n))}function aS(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function oS(r){return r>0?1:r<0?-1:0}function nwe(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&QY(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function h_(r,e){return Oi(r.prev,r,r.next)<0?Oi(r,e,r.next)>=0&&Oi(r,r.prev,e)>=0:Oi(r,e,r.prev)<0||Oi(r,r.next,e)<0}function rwe(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function KY(r,e){const t=new S3(r.i,r.x,r.y),n=new S3(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function Y9(r,e,t,n){const i=new S3(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function p_(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function S3(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function iwe(r,e,t,n){let i=0;for(let s=e,a=t-n;s<t;s+=n)i+=(r[a]-r[s])*(r[s+1]+r[a+1]),a=s;return i}class Eu{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return Eu.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];J9(e),X9(n,e);let a=e.length;t.forEach(J9);for(let l=0;l<t.length;l++)i.push(a),a+=t[l].length,X9(n,t[l]);const o=Vye.triangulate(n,i);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function J9(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function X9(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class lT extends $n{constructor(e=new Dm([new Mt(.5,.5),new Mt(-.5,.5),new Mt(-.5,-.5),new Mt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new wn(i,3)),this.setAttribute("uv",new wn(s,2)),this.computeVertexNormals();function a(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:p-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const b=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:swe;let M,A=!1,k,O,R,I;b&&(M=b.getSpacedPoints(u),A=!0,d=!1,k=b.computeFrenetFrames(u,!1),O=new ye,R=new ye,I=new ye),d||(w=0,p=0,g=0,_=0);const D=o.extractPoints(c);let E=D.shape;const B=D.holes;if(!Eu.isClockWise(E)){E=E.reverse();for(let Ie=0,Ge=B.length;Ie<Ge;Ie++){const ce=B[Ie];Eu.isClockWise(ce)&&(B[Ie]=ce.reverse())}}const V=Eu.triangulateShape(E,B),X=E;for(let Ie=0,Ge=B.length;Ie<Ge;Ie++){const ce=B[Ie];E=E.concat(ce)}function te(Ie,Ge,ce){return Ge||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ie.clone().addScaledVector(Ge,ce)}const ee=E.length,ue=V.length;function ne(Ie,Ge,ce){let _t,_e,Ne;const Ce=Ie.x-Ge.x,He=Ie.y-Ge.y,Ee=ce.x-Ie.x,Z=ce.y-Ie.y,W=Ce*Ce+He*He,re=Ce*Z-He*Ee;if(Math.abs(re)>Number.EPSILON){const be=Math.sqrt(W),ve=Math.sqrt(Ee*Ee+Z*Z),Je=Ge.x-He/be,$e=Ge.y+Ce/be,it=ce.x-Z/ve,pt=ce.y+Ee/ve,Ft=((it-Je)*Z-(pt-$e)*Ee)/(Ce*Z-He*Ee);_t=Je+Ce*Ft-Ie.x,_e=$e+He*Ft-Ie.y;const Le=_t*_t+_e*_e;if(Le<=2)return new Mt(_t,_e);Ne=Math.sqrt(Le/2)}else{let be=!1;Ce>Number.EPSILON?Ee>Number.EPSILON&&(be=!0):Ce<-Number.EPSILON?Ee<-Number.EPSILON&&(be=!0):Math.sign(He)===Math.sign(Z)&&(be=!0),be?(_t=-He,_e=Ce,Ne=Math.sqrt(W)):(_t=Ce,_e=He,Ne=Math.sqrt(W/2))}return new Mt(_t/Ne,_e/Ne)}const oe=[];for(let Ie=0,Ge=X.length,ce=Ge-1,_t=Ie+1;Ie<Ge;Ie++,ce++,_t++)ce===Ge&&(ce=0),_t===Ge&&(_t=0),oe[Ie]=ne(X[Ie],X[ce],X[_t]);const q=[];let J,ie=oe.concat();for(let Ie=0,Ge=B.length;Ie<Ge;Ie++){const ce=B[Ie];J=[];for(let _t=0,_e=ce.length,Ne=_e-1,Ce=_t+1;_t<_e;_t++,Ne++,Ce++)Ne===_e&&(Ne=0),Ce===_e&&(Ce=0),J[_t]=ne(ce[_t],ce[Ne],ce[Ce]);q.push(J),ie=ie.concat(J)}for(let Ie=0;Ie<w;Ie++){const Ge=Ie/w,ce=p*Math.cos(Ge*Math.PI/2),_t=g*Math.sin(Ge*Math.PI/2)+_;for(let _e=0,Ne=X.length;_e<Ne;_e++){const Ce=te(X[_e],oe[_e],_t);we(Ce.x,Ce.y,-ce)}for(let _e=0,Ne=B.length;_e<Ne;_e++){const Ce=B[_e];J=q[_e];for(let He=0,Ee=Ce.length;He<Ee;He++){const Z=te(Ce[He],J[He],_t);we(Z.x,Z.y,-ce)}}}const he=g+_;for(let Ie=0;Ie<ee;Ie++){const Ge=d?te(E[Ie],ie[Ie],he):E[Ie];A?(R.copy(k.normals[0]).multiplyScalar(Ge.x),O.copy(k.binormals[0]).multiplyScalar(Ge.y),I.copy(M[0]).add(R).add(O),we(I.x,I.y,I.z)):we(Ge.x,Ge.y,0)}for(let Ie=1;Ie<=u;Ie++)for(let Ge=0;Ge<ee;Ge++){const ce=d?te(E[Ge],ie[Ge],he):E[Ge];A?(R.copy(k.normals[Ie]).multiplyScalar(ce.x),O.copy(k.binormals[Ie]).multiplyScalar(ce.y),I.copy(M[Ie]).add(R).add(O),we(I.x,I.y,I.z)):we(ce.x,ce.y,f/u*Ie)}for(let Ie=w-1;Ie>=0;Ie--){const Ge=Ie/w,ce=p*Math.cos(Ge*Math.PI/2),_t=g*Math.sin(Ge*Math.PI/2)+_;for(let _e=0,Ne=X.length;_e<Ne;_e++){const Ce=te(X[_e],oe[_e],_t);we(Ce.x,Ce.y,f+ce)}for(let _e=0,Ne=B.length;_e<Ne;_e++){const Ce=B[_e];J=q[_e];for(let He=0,Ee=Ce.length;He<Ee;He++){const Z=te(Ce[He],J[He],_t);A?we(Z.x,Z.y+M[u-1].y,M[u-1].x+ce):we(Z.x,Z.y,f+ce)}}}$(),ge();function $(){const Ie=i.length/3;if(d){let Ge=0,ce=ee*Ge;for(let _t=0;_t<ue;_t++){const _e=V[_t];ke(_e[2]+ce,_e[1]+ce,_e[0]+ce)}Ge=u+w*2,ce=ee*Ge;for(let _t=0;_t<ue;_t++){const _e=V[_t];ke(_e[0]+ce,_e[1]+ce,_e[2]+ce)}}else{for(let Ge=0;Ge<ue;Ge++){const ce=V[Ge];ke(ce[2],ce[1],ce[0])}for(let Ge=0;Ge<ue;Ge++){const ce=V[Ge];ke(ce[0]+ee*u,ce[1]+ee*u,ce[2]+ee*u)}}n.addGroup(Ie,i.length/3-Ie,0)}function ge(){const Ie=i.length/3;let Ge=0;pe(X,Ge),Ge+=X.length;for(let ce=0,_t=B.length;ce<_t;ce++){const _e=B[ce];pe(_e,Ge),Ge+=_e.length}n.addGroup(Ie,i.length/3-Ie,1)}function pe(Ie,Ge){let ce=Ie.length;for(;--ce>=0;){const _t=ce;let _e=ce-1;_e<0&&(_e=Ie.length-1);for(let Ne=0,Ce=u+w*2;Ne<Ce;Ne++){const He=ee*Ne,Ee=ee*(Ne+1),Z=Ge+_t+He,W=Ge+_e+He,re=Ge+_e+Ee,be=Ge+_t+Ee;Pe(Z,W,re,be)}}}function we(Ie,Ge,ce){l.push(Ie),l.push(Ge),l.push(ce)}function ke(Ie,Ge,ce){je(Ie),je(Ge),je(ce);const _t=i.length/3,_e=C.generateTopUV(n,i,_t-3,_t-2,_t-1);Ke(_e[0]),Ke(_e[1]),Ke(_e[2])}function Pe(Ie,Ge,ce,_t){je(Ie),je(Ge),je(_t),je(Ge),je(ce),je(_t);const _e=i.length/3,Ne=C.generateSideWallUV(n,i,_e-6,_e-3,_e-2,_e-1);Ke(Ne[0]),Ke(Ne[1]),Ke(Ne[3]),Ke(Ne[1]),Ke(Ne[2]),Ke(Ne[3])}function je(Ie){i.push(l[Ie*3+0]),i.push(l[Ie*3+1]),i.push(l[Ie*3+2])}function Ke(Ie){s.push(Ie.x),s.push(Ie.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return awe(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];n.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new fM[i.type]().fromJSON(i)),new lT(n,e.options)}}const swe={generateTopUV:function(r,e,t,n,i){const s=e[t*3],a=e[t*3+1],o=e[n*3],l=e[n*3+1],c=e[i*3],u=e[i*3+1];return[new Mt(s,a),new Mt(o,l),new Mt(c,u)]},generateSideWallUV:function(r,e,t,n,i,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[n*3],u=e[n*3+1],f=e[n*3+2],d=e[i*3],p=e[i*3+1],g=e[i*3+2],_=e[s*3],w=e[s*3+1],b=e[s*3+2];return Math.abs(o-u)<Math.abs(a-c)?[new Mt(a,1-l),new Mt(c,1-f),new Mt(d,1-g),new Mt(_,1-b)]:[new Mt(o,1-l),new Mt(u,1-f),new Mt(p,1-g),new Mt(w,1-b)]}};function awe(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class db extends qh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new db(e.radius,e.detail)}}class hb extends qh{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hb(e.radius,e.detail)}}class Kc extends $n{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,a=t/2,o=Math.floor(n),l=Math.floor(i),c=o+1,u=l+1,f=e/o,d=t/l,p=[],g=[],_=[],w=[];for(let b=0;b<u;b++){const C=b*d-a;for(let M=0;M<c;M++){const A=M*f-s;g.push(A,-C,0),_.push(0,0,1),w.push(M/o),w.push(1-b/l)}}for(let b=0;b<l;b++)for(let C=0;C<o;C++){const M=C+c*b,A=C+c*(b+1),k=C+1+c*(b+1),O=C+1+c*b;p.push(M,A,O),p.push(A,k,O)}this.setIndex(p),this.setAttribute("position",new wn(g,3)),this.setAttribute("normal",new wn(_,3)),this.setAttribute("uv",new wn(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kc(e.width,e.height,e.widthSegments,e.heightSegments)}}class cT extends $n{constructor(e=.5,t=1,n=32,i=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:a},n=Math.max(3,n),i=Math.max(1,i);const o=[],l=[],c=[],u=[];let f=e;const d=(t-e)/i,p=new ye,g=new Mt;for(let _=0;_<=i;_++){for(let w=0;w<=n;w++){const b=s+w/n*a;p.x=f*Math.cos(b),p.y=f*Math.sin(b),l.push(p.x,p.y,p.z),c.push(0,0,1),g.x=(p.x/t+1)/2,g.y=(p.y/t+1)/2,u.push(g.x,g.y)}f+=d}for(let _=0;_<i;_++){const w=_*(n+1);for(let b=0;b<n;b++){const C=b+w,M=C,A=C+n+1,k=C+n+2,O=C+1;o.push(M,A,O),o.push(A,k,O)}}this.setIndex(o),this.setAttribute("position",new wn(l,3)),this.setAttribute("normal",new wn(c,3)),this.setAttribute("uv",new wn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cT(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class uT extends $n{constructor(e=new Dm([new Mt(0,.5),new Mt(-.5,-.5),new Mt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(n),this.setAttribute("position",new wn(i,3)),this.setAttribute("normal",new wn(s,3)),this.setAttribute("uv",new wn(a,2));function c(u){const f=i.length/3,d=u.extractPoints(t);let p=d.shape;const g=d.holes;Eu.isClockWise(p)===!1&&(p=p.reverse());for(let w=0,b=g.length;w<b;w++){const C=g[w];Eu.isClockWise(C)===!0&&(g[w]=C.reverse())}const _=Eu.triangulateShape(p,g);for(let w=0,b=g.length;w<b;w++){const C=g[w];p=p.concat(C)}for(let w=0,b=p.length;w<b;w++){const C=p[w];i.push(C.x,C.y,0),s.push(0,0,1),a.push(C.x,C.y)}for(let w=0,b=_.length;w<b;w++){const C=_[w],M=C[0]+f,A=C[1]+f,k=C[2]+f;n.push(M,A,k),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return owe(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const a=t[e.shapes[i]];n.push(a)}return new uT(n,e.curveSegments)}}function owe(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class pb extends $n{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(a+o,Math.PI);let c=0;const u=[],f=new ye,d=new ye,p=[],g=[],_=[],w=[];for(let b=0;b<=n;b++){const C=[],M=b/n;let A=0;b===0&&a===0?A=.5/t:b===n&&l===Math.PI&&(A=-.5/t);for(let k=0;k<=t;k++){const O=k/t;f.x=-e*Math.cos(i+O*s)*Math.sin(a+M*o),f.y=e*Math.cos(a+M*o),f.z=e*Math.sin(i+O*s)*Math.sin(a+M*o),g.push(f.x,f.y,f.z),d.copy(f).normalize(),_.push(d.x,d.y,d.z),w.push(O+A,1-M),C.push(c++)}u.push(C)}for(let b=0;b<n;b++)for(let C=0;C<t;C++){const M=u[b][C+1],A=u[b][C],k=u[b+1][C],O=u[b+1][C+1];(b!==0||a>0)&&p.push(M,A,O),(b!==n-1||l<Math.PI)&&p.push(A,k,O)}this.setIndex(p),this.setAttribute("position",new wn(g,3)),this.setAttribute("normal",new wn(_,3)),this.setAttribute("uv",new wn(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pb(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class fT extends qh{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new fT(e.radius,e.detail)}}class dT extends $n{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const a=[],o=[],l=[],c=[],u=new ye,f=new ye,d=new ye;for(let p=0;p<=n;p++)for(let g=0;g<=i;g++){const _=g/i*s,w=p/n*Math.PI*2;f.x=(e+t*Math.cos(w))*Math.cos(_),f.y=(e+t*Math.cos(w))*Math.sin(_),f.z=t*Math.sin(w),o.push(f.x,f.y,f.z),u.x=e*Math.cos(_),u.y=e*Math.sin(_),d.subVectors(f,u).normalize(),l.push(d.x,d.y,d.z),c.push(g/i),c.push(p/n)}for(let p=1;p<=n;p++)for(let g=1;g<=i;g++){const _=(i+1)*p+g-1,w=(i+1)*(p-1)+g-1,b=(i+1)*(p-1)+g,C=(i+1)*p+g;a.push(_,w,C),a.push(w,b,C)}this.setIndex(a),this.setAttribute("position",new wn(o,3)),this.setAttribute("normal",new wn(l,3)),this.setAttribute("uv",new wn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dT(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class hT extends $n{constructor(e=1,t=.4,n=64,i=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:a},n=Math.floor(n),i=Math.floor(i);const o=[],l=[],c=[],u=[],f=new ye,d=new ye,p=new ye,g=new ye,_=new ye,w=new ye,b=new ye;for(let M=0;M<=n;++M){const A=M/n*s*Math.PI*2;C(A,s,a,e,p),C(A+.01,s,a,e,g),w.subVectors(g,p),b.addVectors(g,p),_.crossVectors(w,b),b.crossVectors(_,w),_.normalize(),b.normalize();for(let k=0;k<=i;++k){const O=k/i*Math.PI*2,R=-t*Math.cos(O),I=t*Math.sin(O);f.x=p.x+(R*b.x+I*_.x),f.y=p.y+(R*b.y+I*_.y),f.z=p.z+(R*b.z+I*_.z),l.push(f.x,f.y,f.z),d.subVectors(f,p).normalize(),c.push(d.x,d.y,d.z),u.push(M/n),u.push(k/i)}}for(let M=1;M<=n;M++)for(let A=1;A<=i;A++){const k=(i+1)*(M-1)+(A-1),O=(i+1)*M+(A-1),R=(i+1)*M+A,I=(i+1)*(M-1)+A;o.push(k,O,I),o.push(O,R,I)}this.setIndex(o),this.setAttribute("position",new wn(l,3)),this.setAttribute("normal",new wn(c,3)),this.setAttribute("uv",new wn(u,2));function C(M,A,k,O,R){const I=Math.cos(M),D=Math.sin(M),E=k/A*M,B=Math.cos(E);R.x=O*(2+B)*.5*I,R.y=O*(2+B)*D*.5,R.z=O*Math.sin(E)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hT(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class pT extends $n{constructor(e=new cR(new ye(-1,-1,0),new ye(-1,1,0),new ye(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new ye,l=new ye,c=new Mt;let u=new ye;const f=[],d=[],p=[],g=[];_(),this.setIndex(g),this.setAttribute("position",new wn(f,3)),this.setAttribute("normal",new wn(d,3)),this.setAttribute("uv",new wn(p,2));function _(){for(let M=0;M<t;M++)w(M);w(s===!1?t:0),C(),b()}function w(M){u=e.getPointAt(M/t,u);const A=a.normals[M],k=a.binormals[M];for(let O=0;O<=i;O++){const R=O/i*Math.PI*2,I=Math.sin(R),D=-Math.cos(R);l.x=D*A.x+I*k.x,l.y=D*A.y+I*k.y,l.z=D*A.z+I*k.z,l.normalize(),d.push(l.x,l.y,l.z),o.x=u.x+n*l.x,o.y=u.y+n*l.y,o.z=u.z+n*l.z,f.push(o.x,o.y,o.z)}}function b(){for(let M=1;M<=t;M++)for(let A=1;A<=i;A++){const k=(i+1)*(M-1)+(A-1),O=(i+1)*M+(A-1),R=(i+1)*M+A,I=(i+1)*(M-1)+A;g.push(k,O,I),g.push(O,R,I)}}function C(){for(let M=0;M<=t;M++)for(let A=0;A<=i;A++)c.x=M/t,c.y=A/i,p.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new pT(new fM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class qY extends $n{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new ye,s=new ye;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],d=f.start,p=f.count;for(let g=d,_=d+p;g<_;g+=3)for(let w=0;w<3;w++){const b=o.getX(g+w),C=o.getX(g+(w+1)%3);i.fromBufferAttribute(a,b),s.fromBufferAttribute(a,C),Q9(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const u=3*o+c,f=3*o+(c+1)%3;i.fromBufferAttribute(a,u),s.fromBufferAttribute(a,f),Q9(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new wn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Q9(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var K9=Object.freeze({__proto__:null,BoxGeometry:gg,CapsuleGeometry:rT,CircleGeometry:iT,ConeGeometry:sT,CylinderGeometry:yv,DodecahedronGeometry:aT,EdgesGeometry:JY,ExtrudeGeometry:lT,IcosahedronGeometry:db,LatheGeometry:fb,OctahedronGeometry:hb,PlaneGeometry:Kc,PolyhedronGeometry:qh,RingGeometry:cT,ShapeGeometry:uT,SphereGeometry:pb,TetrahedronGeometry:fT,TorusGeometry:dT,TorusKnotGeometry:hT,TubeGeometry:pT,WireframeGeometry:qY});class ZY extends Os{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Kt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class $Y extends zo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class mb extends Os{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Kt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kh,this.normalScale=new Mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ml,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Jl extends mb{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Mt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Qn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Kt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Kt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Kt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class eJ extends Os{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Kt(16777215),this.specular=new Kt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kh,this.normalScale=new Mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ml,this.combine=eb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class tJ extends Os{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Kt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kh,this.normalScale=new Mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class nJ extends Os{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kh,this.normalScale=new Mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class rJ extends Os{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Kt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kh,this.normalScale=new Mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ml,this.combine=eb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mT extends Os{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=bY,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class gT extends Os{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class iJ extends Os{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Kt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kh,this.normalScale=new Mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sJ extends Xa{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function _m(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function aJ(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function oJ(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function x3(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,a=0;a!==n;++s){const o=t[s]*e;for(let l=0;l!==e;++l)i[a++]=r[o+l]}return i}function fR(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let a=s[n];if(a!==void 0)if(Array.isArray(a))do a=s[n],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=r[i++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[n],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do a=s[n],a!==void 0&&(e.push(s.time),t.push(a)),s=r[i++];while(s!==void 0)}function lwe(r,e,t,n,i=30){const s=r.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],d=[];for(let p=0;p<c.times.length;++p){const g=c.times[p]*i;if(!(g<t||g>=n)){f.push(c.times[p]);for(let _=0;_<u;++_)d.push(c.values[p*u+_])}}f.length!==0&&(c.times=_m(f,c.times.constructor),c.values=_m(d,c.values.constructor),a.push(c))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function cwe(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let a=0;a<i;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=r.tracks.find(function(b){return b.name===o.name&&b.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let d=0;const p=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);const g=o.times.length-1;let _;if(s<=o.times[0]){const b=u,C=f-u;_=o.values.slice(b,C)}else if(s>=o.times[g]){const b=g*f+u,C=b+f-u;_=o.values.slice(b,C)}else{const b=o.createInterpolant(),C=u,M=f-u;b.evaluate(s),_=b.resultBuffer.slice(C,M)}l==="quaternion"&&new ea().fromArray(_).normalize().conjugate().toArray(_);const w=c.times.length;for(let b=0;b<w;++b){const C=b*p+d;if(l==="quaternion")ea.multiplyQuaternionsFlat(c.values,C,_,0,c.values,C);else{const M=p-d*2;for(let A=0;A<M;++A)c.values[C+A]-=_[A]}}}return r.blendMode=Wk,r}const uwe={convertArray:_m,isTypedArray:aJ,getKeyframeOrder:oJ,sortedArray:x3,flattenJSON:fR,subclip:lwe,makeClipAdditive:cwe};class wv{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let a;n:{r:if(!(e<i)){for(let o=n+2;;){if(i===void 0){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(s=i,i=t[++n],e<i)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(n=2,s=o);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=s,s=t[--n-1],e>=s)break t}a=n,n=0;break n}break e}for(;n<a;){const o=n+a>>>1;e<t[o]?a=o:n=o+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let a=0;a!==i;++a)t[a]=n[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class lJ extends wv{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:gm,endingEnd:gm}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,a=e+1,o=i[s],l=i[a];if(o===void 0)switch(this.getSettings_().endingStart){case vm:s=e,o=2*t-n;break;case a_:s=i.length-2,o=t+i[s]-i[s+1];break;default:s=e,o=n}if(l===void 0)switch(this.getSettings_().endingEnd){case vm:a=e,l=2*n-t;break;case a_:a=1,l=n+i[1]-i[0];break;default:a=e-1,l=t}const c=(n-t)*.5,u=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-n),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,p=this._weightNext,g=(n-t)/(i-t),_=g*g,w=_*g,b=-d*w+2*d*_-d*g,C=(1+d)*w+(-1.5-2*d)*_+(-.5+d)*g+1,M=(-1-p)*w+(1.5+p)*_+.5*g,A=p*w-p*_;for(let k=0;k!==o;++k)s[k]=b*a[u+k]+C*a[c+k]+M*a[l+k]+A*a[f+k];return s}}class dR extends wv{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(n-t)/(i-t),f=1-u;for(let d=0;d!==o;++d)s[d]=a[c+d]*f+a[l+d]*u;return s}}class cJ extends wv{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class qc{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_m(t,this.TimeBufferType),this.values=_m(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:_m(e.times,Array),values:_m(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new cJ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new lJ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Y1:t=this.InterpolantFactoryMethodDiscrete;break;case J1:t=this.InterpolantFactoryMethodLinear;break;case Ex:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Y1;case this.InterpolantFactoryMethodLinear:return J1;case this.InterpolantFactoryMethodSmooth:return Ex}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,a=i-1;for(;s!==i&&n[s]<e;)++s;for(;a!==-1&&n[a]>t;)--a;if(++a,s!==0||a!==i){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=n.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=n[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(i!==void 0&&aJ(i))for(let o=0,l=i.length;o!==l;++o){const c=i[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===Ex,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(i)l=!0;else{const f=o*n,d=f-n,p=f+n;for(let g=0;g!==n;++g){const _=t[f+g];if(_!==t[d+g]||_!==t[p+g]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const f=o*n,d=a*n;for(let p=0;p!==n;++p)t[d+p]=t[f+p]}++a}}if(s>0){e[a]=e[s];for(let o=s*n,l=a*n,c=0;c!==n;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}qc.prototype.TimeBufferType=Float32Array;qc.prototype.ValueBufferType=Float32Array;qc.prototype.DefaultInterpolation=J1;class vg extends qc{constructor(e,t,n){super(e,t,n)}}vg.prototype.ValueTypeName="bool";vg.prototype.ValueBufferType=Array;vg.prototype.DefaultInterpolation=Y1;vg.prototype.InterpolantFactoryMethodLinear=void 0;vg.prototype.InterpolantFactoryMethodSmooth=void 0;class hR extends qc{}hR.prototype.ValueTypeName="color";class Km extends qc{}Km.prototype.ValueTypeName="number";class uJ extends wv{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(n-t)/(i-t);let c=e*o;for(let u=c+o;c!==u;c+=4)ea.slerpFlat(s,0,a,c-o,a,c,l);return s}}class qm extends qc{InterpolantFactoryMethodLinear(e){return new uJ(this.times,this.values,this.getValueSize(),e)}}qm.prototype.ValueTypeName="quaternion";qm.prototype.InterpolantFactoryMethodSmooth=void 0;class yg extends qc{constructor(e,t,n){super(e,t,n)}}yg.prototype.ValueTypeName="string";yg.prototype.ValueBufferType=Array;yg.prototype.DefaultInterpolation=Y1;yg.prototype.InterpolantFactoryMethodLinear=void 0;yg.prototype.InterpolantFactoryMethodSmooth=void 0;class Zm extends qc{}Zm.prototype.ValueTypeName="vector";class K1{constructor(e="",t=-1,n=[],i=JA){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=dl(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)t.push(dwe(n[a]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=n.length;s!==a;++s)t.push(qc.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const u=oJ(l);l=x3(l,1,u),c=x3(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new Km(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let d=i[f];d||(i[f]=d=[]),d.push(c)}}const a=[];for(const o in i)a.push(this.CreateFromMorphTargetSequence(o,i[o],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(f,d,p,g,_){if(p.length!==0){const w=[],b=[];fR(p,w,b,g),w.length!==0&&_.push(new f(d,w,b))}},i=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const d=c[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const p={};let g;for(g=0;g<d.length;g++)if(d[g].morphTargets)for(let _=0;_<d[g].morphTargets.length;_++)p[d[g].morphTargets[_]]=-1;for(const _ in p){const w=[],b=[];for(let C=0;C!==d[g].morphTargets.length;++C){const M=d[g];w.push(M.time),b.push(M.morphTarget===_?1:0)}i.push(new Km(".morphTargetInfluence["+_+"]",w,b))}l=p.length*a}else{const p=".bones["+t[f].name+"]";n(Zm,p+".position",d,"pos",i),n(qm,p+".quaternion",d,"rot",i),n(Zm,p+".scale",d,"scl",i)}}return i.length===0?null:new this(s,l,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function fwe(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Km;case"vector":case"vector2":case"vector3":case"vector4":return Zm;case"color":return hR;case"quaternion":return qm;case"bool":case"boolean":return vg;case"string":return yg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function dwe(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=fwe(r.type);if(r.times===void 0){const t=[],n=[];fR(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Rf={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class vT{constructor(e,t,n){const i=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(u){o++,s===!1&&i.onStart!==void 0&&i.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,o),a===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,d=c.length;f<d;f+=2){const p=c[f],g=c[f+1];if(p.global&&(p.lastIndex=0),p.test(u))return g}return null}}}const fJ=new vT;class Sa{constructor(e){this.manager=e!==void 0?e:fJ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Sa.DEFAULT_MATERIAL_NAME="__DEFAULT";const bf={};class hwe extends Error{constructor(e,t){super(e),this.response=t}}class _a extends Sa{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Rf.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(bf[e]!==void 0){bf[e].push({onLoad:t,onProgress:n,onError:i});return}bf[e]=[],bf[e].push({onLoad:t,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=bf[e],f=c.body.getReader(),d=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),p=d?parseInt(d):0,g=p!==0;let _=0;const w=new ReadableStream({start(b){C();function C(){f.read().then(({done:M,value:A})=>{if(M)b.close();else{_+=A.byteLength;const k=new ProgressEvent("progress",{lengthComputable:g,loaded:_,total:p});for(let O=0,R=u.length;O<R;O++){const I=u[O];I.onProgress&&I.onProgress(k)}b.enqueue(A),C()}},M=>{b.error(M)})}}});return new Response(w)}else throw new hwe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(o),d=f&&f[1]?f[1].toLowerCase():void 0,p=new TextDecoder(d);return c.arrayBuffer().then(g=>p.decode(g))}}}).then(c=>{Rf.add(e,c);const u=bf[e];delete bf[e];for(let f=0,d=u.length;f<d;f++){const p=u[f];p.onLoad&&p.onLoad(c)}}).catch(c=>{const u=bf[e];if(u===void 0)throw this.manager.itemError(e),c;delete bf[e];for(let f=0,d=u.length;f<d;f++){const p=u[f];p.onError&&p.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class pwe extends Sa{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new _a(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=K1.parse(e[n]);t.push(i)}return t}}class mwe extends Sa{constructor(e){super(e)}load(e,t,n,i){const s=this,a=[],o=new eT,l=new _a(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(d){const p=s.parse(d,!0);a[f]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},c+=1,c===6&&(p.mipmapCount===1&&(o.minFilter=dr),o.image=a,o.format=p.format,o.needsUpdate=!0,t&&t(o))},n,i)}if(Array.isArray(e))for(let f=0,d=e.length;f<d;++f)u(f);else l.load(e,function(f){const d=s.parse(f,!0);if(d.isCubemap){const p=d.mipmaps.length/d.mipmapCount;for(let g=0;g<p;g++){a[g]={mipmaps:[]};for(let _=0;_<d.mipmapCount;_++)a[g].mipmaps.push(d.mipmaps[g*d.mipmapCount+_]),a[g].format=d.format,a[g].width=d.width,a[g].height=d.height}o.image=a}else o.image.width=d.width,o.image.height=d.height,o.mipmaps=d.mipmaps;d.mipmapCount===1&&(o.minFilter=dr),o.format=d.format,o.needsUpdate=!0,t&&t(o)},n,i);return o}}class m_ extends Sa{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Rf.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=u_("img");function l(){u(),Rf.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class dJ extends Sa{constructor(e){super(e)}load(e,t,n,i){const s=new ab;s.colorSpace=co;const a=new m_(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(c){a.load(e[c],function(u){s.images[c]=u,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class pR extends Sa{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new Uc,o=new _a(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:as,a.wrapT=c.wrapT!==void 0?c.wrapT:as,a.magFilter=c.magFilter!==void 0?c.magFilter:dr,a.minFilter=c.minFilter!==void 0?c.minFilter:dr,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(a.colorSpace=c.colorSpace),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=zl),c.mipmapCount===1&&(a.minFilter=dr),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,t&&t(a,c)},n,i),a}}class dM extends Sa{constructor(e){super(e)}load(e,t,n,i){const s=new Ur,a=new m_(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class Zh extends Mr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Kt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class hJ extends Zh{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Mr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Kt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const j4=new Nn,q9=new ye,Z9=new ye;class mR{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Mt(512,512),this.map=null,this.mapPass=null,this.matrix=new Nn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ub,this._frameExtents=new Mt(1,1),this._viewportCount=1,this._viewports=[new Cr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;q9.setFromMatrixPosition(e.matrixWorld),t.position.copy(q9),Z9.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Z9),t.updateMatrixWorld(),j4.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(j4),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(j4)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class gwe extends mR{constructor(){super(new Qi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=X1*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class gR extends Zh{constructor(e,t,n=0,i=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Mr.DEFAULT_UP),this.updateMatrix(),this.target=new Mr,this.distance=n,this.angle=i,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new gwe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const $9=new Nn,Dy=new ye,z4=new ye;class vwe extends mR{constructor(){super(new Qi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Mt(4,2),this._viewportCount=6,this._viewports=[new Cr(2,1,1,1),new Cr(0,1,1,1),new Cr(3,1,1,1),new Cr(1,1,1,1),new Cr(3,0,1,1),new Cr(1,0,1,1)],this._cubeDirections=[new ye(1,0,0),new ye(-1,0,0),new ye(0,0,1),new ye(0,0,-1),new ye(0,1,0),new ye(0,-1,0)],this._cubeUps=[new ye(0,1,0),new ye(0,1,0),new ye(0,1,0),new ye(0,1,0),new ye(0,0,1),new ye(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Dy.setFromMatrixPosition(e.matrixWorld),n.position.copy(Dy),z4.copy(n.position),z4.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(z4),n.updateMatrixWorld(),i.makeTranslation(-Dy.x,-Dy.y,-Dy.z),$9.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix($9)}}class vR extends Zh{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new vwe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Iu extends sb{constructor(e=-1,t=1,n=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,a=n+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class ywe extends mR{constructor(){super(new Iu(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class yR extends Zh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Mr.DEFAULT_UP),this.updateMatrix(),this.target=new Mr,this.shadow=new ywe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class pJ extends Zh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class mJ extends Zh{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class gJ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ye)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*i)),t.addScaledVector(a[5],1.092548*(i*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(n*s)),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*i),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*i),t.addScaledVector(a[5],2*.429043*i*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*n*s),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class vJ extends Zh{constructor(e=new gJ,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class yT extends Sa{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,a=new _a(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Kt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(i.uniforms[s]={},a.type){case"t":i.uniforms[s].value=n(a.value);break;case"c":i.uniforms[s].value=new Kt().setHex(a.value);break;case"v2":i.uniforms[s].value=new Mt().fromArray(a.value);break;case"v3":i.uniforms[s].value=new ye().fromArray(a.value);break;case"v4":i.uniforms[s].value=new Cr().fromArray(a.value);break;case"m3":i.uniforms[s].value=new Xn().fromArray(a.value);break;case"m4":i.uniforms[s].value=new Nn().fromArray(a.value);break;default:i.uniforms[s].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Mt().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Mt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return yT.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:ZY,SpriteMaterial:eR,RawShaderMaterial:$Y,ShaderMaterial:zo,PointsMaterial:$A,MeshPhysicalMaterial:Jl,MeshStandardMaterial:mb,MeshPhongMaterial:eJ,MeshToonMaterial:tJ,MeshNormalMaterial:nJ,MeshLambertMaterial:rJ,MeshDepthMaterial:mT,MeshDistanceMaterial:gT,MeshBasicMaterial:mo,MeshMatcapMaterial:iJ,LineDashedMaterial:sJ,LineBasicMaterial:Xa,Material:Os};return new t[e]}}class _h{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class wR extends $n{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class yJ extends Sa{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new _a(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(p,g){if(t[g]!==void 0)return t[g];const w=p.interleavedBuffers[g],b=s(p,w.buffer),C=W0(w.type,b),M=new lb(C,w.stride);return M.uuid=w.uuid,t[g]=M,M}function s(p,g){if(n[g]!==void 0)return n[g];const w=p.arrayBuffers[g],b=new Uint32Array(w).buffer;return n[g]=b,b}const a=e.isInstancedBufferGeometry?new wR:new $n,o=e.data.index;if(o!==void 0){const p=W0(o.type,o.array);a.setIndex(new Pr(p,1))}const l=e.data.attributes;for(const p in l){const g=l[p];let _;if(g.isInterleavedBufferAttribute){const w=i(e.data,g.data);_=new Oh(w,g.itemSize,g.offset,g.normalized)}else{const w=W0(g.type,g.array),b=g.isInstancedBufferAttribute?Fh:Pr;_=new b(w,g.itemSize,g.normalized)}g.name!==void 0&&(_.name=g.name),g.usage!==void 0&&_.setUsage(g.usage),a.setAttribute(p,_)}const c=e.data.morphAttributes;if(c)for(const p in c){const g=c[p],_=[];for(let w=0,b=g.length;w<b;w++){const C=g[w];let M;if(C.isInterleavedBufferAttribute){const A=i(e.data,C.data);M=new Oh(A,C.itemSize,C.offset,C.normalized)}else{const A=W0(C.type,C.array);M=new Pr(A,C.itemSize,C.normalized)}C.name!==void 0&&(M.name=C.name),_.push(M)}a.morphAttributes[p]=_}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let p=0,g=f.length;p!==g;++p){const _=f[p];a.addGroup(_.start,_.count,_.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const p=new ye;d.center!==void 0&&p.fromArray(d.center),a.boundingSphere=new na(p,d.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class wwe extends Sa{constructor(e){super(e)}load(e,t,n,i){const s=this,a=this.path===""?_h.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new _a(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?_h.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new _a(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,s,l,o,n),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let f=!1;for(const d in a)if(a[d].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,o,a,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new Dm().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new cb().fromJSON(e[s],i);n[o.uuid]=o}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new yJ;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;default:l.type in K9?o=K9[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),n[l.uuid]=o}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new yT;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];n[l.uuid]===void 0&&(n[l.uuid]=s.parse(l)),i[l.uuid]=n[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=K1.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function a(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c;return a(u)}else return l.data?{data:W0(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new vT(t);s=new m_(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],d=f.url;if(Array.isArray(d)){const p=[];for(let g=0,_=d.length;g<_;g++){const w=d[g],b=o(w);b!==null&&(b instanceof HTMLImageElement?p.push(b):p.push(new Uc(b.data,b.width,b.height)))}i[f.uuid]=new ym(p)}else{const p=o(f.url);i[f.uuid]=new ym(p)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await i.loadAsync(l)}else return a.data?{data:W0(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new m_(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,d=c.length;f<d;f++){const p=c[f],g=await s(p);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new Uc(g.data,g.width,g.height)))}n[l.uuid]=new ym(u)}else{const u=await s(l.url);n[l.uuid]=new ym(u)}}}return n}parseTextures(e,t){function n(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const i={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],c=l.data;let u;Array.isArray(c)?(u=new ab,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Uc:u=new Ur,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=o.uuid,o.name!==void 0&&(u.name=o.name),o.mapping!==void 0&&(u.mapping=n(o.mapping,_we)),o.channel!==void 0&&(u.channel=o.channel),o.offset!==void 0&&u.offset.fromArray(o.offset),o.repeat!==void 0&&u.repeat.fromArray(o.repeat),o.center!==void 0&&u.center.fromArray(o.center),o.rotation!==void 0&&(u.rotation=o.rotation),o.wrap!==void 0&&(u.wrapS=n(o.wrap[0],eU),u.wrapT=n(o.wrap[1],eU)),o.format!==void 0&&(u.format=o.format),o.internalFormat!==void 0&&(u.internalFormat=o.internalFormat),o.type!==void 0&&(u.type=o.type),o.colorSpace!==void 0&&(u.colorSpace=o.colorSpace),o.minFilter!==void 0&&(u.minFilter=n(o.minFilter,tU)),o.magFilter!==void 0&&(u.magFilter=n(o.magFilter,tU)),o.anisotropy!==void 0&&(u.anisotropy=o.anisotropy),o.flipY!==void 0&&(u.flipY=o.flipY),o.generateMipmaps!==void 0&&(u.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(u.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(u.compareFunction=o.compareFunction),o.userData!==void 0&&(u.userData=o.userData),i[o.uuid]=u}return i}parseObject(e,t,n,i,s){let a;function o(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const p=[];for(let g=0,_=d.length;g<_;g++){const w=d[g];n[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),p.push(n[w])}return p}return n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),n[d]}}function c(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let u,f;switch(e.type){case"Scene":a=new ob,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Kt(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new qA(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new KA(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new Qi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Iu(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new pJ(e.color,e.intensity);break;case"DirectionalLight":a=new yR(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new vR(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new mJ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new gR(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new hJ(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new vJ().fromJSON(e);break;case"SkinnedMesh":u=o(e.geometry),f=l(e.material),a=new tR(u,f),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":u=o(e.geometry),f=l(e.material),a=new si(u,f);break;case"InstancedMesh":u=o(e.geometry),f=l(e.material);const d=e.count,p=e.instanceMatrix,g=e.instanceColor;a=new nR(u,f,d),a.instanceMatrix=new Fh(new Float32Array(p.array),16),g!==void 0&&(a.instanceColor=new Fh(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":u=o(e.geometry),f=l(e.material),a=new jY(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),a.geometry=u,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(_=>{const w=new ta;w.min.fromArray(_.boxMin),w.max.fromArray(_.boxMax);const b=new na;return b.radius=_.sphereRadius,b.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:w,sphereInitialized:_.sphereInitialized,sphere:b}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":a=new UY;break;case"Line":a=new td(o(e.geometry),l(e.material));break;case"LineLoop":a=new rR(o(e.geometry),l(e.material));break;case"LineSegments":a=new Xc(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new iR(o(e.geometry),l(e.material));break;case"Sprite":a=new BY(l(e.material));break;case"Group":a=new kf;break;case"Bone":a=new ZA;break;default:a=new Mr}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let p=0;p<d.length;p++)a.add(this.parseObject(d[p],t,n,i,s))}if(e.animations!==void 0){const d=e.animations;for(let p=0;p<d.length;p++){const g=d[p];a.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const d=e.levels;for(let p=0;p<d.length;p++){const g=d[p],_=a.getObjectByProperty("uuid",g.object);_!==void 0&&a.addLevel(_,g.distance,g.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new Mr}})}}const _we={UVMapping:kh,CubeReflectionMapping:Ru,CubeRefractionMapping:Rh,EquirectangularReflectionMapping:G1,EquirectangularRefractionMapping:s_,CubeUVReflectionMapping:vv},eU={RepeatWrapping:Ph,ClampToEdgeWrapping:as,MirroredRepeatWrapping:H1},tU={NearestFilter:$s,NearestMipmapNearestFilter:jA,NearestMipmapLinearFilter:mm,LinearFilter:dr,LinearMipmapNearestFilter:f1,LinearMipmapLinearFilter:zl};class wJ extends Sa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Rf.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Rf.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),Rf.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Rf.add(e,l),s.manager.itemStart(e)}}let lS;class _R{static getContext(){return lS===void 0&&(lS=new(window.AudioContext||window.webkitAudioContext)),lS}static setContext(e){lS=e}}class bwe extends Sa{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new _a(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const c=l.slice(0);_R.getContext().decodeAudioData(c,function(f){t(f)}).catch(o)}catch(c){o(c)}},n,i);function o(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const nU=new Nn,rU=new Nn,Vp=new Nn;class Swe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Qi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Qi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Vp.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,a=t.near*Math.tan(Lm*t.fov*.5)/t.zoom;let o,l;rU.elements[12]=-i,nU.elements[12]=i,o=-a*t.aspect+s,l=a*t.aspect+s,Vp.elements[0]=2*t.near/(l-o),Vp.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(Vp),o=-a*t.aspect-s,l=a*t.aspect-s,Vp.elements[0]=2*t.near/(l-o),Vp.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(Vp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(rU),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(nU)}}class _J extends Qi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class bR{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=iU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=iU();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function iU(){return performance.now()}const Gp=new ye,sU=new ea,xwe=new ye,Hp=new ye;class Cwe extends Mr{constructor(){super(),this.type="AudioListener",this.context=_R.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new bR}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Gp,sU,xwe),Hp.set(0,0,-1).applyQuaternion(sU),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Gp.x,i),t.positionY.linearRampToValueAtTime(Gp.y,i),t.positionZ.linearRampToValueAtTime(Gp.z,i),t.forwardX.linearRampToValueAtTime(Hp.x,i),t.forwardY.linearRampToValueAtTime(Hp.y,i),t.forwardZ.linearRampToValueAtTime(Hp.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(Gp.x,Gp.y,Gp.z),t.setOrientation(Hp.x,Hp.y,Hp.z,n.x,n.y,n.z)}}class bJ extends Mr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Wp=new ye,aU=new ea,Mwe=new ye,Yp=new ye;class Awe extends bJ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Wp,aU,Mwe),Yp.set(0,0,1).applyQuaternion(aU);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Wp.x,n),t.positionY.linearRampToValueAtTime(Wp.y,n),t.positionZ.linearRampToValueAtTime(Wp.z,n),t.orientationX.linearRampToValueAtTime(Yp.x,n),t.orientationY.linearRampToValueAtTime(Yp.y,n),t.orientationZ.linearRampToValueAtTime(Yp.z,n)}else t.setPosition(Wp.x,Wp.y,Wp.z),t.setOrientation(Yp.x,Yp.y,Yp.z)}}class Twe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class SJ{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,a;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==i;++o)n[s+o]=n[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(n,s,0,o,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,i,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){o.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,a=i;s!==a;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let a=0;a!==s;++a)e[t+a]=e[n+a]}_slerp(e,t,n,i){ea.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const a=this._workIndex*s;ea.multiplyQuaternionsFlat(e,a,e,t,e,n),ea.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,n,i,s){const a=1-i;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[n+o]*i}}_lerpAdditive(e,t,n,i,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[n+a]*i}}}const SR="\\[\\]\\.:\\/",Ewe=new RegExp("["+SR+"]","g"),xR="[^"+SR+"]",Iwe="[^"+SR.replace("\\.","")+"]",Lwe=/((?:WC+[\/:])*)/.source.replace("WC",xR),Nwe=/(WCOD+)?/.source.replace("WCOD",Iwe),Dwe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",xR),kwe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",xR),Rwe=new RegExp("^"+Lwe+Nwe+Dwe+kwe+"$"),Pwe=["material","materials","bones","map"];class Owe{constructor(e,t,n){const i=n||Lr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Lr{constructor(e,t,n){this.path=t,this.parsedPath=n||Lr.parseTrackName(t),this.node=Lr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Lr.Composite(e,t,n):new Lr(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Ewe,"")}static parseTrackName(e){const t=Rwe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);Pwe.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=n(o.children);if(l)return l}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Lr.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let c=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[i];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Lr.Composite=Owe;Lr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Lr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Lr.prototype.GetterByBindingType=[Lr.prototype._getValue_direct,Lr.prototype._getValue_array,Lr.prototype._getValue_arrayElement,Lr.prototype._getValue_toArray];Lr.prototype.SetterByBindingTypeAndVersioning=[[Lr.prototype._setValue_direct,Lr.prototype._setValue_direct_setNeedsUpdate,Lr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Lr.prototype._setValue_array,Lr.prototype._setValue_array_setNeedsUpdate,Lr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Lr.prototype._setValue_arrayElement,Lr.prototype._setValue_arrayElement_setNeedsUpdate,Lr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Lr.prototype._setValue_fromArray,Lr.prototype._setValue_fromArray_setNeedsUpdate,Lr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Fwe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=dl(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const d=arguments[u],p=d.uuid;let g=t[p];if(g===void 0){g=l++,t[p]=g,e.push(d);for(let _=0,w=a;_!==w;++_)s[_].push(new Lr(d,n[_],i[_]))}else if(g<c){o=e[g];const _=--c,w=e[_];t[w.uuid]=g,e[g]=w,t[p]=_,e[_]=d;for(let b=0,C=a;b!==C;++b){const M=s[b],A=M[_];let k=M[g];M[g]=A,k===void 0&&(k=new Lr(d,n[b],i[b])),M[_]=k}}else e[g]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const f=s++,d=e[f];t[d.uuid]=u,e[u]=d,t[c]=f,e[f]=l;for(let p=0,g=i;p!==g;++p){const _=n[p],w=_[f],b=_[u];_[u]=w,_[f]=b}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],u=c.uuid,f=t[u];if(f!==void 0)if(delete t[u],f<s){const d=--s,p=e[d],g=--a,_=e[g];t[p.uuid]=f,e[f]=p,t[_.uuid]=d,e[d]=_,e.pop();for(let w=0,b=i;w!==b;++w){const C=n[w],M=C[d],A=C[g];C[f]=M,C[d]=A,C.pop()}}else{const d=--a,p=e[d];d>0&&(t[p.uuid]=f),e[f]=p,e.pop();for(let g=0,_=i;g!==_;++g){const w=n[g];w[f]=w[d],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const a=this._paths,o=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);i=s.length,n[e]=i,a.push(e),o.push(t),s.push(f);for(let d=u,p=l.length;d!==p;++d){const g=l[d];f[d]=new Lr(g,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],c=e[o];t[c]=n,a[n]=l,a.pop(),s[n]=s[o],s.pop(),i[n]=i[o],i.pop()}}}class xJ{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:gm,endingEnd:gm};for(let c=0;c!==a;++c){const u=s[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=yY,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,s=e._clip.duration,a=s/i,o=i/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+n,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case Wk:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case JA:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(a),c[u].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const a=n===wY;if(e===0)return s===-1?i:a&&(s&1)===1?t-i:i;if(n===vY){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=vm,i.endingEnd=vm):(e?i.endingStart=this.zeroSlopeAtStart?vm:gm:i.endingStart=a_,t?i.endingEnd=this.zeroSlopeAtEnd?vm:gm:i.endingEnd=a_)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=n,this}}const Bwe=new Float32Array(1);class Uwe extends Uu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,a=e._propertyBindings,o=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const d=i[f],p=d.name;let g=u[p];if(g!==void 0)++g.referenceCount,a[f]=g;else{if(g=a[f],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,p));continue}const _=t&&t._propertyBindings[f].binding.parsedPath;g=new SJ(Lr.create(n,p,_),d.ValueTypeName,d.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,p),a[f]=g}o[f].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=o.actionByRoot,d=(e._localRoot||this._root).uuid;delete f[d],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let a=i[t];a===void 0&&(a={},i[t]=a),a[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,a=this._bindingsByRootAndName,o=a[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new dR(new Float32Array(2),new Float32Array(2),1,Bwe),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let a=typeof e=="string"?K1.findByName(i,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(n===void 0&&(a!==null?n=a.blendMode:n=JA),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===n)return f;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new xJ(this,a,t,n);return this._bindAction(u,c),this._addInactiveAction(u,o,s),u}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?K1.findByName(n,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(i,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const o=n[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class jwe extends XA{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new QA(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class zwe extends XA{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTargetArray=!0,this.depth=n,this.texture=new ib(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class CR{constructor(e){this.value=e}clone(){return new CR(this.value.clone===void 0?this.value:this.value.clone())}}let Vwe=0;class Gwe extends Uu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Vwe++}),this.name="",this.usage=l_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class Hwe extends lb{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Wwe{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const oU=new Nn;class MR{constructor(e,t,n=0,i=1/0){this.ray=new mg(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Nm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return oU.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(oU),this}intersectObject(e,t=!0,n=[]){return C3(e,this,n,t),n.sort(lU),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)C3(e[i],this,n,t);return n.sort(lU),n}}function lU(r,e){return r.distance-e.distance}function C3(r,e,t,n){let i=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const s=r.children;for(let a=0,o=s.length;a<o;a++)C3(s[a],e,t,!0)}}class M3{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Qn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Qn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Ywe{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class AR{constructor(e,t,n,i){AR.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=i,this}}const cU=new Mt;class Jwe{constructor(e=new Mt(1/0,1/0),t=new Mt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=cU.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,cU).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const uU=new ye,cS=new ye;class Xwe{constructor(e=new ye,t=new ye){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){uU.subVectors(e,this.start),cS.subVectors(this.end,this.start);const n=cS.dot(cS);let s=cS.dot(uU)/n;return t&&(s=Qn(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const fU=new ye;class Qwe extends Mr{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new $n,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const c=a/l*Math.PI*2,u=o/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}n.setAttribute("position",new wn(i,3));const s=new Xa({fog:!1,toneMapped:!1});this.cone=new Xc(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),fU.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(fU),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Qd=new ye,uS=new Nn,V4=new Nn;class Kwe extends Xc{constructor(e){const t=CJ(e),n=new $n,i=[],s=[],a=new Kt(0,0,1),o=new Kt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}n.setAttribute("position",new wn(i,3)),n.setAttribute("color",new wn(s,3));const l=new Xa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");V4.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(uS.multiplyMatrices(V4,o.matrixWorld),Qd.setFromMatrixPosition(uS),i.setXYZ(a,Qd.x,Qd.y,Qd.z),uS.multiplyMatrices(V4,o.parent.matrixWorld),Qd.setFromMatrixPosition(uS),i.setXYZ(a+1,Qd.x,Qd.y,Qd.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function CJ(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,CJ(r.children[t]));return e}class qwe extends si{constructor(e,t,n){const i=new pb(t,4,2),s=new mo({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Zwe=new ye,dU=new Kt,hU=new Kt;class $we extends Mr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new hb(t);i.rotateY(Math.PI*.5),this.material=new mo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),a=new Float32Array(s.count*3);i.setAttribute("color",new Pr(a,3)),this.add(new si(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");dU.copy(this.light.color),hU.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?dU:hU;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Zwe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class e_e extends Xc{constructor(e=10,t=10,n=4473924,i=8947848){n=new Kt(n),i=new Kt(i);const s=t/2,a=e/t,o=e/2,l=[],c=[];for(let d=0,p=0,g=-o;d<=t;d++,g+=a){l.push(-o,0,g,o,0,g),l.push(g,0,-o,g,0,o);const _=d===s?n:i;_.toArray(c,p),p+=3,_.toArray(c,p),p+=3,_.toArray(c,p),p+=3,_.toArray(c,p),p+=3}const u=new $n;u.setAttribute("position",new wn(l,3)),u.setAttribute("color",new wn(c,3));const f=new Xa({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class t_e extends Xc{constructor(e=10,t=16,n=8,i=64,s=4473924,a=8947848){s=new Kt(s),a=new Kt(a);const o=[],l=[];if(t>1)for(let f=0;f<t;f++){const d=f/t*(Math.PI*2),p=Math.sin(d)*e,g=Math.cos(d)*e;o.push(0,0,0),o.push(p,0,g);const _=f&1?s:a;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let f=0;f<n;f++){const d=f&1?s:a,p=e-e/n*f;for(let g=0;g<i;g++){let _=g/i*(Math.PI*2),w=Math.sin(_)*p,b=Math.cos(_)*p;o.push(w,0,b),l.push(d.r,d.g,d.b),_=(g+1)/i*(Math.PI*2),w=Math.sin(_)*p,b=Math.cos(_)*p,o.push(w,0,b),l.push(d.r,d.g,d.b)}}const c=new $n;c.setAttribute("position",new wn(o,3)),c.setAttribute("color",new wn(l,3));const u=new Xa({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const pU=new ye,fS=new ye,mU=new ye;class n_e extends Mr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new $n;i.setAttribute("position",new wn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Xa({fog:!1,toneMapped:!1});this.lightPlane=new td(i,s),this.add(this.lightPlane),i=new $n,i.setAttribute("position",new wn([0,0,0,0,0,1],3)),this.targetLine=new td(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),pU.setFromMatrixPosition(this.light.matrixWorld),fS.setFromMatrixPosition(this.light.target.matrixWorld),mU.subVectors(fS,pU),this.lightPlane.lookAt(fS),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(fS),this.targetLine.scale.z=mU.length()}}const dS=new ye,Ji=new sb;class r_e extends Xc{constructor(e){const t=new $n,n=new Xa({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(g,_){l(g),l(_)}function l(g){i.push(0,0,0),s.push(0,0,0),a[g]===void 0&&(a[g]=[]),a[g].push(i.length/3-1)}t.setAttribute("position",new wn(i,3)),t.setAttribute("color",new wn(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const c=new Kt(16755200),u=new Kt(16711680),f=new Kt(43775),d=new Kt(16777215),p=new Kt(3355443);this.setColors(c,u,f,d,p)}setColors(e,t,n,i,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;Ji.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===Rc?-1:0;ts("c",t,e,Ji,0,0,s),ts("t",t,e,Ji,0,0,1),ts("n1",t,e,Ji,-1,-1,s),ts("n2",t,e,Ji,n,-1,s),ts("n3",t,e,Ji,-1,i,s),ts("n4",t,e,Ji,n,i,s),ts("f1",t,e,Ji,-1,-1,1),ts("f2",t,e,Ji,n,-1,1),ts("f3",t,e,Ji,-1,i,1),ts("f4",t,e,Ji,n,i,1),ts("u1",t,e,Ji,n*.7,i*1.1,s),ts("u2",t,e,Ji,-1*.7,i*1.1,s),ts("u3",t,e,Ji,0,i*2,s),ts("cf1",t,e,Ji,-1,0,1),ts("cf2",t,e,Ji,n,0,1),ts("cf3",t,e,Ji,0,-1,1),ts("cf4",t,e,Ji,0,i,1),ts("cn1",t,e,Ji,-1,0,s),ts("cn2",t,e,Ji,n,0,s),ts("cn3",t,e,Ji,0,-1,s),ts("cn4",t,e,Ji,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ts(r,e,t,n,i,s,a){dS.set(i,s,a).unproject(n);const o=e[r];if(o!==void 0){const l=t.getAttribute("position");for(let c=0,u=o.length;c<u;c++)l.setXYZ(o[c],dS.x,dS.y,dS.z)}}const hS=new ta;class i_e extends Xc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new $n;s.setIndex(new Pr(n,1)),s.setAttribute("position",new Pr(i,3)),super(s,new Xa({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&hS.setFromObject(this.object),hS.isEmpty())return;const t=hS.min,n=hS.max,i=this.geometry.attributes.position,s=i.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class s_e extends Xc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new $n;s.setIndex(new Pr(n,1)),s.setAttribute("position",new wn(i,3)),super(s,new Xa({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class a_e extends td{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new $n;a.setAttribute("position",new wn(s,3)),a.computeBoundingSphere(),super(a,new Xa({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new $n;l.setAttribute("position",new wn(o,3)),l.computeBoundingSphere(),this.add(new si(l,new mo({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const gU=new ye;let pS,G4;class o_e extends Mr{constructor(e=new ye(0,0,1),t=new ye(0,0,0),n=1,i=16776960,s=n*.2,a=s*.2){super(),this.type="ArrowHelper",pS===void 0&&(pS=new $n,pS.setAttribute("position",new wn([0,0,0,0,1,0],3)),G4=new yv(0,.5,1,5,1),G4.translate(0,-.5,0)),this.position.copy(t),this.line=new td(pS,new Xa({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new si(G4,new mo({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{gU.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(gU,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class l_e extends Xc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new $n;i.setAttribute("position",new wn(t,3)),i.setAttribute("color",new wn(n,3));const s=new Xa({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new Kt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class c_e{constructor(){this.type="ShapePath",this.color=new Kt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new f_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,a){return this.currentPath.bezierCurveTo(e,t,n,i,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(b){const C=[];for(let M=0,A=b.length;M<A;M++){const k=b[M],O=new Dm;O.curves=k.curves,C.push(O)}return C}function n(b,C){const M=C.length;let A=!1;for(let k=M-1,O=0;O<M;k=O++){let R=C[k],I=C[O],D=I.x-R.x,E=I.y-R.y;if(Math.abs(E)>Number.EPSILON){if(E<0&&(R=C[O],D=-D,I=C[k],E=-E),b.y<R.y||b.y>I.y)continue;if(b.y===R.y){if(b.x===R.x)return!0}else{const B=E*(b.x-R.x)-D*(b.y-R.y);if(B===0)return!0;if(B<0)continue;A=!A}}else{if(b.y!==R.y)continue;if(I.x<=b.x&&b.x<=R.x||R.x<=b.x&&b.x<=I.x)return!0}}return A}const i=Eu.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const c=[];if(s.length===1)return o=s[0],l=new Dm,l.curves=o.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const f=[],d=[];let p=[],g=0,_;d[g]=void 0,p[g]=[];for(let b=0,C=s.length;b<C;b++)o=s[b],_=o.getPoints(),a=i(_),a=e?!a:a,a?(!u&&d[g]&&g++,d[g]={s:new Dm,p:_},d[g].s.curves=o.curves,u&&g++,p[g]=[]):p[g].push({h:o,p:_[0]});if(!d[0])return t(s);if(d.length>1){let b=!1,C=0;for(let M=0,A=d.length;M<A;M++)f[M]=[];for(let M=0,A=d.length;M<A;M++){const k=p[M];for(let O=0;O<k.length;O++){const R=k[O];let I=!0;for(let D=0;D<d.length;D++)n(R.p,d[D].p)&&(M!==D&&C++,I?(I=!1,f[D].push(R)):b=!0);I&&f[M].push(R)}}C>0&&b===!1&&(p=f)}let w;for(let b=0,C=d.length;b<C;b++){l=d[b].s,c.push(l),w=p[b];for(let M=0,A=w.length;M<A;M++)l.holes.push(w[M].h)}return c}}class u_e extends Uu{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function f_e(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function d_e(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function h_e(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function A3(r,e,t,n){const i=p_e(n);switch(t){case Uk:return r*e;case zk:return r*e;case Vk:return r*e*2;case nb:return r*e/i.components*i.byteLength;case rb:return r*e/i.components*i.byteLength;case Gk:return r*e*2/i.components*i.byteLength;case WA:return r*e*2/i.components*i.byteLength;case jk:return r*e*3/i.components*i.byteLength;case os:return r*e*4/i.components*i.byteLength;case YA:return r*e*4/i.components*i.byteLength;case mw:case gw:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case vw:case yw:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case FC:case UC:return Math.max(r,16)*Math.max(e,8)/4;case OC:case BC:return Math.max(r,8)*Math.max(e,8)/2;case jC:case zC:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case VC:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case GC:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case HC:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case WC:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case YC:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case JC:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case XC:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case QC:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case KC:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case qC:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case ZC:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case $C:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case eM:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case tM:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case nM:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case ww:case rM:case iM:return Math.ceil(r/4)*Math.ceil(e/4)*16;case Hk:case sM:return Math.ceil(r/4)*Math.ceil(e/4)*8;case aM:case oM:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function p_e(r){switch(r){case jo:case zA:return{byteLength:1,components:1};case W1:case VA:case ks:return{byteLength:2,components:1};case GA:case HA:return{byteLength:2,components:4};case Pu:case tb:case Mi:return{byteLength:4,components:1};case Bk:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}const m_e={contain:f_e,cover:d_e,fill:h_e,getByteLength:A3};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:$_}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=$_);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function MJ(){let r=null,e=!1,t=null,n=null;function i(s,a){t(s,a),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function g_e(r){const e=new WeakMap;function t(o,l){const c=o.array,u=o.usage,f=c.byteLength,d=r.createBuffer();r.bindBuffer(l,d),r.bufferData(l,c,u),o.onUploadCallback();let p;if(c instanceof Float32Array)p=r.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?p=r.HALF_FLOAT:p=r.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=r.SHORT;else if(c instanceof Uint32Array)p=r.UNSIGNED_INT;else if(c instanceof Int32Array)p=r.INT;else if(c instanceof Int8Array)p=r.BYTE;else if(c instanceof Uint8Array)p=r.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:d,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:f}}function n(o,l,c){const u=l.array,f=l.updateRanges;if(r.bindBuffer(c,o),f.length===0)r.bufferSubData(c,0,u);else{f.sort((p,g)=>p.start-g.start);let d=0;for(let p=1;p<f.length;p++){const g=f[d],_=f[p];_.start<=g.start+g.count+1?g.count=Math.max(g.count,_.start+_.count-g.start):(++d,f[d]=_)}f.length=d+1;for(let p=0,g=f.length;p<g;p++){const _=f[p];r.bufferSubData(c,_.start*u.BYTES_PER_ELEMENT,u,_.start,_.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(r.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(c.buffer,o,l),c.version=o.version}}return{get:i,remove:s,update:a}}var v_e=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,y_e=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,w_e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,__e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,b_e=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,S_e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,x_e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,C_e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,M_e=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,A_e=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,T_e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,E_e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,I_e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,L_e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,N_e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,D_e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,k_e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,R_e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,P_e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,O_e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,F_e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,B_e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,U_e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,j_e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,z_e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,V_e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,G_e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,H_e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,W_e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Y_e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,J_e="gl_FragColor = linearToOutputTexel( gl_FragColor );",X_e=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Q_e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,K_e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,q_e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Z_e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,$_e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,ebe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,tbe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,nbe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,rbe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ibe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,sbe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,abe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,obe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lbe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,cbe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,ube=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,fbe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,dbe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,hbe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,pbe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,mbe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,gbe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,vbe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,ybe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,wbe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,_be=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,bbe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Sbe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,xbe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Cbe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Mbe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Abe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Tbe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Ebe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Ibe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Lbe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Nbe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Dbe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,kbe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Rbe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Pbe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Obe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Fbe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Bbe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Ube=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,jbe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,zbe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Vbe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Gbe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Hbe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Wbe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Ybe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Jbe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Xbe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Qbe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Kbe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,qbe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Zbe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,$be=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,e2e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,t2e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,n2e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,r2e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,i2e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,s2e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,a2e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,o2e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,l2e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,c2e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,u2e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,f2e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,d2e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,h2e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,p2e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,m2e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const g2e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,v2e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,y2e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,w2e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_2e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,b2e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,S2e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,x2e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,C2e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,M2e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,A2e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,T2e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,E2e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,I2e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,L2e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,N2e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,D2e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,k2e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,R2e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,P2e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,O2e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,F2e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,B2e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,U2e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,j2e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,z2e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,V2e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,G2e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,H2e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,W2e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Y2e=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,J2e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,X2e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Q2e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tr={alphahash_fragment:v_e,alphahash_pars_fragment:y_e,alphamap_fragment:w_e,alphamap_pars_fragment:__e,alphatest_fragment:b_e,alphatest_pars_fragment:S_e,aomap_fragment:x_e,aomap_pars_fragment:C_e,batching_pars_vertex:M_e,batching_vertex:A_e,begin_vertex:T_e,beginnormal_vertex:E_e,bsdfs:I_e,iridescence_fragment:L_e,bumpmap_pars_fragment:N_e,clipping_planes_fragment:D_e,clipping_planes_pars_fragment:k_e,clipping_planes_pars_vertex:R_e,clipping_planes_vertex:P_e,color_fragment:O_e,color_pars_fragment:F_e,color_pars_vertex:B_e,color_vertex:U_e,common:j_e,cube_uv_reflection_fragment:z_e,defaultnormal_vertex:V_e,displacementmap_pars_vertex:G_e,displacementmap_vertex:H_e,emissivemap_fragment:W_e,emissivemap_pars_fragment:Y_e,colorspace_fragment:J_e,colorspace_pars_fragment:X_e,envmap_fragment:Q_e,envmap_common_pars_fragment:K_e,envmap_pars_fragment:q_e,envmap_pars_vertex:Z_e,envmap_physical_pars_fragment:cbe,envmap_vertex:$_e,fog_vertex:ebe,fog_pars_vertex:tbe,fog_fragment:nbe,fog_pars_fragment:rbe,gradientmap_pars_fragment:ibe,lightmap_pars_fragment:sbe,lights_lambert_fragment:abe,lights_lambert_pars_fragment:obe,lights_pars_begin:lbe,lights_toon_fragment:ube,lights_toon_pars_fragment:fbe,lights_phong_fragment:dbe,lights_phong_pars_fragment:hbe,lights_physical_fragment:pbe,lights_physical_pars_fragment:mbe,lights_fragment_begin:gbe,lights_fragment_maps:vbe,lights_fragment_end:ybe,logdepthbuf_fragment:wbe,logdepthbuf_pars_fragment:_be,logdepthbuf_pars_vertex:bbe,logdepthbuf_vertex:Sbe,map_fragment:xbe,map_pars_fragment:Cbe,map_particle_fragment:Mbe,map_particle_pars_fragment:Abe,metalnessmap_fragment:Tbe,metalnessmap_pars_fragment:Ebe,morphinstance_vertex:Ibe,morphcolor_vertex:Lbe,morphnormal_vertex:Nbe,morphtarget_pars_vertex:Dbe,morphtarget_vertex:kbe,normal_fragment_begin:Rbe,normal_fragment_maps:Pbe,normal_pars_fragment:Obe,normal_pars_vertex:Fbe,normal_vertex:Bbe,normalmap_pars_fragment:Ube,clearcoat_normal_fragment_begin:jbe,clearcoat_normal_fragment_maps:zbe,clearcoat_pars_fragment:Vbe,iridescence_pars_fragment:Gbe,opaque_fragment:Hbe,packing:Wbe,premultiplied_alpha_fragment:Ybe,project_vertex:Jbe,dithering_fragment:Xbe,dithering_pars_fragment:Qbe,roughnessmap_fragment:Kbe,roughnessmap_pars_fragment:qbe,shadowmap_pars_fragment:Zbe,shadowmap_pars_vertex:$be,shadowmap_vertex:e2e,shadowmask_pars_fragment:t2e,skinbase_vertex:n2e,skinning_pars_vertex:r2e,skinning_vertex:i2e,skinnormal_vertex:s2e,specularmap_fragment:a2e,specularmap_pars_fragment:o2e,tonemapping_fragment:l2e,tonemapping_pars_fragment:c2e,transmission_fragment:u2e,transmission_pars_fragment:f2e,uv_pars_fragment:d2e,uv_pars_vertex:h2e,uv_vertex:p2e,worldpos_vertex:m2e,background_vert:g2e,background_frag:v2e,backgroundCube_vert:y2e,backgroundCube_frag:w2e,cube_vert:_2e,cube_frag:b2e,depth_vert:S2e,depth_frag:x2e,distanceRGBA_vert:C2e,distanceRGBA_frag:M2e,equirect_vert:A2e,equirect_frag:T2e,linedashed_vert:E2e,linedashed_frag:I2e,meshbasic_vert:L2e,meshbasic_frag:N2e,meshlambert_vert:D2e,meshlambert_frag:k2e,meshmatcap_vert:R2e,meshmatcap_frag:P2e,meshnormal_vert:O2e,meshnormal_frag:F2e,meshphong_vert:B2e,meshphong_frag:U2e,meshphysical_vert:j2e,meshphysical_frag:z2e,meshtoon_vert:V2e,meshtoon_frag:G2e,points_vert:H2e,points_frag:W2e,shadow_vert:Y2e,shadow_frag:J2e,sprite_vert:X2e,sprite_frag:Q2e},en={common:{diffuse:{value:new Kt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Xn},alphaMap:{value:null},alphaMapTransform:{value:new Xn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Xn}},envmap:{envMap:{value:null},envMapRotation:{value:new Xn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Xn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Xn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Xn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Xn},normalScale:{value:new Mt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Xn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Xn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Xn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Xn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Kt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Kt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Xn},alphaTest:{value:0},uvTransform:{value:new Xn}},sprite:{diffuse:{value:new Kt(16777215)},opacity:{value:1},center:{value:new Mt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Xn},alphaMap:{value:null},alphaMapTransform:{value:new Xn},alphaTest:{value:0}}},Nc={basic:{uniforms:lo([en.common,en.specularmap,en.envmap,en.aomap,en.lightmap,en.fog]),vertexShader:tr.meshbasic_vert,fragmentShader:tr.meshbasic_frag},lambert:{uniforms:lo([en.common,en.specularmap,en.envmap,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.fog,en.lights,{emissive:{value:new Kt(0)}}]),vertexShader:tr.meshlambert_vert,fragmentShader:tr.meshlambert_frag},phong:{uniforms:lo([en.common,en.specularmap,en.envmap,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.fog,en.lights,{emissive:{value:new Kt(0)},specular:{value:new Kt(1118481)},shininess:{value:30}}]),vertexShader:tr.meshphong_vert,fragmentShader:tr.meshphong_frag},standard:{uniforms:lo([en.common,en.envmap,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.roughnessmap,en.metalnessmap,en.fog,en.lights,{emissive:{value:new Kt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:tr.meshphysical_vert,fragmentShader:tr.meshphysical_frag},toon:{uniforms:lo([en.common,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.gradientmap,en.fog,en.lights,{emissive:{value:new Kt(0)}}]),vertexShader:tr.meshtoon_vert,fragmentShader:tr.meshtoon_frag},matcap:{uniforms:lo([en.common,en.bumpmap,en.normalmap,en.displacementmap,en.fog,{matcap:{value:null}}]),vertexShader:tr.meshmatcap_vert,fragmentShader:tr.meshmatcap_frag},points:{uniforms:lo([en.points,en.fog]),vertexShader:tr.points_vert,fragmentShader:tr.points_frag},dashed:{uniforms:lo([en.common,en.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tr.linedashed_vert,fragmentShader:tr.linedashed_frag},depth:{uniforms:lo([en.common,en.displacementmap]),vertexShader:tr.depth_vert,fragmentShader:tr.depth_frag},normal:{uniforms:lo([en.common,en.bumpmap,en.normalmap,en.displacementmap,{opacity:{value:1}}]),vertexShader:tr.meshnormal_vert,fragmentShader:tr.meshnormal_frag},sprite:{uniforms:lo([en.sprite,en.fog]),vertexShader:tr.sprite_vert,fragmentShader:tr.sprite_frag},background:{uniforms:{uvTransform:{value:new Xn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:tr.background_vert,fragmentShader:tr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Xn}},vertexShader:tr.backgroundCube_vert,fragmentShader:tr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:tr.cube_vert,fragmentShader:tr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tr.equirect_vert,fragmentShader:tr.equirect_frag},distanceRGBA:{uniforms:lo([en.common,en.displacementmap,{referencePosition:{value:new ye},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tr.distanceRGBA_vert,fragmentShader:tr.distanceRGBA_frag},shadow:{uniforms:lo([en.lights,en.fog,{color:{value:new Kt(0)},opacity:{value:1}}]),vertexShader:tr.shadow_vert,fragmentShader:tr.shadow_frag}};Nc.physical={uniforms:lo([Nc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Xn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Xn},clearcoatNormalScale:{value:new Mt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Xn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Xn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Xn},sheen:{value:0},sheenColor:{value:new Kt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Xn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Xn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Xn},transmissionSamplerSize:{value:new Mt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Xn},attenuationDistance:{value:0},attenuationColor:{value:new Kt(0)},specularColor:{value:new Kt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Xn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Xn},anisotropyVector:{value:new Mt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Xn}}]),vertexShader:tr.meshphysical_vert,fragmentShader:tr.meshphysical_frag};const mS={r:0,b:0,g:0},Jp=new ml,K2e=new Nn;function q2e(r,e,t,n,i,s,a){const o=new Kt(0);let l=s===!0?0:1,c,u,f=null,d=0,p=null;function g(M){let A=M.isScene===!0?M.background:null;return A&&A.isTexture&&(A=(M.backgroundBlurriness>0?t:e).get(A)),A}function _(M){let A=!1;const k=g(M);k===null?b(o,l):k&&k.isColor&&(b(k,1),A=!0);const O=r.xr.getEnvironmentBlendMode();O==="additive"?n.buffers.color.setClear(0,0,0,1,a):O==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(r.autoClear||A)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function w(M,A){const k=g(A);k&&(k.isCubeTexture||k.mapping===vv)?(u===void 0&&(u=new si(new gg(1,1,1),new zo({name:"BackgroundCubeMaterial",uniforms:Q1(Nc.backgroundCube.uniforms),vertexShader:Nc.backgroundCube.vertexShader,fragmentShader:Nc.backgroundCube.fragmentShader,side:vo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(O,R,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Jp.copy(A.backgroundRotation),Jp.x*=-1,Jp.y*=-1,Jp.z*=-1,k.isCubeTexture&&k.isRenderTargetTexture===!1&&(Jp.y*=-1,Jp.z*=-1),u.material.uniforms.envMap.value=k,u.material.uniforms.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(K2e.makeRotationFromEuler(Jp)),u.material.toneMapped=Nr.getTransfer(k.colorSpace)!==Jr,(f!==k||d!==k.version||p!==r.toneMapping)&&(u.material.needsUpdate=!0,f=k,d=k.version,p=r.toneMapping),u.layers.enableAll(),M.unshift(u,u.geometry,u.material,0,0,null)):k&&k.isTexture&&(c===void 0&&(c=new si(new Kc(2,2),new zo({name:"BackgroundMaterial",uniforms:Q1(Nc.background.uniforms),vertexShader:Nc.background.vertexShader,fragmentShader:Nc.background.fragmentShader,side:ku,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=k,c.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,c.material.toneMapped=Nr.getTransfer(k.colorSpace)!==Jr,k.matrixAutoUpdate===!0&&k.updateMatrix(),c.material.uniforms.uvTransform.value.copy(k.matrix),(f!==k||d!==k.version||p!==r.toneMapping)&&(c.material.needsUpdate=!0,f=k,d=k.version,p=r.toneMapping),c.layers.enableAll(),M.unshift(c,c.geometry,c.material,0,0,null))}function b(M,A){M.getRGB(mS,PY(r)),n.buffers.color.setClear(mS.r,mS.g,mS.b,A,a)}function C(){u!==void 0&&(u.geometry.dispose(),u.material.dispose()),c!==void 0&&(c.geometry.dispose(),c.material.dispose())}return{getClearColor:function(){return o},setClearColor:function(M,A=1){o.set(M),l=A,b(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,b(o,l)},render:_,addToRenderList:w,dispose:C}}function Z2e(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},i=d(null);let s=i,a=!1;function o(E,B,U,V,X){let te=!1;const ee=f(V,U,B);s!==ee&&(s=ee,c(s.object)),te=p(E,V,U,X),te&&g(E,V,U,X),X!==null&&e.update(X,r.ELEMENT_ARRAY_BUFFER),(te||a)&&(a=!1,A(E,B,U,V),X!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(X).buffer))}function l(){return r.createVertexArray()}function c(E){return r.bindVertexArray(E)}function u(E){return r.deleteVertexArray(E)}function f(E,B,U){const V=U.wireframe===!0;let X=n[E.id];X===void 0&&(X={},n[E.id]=X);let te=X[B.id];te===void 0&&(te={},X[B.id]=te);let ee=te[V];return ee===void 0&&(ee=d(l()),te[V]=ee),ee}function d(E){const B=[],U=[],V=[];for(let X=0;X<t;X++)B[X]=0,U[X]=0,V[X]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:U,attributeDivisors:V,object:E,attributes:{},index:null}}function p(E,B,U,V){const X=s.attributes,te=B.attributes;let ee=0;const ue=U.getAttributes();for(const ne in ue)if(ue[ne].location>=0){const q=X[ne];let J=te[ne];if(J===void 0&&(ne==="instanceMatrix"&&E.instanceMatrix&&(J=E.instanceMatrix),ne==="instanceColor"&&E.instanceColor&&(J=E.instanceColor)),q===void 0||q.attribute!==J||J&&q.data!==J.data)return!0;ee++}return s.attributesNum!==ee||s.index!==V}function g(E,B,U,V){const X={},te=B.attributes;let ee=0;const ue=U.getAttributes();for(const ne in ue)if(ue[ne].location>=0){let q=te[ne];q===void 0&&(ne==="instanceMatrix"&&E.instanceMatrix&&(q=E.instanceMatrix),ne==="instanceColor"&&E.instanceColor&&(q=E.instanceColor));const J={};J.attribute=q,q&&q.data&&(J.data=q.data),X[ne]=J,ee++}s.attributes=X,s.attributesNum=ee,s.index=V}function _(){const E=s.newAttributes;for(let B=0,U=E.length;B<U;B++)E[B]=0}function w(E){b(E,0)}function b(E,B){const U=s.newAttributes,V=s.enabledAttributes,X=s.attributeDivisors;U[E]=1,V[E]===0&&(r.enableVertexAttribArray(E),V[E]=1),X[E]!==B&&(r.vertexAttribDivisor(E,B),X[E]=B)}function C(){const E=s.newAttributes,B=s.enabledAttributes;for(let U=0,V=B.length;U<V;U++)B[U]!==E[U]&&(r.disableVertexAttribArray(U),B[U]=0)}function M(E,B,U,V,X,te,ee){ee===!0?r.vertexAttribIPointer(E,B,U,X,te):r.vertexAttribPointer(E,B,U,V,X,te)}function A(E,B,U,V){_();const X=V.attributes,te=U.getAttributes(),ee=B.defaultAttributeValues;for(const ue in te){const ne=te[ue];if(ne.location>=0){let oe=X[ue];if(oe===void 0&&(ue==="instanceMatrix"&&E.instanceMatrix&&(oe=E.instanceMatrix),ue==="instanceColor"&&E.instanceColor&&(oe=E.instanceColor)),oe!==void 0){const q=oe.normalized,J=oe.itemSize,ie=e.get(oe);if(ie===void 0)continue;const he=ie.buffer,$=ie.type,ge=ie.bytesPerElement,pe=$===r.INT||$===r.UNSIGNED_INT||oe.gpuType===tb;if(oe.isInterleavedBufferAttribute){const we=oe.data,ke=we.stride,Pe=oe.offset;if(we.isInstancedInterleavedBuffer){for(let je=0;je<ne.locationSize;je++)b(ne.location+je,we.meshPerAttribute);E.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let je=0;je<ne.locationSize;je++)w(ne.location+je);r.bindBuffer(r.ARRAY_BUFFER,he);for(let je=0;je<ne.locationSize;je++)M(ne.location+je,J/ne.locationSize,$,q,ke*ge,(Pe+J/ne.locationSize*je)*ge,pe)}else{if(oe.isInstancedBufferAttribute){for(let we=0;we<ne.locationSize;we++)b(ne.location+we,oe.meshPerAttribute);E.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let we=0;we<ne.locationSize;we++)w(ne.location+we);r.bindBuffer(r.ARRAY_BUFFER,he);for(let we=0;we<ne.locationSize;we++)M(ne.location+we,J/ne.locationSize,$,q,J*ge,J/ne.locationSize*we*ge,pe)}}else if(ee!==void 0){const q=ee[ue];if(q!==void 0)switch(q.length){case 2:r.vertexAttrib2fv(ne.location,q);break;case 3:r.vertexAttrib3fv(ne.location,q);break;case 4:r.vertexAttrib4fv(ne.location,q);break;default:r.vertexAttrib1fv(ne.location,q)}}}}C()}function k(){I();for(const E in n){const B=n[E];for(const U in B){const V=B[U];for(const X in V)u(V[X].object),delete V[X];delete B[U]}delete n[E]}}function O(E){if(n[E.id]===void 0)return;const B=n[E.id];for(const U in B){const V=B[U];for(const X in V)u(V[X].object),delete V[X];delete B[U]}delete n[E.id]}function R(E){for(const B in n){const U=n[B];if(U[E.id]===void 0)continue;const V=U[E.id];for(const X in V)u(V[X].object),delete V[X];delete U[E.id]}}function I(){D(),a=!0,s!==i&&(s=i,c(s.object))}function D(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:I,resetDefaultState:D,dispose:k,releaseStatesOfGeometry:O,releaseStatesOfProgram:R,initAttributes:_,enableAttribute:w,disableUnusedAttributes:C}}function $2e(r,e,t){let n;function i(c){n=c}function s(c,u){r.drawArrays(n,c,u),t.update(u,n,1)}function a(c,u,f){f!==0&&(r.drawArraysInstanced(n,c,u,f),t.update(u,n,f))}function o(c,u,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,c,0,u,0,f);let p=0;for(let g=0;g<f;g++)p+=u[g];t.update(p,n,1)}function l(c,u,f,d){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<c.length;g++)a(c[g],u[g],d[g]);else{p.multiDrawArraysInstancedWEBGL(n,c,0,u,0,d,0,f);let g=0;for(let _=0;_<f;_++)g+=u[_]*d[_];t.update(g,n,1)}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function eSe(r,e,t,n){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(R){return!(R!==os&&n.convert(R)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(R){const I=R===ks&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(R!==jo&&n.convert(R)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&R!==Mi&&!I)}function l(R){if(R==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const f=t.logarithmicDepthBuffer===!0,d=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),g=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),_=r.getParameter(r.MAX_TEXTURE_SIZE),w=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),b=r.getParameter(r.MAX_VERTEX_ATTRIBS),C=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),M=r.getParameter(r.MAX_VARYING_VECTORS),A=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),k=g>0,O=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:f,reverseDepthBuffer:d,maxTextures:p,maxVertexTextures:g,maxTextureSize:_,maxCubemapSize:w,maxAttributes:b,maxVertexUniforms:C,maxVaryings:M,maxFragmentUniforms:A,vertexTextures:k,maxSamples:O}}function tSe(r){const e=this;let t=null,n=0,i=!1,s=!1;const a=new Cf,o=new Xn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d){const p=f.length!==0||d||n!==0||i;return i=d,n=f.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,d){t=u(f,d,0)},this.setState=function(f,d,p){const g=f.clippingPlanes,_=f.clipIntersection,w=f.clipShadows,b=r.get(f);if(!i||g===null||g.length===0||s&&!w)s?u(null):c();else{const C=s?0:n,M=C*4;let A=b.clippingState||null;l.value=A,A=u(g,d,M,p);for(let k=0;k!==M;++k)A[k]=t[k];b.clippingState=A,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=C}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(f,d,p,g){const _=f!==null?f.length:0;let w=null;if(_!==0){if(w=l.value,g!==!0||w===null){const b=p+_*4,C=d.matrixWorldInverse;o.getNormalMatrix(C),(w===null||w.length<b)&&(w=new Float32Array(b));for(let M=0,A=p;M!==_;++M,A+=4)a.copy(f[M]).applyMatrix4(C,o),a.normal.toArray(w,A),w[A+3]=a.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,w}}function nSe(r){let e=new WeakMap;function t(a,o){return o===G1?a.mapping=Ru:o===s_&&(a.mapping=Rh),a}function n(a){if(a&&a.isTexture){const o=a.mapping;if(o===G1||o===s_)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new $k(l.height);return c.fromEquirectangularTexture(r,a),e.set(a,c),a.addEventListener("dispose",i),t(c.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const J0=4,vU=[.125,.215,.35,.446,.526,.582],am=20,H4=new Iu,yU=new Kt;let W4=null,Y4=0,J4=0,X4=!1;const rm=(1+Math.sqrt(5))/2,w0=1/rm,wU=[new ye(-rm,w0,0),new ye(rm,w0,0),new ye(-w0,0,rm),new ye(w0,0,rm),new ye(0,rm,-w0),new ye(0,rm,w0),new ye(-1,1,-1),new ye(1,1,-1),new ye(-1,1,1),new ye(1,1,1)];class T3{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){W4=this._renderer.getRenderTarget(),Y4=this._renderer.getActiveCubeFace(),J4=this._renderer.getActiveMipmapLevel(),X4=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=SU(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=bU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(W4,Y4,J4),this._renderer.xr.enabled=X4,e.scissorTest=!1,gS(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ru||e.mapping===Rh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),W4=this._renderer.getRenderTarget(),Y4=this._renderer.getActiveCubeFace(),J4=this._renderer.getActiveMipmapLevel(),X4=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:dr,minFilter:dr,generateMipmaps:!1,type:ks,format:os,colorSpace:Ou,depthBuffer:!1},i=_U(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_U(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=rSe(s)),this._blurMaterial=iSe(s,e,t)}return i}_compileMaterial(e){const t=new si(this._lodPlanes[0],e);this._renderer.compile(t,H4)}_sceneToCubeUV(e,t,n,i){const o=new Qi(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,d=u.toneMapping;u.getClearColor(yU),u.toneMapping=Tu,u.autoClear=!1;const p=new mo({name:"PMREM.Background",side:vo,depthWrite:!1,depthTest:!1}),g=new si(new gg,p);let _=!1;const w=e.background;w?w.isColor&&(p.color.copy(w),e.background=null,_=!0):(p.color.copy(yU),_=!0);for(let b=0;b<6;b++){const C=b%3;C===0?(o.up.set(0,l[b],0),o.lookAt(c[b],0,0)):C===1?(o.up.set(0,0,l[b]),o.lookAt(0,c[b],0)):(o.up.set(0,l[b],0),o.lookAt(0,0,c[b]));const M=this._cubeSize;gS(i,C*M,b>2?M:0,M,M),u.setRenderTarget(i),_&&u.render(g,o),u.render(e,o)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=d,u.autoClear=f,e.background=w}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Ru||e.mapping===Rh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=SU()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=bU());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new si(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;gS(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(a,H4)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=wU[(i-s-1)%wU.length];this._blur(e,s-1,s,a,o)}t.autoClear=n}_blur(e,t,n,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",s),this._halfBlur(a,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new si(this._lodPlanes[i],c),d=c.uniforms,p=this._sizeLods[n]-1,g=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*am-1),_=s/g,w=isFinite(s)?1+Math.floor(u*_):am;w>am&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${am}`);const b=[];let C=0;for(let R=0;R<am;++R){const I=R/_,D=Math.exp(-I*I/2);b.push(D),R===0?C+=D:R<w&&(C+=2*D)}for(let R=0;R<b.length;R++)b[R]=b[R]/C;d.envMap.value=e.texture,d.samples.value=w,d.weights.value=b,d.latitudinal.value=a==="latitudinal",o&&(d.poleAxis.value=o);const{_lodMax:M}=this;d.dTheta.value=g,d.mipInt.value=M-n;const A=this._sizeLods[i],k=3*A*(i>M-J0?i-M+J0:0),O=4*(this._cubeSize-A);gS(t,k,O,3*A,2*A),l.setRenderTarget(t),l.render(f,H4)}}function rSe(r){const e=[],t=[],n=[];let i=r;const s=r-J0+1+vU.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);t.push(o);let l=1/o;a>r-J0?l=vU[a-r+J0-1]:a===0&&(l=0),n.push(l);const c=1/(o-2),u=-c,f=1+c,d=[u,u,f,u,f,f,u,u,f,f,u,f],p=6,g=6,_=3,w=2,b=1,C=new Float32Array(_*g*p),M=new Float32Array(w*g*p),A=new Float32Array(b*g*p);for(let O=0;O<p;O++){const R=O%3*2/3-1,I=O>2?0:-1,D=[R,I,0,R+2/3,I,0,R+2/3,I+1,0,R,I,0,R+2/3,I+1,0,R,I+1,0];C.set(D,_*g*O),M.set(d,w*g*O);const E=[O,O,O,O,O,O];A.set(E,b*g*O)}const k=new $n;k.setAttribute("position",new Pr(C,_)),k.setAttribute("uv",new Pr(M,w)),k.setAttribute("faceIndex",new Pr(A,b)),e.push(k),i>J0&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function _U(r,e,t){const n=new pl(r,e,t);return n.texture.mapping=vv,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function gS(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function iSe(r,e,t){const n=new Float32Array(am),i=new ye(0,1,0);return new zo({name:"SphericalGaussianBlur",defines:{n:am,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:TR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Au,depthTest:!1,depthWrite:!1})}function bU(){return new zo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:TR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Au,depthTest:!1,depthWrite:!1})}function SU(){return new zo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:TR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Au,depthTest:!1,depthWrite:!1})}function TR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function sSe(r){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const l=o.mapping,c=l===G1||l===s_,u=l===Ru||l===Rh;if(c||u){let f=e.get(o);const d=f!==void 0?f.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==d)return t===null&&(t=new T3(r)),f=c?t.fromEquirectangular(o,f):t.fromCubemap(o,f),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),f.texture;if(f!==void 0)return f.texture;{const p=o.image;return c&&p&&p.height>0||u&&p&&i(p)?(t===null&&(t=new T3(r)),f=c?t.fromEquirectangular(o):t.fromCubemap(o),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),o.addEventListener("dispose",s),f.texture):null}}}return o}function i(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function aSe(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&k0("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function oSe(r,e,t,n){const i={},s=new WeakMap;function a(f){const d=f.target;d.index!==null&&e.remove(d.index);for(const g in d.attributes)e.remove(d.attributes[g]);d.removeEventListener("dispose",a),delete i[d.id];const p=s.get(d);p&&(e.remove(p),s.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function o(f,d){return i[d.id]===!0||(d.addEventListener("dispose",a),i[d.id]=!0,t.memory.geometries++),d}function l(f){const d=f.attributes;for(const p in d)e.update(d[p],r.ARRAY_BUFFER)}function c(f){const d=[],p=f.index,g=f.attributes.position;let _=0;if(p!==null){const C=p.array;_=p.version;for(let M=0,A=C.length;M<A;M+=3){const k=C[M+0],O=C[M+1],R=C[M+2];d.push(k,O,O,R,R,k)}}else if(g!==void 0){const C=g.array;_=g.version;for(let M=0,A=C.length/3-1;M<A;M+=3){const k=M+0,O=M+1,R=M+2;d.push(k,O,O,R,R,k)}}else return;const w=new(NY(d)?qk:Kk)(d,1);w.version=_;const b=s.get(f);b&&e.remove(b),s.set(f,w)}function u(f){const d=s.get(f);if(d){const p=f.index;p!==null&&d.version<p.version&&c(f)}else c(f);return s.get(f)}return{get:o,update:l,getWireframeAttribute:u}}function lSe(r,e,t){let n;function i(d){n=d}let s,a;function o(d){s=d.type,a=d.bytesPerElement}function l(d,p){r.drawElements(n,p,s,d*a),t.update(p,n,1)}function c(d,p,g){g!==0&&(r.drawElementsInstanced(n,p,s,d*a,g),t.update(p,n,g))}function u(d,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,p,0,s,d,0,g);let w=0;for(let b=0;b<g;b++)w+=p[b];t.update(w,n,1)}function f(d,p,g,_){if(g===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let b=0;b<d.length;b++)c(d[b]/a,p[b],_[b]);else{w.multiDrawElementsInstancedWEBGL(n,p,0,s,d,0,_,0,g);let b=0;for(let C=0;C<g;C++)b+=p[C]*_[C];t.update(b,n,1)}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=f}function cSe(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,o){switch(t.calls++,a){case r.TRIANGLES:t.triangles+=o*(s/3);break;case r.LINES:t.lines+=o*(s/2);break;case r.LINE_STRIP:t.lines+=o*(s-1);break;case r.LINE_LOOP:t.lines+=o*s;break;case r.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function uSe(r,e,t){const n=new WeakMap,i=new Cr;function s(a,o,l){const c=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,f=u!==void 0?u.length:0;let d=n.get(o);if(d===void 0||d.count!==f){let E=function(){I.dispose(),n.delete(o),o.removeEventListener("dispose",E)};var p=E;d!==void 0&&d.texture.dispose();const g=o.morphAttributes.position!==void 0,_=o.morphAttributes.normal!==void 0,w=o.morphAttributes.color!==void 0,b=o.morphAttributes.position||[],C=o.morphAttributes.normal||[],M=o.morphAttributes.color||[];let A=0;g===!0&&(A=1),_===!0&&(A=2),w===!0&&(A=3);let k=o.attributes.position.count*A,O=1;k>e.maxTextureSize&&(O=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const R=new Float32Array(k*O*4*f),I=new ib(R,k,O,f);I.type=Mi,I.needsUpdate=!0;const D=A*4;for(let B=0;B<f;B++){const U=b[B],V=C[B],X=M[B],te=k*O*4*B;for(let ee=0;ee<U.count;ee++){const ue=ee*D;g===!0&&(i.fromBufferAttribute(U,ee),R[te+ue+0]=i.x,R[te+ue+1]=i.y,R[te+ue+2]=i.z,R[te+ue+3]=0),_===!0&&(i.fromBufferAttribute(V,ee),R[te+ue+4]=i.x,R[te+ue+5]=i.y,R[te+ue+6]=i.z,R[te+ue+7]=0),w===!0&&(i.fromBufferAttribute(X,ee),R[te+ue+8]=i.x,R[te+ue+9]=i.y,R[te+ue+10]=i.z,R[te+ue+11]=X.itemSize===4?i.w:1)}}d={count:f,texture:I,size:new Mt(k,O)},n.set(o,d),o.addEventListener("dispose",E)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(r,"morphTexture",a.morphTexture,t);else{let g=0;for(let w=0;w<c.length;w++)g+=c[w];const _=o.morphTargetsRelative?1:1-g;l.getUniforms().setValue(r,"morphTargetBaseInfluence",_),l.getUniforms().setValue(r,"morphTargetInfluences",c)}l.getUniforms().setValue(r,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(r,"morphTargetsTextureSize",d.size)}return{update:s}}function fSe(r,e,t,n){let i=new WeakMap;function s(l){const c=n.render.frame,u=l.geometry,f=e.get(l,u);if(i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==c&&(t.update(l.instanceMatrix,r.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,r.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;i.get(d)!==c&&(d.update(),i.set(d,c))}return f}function a(){i=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const AJ=new Ur,xU=new tT(1,1),TJ=new ib,EJ=new QA,IJ=new ab,CU=[],MU=[],AU=new Float32Array(16),TU=new Float32Array(9),EU=new Float32Array(4);function _v(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=CU[i];if(s===void 0&&(s=new Float32Array(i),CU[i]=s),e!==0){n.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,r[a].toArray(s,o)}return s}function Us(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function js(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function wT(r,e){let t=MU[e];t===void 0&&(t=new Int32Array(e),MU[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function dSe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function hSe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Us(t,e))return;r.uniform2fv(this.addr,e),js(t,e)}}function pSe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Us(t,e))return;r.uniform3fv(this.addr,e),js(t,e)}}function mSe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Us(t,e))return;r.uniform4fv(this.addr,e),js(t,e)}}function gSe(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Us(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),js(t,e)}else{if(Us(t,n))return;EU.set(n),r.uniformMatrix2fv(this.addr,!1,EU),js(t,n)}}function vSe(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Us(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),js(t,e)}else{if(Us(t,n))return;TU.set(n),r.uniformMatrix3fv(this.addr,!1,TU),js(t,n)}}function ySe(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Us(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),js(t,e)}else{if(Us(t,n))return;AU.set(n),r.uniformMatrix4fv(this.addr,!1,AU),js(t,n)}}function wSe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function _Se(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Us(t,e))return;r.uniform2iv(this.addr,e),js(t,e)}}function bSe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Us(t,e))return;r.uniform3iv(this.addr,e),js(t,e)}}function SSe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Us(t,e))return;r.uniform4iv(this.addr,e),js(t,e)}}function xSe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function CSe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Us(t,e))return;r.uniform2uiv(this.addr,e),js(t,e)}}function MSe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Us(t,e))return;r.uniform3uiv(this.addr,e),js(t,e)}}function ASe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Us(t,e))return;r.uniform4uiv(this.addr,e),js(t,e)}}function TSe(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);let s;this.type===r.SAMPLER_2D_SHADOW?(xU.compareFunction=Xk,s=xU):s=AJ,t.setTexture2D(e||s,i)}function ESe(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||EJ,i)}function ISe(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||IJ,i)}function LSe(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||TJ,i)}function NSe(r){switch(r){case 5126:return dSe;case 35664:return hSe;case 35665:return pSe;case 35666:return mSe;case 35674:return gSe;case 35675:return vSe;case 35676:return ySe;case 5124:case 35670:return wSe;case 35667:case 35671:return _Se;case 35668:case 35672:return bSe;case 35669:case 35673:return SSe;case 5125:return xSe;case 36294:return CSe;case 36295:return MSe;case 36296:return ASe;case 35678:case 36198:case 36298:case 36306:case 35682:return TSe;case 35679:case 36299:case 36307:return ESe;case 35680:case 36300:case 36308:case 36293:return ISe;case 36289:case 36303:case 36311:case 36292:return LSe}}function DSe(r,e){r.uniform1fv(this.addr,e)}function kSe(r,e){const t=_v(e,this.size,2);r.uniform2fv(this.addr,t)}function RSe(r,e){const t=_v(e,this.size,3);r.uniform3fv(this.addr,t)}function PSe(r,e){const t=_v(e,this.size,4);r.uniform4fv(this.addr,t)}function OSe(r,e){const t=_v(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function FSe(r,e){const t=_v(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function BSe(r,e){const t=_v(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function USe(r,e){r.uniform1iv(this.addr,e)}function jSe(r,e){r.uniform2iv(this.addr,e)}function zSe(r,e){r.uniform3iv(this.addr,e)}function VSe(r,e){r.uniform4iv(this.addr,e)}function GSe(r,e){r.uniform1uiv(this.addr,e)}function HSe(r,e){r.uniform2uiv(this.addr,e)}function WSe(r,e){r.uniform3uiv(this.addr,e)}function YSe(r,e){r.uniform4uiv(this.addr,e)}function JSe(r,e,t){const n=this.cache,i=e.length,s=wT(t,i);Us(n,s)||(r.uniform1iv(this.addr,s),js(n,s));for(let a=0;a!==i;++a)t.setTexture2D(e[a]||AJ,s[a])}function XSe(r,e,t){const n=this.cache,i=e.length,s=wT(t,i);Us(n,s)||(r.uniform1iv(this.addr,s),js(n,s));for(let a=0;a!==i;++a)t.setTexture3D(e[a]||EJ,s[a])}function QSe(r,e,t){const n=this.cache,i=e.length,s=wT(t,i);Us(n,s)||(r.uniform1iv(this.addr,s),js(n,s));for(let a=0;a!==i;++a)t.setTextureCube(e[a]||IJ,s[a])}function KSe(r,e,t){const n=this.cache,i=e.length,s=wT(t,i);Us(n,s)||(r.uniform1iv(this.addr,s),js(n,s));for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||TJ,s[a])}function qSe(r){switch(r){case 5126:return DSe;case 35664:return kSe;case 35665:return RSe;case 35666:return PSe;case 35674:return OSe;case 35675:return FSe;case 35676:return BSe;case 5124:case 35670:return USe;case 35667:case 35671:return jSe;case 35668:case 35672:return zSe;case 35669:case 35673:return VSe;case 5125:return GSe;case 36294:return HSe;case 36295:return WSe;case 36296:return YSe;case 35678:case 36198:case 36298:case 36306:case 35682:return JSe;case 35679:case 36299:case 36307:return XSe;case 35680:case 36300:case 36308:case 36293:return QSe;case 36289:case 36303:case 36311:case 36292:return KSe}}class ZSe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=NSe(t.type)}}class $Se{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=qSe(t.type)}}class exe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,t[o.id],n)}}}const Q4=/(\w+)(\])?(\[|\.)?/g;function IU(r,e){r.seq.push(e),r.map[e.id]=e}function txe(r,e,t){const n=r.name,i=n.length;for(Q4.lastIndex=0;;){const s=Q4.exec(n),a=Q4.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===i){IU(t,c===void 0?new ZSe(o,r,e):new $Se(o,r,e));break}else{let f=t.map[o];f===void 0&&(f=new exe(o),IU(t,f)),t=f}}}class Ix{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),a=e.getUniformLocation(t,s.name);txe(s,a,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in t&&n.push(a)}return n}}function LU(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const nxe=37297;let rxe=0;function ixe(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=i;a<s;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}const NU=new Xn;function sxe(r){Nr._getMatrix(NU,Nr.workingColorSpace,r);const e=`mat3( ${NU.elements.map(t=>t.toFixed(4))} )`;switch(Nr.getTransfer(r)){case o_:return[e,"LinearTransferOETF"];case Jr:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",r),[e,"LinearTransferOETF"]}}function DU(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+ixe(r.getShaderSource(e),a)}else return i}function axe(r,e){const t=sxe(e);return[`vec4 ${r}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function oxe(r,e){let t;switch(e){case uY:t="Linear";break;case fY:t="Reinhard";break;case dY:t="Cineon";break;case UA:t="ACESFilmic";break;case pY:t="AgX";break;case mY:t="Neutral";break;case hY:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const vS=new ye;function lxe(){Nr.getLuminanceCoefficients(vS);const r=vS.x.toFixed(4),e=vS.y.toFixed(4),t=vS.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function cxe(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter($y).join(`
`)}function uxe(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function fxe(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),a=s.name;let o=1;s.type===r.FLOAT_MAT2&&(o=2),s.type===r.FLOAT_MAT3&&(o=3),s.type===r.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:r.getAttribLocation(e,a),locationSize:o}}return t}function $y(r){return r!==""}function kU(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function RU(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const dxe=/^[ \t]*#include +<([\w\d./]+)>/gm;function E3(r){return r.replace(dxe,pxe)}const hxe=new Map;function pxe(r,e){let t=tr[e];if(t===void 0){const n=hxe.get(e);if(n!==void 0)t=tr[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return E3(t)}const mxe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function PU(r){return r.replace(mxe,gxe)}function gxe(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function OU(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function vxe(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===BA?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===u1?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Ec&&(e="SHADOWMAP_TYPE_VSM"),e}function yxe(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Ru:case Rh:e="ENVMAP_TYPE_CUBE";break;case vv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function wxe(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Rh:e="ENVMAP_MODE_REFRACTION";break}return e}function _xe(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case eb:e="ENVMAP_BLENDING_MULTIPLY";break;case lY:e="ENVMAP_BLENDING_MIX";break;case cY:e="ENVMAP_BLENDING_ADD";break}return e}function bxe(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function Sxe(r,e,t,n){const i=r.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=vxe(t),c=yxe(t),u=wxe(t),f=_xe(t),d=bxe(t),p=cxe(t),g=uxe(s),_=i.createProgram();let w,b,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter($y).join(`
`),w.length>0&&(w+=`
`),b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter($y).join(`
`),b.length>0&&(b+=`
`)):(w=[OU(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter($y).join(`
`),b=[OU(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Tu?"#define TONE_MAPPING":"",t.toneMapping!==Tu?tr.tonemapping_pars_fragment:"",t.toneMapping!==Tu?oxe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",tr.colorspace_pars_fragment,axe("linearToOutputTexel",t.outputColorSpace),lxe(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter($y).join(`
`)),a=E3(a),a=kU(a,t),a=RU(a,t),o=E3(o),o=kU(o,t),o=RU(o,t),a=PU(a),o=PU(o),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,w=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,b=["#define varying in",t.glslVersion===w3?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===w3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const M=C+w+a,A=C+b+o,k=LU(i,i.VERTEX_SHADER,M),O=LU(i,i.FRAGMENT_SHADER,A);i.attachShader(_,k),i.attachShader(_,O),t.index0AttributeName!==void 0?i.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_);function R(B){if(r.debug.checkShaderErrors){const U=i.getProgramInfoLog(_).trim(),V=i.getShaderInfoLog(k).trim(),X=i.getShaderInfoLog(O).trim();let te=!0,ee=!0;if(i.getProgramParameter(_,i.LINK_STATUS)===!1)if(te=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,_,k,O);else{const ue=DU(i,k,"vertex"),ne=DU(i,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,i.VALIDATE_STATUS)+`

Material Name: `+B.name+`
Material Type: `+B.type+`

Program Info Log: `+U+`
`+ue+`
`+ne)}else U!==""?console.warn("THREE.WebGLProgram: Program Info Log:",U):(V===""||X==="")&&(ee=!1);ee&&(B.diagnostics={runnable:te,programLog:U,vertexShader:{log:V,prefix:w},fragmentShader:{log:X,prefix:b}})}i.deleteShader(k),i.deleteShader(O),I=new Ix(i,_),D=fxe(i,_)}let I;this.getUniforms=function(){return I===void 0&&R(this),I};let D;this.getAttributes=function(){return D===void 0&&R(this),D};let E=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return E===!1&&(E=i.getProgramParameter(_,nxe)),E},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=rxe++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=k,this.fragmentShader=O,this}let xxe=0;class Cxe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Mxe(e),t.set(e,n)),n}}class Mxe{constructor(e){this.id=xxe++,this.code=e,this.usedTimes=0}}function Axe(r,e,t,n,i,s,a){const o=new Nm,l=new Cxe,c=new Set,u=[],f=i.logarithmicDepthBuffer,d=i.vertexTextures;let p=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(D){return c.add(D),D===0?"uv":`uv${D}`}function w(D,E,B,U,V){const X=U.fog,te=V.geometry,ee=D.isMeshStandardMaterial?U.environment:null,ue=(D.isMeshStandardMaterial?t:e).get(D.envMap||ee),ne=ue&&ue.mapping===vv?ue.image.height:null,oe=g[D.type];D.precision!==null&&(p=i.getMaxPrecision(D.precision),p!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",p,"instead."));const q=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,J=q!==void 0?q.length:0;let ie=0;te.morphAttributes.position!==void 0&&(ie=1),te.morphAttributes.normal!==void 0&&(ie=2),te.morphAttributes.color!==void 0&&(ie=3);let he,$,ge,pe;if(oe){const qt=Nc[oe];he=qt.vertexShader,$=qt.fragmentShader}else he=D.vertexShader,$=D.fragmentShader,l.update(D),ge=l.getVertexShaderID(D),pe=l.getFragmentShaderID(D);const we=r.getRenderTarget(),ke=r.state.buffers.depth.getReversed(),Pe=V.isInstancedMesh===!0,je=V.isBatchedMesh===!0,Ke=!!D.map,Ie=!!D.matcap,Ge=!!ue,ce=!!D.aoMap,_t=!!D.lightMap,_e=!!D.bumpMap,Ne=!!D.normalMap,Ce=!!D.displacementMap,He=!!D.emissiveMap,Ee=!!D.metalnessMap,Z=!!D.roughnessMap,W=D.anisotropy>0,re=D.clearcoat>0,be=D.dispersion>0,ve=D.iridescence>0,Je=D.sheen>0,$e=D.transmission>0,it=W&&!!D.anisotropyMap,pt=re&&!!D.clearcoatMap,Ft=re&&!!D.clearcoatNormalMap,Le=re&&!!D.clearcoatRoughnessMap,at=ve&&!!D.iridescenceMap,vt=ve&&!!D.iridescenceThicknessMap,qe=Je&&!!D.sheenColorMap,et=Je&&!!D.sheenRoughnessMap,Me=!!D.specularMap,tt=!!D.specularColorMap,Tt=!!D.specularIntensityMap,Ae=$e&&!!D.transmissionMap,Oe=$e&&!!D.thicknessMap,Ye=!!D.gradientMap,yt=!!D.alphaMap,Lt=D.alphaTest>0,xt=!!D.alphaHash,Yt=!!D.extensions;let on=Tu;D.toneMapped&&(we===null||we.isXRRenderTarget===!0)&&(on=r.toneMapping);const Zt={shaderID:oe,shaderType:D.type,shaderName:D.name,vertexShader:he,fragmentShader:$,defines:D.defines,customVertexShaderID:ge,customFragmentShaderID:pe,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:p,batching:je,batchingColor:je&&V._colorsTexture!==null,instancing:Pe,instancingColor:Pe&&V.instanceColor!==null,instancingMorph:Pe&&V.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:we===null?r.outputColorSpace:we.isXRRenderTarget===!0?we.texture.colorSpace:Ou,alphaToCoverage:!!D.alphaToCoverage,map:Ke,matcap:Ie,envMap:Ge,envMapMode:Ge&&ue.mapping,envMapCubeUVHeight:ne,aoMap:ce,lightMap:_t,bumpMap:_e,normalMap:Ne,displacementMap:d&&Ce,emissiveMap:He,normalMapObjectSpace:Ne&&D.normalMapType===SY,normalMapTangentSpace:Ne&&D.normalMapType===Kh,metalnessMap:Ee,roughnessMap:Z,anisotropy:W,anisotropyMap:it,clearcoat:re,clearcoatMap:pt,clearcoatNormalMap:Ft,clearcoatRoughnessMap:Le,dispersion:be,iridescence:ve,iridescenceMap:at,iridescenceThicknessMap:vt,sheen:Je,sheenColorMap:qe,sheenRoughnessMap:et,specularMap:Me,specularColorMap:tt,specularIntensityMap:Tt,transmission:$e,transmissionMap:Ae,thicknessMap:Oe,gradientMap:Ye,opaque:D.transparent===!1&&D.blending===Em&&D.alphaToCoverage===!1,alphaMap:yt,alphaTest:Lt,alphaHash:xt,combine:D.combine,mapUv:Ke&&_(D.map.channel),aoMapUv:ce&&_(D.aoMap.channel),lightMapUv:_t&&_(D.lightMap.channel),bumpMapUv:_e&&_(D.bumpMap.channel),normalMapUv:Ne&&_(D.normalMap.channel),displacementMapUv:Ce&&_(D.displacementMap.channel),emissiveMapUv:He&&_(D.emissiveMap.channel),metalnessMapUv:Ee&&_(D.metalnessMap.channel),roughnessMapUv:Z&&_(D.roughnessMap.channel),anisotropyMapUv:it&&_(D.anisotropyMap.channel),clearcoatMapUv:pt&&_(D.clearcoatMap.channel),clearcoatNormalMapUv:Ft&&_(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Le&&_(D.clearcoatRoughnessMap.channel),iridescenceMapUv:at&&_(D.iridescenceMap.channel),iridescenceThicknessMapUv:vt&&_(D.iridescenceThicknessMap.channel),sheenColorMapUv:qe&&_(D.sheenColorMap.channel),sheenRoughnessMapUv:et&&_(D.sheenRoughnessMap.channel),specularMapUv:Me&&_(D.specularMap.channel),specularColorMapUv:tt&&_(D.specularColorMap.channel),specularIntensityMapUv:Tt&&_(D.specularIntensityMap.channel),transmissionMapUv:Ae&&_(D.transmissionMap.channel),thicknessMapUv:Oe&&_(D.thicknessMap.channel),alphaMapUv:yt&&_(D.alphaMap.channel),vertexTangents:!!te.attributes.tangent&&(Ne||W),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!te.attributes.color&&te.attributes.color.itemSize===4,pointsUvs:V.isPoints===!0&&!!te.attributes.uv&&(Ke||yt),fog:!!X,useFog:D.fog===!0,fogExp2:!!X&&X.isFogExp2,flatShading:D.flatShading===!0,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:ke,skinning:V.isSkinnedMesh===!0,morphTargets:te.morphAttributes.position!==void 0,morphNormals:te.morphAttributes.normal!==void 0,morphColors:te.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:ie,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:D.dithering,shadowMapEnabled:r.shadowMap.enabled&&B.length>0,shadowMapType:r.shadowMap.type,toneMapping:on,decodeVideoTexture:Ke&&D.map.isVideoTexture===!0&&Nr.getTransfer(D.map.colorSpace)===Jr,decodeVideoTextureEmissive:He&&D.emissiveMap.isVideoTexture===!0&&Nr.getTransfer(D.emissiveMap.colorSpace)===Jr,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===ll,flipSided:D.side===vo,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionClipCullDistance:Yt&&D.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Yt&&D.extensions.multiDraw===!0||je)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()};return Zt.vertexUv1s=c.has(1),Zt.vertexUv2s=c.has(2),Zt.vertexUv3s=c.has(3),c.clear(),Zt}function b(D){const E=[];if(D.shaderID?E.push(D.shaderID):(E.push(D.customVertexShaderID),E.push(D.customFragmentShaderID)),D.defines!==void 0)for(const B in D.defines)E.push(B),E.push(D.defines[B]);return D.isRawShaderMaterial===!1&&(C(E,D),M(E,D),E.push(r.outputColorSpace)),E.push(D.customProgramCacheKey),E.join()}function C(D,E){D.push(E.precision),D.push(E.outputColorSpace),D.push(E.envMapMode),D.push(E.envMapCubeUVHeight),D.push(E.mapUv),D.push(E.alphaMapUv),D.push(E.lightMapUv),D.push(E.aoMapUv),D.push(E.bumpMapUv),D.push(E.normalMapUv),D.push(E.displacementMapUv),D.push(E.emissiveMapUv),D.push(E.metalnessMapUv),D.push(E.roughnessMapUv),D.push(E.anisotropyMapUv),D.push(E.clearcoatMapUv),D.push(E.clearcoatNormalMapUv),D.push(E.clearcoatRoughnessMapUv),D.push(E.iridescenceMapUv),D.push(E.iridescenceThicknessMapUv),D.push(E.sheenColorMapUv),D.push(E.sheenRoughnessMapUv),D.push(E.specularMapUv),D.push(E.specularColorMapUv),D.push(E.specularIntensityMapUv),D.push(E.transmissionMapUv),D.push(E.thicknessMapUv),D.push(E.combine),D.push(E.fogExp2),D.push(E.sizeAttenuation),D.push(E.morphTargetsCount),D.push(E.morphAttributeCount),D.push(E.numDirLights),D.push(E.numPointLights),D.push(E.numSpotLights),D.push(E.numSpotLightMaps),D.push(E.numHemiLights),D.push(E.numRectAreaLights),D.push(E.numDirLightShadows),D.push(E.numPointLightShadows),D.push(E.numSpotLightShadows),D.push(E.numSpotLightShadowsWithMaps),D.push(E.numLightProbes),D.push(E.shadowMapType),D.push(E.toneMapping),D.push(E.numClippingPlanes),D.push(E.numClipIntersection),D.push(E.depthPacking)}function M(D,E){o.disableAll(),E.supportsVertexTextures&&o.enable(0),E.instancing&&o.enable(1),E.instancingColor&&o.enable(2),E.instancingMorph&&o.enable(3),E.matcap&&o.enable(4),E.envMap&&o.enable(5),E.normalMapObjectSpace&&o.enable(6),E.normalMapTangentSpace&&o.enable(7),E.clearcoat&&o.enable(8),E.iridescence&&o.enable(9),E.alphaTest&&o.enable(10),E.vertexColors&&o.enable(11),E.vertexAlphas&&o.enable(12),E.vertexUv1s&&o.enable(13),E.vertexUv2s&&o.enable(14),E.vertexUv3s&&o.enable(15),E.vertexTangents&&o.enable(16),E.anisotropy&&o.enable(17),E.alphaHash&&o.enable(18),E.batching&&o.enable(19),E.dispersion&&o.enable(20),E.batchingColor&&o.enable(21),D.push(o.mask),o.disableAll(),E.fog&&o.enable(0),E.useFog&&o.enable(1),E.flatShading&&o.enable(2),E.logarithmicDepthBuffer&&o.enable(3),E.reverseDepthBuffer&&o.enable(4),E.skinning&&o.enable(5),E.morphTargets&&o.enable(6),E.morphNormals&&o.enable(7),E.morphColors&&o.enable(8),E.premultipliedAlpha&&o.enable(9),E.shadowMapEnabled&&o.enable(10),E.doubleSided&&o.enable(11),E.flipSided&&o.enable(12),E.useDepthPacking&&o.enable(13),E.dithering&&o.enable(14),E.transmission&&o.enable(15),E.sheen&&o.enable(16),E.opaque&&o.enable(17),E.pointsUvs&&o.enable(18),E.decodeVideoTexture&&o.enable(19),E.decodeVideoTextureEmissive&&o.enable(20),E.alphaToCoverage&&o.enable(21),D.push(o.mask)}function A(D){const E=g[D.type];let B;if(E){const U=Nc[E];B=Zk.clone(U.uniforms)}else B=D.uniforms;return B}function k(D,E){let B;for(let U=0,V=u.length;U<V;U++){const X=u[U];if(X.cacheKey===E){B=X,++B.usedTimes;break}}return B===void 0&&(B=new Sxe(r,E,D,s),u.push(B)),B}function O(D){if(--D.usedTimes===0){const E=u.indexOf(D);u[E]=u[u.length-1],u.pop(),D.destroy()}}function R(D){l.remove(D)}function I(){l.dispose()}return{getParameters:w,getProgramCacheKey:b,getUniforms:A,acquireProgram:k,releaseProgram:O,releaseShaderCache:R,programs:u,dispose:I}}function Txe(){let r=new WeakMap;function e(a){return r.has(a)}function t(a){let o=r.get(a);return o===void 0&&(o={},r.set(a,o)),o}function n(a){r.delete(a)}function i(a,o,l){r.get(a)[o]=l}function s(){r=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:s}}function Exe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function FU(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function BU(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function a(f,d,p,g,_,w){let b=r[e];return b===void 0?(b={id:f.id,object:f,geometry:d,material:p,groupOrder:g,renderOrder:f.renderOrder,z:_,group:w},r[e]=b):(b.id=f.id,b.object=f,b.geometry=d,b.material=p,b.groupOrder=g,b.renderOrder=f.renderOrder,b.z=_,b.group=w),e++,b}function o(f,d,p,g,_,w){const b=a(f,d,p,g,_,w);p.transmission>0?n.push(b):p.transparent===!0?i.push(b):t.push(b)}function l(f,d,p,g,_,w){const b=a(f,d,p,g,_,w);p.transmission>0?n.unshift(b):p.transparent===!0?i.unshift(b):t.unshift(b)}function c(f,d){t.length>1&&t.sort(f||Exe),n.length>1&&n.sort(d||FU),i.length>1&&i.sort(d||FU)}function u(){for(let f=e,d=r.length;f<d;f++){const p=r[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:o,unshift:l,finish:u,sort:c}}function Ixe(){let r=new WeakMap;function e(n,i){const s=r.get(n);let a;return s===void 0?(a=new BU,r.set(n,[a])):i>=s.length?(a=new BU,s.push(a)):a=s[i],a}function t(){r=new WeakMap}return{get:e,dispose:t}}function Lxe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ye,color:new Kt};break;case"SpotLight":t={position:new ye,direction:new ye,color:new Kt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ye,color:new Kt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ye,skyColor:new Kt,groundColor:new Kt};break;case"RectAreaLight":t={color:new Kt,position:new ye,halfWidth:new ye,halfHeight:new ye};break}return r[e.id]=t,t}}}function Nxe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mt,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let Dxe=0;function kxe(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function Rxe(r){const e=new Lxe,t=Nxe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new ye);const i=new ye,s=new Nn,a=new Nn;function o(c){let u=0,f=0,d=0;for(let D=0;D<9;D++)n.probe[D].set(0,0,0);let p=0,g=0,_=0,w=0,b=0,C=0,M=0,A=0,k=0,O=0,R=0;c.sort(kxe);for(let D=0,E=c.length;D<E;D++){const B=c[D],U=B.color,V=B.intensity,X=B.distance,te=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)u+=U.r*V,f+=U.g*V,d+=U.b*V;else if(B.isLightProbe){for(let ee=0;ee<9;ee++)n.probe[ee].addScaledVector(B.sh.coefficients[ee],V);R++}else if(B.isDirectionalLight){const ee=e.get(B);if(ee.color.copy(B.color).multiplyScalar(B.intensity),B.castShadow){const ue=B.shadow,ne=t.get(B);ne.shadowIntensity=ue.intensity,ne.shadowBias=ue.bias,ne.shadowNormalBias=ue.normalBias,ne.shadowRadius=ue.radius,ne.shadowMapSize=ue.mapSize,n.directionalShadow[p]=ne,n.directionalShadowMap[p]=te,n.directionalShadowMatrix[p]=B.shadow.matrix,C++}n.directional[p]=ee,p++}else if(B.isSpotLight){const ee=e.get(B);ee.position.setFromMatrixPosition(B.matrixWorld),ee.color.copy(U).multiplyScalar(V),ee.distance=X,ee.coneCos=Math.cos(B.angle),ee.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),ee.decay=B.decay,n.spot[_]=ee;const ue=B.shadow;if(B.map&&(n.spotLightMap[k]=B.map,k++,ue.updateMatrices(B),B.castShadow&&O++),n.spotLightMatrix[_]=ue.matrix,B.castShadow){const ne=t.get(B);ne.shadowIntensity=ue.intensity,ne.shadowBias=ue.bias,ne.shadowNormalBias=ue.normalBias,ne.shadowRadius=ue.radius,ne.shadowMapSize=ue.mapSize,n.spotShadow[_]=ne,n.spotShadowMap[_]=te,A++}_++}else if(B.isRectAreaLight){const ee=e.get(B);ee.color.copy(U).multiplyScalar(V),ee.halfWidth.set(B.width*.5,0,0),ee.halfHeight.set(0,B.height*.5,0),n.rectArea[w]=ee,w++}else if(B.isPointLight){const ee=e.get(B);if(ee.color.copy(B.color).multiplyScalar(B.intensity),ee.distance=B.distance,ee.decay=B.decay,B.castShadow){const ue=B.shadow,ne=t.get(B);ne.shadowIntensity=ue.intensity,ne.shadowBias=ue.bias,ne.shadowNormalBias=ue.normalBias,ne.shadowRadius=ue.radius,ne.shadowMapSize=ue.mapSize,ne.shadowCameraNear=ue.camera.near,ne.shadowCameraFar=ue.camera.far,n.pointShadow[g]=ne,n.pointShadowMap[g]=te,n.pointShadowMatrix[g]=B.shadow.matrix,M++}n.point[g]=ee,g++}else if(B.isHemisphereLight){const ee=e.get(B);ee.skyColor.copy(B.color).multiplyScalar(V),ee.groundColor.copy(B.groundColor).multiplyScalar(V),n.hemi[b]=ee,b++}}w>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=en.LTC_FLOAT_1,n.rectAreaLTC2=en.LTC_FLOAT_2):(n.rectAreaLTC1=en.LTC_HALF_1,n.rectAreaLTC2=en.LTC_HALF_2)),n.ambient[0]=u,n.ambient[1]=f,n.ambient[2]=d;const I=n.hash;(I.directionalLength!==p||I.pointLength!==g||I.spotLength!==_||I.rectAreaLength!==w||I.hemiLength!==b||I.numDirectionalShadows!==C||I.numPointShadows!==M||I.numSpotShadows!==A||I.numSpotMaps!==k||I.numLightProbes!==R)&&(n.directional.length=p,n.spot.length=_,n.rectArea.length=w,n.point.length=g,n.hemi.length=b,n.directionalShadow.length=C,n.directionalShadowMap.length=C,n.pointShadow.length=M,n.pointShadowMap.length=M,n.spotShadow.length=A,n.spotShadowMap.length=A,n.directionalShadowMatrix.length=C,n.pointShadowMatrix.length=M,n.spotLightMatrix.length=A+k-O,n.spotLightMap.length=k,n.numSpotLightShadowsWithMaps=O,n.numLightProbes=R,I.directionalLength=p,I.pointLength=g,I.spotLength=_,I.rectAreaLength=w,I.hemiLength=b,I.numDirectionalShadows=C,I.numPointShadows=M,I.numSpotShadows=A,I.numSpotMaps=k,I.numLightProbes=R,n.version=Dxe++)}function l(c,u){let f=0,d=0,p=0,g=0,_=0;const w=u.matrixWorldInverse;for(let b=0,C=c.length;b<C;b++){const M=c[b];if(M.isDirectionalLight){const A=n.directional[f];A.direction.setFromMatrixPosition(M.matrixWorld),i.setFromMatrixPosition(M.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(w),f++}else if(M.isSpotLight){const A=n.spot[p];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(w),A.direction.setFromMatrixPosition(M.matrixWorld),i.setFromMatrixPosition(M.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(w),p++}else if(M.isRectAreaLight){const A=n.rectArea[g];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(w),a.identity(),s.copy(M.matrixWorld),s.premultiply(w),a.extractRotation(s),A.halfWidth.set(M.width*.5,0,0),A.halfHeight.set(0,M.height*.5,0),A.halfWidth.applyMatrix4(a),A.halfHeight.applyMatrix4(a),g++}else if(M.isPointLight){const A=n.point[d];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(w),d++}else if(M.isHemisphereLight){const A=n.hemi[_];A.direction.setFromMatrixPosition(M.matrixWorld),A.direction.transformDirection(w),_++}}}return{setup:o,setupView:l,state:n}}function UU(r){const e=new Rxe(r),t=[],n=[];function i(u){c.camera=u,t.length=0,n.length=0}function s(u){t.push(u)}function a(u){n.push(u)}function o(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function Pxe(r){let e=new WeakMap;function t(i,s=0){const a=e.get(i);let o;return a===void 0?(o=new UU(r),e.set(i,[o])):s>=a.length?(o=new UU(r),a.push(o)):o=a[s],o}function n(){e=new WeakMap}return{get:t,dispose:n}}const Oxe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Fxe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Bxe(r,e,t){let n=new ub;const i=new Mt,s=new Mt,a=new Cr,o=new mT({depthPacking:Jk}),l=new gT,c={},u=t.maxTextureSize,f={[ku]:vo,[vo]:ku,[ll]:ll},d=new zo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Mt},radius:{value:4}},vertexShader:Oxe,fragmentShader:Fxe}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const g=new $n;g.setAttribute("position",new Pr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new si(g,d),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=BA;let b=this.type;this.render=function(O,R,I){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||O.length===0)return;const D=r.getRenderTarget(),E=r.getActiveCubeFace(),B=r.getActiveMipmapLevel(),U=r.state;U.setBlending(Au),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);const V=b!==Ec&&this.type===Ec,X=b===Ec&&this.type!==Ec;for(let te=0,ee=O.length;te<ee;te++){const ue=O[te],ne=ue.shadow;if(ne===void 0){console.warn("THREE.WebGLShadowMap:",ue,"has no shadow.");continue}if(ne.autoUpdate===!1&&ne.needsUpdate===!1)continue;i.copy(ne.mapSize);const oe=ne.getFrameExtents();if(i.multiply(oe),s.copy(ne.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/oe.x),i.x=s.x*oe.x,ne.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/oe.y),i.y=s.y*oe.y,ne.mapSize.y=s.y)),ne.map===null||V===!0||X===!0){const J=this.type!==Ec?{minFilter:$s,magFilter:$s}:{};ne.map!==null&&ne.map.dispose(),ne.map=new pl(i.x,i.y,J),ne.map.texture.name=ue.name+".shadowMap",ne.camera.updateProjectionMatrix()}r.setRenderTarget(ne.map),r.clear();const q=ne.getViewportCount();for(let J=0;J<q;J++){const ie=ne.getViewport(J);a.set(s.x*ie.x,s.y*ie.y,s.x*ie.z,s.y*ie.w),U.viewport(a),ne.updateMatrices(ue,J),n=ne.getFrustum(),A(R,I,ne.camera,ue,this.type)}ne.isPointLightShadow!==!0&&this.type===Ec&&C(ne,I),ne.needsUpdate=!1}b=this.type,w.needsUpdate=!1,r.setRenderTarget(D,E,B)};function C(O,R){const I=e.update(_);d.defines.VSM_SAMPLES!==O.blurSamples&&(d.defines.VSM_SAMPLES=O.blurSamples,p.defines.VSM_SAMPLES=O.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new pl(i.x,i.y)),d.uniforms.shadow_pass.value=O.map.texture,d.uniforms.resolution.value=O.mapSize,d.uniforms.radius.value=O.radius,r.setRenderTarget(O.mapPass),r.clear(),r.renderBufferDirect(R,null,I,d,_,null),p.uniforms.shadow_pass.value=O.mapPass.texture,p.uniforms.resolution.value=O.mapSize,p.uniforms.radius.value=O.radius,r.setRenderTarget(O.map),r.clear(),r.renderBufferDirect(R,null,I,p,_,null)}function M(O,R,I,D){let E=null;const B=I.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(B!==void 0)E=B;else if(E=I.isPointLight===!0?l:o,r.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const U=E.uuid,V=R.uuid;let X=c[U];X===void 0&&(X={},c[U]=X);let te=X[V];te===void 0&&(te=E.clone(),X[V]=te,R.addEventListener("dispose",k)),E=te}if(E.visible=R.visible,E.wireframe=R.wireframe,D===Ec?E.side=R.shadowSide!==null?R.shadowSide:R.side:E.side=R.shadowSide!==null?R.shadowSide:f[R.side],E.alphaMap=R.alphaMap,E.alphaTest=R.alphaTest,E.map=R.map,E.clipShadows=R.clipShadows,E.clippingPlanes=R.clippingPlanes,E.clipIntersection=R.clipIntersection,E.displacementMap=R.displacementMap,E.displacementScale=R.displacementScale,E.displacementBias=R.displacementBias,E.wireframeLinewidth=R.wireframeLinewidth,E.linewidth=R.linewidth,I.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const U=r.properties.get(E);U.light=I}return E}function A(O,R,I,D,E){if(O.visible===!1)return;if(O.layers.test(R.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&E===Ec)&&(!O.frustumCulled||n.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,O.matrixWorld);const V=e.update(O),X=O.material;if(Array.isArray(X)){const te=V.groups;for(let ee=0,ue=te.length;ee<ue;ee++){const ne=te[ee],oe=X[ne.materialIndex];if(oe&&oe.visible){const q=M(O,oe,D,E);O.onBeforeShadow(r,O,R,I,V,q,ne),r.renderBufferDirect(I,null,V,q,O,ne),O.onAfterShadow(r,O,R,I,V,q,ne)}}}else if(X.visible){const te=M(O,X,D,E);O.onBeforeShadow(r,O,R,I,V,te,null),r.renderBufferDirect(I,null,V,te,O,null),O.onAfterShadow(r,O,R,I,V,te,null)}}const U=O.children;for(let V=0,X=U.length;V<X;V++)A(U[V],R,I,D,E)}function k(O){O.target.removeEventListener("dispose",k);for(const I in c){const D=c[I],E=O.target.uuid;E in D&&(D[E].dispose(),delete D[E])}}}const Uxe={[IC]:LC,[NC]:RC,[DC]:PC,[Ym]:kC,[LC]:IC,[RC]:NC,[PC]:DC,[kC]:Ym};function jxe(r,e){function t(){let Ae=!1;const Oe=new Cr;let Ye=null;const yt=new Cr(0,0,0,0);return{setMask:function(Lt){Ye!==Lt&&!Ae&&(r.colorMask(Lt,Lt,Lt,Lt),Ye=Lt)},setLocked:function(Lt){Ae=Lt},setClear:function(Lt,xt,Yt,on,Zt){Zt===!0&&(Lt*=on,xt*=on,Yt*=on),Oe.set(Lt,xt,Yt,on),yt.equals(Oe)===!1&&(r.clearColor(Lt,xt,Yt,on),yt.copy(Oe))},reset:function(){Ae=!1,Ye=null,yt.set(-1,0,0,0)}}}function n(){let Ae=!1,Oe=!1,Ye=null,yt=null,Lt=null;return{setReversed:function(xt){if(Oe!==xt){const Yt=e.get("EXT_clip_control");Oe?Yt.clipControlEXT(Yt.LOWER_LEFT_EXT,Yt.ZERO_TO_ONE_EXT):Yt.clipControlEXT(Yt.LOWER_LEFT_EXT,Yt.NEGATIVE_ONE_TO_ONE_EXT);const on=Lt;Lt=null,this.setClear(on)}Oe=xt},getReversed:function(){return Oe},setTest:function(xt){xt?we(r.DEPTH_TEST):ke(r.DEPTH_TEST)},setMask:function(xt){Ye!==xt&&!Ae&&(r.depthMask(xt),Ye=xt)},setFunc:function(xt){if(Oe&&(xt=Uxe[xt]),yt!==xt){switch(xt){case IC:r.depthFunc(r.NEVER);break;case LC:r.depthFunc(r.ALWAYS);break;case NC:r.depthFunc(r.LESS);break;case Ym:r.depthFunc(r.LEQUAL);break;case DC:r.depthFunc(r.EQUAL);break;case kC:r.depthFunc(r.GEQUAL);break;case RC:r.depthFunc(r.GREATER);break;case PC:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}yt=xt}},setLocked:function(xt){Ae=xt},setClear:function(xt){Lt!==xt&&(Oe&&(xt=1-xt),r.clearDepth(xt),Lt=xt)},reset:function(){Ae=!1,Ye=null,yt=null,Lt=null,Oe=!1}}}function i(){let Ae=!1,Oe=null,Ye=null,yt=null,Lt=null,xt=null,Yt=null,on=null,Zt=null;return{setTest:function(qt){Ae||(qt?we(r.STENCIL_TEST):ke(r.STENCIL_TEST))},setMask:function(qt){Oe!==qt&&!Ae&&(r.stencilMask(qt),Oe=qt)},setFunc:function(qt,Xe,ot){(Ye!==qt||yt!==Xe||Lt!==ot)&&(r.stencilFunc(qt,Xe,ot),Ye=qt,yt=Xe,Lt=ot)},setOp:function(qt,Xe,ot){(xt!==qt||Yt!==Xe||on!==ot)&&(r.stencilOp(qt,Xe,ot),xt=qt,Yt=Xe,on=ot)},setLocked:function(qt){Ae=qt},setClear:function(qt){Zt!==qt&&(r.clearStencil(qt),Zt=qt)},reset:function(){Ae=!1,Oe=null,Ye=null,yt=null,Lt=null,xt=null,Yt=null,on=null,Zt=null}}}const s=new t,a=new n,o=new i,l=new WeakMap,c=new WeakMap;let u={},f={},d=new WeakMap,p=[],g=null,_=!1,w=null,b=null,C=null,M=null,A=null,k=null,O=null,R=new Kt(0,0,0),I=0,D=!1,E=null,B=null,U=null,V=null,X=null;const te=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ee=!1,ue=0;const ne=r.getParameter(r.VERSION);ne.indexOf("WebGL")!==-1?(ue=parseFloat(/^WebGL (\d)/.exec(ne)[1]),ee=ue>=1):ne.indexOf("OpenGL ES")!==-1&&(ue=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),ee=ue>=2);let oe=null,q={};const J=r.getParameter(r.SCISSOR_BOX),ie=r.getParameter(r.VIEWPORT),he=new Cr().fromArray(J),$=new Cr().fromArray(ie);function ge(Ae,Oe,Ye,yt){const Lt=new Uint8Array(4),xt=r.createTexture();r.bindTexture(Ae,xt),r.texParameteri(Ae,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(Ae,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let Yt=0;Yt<Ye;Yt++)Ae===r.TEXTURE_3D||Ae===r.TEXTURE_2D_ARRAY?r.texImage3D(Oe,0,r.RGBA,1,1,yt,0,r.RGBA,r.UNSIGNED_BYTE,Lt):r.texImage2D(Oe+Yt,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,Lt);return xt}const pe={};pe[r.TEXTURE_2D]=ge(r.TEXTURE_2D,r.TEXTURE_2D,1),pe[r.TEXTURE_CUBE_MAP]=ge(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),pe[r.TEXTURE_2D_ARRAY]=ge(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),pe[r.TEXTURE_3D]=ge(r.TEXTURE_3D,r.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),we(r.DEPTH_TEST),a.setFunc(Ym),_e(!1),Ne(h3),we(r.CULL_FACE),ce(Au);function we(Ae){u[Ae]!==!0&&(r.enable(Ae),u[Ae]=!0)}function ke(Ae){u[Ae]!==!1&&(r.disable(Ae),u[Ae]=!1)}function Pe(Ae,Oe){return f[Ae]!==Oe?(r.bindFramebuffer(Ae,Oe),f[Ae]=Oe,Ae===r.DRAW_FRAMEBUFFER&&(f[r.FRAMEBUFFER]=Oe),Ae===r.FRAMEBUFFER&&(f[r.DRAW_FRAMEBUFFER]=Oe),!0):!1}function je(Ae,Oe){let Ye=p,yt=!1;if(Ae){Ye=d.get(Oe),Ye===void 0&&(Ye=[],d.set(Oe,Ye));const Lt=Ae.textures;if(Ye.length!==Lt.length||Ye[0]!==r.COLOR_ATTACHMENT0){for(let xt=0,Yt=Lt.length;xt<Yt;xt++)Ye[xt]=r.COLOR_ATTACHMENT0+xt;Ye.length=Lt.length,yt=!0}}else Ye[0]!==r.BACK&&(Ye[0]=r.BACK,yt=!0);yt&&r.drawBuffers(Ye)}function Ke(Ae){return g!==Ae?(r.useProgram(Ae),g=Ae,!0):!1}const Ie={[ch]:r.FUNC_ADD,[WW]:r.FUNC_SUBTRACT,[YW]:r.FUNC_REVERSE_SUBTRACT};Ie[JW]=r.MIN,Ie[XW]=r.MAX;const Ge={[QW]:r.ZERO,[KW]:r.ONE,[qW]:r.SRC_COLOR,[TC]:r.SRC_ALPHA,[rY]:r.SRC_ALPHA_SATURATE,[tY]:r.DST_COLOR,[$W]:r.DST_ALPHA,[ZW]:r.ONE_MINUS_SRC_COLOR,[EC]:r.ONE_MINUS_SRC_ALPHA,[nY]:r.ONE_MINUS_DST_COLOR,[eY]:r.ONE_MINUS_DST_ALPHA,[iY]:r.CONSTANT_COLOR,[sY]:r.ONE_MINUS_CONSTANT_COLOR,[aY]:r.CONSTANT_ALPHA,[oY]:r.ONE_MINUS_CONSTANT_ALPHA};function ce(Ae,Oe,Ye,yt,Lt,xt,Yt,on,Zt,qt){if(Ae===Au){_===!0&&(ke(r.BLEND),_=!1);return}if(_===!1&&(we(r.BLEND),_=!0),Ae!==HW){if(Ae!==w||qt!==D){if((b!==ch||A!==ch)&&(r.blendEquation(r.FUNC_ADD),b=ch,A=ch),qt)switch(Ae){case Em:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case p3:r.blendFunc(r.ONE,r.ONE);break;case m3:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case g3:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}else switch(Ae){case Em:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case p3:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case m3:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case g3:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}C=null,M=null,k=null,O=null,R.set(0,0,0),I=0,w=Ae,D=qt}return}Lt=Lt||Oe,xt=xt||Ye,Yt=Yt||yt,(Oe!==b||Lt!==A)&&(r.blendEquationSeparate(Ie[Oe],Ie[Lt]),b=Oe,A=Lt),(Ye!==C||yt!==M||xt!==k||Yt!==O)&&(r.blendFuncSeparate(Ge[Ye],Ge[yt],Ge[xt],Ge[Yt]),C=Ye,M=yt,k=xt,O=Yt),(on.equals(R)===!1||Zt!==I)&&(r.blendColor(on.r,on.g,on.b,Zt),R.copy(on),I=Zt),w=Ae,D=!1}function _t(Ae,Oe){Ae.side===ll?ke(r.CULL_FACE):we(r.CULL_FACE);let Ye=Ae.side===vo;Oe&&(Ye=!Ye),_e(Ye),Ae.blending===Em&&Ae.transparent===!1?ce(Au):ce(Ae.blending,Ae.blendEquation,Ae.blendSrc,Ae.blendDst,Ae.blendEquationAlpha,Ae.blendSrcAlpha,Ae.blendDstAlpha,Ae.blendColor,Ae.blendAlpha,Ae.premultipliedAlpha),a.setFunc(Ae.depthFunc),a.setTest(Ae.depthTest),a.setMask(Ae.depthWrite),s.setMask(Ae.colorWrite);const yt=Ae.stencilWrite;o.setTest(yt),yt&&(o.setMask(Ae.stencilWriteMask),o.setFunc(Ae.stencilFunc,Ae.stencilRef,Ae.stencilFuncMask),o.setOp(Ae.stencilFail,Ae.stencilZFail,Ae.stencilZPass)),He(Ae.polygonOffset,Ae.polygonOffsetFactor,Ae.polygonOffsetUnits),Ae.alphaToCoverage===!0?we(r.SAMPLE_ALPHA_TO_COVERAGE):ke(r.SAMPLE_ALPHA_TO_COVERAGE)}function _e(Ae){E!==Ae&&(Ae?r.frontFace(r.CW):r.frontFace(r.CCW),E=Ae)}function Ne(Ae){Ae!==zW?(we(r.CULL_FACE),Ae!==B&&(Ae===h3?r.cullFace(r.BACK):Ae===VW?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):ke(r.CULL_FACE),B=Ae}function Ce(Ae){Ae!==U&&(ee&&r.lineWidth(Ae),U=Ae)}function He(Ae,Oe,Ye){Ae?(we(r.POLYGON_OFFSET_FILL),(V!==Oe||X!==Ye)&&(r.polygonOffset(Oe,Ye),V=Oe,X=Ye)):ke(r.POLYGON_OFFSET_FILL)}function Ee(Ae){Ae?we(r.SCISSOR_TEST):ke(r.SCISSOR_TEST)}function Z(Ae){Ae===void 0&&(Ae=r.TEXTURE0+te-1),oe!==Ae&&(r.activeTexture(Ae),oe=Ae)}function W(Ae,Oe,Ye){Ye===void 0&&(oe===null?Ye=r.TEXTURE0+te-1:Ye=oe);let yt=q[Ye];yt===void 0&&(yt={type:void 0,texture:void 0},q[Ye]=yt),(yt.type!==Ae||yt.texture!==Oe)&&(oe!==Ye&&(r.activeTexture(Ye),oe=Ye),r.bindTexture(Ae,Oe||pe[Ae]),yt.type=Ae,yt.texture=Oe)}function re(){const Ae=q[oe];Ae!==void 0&&Ae.type!==void 0&&(r.bindTexture(Ae.type,null),Ae.type=void 0,Ae.texture=void 0)}function be(){try{r.compressedTexImage2D.apply(r,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function ve(){try{r.compressedTexImage3D.apply(r,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Je(){try{r.texSubImage2D.apply(r,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function $e(){try{r.texSubImage3D.apply(r,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function it(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function pt(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ft(){try{r.texStorage2D.apply(r,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Le(){try{r.texStorage3D.apply(r,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function at(){try{r.texImage2D.apply(r,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function vt(){try{r.texImage3D.apply(r,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function qe(Ae){he.equals(Ae)===!1&&(r.scissor(Ae.x,Ae.y,Ae.z,Ae.w),he.copy(Ae))}function et(Ae){$.equals(Ae)===!1&&(r.viewport(Ae.x,Ae.y,Ae.z,Ae.w),$.copy(Ae))}function Me(Ae,Oe){let Ye=c.get(Oe);Ye===void 0&&(Ye=new WeakMap,c.set(Oe,Ye));let yt=Ye.get(Ae);yt===void 0&&(yt=r.getUniformBlockIndex(Oe,Ae.name),Ye.set(Ae,yt))}function tt(Ae,Oe){const yt=c.get(Oe).get(Ae);l.get(Oe)!==yt&&(r.uniformBlockBinding(Oe,yt,Ae.__bindingPointIndex),l.set(Oe,yt))}function Tt(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),a.setReversed(!1),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),u={},oe=null,q={},f={},d=new WeakMap,p=[],g=null,_=!1,w=null,b=null,C=null,M=null,A=null,k=null,O=null,R=new Kt(0,0,0),I=0,D=!1,E=null,B=null,U=null,V=null,X=null,he.set(0,0,r.canvas.width,r.canvas.height),$.set(0,0,r.canvas.width,r.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:we,disable:ke,bindFramebuffer:Pe,drawBuffers:je,useProgram:Ke,setBlending:ce,setMaterial:_t,setFlipSided:_e,setCullFace:Ne,setLineWidth:Ce,setPolygonOffset:He,setScissorTest:Ee,activeTexture:Z,bindTexture:W,unbindTexture:re,compressedTexImage2D:be,compressedTexImage3D:ve,texImage2D:at,texImage3D:vt,updateUBOMapping:Me,uniformBlockBinding:tt,texStorage2D:Ft,texStorage3D:Le,texSubImage2D:Je,texSubImage3D:$e,compressedTexSubImage2D:it,compressedTexSubImage3D:pt,scissor:qe,viewport:et,reset:Tt}}function zxe(r,e,t,n,i,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Mt,u=new WeakMap;let f;const d=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(Z,W){return p?new OffscreenCanvas(Z,W):u_("canvas")}function _(Z,W,re){let be=1;const ve=Ee(Z);if((ve.width>re||ve.height>re)&&(be=re/Math.max(ve.width,ve.height)),be<1)if(typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Z instanceof ImageBitmap||typeof VideoFrame<"u"&&Z instanceof VideoFrame){const Je=Math.floor(be*ve.width),$e=Math.floor(be*ve.height);f===void 0&&(f=g(Je,$e));const it=W?g(Je,$e):f;return it.width=Je,it.height=$e,it.getContext("2d").drawImage(Z,0,0,Je,$e),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ve.width+"x"+ve.height+") to ("+Je+"x"+$e+")."),it}else return"data"in Z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ve.width+"x"+ve.height+")."),Z;return Z}function w(Z){return Z.generateMipmaps}function b(Z){r.generateMipmap(Z)}function C(Z){return Z.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:Z.isWebGL3DRenderTarget?r.TEXTURE_3D:Z.isWebGLArrayRenderTarget||Z.isCompressedArrayTexture?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D}function M(Z,W,re,be,ve=!1){if(Z!==null){if(r[Z]!==void 0)return r[Z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Z+"'")}let Je=W;if(W===r.RED&&(re===r.FLOAT&&(Je=r.R32F),re===r.HALF_FLOAT&&(Je=r.R16F),re===r.UNSIGNED_BYTE&&(Je=r.R8)),W===r.RED_INTEGER&&(re===r.UNSIGNED_BYTE&&(Je=r.R8UI),re===r.UNSIGNED_SHORT&&(Je=r.R16UI),re===r.UNSIGNED_INT&&(Je=r.R32UI),re===r.BYTE&&(Je=r.R8I),re===r.SHORT&&(Je=r.R16I),re===r.INT&&(Je=r.R32I)),W===r.RG&&(re===r.FLOAT&&(Je=r.RG32F),re===r.HALF_FLOAT&&(Je=r.RG16F),re===r.UNSIGNED_BYTE&&(Je=r.RG8)),W===r.RG_INTEGER&&(re===r.UNSIGNED_BYTE&&(Je=r.RG8UI),re===r.UNSIGNED_SHORT&&(Je=r.RG16UI),re===r.UNSIGNED_INT&&(Je=r.RG32UI),re===r.BYTE&&(Je=r.RG8I),re===r.SHORT&&(Je=r.RG16I),re===r.INT&&(Je=r.RG32I)),W===r.RGB_INTEGER&&(re===r.UNSIGNED_BYTE&&(Je=r.RGB8UI),re===r.UNSIGNED_SHORT&&(Je=r.RGB16UI),re===r.UNSIGNED_INT&&(Je=r.RGB32UI),re===r.BYTE&&(Je=r.RGB8I),re===r.SHORT&&(Je=r.RGB16I),re===r.INT&&(Je=r.RGB32I)),W===r.RGBA_INTEGER&&(re===r.UNSIGNED_BYTE&&(Je=r.RGBA8UI),re===r.UNSIGNED_SHORT&&(Je=r.RGBA16UI),re===r.UNSIGNED_INT&&(Je=r.RGBA32UI),re===r.BYTE&&(Je=r.RGBA8I),re===r.SHORT&&(Je=r.RGBA16I),re===r.INT&&(Je=r.RGBA32I)),W===r.RGB&&re===r.UNSIGNED_INT_5_9_9_9_REV&&(Je=r.RGB9_E5),W===r.RGBA){const $e=ve?o_:Nr.getTransfer(be);re===r.FLOAT&&(Je=r.RGBA32F),re===r.HALF_FLOAT&&(Je=r.RGBA16F),re===r.UNSIGNED_BYTE&&(Je=$e===Jr?r.SRGB8_ALPHA8:r.RGBA8),re===r.UNSIGNED_SHORT_4_4_4_4&&(Je=r.RGBA4),re===r.UNSIGNED_SHORT_5_5_5_1&&(Je=r.RGB5_A1)}return(Je===r.R16F||Je===r.R32F||Je===r.RG16F||Je===r.RG32F||Je===r.RGBA16F||Je===r.RGBA32F)&&e.get("EXT_color_buffer_float"),Je}function A(Z,W){let re;return Z?W===null||W===Pu||W===Jm?re=r.DEPTH24_STENCIL8:W===Mi?re=r.DEPTH32F_STENCIL8:W===W1&&(re=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):W===null||W===Pu||W===Jm?re=r.DEPTH_COMPONENT24:W===Mi?re=r.DEPTH_COMPONENT32F:W===W1&&(re=r.DEPTH_COMPONENT16),re}function k(Z,W){return w(Z)===!0||Z.isFramebufferTexture&&Z.minFilter!==$s&&Z.minFilter!==dr?Math.log2(Math.max(W.width,W.height))+1:Z.mipmaps!==void 0&&Z.mipmaps.length>0?Z.mipmaps.length:Z.isCompressedTexture&&Array.isArray(Z.image)?W.mipmaps.length:1}function O(Z){const W=Z.target;W.removeEventListener("dispose",O),I(W),W.isVideoTexture&&u.delete(W)}function R(Z){const W=Z.target;W.removeEventListener("dispose",R),E(W)}function I(Z){const W=n.get(Z);if(W.__webglInit===void 0)return;const re=Z.source,be=d.get(re);if(be){const ve=be[W.__cacheKey];ve.usedTimes--,ve.usedTimes===0&&D(Z),Object.keys(be).length===0&&d.delete(re)}n.remove(Z)}function D(Z){const W=n.get(Z);r.deleteTexture(W.__webglTexture);const re=Z.source,be=d.get(re);delete be[W.__cacheKey],a.memory.textures--}function E(Z){const W=n.get(Z);if(Z.depthTexture&&(Z.depthTexture.dispose(),n.remove(Z.depthTexture)),Z.isWebGLCubeRenderTarget)for(let be=0;be<6;be++){if(Array.isArray(W.__webglFramebuffer[be]))for(let ve=0;ve<W.__webglFramebuffer[be].length;ve++)r.deleteFramebuffer(W.__webglFramebuffer[be][ve]);else r.deleteFramebuffer(W.__webglFramebuffer[be]);W.__webglDepthbuffer&&r.deleteRenderbuffer(W.__webglDepthbuffer[be])}else{if(Array.isArray(W.__webglFramebuffer))for(let be=0;be<W.__webglFramebuffer.length;be++)r.deleteFramebuffer(W.__webglFramebuffer[be]);else r.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&r.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&r.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let be=0;be<W.__webglColorRenderbuffer.length;be++)W.__webglColorRenderbuffer[be]&&r.deleteRenderbuffer(W.__webglColorRenderbuffer[be]);W.__webglDepthRenderbuffer&&r.deleteRenderbuffer(W.__webglDepthRenderbuffer)}const re=Z.textures;for(let be=0,ve=re.length;be<ve;be++){const Je=n.get(re[be]);Je.__webglTexture&&(r.deleteTexture(Je.__webglTexture),a.memory.textures--),n.remove(re[be])}n.remove(Z)}let B=0;function U(){B=0}function V(){const Z=B;return Z>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Z+" texture units while this GPU supports only "+i.maxTextures),B+=1,Z}function X(Z){const W=[];return W.push(Z.wrapS),W.push(Z.wrapT),W.push(Z.wrapR||0),W.push(Z.magFilter),W.push(Z.minFilter),W.push(Z.anisotropy),W.push(Z.internalFormat),W.push(Z.format),W.push(Z.type),W.push(Z.generateMipmaps),W.push(Z.premultiplyAlpha),W.push(Z.flipY),W.push(Z.unpackAlignment),W.push(Z.colorSpace),W.join()}function te(Z,W){const re=n.get(Z);if(Z.isVideoTexture&&Ce(Z),Z.isRenderTargetTexture===!1&&Z.version>0&&re.__version!==Z.version){const be=Z.image;if(be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{$(re,Z,W);return}}t.bindTexture(r.TEXTURE_2D,re.__webglTexture,r.TEXTURE0+W)}function ee(Z,W){const re=n.get(Z);if(Z.version>0&&re.__version!==Z.version){$(re,Z,W);return}t.bindTexture(r.TEXTURE_2D_ARRAY,re.__webglTexture,r.TEXTURE0+W)}function ue(Z,W){const re=n.get(Z);if(Z.version>0&&re.__version!==Z.version){$(re,Z,W);return}t.bindTexture(r.TEXTURE_3D,re.__webglTexture,r.TEXTURE0+W)}function ne(Z,W){const re=n.get(Z);if(Z.version>0&&re.__version!==Z.version){ge(re,Z,W);return}t.bindTexture(r.TEXTURE_CUBE_MAP,re.__webglTexture,r.TEXTURE0+W)}const oe={[Ph]:r.REPEAT,[as]:r.CLAMP_TO_EDGE,[H1]:r.MIRRORED_REPEAT},q={[$s]:r.NEAREST,[jA]:r.NEAREST_MIPMAP_NEAREST,[mm]:r.NEAREST_MIPMAP_LINEAR,[dr]:r.LINEAR,[f1]:r.LINEAR_MIPMAP_NEAREST,[zl]:r.LINEAR_MIPMAP_LINEAR},J={[xY]:r.NEVER,[IY]:r.ALWAYS,[CY]:r.LESS,[Xk]:r.LEQUAL,[MY]:r.EQUAL,[EY]:r.GEQUAL,[AY]:r.GREATER,[TY]:r.NOTEQUAL};function ie(Z,W){if(W.type===Mi&&e.has("OES_texture_float_linear")===!1&&(W.magFilter===dr||W.magFilter===f1||W.magFilter===mm||W.magFilter===zl||W.minFilter===dr||W.minFilter===f1||W.minFilter===mm||W.minFilter===zl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(Z,r.TEXTURE_WRAP_S,oe[W.wrapS]),r.texParameteri(Z,r.TEXTURE_WRAP_T,oe[W.wrapT]),(Z===r.TEXTURE_3D||Z===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Z,r.TEXTURE_WRAP_R,oe[W.wrapR]),r.texParameteri(Z,r.TEXTURE_MAG_FILTER,q[W.magFilter]),r.texParameteri(Z,r.TEXTURE_MIN_FILTER,q[W.minFilter]),W.compareFunction&&(r.texParameteri(Z,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(Z,r.TEXTURE_COMPARE_FUNC,J[W.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(W.magFilter===$s||W.minFilter!==mm&&W.minFilter!==zl||W.type===Mi&&e.has("OES_texture_float_linear")===!1)return;if(W.anisotropy>1||n.get(W).__currentAnisotropy){const re=e.get("EXT_texture_filter_anisotropic");r.texParameterf(Z,re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,i.getMaxAnisotropy())),n.get(W).__currentAnisotropy=W.anisotropy}}}function he(Z,W){let re=!1;Z.__webglInit===void 0&&(Z.__webglInit=!0,W.addEventListener("dispose",O));const be=W.source;let ve=d.get(be);ve===void 0&&(ve={},d.set(be,ve));const Je=X(W);if(Je!==Z.__cacheKey){ve[Je]===void 0&&(ve[Je]={texture:r.createTexture(),usedTimes:0},a.memory.textures++,re=!0),ve[Je].usedTimes++;const $e=ve[Z.__cacheKey];$e!==void 0&&(ve[Z.__cacheKey].usedTimes--,$e.usedTimes===0&&D(W)),Z.__cacheKey=Je,Z.__webglTexture=ve[Je].texture}return re}function $(Z,W,re){let be=r.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(be=r.TEXTURE_2D_ARRAY),W.isData3DTexture&&(be=r.TEXTURE_3D);const ve=he(Z,W),Je=W.source;t.bindTexture(be,Z.__webglTexture,r.TEXTURE0+re);const $e=n.get(Je);if(Je.version!==$e.__version||ve===!0){t.activeTexture(r.TEXTURE0+re);const it=Nr.getPrimaries(Nr.workingColorSpace),pt=W.colorSpace===Ef?null:Nr.getPrimaries(W.colorSpace),Ft=W.colorSpace===Ef||it===pt?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,W.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,W.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ft);let Le=_(W.image,!1,i.maxTextureSize);Le=He(W,Le);const at=s.convert(W.format,W.colorSpace),vt=s.convert(W.type);let qe=M(W.internalFormat,at,vt,W.colorSpace,W.isVideoTexture);ie(be,W);let et;const Me=W.mipmaps,tt=W.isVideoTexture!==!0,Tt=$e.__version===void 0||ve===!0,Ae=Je.dataReady,Oe=k(W,Le);if(W.isDepthTexture)qe=A(W.format===Xm,W.type),Tt&&(tt?t.texStorage2D(r.TEXTURE_2D,1,qe,Le.width,Le.height):t.texImage2D(r.TEXTURE_2D,0,qe,Le.width,Le.height,0,at,vt,null));else if(W.isDataTexture)if(Me.length>0){tt&&Tt&&t.texStorage2D(r.TEXTURE_2D,Oe,qe,Me[0].width,Me[0].height);for(let Ye=0,yt=Me.length;Ye<yt;Ye++)et=Me[Ye],tt?Ae&&t.texSubImage2D(r.TEXTURE_2D,Ye,0,0,et.width,et.height,at,vt,et.data):t.texImage2D(r.TEXTURE_2D,Ye,qe,et.width,et.height,0,at,vt,et.data);W.generateMipmaps=!1}else tt?(Tt&&t.texStorage2D(r.TEXTURE_2D,Oe,qe,Le.width,Le.height),Ae&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,Le.width,Le.height,at,vt,Le.data)):t.texImage2D(r.TEXTURE_2D,0,qe,Le.width,Le.height,0,at,vt,Le.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){tt&&Tt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Oe,qe,Me[0].width,Me[0].height,Le.depth);for(let Ye=0,yt=Me.length;Ye<yt;Ye++)if(et=Me[Ye],W.format!==os)if(at!==null)if(tt){if(Ae)if(W.layerUpdates.size>0){const Lt=A3(et.width,et.height,W.format,W.type);for(const xt of W.layerUpdates){const Yt=et.data.subarray(xt*Lt/et.data.BYTES_PER_ELEMENT,(xt+1)*Lt/et.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ye,0,0,xt,et.width,et.height,1,at,Yt)}W.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ye,0,0,0,et.width,et.height,Le.depth,at,et.data)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Ye,qe,et.width,et.height,Le.depth,0,et.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else tt?Ae&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,Ye,0,0,0,et.width,et.height,Le.depth,at,vt,et.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Ye,qe,et.width,et.height,Le.depth,0,at,vt,et.data)}else{tt&&Tt&&t.texStorage2D(r.TEXTURE_2D,Oe,qe,Me[0].width,Me[0].height);for(let Ye=0,yt=Me.length;Ye<yt;Ye++)et=Me[Ye],W.format!==os?at!==null?tt?Ae&&t.compressedTexSubImage2D(r.TEXTURE_2D,Ye,0,0,et.width,et.height,at,et.data):t.compressedTexImage2D(r.TEXTURE_2D,Ye,qe,et.width,et.height,0,et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tt?Ae&&t.texSubImage2D(r.TEXTURE_2D,Ye,0,0,et.width,et.height,at,vt,et.data):t.texImage2D(r.TEXTURE_2D,Ye,qe,et.width,et.height,0,at,vt,et.data)}else if(W.isDataArrayTexture)if(tt){if(Tt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Oe,qe,Le.width,Le.height,Le.depth),Ae)if(W.layerUpdates.size>0){const Ye=A3(Le.width,Le.height,W.format,W.type);for(const yt of W.layerUpdates){const Lt=Le.data.subarray(yt*Ye/Le.data.BYTES_PER_ELEMENT,(yt+1)*Ye/Le.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,yt,Le.width,Le.height,1,at,vt,Lt)}W.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,Le.width,Le.height,Le.depth,at,vt,Le.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,qe,Le.width,Le.height,Le.depth,0,at,vt,Le.data);else if(W.isData3DTexture)tt?(Tt&&t.texStorage3D(r.TEXTURE_3D,Oe,qe,Le.width,Le.height,Le.depth),Ae&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,Le.width,Le.height,Le.depth,at,vt,Le.data)):t.texImage3D(r.TEXTURE_3D,0,qe,Le.width,Le.height,Le.depth,0,at,vt,Le.data);else if(W.isFramebufferTexture){if(Tt)if(tt)t.texStorage2D(r.TEXTURE_2D,Oe,qe,Le.width,Le.height);else{let Ye=Le.width,yt=Le.height;for(let Lt=0;Lt<Oe;Lt++)t.texImage2D(r.TEXTURE_2D,Lt,qe,Ye,yt,0,at,vt,null),Ye>>=1,yt>>=1}}else if(Me.length>0){if(tt&&Tt){const Ye=Ee(Me[0]);t.texStorage2D(r.TEXTURE_2D,Oe,qe,Ye.width,Ye.height)}for(let Ye=0,yt=Me.length;Ye<yt;Ye++)et=Me[Ye],tt?Ae&&t.texSubImage2D(r.TEXTURE_2D,Ye,0,0,at,vt,et):t.texImage2D(r.TEXTURE_2D,Ye,qe,at,vt,et);W.generateMipmaps=!1}else if(tt){if(Tt){const Ye=Ee(Le);t.texStorage2D(r.TEXTURE_2D,Oe,qe,Ye.width,Ye.height)}Ae&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,at,vt,Le)}else t.texImage2D(r.TEXTURE_2D,0,qe,at,vt,Le);w(W)&&b(be),$e.__version=Je.version,W.onUpdate&&W.onUpdate(W)}Z.__version=W.version}function ge(Z,W,re){if(W.image.length!==6)return;const be=he(Z,W),ve=W.source;t.bindTexture(r.TEXTURE_CUBE_MAP,Z.__webglTexture,r.TEXTURE0+re);const Je=n.get(ve);if(ve.version!==Je.__version||be===!0){t.activeTexture(r.TEXTURE0+re);const $e=Nr.getPrimaries(Nr.workingColorSpace),it=W.colorSpace===Ef?null:Nr.getPrimaries(W.colorSpace),pt=W.colorSpace===Ef||$e===it?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,W.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,W.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,pt);const Ft=W.isCompressedTexture||W.image[0].isCompressedTexture,Le=W.image[0]&&W.image[0].isDataTexture,at=[];for(let yt=0;yt<6;yt++)!Ft&&!Le?at[yt]=_(W.image[yt],!0,i.maxCubemapSize):at[yt]=Le?W.image[yt].image:W.image[yt],at[yt]=He(W,at[yt]);const vt=at[0],qe=s.convert(W.format,W.colorSpace),et=s.convert(W.type),Me=M(W.internalFormat,qe,et,W.colorSpace),tt=W.isVideoTexture!==!0,Tt=Je.__version===void 0||be===!0,Ae=ve.dataReady;let Oe=k(W,vt);ie(r.TEXTURE_CUBE_MAP,W);let Ye;if(Ft){tt&&Tt&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Oe,Me,vt.width,vt.height);for(let yt=0;yt<6;yt++){Ye=at[yt].mipmaps;for(let Lt=0;Lt<Ye.length;Lt++){const xt=Ye[Lt];W.format!==os?qe!==null?tt?Ae&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Lt,0,0,xt.width,xt.height,qe,xt.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Lt,Me,xt.width,xt.height,0,xt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):tt?Ae&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Lt,0,0,xt.width,xt.height,qe,et,xt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Lt,Me,xt.width,xt.height,0,qe,et,xt.data)}}}else{if(Ye=W.mipmaps,tt&&Tt){Ye.length>0&&Oe++;const yt=Ee(at[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,Oe,Me,yt.width,yt.height)}for(let yt=0;yt<6;yt++)if(Le){tt?Ae&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+yt,0,0,0,at[yt].width,at[yt].height,qe,et,at[yt].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+yt,0,Me,at[yt].width,at[yt].height,0,qe,et,at[yt].data);for(let Lt=0;Lt<Ye.length;Lt++){const Yt=Ye[Lt].image[yt].image;tt?Ae&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Lt+1,0,0,Yt.width,Yt.height,qe,et,Yt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Lt+1,Me,Yt.width,Yt.height,0,qe,et,Yt.data)}}else{tt?Ae&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+yt,0,0,0,qe,et,at[yt]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+yt,0,Me,qe,et,at[yt]);for(let Lt=0;Lt<Ye.length;Lt++){const xt=Ye[Lt];tt?Ae&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Lt+1,0,0,qe,et,xt.image[yt]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Lt+1,Me,qe,et,xt.image[yt])}}}w(W)&&b(r.TEXTURE_CUBE_MAP),Je.__version=ve.version,W.onUpdate&&W.onUpdate(W)}Z.__version=W.version}function pe(Z,W,re,be,ve,Je){const $e=s.convert(re.format,re.colorSpace),it=s.convert(re.type),pt=M(re.internalFormat,$e,it,re.colorSpace),Ft=n.get(W),Le=n.get(re);if(Le.__renderTarget=W,!Ft.__hasExternalTextures){const at=Math.max(1,W.width>>Je),vt=Math.max(1,W.height>>Je);ve===r.TEXTURE_3D||ve===r.TEXTURE_2D_ARRAY?t.texImage3D(ve,Je,pt,at,vt,W.depth,0,$e,it,null):t.texImage2D(ve,Je,pt,at,vt,0,$e,it,null)}t.bindFramebuffer(r.FRAMEBUFFER,Z),Ne(W)?o.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,be,ve,Le.__webglTexture,0,_e(W)):(ve===r.TEXTURE_2D||ve>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&ve<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,be,ve,Le.__webglTexture,Je),t.bindFramebuffer(r.FRAMEBUFFER,null)}function we(Z,W,re){if(r.bindRenderbuffer(r.RENDERBUFFER,Z),W.depthBuffer){const be=W.depthTexture,ve=be&&be.isDepthTexture?be.type:null,Je=A(W.stencilBuffer,ve),$e=W.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,it=_e(W);Ne(W)?o.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,it,Je,W.width,W.height):re?r.renderbufferStorageMultisample(r.RENDERBUFFER,it,Je,W.width,W.height):r.renderbufferStorage(r.RENDERBUFFER,Je,W.width,W.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,$e,r.RENDERBUFFER,Z)}else{const be=W.textures;for(let ve=0;ve<be.length;ve++){const Je=be[ve],$e=s.convert(Je.format,Je.colorSpace),it=s.convert(Je.type),pt=M(Je.internalFormat,$e,it,Je.colorSpace),Ft=_e(W);re&&Ne(W)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Ft,pt,W.width,W.height):Ne(W)?o.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ft,pt,W.width,W.height):r.renderbufferStorage(r.RENDERBUFFER,pt,W.width,W.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function ke(Z,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,Z),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const be=n.get(W.depthTexture);be.__renderTarget=W,(!be.__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),te(W.depthTexture,0);const ve=be.__webglTexture,Je=_e(W);if(W.depthTexture.format===Im)Ne(W)?o.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,ve,0,Je):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,ve,0);else if(W.depthTexture.format===Xm)Ne(W)?o.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,ve,0,Je):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,ve,0);else throw new Error("Unknown depthTexture format")}function Pe(Z){const W=n.get(Z),re=Z.isWebGLCubeRenderTarget===!0;if(W.__boundDepthTexture!==Z.depthTexture){const be=Z.depthTexture;if(W.__depthDisposeCallback&&W.__depthDisposeCallback(),be){const ve=()=>{delete W.__boundDepthTexture,delete W.__depthDisposeCallback,be.removeEventListener("dispose",ve)};be.addEventListener("dispose",ve),W.__depthDisposeCallback=ve}W.__boundDepthTexture=be}if(Z.depthTexture&&!W.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");ke(W.__webglFramebuffer,Z)}else if(re){W.__webglDepthbuffer=[];for(let be=0;be<6;be++)if(t.bindFramebuffer(r.FRAMEBUFFER,W.__webglFramebuffer[be]),W.__webglDepthbuffer[be]===void 0)W.__webglDepthbuffer[be]=r.createRenderbuffer(),we(W.__webglDepthbuffer[be],Z,!1);else{const ve=Z.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Je=W.__webglDepthbuffer[be];r.bindRenderbuffer(r.RENDERBUFFER,Je),r.framebufferRenderbuffer(r.FRAMEBUFFER,ve,r.RENDERBUFFER,Je)}}else if(t.bindFramebuffer(r.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer===void 0)W.__webglDepthbuffer=r.createRenderbuffer(),we(W.__webglDepthbuffer,Z,!1);else{const be=Z.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,ve=W.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,ve),r.framebufferRenderbuffer(r.FRAMEBUFFER,be,r.RENDERBUFFER,ve)}t.bindFramebuffer(r.FRAMEBUFFER,null)}function je(Z,W,re){const be=n.get(Z);W!==void 0&&pe(be.__webglFramebuffer,Z,Z.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),re!==void 0&&Pe(Z)}function Ke(Z){const W=Z.texture,re=n.get(Z),be=n.get(W);Z.addEventListener("dispose",R);const ve=Z.textures,Je=Z.isWebGLCubeRenderTarget===!0,$e=ve.length>1;if($e||(be.__webglTexture===void 0&&(be.__webglTexture=r.createTexture()),be.__version=W.version,a.memory.textures++),Je){re.__webglFramebuffer=[];for(let it=0;it<6;it++)if(W.mipmaps&&W.mipmaps.length>0){re.__webglFramebuffer[it]=[];for(let pt=0;pt<W.mipmaps.length;pt++)re.__webglFramebuffer[it][pt]=r.createFramebuffer()}else re.__webglFramebuffer[it]=r.createFramebuffer()}else{if(W.mipmaps&&W.mipmaps.length>0){re.__webglFramebuffer=[];for(let it=0;it<W.mipmaps.length;it++)re.__webglFramebuffer[it]=r.createFramebuffer()}else re.__webglFramebuffer=r.createFramebuffer();if($e)for(let it=0,pt=ve.length;it<pt;it++){const Ft=n.get(ve[it]);Ft.__webglTexture===void 0&&(Ft.__webglTexture=r.createTexture(),a.memory.textures++)}if(Z.samples>0&&Ne(Z)===!1){re.__webglMultisampledFramebuffer=r.createFramebuffer(),re.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let it=0;it<ve.length;it++){const pt=ve[it];re.__webglColorRenderbuffer[it]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,re.__webglColorRenderbuffer[it]);const Ft=s.convert(pt.format,pt.colorSpace),Le=s.convert(pt.type),at=M(pt.internalFormat,Ft,Le,pt.colorSpace,Z.isXRRenderTarget===!0),vt=_e(Z);r.renderbufferStorageMultisample(r.RENDERBUFFER,vt,at,Z.width,Z.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+it,r.RENDERBUFFER,re.__webglColorRenderbuffer[it])}r.bindRenderbuffer(r.RENDERBUFFER,null),Z.depthBuffer&&(re.__webglDepthRenderbuffer=r.createRenderbuffer(),we(re.__webglDepthRenderbuffer,Z,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Je){t.bindTexture(r.TEXTURE_CUBE_MAP,be.__webglTexture),ie(r.TEXTURE_CUBE_MAP,W);for(let it=0;it<6;it++)if(W.mipmaps&&W.mipmaps.length>0)for(let pt=0;pt<W.mipmaps.length;pt++)pe(re.__webglFramebuffer[it][pt],Z,W,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+it,pt);else pe(re.__webglFramebuffer[it],Z,W,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+it,0);w(W)&&b(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if($e){for(let it=0,pt=ve.length;it<pt;it++){const Ft=ve[it],Le=n.get(Ft);t.bindTexture(r.TEXTURE_2D,Le.__webglTexture),ie(r.TEXTURE_2D,Ft),pe(re.__webglFramebuffer,Z,Ft,r.COLOR_ATTACHMENT0+it,r.TEXTURE_2D,0),w(Ft)&&b(r.TEXTURE_2D)}t.unbindTexture()}else{let it=r.TEXTURE_2D;if((Z.isWebGL3DRenderTarget||Z.isWebGLArrayRenderTarget)&&(it=Z.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(it,be.__webglTexture),ie(it,W),W.mipmaps&&W.mipmaps.length>0)for(let pt=0;pt<W.mipmaps.length;pt++)pe(re.__webglFramebuffer[pt],Z,W,r.COLOR_ATTACHMENT0,it,pt);else pe(re.__webglFramebuffer,Z,W,r.COLOR_ATTACHMENT0,it,0);w(W)&&b(it),t.unbindTexture()}Z.depthBuffer&&Pe(Z)}function Ie(Z){const W=Z.textures;for(let re=0,be=W.length;re<be;re++){const ve=W[re];if(w(ve)){const Je=C(Z),$e=n.get(ve).__webglTexture;t.bindTexture(Je,$e),b(Je),t.unbindTexture()}}}const Ge=[],ce=[];function _t(Z){if(Z.samples>0){if(Ne(Z)===!1){const W=Z.textures,re=Z.width,be=Z.height;let ve=r.COLOR_BUFFER_BIT;const Je=Z.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,$e=n.get(Z),it=W.length>1;if(it)for(let pt=0;pt<W.length;pt++)t.bindFramebuffer(r.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+pt,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,$e.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+pt,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,$e.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,$e.__webglFramebuffer);for(let pt=0;pt<W.length;pt++){if(Z.resolveDepthBuffer&&(Z.depthBuffer&&(ve|=r.DEPTH_BUFFER_BIT),Z.stencilBuffer&&Z.resolveStencilBuffer&&(ve|=r.STENCIL_BUFFER_BIT)),it){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,$e.__webglColorRenderbuffer[pt]);const Ft=n.get(W[pt]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,Ft,0)}r.blitFramebuffer(0,0,re,be,0,0,re,be,ve,r.NEAREST),l===!0&&(Ge.length=0,ce.length=0,Ge.push(r.COLOR_ATTACHMENT0+pt),Z.depthBuffer&&Z.resolveDepthBuffer===!1&&(Ge.push(Je),ce.push(Je),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,ce)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Ge))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),it)for(let pt=0;pt<W.length;pt++){t.bindFramebuffer(r.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+pt,r.RENDERBUFFER,$e.__webglColorRenderbuffer[pt]);const Ft=n.get(W[pt]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,$e.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+pt,r.TEXTURE_2D,Ft,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,$e.__webglMultisampledFramebuffer)}else if(Z.depthBuffer&&Z.resolveDepthBuffer===!1&&l){const W=Z.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[W])}}}function _e(Z){return Math.min(i.maxSamples,Z.samples)}function Ne(Z){const W=n.get(Z);return Z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function Ce(Z){const W=a.render.frame;u.get(Z)!==W&&(u.set(Z,W),Z.update())}function He(Z,W){const re=Z.colorSpace,be=Z.format,ve=Z.type;return Z.isCompressedTexture===!0||Z.isVideoTexture===!0||re!==Ou&&re!==Ef&&(Nr.getTransfer(re)===Jr?(be!==os||ve!==jo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",re)),W}function Ee(Z){return typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement?(c.width=Z.naturalWidth||Z.width,c.height=Z.naturalHeight||Z.height):typeof VideoFrame<"u"&&Z instanceof VideoFrame?(c.width=Z.displayWidth,c.height=Z.displayHeight):(c.width=Z.width,c.height=Z.height),c}this.allocateTextureUnit=V,this.resetTextureUnits=U,this.setTexture2D=te,this.setTexture2DArray=ee,this.setTexture3D=ue,this.setTextureCube=ne,this.rebindTextures=je,this.setupRenderTarget=Ke,this.updateRenderTargetMipmap=Ie,this.updateMultisampleRenderTarget=_t,this.setupDepthRenderbuffer=Pe,this.setupFrameBufferTexture=pe,this.useMultisampledRTT=Ne}function LJ(r,e){function t(n,i=Ef){let s;const a=Nr.getTransfer(i);if(n===jo)return r.UNSIGNED_BYTE;if(n===GA)return r.UNSIGNED_SHORT_4_4_4_4;if(n===HA)return r.UNSIGNED_SHORT_5_5_5_1;if(n===Bk)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===zA)return r.BYTE;if(n===VA)return r.SHORT;if(n===W1)return r.UNSIGNED_SHORT;if(n===tb)return r.INT;if(n===Pu)return r.UNSIGNED_INT;if(n===Mi)return r.FLOAT;if(n===ks)return r.HALF_FLOAT;if(n===Uk)return r.ALPHA;if(n===jk)return r.RGB;if(n===os)return r.RGBA;if(n===zk)return r.LUMINANCE;if(n===Vk)return r.LUMINANCE_ALPHA;if(n===Im)return r.DEPTH_COMPONENT;if(n===Xm)return r.DEPTH_STENCIL;if(n===nb)return r.RED;if(n===rb)return r.RED_INTEGER;if(n===Gk)return r.RG;if(n===WA)return r.RG_INTEGER;if(n===YA)return r.RGBA_INTEGER;if(n===mw||n===gw||n===vw||n===yw)if(a===Jr)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===mw)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===gw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===vw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===yw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===mw)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===gw)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===vw)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===yw)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===OC||n===FC||n===BC||n===UC)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===OC)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===FC)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===BC)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===UC)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===jC||n===zC||n===VC)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===jC||n===zC)return a===Jr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===VC)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===GC||n===HC||n===WC||n===YC||n===JC||n===XC||n===QC||n===KC||n===qC||n===ZC||n===$C||n===eM||n===tM||n===nM)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===GC)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===HC)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===WC)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===YC)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===JC)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===XC)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===QC)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===KC)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===qC)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===ZC)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===$C)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===eM)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===tM)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===nM)return a===Jr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===ww||n===rM||n===iM)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===ww)return a===Jr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===rM)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===iM)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Hk||n===sM||n===aM||n===oM)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===ww)return s.COMPRESSED_RED_RGTC1_EXT;if(n===sM)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===aM)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===oM)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Jm?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:t}}const Vxe={type:"move"};class K4{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new kf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new kf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ye,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ye),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new kf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ye,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ye),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const _ of e.hand.values()){const w=t.getJointPose(_,n),b=this._getHandJoint(c,_);w!==null&&(b.matrix.fromArray(w.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=w.radius),b.visible=w!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],d=u.position.distanceTo(f.position),p=.02,g=.005;c.inputState.pinching&&d>p+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=p-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Vxe)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new kf;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const Gxe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Hxe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Wxe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const i=new Ur,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new zo({vertexShader:Gxe,fragmentShader:Hxe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new si(new Kc(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Yxe extends Uu{constructor(e,t){super();const n=this;let i=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,f=null,d=null,p=null,g=null;const _=new Wxe,w=t.getContextAttributes();let b=null,C=null;const M=[],A=[],k=new Mt;let O=null;const R=new Qi;R.viewport=new Cr;const I=new Qi;I.viewport=new Cr;const D=[R,I],E=new _J;let B=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function($){let ge=M[$];return ge===void 0&&(ge=new K4,M[$]=ge),ge.getTargetRaySpace()},this.getControllerGrip=function($){let ge=M[$];return ge===void 0&&(ge=new K4,M[$]=ge),ge.getGripSpace()},this.getHand=function($){let ge=M[$];return ge===void 0&&(ge=new K4,M[$]=ge),ge.getHandSpace()};function V($){const ge=A.indexOf($.inputSource);if(ge===-1)return;const pe=M[ge];pe!==void 0&&(pe.update($.inputSource,$.frame,c||a),pe.dispatchEvent({type:$.type,data:$.inputSource}))}function X(){i.removeEventListener("select",V),i.removeEventListener("selectstart",V),i.removeEventListener("selectend",V),i.removeEventListener("squeeze",V),i.removeEventListener("squeezestart",V),i.removeEventListener("squeezeend",V),i.removeEventListener("end",X),i.removeEventListener("inputsourceschange",te);for(let $=0;$<M.length;$++){const ge=A[$];ge!==null&&(A[$]=null,M[$].disconnect(ge))}B=null,U=null,_.reset(),e.setRenderTarget(b),p=null,d=null,f=null,i=null,C=null,he.stop(),n.isPresenting=!1,e.setPixelRatio(O),e.setSize(k.width,k.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function($){s=$,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function($){o=$,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function($){c=$},this.getBaseLayer=function(){return d!==null?d:p},this.getBinding=function(){return f},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function($){if(i=$,i!==null){if(b=e.getRenderTarget(),i.addEventListener("select",V),i.addEventListener("selectstart",V),i.addEventListener("selectend",V),i.addEventListener("squeeze",V),i.addEventListener("squeezestart",V),i.addEventListener("squeezeend",V),i.addEventListener("end",X),i.addEventListener("inputsourceschange",te),w.xrCompatible!==!0&&await t.makeXRCompatible(),O=e.getPixelRatio(),e.getSize(k),i.enabledFeatures!==void 0&&i.enabledFeatures.includes("layers")){let pe=null,we=null,ke=null;w.depth&&(ke=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,pe=w.stencil?Xm:Im,we=w.stencil?Jm:Pu);const Pe={colorFormat:t.RGBA8,depthFormat:ke,scaleFactor:s};f=new XRWebGLBinding(i,t),d=f.createProjectionLayer(Pe),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),C=new pl(d.textureWidth,d.textureHeight,{format:os,type:jo,depthTexture:new tT(d.textureWidth,d.textureHeight,we,void 0,void 0,void 0,void 0,void 0,void 0,pe),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1})}else{const pe={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,pe),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),C=new pl(p.framebufferWidth,p.framebufferHeight,{format:os,type:jo,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}C.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await i.requestReferenceSpace(o),he.setContext(i),he.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};function te($){for(let ge=0;ge<$.removed.length;ge++){const pe=$.removed[ge],we=A.indexOf(pe);we>=0&&(A[we]=null,M[we].disconnect(pe))}for(let ge=0;ge<$.added.length;ge++){const pe=$.added[ge];let we=A.indexOf(pe);if(we===-1){for(let Pe=0;Pe<M.length;Pe++)if(Pe>=A.length){A.push(pe),we=Pe;break}else if(A[Pe]===null){A[Pe]=pe,we=Pe;break}if(we===-1)break}const ke=M[we];ke&&ke.connect(pe)}}const ee=new ye,ue=new ye;function ne($,ge,pe){ee.setFromMatrixPosition(ge.matrixWorld),ue.setFromMatrixPosition(pe.matrixWorld);const we=ee.distanceTo(ue),ke=ge.projectionMatrix.elements,Pe=pe.projectionMatrix.elements,je=ke[14]/(ke[10]-1),Ke=ke[14]/(ke[10]+1),Ie=(ke[9]+1)/ke[5],Ge=(ke[9]-1)/ke[5],ce=(ke[8]-1)/ke[0],_t=(Pe[8]+1)/Pe[0],_e=je*ce,Ne=je*_t,Ce=we/(-ce+_t),He=Ce*-ce;if(ge.matrixWorld.decompose($.position,$.quaternion,$.scale),$.translateX(He),$.translateZ(Ce),$.matrixWorld.compose($.position,$.quaternion,$.scale),$.matrixWorldInverse.copy($.matrixWorld).invert(),ke[10]===-1)$.projectionMatrix.copy(ge.projectionMatrix),$.projectionMatrixInverse.copy(ge.projectionMatrixInverse);else{const Ee=je+Ce,Z=Ke+Ce,W=_e-He,re=Ne+(we-He),be=Ie*Ke/Z*Ee,ve=Ge*Ke/Z*Ee;$.projectionMatrix.makePerspective(W,re,be,ve,Ee,Z),$.projectionMatrixInverse.copy($.projectionMatrix).invert()}}function oe($,ge){ge===null?$.matrixWorld.copy($.matrix):$.matrixWorld.multiplyMatrices(ge.matrixWorld,$.matrix),$.matrixWorldInverse.copy($.matrixWorld).invert()}this.updateCamera=function($){if(i===null)return;let ge=$.near,pe=$.far;_.texture!==null&&(_.depthNear>0&&(ge=_.depthNear),_.depthFar>0&&(pe=_.depthFar)),E.near=I.near=R.near=ge,E.far=I.far=R.far=pe,(B!==E.near||U!==E.far)&&(i.updateRenderState({depthNear:E.near,depthFar:E.far}),B=E.near,U=E.far),R.layers.mask=$.layers.mask|2,I.layers.mask=$.layers.mask|4,E.layers.mask=R.layers.mask|I.layers.mask;const we=$.parent,ke=E.cameras;oe(E,we);for(let Pe=0;Pe<ke.length;Pe++)oe(ke[Pe],we);ke.length===2?ne(E,R,I):E.projectionMatrix.copy(R.projectionMatrix),q($,E,we)};function q($,ge,pe){pe===null?$.matrix.copy(ge.matrixWorld):($.matrix.copy(pe.matrixWorld),$.matrix.invert(),$.matrix.multiply(ge.matrixWorld)),$.matrix.decompose($.position,$.quaternion,$.scale),$.updateMatrixWorld(!0),$.projectionMatrix.copy(ge.projectionMatrix),$.projectionMatrixInverse.copy(ge.projectionMatrixInverse),$.isPerspectiveCamera&&($.fov=X1*2*Math.atan(1/$.projectionMatrix.elements[5]),$.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(d===null&&p===null))return l},this.setFoveation=function($){l=$,d!==null&&(d.fixedFoveation=$),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=$)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(E)};let J=null;function ie($,ge){if(u=ge.getViewerPose(c||a),g=ge,u!==null){const pe=u.views;p!==null&&(e.setRenderTargetFramebuffer(C,p.framebuffer),e.setRenderTarget(C));let we=!1;pe.length!==E.cameras.length&&(E.cameras.length=0,we=!0);for(let Pe=0;Pe<pe.length;Pe++){const je=pe[Pe];let Ke=null;if(p!==null)Ke=p.getViewport(je);else{const Ge=f.getViewSubImage(d,je);Ke=Ge.viewport,Pe===0&&(e.setRenderTargetTextures(C,Ge.colorTexture,d.ignoreDepthValues?void 0:Ge.depthStencilTexture),e.setRenderTarget(C))}let Ie=D[Pe];Ie===void 0&&(Ie=new Qi,Ie.layers.enable(Pe),Ie.viewport=new Cr,D[Pe]=Ie),Ie.matrix.fromArray(je.transform.matrix),Ie.matrix.decompose(Ie.position,Ie.quaternion,Ie.scale),Ie.projectionMatrix.fromArray(je.projectionMatrix),Ie.projectionMatrixInverse.copy(Ie.projectionMatrix).invert(),Ie.viewport.set(Ke.x,Ke.y,Ke.width,Ke.height),Pe===0&&(E.matrix.copy(Ie.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),we===!0&&E.cameras.push(Ie)}const ke=i.enabledFeatures;if(ke&&ke.includes("depth-sensing")){const Pe=f.getDepthInformation(pe[0]);Pe&&Pe.isValid&&Pe.texture&&_.init(e,Pe,i.renderState)}}for(let pe=0;pe<M.length;pe++){const we=A[pe],ke=M[pe];we!==null&&ke!==void 0&&ke.update(we,ge,c||a)}J&&J($,ge),ge.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:ge}),g=null}const he=new MJ;he.setAnimationLoop(ie),this.setAnimationLoop=function($){J=$},this.dispose=function(){}}}const Xp=new ml,Jxe=new Nn;function Xxe(r,e){function t(w,b){w.matrixAutoUpdate===!0&&w.updateMatrix(),b.value.copy(w.matrix)}function n(w,b){b.color.getRGB(w.fogColor.value,PY(r)),b.isFog?(w.fogNear.value=b.near,w.fogFar.value=b.far):b.isFogExp2&&(w.fogDensity.value=b.density)}function i(w,b,C,M,A){b.isMeshBasicMaterial||b.isMeshLambertMaterial?s(w,b):b.isMeshToonMaterial?(s(w,b),f(w,b)):b.isMeshPhongMaterial?(s(w,b),u(w,b)):b.isMeshStandardMaterial?(s(w,b),d(w,b),b.isMeshPhysicalMaterial&&p(w,b,A)):b.isMeshMatcapMaterial?(s(w,b),g(w,b)):b.isMeshDepthMaterial?s(w,b):b.isMeshDistanceMaterial?(s(w,b),_(w,b)):b.isMeshNormalMaterial?s(w,b):b.isLineBasicMaterial?(a(w,b),b.isLineDashedMaterial&&o(w,b)):b.isPointsMaterial?l(w,b,C,M):b.isSpriteMaterial?c(w,b):b.isShadowMaterial?(w.color.value.copy(b.color),w.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function s(w,b){w.opacity.value=b.opacity,b.color&&w.diffuse.value.copy(b.color),b.emissive&&w.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(w.map.value=b.map,t(b.map,w.mapTransform)),b.alphaMap&&(w.alphaMap.value=b.alphaMap,t(b.alphaMap,w.alphaMapTransform)),b.bumpMap&&(w.bumpMap.value=b.bumpMap,t(b.bumpMap,w.bumpMapTransform),w.bumpScale.value=b.bumpScale,b.side===vo&&(w.bumpScale.value*=-1)),b.normalMap&&(w.normalMap.value=b.normalMap,t(b.normalMap,w.normalMapTransform),w.normalScale.value.copy(b.normalScale),b.side===vo&&w.normalScale.value.negate()),b.displacementMap&&(w.displacementMap.value=b.displacementMap,t(b.displacementMap,w.displacementMapTransform),w.displacementScale.value=b.displacementScale,w.displacementBias.value=b.displacementBias),b.emissiveMap&&(w.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,w.emissiveMapTransform)),b.specularMap&&(w.specularMap.value=b.specularMap,t(b.specularMap,w.specularMapTransform)),b.alphaTest>0&&(w.alphaTest.value=b.alphaTest);const C=e.get(b),M=C.envMap,A=C.envMapRotation;M&&(w.envMap.value=M,Xp.copy(A),Xp.x*=-1,Xp.y*=-1,Xp.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(Xp.y*=-1,Xp.z*=-1),w.envMapRotation.value.setFromMatrix4(Jxe.makeRotationFromEuler(Xp)),w.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=b.reflectivity,w.ior.value=b.ior,w.refractionRatio.value=b.refractionRatio),b.lightMap&&(w.lightMap.value=b.lightMap,w.lightMapIntensity.value=b.lightMapIntensity,t(b.lightMap,w.lightMapTransform)),b.aoMap&&(w.aoMap.value=b.aoMap,w.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,w.aoMapTransform))}function a(w,b){w.diffuse.value.copy(b.color),w.opacity.value=b.opacity,b.map&&(w.map.value=b.map,t(b.map,w.mapTransform))}function o(w,b){w.dashSize.value=b.dashSize,w.totalSize.value=b.dashSize+b.gapSize,w.scale.value=b.scale}function l(w,b,C,M){w.diffuse.value.copy(b.color),w.opacity.value=b.opacity,w.size.value=b.size*C,w.scale.value=M*.5,b.map&&(w.map.value=b.map,t(b.map,w.uvTransform)),b.alphaMap&&(w.alphaMap.value=b.alphaMap,t(b.alphaMap,w.alphaMapTransform)),b.alphaTest>0&&(w.alphaTest.value=b.alphaTest)}function c(w,b){w.diffuse.value.copy(b.color),w.opacity.value=b.opacity,w.rotation.value=b.rotation,b.map&&(w.map.value=b.map,t(b.map,w.mapTransform)),b.alphaMap&&(w.alphaMap.value=b.alphaMap,t(b.alphaMap,w.alphaMapTransform)),b.alphaTest>0&&(w.alphaTest.value=b.alphaTest)}function u(w,b){w.specular.value.copy(b.specular),w.shininess.value=Math.max(b.shininess,1e-4)}function f(w,b){b.gradientMap&&(w.gradientMap.value=b.gradientMap)}function d(w,b){w.metalness.value=b.metalness,b.metalnessMap&&(w.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,w.metalnessMapTransform)),w.roughness.value=b.roughness,b.roughnessMap&&(w.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,w.roughnessMapTransform)),b.envMap&&(w.envMapIntensity.value=b.envMapIntensity)}function p(w,b,C){w.ior.value=b.ior,b.sheen>0&&(w.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),w.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(w.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,w.sheenColorMapTransform)),b.sheenRoughnessMap&&(w.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,w.sheenRoughnessMapTransform))),b.clearcoat>0&&(w.clearcoat.value=b.clearcoat,w.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(w.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,w.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(w.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===vo&&w.clearcoatNormalScale.value.negate())),b.dispersion>0&&(w.dispersion.value=b.dispersion),b.iridescence>0&&(w.iridescence.value=b.iridescence,w.iridescenceIOR.value=b.iridescenceIOR,w.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(w.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,w.iridescenceMapTransform)),b.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),b.transmission>0&&(w.transmission.value=b.transmission,w.transmissionSamplerMap.value=C.texture,w.transmissionSamplerSize.value.set(C.width,C.height),b.transmissionMap&&(w.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,w.transmissionMapTransform)),w.thickness.value=b.thickness,b.thicknessMap&&(w.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=b.attenuationDistance,w.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(w.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(w.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=b.specularIntensity,w.specularColor.value.copy(b.specularColor),b.specularColorMap&&(w.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,w.specularColorMapTransform)),b.specularIntensityMap&&(w.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,w.specularIntensityMapTransform))}function g(w,b){b.matcap&&(w.matcap.value=b.matcap)}function _(w,b){const C=e.get(b).light;w.referencePosition.value.setFromMatrixPosition(C.matrixWorld),w.nearDistance.value=C.shadow.camera.near,w.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Qxe(r,e,t,n){let i={},s={},a=[];const o=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function l(C,M){const A=M.program;n.uniformBlockBinding(C,A)}function c(C,M){let A=i[C.id];A===void 0&&(g(C),A=u(C),i[C.id]=A,C.addEventListener("dispose",w));const k=M.program;n.updateUBOMapping(C,k);const O=e.render.frame;s[C.id]!==O&&(d(C),s[C.id]=O)}function u(C){const M=f();C.__bindingPointIndex=M;const A=r.createBuffer(),k=C.__size,O=C.usage;return r.bindBuffer(r.UNIFORM_BUFFER,A),r.bufferData(r.UNIFORM_BUFFER,k,O),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,M,A),A}function f(){for(let C=0;C<o;C++)if(a.indexOf(C)===-1)return a.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(C){const M=i[C.id],A=C.uniforms,k=C.__cache;r.bindBuffer(r.UNIFORM_BUFFER,M);for(let O=0,R=A.length;O<R;O++){const I=Array.isArray(A[O])?A[O]:[A[O]];for(let D=0,E=I.length;D<E;D++){const B=I[D];if(p(B,O,D,k)===!0){const U=B.__offset,V=Array.isArray(B.value)?B.value:[B.value];let X=0;for(let te=0;te<V.length;te++){const ee=V[te],ue=_(ee);typeof ee=="number"||typeof ee=="boolean"?(B.__data[0]=ee,r.bufferSubData(r.UNIFORM_BUFFER,U+X,B.__data)):ee.isMatrix3?(B.__data[0]=ee.elements[0],B.__data[1]=ee.elements[1],B.__data[2]=ee.elements[2],B.__data[3]=0,B.__data[4]=ee.elements[3],B.__data[5]=ee.elements[4],B.__data[6]=ee.elements[5],B.__data[7]=0,B.__data[8]=ee.elements[6],B.__data[9]=ee.elements[7],B.__data[10]=ee.elements[8],B.__data[11]=0):(ee.toArray(B.__data,X),X+=ue.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,U,B.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function p(C,M,A,k){const O=C.value,R=M+"_"+A;if(k[R]===void 0)return typeof O=="number"||typeof O=="boolean"?k[R]=O:k[R]=O.clone(),!0;{const I=k[R];if(typeof O=="number"||typeof O=="boolean"){if(I!==O)return k[R]=O,!0}else if(I.equals(O)===!1)return I.copy(O),!0}return!1}function g(C){const M=C.uniforms;let A=0;const k=16;for(let R=0,I=M.length;R<I;R++){const D=Array.isArray(M[R])?M[R]:[M[R]];for(let E=0,B=D.length;E<B;E++){const U=D[E],V=Array.isArray(U.value)?U.value:[U.value];for(let X=0,te=V.length;X<te;X++){const ee=V[X],ue=_(ee),ne=A%k,oe=ne%ue.boundary,q=ne+oe;A+=oe,q!==0&&k-q<ue.storage&&(A+=k-q),U.__data=new Float32Array(ue.storage/Float32Array.BYTES_PER_ELEMENT),U.__offset=A,A+=ue.storage}}}const O=A%k;return O>0&&(A+=k-O),C.__size=A,C.__cache={},this}function _(C){const M={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(M.boundary=4,M.storage=4):C.isVector2?(M.boundary=8,M.storage=8):C.isVector3||C.isColor?(M.boundary=16,M.storage=12):C.isVector4?(M.boundary=16,M.storage=16):C.isMatrix3?(M.boundary=48,M.storage=48):C.isMatrix4?(M.boundary=64,M.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),M}function w(C){const M=C.target;M.removeEventListener("dispose",w);const A=a.indexOf(M.__bindingPointIndex);a.splice(A,1),r.deleteBuffer(i[M.id]),delete i[M.id],delete s[M.id]}function b(){for(const C in i)r.deleteBuffer(i[C]);a=[],i={},s={}}return{bind:l,update:c,dispose:b}}class ER{constructor(e={}){const{canvas:t=DY(),context:n=null,depth:i=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:d=!1}=e;this.isWebGLRenderer=!0;let p;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=n.getContextAttributes().alpha}else p=a;const g=new Uint32Array(4),_=new Int32Array(4);let w=null,b=null;const C=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=co,this.toneMapping=Tu,this.toneMappingExposure=1;const A=this;let k=!1,O=0,R=0,I=null,D=-1,E=null;const B=new Cr,U=new Cr;let V=null;const X=new Kt(0);let te=0,ee=t.width,ue=t.height,ne=1,oe=null,q=null;const J=new Cr(0,0,ee,ue),ie=new Cr(0,0,ee,ue);let he=!1;const $=new ub;let ge=!1,pe=!1;this.transmissionResolutionScale=1;const we=new Nn,ke=new Nn,Pe=new ye,je=new Cr,Ke={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ie=!1;function Ge(){return I===null?ne:1}let ce=n;function _t(ae,Se){return t.getContext(ae,Se)}try{const ae={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${$_}`),t.addEventListener("webglcontextlost",yt,!1),t.addEventListener("webglcontextrestored",Lt,!1),t.addEventListener("webglcontextcreationerror",xt,!1),ce===null){const Se="webgl2";if(ce=_t(Se,ae),ce===null)throw _t(Se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ae){throw console.error("THREE.WebGLRenderer: "+ae.message),ae}let _e,Ne,Ce,He,Ee,Z,W,re,be,ve,Je,$e,it,pt,Ft,Le,at,vt,qe,et,Me,tt,Tt,Ae;function Oe(){_e=new aSe(ce),_e.init(),tt=new LJ(ce,_e),Ne=new eSe(ce,_e,e,tt),Ce=new jxe(ce,_e),Ne.reverseDepthBuffer&&d&&Ce.buffers.depth.setReversed(!0),He=new cSe(ce),Ee=new Txe,Z=new zxe(ce,_e,Ce,Ee,Ne,tt,He),W=new nSe(A),re=new sSe(A),be=new g_e(ce),Tt=new Z2e(ce,be),ve=new oSe(ce,be,He,Tt),Je=new fSe(ce,ve,be,He),qe=new uSe(ce,Ne,Z),Le=new tSe(Ee),$e=new Axe(A,W,re,_e,Ne,Tt,Le),it=new Xxe(A,Ee),pt=new Ixe,Ft=new Pxe(_e),vt=new q2e(A,W,re,Ce,Je,p,l),at=new Bxe(A,Je,Ne),Ae=new Qxe(ce,He,Ne,Ce),et=new $2e(ce,_e,He),Me=new lSe(ce,_e,He),He.programs=$e.programs,A.capabilities=Ne,A.extensions=_e,A.properties=Ee,A.renderLists=pt,A.shadowMap=at,A.state=Ce,A.info=He}Oe();const Ye=new Yxe(A,ce);this.xr=Ye,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const ae=_e.get("WEBGL_lose_context");ae&&ae.loseContext()},this.forceContextRestore=function(){const ae=_e.get("WEBGL_lose_context");ae&&ae.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(ae){ae!==void 0&&(ne=ae,this.setSize(ee,ue,!1))},this.getSize=function(ae){return ae.set(ee,ue)},this.setSize=function(ae,Se,De=!0){if(Ye.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ee=ae,ue=Se,t.width=Math.floor(ae*ne),t.height=Math.floor(Se*ne),De===!0&&(t.style.width=ae+"px",t.style.height=Se+"px"),this.setViewport(0,0,ae,Se)},this.getDrawingBufferSize=function(ae){return ae.set(ee*ne,ue*ne).floor()},this.setDrawingBufferSize=function(ae,Se,De){ee=ae,ue=Se,ne=De,t.width=Math.floor(ae*De),t.height=Math.floor(Se*De),this.setViewport(0,0,ae,Se)},this.getCurrentViewport=function(ae){return ae.copy(B)},this.getViewport=function(ae){return ae.copy(J)},this.setViewport=function(ae,Se,De,me){ae.isVector4?J.set(ae.x,ae.y,ae.z,ae.w):J.set(ae,Se,De,me),Ce.viewport(B.copy(J).multiplyScalar(ne).round())},this.getScissor=function(ae){return ae.copy(ie)},this.setScissor=function(ae,Se,De,me){ae.isVector4?ie.set(ae.x,ae.y,ae.z,ae.w):ie.set(ae,Se,De,me),Ce.scissor(U.copy(ie).multiplyScalar(ne).round())},this.getScissorTest=function(){return he},this.setScissorTest=function(ae){Ce.setScissorTest(he=ae)},this.setOpaqueSort=function(ae){oe=ae},this.setTransparentSort=function(ae){q=ae},this.getClearColor=function(ae){return ae.copy(vt.getClearColor())},this.setClearColor=function(){vt.setClearColor.apply(vt,arguments)},this.getClearAlpha=function(){return vt.getClearAlpha()},this.setClearAlpha=function(){vt.setClearAlpha.apply(vt,arguments)},this.clear=function(ae=!0,Se=!0,De=!0){let me=0;if(ae){let Fe=!1;if(I!==null){const st=I.texture.format;Fe=st===YA||st===WA||st===rb}if(Fe){const st=I.texture.type,dt=st===jo||st===Pu||st===W1||st===Jm||st===GA||st===HA,Ct=vt.getClearColor(),It=vt.getClearAlpha(),Gt=Ct.r,Ut=Ct.g,Et=Ct.b;dt?(g[0]=Gt,g[1]=Ut,g[2]=Et,g[3]=It,ce.clearBufferuiv(ce.COLOR,0,g)):(_[0]=Gt,_[1]=Ut,_[2]=Et,_[3]=It,ce.clearBufferiv(ce.COLOR,0,_))}else me|=ce.COLOR_BUFFER_BIT}Se&&(me|=ce.DEPTH_BUFFER_BIT),De&&(me|=ce.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ce.clear(me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",yt,!1),t.removeEventListener("webglcontextrestored",Lt,!1),t.removeEventListener("webglcontextcreationerror",xt,!1),vt.dispose(),pt.dispose(),Ft.dispose(),Ee.dispose(),W.dispose(),re.dispose(),Je.dispose(),Tt.dispose(),Ae.dispose(),$e.dispose(),Ye.dispose(),Ye.removeEventListener("sessionstart",Dt),Ye.removeEventListener("sessionend",nn),Fn.stop()};function yt(ae){ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function Lt(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const ae=He.autoReset,Se=at.enabled,De=at.autoUpdate,me=at.needsUpdate,Fe=at.type;Oe(),He.autoReset=ae,at.enabled=Se,at.autoUpdate=De,at.needsUpdate=me,at.type=Fe}function xt(ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ae.statusMessage)}function Yt(ae){const Se=ae.target;Se.removeEventListener("dispose",Yt),on(Se)}function on(ae){Zt(ae),Ee.remove(ae)}function Zt(ae){const Se=Ee.get(ae).programs;Se!==void 0&&(Se.forEach(function(De){$e.releaseProgram(De)}),ae.isShaderMaterial&&$e.releaseShaderCache(ae))}this.renderBufferDirect=function(ae,Se,De,me,Fe,st){Se===null&&(Se=Ke);const dt=Fe.isMesh&&Fe.matrixWorld.determinant()<0,Ct=Re(ae,Se,De,me,Fe);Ce.setMaterial(me,dt);let It=De.index,Gt=1;if(me.wireframe===!0){if(It=ve.getWireframeAttribute(De),It===void 0)return;Gt=2}const Ut=De.drawRange,Et=De.attributes.position;let Jt=Ut.start*Gt,Wt=(Ut.start+Ut.count)*Gt;st!==null&&(Jt=Math.max(Jt,st.start*Gt),Wt=Math.min(Wt,(st.start+st.count)*Gt)),It!==null?(Jt=Math.max(Jt,0),Wt=Math.min(Wt,It.count)):Et!=null&&(Jt=Math.max(Jt,0),Wt=Math.min(Wt,Et.count));const Mn=Wt-Jt;if(Mn<0||Mn===1/0)return;Tt.setup(Fe,me,Ct,De,It);let sn,fn=et;if(It!==null&&(sn=be.get(It),fn=Me,fn.setIndex(sn)),Fe.isMesh)me.wireframe===!0?(Ce.setLineWidth(me.wireframeLinewidth*Ge()),fn.setMode(ce.LINES)):fn.setMode(ce.TRIANGLES);else if(Fe.isLine){let Qt=me.linewidth;Qt===void 0&&(Qt=1),Ce.setLineWidth(Qt*Ge()),Fe.isLineSegments?fn.setMode(ce.LINES):Fe.isLineLoop?fn.setMode(ce.LINE_LOOP):fn.setMode(ce.LINE_STRIP)}else Fe.isPoints?fn.setMode(ce.POINTS):Fe.isSprite&&fn.setMode(ce.TRIANGLES);if(Fe.isBatchedMesh)if(Fe._multiDrawInstances!==null)fn.renderMultiDrawInstances(Fe._multiDrawStarts,Fe._multiDrawCounts,Fe._multiDrawCount,Fe._multiDrawInstances);else if(_e.get("WEBGL_multi_draw"))fn.renderMultiDraw(Fe._multiDrawStarts,Fe._multiDrawCounts,Fe._multiDrawCount);else{const Qt=Fe._multiDrawStarts,Bn=Fe._multiDrawCounts,pn=Fe._multiDrawCount,In=It?be.get(It).bytesPerElement:1,Ar=Ee.get(me).currentProgram.getUniforms();for(let An=0;An<pn;An++)Ar.setValue(ce,"_gl_DrawID",An),fn.render(Qt[An]/In,Bn[An])}else if(Fe.isInstancedMesh)fn.renderInstances(Jt,Mn,Fe.count);else if(De.isInstancedBufferGeometry){const Qt=De._maxInstanceCount!==void 0?De._maxInstanceCount:1/0,Bn=Math.min(De.instanceCount,Qt);fn.renderInstances(Jt,Mn,Bn)}else fn.render(Jt,Mn)};function qt(ae,Se,De){ae.transparent===!0&&ae.side===ll&&ae.forceSinglePass===!1?(ae.side=vo,ae.needsUpdate=!0,Ii(ae,Se,De),ae.side=ku,ae.needsUpdate=!0,Ii(ae,Se,De),ae.side=ll):Ii(ae,Se,De)}this.compile=function(ae,Se,De=null){De===null&&(De=ae),b=Ft.get(De),b.init(Se),M.push(b),De.traverseVisible(function(Fe){Fe.isLight&&Fe.layers.test(Se.layers)&&(b.pushLight(Fe),Fe.castShadow&&b.pushShadow(Fe))}),ae!==De&&ae.traverseVisible(function(Fe){Fe.isLight&&Fe.layers.test(Se.layers)&&(b.pushLight(Fe),Fe.castShadow&&b.pushShadow(Fe))}),b.setupLights();const me=new Set;return ae.traverse(function(Fe){if(!(Fe.isMesh||Fe.isPoints||Fe.isLine||Fe.isSprite))return;const st=Fe.material;if(st)if(Array.isArray(st))for(let dt=0;dt<st.length;dt++){const Ct=st[dt];qt(Ct,De,Fe),me.add(Ct)}else qt(st,De,Fe),me.add(st)}),M.pop(),b=null,me},this.compileAsync=function(ae,Se,De=null){const me=this.compile(ae,Se,De);return new Promise(Fe=>{function st(){if(me.forEach(function(dt){Ee.get(dt).currentProgram.isReady()&&me.delete(dt)}),me.size===0){Fe(ae);return}setTimeout(st,10)}_e.get("KHR_parallel_shader_compile")!==null?st():setTimeout(st,10)})};let Xe=null;function ot(ae){Xe&&Xe(ae)}function Dt(){Fn.stop()}function nn(){Fn.start()}const Fn=new MJ;Fn.setAnimationLoop(ot),typeof self<"u"&&Fn.setContext(self),this.setAnimationLoop=function(ae){Xe=ae,Ye.setAnimationLoop(ae),ae===null?Fn.stop():Fn.start()},Ye.addEventListener("sessionstart",Dt),Ye.addEventListener("sessionend",nn),this.render=function(ae,Se){if(Se!==void 0&&Se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(k===!0)return;if(ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),Se.parent===null&&Se.matrixWorldAutoUpdate===!0&&Se.updateMatrixWorld(),Ye.enabled===!0&&Ye.isPresenting===!0&&(Ye.cameraAutoUpdate===!0&&Ye.updateCamera(Se),Se=Ye.getCamera()),ae.isScene===!0&&ae.onBeforeRender(A,ae,Se,I),b=Ft.get(ae,M.length),b.init(Se),M.push(b),ke.multiplyMatrices(Se.projectionMatrix,Se.matrixWorldInverse),$.setFromProjectionMatrix(ke),pe=this.localClippingEnabled,ge=Le.init(this.clippingPlanes,pe),w=pt.get(ae,C.length),w.init(),C.push(w),Ye.enabled===!0&&Ye.isPresenting===!0){const st=A.xr.getDepthSensingMesh();st!==null&&Or(st,Se,-1/0,A.sortObjects)}Or(ae,Se,0,A.sortObjects),w.finish(),A.sortObjects===!0&&w.sort(oe,q),Ie=Ye.enabled===!1||Ye.isPresenting===!1||Ye.hasDepthSensing()===!1,Ie&&vt.addToRenderList(w,ae),this.info.render.frame++,ge===!0&&Le.beginShadows();const De=b.state.shadowsArray;at.render(De,ae,Se),ge===!0&&Le.endShadows(),this.info.autoReset===!0&&this.info.reset();const me=w.opaque,Fe=w.transmissive;if(b.setupLights(),Se.isArrayCamera){const st=Se.cameras;if(Fe.length>0)for(let dt=0,Ct=st.length;dt<Ct;dt++){const It=st[dt];sr(me,Fe,ae,It)}Ie&&vt.render(ae);for(let dt=0,Ct=st.length;dt<Ct;dt++){const It=st[dt];Yn(w,ae,It,It.viewport)}}else Fe.length>0&&sr(me,Fe,ae,Se),Ie&&vt.render(ae),Yn(w,ae,Se);I!==null&&R===0&&(Z.updateMultisampleRenderTarget(I),Z.updateRenderTargetMipmap(I)),ae.isScene===!0&&ae.onAfterRender(A,ae,Se),Tt.resetDefaultState(),D=-1,E=null,M.pop(),M.length>0?(b=M[M.length-1],ge===!0&&Le.setGlobalState(A.clippingPlanes,b.state.camera)):b=null,C.pop(),C.length>0?w=C[C.length-1]:w=null};function Or(ae,Se,De,me){if(ae.visible===!1)return;if(ae.layers.test(Se.layers)){if(ae.isGroup)De=ae.renderOrder;else if(ae.isLOD)ae.autoUpdate===!0&&ae.update(Se);else if(ae.isLight)b.pushLight(ae),ae.castShadow&&b.pushShadow(ae);else if(ae.isSprite){if(!ae.frustumCulled||$.intersectsSprite(ae)){me&&je.setFromMatrixPosition(ae.matrixWorld).applyMatrix4(ke);const dt=Je.update(ae),Ct=ae.material;Ct.visible&&w.push(ae,dt,Ct,De,je.z,null)}}else if((ae.isMesh||ae.isLine||ae.isPoints)&&(!ae.frustumCulled||$.intersectsObject(ae))){const dt=Je.update(ae),Ct=ae.material;if(me&&(ae.boundingSphere!==void 0?(ae.boundingSphere===null&&ae.computeBoundingSphere(),je.copy(ae.boundingSphere.center)):(dt.boundingSphere===null&&dt.computeBoundingSphere(),je.copy(dt.boundingSphere.center)),je.applyMatrix4(ae.matrixWorld).applyMatrix4(ke)),Array.isArray(Ct)){const It=dt.groups;for(let Gt=0,Ut=It.length;Gt<Ut;Gt++){const Et=It[Gt],Jt=Ct[Et.materialIndex];Jt&&Jt.visible&&w.push(ae,dt,Jt,De,je.z,Et)}}else Ct.visible&&w.push(ae,dt,Ct,De,je.z,null)}}const st=ae.children;for(let dt=0,Ct=st.length;dt<Ct;dt++)Or(st[dt],Se,De,me)}function Yn(ae,Se,De,me){const Fe=ae.opaque,st=ae.transmissive,dt=ae.transparent;b.setupLightsView(De),ge===!0&&Le.setGlobalState(A.clippingPlanes,De),me&&Ce.viewport(B.copy(me)),Fe.length>0&&xn(Fe,Se,De),st.length>0&&xn(st,Se,De),dt.length>0&&xn(dt,Se,De),Ce.buffers.depth.setTest(!0),Ce.buffers.depth.setMask(!0),Ce.buffers.color.setMask(!0),Ce.setPolygonOffset(!1)}function sr(ae,Se,De,me){if((De.isScene===!0?De.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[me.id]===void 0&&(b.state.transmissionRenderTarget[me.id]=new pl(1,1,{generateMipmaps:!0,type:_e.has("EXT_color_buffer_half_float")||_e.has("EXT_color_buffer_float")?ks:jo,minFilter:zl,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Nr.workingColorSpace}));const st=b.state.transmissionRenderTarget[me.id],dt=me.viewport||B;st.setSize(dt.z*A.transmissionResolutionScale,dt.w*A.transmissionResolutionScale);const Ct=A.getRenderTarget();A.setRenderTarget(st),A.getClearColor(X),te=A.getClearAlpha(),te<1&&A.setClearColor(16777215,.5),A.clear(),Ie&&vt.render(De);const It=A.toneMapping;A.toneMapping=Tu;const Gt=me.viewport;if(me.viewport!==void 0&&(me.viewport=void 0),b.setupLightsView(me),ge===!0&&Le.setGlobalState(A.clippingPlanes,me),xn(ae,De,me),Z.updateMultisampleRenderTarget(st),Z.updateRenderTargetMipmap(st),_e.has("WEBGL_multisampled_render_to_texture")===!1){let Ut=!1;for(let Et=0,Jt=Se.length;Et<Jt;Et++){const Wt=Se[Et],Mn=Wt.object,sn=Wt.geometry,fn=Wt.material,Qt=Wt.group;if(fn.side===ll&&Mn.layers.test(me.layers)){const Bn=fn.side;fn.side=vo,fn.needsUpdate=!0,ni(Mn,De,me,sn,fn,Qt),fn.side=Bn,fn.needsUpdate=!0,Ut=!0}}Ut===!0&&(Z.updateMultisampleRenderTarget(st),Z.updateRenderTargetMipmap(st))}A.setRenderTarget(Ct),A.setClearColor(X,te),Gt!==void 0&&(me.viewport=Gt),A.toneMapping=It}function xn(ae,Se,De){const me=Se.isScene===!0?Se.overrideMaterial:null;for(let Fe=0,st=ae.length;Fe<st;Fe++){const dt=ae[Fe],Ct=dt.object,It=dt.geometry,Gt=me===null?dt.material:me,Ut=dt.group;Ct.layers.test(De.layers)&&ni(Ct,Se,De,It,Gt,Ut)}}function ni(ae,Se,De,me,Fe,st){ae.onBeforeRender(A,Se,De,me,Fe,st),ae.modelViewMatrix.multiplyMatrices(De.matrixWorldInverse,ae.matrixWorld),ae.normalMatrix.getNormalMatrix(ae.modelViewMatrix),Fe.onBeforeRender(A,Se,De,me,ae,st),Fe.transparent===!0&&Fe.side===ll&&Fe.forceSinglePass===!1?(Fe.side=vo,Fe.needsUpdate=!0,A.renderBufferDirect(De,Se,me,Fe,ae,st),Fe.side=ku,Fe.needsUpdate=!0,A.renderBufferDirect(De,Se,me,Fe,ae,st),Fe.side=ll):A.renderBufferDirect(De,Se,me,Fe,ae,st),ae.onAfterRender(A,Se,De,me,Fe,st)}function Ii(ae,Se,De){Se.isScene!==!0&&(Se=Ke);const me=Ee.get(ae),Fe=b.state.lights,st=b.state.shadowsArray,dt=Fe.state.version,Ct=$e.getParameters(ae,Fe.state,st,Se,De),It=$e.getProgramCacheKey(Ct);let Gt=me.programs;me.environment=ae.isMeshStandardMaterial?Se.environment:null,me.fog=Se.fog,me.envMap=(ae.isMeshStandardMaterial?re:W).get(ae.envMap||me.environment),me.envMapRotation=me.environment!==null&&ae.envMap===null?Se.environmentRotation:ae.envMapRotation,Gt===void 0&&(ae.addEventListener("dispose",Yt),Gt=new Map,me.programs=Gt);let Ut=Gt.get(It);if(Ut!==void 0){if(me.currentProgram===Ut&&me.lightsStateVersion===dt)return fe(ae,Ct),Ut}else Ct.uniforms=$e.getUniforms(ae),ae.onBeforeCompile(Ct,A),Ut=$e.acquireProgram(Ct,It),Gt.set(It,Ut),me.uniforms=Ct.uniforms;const Et=me.uniforms;return(!ae.isShaderMaterial&&!ae.isRawShaderMaterial||ae.clipping===!0)&&(Et.clippingPlanes=Le.uniform),fe(ae,Ct),me.needsLights=mt(ae),me.lightsStateVersion=dt,me.needsLights&&(Et.ambientLightColor.value=Fe.state.ambient,Et.lightProbe.value=Fe.state.probe,Et.directionalLights.value=Fe.state.directional,Et.directionalLightShadows.value=Fe.state.directionalShadow,Et.spotLights.value=Fe.state.spot,Et.spotLightShadows.value=Fe.state.spotShadow,Et.rectAreaLights.value=Fe.state.rectArea,Et.ltc_1.value=Fe.state.rectAreaLTC1,Et.ltc_2.value=Fe.state.rectAreaLTC2,Et.pointLights.value=Fe.state.point,Et.pointLightShadows.value=Fe.state.pointShadow,Et.hemisphereLights.value=Fe.state.hemi,Et.directionalShadowMap.value=Fe.state.directionalShadowMap,Et.directionalShadowMatrix.value=Fe.state.directionalShadowMatrix,Et.spotShadowMap.value=Fe.state.spotShadowMap,Et.spotLightMatrix.value=Fe.state.spotLightMatrix,Et.spotLightMap.value=Fe.state.spotLightMap,Et.pointShadowMap.value=Fe.state.pointShadowMap,Et.pointShadowMatrix.value=Fe.state.pointShadowMatrix),me.currentProgram=Ut,me.uniformsList=null,Ut}function se(ae){if(ae.uniformsList===null){const Se=ae.currentProgram.getUniforms();ae.uniformsList=Ix.seqWithValue(Se.seq,ae.uniforms)}return ae.uniformsList}function fe(ae,Se){const De=Ee.get(ae);De.outputColorSpace=Se.outputColorSpace,De.batching=Se.batching,De.batchingColor=Se.batchingColor,De.instancing=Se.instancing,De.instancingColor=Se.instancingColor,De.instancingMorph=Se.instancingMorph,De.skinning=Se.skinning,De.morphTargets=Se.morphTargets,De.morphNormals=Se.morphNormals,De.morphColors=Se.morphColors,De.morphTargetsCount=Se.morphTargetsCount,De.numClippingPlanes=Se.numClippingPlanes,De.numIntersection=Se.numClipIntersection,De.vertexAlphas=Se.vertexAlphas,De.vertexTangents=Se.vertexTangents,De.toneMapping=Se.toneMapping}function Re(ae,Se,De,me,Fe){Se.isScene!==!0&&(Se=Ke),Z.resetTextureUnits();const st=Se.fog,dt=me.isMeshStandardMaterial?Se.environment:null,Ct=I===null?A.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:Ou,It=(me.isMeshStandardMaterial?re:W).get(me.envMap||dt),Gt=me.vertexColors===!0&&!!De.attributes.color&&De.attributes.color.itemSize===4,Ut=!!De.attributes.tangent&&(!!me.normalMap||me.anisotropy>0),Et=!!De.morphAttributes.position,Jt=!!De.morphAttributes.normal,Wt=!!De.morphAttributes.color;let Mn=Tu;me.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(Mn=A.toneMapping);const sn=De.morphAttributes.position||De.morphAttributes.normal||De.morphAttributes.color,fn=sn!==void 0?sn.length:0,Qt=Ee.get(me),Bn=b.state.lights;if(ge===!0&&(pe===!0||ae!==E)){const Tn=ae===E&&me.id===D;Le.setState(me,ae,Tn)}let pn=!1;me.version===Qt.__version?(Qt.needsLights&&Qt.lightsStateVersion!==Bn.state.version||Qt.outputColorSpace!==Ct||Fe.isBatchedMesh&&Qt.batching===!1||!Fe.isBatchedMesh&&Qt.batching===!0||Fe.isBatchedMesh&&Qt.batchingColor===!0&&Fe.colorTexture===null||Fe.isBatchedMesh&&Qt.batchingColor===!1&&Fe.colorTexture!==null||Fe.isInstancedMesh&&Qt.instancing===!1||!Fe.isInstancedMesh&&Qt.instancing===!0||Fe.isSkinnedMesh&&Qt.skinning===!1||!Fe.isSkinnedMesh&&Qt.skinning===!0||Fe.isInstancedMesh&&Qt.instancingColor===!0&&Fe.instanceColor===null||Fe.isInstancedMesh&&Qt.instancingColor===!1&&Fe.instanceColor!==null||Fe.isInstancedMesh&&Qt.instancingMorph===!0&&Fe.morphTexture===null||Fe.isInstancedMesh&&Qt.instancingMorph===!1&&Fe.morphTexture!==null||Qt.envMap!==It||me.fog===!0&&Qt.fog!==st||Qt.numClippingPlanes!==void 0&&(Qt.numClippingPlanes!==Le.numPlanes||Qt.numIntersection!==Le.numIntersection)||Qt.vertexAlphas!==Gt||Qt.vertexTangents!==Ut||Qt.morphTargets!==Et||Qt.morphNormals!==Jt||Qt.morphColors!==Wt||Qt.toneMapping!==Mn||Qt.morphTargetsCount!==fn)&&(pn=!0):(pn=!0,Qt.__version=me.version);let In=Qt.currentProgram;pn===!0&&(In=Ii(me,Se,Fe));let Ar=!1,An=!1,gn=!1;const Sn=In.getUniforms(),gr=Qt.uniforms;if(Ce.useProgram(In.program)&&(Ar=!0,An=!0,gn=!0),me.id!==D&&(D=me.id,An=!0),Ar||E!==ae){Ce.buffers.depth.getReversed()?(we.copy(ae.projectionMatrix),Jve(we),Xve(we),Sn.setValue(ce,"projectionMatrix",we)):Sn.setValue(ce,"projectionMatrix",ae.projectionMatrix),Sn.setValue(ce,"viewMatrix",ae.matrixWorldInverse);const Dr=Sn.map.cameraPosition;Dr!==void 0&&Dr.setValue(ce,Pe.setFromMatrixPosition(ae.matrixWorld)),Ne.logarithmicDepthBuffer&&Sn.setValue(ce,"logDepthBufFC",2/(Math.log(ae.far+1)/Math.LN2)),(me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshLambertMaterial||me.isMeshBasicMaterial||me.isMeshStandardMaterial||me.isShaderMaterial)&&Sn.setValue(ce,"isOrthographic",ae.isOrthographicCamera===!0),E!==ae&&(E=ae,An=!0,gn=!0)}if(Fe.isSkinnedMesh){Sn.setOptional(ce,Fe,"bindMatrix"),Sn.setOptional(ce,Fe,"bindMatrixInverse");const Tn=Fe.skeleton;Tn&&(Tn.boneTexture===null&&Tn.computeBoneTexture(),Sn.setValue(ce,"boneTexture",Tn.boneTexture,Z))}Fe.isBatchedMesh&&(Sn.setOptional(ce,Fe,"batchingTexture"),Sn.setValue(ce,"batchingTexture",Fe._matricesTexture,Z),Sn.setOptional(ce,Fe,"batchingIdTexture"),Sn.setValue(ce,"batchingIdTexture",Fe._indirectTexture,Z),Sn.setOptional(ce,Fe,"batchingColorTexture"),Fe._colorsTexture!==null&&Sn.setValue(ce,"batchingColorTexture",Fe._colorsTexture,Z));const qn=De.morphAttributes;if((qn.position!==void 0||qn.normal!==void 0||qn.color!==void 0)&&qe.update(Fe,De,In),(An||Qt.receiveShadow!==Fe.receiveShadow)&&(Qt.receiveShadow=Fe.receiveShadow,Sn.setValue(ce,"receiveShadow",Fe.receiveShadow)),me.isMeshGouraudMaterial&&me.envMap!==null&&(gr.envMap.value=It,gr.flipEnvMap.value=It.isCubeTexture&&It.isRenderTargetTexture===!1?-1:1),me.isMeshStandardMaterial&&me.envMap===null&&Se.environment!==null&&(gr.envMapIntensity.value=Se.environmentIntensity),An&&(Sn.setValue(ce,"toneMappingExposure",A.toneMappingExposure),Qt.needsLights&&nt(gr,gn),st&&me.fog===!0&&it.refreshFogUniforms(gr,st),it.refreshMaterialUniforms(gr,me,ne,ue,b.state.transmissionRenderTarget[ae.id]),Ix.upload(ce,se(Qt),gr,Z)),me.isShaderMaterial&&me.uniformsNeedUpdate===!0&&(Ix.upload(ce,se(Qt),gr,Z),me.uniformsNeedUpdate=!1),me.isSpriteMaterial&&Sn.setValue(ce,"center",Fe.center),Sn.setValue(ce,"modelViewMatrix",Fe.modelViewMatrix),Sn.setValue(ce,"normalMatrix",Fe.normalMatrix),Sn.setValue(ce,"modelMatrix",Fe.matrixWorld),me.isShaderMaterial||me.isRawShaderMaterial){const Tn=me.uniformsGroups;for(let Dr=0,Un=Tn.length;Dr<Un;Dr++){const ai=Tn[Dr];Ae.update(ai,In),Ae.bind(ai,In)}}return In}function nt(ae,Se){ae.ambientLightColor.needsUpdate=Se,ae.lightProbe.needsUpdate=Se,ae.directionalLights.needsUpdate=Se,ae.directionalLightShadows.needsUpdate=Se,ae.pointLights.needsUpdate=Se,ae.pointLightShadows.needsUpdate=Se,ae.spotLights.needsUpdate=Se,ae.spotLightShadows.needsUpdate=Se,ae.rectAreaLights.needsUpdate=Se,ae.hemisphereLights.needsUpdate=Se}function mt(ae){return ae.isMeshLambertMaterial||ae.isMeshToonMaterial||ae.isMeshPhongMaterial||ae.isMeshStandardMaterial||ae.isShadowMaterial||ae.isShaderMaterial&&ae.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(ae,Se,De){Ee.get(ae.texture).__webglTexture=Se,Ee.get(ae.depthTexture).__webglTexture=De;const me=Ee.get(ae);me.__hasExternalTextures=!0,me.__autoAllocateDepthBuffer=De===void 0,me.__autoAllocateDepthBuffer||_e.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),me.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(ae,Se){const De=Ee.get(ae);De.__webglFramebuffer=Se,De.__useDefaultFramebuffer=Se===void 0};const gt=ce.createFramebuffer();this.setRenderTarget=function(ae,Se=0,De=0){I=ae,O=Se,R=De;let me=!0,Fe=null,st=!1,dt=!1;if(ae){const It=Ee.get(ae);if(It.__useDefaultFramebuffer!==void 0)Ce.bindFramebuffer(ce.FRAMEBUFFER,null),me=!1;else if(It.__webglFramebuffer===void 0)Z.setupRenderTarget(ae);else if(It.__hasExternalTextures)Z.rebindTextures(ae,Ee.get(ae.texture).__webglTexture,Ee.get(ae.depthTexture).__webglTexture);else if(ae.depthBuffer){const Et=ae.depthTexture;if(It.__boundDepthTexture!==Et){if(Et!==null&&Ee.has(Et)&&(ae.width!==Et.image.width||ae.height!==Et.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Z.setupDepthRenderbuffer(ae)}}const Gt=ae.texture;(Gt.isData3DTexture||Gt.isDataArrayTexture||Gt.isCompressedArrayTexture)&&(dt=!0);const Ut=Ee.get(ae).__webglFramebuffer;ae.isWebGLCubeRenderTarget?(Array.isArray(Ut[Se])?Fe=Ut[Se][De]:Fe=Ut[Se],st=!0):ae.samples>0&&Z.useMultisampledRTT(ae)===!1?Fe=Ee.get(ae).__webglMultisampledFramebuffer:Array.isArray(Ut)?Fe=Ut[De]:Fe=Ut,B.copy(ae.viewport),U.copy(ae.scissor),V=ae.scissorTest}else B.copy(J).multiplyScalar(ne).floor(),U.copy(ie).multiplyScalar(ne).floor(),V=he;if(De!==0&&(Fe=gt),Ce.bindFramebuffer(ce.FRAMEBUFFER,Fe)&&me&&Ce.drawBuffers(ae,Fe),Ce.viewport(B),Ce.scissor(U),Ce.setScissorTest(V),st){const It=Ee.get(ae.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_CUBE_MAP_POSITIVE_X+Se,It.__webglTexture,De)}else if(dt){const It=Ee.get(ae.texture),Gt=Se;ce.framebufferTextureLayer(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,It.__webglTexture,De,Gt)}else if(ae!==null&&De!==0){const It=Ee.get(ae.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,It.__webglTexture,De)}D=-1},this.readRenderTargetPixels=function(ae,Se,De,me,Fe,st,dt){if(!(ae&&ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ct=Ee.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&dt!==void 0&&(Ct=Ct[dt]),Ct){Ce.bindFramebuffer(ce.FRAMEBUFFER,Ct);try{const It=ae.texture,Gt=It.format,Ut=It.type;if(!Ne.textureFormatReadable(Gt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ne.textureTypeReadable(Ut)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Se>=0&&Se<=ae.width-me&&De>=0&&De<=ae.height-Fe&&ce.readPixels(Se,De,me,Fe,tt.convert(Gt),tt.convert(Ut),st)}finally{const It=I!==null?Ee.get(I).__webglFramebuffer:null;Ce.bindFramebuffer(ce.FRAMEBUFFER,It)}}},this.readRenderTargetPixelsAsync=async function(ae,Se,De,me,Fe,st,dt){if(!(ae&&ae.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ct=Ee.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&dt!==void 0&&(Ct=Ct[dt]),Ct){const It=ae.texture,Gt=It.format,Ut=It.type;if(!Ne.textureFormatReadable(Gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ne.textureTypeReadable(Ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Se>=0&&Se<=ae.width-me&&De>=0&&De<=ae.height-Fe){Ce.bindFramebuffer(ce.FRAMEBUFFER,Ct);const Et=ce.createBuffer();ce.bindBuffer(ce.PIXEL_PACK_BUFFER,Et),ce.bufferData(ce.PIXEL_PACK_BUFFER,st.byteLength,ce.STREAM_READ),ce.readPixels(Se,De,me,Fe,tt.convert(Gt),tt.convert(Ut),0);const Jt=I!==null?Ee.get(I).__webglFramebuffer:null;Ce.bindFramebuffer(ce.FRAMEBUFFER,Jt);const Wt=ce.fenceSync(ce.SYNC_GPU_COMMANDS_COMPLETE,0);return ce.flush(),await Yve(ce,Wt,4),ce.bindBuffer(ce.PIXEL_PACK_BUFFER,Et),ce.getBufferSubData(ce.PIXEL_PACK_BUFFER,0,st),ce.deleteBuffer(Et),ce.deleteSync(Wt),st}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(ae,Se=null,De=0){ae.isTexture!==!0&&(k0("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Se=arguments[0]||null,ae=arguments[1]);const me=Math.pow(2,-De),Fe=Math.floor(ae.image.width*me),st=Math.floor(ae.image.height*me),dt=Se!==null?Se.x:0,Ct=Se!==null?Se.y:0;Z.setTexture2D(ae,0),ce.copyTexSubImage2D(ce.TEXTURE_2D,De,0,0,dt,Ct,Fe,st),Ce.unbindTexture()};const Ot=ce.createFramebuffer(),kt=ce.createFramebuffer();this.copyTextureToTexture=function(ae,Se,De=null,me=null,Fe=0,st=null){ae.isTexture!==!0&&(k0("WebGLRenderer: copyTextureToTexture function signature has changed."),me=arguments[0]||null,ae=arguments[1],Se=arguments[2],st=arguments[3]||0,De=null),st===null&&(Fe!==0?(k0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),st=Fe,Fe=0):st=0);let dt,Ct,It,Gt,Ut,Et,Jt,Wt,Mn;const sn=ae.isCompressedTexture?ae.mipmaps[st]:ae.image;if(De!==null)dt=De.max.x-De.min.x,Ct=De.max.y-De.min.y,It=De.isBox3?De.max.z-De.min.z:1,Gt=De.min.x,Ut=De.min.y,Et=De.isBox3?De.min.z:0;else{const qn=Math.pow(2,-Fe);dt=Math.floor(sn.width*qn),Ct=Math.floor(sn.height*qn),ae.isDataArrayTexture?It=sn.depth:ae.isData3DTexture?It=Math.floor(sn.depth*qn):It=1,Gt=0,Ut=0,Et=0}me!==null?(Jt=me.x,Wt=me.y,Mn=me.z):(Jt=0,Wt=0,Mn=0);const fn=tt.convert(Se.format),Qt=tt.convert(Se.type);let Bn;Se.isData3DTexture?(Z.setTexture3D(Se,0),Bn=ce.TEXTURE_3D):Se.isDataArrayTexture||Se.isCompressedArrayTexture?(Z.setTexture2DArray(Se,0),Bn=ce.TEXTURE_2D_ARRAY):(Z.setTexture2D(Se,0),Bn=ce.TEXTURE_2D),ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,Se.flipY),ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Se.premultiplyAlpha),ce.pixelStorei(ce.UNPACK_ALIGNMENT,Se.unpackAlignment);const pn=ce.getParameter(ce.UNPACK_ROW_LENGTH),In=ce.getParameter(ce.UNPACK_IMAGE_HEIGHT),Ar=ce.getParameter(ce.UNPACK_SKIP_PIXELS),An=ce.getParameter(ce.UNPACK_SKIP_ROWS),gn=ce.getParameter(ce.UNPACK_SKIP_IMAGES);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,sn.width),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,sn.height),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,Gt),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,Ut),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,Et);const Sn=ae.isDataArrayTexture||ae.isData3DTexture,gr=Se.isDataArrayTexture||Se.isData3DTexture;if(ae.isDepthTexture){const qn=Ee.get(ae),Tn=Ee.get(Se),Dr=Ee.get(qn.__renderTarget),Un=Ee.get(Tn.__renderTarget);Ce.bindFramebuffer(ce.READ_FRAMEBUFFER,Dr.__webglFramebuffer),Ce.bindFramebuffer(ce.DRAW_FRAMEBUFFER,Un.__webglFramebuffer);for(let ai=0;ai<It;ai++)Sn&&(ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Ee.get(ae).__webglTexture,Fe,Et+ai),ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Ee.get(Se).__webglTexture,st,Mn+ai)),ce.blitFramebuffer(Gt,Ut,dt,Ct,Jt,Wt,dt,Ct,ce.DEPTH_BUFFER_BIT,ce.NEAREST);Ce.bindFramebuffer(ce.READ_FRAMEBUFFER,null),Ce.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else if(Fe!==0||ae.isRenderTargetTexture||Ee.has(ae)){const qn=Ee.get(ae),Tn=Ee.get(Se);Ce.bindFramebuffer(ce.READ_FRAMEBUFFER,Ot),Ce.bindFramebuffer(ce.DRAW_FRAMEBUFFER,kt);for(let Dr=0;Dr<It;Dr++)Sn?ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,qn.__webglTexture,Fe,Et+Dr):ce.framebufferTexture2D(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,qn.__webglTexture,Fe),gr?ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Tn.__webglTexture,st,Mn+Dr):ce.framebufferTexture2D(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,Tn.__webglTexture,st),Fe!==0?ce.blitFramebuffer(Gt,Ut,dt,Ct,Jt,Wt,dt,Ct,ce.COLOR_BUFFER_BIT,ce.NEAREST):gr?ce.copyTexSubImage3D(Bn,st,Jt,Wt,Mn+Dr,Gt,Ut,dt,Ct):ce.copyTexSubImage2D(Bn,st,Jt,Wt,Gt,Ut,dt,Ct);Ce.bindFramebuffer(ce.READ_FRAMEBUFFER,null),Ce.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else gr?ae.isDataTexture||ae.isData3DTexture?ce.texSubImage3D(Bn,st,Jt,Wt,Mn,dt,Ct,It,fn,Qt,sn.data):Se.isCompressedArrayTexture?ce.compressedTexSubImage3D(Bn,st,Jt,Wt,Mn,dt,Ct,It,fn,sn.data):ce.texSubImage3D(Bn,st,Jt,Wt,Mn,dt,Ct,It,fn,Qt,sn):ae.isDataTexture?ce.texSubImage2D(ce.TEXTURE_2D,st,Jt,Wt,dt,Ct,fn,Qt,sn.data):ae.isCompressedTexture?ce.compressedTexSubImage2D(ce.TEXTURE_2D,st,Jt,Wt,sn.width,sn.height,fn,sn.data):ce.texSubImage2D(ce.TEXTURE_2D,st,Jt,Wt,dt,Ct,fn,Qt,sn);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,pn),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,In),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,Ar),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,An),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,gn),st===0&&Se.generateMipmaps&&ce.generateMipmap(Bn),Ce.unbindTexture()},this.copyTextureToTexture3D=function(ae,Se,De=null,me=null,Fe=0){return ae.isTexture!==!0&&(k0("WebGLRenderer: copyTextureToTexture3D function signature has changed."),De=arguments[0]||null,me=arguments[1]||null,ae=arguments[2],Se=arguments[3],Fe=arguments[4]||0),k0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(ae,Se,De,me,Fe)},this.initRenderTarget=function(ae){Ee.get(ae).__webglFramebuffer===void 0&&Z.setupRenderTarget(ae)},this.initTexture=function(ae){ae.isCubeTexture?Z.setTextureCube(ae,0):ae.isData3DTexture?Z.setTexture3D(ae,0):ae.isDataArrayTexture||ae.isCompressedArrayTexture?Z.setTexture2DArray(ae,0):Z.setTexture2D(ae,0),Ce.unbindTexture()},this.resetState=function(){O=0,R=0,I=null,Ce.reset(),Tt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Rc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Nr._getDrawingBufferColorSpace(e),t.unpackColorSpace=Nr._getUnpackColorSpace()}}const Kxe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:UA,AddEquation:ch,AddOperation:cY,AdditiveAnimationBlendMode:Wk,AdditiveBlending:p3,AgXToneMapping:pY,AlphaFormat:Uk,AlwaysCompare:IY,AlwaysDepth:LC,AlwaysStencilFunc:y3,AmbientLight:pJ,AnimationAction:xJ,AnimationClip:K1,AnimationLoader:pwe,AnimationMixer:Uwe,AnimationObjectGroup:Fwe,AnimationUtils:uwe,ArcCurve:VY,ArrayCamera:_J,ArrowHelper:o_e,AttachedBindMode:v3,Audio:bJ,AudioAnalyser:Twe,AudioContext:_R,AudioListener:Cwe,AudioLoader:bwe,AxesHelper:l_e,BackSide:vo,BasicDepthPacking:bY,BasicShadowMap:GW,BatchedMesh:jY,Bone:ZA,BooleanKeyframeTrack:vg,Box2:Jwe,Box3:ta,Box3Helper:s_e,BoxGeometry:gg,BoxHelper:i_e,BufferAttribute:Pr,BufferGeometry:$n,BufferGeometryLoader:yJ,ByteType:zA,Cache:Rf,Camera:sb,CameraHelper:r_e,CanvasTexture:zY,CapsuleGeometry:rT,CatmullRomCurve3:GY,CineonToneMapping:dY,CircleGeometry:iT,ClampToEdgeWrapping:as,Clock:bR,Color:Kt,ColorKeyframeTrack:hR,ColorManagement:Nr,CompressedArrayTexture:kye,CompressedCubeTexture:Rye,CompressedTexture:eT,CompressedTextureLoader:mwe,ConeGeometry:sT,ConstantAlphaFactor:aY,ConstantColorFactor:iY,Controls:u_e,CubeCamera:OY,CubeReflectionMapping:Ru,CubeRefractionMapping:Rh,CubeTexture:ab,CubeTextureLoader:dJ,CubeUVReflectionMapping:vv,CubicBezierCurve:aR,CubicBezierCurve3:HY,CubicInterpolant:lJ,CullFaceBack:h3,CullFaceFront:VW,CullFaceFrontBack:$1e,CullFaceNone:zW,Curve:Qc,CurvePath:YY,CustomBlending:HW,CustomToneMapping:hY,CylinderGeometry:yv,Cylindrical:Ywe,Data3DTexture:QA,DataArrayTexture:ib,DataTexture:Uc,DataTextureLoader:pR,DataUtils:wm,DecrementStencilOp:cve,DecrementWrapStencilOp:fve,DefaultLoadingManager:fJ,DepthFormat:Im,DepthStencilFormat:Xm,DepthTexture:tT,DetachedBindMode:gY,DirectionalLight:yR,DirectionalLightHelper:n_e,DiscreteInterpolant:cJ,DodecahedronGeometry:aT,DoubleSide:ll,DstAlphaFactor:$W,DstColorFactor:tY,DynamicCopyUsage:Ave,DynamicDrawUsage:_ve,DynamicReadUsage:xve,EdgesGeometry:JY,EllipseCurve:nT,EqualCompare:MY,EqualDepth:DC,EqualStencilFunc:mve,EquirectangularReflectionMapping:G1,EquirectangularRefractionMapping:s_,Euler:ml,EventDispatcher:Uu,ExtrudeGeometry:lT,FileLoader:_a,Float16BufferAttribute:pye,Float32BufferAttribute:wn,FloatType:Mi,Fog:qA,FogExp2:KA,FramebufferTexture:Dye,FrontSide:ku,Frustum:ub,GLBufferAttribute:Wwe,GLSL1:Eve,GLSL3:w3,GreaterCompare:AY,GreaterDepth:RC,GreaterEqualCompare:EY,GreaterEqualDepth:kC,GreaterEqualStencilFunc:wve,GreaterStencilFunc:vve,GridHelper:e_e,Group:kf,HalfFloatType:ks,HemisphereLight:hJ,HemisphereLightHelper:$we,IcosahedronGeometry:db,ImageBitmapLoader:wJ,ImageLoader:m_,ImageUtils:kY,IncrementStencilOp:lve,IncrementWrapStencilOp:uve,InstancedBufferAttribute:Fh,InstancedBufferGeometry:wR,InstancedInterleavedBuffer:Hwe,InstancedMesh:nR,Int16BufferAttribute:dye,Int32BufferAttribute:hye,Int8BufferAttribute:cye,IntType:tb,InterleavedBuffer:lb,InterleavedBufferAttribute:Oh,Interpolant:wv,InterpolateDiscrete:Y1,InterpolateLinear:J1,InterpolateSmooth:Ex,InvertStencilOp:dve,KeepStencilOp:nm,KeyframeTrack:qc,LOD:UY,LatheGeometry:fb,Layers:Nm,LessCompare:CY,LessDepth:NC,LessEqualCompare:Xk,LessEqualDepth:Ym,LessEqualStencilFunc:gve,LessStencilFunc:pve,Light:Zh,LightProbe:vJ,Line:td,Line3:Xwe,LineBasicMaterial:Xa,LineCurve:oR,LineCurve3:WY,LineDashedMaterial:sJ,LineLoop:rR,LineSegments:Xc,LinearFilter:dr,LinearInterpolant:dR,LinearMipMapLinearFilter:d1,LinearMipMapNearestFilter:nve,LinearMipmapLinearFilter:zl,LinearMipmapNearestFilter:f1,LinearSRGBColorSpace:Ou,LinearToneMapping:uY,LinearTransfer:o_,Loader:Sa,LoaderUtils:_h,LoadingManager:vT,LoopOnce:vY,LoopPingPong:wY,LoopRepeat:yY,LuminanceAlphaFormat:Vk,LuminanceFormat:zk,MOUSE:em,Material:Os,MaterialLoader:yT,MathUtils:LY,Matrix2:AR,Matrix3:Xn,Matrix4:Nn,MaxEquation:XW,Mesh:si,MeshBasicMaterial:mo,MeshDepthMaterial:mT,MeshDistanceMaterial:gT,MeshLambertMaterial:rJ,MeshMatcapMaterial:iJ,MeshNormalMaterial:nJ,MeshPhongMaterial:eJ,MeshPhysicalMaterial:Jl,MeshStandardMaterial:mb,MeshToonMaterial:tJ,MinEquation:JW,MirroredRepeatWrapping:H1,MixOperation:lY,MultiplyBlending:g3,MultiplyOperation:eb,NearestFilter:$s,NearestMipMapLinearFilter:tve,NearestMipMapNearestFilter:eve,NearestMipmapLinearFilter:mm,NearestMipmapNearestFilter:jA,NeutralToneMapping:mY,NeverCompare:xY,NeverDepth:IC,NeverStencilFunc:hve,NoBlending:Au,NoColorSpace:Ef,NoToneMapping:Tu,NormalAnimationBlendMode:JA,NormalBlending:Em,NotEqualCompare:TY,NotEqualDepth:PC,NotEqualStencilFunc:yve,NumberKeyframeTrack:Km,Object3D:Mr,ObjectLoader:wwe,ObjectSpaceNormalMap:SY,OctahedronGeometry:hb,OneFactor:KW,OneMinusConstantAlphaFactor:oY,OneMinusConstantColorFactor:sY,OneMinusDstAlphaFactor:eY,OneMinusDstColorFactor:nY,OneMinusSrcAlphaFactor:EC,OneMinusSrcColorFactor:ZW,OrthographicCamera:Iu,PCFShadowMap:BA,PCFSoftShadowMap:u1,PMREMGenerator:T3,Path:f_,PerspectiveCamera:Qi,Plane:Cf,PlaneGeometry:Kc,PlaneHelper:a_e,PointLight:vR,PointLightHelper:qwe,Points:iR,PointsMaterial:$A,PolarGridHelper:t_e,PolyhedronGeometry:qh,PositionalAudio:Awe,PropertyBinding:Lr,PropertyMixer:SJ,QuadraticBezierCurve:lR,QuadraticBezierCurve3:cR,Quaternion:ea,QuaternionKeyframeTrack:qm,QuaternionLinearInterpolant:uJ,RED_GREEN_RGTC2_Format:aM,RED_RGTC1_Format:Hk,REVISION:$_,RGBADepthPacking:Jk,RGBAFormat:os,RGBAIntegerFormat:YA,RGBA_ASTC_10x10_Format:eM,RGBA_ASTC_10x5_Format:qC,RGBA_ASTC_10x6_Format:ZC,RGBA_ASTC_10x8_Format:$C,RGBA_ASTC_12x10_Format:tM,RGBA_ASTC_12x12_Format:nM,RGBA_ASTC_4x4_Format:GC,RGBA_ASTC_5x4_Format:HC,RGBA_ASTC_5x5_Format:WC,RGBA_ASTC_6x5_Format:YC,RGBA_ASTC_6x6_Format:JC,RGBA_ASTC_8x5_Format:XC,RGBA_ASTC_8x6_Format:QC,RGBA_ASTC_8x8_Format:KC,RGBA_BPTC_Format:ww,RGBA_ETC2_EAC_Format:VC,RGBA_PVRTC_2BPPV1_Format:UC,RGBA_PVRTC_4BPPV1_Format:BC,RGBA_S3TC_DXT1_Format:gw,RGBA_S3TC_DXT3_Format:vw,RGBA_S3TC_DXT5_Format:yw,RGBDepthPacking:ive,RGBFormat:jk,RGBIntegerFormat:rve,RGB_BPTC_SIGNED_Format:rM,RGB_BPTC_UNSIGNED_Format:iM,RGB_ETC1_Format:jC,RGB_ETC2_Format:zC,RGB_PVRTC_2BPPV1_Format:FC,RGB_PVRTC_4BPPV1_Format:OC,RGB_S3TC_DXT1_Format:mw,RGDepthPacking:sve,RGFormat:Gk,RGIntegerFormat:WA,RawShaderMaterial:$Y,Ray:mg,Raycaster:MR,RectAreaLight:mJ,RedFormat:nb,RedIntegerFormat:rb,ReinhardToneMapping:fY,RenderTarget:XA,RenderTarget3D:jwe,RenderTargetArray:zwe,RepeatWrapping:Ph,ReplaceStencilOp:ove,ReverseSubtractEquation:YW,RingGeometry:cT,SIGNED_RED_GREEN_RGTC2_Format:oM,SIGNED_RED_RGTC1_Format:sM,SRGBColorSpace:co,SRGBTransfer:Jr,Scene:ob,ShaderChunk:tr,ShaderLib:Nc,ShaderMaterial:zo,ShadowMaterial:ZY,Shape:Dm,ShapeGeometry:uT,ShapePath:c_e,ShapeUtils:Eu,ShortType:VA,Skeleton:cb,SkeletonHelper:Kwe,SkinnedMesh:tR,Source:ym,Sphere:na,SphereGeometry:pb,Spherical:M3,SphericalHarmonics3:gJ,SplineCurve:uR,SpotLight:gR,SpotLightHelper:Qwe,Sprite:BY,SpriteMaterial:eR,SrcAlphaFactor:TC,SrcAlphaSaturateFactor:rY,SrcColorFactor:qW,StaticCopyUsage:Mve,StaticDrawUsage:l_,StaticReadUsage:Sve,StereoCamera:Swe,StreamCopyUsage:Tve,StreamDrawUsage:bve,StreamReadUsage:Cve,StringKeyframeTrack:yg,SubtractEquation:WW,SubtractiveBlending:m3,TOUCH:tm,TangentSpaceNormalMap:Kh,TetrahedronGeometry:fT,Texture:Ur,TextureLoader:dM,TextureUtils:m_e,TorusGeometry:dT,TorusKnotGeometry:hT,Triangle:Ro,TriangleFanDrawMode:lM,TriangleStripDrawMode:Yk,TrianglesDrawMode:_Y,TubeGeometry:pT,UVMapping:kh,Uint16BufferAttribute:Kk,Uint32BufferAttribute:qk,Uint8BufferAttribute:uye,Uint8ClampedBufferAttribute:fye,Uniform:CR,UniformsGroup:Gwe,UniformsLib:en,UniformsUtils:Zk,UnsignedByteType:jo,UnsignedInt248Type:Jm,UnsignedInt5999Type:Bk,UnsignedIntType:Pu,UnsignedShort4444Type:GA,UnsignedShort5551Type:HA,UnsignedShortType:W1,VSMShadowMap:Ec,Vector2:Mt,Vector3:ye,Vector4:Cr,VectorKeyframeTrack:Zm,VideoTexture:Nye,WebGL3DRenderTarget:$ve,WebGLArrayRenderTarget:Zve,WebGLCoordinateSystem:Rc,WebGLCubeRenderTarget:$k,WebGLRenderTarget:pl,WebGLRenderer:ER,WebGLUtils:LJ,WebGPUCoordinateSystem:c_,WireframeGeometry:qY,WrapAroundEnding:a_,ZeroCurvatureEnding:gm,ZeroFactor:QW,ZeroSlopeEnding:vm,ZeroStencilOp:ave,createCanvasElement:DY},Symbol.toStringTag,{value:"Module"}));var q4={exports:{}},Kd={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jU;function qxe(){return jU||(jU=1,Kd.ConcurrentRoot=1,Kd.ContinuousEventPriority=4,Kd.DefaultEventPriority=16,Kd.DiscreteEventPriority=1,Kd.IdleEventPriority=536870912,Kd.LegacyRoot=0),Kd}var zU;function Zxe(){return zU||(zU=1,q4.exports=qxe()),q4.exports}var X0=Zxe();function $xe(r){let e;const t=new Set,n=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const d=e;e=u?f:Object.assign({},e,f),t.forEach(p=>p(e,d))}},i=()=>e,s=(c,u=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=u(e);function p(){const g=u(e);if(!f(d,g)){const _=d;c(d=g,_)}}return t.add(p),()=>t.delete(p)},l={setState:n,getState:i,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=r(n,i,l),l}const eCe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),VU=eCe?P.useEffect:P.useLayoutEffect;function NJ(r){const e=typeof r=="function"?$xe(r):r,t=(n=e.getState,i=Object.is)=>{const[,s]=P.useReducer(w=>w+1,0),a=e.getState(),o=P.useRef(a),l=P.useRef(n),c=P.useRef(i),u=P.useRef(!1),f=P.useRef();f.current===void 0&&(f.current=n(a));let d,p=!1;(o.current!==a||l.current!==n||c.current!==i||u.current)&&(d=n(a),p=!i(f.current,d)),VU(()=>{p&&(f.current=d),o.current=a,l.current=n,c.current=i,u.current=!1});const g=P.useRef(a);VU(()=>{const w=()=>{try{const C=e.getState(),M=l.current(C);c.current(f.current,M)||(o.current=C,f.current=M,s())}catch{u.current=!0,s()}},b=e.subscribe(w);return e.getState()!==g.current&&w(),b},[]);const _=p?d:f.current;return P.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}const tCe=r=>typeof r=="object"&&typeof r.then=="function",bm=[];function DJ(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e)return!1;const n=r.length;if(e.length!==n)return!1;for(let i=0;i<n;i++)if(!t(r[i],e[i]))return!1;return!0}function kJ(r,e=null,t=!1,n={}){e===null&&(e=[r]);for(const s of bm)if(DJ(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:n.equal,remove:()=>{const s=bm.indexOf(i);s!==-1&&bm.splice(s,1)},promise:(tCe(r)?r:r(...e)).then(s=>{i.response=s,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(s=>i.error=s)};if(bm.push(i),!t)throw i.promise}const RJ=(r,e,t)=>kJ(r,e,!1,t),nCe=(r,e,t)=>void kJ(r,e,!0,t),rCe=r=>{if(r===void 0||r.length===0)bm.splice(0,bm.length);else{const e=bm.find(t=>DJ(r,t.keys,t.equal));e&&e.remove()}};var Z4={exports:{}},$4={exports:{}},eI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GU;function iCe(){return GU||(GU=1,function(r){function e(ne,oe){var q=ne.length;ne.push(oe);e:for(;0<q;){var J=q-1>>>1,ie=ne[J];if(0<i(ie,oe))ne[J]=oe,ne[q]=ie,q=J;else break e}}function t(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var oe=ne[0],q=ne.pop();if(q!==oe){ne[0]=q;e:for(var J=0,ie=ne.length,he=ie>>>1;J<he;){var $=2*(J+1)-1,ge=ne[$],pe=$+1,we=ne[pe];if(0>i(ge,q))pe<ie&&0>i(we,ge)?(ne[J]=we,ne[pe]=q,J=pe):(ne[J]=ge,ne[$]=q,J=$);else if(pe<ie&&0>i(we,q))ne[J]=we,ne[pe]=q,J=pe;else break e}}return oe}function i(ne,oe){var q=ne.sortIndex-oe.sortIndex;return q!==0?q:ne.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,f=null,d=3,p=!1,g=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(ne){for(var oe=t(c);oe!==null;){if(oe.callback===null)n(c);else if(oe.startTime<=ne)n(c),oe.sortIndex=oe.expirationTime,e(l,oe);else break;oe=t(c)}}function A(ne){if(_=!1,M(ne),!g)if(t(l)!==null)g=!0,ee(k);else{var oe=t(c);oe!==null&&ue(A,oe.startTime-ne)}}function k(ne,oe){g=!1,_&&(_=!1,b(I),I=-1),p=!0;var q=d;try{for(M(oe),f=t(l);f!==null&&(!(f.expirationTime>oe)||ne&&!B());){var J=f.callback;if(typeof J=="function"){f.callback=null,d=f.priorityLevel;var ie=J(f.expirationTime<=oe);oe=r.unstable_now(),typeof ie=="function"?f.callback=ie:f===t(l)&&n(l),M(oe)}else n(l);f=t(l)}if(f!==null)var he=!0;else{var $=t(c);$!==null&&ue(A,$.startTime-oe),he=!1}return he}finally{f=null,d=q,p=!1}}var O=!1,R=null,I=-1,D=5,E=-1;function B(){return!(r.unstable_now()-E<D)}function U(){if(R!==null){var ne=r.unstable_now();E=ne;var oe=!0;try{oe=R(!0,ne)}finally{oe?V():(O=!1,R=null)}}else O=!1}var V;if(typeof C=="function")V=function(){C(U)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,te=X.port2;X.port1.onmessage=U,V=function(){te.postMessage(null)}}else V=function(){w(U,0)};function ee(ne){R=ne,O||(O=!0,V())}function ue(ne,oe){I=w(function(){ne(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_continueExecution=function(){g||p||(g=!0,ee(k))},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(ne){switch(d){case 1:case 2:case 3:var oe=3;break;default:oe=d}var q=d;d=oe;try{return ne()}finally{d=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ne,oe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var q=d;d=ne;try{return oe()}finally{d=q}},r.unstable_scheduleCallback=function(ne,oe,q){var J=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?J+q:J):q=J,ne){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=q+ie,ne={id:u++,callback:oe,priorityLevel:ne,startTime:q,expirationTime:ie,sortIndex:-1},q>J?(ne.sortIndex=q,e(c,ne),t(l)===null&&ne===t(c)&&(_?(b(I),I=-1):_=!0,ue(A,q-J))):(ne.sortIndex=ie,e(l,ne),g||p||(g=!0,ee(k))),ne},r.unstable_shouldYield=B,r.unstable_wrapCallback=function(ne){var oe=d;return function(){var q=d;d=oe;try{return ne.apply(this,arguments)}finally{d=q}}}}(eI)),eI}var HU;function PJ(){return HU||(HU=1,$4.exports=iCe()),$4.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tI,WU;function sCe(){return WU||(WU=1,tI=function(e){var t={},n=nv(),i=PJ(),s=Object.assign;function a(v){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+v,L=1;L<arguments.length;L++)y+="&args[]="+encodeURIComponent(arguments[L]);return"Minified React error #"+v+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),g=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),k=Symbol.iterator;function O(v){return v===null||typeof v!="object"?null:(v=k&&v[k]||v["@@iterator"],typeof v=="function"?v:null)}function R(v){if(v==null)return null;if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v;switch(v){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case f:return"StrictMode";case w:return"Suspense";case b:return"SuspenseList"}if(typeof v=="object")switch(v.$$typeof){case g:return(v.displayName||"Context")+".Consumer";case p:return(v._context.displayName||"Context")+".Provider";case _:var y=v.render;return v=v.displayName,v||(v=y.displayName||y.name||"",v=v!==""?"ForwardRef("+v+")":"ForwardRef"),v;case C:return y=v.displayName||null,y!==null?y:R(v.type)||"Memo";case M:y=v._payload,v=v._init;try{return R(v(y))}catch{}}return null}function I(v){var y=v.type;switch(v.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return v=y.render,v=v.displayName||v.name||"",y.displayName||(v!==""?"ForwardRef("+v+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(y);case 8:return y===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function D(v){var y=v,L=v;if(v.alternate)for(;y.return;)y=y.return;else{v=y;do y=v,(y.flags&4098)!==0&&(L=y.return),v=y.return;while(v)}return y.tag===3?L:null}function E(v){if(D(v)!==v)throw Error(a(188))}function B(v){var y=v.alternate;if(!y){if(y=D(v),y===null)throw Error(a(188));return y!==v?null:v}for(var L=v,F=y;;){var G=L.return;if(G===null)break;var Q=G.alternate;if(Q===null){if(F=G.return,F!==null){L=F;continue}break}if(G.child===Q.child){for(Q=G.child;Q;){if(Q===L)return E(G),v;if(Q===F)return E(G),y;Q=Q.sibling}throw Error(a(188))}if(L.return!==F.return)L=G,F=Q;else{for(var xe=!1,We=G.child;We;){if(We===L){xe=!0,L=G,F=Q;break}if(We===F){xe=!0,F=G,L=Q;break}We=We.sibling}if(!xe){for(We=Q.child;We;){if(We===L){xe=!0,L=Q,F=G;break}if(We===F){xe=!0,F=Q,L=G;break}We=We.sibling}if(!xe)throw Error(a(189))}}if(L.alternate!==F)throw Error(a(190))}if(L.tag!==3)throw Error(a(188));return L.stateNode.current===L?v:y}function U(v){return v=B(v),v!==null?V(v):null}function V(v){if(v.tag===5||v.tag===6)return v;for(v=v.child;v!==null;){var y=V(v);if(y!==null)return y;v=v.sibling}return null}function X(v){if(v.tag===5||v.tag===6)return v;for(v=v.child;v!==null;){if(v.tag!==4){var y=X(v);if(y!==null)return y}v=v.sibling}return null}var te=Array.isArray,ee=e.getPublicInstance,ue=e.getRootHostContext,ne=e.getChildHostContext,oe=e.prepareForCommit,q=e.resetAfterCommit,J=e.createInstance,ie=e.appendInitialChild,he=e.finalizeInitialChildren,$=e.prepareUpdate,ge=e.shouldSetTextContent,pe=e.createTextInstance,we=e.scheduleTimeout,ke=e.cancelTimeout,Pe=e.noTimeout,je=e.isPrimaryRenderer,Ke=e.supportsMutation,Ie=e.supportsPersistence,Ge=e.supportsHydration,ce=e.getInstanceFromNode,_t=e.preparePortalMount,_e=e.getCurrentEventPriority,Ne=e.detachDeletedInstance,Ce=e.supportsMicrotasks,He=e.scheduleMicrotask,Ee=e.supportsTestSelectors,Z=e.findFiberRoot,W=e.getBoundingRect,re=e.getTextContent,be=e.isHiddenSubtree,ve=e.matchAccessibilityRole,Je=e.setFocusIfFocusable,$e=e.setupIntersectionObserver,it=e.appendChild,pt=e.appendChildToContainer,Ft=e.commitTextUpdate,Le=e.commitMount,at=e.commitUpdate,vt=e.insertBefore,qe=e.insertInContainerBefore,et=e.removeChild,Me=e.removeChildFromContainer,tt=e.resetTextContent,Tt=e.hideInstance,Ae=e.hideTextInstance,Oe=e.unhideInstance,Ye=e.unhideTextInstance,yt=e.clearContainer,Lt=e.cloneInstance,xt=e.createContainerChildSet,Yt=e.appendChildToContainerChildSet,on=e.finalizeContainerChildren,Zt=e.replaceContainerChildren,qt=e.cloneHiddenInstance,Xe=e.cloneHiddenTextInstance,ot=e.canHydrateInstance,Dt=e.canHydrateTextInstance,nn=e.canHydrateSuspenseInstance,Fn=e.isSuspenseInstancePending,Or=e.isSuspenseInstanceFallback,Yn=e.registerSuspenseInstanceRetry,sr=e.getNextHydratableSibling,xn=e.getFirstHydratableChild,ni=e.getFirstHydratableChildWithinContainer,Ii=e.getFirstHydratableChildWithinSuspenseInstance,se=e.hydrateInstance,fe=e.hydrateTextInstance,Re=e.hydrateSuspenseInstance,nt=e.getNextHydratableInstanceAfterSuspenseInstance,mt=e.commitHydratedContainer,gt=e.commitHydratedSuspenseInstance,Ot=e.clearSuspenseBoundary,kt=e.clearSuspenseBoundaryFromContainer,ae=e.shouldDeleteUnhydratedTailInstances,Se=e.didNotMatchHydratedContainerTextInstance,De=e.didNotMatchHydratedTextInstance,me;function Fe(v){if(me===void 0)try{throw Error()}catch(L){var y=L.stack.trim().match(/\n( *(at )?)/);me=y&&y[1]||""}return`
`+me+v}var st=!1;function dt(v,y){if(!v||st)return"";st=!0;var L=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(Vt){var F=Vt}Reflect.construct(v,[],y)}else{try{y.call()}catch(Vt){F=Vt}v.call(y.prototype)}else{try{throw Error()}catch(Vt){F=Vt}v()}}catch(Vt){if(Vt&&F&&typeof Vt.stack=="string"){for(var G=Vt.stack.split(`
`),Q=F.stack.split(`
`),xe=G.length-1,We=Q.length-1;1<=xe&&0<=We&&G[xe]!==Q[We];)We--;for(;1<=xe&&0<=We;xe--,We--)if(G[xe]!==Q[We]){if(xe!==1||We!==1)do if(xe--,We--,0>We||G[xe]!==Q[We]){var St=`
`+G[xe].replace(" at new "," at ");return v.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",v.displayName)),St}while(1<=xe&&0<=We);break}}}finally{st=!1,Error.prepareStackTrace=L}return(v=v?v.displayName||v.name:"")?Fe(v):""}var Ct=Object.prototype.hasOwnProperty,It=[],Gt=-1;function Ut(v){return{current:v}}function Et(v){0>Gt||(v.current=It[Gt],It[Gt]=null,Gt--)}function Jt(v,y){Gt++,It[Gt]=v.current,v.current=y}var Wt={},Mn=Ut(Wt),sn=Ut(!1),fn=Wt;function Qt(v,y){var L=v.type.contextTypes;if(!L)return Wt;var F=v.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===y)return F.__reactInternalMemoizedMaskedChildContext;var G={},Q;for(Q in L)G[Q]=y[Q];return F&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=y,v.__reactInternalMemoizedMaskedChildContext=G),G}function Bn(v){return v=v.childContextTypes,v!=null}function pn(){Et(sn),Et(Mn)}function In(v,y,L){if(Mn.current!==Wt)throw Error(a(168));Jt(Mn,y),Jt(sn,L)}function Ar(v,y,L){var F=v.stateNode;if(y=y.childContextTypes,typeof F.getChildContext!="function")return L;F=F.getChildContext();for(var G in F)if(!(G in y))throw Error(a(108,I(v)||"Unknown",G));return s({},L,F)}function An(v){return v=(v=v.stateNode)&&v.__reactInternalMemoizedMergedChildContext||Wt,fn=Mn.current,Jt(Mn,v),Jt(sn,sn.current),!0}function gn(v,y,L){var F=v.stateNode;if(!F)throw Error(a(169));L?(v=Ar(v,y,fn),F.__reactInternalMemoizedMergedChildContext=v,Et(sn),Et(Mn),Jt(Mn,v)):Et(sn),Jt(sn,L)}var Sn=Math.clz32?Math.clz32:Tn,gr=Math.log,qn=Math.LN2;function Tn(v){return v>>>=0,v===0?32:31-(gr(v)/qn|0)|0}var Dr=64,Un=4194304;function ai(v){switch(v&-v){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return v&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return v}}function _l(v,y){var L=v.pendingLanes;if(L===0)return 0;var F=0,G=v.suspendedLanes,Q=v.pingedLanes,xe=L&268435455;if(xe!==0){var We=xe&~G;We!==0?F=ai(We):(Q&=xe,Q!==0&&(F=ai(Q)))}else xe=L&~G,xe!==0?F=ai(xe):Q!==0&&(F=ai(Q));if(F===0)return 0;if(y!==0&&y!==F&&(y&G)===0&&(G=F&-F,Q=y&-y,G>=Q||G===16&&(Q&4194240)!==0))return y;if((F&4)!==0&&(F|=L&16),y=v.entangledLanes,y!==0)for(v=v.entanglements,y&=F;0<y;)L=31-Sn(y),G=1<<L,F|=v[L],y&=~G;return F}function Xl(v,y){switch(v){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eu(v,y){for(var L=v.suspendedLanes,F=v.pingedLanes,G=v.expirationTimes,Q=v.pendingLanes;0<Q;){var xe=31-Sn(Q),We=1<<xe,St=G[xe];St===-1?((We&L)===0||(We&F)!==0)&&(G[xe]=Xl(We,y)):St<=y&&(v.expiredLanes|=We),Q&=~We}}function wo(v){return v=v.pendingLanes&-1073741825,v!==0?v:v&1073741824?1073741824:0}function Ql(v){for(var y=[],L=0;31>L;L++)y.push(v);return y}function xa(v,y,L){v.pendingLanes|=y,y!==536870912&&(v.suspendedLanes=0,v.pingedLanes=0),v=v.eventTimes,y=31-Sn(y),v[y]=L}function Cs(v,y){var L=v.pendingLanes&~y;v.pendingLanes=y,v.suspendedLanes=0,v.pingedLanes=0,v.expiredLanes&=y,v.mutableReadLanes&=y,v.entangledLanes&=y,y=v.entanglements;var F=v.eventTimes;for(v=v.expirationTimes;0<L;){var G=31-Sn(L),Q=1<<G;y[G]=0,F[G]=-1,v[G]=-1,L&=~Q}}function Kr(v,y){var L=v.entangledLanes|=y;for(v=v.entanglements;L;){var F=31-Sn(L),G=1<<F;G&y|v[F]&y&&(v[F]|=y),L&=~G}}var Pn=0;function ra(v){return v&=-v,1<v?4<v?(v&268435455)!==0?16:536870912:4:1}var Vs=i.unstable_scheduleCallback,Ms=i.unstable_cancelCallback,Ca=i.unstable_shouldYield,fd=i.unstable_requestPaint,qr=i.unstable_now,ji=i.unstable_ImmediatePriority,dd=i.unstable_UserBlockingPriority,us=i.unstable_NormalPriority,Qa=i.unstable_IdlePriority,Ka=null,Gs=null;function ia(v){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Ka,v,void 0,(v.current.flags&128)===128)}catch{}}function Ma(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var Li=typeof Object.is=="function"?Object.is:Ma,wi=null,Sr=!1,Aa=!1;function Kl(v){wi===null?wi=[v]:wi.push(v)}function Go(v){Sr=!0,Kl(v)}function qi(){if(!Aa&&wi!==null){Aa=!0;var v=0,y=Pn;try{var L=wi;for(Pn=1;v<L.length;v++){var F=L[v];do F=F(!0);while(F!==null)}wi=null,Sr=!1}catch(G){throw wi!==null&&(wi=wi.slice(v+1)),Vs(ji,qi),G}finally{Pn=y,Aa=!1}}return null}var Ho=o.ReactCurrentBatchConfig;function Zi(v,y){if(Li(v,y))return!0;if(typeof v!="object"||v===null||typeof y!="object"||y===null)return!1;var L=Object.keys(v),F=Object.keys(y);if(L.length!==F.length)return!1;for(F=0;F<L.length;F++){var G=L[F];if(!Ct.call(y,G)||!Li(v[G],y[G]))return!1}return!0}function _o(v){switch(v.tag){case 5:return Fe(v.type);case 16:return Fe("Lazy");case 13:return Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 2:case 15:return v=dt(v.type,!1),v;case 11:return v=dt(v.type.render,!1),v;case 1:return v=dt(v.type,!0),v;default:return""}}function jr(v,y){if(v&&v.defaultProps){y=s({},y),v=v.defaultProps;for(var L in v)y[L]===void 0&&(y[L]=v[L]);return y}return y}var _i=Ut(null),Wo=null,zi=null,bo=null;function bi(){bo=zi=Wo=null}function Ta(v,y,L){je?(Jt(_i,y._currentValue),y._currentValue=L):(Jt(_i,y._currentValue2),y._currentValue2=L)}function hi(v){var y=_i.current;Et(_i),je?v._currentValue=y:v._currentValue2=y}function oi(v,y,L){for(;v!==null;){var F=v.alternate;if((v.childLanes&y)!==y?(v.childLanes|=y,F!==null&&(F.childLanes|=y)):F!==null&&(F.childLanes&y)!==y&&(F.childLanes|=y),v===L)break;v=v.return}}function pi(v,y){Wo=v,bo=zi=null,v=v.dependencies,v!==null&&v.firstContext!==null&&((v.lanes&y)!==0&&(ps=!0),v.firstContext=null)}function Zr(v){var y=je?v._currentValue:v._currentValue2;if(bo!==v)if(v={context:v,memoizedValue:y,next:null},zi===null){if(Wo===null)throw Error(a(308));zi=v,Wo.dependencies={lanes:0,firstContext:v}}else zi=zi.next=v;return y}var Ni=null,sa=!1;function ql(v){v.updateQueue={baseState:v.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ju(v,y){v=v.updateQueue,y.updateQueue===v&&(y.updateQueue={baseState:v.baseState,firstBaseUpdate:v.firstBaseUpdate,lastBaseUpdate:v.lastBaseUpdate,shared:v.shared,effects:v.effects})}function qa(v,y){return{eventTime:v,lane:y,tag:0,payload:null,callback:null,next:null}}function Yo(v,y){var L=v.updateQueue;L!==null&&(L=L.shared,ki!==null&&(v.mode&1)!==0&&(Zn&2)===0?(v=L.interleaved,v===null?(y.next=y,Ni===null?Ni=[L]:Ni.push(L)):(y.next=v.next,v.next=y),L.interleaved=y):(v=L.pending,v===null?y.next=y:(y.next=v.next,v.next=y),L.pending=y))}function Zl(v,y,L){if(y=y.updateQueue,y!==null&&(y=y.shared,(L&4194240)!==0)){var F=y.lanes;F&=v.pendingLanes,L|=F,y.lanes=L,Kr(v,L)}}function zu(v,y){var L=v.updateQueue,F=v.alternate;if(F!==null&&(F=F.updateQueue,L===F)){var G=null,Q=null;if(L=L.firstBaseUpdate,L!==null){do{var xe={eventTime:L.eventTime,lane:L.lane,tag:L.tag,payload:L.payload,callback:L.callback,next:null};Q===null?G=Q=xe:Q=Q.next=xe,L=L.next}while(L!==null);Q===null?G=Q=y:Q=Q.next=y}else G=Q=y;L={baseState:F.baseState,firstBaseUpdate:G,lastBaseUpdate:Q,shared:F.shared,effects:F.effects},v.updateQueue=L;return}v=L.lastBaseUpdate,v===null?L.firstBaseUpdate=y:v.next=y,L.lastBaseUpdate=y}function Vu(v,y,L,F){var G=v.updateQueue;sa=!1;var Q=G.firstBaseUpdate,xe=G.lastBaseUpdate,We=G.shared.pending;if(We!==null){G.shared.pending=null;var St=We,Vt=St.next;St.next=null,xe===null?Q=Vt:xe.next=Vt,xe=St;var cn=v.alternate;cn!==null&&(cn=cn.updateQueue,We=cn.lastBaseUpdate,We!==xe&&(We===null?cn.firstBaseUpdate=Vt:We.next=Vt,cn.lastBaseUpdate=St))}if(Q!==null){var Gn=G.baseState;xe=0,cn=Vt=St=null,We=Q;do{var Ln=We.lane,er=We.eventTime;if((F&Ln)===Ln){cn!==null&&(cn=cn.next={eventTime:er,lane:0,tag:We.tag,payload:We.payload,callback:We.callback,next:null});e:{var rn=v,Ls=We;switch(Ln=y,er=L,Ls.tag){case 1:if(rn=Ls.payload,typeof rn=="function"){Gn=rn.call(er,Gn,Ln);break e}Gn=rn;break e;case 3:rn.flags=rn.flags&-65537|128;case 0:if(rn=Ls.payload,Ln=typeof rn=="function"?rn.call(er,Gn,Ln):rn,Ln==null)break e;Gn=s({},Gn,Ln);break e;case 2:sa=!0}}We.callback!==null&&We.lane!==0&&(v.flags|=64,Ln=G.effects,Ln===null?G.effects=[We]:Ln.push(We))}else er={eventTime:er,lane:Ln,tag:We.tag,payload:We.payload,callback:We.callback,next:null},cn===null?(Vt=cn=er,St=Gn):cn=cn.next=er,xe|=Ln;if(We=We.next,We===null){if(We=G.shared.pending,We===null)break;Ln=We,We=Ln.next,Ln.next=null,G.lastBaseUpdate=Ln,G.shared.pending=null}}while(!0);if(cn===null&&(St=Gn),G.baseState=St,G.firstBaseUpdate=Vt,G.lastBaseUpdate=cn,y=G.shared.interleaved,y!==null){G=y;do xe|=G.lane,G=G.next;while(G!==y)}else Q===null&&(G.shared.lanes=0);Ml|=xe,v.lanes=xe,v.memoizedState=Gn}}function bl(v,y,L){if(v=y.effects,y.effects=null,v!==null)for(y=0;y<v.length;y++){var F=v[y],G=F.callback;if(G!==null){if(F.callback=null,F=L,typeof G!="function")throw Error(a(191,G));G.call(F)}}}var tp=new n.Component().refs;function hd(v,y,L,F){y=v.memoizedState,L=L(F,y),L=L==null?y:s({},y,L),v.memoizedState=L,v.lanes===0&&(v.updateQueue.baseState=L)}var Gu={isMounted:function(v){return(v=v._reactInternals)?D(v)===v:!1},enqueueSetState:function(v,y,L){v=v._reactInternals;var F=Er(),G=el(v),Q=qa(F,G);Q.payload=y,L!=null&&(Q.callback=L),Yo(v,Q),y=Xs(v,G,F),y!==null&&Zl(y,v,G)},enqueueReplaceState:function(v,y,L){v=v._reactInternals;var F=Er(),G=el(v),Q=qa(F,G);Q.tag=1,Q.payload=y,L!=null&&(Q.callback=L),Yo(v,Q),y=Xs(v,G,F),y!==null&&Zl(y,v,G)},enqueueForceUpdate:function(v,y){v=v._reactInternals;var L=Er(),F=el(v),G=qa(L,F);G.tag=2,y!=null&&(G.callback=y),Yo(v,G),y=Xs(v,F,L),y!==null&&Zl(y,v,F)}};function pd(v,y,L,F,G,Q,xe){return v=v.stateNode,typeof v.shouldComponentUpdate=="function"?v.shouldComponentUpdate(F,Q,xe):y.prototype&&y.prototype.isPureReactComponent?!Zi(L,F)||!Zi(G,Q):!0}function Hu(v,y,L){var F=!1,G=Wt,Q=y.contextType;return typeof Q=="object"&&Q!==null?Q=Zr(Q):(G=Bn(y)?fn:Mn.current,F=y.contextTypes,Q=(F=F!=null)?Qt(v,G):Wt),y=new y(L,Q),v.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Gu,v.stateNode=y,y._reactInternals=v,F&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=G,v.__reactInternalMemoizedMaskedChildContext=Q),y}function Hs(v,y,L,F){v=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(L,F),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(L,F),y.state!==v&&Gu.enqueueReplaceState(y,y.state,null)}function md(v,y,L,F){var G=v.stateNode;G.props=L,G.state=v.memoizedState,G.refs=tp,ql(v);var Q=y.contextType;typeof Q=="object"&&Q!==null?G.context=Zr(Q):(Q=Bn(y)?fn:Mn.current,G.context=Qt(v,Q)),G.state=v.memoizedState,Q=y.getDerivedStateFromProps,typeof Q=="function"&&(hd(v,y,Q,L),G.state=v.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(y=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),y!==G.state&&Gu.enqueueReplaceState(G,G.state,null),Vu(v,L,G,F),G.state=v.memoizedState),typeof G.componentDidMount=="function"&&(v.flags|=4194308)}var $l=[],aa=0,T=null,H=0,K=[],de=0,Ze=null,ft=1,jt="";function pr(v,y){$l[aa++]=H,$l[aa++]=T,T=v,H=y}function Vi(v,y,L){K[de++]=ft,K[de++]=jt,K[de++]=Ze,Ze=v;var F=ft;v=jt;var G=32-Sn(F)-1;F&=~(1<<G),L+=1;var Q=32-Sn(y)+G;if(30<Q){var xe=G-G%5;Q=(F&(1<<xe)-1).toString(32),F>>=xe,G-=xe,ft=1<<32-Sn(y)+G|L<<G|F,jt=Q+v}else ft=1<<Q|L<<G|F,jt=v}function lr(v){v.return!==null&&(pr(v,1),Vi(v,1,0))}function Gi(v){for(;v===T;)T=$l[--aa],$l[aa]=null,H=$l[--aa],$l[aa]=null;for(;v===Ze;)Ze=K[--de],K[de]=null,jt=K[--de],K[de]=null,ft=K[--de],K[de]=null}var Tr=null,li=null,cr=!1,Jo=!1,Ws=null;function Lv(v,y){var L=io(5,null,null,0);L.elementType="DELETED",L.stateNode=y,L.return=v,y=v.deletions,y===null?(v.deletions=[L],v.flags|=16):y.push(L)}function Nv(v,y){switch(v.tag){case 5:return y=ot(y,v.type,v.pendingProps),y!==null?(v.stateNode=y,Tr=v,li=xn(y),!0):!1;case 6:return y=Dt(y,v.pendingProps),y!==null?(v.stateNode=y,Tr=v,li=null,!0):!1;case 13:if(y=nn(y),y!==null){var L=Ze!==null?{id:ft,overflow:jt}:null;return v.memoizedState={dehydrated:y,treeContext:L,retryLane:1073741824},L=io(18,null,null,0),L.stateNode=y,L.return=v,v.child=L,Tr=v,li=null,!0}return!1;default:return!1}}function _g(v){return(v.mode&1)!==0&&(v.flags&128)===0}function tu(v){if(cr){var y=li;if(y){var L=y;if(!Nv(v,y)){if(_g(v))throw Error(a(418));y=sr(L);var F=Tr;y&&Nv(v,y)?Lv(F,L):(v.flags=v.flags&-4097|2,cr=!1,Tr=v)}}else{if(_g(v))throw Error(a(418));v.flags=v.flags&-4097|2,cr=!1,Tr=v}}}function Cb(v){for(v=v.return;v!==null&&v.tag!==5&&v.tag!==3&&v.tag!==13;)v=v.return;Tr=v}function np(v){if(!Ge||v!==Tr)return!1;if(!cr)return Cb(v),cr=!0,!1;if(v.tag!==3&&(v.tag!==5||ae(v.type)&&!ge(v.type,v.memoizedProps))){var y=li;if(y){if(_g(v)){for(v=li;v;)v=sr(v);throw Error(a(418))}for(;y;)Lv(v,y),y=sr(y)}}if(Cb(v),v.tag===13){if(!Ge)throw Error(a(316));if(v=v.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(a(317));li=nt(v)}else li=Tr?sr(v.stateNode):null;return!0}function gd(){Ge&&(li=Tr=null,Jo=cr=!1)}function bg(v){Ws===null?Ws=[v]:Ws.push(v)}function vd(v,y,L){if(v=L.ref,v!==null&&typeof v!="function"&&typeof v!="object"){if(L._owner){if(L=L._owner,L){if(L.tag!==1)throw Error(a(309));var F=L.stateNode}if(!F)throw Error(a(147,v));var G=F,Q=""+v;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===Q?y.ref:(y=function(xe){var We=G.refs;We===tp&&(We=G.refs={}),xe===null?delete We[Q]:We[Q]=xe},y._stringRef=Q,y)}if(typeof v!="string")throw Error(a(284));if(!L._owner)throw Error(a(290,v))}return v}function nu(v,y){throw v=Object.prototype.toString.call(y),Error(a(31,v==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":v))}function yd(v){var y=v._init;return y(v._payload)}function Mb(v){function y(ct,Qe){if(v){var wt=ct.deletions;wt===null?(ct.deletions=[Qe],ct.flags|=16):wt.push(Qe)}}function L(ct,Qe){if(!v)return null;for(;Qe!==null;)y(ct,Qe),Qe=Qe.sibling;return null}function F(ct,Qe){for(ct=new Map;Qe!==null;)Qe.key!==null?ct.set(Qe.key,Qe):ct.set(Qe.index,Qe),Qe=Qe.sibling;return ct}function G(ct,Qe){return ct=hc(ct,Qe),ct.index=0,ct.sibling=null,ct}function Q(ct,Qe,wt){return ct.index=wt,v?(wt=ct.alternate,wt!==null?(wt=wt.index,wt<Qe?(ct.flags|=2,Qe):wt):(ct.flags|=2,Qe)):(ct.flags|=1048576,Qe)}function xe(ct){return v&&ct.alternate===null&&(ct.flags|=2),ct}function We(ct,Qe,wt,$t){return Qe===null||Qe.tag!==6?(Qe=Xg(wt,ct.mode,$t),Qe.return=ct,Qe):(Qe=G(Qe,wt),Qe.return=ct,Qe)}function St(ct,Qe,wt,$t){var yn=wt.type;return yn===u?cn(ct,Qe,wt.props.children,$t,wt.key):Qe!==null&&(Qe.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===M&&yd(yn)===Qe.type)?($t=G(Qe,wt.props),$t.ref=vd(ct,Qe,wt),$t.return=ct,$t):($t=Jg(wt.type,wt.key,wt.props,null,ct.mode,$t),$t.ref=vd(ct,Qe,wt),$t.return=ct,$t)}function Vt(ct,Qe,wt,$t){return Qe===null||Qe.tag!==4||Qe.stateNode.containerInfo!==wt.containerInfo||Qe.stateNode.implementation!==wt.implementation?(Qe=Qg(wt,ct.mode,$t),Qe.return=ct,Qe):(Qe=G(Qe,wt.children||[]),Qe.return=ct,Qe)}function cn(ct,Qe,wt,$t,yn){return Qe===null||Qe.tag!==7?(Qe=hf(wt,ct.mode,$t,yn),Qe.return=ct,Qe):(Qe=G(Qe,wt),Qe.return=ct,Qe)}function Gn(ct,Qe,wt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return Qe=Xg(""+Qe,ct.mode,wt),Qe.return=ct,Qe;if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case l:return wt=Jg(Qe.type,Qe.key,Qe.props,null,ct.mode,wt),wt.ref=vd(ct,null,Qe),wt.return=ct,wt;case c:return Qe=Qg(Qe,ct.mode,wt),Qe.return=ct,Qe;case M:var $t=Qe._init;return Gn(ct,$t(Qe._payload),wt)}if(te(Qe)||O(Qe))return Qe=hf(Qe,ct.mode,wt,null),Qe.return=ct,Qe;nu(ct,Qe)}return null}function Ln(ct,Qe,wt,$t){var yn=Qe!==null?Qe.key:null;if(typeof wt=="string"&&wt!==""||typeof wt=="number")return yn!==null?null:We(ct,Qe,""+wt,$t);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case l:return wt.key===yn?St(ct,Qe,wt,$t):null;case c:return wt.key===yn?Vt(ct,Qe,wt,$t):null;case M:return yn=wt._init,Ln(ct,Qe,yn(wt._payload),$t)}if(te(wt)||O(wt))return yn!==null?null:cn(ct,Qe,wt,$t,null);nu(ct,wt)}return null}function er(ct,Qe,wt,$t,yn){if(typeof $t=="string"&&$t!==""||typeof $t=="number")return ct=ct.get(wt)||null,We(Qe,ct,""+$t,yn);if(typeof $t=="object"&&$t!==null){switch($t.$$typeof){case l:return ct=ct.get($t.key===null?wt:$t.key)||null,St(Qe,ct,$t,yn);case c:return ct=ct.get($t.key===null?wt:$t.key)||null,Vt(Qe,ct,$t,yn);case M:var Jn=$t._init;return er(ct,Qe,wt,Jn($t._payload),yn)}if(te($t)||O($t))return ct=ct.get(wt)||null,cn(Qe,ct,$t,yn,null);nu(Qe,$t)}return null}function rn(ct,Qe,wt,$t){for(var yn=null,Jn=null,Hn=Qe,xr=Qe=0,Wi=null;Hn!==null&&xr<wt.length;xr++){Hn.index>xr?(Wi=Hn,Hn=null):Wi=Hn.sibling;var vr=Ln(ct,Hn,wt[xr],$t);if(vr===null){Hn===null&&(Hn=Wi);break}v&&Hn&&vr.alternate===null&&y(ct,Hn),Qe=Q(vr,Qe,xr),Jn===null?yn=vr:Jn.sibling=vr,Jn=vr,Hn=Wi}if(xr===wt.length)return L(ct,Hn),cr&&pr(ct,xr),yn;if(Hn===null){for(;xr<wt.length;xr++)Hn=Gn(ct,wt[xr],$t),Hn!==null&&(Qe=Q(Hn,Qe,xr),Jn===null?yn=Hn:Jn.sibling=Hn,Jn=Hn);return cr&&pr(ct,xr),yn}for(Hn=F(ct,Hn);xr<wt.length;xr++)Wi=er(Hn,ct,xr,wt[xr],$t),Wi!==null&&(v&&Wi.alternate!==null&&Hn.delete(Wi.key===null?xr:Wi.key),Qe=Q(Wi,Qe,xr),Jn===null?yn=Wi:Jn.sibling=Wi,Jn=Wi);return v&&Hn.forEach(function(pc){return y(ct,pc)}),cr&&pr(ct,xr),yn}function Ls(ct,Qe,wt,$t){var yn=O(wt);if(typeof yn!="function")throw Error(a(150));if(wt=yn.call(wt),wt==null)throw Error(a(151));for(var Jn=yn=null,Hn=Qe,xr=Qe=0,Wi=null,vr=wt.next();Hn!==null&&!vr.done;xr++,vr=wt.next()){Hn.index>xr?(Wi=Hn,Hn=null):Wi=Hn.sibling;var pc=Ln(ct,Hn,vr.value,$t);if(pc===null){Hn===null&&(Hn=Wi);break}v&&Hn&&pc.alternate===null&&y(ct,Hn),Qe=Q(pc,Qe,xr),Jn===null?yn=pc:Jn.sibling=pc,Jn=pc,Hn=Wi}if(vr.done)return L(ct,Hn),cr&&pr(ct,xr),yn;if(Hn===null){for(;!vr.done;xr++,vr=wt.next())vr=Gn(ct,vr.value,$t),vr!==null&&(Qe=Q(vr,Qe,xr),Jn===null?yn=vr:Jn.sibling=vr,Jn=vr);return cr&&pr(ct,xr),yn}for(Hn=F(ct,Hn);!vr.done;xr++,vr=wt.next())vr=er(Hn,ct,xr,vr.value,$t),vr!==null&&(v&&vr.alternate!==null&&Hn.delete(vr.key===null?xr:vr.key),Qe=Q(vr,Qe,xr),Jn===null?yn=vr:Jn.sibling=vr,Jn=vr);return v&&Hn.forEach(function(ly){return y(ct,ly)}),cr&&pr(ct,xr),yn}function so(ct,Qe,wt,$t){if(typeof wt=="object"&&wt!==null&&wt.type===u&&wt.key===null&&(wt=wt.props.children),typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case l:e:{for(var yn=wt.key,Jn=Qe;Jn!==null;){if(Jn.key===yn){if(yn=wt.type,yn===u){if(Jn.tag===7){L(ct,Jn.sibling),Qe=G(Jn,wt.props.children),Qe.return=ct,ct=Qe;break e}}else if(Jn.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===M&&yd(yn)===Jn.type){L(ct,Jn.sibling),Qe=G(Jn,wt.props),Qe.ref=vd(ct,Jn,wt),Qe.return=ct,ct=Qe;break e}L(ct,Jn);break}else y(ct,Jn);Jn=Jn.sibling}wt.type===u?(Qe=hf(wt.props.children,ct.mode,$t,wt.key),Qe.return=ct,ct=Qe):($t=Jg(wt.type,wt.key,wt.props,null,ct.mode,$t),$t.ref=vd(ct,Qe,wt),$t.return=ct,ct=$t)}return xe(ct);case c:e:{for(Jn=wt.key;Qe!==null;){if(Qe.key===Jn)if(Qe.tag===4&&Qe.stateNode.containerInfo===wt.containerInfo&&Qe.stateNode.implementation===wt.implementation){L(ct,Qe.sibling),Qe=G(Qe,wt.children||[]),Qe.return=ct,ct=Qe;break e}else{L(ct,Qe);break}else y(ct,Qe);Qe=Qe.sibling}Qe=Qg(wt,ct.mode,$t),Qe.return=ct,ct=Qe}return xe(ct);case M:return Jn=wt._init,so(ct,Qe,Jn(wt._payload),$t)}if(te(wt))return rn(ct,Qe,wt,$t);if(O(wt))return Ls(ct,Qe,wt,$t);nu(ct,wt)}return typeof wt=="string"&&wt!==""||typeof wt=="number"?(wt=""+wt,Qe!==null&&Qe.tag===6?(L(ct,Qe.sibling),Qe=G(Qe,wt),Qe.return=ct,ct=Qe):(L(ct,Qe),Qe=Xg(wt,ct.mode,$t),Qe.return=ct,ct=Qe),xe(ct)):L(ct,Qe)}return so}var ec=Mb(!0),Ab=Mb(!1),wd={},Ea=Ut(wd),Wu=Ut(wd),Yu=Ut(wd);function Xo(v){if(v===wd)throw Error(a(174));return v}function Sg(v,y){Jt(Yu,y),Jt(Wu,v),Jt(Ea,wd),v=ue(y),Et(Ea),Jt(Ea,v)}function _d(){Et(Ea),Et(Wu),Et(Yu)}function Tb(v){var y=Xo(Yu.current),L=Xo(Ea.current);y=ne(L,v.type,y),L!==y&&(Jt(Wu,v),Jt(Ea,y))}function Dv(v){Wu.current===v&&(Et(Ea),Et(Wu))}var mi=Ut(0);function xg(v){for(var y=v;y!==null;){if(y.tag===13){var L=y.memoizedState;if(L!==null&&(L=L.dehydrated,L===null||Fn(L)||Or(L)))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===v)break;for(;y.sibling===null;){if(y.return===null||y.return===v)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var Za=[];function Ju(){for(var v=0;v<Za.length;v++){var y=Za[v];je?y._workInProgressVersionPrimary=null:y._workInProgressVersionSecondary=null}Za.length=0}var rp=o.ReactCurrentDispatcher,$a=o.ReactCurrentBatchConfig,Xu=0,gi=null,fs=null,ds=null,Cg=!1,Sl=!1,Qu=0,ip=0;function hs(){throw Error(a(321))}function Mg(v,y){if(y===null)return!1;for(var L=0;L<y.length&&L<v.length;L++)if(!Li(v[L],y[L]))return!1;return!0}function bd(v,y,L,F,G,Q){if(Xu=Q,gi=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,rp.current=v===null||v.memoizedState===null?Bv:Uv,v=L(F,G),Sl){Q=0;do{if(Sl=!1,Qu=0,25<=Q)throw Error(a(301));Q+=1,ds=fs=null,y.updateQueue=null,rp.current=jv,v=L(F,G)}while(Sl)}if(rp.current=Md,y=fs!==null&&fs.next!==null,Xu=0,ds=fs=gi=null,Cg=!1,y)throw Error(a(300));return v}function ru(){var v=Qu!==0;return Qu=0,v}function Qo(){var v={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ds===null?gi.memoizedState=ds=v:ds=ds.next=v,ds}function Ko(){if(fs===null){var v=gi.alternate;v=v!==null?v.memoizedState:null}else v=fs.next;var y=ds===null?gi.memoizedState:ds.next;if(y!==null)ds=y,fs=v;else{if(v===null)throw Error(a(310));fs=v,v={memoizedState:fs.memoizedState,baseState:fs.baseState,baseQueue:fs.baseQueue,queue:fs.queue,next:null},ds===null?gi.memoizedState=ds=v:ds=ds.next=v}return ds}function xl(v,y){return typeof y=="function"?y(v):y}function sp(v){var y=Ko(),L=y.queue;if(L===null)throw Error(a(311));L.lastRenderedReducer=v;var F=fs,G=F.baseQueue,Q=L.pending;if(Q!==null){if(G!==null){var xe=G.next;G.next=Q.next,Q.next=xe}F.baseQueue=G=Q,L.pending=null}if(G!==null){Q=G.next,F=F.baseState;var We=xe=null,St=null,Vt=Q;do{var cn=Vt.lane;if((Xu&cn)===cn)St!==null&&(St=St.next={lane:0,action:Vt.action,hasEagerState:Vt.hasEagerState,eagerState:Vt.eagerState,next:null}),F=Vt.hasEagerState?Vt.eagerState:v(F,Vt.action);else{var Gn={lane:cn,action:Vt.action,hasEagerState:Vt.hasEagerState,eagerState:Vt.eagerState,next:null};St===null?(We=St=Gn,xe=F):St=St.next=Gn,gi.lanes|=cn,Ml|=cn}Vt=Vt.next}while(Vt!==null&&Vt!==Q);St===null?xe=F:St.next=We,Li(F,y.memoizedState)||(ps=!0),y.memoizedState=F,y.baseState=xe,y.baseQueue=St,L.lastRenderedState=F}if(v=L.interleaved,v!==null){G=v;do Q=G.lane,gi.lanes|=Q,Ml|=Q,G=G.next;while(G!==v)}else G===null&&(L.lanes=0);return[y.memoizedState,L.dispatch]}function ap(v){var y=Ko(),L=y.queue;if(L===null)throw Error(a(311));L.lastRenderedReducer=v;var F=L.dispatch,G=L.pending,Q=y.memoizedState;if(G!==null){L.pending=null;var xe=G=G.next;do Q=v(Q,xe.action),xe=xe.next;while(xe!==G);Li(Q,y.memoizedState)||(ps=!0),y.memoizedState=Q,y.baseQueue===null&&(y.baseState=Q),L.lastRenderedState=Q}return[Q,F]}function kv(){}function Rv(v,y){var L=gi,F=Ko(),G=y(),Q=!Li(F.memoizedState,G);if(Q&&(F.memoizedState=G,ps=!0),F=F.queue,Sd(tc.bind(null,L,F,v),[v]),F.getSnapshot!==y||Q||ds!==null&&ds.memoizedState.tag&1){if(L.flags|=2048,lp(9,Ov.bind(null,L,F,G,y),void 0,null),ki===null)throw Error(a(349));(Xu&30)!==0||Pv(L,y,G)}return G}function Pv(v,y,L){v.flags|=16384,v={getSnapshot:y,value:L},y=gi.updateQueue,y===null?(y={lastEffect:null,stores:null},gi.updateQueue=y,y.stores=[v]):(L=y.stores,L===null?y.stores=[v]:L.push(v))}function Ov(v,y,L,F){y.value=L,y.getSnapshot=F,Ag(y)&&Xs(v,1,-1)}function tc(v,y,L){return L(function(){Ag(y)&&Xs(v,1,-1)})}function Ag(v){var y=v.getSnapshot;v=v.value;try{var L=y();return!Li(v,L)}catch{return!0}}function op(v){var y=Qo();return typeof v=="function"&&(v=v()),y.memoizedState=y.baseState=v,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xl,lastRenderedState:v},y.queue=v,v=v.dispatch=YT.bind(null,gi,v),[y.memoizedState,v]}function lp(v,y,L,F){return v={tag:v,create:y,destroy:L,deps:F,next:null},y=gi.updateQueue,y===null?(y={lastEffect:null,stores:null},gi.updateQueue=y,y.lastEffect=v.next=v):(L=y.lastEffect,L===null?y.lastEffect=v.next=v:(F=L.next,L.next=v,v.next=F,y.lastEffect=v)),v}function Eb(){return Ko().memoizedState}function iu(v,y,L,F){var G=Qo();gi.flags|=v,G.memoizedState=lp(1|y,L,void 0,F===void 0?null:F)}function Tg(v,y,L,F){var G=Ko();F=F===void 0?null:F;var Q=void 0;if(fs!==null){var xe=fs.memoizedState;if(Q=xe.destroy,F!==null&&Mg(F,xe.deps)){G.memoizedState=lp(y,L,Q,F);return}}gi.flags|=v,G.memoizedState=lp(1|y,L,Q,F)}function Eg(v,y){return iu(8390656,8,v,y)}function Sd(v,y){return Tg(2048,8,v,y)}function $r(v,y){return Tg(4,2,v,y)}function Ig(v,y){return Tg(4,4,v,y)}function cp(v,y){if(typeof y=="function")return v=v(),y(v),function(){y(null)};if(y!=null)return v=v(),y.current=v,function(){y.current=null}}function xd(v,y,L){return L=L!=null?L.concat([v]):null,Tg(4,4,cp.bind(null,y,v),L)}function Lg(){}function Ng(v,y){var L=Ko();y=y===void 0?null:y;var F=L.memoizedState;return F!==null&&y!==null&&Mg(y,F[1])?F[0]:(L.memoizedState=[v,y],v)}function Cd(v,y){var L=Ko();y=y===void 0?null:y;var F=L.memoizedState;return F!==null&&y!==null&&Mg(y,F[1])?F[0]:(v=v(),L.memoizedState=[v,y],v)}function Dg(v,y){var L=Pn;Pn=L!==0&&4>L?L:4,v(!0);var F=$a.transition;$a.transition={};try{v(!1),y()}finally{Pn=L,$a.transition=F}}function Ku(){return Ko().memoizedState}function Ib(v,y,L){var F=el(v);L={lane:F,action:L,hasEagerState:!1,eagerState:null,next:null},Lb(v)?Fv(y,L):(up(v,y,L),L=Er(),v=Xs(v,F,L),v!==null&&fp(v,y,F))}function YT(v,y,L){var F=el(v),G={lane:F,action:L,hasEagerState:!1,eagerState:null,next:null};if(Lb(v))Fv(y,G);else{up(v,y,G);var Q=v.alternate;if(v.lanes===0&&(Q===null||Q.lanes===0)&&(Q=y.lastRenderedReducer,Q!==null))try{var xe=y.lastRenderedState,We=Q(xe,L);if(G.hasEagerState=!0,G.eagerState=We,Li(We,xe))return}catch{}finally{}L=Er(),v=Xs(v,F,L),v!==null&&fp(v,y,F)}}function Lb(v){var y=v.alternate;return v===gi||y!==null&&y===gi}function Fv(v,y){Sl=Cg=!0;var L=v.pending;L===null?y.next=y:(y.next=L.next,L.next=y),v.pending=y}function up(v,y,L){ki!==null&&(v.mode&1)!==0&&(Zn&2)===0?(v=y.interleaved,v===null?(L.next=L,Ni===null?Ni=[y]:Ni.push(y)):(L.next=v.next,v.next=L),y.interleaved=L):(v=y.pending,v===null?L.next=L:(L.next=v.next,v.next=L),y.pending=L)}function fp(v,y,L){if((L&4194240)!==0){var F=y.lanes;F&=v.pendingLanes,L|=F,y.lanes=L,Kr(v,L)}}var Md={readContext:Zr,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useInsertionEffect:hs,useLayoutEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useDeferredValue:hs,useTransition:hs,useMutableSource:hs,useSyncExternalStore:hs,useId:hs,unstable_isNewReconciler:!1},Bv={readContext:Zr,useCallback:function(v,y){return Qo().memoizedState=[v,y===void 0?null:y],v},useContext:Zr,useEffect:Eg,useImperativeHandle:function(v,y,L){return L=L!=null?L.concat([v]):null,iu(4194308,4,cp.bind(null,y,v),L)},useLayoutEffect:function(v,y){return iu(4194308,4,v,y)},useInsertionEffect:function(v,y){return iu(4,2,v,y)},useMemo:function(v,y){var L=Qo();return y=y===void 0?null:y,v=v(),L.memoizedState=[v,y],v},useReducer:function(v,y,L){var F=Qo();return y=L!==void 0?L(y):y,F.memoizedState=F.baseState=y,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:v,lastRenderedState:y},F.queue=v,v=v.dispatch=Ib.bind(null,gi,v),[F.memoizedState,v]},useRef:function(v){var y=Qo();return v={current:v},y.memoizedState=v},useState:op,useDebugValue:Lg,useDeferredValue:function(v){var y=op(v),L=y[0],F=y[1];return Eg(function(){var G=$a.transition;$a.transition={};try{F(v)}finally{$a.transition=G}},[v]),L},useTransition:function(){var v=op(!1),y=v[0];return v=Dg.bind(null,v[1]),Qo().memoizedState=v,[y,v]},useMutableSource:function(){},useSyncExternalStore:function(v,y,L){var F=gi,G=Qo();if(cr){if(L===void 0)throw Error(a(407));L=L()}else{if(L=y(),ki===null)throw Error(a(349));(Xu&30)!==0||Pv(F,y,L)}G.memoizedState=L;var Q={value:L,getSnapshot:y};return G.queue=Q,Eg(tc.bind(null,F,Q,v),[v]),F.flags|=2048,lp(9,Ov.bind(null,F,Q,L,y),void 0,null),L},useId:function(){var v=Qo(),y=ki.identifierPrefix;if(cr){var L=jt,F=ft;L=(F&~(1<<32-Sn(F)-1)).toString(32)+L,y=":"+y+"R"+L,L=Qu++,0<L&&(y+="H"+L.toString(32)),y+=":"}else L=ip++,y=":"+y+"r"+L.toString(32)+":";return v.memoizedState=y},unstable_isNewReconciler:!1},Uv={readContext:Zr,useCallback:Ng,useContext:Zr,useEffect:Sd,useImperativeHandle:xd,useInsertionEffect:$r,useLayoutEffect:Ig,useMemo:Cd,useReducer:sp,useRef:Eb,useState:function(){return sp(xl)},useDebugValue:Lg,useDeferredValue:function(v){var y=sp(xl),L=y[0],F=y[1];return Sd(function(){var G=$a.transition;$a.transition={};try{F(v)}finally{$a.transition=G}},[v]),L},useTransition:function(){var v=sp(xl)[0],y=Ko().memoizedState;return[v,y]},useMutableSource:kv,useSyncExternalStore:Rv,useId:Ku,unstable_isNewReconciler:!1},jv={readContext:Zr,useCallback:Ng,useContext:Zr,useEffect:Sd,useImperativeHandle:xd,useInsertionEffect:$r,useLayoutEffect:Ig,useMemo:Cd,useReducer:ap,useRef:Eb,useState:function(){return ap(xl)},useDebugValue:Lg,useDeferredValue:function(v){var y=ap(xl),L=y[0],F=y[1];return Sd(function(){var G=$a.transition;$a.transition={};try{F(v)}finally{$a.transition=G}},[v]),L},useTransition:function(){var v=ap(xl)[0],y=Ko().memoizedState;return[v,y]},useMutableSource:kv,useSyncExternalStore:Rv,useId:Ku,unstable_isNewReconciler:!1};function zv(v,y){try{var L="",F=y;do L+=_o(F),F=F.return;while(F);var G=L}catch(Q){G=`
Error generating stack: `+Q.message+`
`+Q.stack}return{value:v,source:y,stack:G}}function kg(v,y){try{console.error(y.value)}catch(L){setTimeout(function(){throw L})}}var JT=typeof WeakMap=="function"?WeakMap:Map;function Nb(v,y,L){L=qa(-1,L),L.tag=3,L.payload={element:null};var F=y.value;return L.callback=function(){Nd||(Nd=!0,ii=F),kg(v,y)},L}function Rg(v,y,L){L=qa(-1,L),L.tag=3;var F=v.type.getDerivedStateFromError;if(typeof F=="function"){var G=y.value;L.payload=function(){return F(G)},L.callback=function(){kg(v,y)}}var Q=v.stateNode;return Q!==null&&typeof Q.componentDidCatch=="function"&&(L.callback=function(){kg(v,y),typeof F!="function"&&($o===null?$o=new Set([this]):$o.add(this));var xe=y.stack;this.componentDidCatch(y.value,{componentStack:xe!==null?xe:""})}),L}function nc(v,y,L){var F=v.pingCache;if(F===null){F=v.pingCache=new JT;var G=new Set;F.set(y,G)}else G=F.get(y),G===void 0&&(G=new Set,F.set(y,G));G.has(L)||(G.add(L),v=sy.bind(null,v,y,L),y.then(v,v))}function Vv(v){do{var y;if((y=v.tag===13)&&(y=v.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return v;v=v.return}while(v!==null);return null}function qu(v,y,L,F,G){return(v.mode&1)===0?(v===y?v.flags|=65536:(v.flags|=128,L.flags|=131072,L.flags&=-52805,L.tag===1&&(L.alternate===null?L.tag=17:(y=qa(-1,1),y.tag=2,Yo(L,y))),L.lanes|=1),v):(v.flags|=65536,v.lanes=G,v)}function $i(v){v.flags|=4}function Ad(v,y){if(v!==null&&v.child===y.child)return!0;if((y.flags&16)!==0)return!1;for(v=y.child;v!==null;){if((v.flags&12854)!==0||(v.subtreeFlags&12854)!==0)return!1;v=v.sibling}return!0}var eo,Zu,Pg,Og;if(Ke)eo=function(v,y){for(var L=y.child;L!==null;){if(L.tag===5||L.tag===6)ie(v,L.stateNode);else if(L.tag!==4&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===y)break;for(;L.sibling===null;){if(L.return===null||L.return===y)return;L=L.return}L.sibling.return=L.return,L=L.sibling}},Zu=function(){},Pg=function(v,y,L,F,G){if(v=v.memoizedProps,v!==F){var Q=y.stateNode,xe=Xo(Ea.current);L=$(Q,L,v,F,G,xe),(y.updateQueue=L)&&$i(y)}},Og=function(v,y,L,F){L!==F&&$i(y)};else if(Ie){eo=function(v,y,L,F){for(var G=y.child;G!==null;){if(G.tag===5){var Q=G.stateNode;L&&F&&(Q=qt(Q,G.type,G.memoizedProps,G)),ie(v,Q)}else if(G.tag===6)Q=G.stateNode,L&&F&&(Q=Xe(Q,G.memoizedProps,G)),ie(v,Q);else if(G.tag!==4){if(G.tag===22&&G.memoizedState!==null)Q=G.child,Q!==null&&(Q.return=G),eo(v,G,!0,!0);else if(G.child!==null){G.child.return=G,G=G.child;continue}}if(G===y)break;for(;G.sibling===null;){if(G.return===null||G.return===y)return;G=G.return}G.sibling.return=G.return,G=G.sibling}};var su=function(v,y,L,F){for(var G=y.child;G!==null;){if(G.tag===5){var Q=G.stateNode;L&&F&&(Q=qt(Q,G.type,G.memoizedProps,G)),Yt(v,Q)}else if(G.tag===6)Q=G.stateNode,L&&F&&(Q=Xe(Q,G.memoizedProps,G)),Yt(v,Q);else if(G.tag!==4){if(G.tag===22&&G.memoizedState!==null)Q=G.child,Q!==null&&(Q.return=G),su(v,G,!0,!0);else if(G.child!==null){G.child.return=G,G=G.child;continue}}if(G===y)break;for(;G.sibling===null;){if(G.return===null||G.return===y)return;G=G.return}G.sibling.return=G.return,G=G.sibling}};Zu=function(v,y){var L=y.stateNode;if(!Ad(v,y)){v=L.containerInfo;var F=xt(v);su(F,y,!1,!1),L.pendingChildren=F,$i(y),on(v,F)}},Pg=function(v,y,L,F,G){var Q=v.stateNode,xe=v.memoizedProps;if((v=Ad(v,y))&&xe===F)y.stateNode=Q;else{var We=y.stateNode,St=Xo(Ea.current),Vt=null;xe!==F&&(Vt=$(We,L,xe,F,G,St)),v&&Vt===null?y.stateNode=Q:(Q=Lt(Q,Vt,L,xe,F,y,v,We),he(Q,L,F,G,St)&&$i(y),y.stateNode=Q,v?$i(y):eo(Q,y,!1,!1))}},Og=function(v,y,L,F){L!==F?(v=Xo(Yu.current),L=Xo(Ea.current),y.stateNode=pe(F,v,L,y),$i(y)):y.stateNode=v.stateNode}}else Zu=function(){},Pg=function(){},Og=function(){};function rc(v,y){if(!cr)switch(v.tailMode){case"hidden":y=v.tail;for(var L=null;y!==null;)y.alternate!==null&&(L=y),y=y.sibling;L===null?v.tail=null:L.sibling=null;break;case"collapsed":L=v.tail;for(var F=null;L!==null;)L.alternate!==null&&(F=L),L=L.sibling;F===null?y||v.tail===null?v.tail=null:v.tail.sibling=null:F.sibling=null}}function Di(v){var y=v.alternate!==null&&v.alternate.child===v.child,L=0,F=0;if(y)for(var G=v.child;G!==null;)L|=G.lanes|G.childLanes,F|=G.subtreeFlags&14680064,F|=G.flags&14680064,G.return=v,G=G.sibling;else for(G=v.child;G!==null;)L|=G.lanes|G.childLanes,F|=G.subtreeFlags,F|=G.flags,G.return=v,G=G.sibling;return v.subtreeFlags|=F,v.childLanes=L,y}function Fg(v,y,L){var F=y.pendingProps;switch(Gi(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Di(y),null;case 1:return Bn(y.type)&&pn(),Di(y),null;case 3:return F=y.stateNode,_d(),Et(sn),Et(Mn),Ju(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(v===null||v.child===null)&&(np(y)?$i(y):v===null||v.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Ws!==null&&(Cp(Ws),Ws=null))),Zu(v,y),Di(y),null;case 5:Dv(y),L=Xo(Yu.current);var G=y.type;if(v!==null&&y.stateNode!=null)Pg(v,y,G,F,L),v.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!F){if(y.stateNode===null)throw Error(a(166));return Di(y),null}if(v=Xo(Ea.current),np(y)){if(!Ge)throw Error(a(175));v=se(y.stateNode,y.type,y.memoizedProps,L,v,y,!Jo),y.updateQueue=v,v!==null&&$i(y)}else{var Q=J(G,F,L,v,y);eo(Q,y,!1,!1),y.stateNode=Q,he(Q,G,F,L,v)&&$i(y)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return Di(y),null;case 6:if(v&&y.stateNode!=null)Og(v,y,v.memoizedProps,F);else{if(typeof F!="string"&&y.stateNode===null)throw Error(a(166));if(v=Xo(Yu.current),L=Xo(Ea.current),np(y)){if(!Ge)throw Error(a(176));if(v=y.stateNode,F=y.memoizedProps,(L=fe(v,F,y,!Jo))&&(G=Tr,G!==null))switch(Q=(G.mode&1)!==0,G.tag){case 3:Se(G.stateNode.containerInfo,v,F,Q);break;case 5:De(G.type,G.memoizedProps,G.stateNode,v,F,Q)}L&&$i(y)}else y.stateNode=pe(F,v,L,y)}return Di(y),null;case 13:if(Et(mi),F=y.memoizedState,cr&&li!==null&&(y.mode&1)!==0&&(y.flags&128)===0){for(v=li;v;)v=sr(v);return gd(),y.flags|=98560,y}if(F!==null&&F.dehydrated!==null){if(F=np(y),v===null){if(!F)throw Error(a(318));if(!Ge)throw Error(a(344));if(v=y.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(a(317));Re(v,y)}else gd(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;return Di(y),null}return Ws!==null&&(Cp(Ws),Ws=null),(y.flags&128)!==0?(y.lanes=L,y):(F=F!==null,L=!1,v===null?np(y):L=v.memoizedState!==null,F&&!L&&(y.child.flags|=8192,(y.mode&1)!==0&&(v===null||(mi.current&1)!==0?xi===0&&(xi=3):Hg())),y.updateQueue!==null&&(y.flags|=4),Di(y),null);case 4:return _d(),Zu(v,y),v===null&&_t(y.stateNode.containerInfo),Di(y),null;case 10:return hi(y.type._context),Di(y),null;case 17:return Bn(y.type)&&pn(),Di(y),null;case 19:if(Et(mi),G=y.memoizedState,G===null)return Di(y),null;if(F=(y.flags&128)!==0,Q=G.rendering,Q===null)if(F)rc(G,!1);else{if(xi!==0||v!==null&&(v.flags&128)!==0)for(v=y.child;v!==null;){if(Q=xg(v),Q!==null){for(y.flags|=128,rc(G,!1),v=Q.updateQueue,v!==null&&(y.updateQueue=v,y.flags|=4),y.subtreeFlags=0,v=L,F=y.child;F!==null;)L=F,G=v,L.flags&=14680066,Q=L.alternate,Q===null?(L.childLanes=0,L.lanes=G,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=Q.childLanes,L.lanes=Q.lanes,L.child=Q.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=Q.memoizedProps,L.memoizedState=Q.memoizedState,L.updateQueue=Q.updateQueue,L.type=Q.type,G=Q.dependencies,L.dependencies=G===null?null:{lanes:G.lanes,firstContext:G.firstContext}),F=F.sibling;return Jt(mi,mi.current&1|2),y.child}v=v.sibling}G.tail!==null&&qr()>lu&&(y.flags|=128,F=!0,rc(G,!1),y.lanes=4194304)}else{if(!F)if(v=xg(Q),v!==null){if(y.flags|=128,F=!0,v=v.updateQueue,v!==null&&(y.updateQueue=v,y.flags|=4),rc(G,!0),G.tail===null&&G.tailMode==="hidden"&&!Q.alternate&&!cr)return Di(y),null}else 2*qr()-G.renderingStartTime>lu&&L!==1073741824&&(y.flags|=128,F=!0,rc(G,!1),y.lanes=4194304);G.isBackwards?(Q.sibling=y.child,y.child=Q):(v=G.last,v!==null?v.sibling=Q:y.child=Q,G.last=Q)}return G.tail!==null?(y=G.tail,G.rendering=y,G.tail=y.sibling,G.renderingStartTime=qr(),y.sibling=null,v=mi.current,Jt(mi,F?v&1|2:v&1),y):(Di(y),null);case 22:case 23:return Mp(),F=y.memoizedState!==null,v!==null&&v.memoizedState!==null!==F&&(y.flags|=8192),F&&(y.mode&1)!==0?(Js&1073741824)!==0&&(Di(y),Ke&&y.subtreeFlags&6&&(y.flags|=8192)):Di(y),null;case 24:return null;case 25:return null}throw Error(a(156,y.tag))}var Gv=o.ReactCurrentOwner,ps=!1;function Si(v,y,L,F){y.child=v===null?Ab(y,null,L,F):ec(y,v.child,L,F)}function ei(v,y,L,F,G){L=L.render;var Q=y.ref;return pi(y,G),F=bd(v,y,L,F,Q,G),L=ru(),v!==null&&!ps?(y.updateQueue=v.updateQueue,y.flags&=-2053,v.lanes&=~G,Ia(v,y,G)):(cr&&L&&lr(y),y.flags|=1,Si(v,y,F,G),y.child)}function Yr(v,y,L,F,G){if(v===null){var Q=L.type;return typeof Q=="function"&&!Yg(Q)&&Q.defaultProps===void 0&&L.compare===null&&L.defaultProps===void 0?(y.tag=15,y.type=Q,ic(v,y,Q,F,G)):(v=Jg(L.type,null,F,y,y.mode,G),v.ref=y.ref,v.return=y,y.child=v)}if(Q=v.child,(v.lanes&G)===0){var xe=Q.memoizedProps;if(L=L.compare,L=L!==null?L:Zi,L(xe,F)&&v.ref===y.ref)return Ia(v,y,G)}return y.flags|=1,v=hc(Q,F),v.ref=y.ref,v.return=y,y.child=v}function ic(v,y,L,F,G){if(v!==null&&Zi(v.memoizedProps,F)&&v.ref===y.ref)if(ps=!1,(v.lanes&G)!==0)(v.flags&131072)!==0&&(ps=!0);else return y.lanes=v.lanes,Ia(v,y,G);return sc(v,y,L,F,G)}function As(v,y,L){var F=y.pendingProps,G=F.children,Q=v!==null?v.memoizedState:null;if(F.mode==="hidden")if((y.mode&1)===0)y.memoizedState={baseLanes:0,cachePool:null},Jt(lf,Js),Js|=L;else if((L&1073741824)!==0)y.memoizedState={baseLanes:0,cachePool:null},F=Q!==null?Q.baseLanes:L,Jt(lf,Js),Js|=F;else return v=Q!==null?Q.baseLanes|L:L,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:v,cachePool:null},y.updateQueue=null,Jt(lf,Js),Js|=v,null;else Q!==null?(F=Q.baseLanes|L,y.memoizedState=null):F=L,Jt(lf,Js),Js|=F;return Si(v,y,G,L),y.child}function oa(v,y){var L=y.ref;(v===null&&L!==null||v!==null&&v.ref!==L)&&(y.flags|=512,y.flags|=2097152)}function sc(v,y,L,F,G){var Q=Bn(L)?fn:Mn.current;return Q=Qt(y,Q),pi(y,G),L=bd(v,y,L,F,Q,G),F=ru(),v!==null&&!ps?(y.updateQueue=v.updateQueue,y.flags&=-2053,v.lanes&=~G,Ia(v,y,G)):(cr&&F&&lr(y),y.flags|=1,Si(v,y,L,G),y.child)}function $u(v,y,L,F,G){if(Bn(L)){var Q=!0;An(y)}else Q=!1;if(pi(y,G),y.stateNode===null)v!==null&&(v.alternate=null,y.alternate=null,y.flags|=2),Hu(y,L,F),md(y,L,F,G),F=!0;else if(v===null){var xe=y.stateNode,We=y.memoizedProps;xe.props=We;var St=xe.context,Vt=L.contextType;typeof Vt=="object"&&Vt!==null?Vt=Zr(Vt):(Vt=Bn(L)?fn:Mn.current,Vt=Qt(y,Vt));var cn=L.getDerivedStateFromProps,Gn=typeof cn=="function"||typeof xe.getSnapshotBeforeUpdate=="function";Gn||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(We!==F||St!==Vt)&&Hs(y,xe,F,Vt),sa=!1;var Ln=y.memoizedState;xe.state=Ln,Vu(y,F,xe,G),St=y.memoizedState,We!==F||Ln!==St||sn.current||sa?(typeof cn=="function"&&(hd(y,L,cn,F),St=y.memoizedState),(We=sa||pd(y,L,We,F,Ln,St,Vt))?(Gn||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(y.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=F,y.memoizedState=St),xe.props=F,xe.state=St,xe.context=Vt,F=We):(typeof xe.componentDidMount=="function"&&(y.flags|=4194308),F=!1)}else{xe=y.stateNode,ju(v,y),We=y.memoizedProps,Vt=y.type===y.elementType?We:jr(y.type,We),xe.props=Vt,Gn=y.pendingProps,Ln=xe.context,St=L.contextType,typeof St=="object"&&St!==null?St=Zr(St):(St=Bn(L)?fn:Mn.current,St=Qt(y,St));var er=L.getDerivedStateFromProps;(cn=typeof er=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(We!==Gn||Ln!==St)&&Hs(y,xe,F,St),sa=!1,Ln=y.memoizedState,xe.state=Ln,Vu(y,F,xe,G);var rn=y.memoizedState;We!==Gn||Ln!==rn||sn.current||sa?(typeof er=="function"&&(hd(y,L,er,F),rn=y.memoizedState),(Vt=sa||pd(y,L,Vt,F,Ln,rn,St)||!1)?(cn||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(F,rn,St),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(F,rn,St)),typeof xe.componentDidUpdate=="function"&&(y.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof xe.componentDidUpdate!="function"||We===v.memoizedProps&&Ln===v.memoizedState||(y.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||We===v.memoizedProps&&Ln===v.memoizedState||(y.flags|=1024),y.memoizedProps=F,y.memoizedState=rn),xe.props=F,xe.state=rn,xe.context=St,F=Vt):(typeof xe.componentDidUpdate!="function"||We===v.memoizedProps&&Ln===v.memoizedState||(y.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||We===v.memoizedProps&&Ln===v.memoizedState||(y.flags|=1024),F=!1)}return Ys(v,y,L,F,Q,G)}function Ys(v,y,L,F,G,Q){oa(v,y);var xe=(y.flags&128)!==0;if(!F&&!xe)return G&&gn(y,L,!1),Ia(v,y,Q);F=y.stateNode,Gv.current=y;var We=xe&&typeof L.getDerivedStateFromError!="function"?null:F.render();return y.flags|=1,v!==null&&xe?(y.child=ec(y,v.child,null,Q),y.child=ec(y,null,We,Q)):Si(v,y,We,Q),y.memoizedState=F.state,G&&gn(y,L,!0),y.child}function dp(v){var y=v.stateNode;y.pendingContext?In(v,y.pendingContext,y.pendingContext!==y.context):y.context&&In(v,y.context,!1),Sg(v,y.containerInfo)}function Hv(v,y,L,F,G){return gd(),bg(G),y.flags|=256,Si(v,y,L,F),y.child}var hp={dehydrated:null,treeContext:null,retryLane:0};function ef(v){return{baseLanes:v,cachePool:null}}function Wv(v,y,L){var F=y.pendingProps,G=mi.current,Q=!1,xe=(y.flags&128)!==0,We;if((We=xe)||(We=v!==null&&v.memoizedState===null?!1:(G&2)!==0),We?(Q=!0,y.flags&=-129):(v===null||v.memoizedState!==null)&&(G|=1),Jt(mi,G&1),v===null)return tu(y),v=y.memoizedState,v!==null&&(v=v.dehydrated,v!==null)?((y.mode&1)===0?y.lanes=1:Or(v)?y.lanes=8:y.lanes=1073741824,null):(G=F.children,v=F.fallback,Q?(F=y.mode,Q=y.child,G={mode:"hidden",children:G},(F&1)===0&&Q!==null?(Q.childLanes=0,Q.pendingProps=G):Q=Ep(G,F,0,null),v=hf(v,F,L,null),Q.return=y,v.return=y,Q.sibling=v,y.child=Q,y.child.memoizedState=ef(L),y.memoizedState=hp,v):qo(y,G));if(G=v.memoizedState,G!==null){if(We=G.dehydrated,We!==null){if(xe)return y.flags&256?(y.flags&=-257,mp(v,y,L,Error(a(422)))):y.memoizedState!==null?(y.child=v.child,y.flags|=128,null):(Q=F.fallback,G=y.mode,F=Ep({mode:"visible",children:F.children},G,0,null),Q=hf(Q,G,L,null),Q.flags|=2,F.return=y,Q.return=y,F.sibling=Q,y.child=F,(y.mode&1)!==0&&ec(y,v.child,null,L),y.child.memoizedState=ef(L),y.memoizedState=hp,Q);if((y.mode&1)===0)y=mp(v,y,L,null);else if(Or(We))y=mp(v,y,L,Error(a(419)));else if(F=(L&v.childLanes)!==0,ps||F){if(F=ki,F!==null){switch(L&-L){case 4:Q=2;break;case 16:Q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Q=32;break;case 536870912:Q=268435456;break;default:Q=0}F=(Q&(F.suspendedLanes|L))!==0?0:Q,F!==0&&F!==G.retryLane&&(G.retryLane=F,Xs(v,F,-1))}Hg(),y=mp(v,y,L,Error(a(421)))}else Fn(We)?(y.flags|=128,y.child=v.child,y=Ob.bind(null,v),Yn(We,y),y=null):(L=G.treeContext,Ge&&(li=Ii(We),Tr=y,cr=!0,Ws=null,Jo=!1,L!==null&&(K[de++]=ft,K[de++]=jt,K[de++]=Ze,ft=L.id,jt=L.overflow,Ze=y)),y=qo(y,y.pendingProps.children),y.flags|=4096);return y}return Q?(F=Bg(v,y,F.children,F.fallback,L),Q=y.child,G=v.child.memoizedState,Q.memoizedState=G===null?ef(L):{baseLanes:G.baseLanes|L,cachePool:null},Q.childLanes=v.childLanes&~L,y.memoizedState=hp,F):(L=pp(v,y,F.children,L),y.memoizedState=null,L)}return Q?(F=Bg(v,y,F.children,F.fallback,L),Q=y.child,G=v.child.memoizedState,Q.memoizedState=G===null?ef(L):{baseLanes:G.baseLanes|L,cachePool:null},Q.childLanes=v.childLanes&~L,y.memoizedState=hp,F):(L=pp(v,y,F.children,L),y.memoizedState=null,L)}function qo(v,y){return y=Ep({mode:"visible",children:y},v.mode,0,null),y.return=v,v.child=y}function pp(v,y,L,F){var G=v.child;return v=G.sibling,L=hc(G,{mode:"visible",children:L}),(y.mode&1)===0&&(L.lanes=F),L.return=y,L.sibling=null,v!==null&&(F=y.deletions,F===null?(y.deletions=[v],y.flags|=16):F.push(v)),y.child=L}function Bg(v,y,L,F,G){var Q=y.mode;v=v.child;var xe=v.sibling,We={mode:"hidden",children:L};return(Q&1)===0&&y.child!==v?(L=y.child,L.childLanes=0,L.pendingProps=We,y.deletions=null):(L=hc(v,We),L.subtreeFlags=v.subtreeFlags&14680064),xe!==null?F=hc(xe,F):(F=hf(F,Q,G,null),F.flags|=2),F.return=y,L.return=y,L.sibling=F,y.child=L,F}function mp(v,y,L,F){return F!==null&&bg(F),ec(y,v.child,null,L),v=qo(y,y.pendingProps.children),v.flags|=2,y.memoizedState=null,v}function Db(v,y,L){v.lanes|=y;var F=v.alternate;F!==null&&(F.lanes|=y),oi(v.return,y,L)}function Cl(v,y,L,F,G){var Q=v.memoizedState;Q===null?v.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:F,tail:L,tailMode:G}:(Q.isBackwards=y,Q.rendering=null,Q.renderingStartTime=0,Q.last=F,Q.tail=L,Q.tailMode=G)}function tf(v,y,L){var F=y.pendingProps,G=F.revealOrder,Q=F.tail;if(Si(v,y,F.children,L),F=mi.current,(F&2)!==0)F=F&1|2,y.flags|=128;else{if(v!==null&&(v.flags&128)!==0)e:for(v=y.child;v!==null;){if(v.tag===13)v.memoizedState!==null&&Db(v,L,y);else if(v.tag===19)Db(v,L,y);else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===y)break e;for(;v.sibling===null;){if(v.return===null||v.return===y)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}F&=1}if(Jt(mi,F),(y.mode&1)===0)y.memoizedState=null;else switch(G){case"forwards":for(L=y.child,G=null;L!==null;)v=L.alternate,v!==null&&xg(v)===null&&(G=L),L=L.sibling;L=G,L===null?(G=y.child,y.child=null):(G=L.sibling,L.sibling=null),Cl(y,!1,G,L,Q);break;case"backwards":for(L=null,G=y.child,y.child=null;G!==null;){if(v=G.alternate,v!==null&&xg(v)===null){y.child=G;break}v=G.sibling,G.sibling=L,L=G,G=v}Cl(y,!0,L,null,Q);break;case"together":Cl(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function Ia(v,y,L){if(v!==null&&(y.dependencies=v.dependencies),Ml|=y.lanes,(L&y.childLanes)===0)return null;if(v!==null&&y.child!==v.child)throw Error(a(153));if(y.child!==null){for(v=y.child,L=hc(v,v.pendingProps),y.child=L,L.return=y;v.sibling!==null;)v=v.sibling,L=L.sibling=hc(v,v.pendingProps),L.return=y;L.sibling=null}return y.child}function Ug(v,y,L){switch(y.tag){case 3:dp(y),gd();break;case 5:Tb(y);break;case 1:Bn(y.type)&&An(y);break;case 4:Sg(y,y.stateNode.containerInfo);break;case 10:Ta(y,y.type._context,y.memoizedProps.value);break;case 13:var F=y.memoizedState;if(F!==null)return F.dehydrated!==null?(Jt(mi,mi.current&1),y.flags|=128,null):(L&y.child.childLanes)!==0?Wv(v,y,L):(Jt(mi,mi.current&1),v=Ia(v,y,L),v!==null?v.sibling:null);Jt(mi,mi.current&1);break;case 19:if(F=(L&y.childLanes)!==0,(v.flags&128)!==0){if(F)return tf(v,y,L);y.flags|=128}var G=y.memoizedState;if(G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),Jt(mi,mi.current),F)break;return null;case 22:case 23:return y.lanes=0,As(v,y,L)}return Ia(v,y,L)}function jg(v,y){switch(Gi(y),y.tag){case 1:return Bn(y.type)&&pn(),v=y.flags,v&65536?(y.flags=v&-65537|128,y):null;case 3:return _d(),Et(sn),Et(Mn),Ju(),v=y.flags,(v&65536)!==0&&(v&128)===0?(y.flags=v&-65537|128,y):null;case 5:return Dv(y),null;case 13:if(Et(mi),v=y.memoizedState,v!==null&&v.dehydrated!==null){if(y.alternate===null)throw Error(a(340));gd()}return v=y.flags,v&65536?(y.flags=v&-65537|128,y):null;case 19:return Et(mi),null;case 4:return _d(),null;case 10:return hi(y.type._context),null;case 22:case 23:return Mp(),null;case 24:return null;default:return null}}var la=!1,ms=!1,nf=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function So(v,y){var L=v.ref;if(L!==null)if(typeof L=="function")try{L(null)}catch(F){ua(v,y,F)}else L.current=null}function ac(v,y,L){try{L()}catch(F){ua(v,y,F)}}var Yv=!1;function Jv(v,y){for(oe(v.containerInfo),Xt=y;Xt!==null;)if(v=Xt,y=v.child,(v.subtreeFlags&1028)!==0&&y!==null)y.return=v,Xt=y;else for(;Xt!==null;){v=Xt;try{var L=v.alternate;if((v.flags&1024)!==0)switch(v.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var F=L.memoizedProps,G=L.memoizedState,Q=v.stateNode,xe=Q.getSnapshotBeforeUpdate(v.elementType===v.type?F:jr(v.type,F),G);Q.__reactInternalSnapshotBeforeUpdate=xe}break;case 3:Ke&&yt(v.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(We){ua(v,v.return,We)}if(y=v.sibling,y!==null){y.return=v.return,Xt=y;break}Xt=v.return}return L=Yv,Yv=!1,L}function oc(v,y,L){var F=y.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var G=F=F.next;do{if((G.tag&v)===v){var Q=G.destroy;G.destroy=void 0,Q!==void 0&&ac(y,L,Q)}G=G.next}while(G!==F)}}function Ts(v,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var L=y=y.next;do{if((L.tag&v)===v){var F=L.create;L.destroy=F()}L=L.next}while(L!==y)}}function ca(v){var y=v.ref;if(y!==null){var L=v.stateNode;switch(v.tag){case 5:v=ee(L);break;default:v=L}typeof y=="function"?y(v):y.current=v}}function ri(v,y,L){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Ka,y)}catch{}switch(y.tag){case 0:case 11:case 14:case 15:if(v=y.updateQueue,v!==null&&(v=v.lastEffect,v!==null)){var F=v=v.next;do{var G=F,Q=G.destroy;G=G.tag,Q!==void 0&&((G&2)!==0||(G&4)!==0)&&ac(y,L,Q),F=F.next}while(F!==v)}break;case 1:if(So(y,L),v=y.stateNode,typeof v.componentWillUnmount=="function")try{v.props=y.memoizedProps,v.state=y.memoizedState,v.componentWillUnmount()}catch(xe){ua(y,L,xe)}break;case 5:So(y,L);break;case 4:Ke?Kv(v,y,L):Ie&&Ie&&(y=y.stateNode.containerInfo,L=xt(y),Zt(y,L))}}function xo(v,y,L){for(var F=y;;)if(ri(v,F,L),F.child===null||Ke&&F.tag===4){if(F===y)break;for(;F.sibling===null;){if(F.return===null||F.return===y)return;F=F.return}F.sibling.return=F.return,F=F.sibling}else F.child.return=F,F=F.child}function Xv(v){var y=v.alternate;y!==null&&(v.alternate=null,Xv(y)),v.child=null,v.deletions=null,v.sibling=null,v.tag===5&&(y=v.stateNode,y!==null&&Ne(y)),v.stateNode=null,v.return=null,v.dependencies=null,v.memoizedProps=null,v.memoizedState=null,v.pendingProps=null,v.stateNode=null,v.updateQueue=null}function Qv(v){return v.tag===5||v.tag===3||v.tag===4}function zg(v){e:for(;;){for(;v.sibling===null;){if(v.return===null||Qv(v.return))return null;v=v.return}for(v.sibling.return=v.return,v=v.sibling;v.tag!==5&&v.tag!==6&&v.tag!==18;){if(v.flags&2||v.child===null||v.tag===4)continue e;v.child.return=v,v=v.child}if(!(v.flags&2))return v.stateNode}}function Vg(v){if(Ke){e:{for(var y=v.return;y!==null;){if(Qv(y))break e;y=y.return}throw Error(a(160))}var L=y;switch(L.tag){case 5:y=L.stateNode,L.flags&32&&(tt(y),L.flags&=-33),L=zg(v),Td(v,L,y);break;case 3:case 4:y=L.stateNode.containerInfo,L=zg(v),Gg(v,L,y);break;default:throw Error(a(161))}}}function Gg(v,y,L){var F=v.tag;if(F===5||F===6)v=v.stateNode,y?qe(L,v,y):pt(L,v);else if(F!==4&&(v=v.child,v!==null))for(Gg(v,y,L),v=v.sibling;v!==null;)Gg(v,y,L),v=v.sibling}function Td(v,y,L){var F=v.tag;if(F===5||F===6)v=v.stateNode,y?vt(L,v,y):it(L,v);else if(F!==4&&(v=v.child,v!==null))for(Td(v,y,L),v=v.sibling;v!==null;)Td(v,y,L),v=v.sibling}function Kv(v,y,L){for(var F=y,G=!1,Q,xe;;){if(!G){G=F.return;e:for(;;){if(G===null)throw Error(a(160));switch(Q=G.stateNode,G.tag){case 5:xe=!1;break e;case 3:Q=Q.containerInfo,xe=!0;break e;case 4:Q=Q.containerInfo,xe=!0;break e}G=G.return}G=!0}if(F.tag===5||F.tag===6)xo(v,F,L),xe?Me(Q,F.stateNode):et(Q,F.stateNode);else if(F.tag===18)xe?kt(Q,F.stateNode):Ot(Q,F.stateNode);else if(F.tag===4){if(F.child!==null){Q=F.stateNode.containerInfo,xe=!0,F.child.return=F,F=F.child;continue}}else if(ri(v,F,L),F.child!==null){F.child.return=F,F=F.child;continue}if(F===y)break;for(;F.sibling===null;){if(F.return===null||F.return===y)return;F=F.return,F.tag===4&&(G=!1)}F.sibling.return=F.return,F=F.sibling}}function au(v,y){if(Ke){switch(y.tag){case 0:case 11:case 14:case 15:oc(3,y,y.return),Ts(3,y),oc(5,y,y.return);return;case 1:return;case 5:var L=y.stateNode;if(L!=null){var F=y.memoizedProps;v=v!==null?v.memoizedProps:F;var G=y.type,Q=y.updateQueue;y.updateQueue=null,Q!==null&&at(L,Q,G,v,F,y)}return;case 6:if(y.stateNode===null)throw Error(a(162));L=y.memoizedProps,Ft(y.stateNode,v!==null?v.memoizedProps:L,L);return;case 3:Ge&&v!==null&&v.memoizedState.isDehydrated&&mt(y.stateNode.containerInfo);return;case 12:return;case 13:Ed(y);return;case 19:Ed(y);return;case 17:return}throw Error(a(163))}switch(y.tag){case 0:case 11:case 14:case 15:oc(3,y,y.return),Ts(3,y),oc(5,y,y.return);return;case 12:return;case 13:Ed(y);return;case 19:Ed(y);return;case 3:Ge&&v!==null&&v.memoizedState.isDehydrated&&mt(y.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ie){switch(y.tag){case 1:case 5:case 6:break e;case 3:case 4:y=y.stateNode,Zt(y.containerInfo,y.pendingChildren);break e}throw Error(a(163))}}function Ed(v){var y=v.updateQueue;if(y!==null){v.updateQueue=null;var L=v.stateNode;L===null&&(L=v.stateNode=new nf),y.forEach(function(F){var G=Fb.bind(null,v,F);L.has(F)||(L.add(F),F.then(G,G))})}}function XT(v,y){for(Xt=y;Xt!==null;){y=Xt;var L=y.deletions;if(L!==null)for(var F=0;F<L.length;F++){var G=L[F];try{var Q=v;Ke?Kv(Q,G,y):xo(Q,G,y);var xe=G.alternate;xe!==null&&(xe.return=null),G.return=null}catch(yn){ua(G,y,yn)}}if(L=y.child,(y.subtreeFlags&12854)!==0&&L!==null)L.return=y,Xt=L;else for(;Xt!==null;){y=Xt;try{var We=y.flags;if(We&32&&Ke&&tt(y.stateNode),We&512){var St=y.alternate;if(St!==null){var Vt=St.ref;Vt!==null&&(typeof Vt=="function"?Vt(null):Vt.current=null)}}if(We&8192)switch(y.tag){case 13:if(y.memoizedState!==null){var cn=y.alternate;(cn===null||cn.memoizedState===null)&&(Sp=qr())}break;case 22:var Gn=y.memoizedState!==null,Ln=y.alternate,er=Ln!==null&&Ln.memoizedState!==null;if(L=y,Ke){e:if(F=L,G=Gn,Q=null,Ke)for(var rn=F;;){if(rn.tag===5){if(Q===null){Q=rn;var Ls=rn.stateNode;G?Tt(Ls):Oe(rn.stateNode,rn.memoizedProps)}}else if(rn.tag===6){if(Q===null){var so=rn.stateNode;G?Ae(so):Ye(so,rn.memoizedProps)}}else if((rn.tag!==22&&rn.tag!==23||rn.memoizedState===null||rn===F)&&rn.child!==null){rn.child.return=rn,rn=rn.child;continue}if(rn===F)break;for(;rn.sibling===null;){if(rn.return===null||rn.return===F)break e;Q===rn&&(Q=null),rn=rn.return}Q===rn&&(Q=null),rn.sibling.return=rn.return,rn=rn.sibling}}if(Gn&&!er&&(L.mode&1)!==0){Xt=L;for(var ct=L.child;ct!==null;){for(L=Xt=ct;Xt!==null;){F=Xt;var Qe=F.child;switch(F.tag){case 0:case 11:case 14:case 15:oc(4,F,F.return);break;case 1:So(F,F.return);var wt=F.stateNode;if(typeof wt.componentWillUnmount=="function"){var $t=F.return;try{wt.props=F.memoizedProps,wt.state=F.memoizedState,wt.componentWillUnmount()}catch(yn){ua(F,$t,yn)}}break;case 5:So(F,F.return);break;case 22:if(F.memoizedState!==null){Zv(L);continue}}Qe!==null?(Qe.return=F,Xt=Qe):Zv(L)}ct=ct.sibling}}}switch(We&4102){case 2:Vg(y),y.flags&=-3;break;case 6:Vg(y),y.flags&=-3,au(y.alternate,y);break;case 4096:y.flags&=-4097;break;case 4100:y.flags&=-4097,au(y.alternate,y);break;case 4:au(y.alternate,y)}}catch(yn){ua(y,y.return,yn)}if(L=y.sibling,L!==null){L.return=y.return,Xt=L;break}Xt=y.return}}}function gp(v,y,L){Xt=v,vp(v)}function vp(v,y,L){for(var F=(v.mode&1)!==0;Xt!==null;){var G=Xt,Q=G.child;if(G.tag===22&&F){var xe=G.memoizedState!==null||la;if(!xe){var We=G.alternate,St=We!==null&&We.memoizedState!==null||ms;We=la;var Vt=ms;if(la=xe,(ms=St)&&!Vt)for(Xt=G;Xt!==null;)xe=Xt,St=xe.child,xe.tag===22&&xe.memoizedState!==null?rf(G):St!==null?(St.return=xe,Xt=St):rf(G);for(;Q!==null;)Xt=Q,vp(Q),Q=Q.sibling;Xt=G,la=We,ms=Vt}qv(v)}else(G.subtreeFlags&8772)!==0&&Q!==null?(Q.return=G,Xt=Q):qv(v)}}function qv(v){for(;Xt!==null;){var y=Xt;if((y.flags&8772)!==0){var L=y.alternate;try{if((y.flags&8772)!==0)switch(y.tag){case 0:case 11:case 15:ms||Ts(5,y);break;case 1:var F=y.stateNode;if(y.flags&4&&!ms)if(L===null)F.componentDidMount();else{var G=y.elementType===y.type?L.memoizedProps:jr(y.type,L.memoizedProps);F.componentDidUpdate(G,L.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var Q=y.updateQueue;Q!==null&&bl(y,Q,F);break;case 3:var xe=y.updateQueue;if(xe!==null){if(L=null,y.child!==null)switch(y.child.tag){case 5:L=ee(y.child.stateNode);break;case 1:L=y.child.stateNode}bl(y,xe,L)}break;case 5:var We=y.stateNode;L===null&&y.flags&4&&Le(We,y.type,y.memoizedProps,y);break;case 6:break;case 4:break;case 12:break;case 13:if(Ge&&y.memoizedState===null){var St=y.alternate;if(St!==null){var Vt=St.memoizedState;if(Vt!==null){var cn=Vt.dehydrated;cn!==null&&gt(cn)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}ms||y.flags&512&&ca(y)}catch(Gn){ua(y,y.return,Gn)}}if(y===v){Xt=null;break}if(L=y.sibling,L!==null){L.return=y.return,Xt=L;break}Xt=y.return}}function Zv(v){for(;Xt!==null;){var y=Xt;if(y===v){Xt=null;break}var L=y.sibling;if(L!==null){L.return=y.return,Xt=L;break}Xt=y.return}}function rf(v){for(;Xt!==null;){var y=Xt;try{switch(y.tag){case 0:case 11:case 15:var L=y.return;try{Ts(4,y)}catch(St){ua(y,L,St)}break;case 1:var F=y.stateNode;if(typeof F.componentDidMount=="function"){var G=y.return;try{F.componentDidMount()}catch(St){ua(y,G,St)}}var Q=y.return;try{ca(y)}catch(St){ua(y,Q,St)}break;case 5:var xe=y.return;try{ca(y)}catch(St){ua(y,xe,St)}}}catch(St){ua(y,y.return,St)}if(y===v){Xt=null;break}var We=y.sibling;if(We!==null){We.return=y.return,Xt=We;break}Xt=y.return}}var yp=0,sf=1,af=2,lc=3,Id=4;if(typeof Symbol=="function"&&Symbol.for){var of=Symbol.for;yp=of("selector.component"),sf=of("selector.has_pseudo_class"),af=of("selector.role"),lc=of("selector.test_id"),Id=of("selector.text")}function wp(v){var y=ce(v);if(y!=null){if(typeof y.memoizedProps["data-testname"]!="string")throw Error(a(364));return y}if(v=Z(v),v===null)throw Error(a(362));return v.stateNode.current}function _p(v,y){switch(y.$$typeof){case yp:if(v.type===y.value)return!0;break;case sf:e:{y=y.value,v=[v,0];for(var L=0;L<v.length;){var F=v[L++],G=v[L++],Q=y[G];if(F.tag!==5||!be(F)){for(;Q!=null&&_p(F,Q);)G++,Q=y[G];if(G===y.length){y=!0;break e}else for(F=F.child;F!==null;)v.push(F,G),F=F.sibling}}y=!1}return y;case af:if(v.tag===5&&ve(v.stateNode,y.value))return!0;break;case Id:if((v.tag===5||v.tag===6)&&(v=re(v),v!==null&&0<=v.indexOf(y.value)))return!0;break;case lc:if(v.tag===5&&(v=v.memoizedProps["data-testname"],typeof v=="string"&&v.toLowerCase()===y.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function ou(v){switch(v.$$typeof){case yp:return"<"+(R(v.value)||"Unknown")+">";case sf:return":has("+(ou(v)||"")+")";case af:return'[role="'+v.value+'"]';case Id:return'"'+v.value+'"';case lc:return'[data-testname="'+v.value+'"]';default:throw Error(a(365))}}function to(v,y){var L=[];v=[v,0];for(var F=0;F<v.length;){var G=v[F++],Q=v[F++],xe=y[Q];if(G.tag!==5||!be(G)){for(;xe!=null&&_p(G,xe);)Q++,xe=y[Q];if(Q===y.length)L.push(G);else for(G=G.child;G!==null;)v.push(G,Q),G=G.sibling}}return L}function cc(v,y){if(!Ee)throw Error(a(363));v=wp(v),v=to(v,y),y=[],v=Array.from(v);for(var L=0;L<v.length;){var F=v[L++];if(F.tag===5)be(F)||y.push(F.stateNode);else for(F=F.child;F!==null;)v.push(F),F=F.sibling}return y}var $v=Math.ceil,bp=o.ReactCurrentDispatcher,Zo=o.ReactCurrentOwner,zr=o.ReactCurrentBatchConfig,Zn=0,ki=null,Vr=null,ci=0,Js=0,lf=Ut(0),xi=0,Ld=null,Ml=0,no=0,cf=0,uc=null,Hi=null,Sp=0,lu=1/0;function uf(){lu=qr()+500}var Nd=!1,ii=null,$o=null,Dd=!1,Al=null,ff=0,df=0,fc=null,ti=-1,Ci=0;function Er(){return(Zn&6)!==0?qr():ti!==-1?ti:ti=qr()}function el(v){return(v.mode&1)===0?1:(Zn&2)!==0&&ci!==0?ci&-ci:Ho.transition!==null?(Ci===0&&(v=Dr,Dr<<=1,(Dr&4194240)===0&&(Dr=64),Ci=v),Ci):(v=Pn,v!==0?v:_e())}function Xs(v,y,L){if(50<df)throw df=0,fc=null,Error(a(185));var F=cu(v,y);return F===null?null:(xa(F,y,L),((Zn&2)===0||F!==ki)&&(F===ki&&((Zn&2)===0&&(no|=y),xi===4&&Is(F,ci)),La(F,L),y===1&&Zn===0&&(v.mode&1)===0&&(uf(),Sr&&qi())),F)}function cu(v,y){v.lanes|=y;var L=v.alternate;for(L!==null&&(L.lanes|=y),L=v,v=v.return;v!==null;)v.childLanes|=y,L=v.alternate,L!==null&&(L.childLanes|=y),L=v,v=v.return;return L.tag===3?L.stateNode:null}function La(v,y){var L=v.callbackNode;eu(v,y);var F=_l(v,v===ki?ci:0);if(F===0)L!==null&&Ms(L),v.callbackNode=null,v.callbackPriority=0;else if(y=F&-F,v.callbackPriority!==y){if(L!=null&&Ms(L),y===1)v.tag===0?Go(ro.bind(null,v)):Kl(ro.bind(null,v)),Ce?He(function(){Zn===0&&qi()}):Vs(ji,qi),L=null;else{switch(ra(F)){case 1:L=ji;break;case 4:L=dd;break;case 16:L=us;break;case 536870912:L=Qa;break;default:L=us}L=Wg(L,Es.bind(null,v))}v.callbackPriority=y,v.callbackNode=L}}function Es(v,y){if(ti=-1,Ci=0,(Zn&6)!==0)throw Error(a(327));var L=v.callbackNode;if(Tl()&&v.callbackNode!==L)return null;var F=_l(v,v===ki?ci:0);if(F===0)return null;if((F&30)!==0||(F&v.expiredLanes)!==0||y)y=Ap(v,F);else{y=F;var G=Zn;Zn|=2;var Q=ny();(ki!==v||ci!==y)&&(uf(),dc(v,y));do try{Rb();break}catch(We){ty(v,We)}while(!0);bi(),bp.current=Q,Zn=G,Vr!==null?y=0:(ki=null,ci=0,y=xi)}if(y!==0){if(y===2&&(G=wo(v),G!==0&&(F=G,y=xp(v,G))),y===1)throw L=Ld,dc(v,0),Is(v,F),La(v,qr()),L;if(y===6)Is(v,F);else{if(G=v.current.alternate,(F&30)===0&&!ey(G)&&(y=Ap(v,F),y===2&&(Q=wo(v),Q!==0&&(F=Q,y=xp(v,Q))),y===1))throw L=Ld,dc(v,0),Is(v,F),La(v,qr()),L;switch(v.finishedWork=G,v.finishedLanes=F,y){case 0:case 1:throw Error(a(345));case 2:tl(v,Hi);break;case 3:if(Is(v,F),(F&130023424)===F&&(y=Sp+500-qr(),10<y)){if(_l(v,0)!==0)break;if(G=v.suspendedLanes,(G&F)!==F){Er(),v.pingedLanes|=v.suspendedLanes&G;break}v.timeoutHandle=we(tl.bind(null,v,Hi),y);break}tl(v,Hi);break;case 4:if(Is(v,F),(F&4194240)===F)break;for(y=v.eventTimes,G=-1;0<F;){var xe=31-Sn(F);Q=1<<xe,xe=y[xe],xe>G&&(G=xe),F&=~Q}if(F=G,F=qr()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*$v(F/1960))-F,10<F){v.timeoutHandle=we(tl.bind(null,v,Hi),F);break}tl(v,Hi);break;case 5:tl(v,Hi);break;default:throw Error(a(329))}}}return La(v,qr()),v.callbackNode===L?Es.bind(null,v):null}function xp(v,y){var L=uc;return v.current.memoizedState.isDehydrated&&(dc(v,y).flags|=256),v=Ap(v,y),v!==2&&(y=Hi,Hi=L,y!==null&&Cp(y)),v}function Cp(v){Hi===null?Hi=v:Hi.push.apply(Hi,v)}function ey(v){for(var y=v;;){if(y.flags&16384){var L=y.updateQueue;if(L!==null&&(L=L.stores,L!==null))for(var F=0;F<L.length;F++){var G=L[F],Q=G.getSnapshot;G=G.value;try{if(!Li(Q(),G))return!1}catch{return!1}}}if(L=y.child,y.subtreeFlags&16384&&L!==null)L.return=y,y=L;else{if(y===v)break;for(;y.sibling===null;){if(y.return===null||y.return===v)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function Is(v,y){for(y&=~cf,y&=~no,v.suspendedLanes|=y,v.pingedLanes&=~y,v=v.expirationTimes;0<y;){var L=31-Sn(y),F=1<<L;v[L]=-1,y&=~F}}function ro(v){if((Zn&6)!==0)throw Error(a(327));Tl();var y=_l(v,0);if((y&1)===0)return La(v,qr()),null;var L=Ap(v,y);if(v.tag!==0&&L===2){var F=wo(v);F!==0&&(y=F,L=xp(v,F))}if(L===1)throw L=Ld,dc(v,0),Is(v,y),La(v,qr()),L;if(L===6)throw Error(a(345));return v.finishedWork=v.current.alternate,v.finishedLanes=y,tl(v,Hi),La(v,qr()),null}function kd(v){Al!==null&&Al.tag===0&&(Zn&6)===0&&Tl();var y=Zn;Zn|=1;var L=zr.transition,F=Pn;try{if(zr.transition=null,Pn=1,v)return v()}finally{Pn=F,zr.transition=L,Zn=y,(Zn&6)===0&&qi()}}function Mp(){Js=lf.current,Et(lf)}function dc(v,y){v.finishedWork=null,v.finishedLanes=0;var L=v.timeoutHandle;if(L!==Pe&&(v.timeoutHandle=Pe,ke(L)),Vr!==null)for(L=Vr.return;L!==null;){var F=L;switch(Gi(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&pn();break;case 3:_d(),Et(sn),Et(Mn),Ju();break;case 5:Dv(F);break;case 4:_d();break;case 13:Et(mi);break;case 19:Et(mi);break;case 10:hi(F.type._context);break;case 22:case 23:Mp()}L=L.return}if(ki=v,Vr=v=hc(v.current,null),ci=Js=y,xi=0,Ld=null,cf=no=Ml=0,Hi=uc=null,Ni!==null){for(y=0;y<Ni.length;y++)if(L=Ni[y],F=L.interleaved,F!==null){L.interleaved=null;var G=F.next,Q=L.pending;if(Q!==null){var xe=Q.next;Q.next=G,F.next=xe}L.pending=F}Ni=null}return v}function ty(v,y){do{var L=Vr;try{if(bi(),rp.current=Md,Cg){for(var F=gi.memoizedState;F!==null;){var G=F.queue;G!==null&&(G.pending=null),F=F.next}Cg=!1}if(Xu=0,ds=fs=gi=null,Sl=!1,Qu=0,Zo.current=null,L===null||L.return===null){xi=1,Ld=y,Vr=null;break}e:{var Q=v,xe=L.return,We=L,St=y;if(y=ci,We.flags|=32768,St!==null&&typeof St=="object"&&typeof St.then=="function"){var Vt=St,cn=We,Gn=cn.tag;if((cn.mode&1)===0&&(Gn===0||Gn===11||Gn===15)){var Ln=cn.alternate;Ln?(cn.updateQueue=Ln.updateQueue,cn.memoizedState=Ln.memoizedState,cn.lanes=Ln.lanes):(cn.updateQueue=null,cn.memoizedState=null)}var er=Vv(xe);if(er!==null){er.flags&=-257,qu(er,xe,We,Q,y),er.mode&1&&nc(Q,Vt,y),y=er,St=Vt;var rn=y.updateQueue;if(rn===null){var Ls=new Set;Ls.add(St),y.updateQueue=Ls}else rn.add(St);break e}else{if((y&1)===0){nc(Q,Vt,y),Hg();break e}St=Error(a(426))}}else if(cr&&We.mode&1){var so=Vv(xe);if(so!==null){(so.flags&65536)===0&&(so.flags|=256),qu(so,xe,We,Q,y),bg(St);break e}}Q=St,xi!==4&&(xi=2),uc===null?uc=[Q]:uc.push(Q),St=zv(St,We),We=xe;do{switch(We.tag){case 3:We.flags|=65536,y&=-y,We.lanes|=y;var ct=Nb(We,St,y);zu(We,ct);break e;case 1:Q=St;var Qe=We.type,wt=We.stateNode;if((We.flags&128)===0&&(typeof Qe.getDerivedStateFromError=="function"||wt!==null&&typeof wt.componentDidCatch=="function"&&($o===null||!$o.has(wt)))){We.flags|=65536,y&=-y,We.lanes|=y;var $t=Rg(We,Q,y);zu(We,$t);break e}}We=We.return}while(We!==null)}iy(L)}catch(yn){y=yn,Vr===L&&L!==null&&(Vr=L=L.return);continue}break}while(!0)}function ny(){var v=bp.current;return bp.current=Md,v===null?Md:v}function Hg(){(xi===0||xi===3||xi===2)&&(xi=4),ki===null||(Ml&268435455)===0&&(no&268435455)===0||Is(ki,ci)}function Ap(v,y){var L=Zn;Zn|=2;var F=ny();ki===v&&ci===y||dc(v,y);do try{kb();break}catch(G){ty(v,G)}while(!0);if(bi(),Zn=L,bp.current=F,Vr!==null)throw Error(a(261));return ki=null,ci=0,xi}function kb(){for(;Vr!==null;)ry(Vr)}function Rb(){for(;Vr!==null&&!Ca();)ry(Vr)}function ry(v){var y=oy(v.alternate,v,Js);v.memoizedProps=v.pendingProps,y===null?iy(v):Vr=y,Zo.current=null}function iy(v){var y=v;do{var L=y.alternate;if(v=y.return,(y.flags&32768)===0){if(L=Fg(L,y,Js),L!==null){Vr=L;return}}else{if(L=jg(L,y),L!==null){L.flags&=32767,Vr=L;return}if(v!==null)v.flags|=32768,v.subtreeFlags=0,v.deletions=null;else{xi=6,Vr=null;return}}if(y=y.sibling,y!==null){Vr=y;return}Vr=y=v}while(y!==null);xi===0&&(xi=5)}function tl(v,y){var L=Pn,F=zr.transition;try{zr.transition=null,Pn=1,Pb(v,y,L)}finally{zr.transition=F,Pn=L}return null}function Pb(v,y,L){do Tl();while(Al!==null);if((Zn&6)!==0)throw Error(a(327));var F=v.finishedWork,G=v.finishedLanes;if(F===null)return null;if(v.finishedWork=null,v.finishedLanes=0,F===v.current)throw Error(a(177));v.callbackNode=null,v.callbackPriority=0;var Q=F.lanes|F.childLanes;if(Cs(v,Q),v===ki&&(Vr=ki=null,ci=0),(F.subtreeFlags&2064)===0&&(F.flags&2064)===0||Dd||(Dd=!0,Wg(us,function(){return Tl(),null})),Q=(F.flags&15990)!==0,(F.subtreeFlags&15990)!==0||Q){Q=zr.transition,zr.transition=null;var xe=Pn;Pn=1;var We=Zn;Zn|=4,Zo.current=null,Jv(v,F),XT(v,F),q(v.containerInfo),v.current=F,gp(F),fd(),Zn=We,Pn=xe,zr.transition=Q}else v.current=F;if(Dd&&(Dd=!1,Al=v,ff=G),Q=v.pendingLanes,Q===0&&($o=null),ia(F.stateNode),La(v,qr()),y!==null)for(L=v.onRecoverableError,F=0;F<y.length;F++)L(y[F]);if(Nd)throw Nd=!1,v=ii,ii=null,v;return(ff&1)!==0&&v.tag!==0&&Tl(),Q=v.pendingLanes,(Q&1)!==0?v===fc?df++:(df=0,fc=v):df=0,qi(),null}function Tl(){if(Al!==null){var v=ra(ff),y=zr.transition,L=Pn;try{if(zr.transition=null,Pn=16>v?16:v,Al===null)var F=!1;else{if(v=Al,Al=null,ff=0,(Zn&6)!==0)throw Error(a(331));var G=Zn;for(Zn|=4,Xt=v.current;Xt!==null;){var Q=Xt,xe=Q.child;if((Xt.flags&16)!==0){var We=Q.deletions;if(We!==null){for(var St=0;St<We.length;St++){var Vt=We[St];for(Xt=Vt;Xt!==null;){var cn=Xt;switch(cn.tag){case 0:case 11:case 15:oc(8,cn,Q)}var Gn=cn.child;if(Gn!==null)Gn.return=cn,Xt=Gn;else for(;Xt!==null;){cn=Xt;var Ln=cn.sibling,er=cn.return;if(Xv(cn),cn===Vt){Xt=null;break}if(Ln!==null){Ln.return=er,Xt=Ln;break}Xt=er}}}var rn=Q.alternate;if(rn!==null){var Ls=rn.child;if(Ls!==null){rn.child=null;do{var so=Ls.sibling;Ls.sibling=null,Ls=so}while(Ls!==null)}}Xt=Q}}if((Q.subtreeFlags&2064)!==0&&xe!==null)xe.return=Q,Xt=xe;else e:for(;Xt!==null;){if(Q=Xt,(Q.flags&2048)!==0)switch(Q.tag){case 0:case 11:case 15:oc(9,Q,Q.return)}var ct=Q.sibling;if(ct!==null){ct.return=Q.return,Xt=ct;break e}Xt=Q.return}}var Qe=v.current;for(Xt=Qe;Xt!==null;){xe=Xt;var wt=xe.child;if((xe.subtreeFlags&2064)!==0&&wt!==null)wt.return=xe,Xt=wt;else e:for(xe=Qe;Xt!==null;){if(We=Xt,(We.flags&2048)!==0)try{switch(We.tag){case 0:case 11:case 15:Ts(9,We)}}catch(yn){ua(We,We.return,yn)}if(We===xe){Xt=null;break e}var $t=We.sibling;if($t!==null){$t.return=We.return,Xt=$t;break e}Xt=We.return}}if(Zn=G,qi(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Ka,v)}catch{}F=!0}return F}finally{Pn=L,zr.transition=y}}return!1}function Tp(v,y,L){y=zv(L,y),y=Nb(v,y,1),Yo(v,y),y=Er(),v=cu(v,1),v!==null&&(xa(v,1,y),La(v,y))}function ua(v,y,L){if(v.tag===3)Tp(v,v,L);else for(;y!==null;){if(y.tag===3){Tp(y,v,L);break}else if(y.tag===1){var F=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&($o===null||!$o.has(F))){v=zv(L,v),v=Rg(y,v,1),Yo(y,v),v=Er(),y=cu(y,1),y!==null&&(xa(y,1,v),La(y,v));break}}y=y.return}}function sy(v,y,L){var F=v.pingCache;F!==null&&F.delete(y),y=Er(),v.pingedLanes|=v.suspendedLanes&L,ki===v&&(ci&L)===L&&(xi===4||xi===3&&(ci&130023424)===ci&&500>qr()-Sp?dc(v,0):cf|=L),La(v,y)}function ay(v,y){y===0&&((v.mode&1)===0?y=1:(y=Un,Un<<=1,(Un&130023424)===0&&(Un=4194304)));var L=Er();v=cu(v,y),v!==null&&(xa(v,y,L),La(v,L))}function Ob(v){var y=v.memoizedState,L=0;y!==null&&(L=y.retryLane),ay(v,L)}function Fb(v,y){var L=0;switch(v.tag){case 13:var F=v.stateNode,G=v.memoizedState;G!==null&&(L=G.retryLane);break;case 19:F=v.stateNode;break;default:throw Error(a(314))}F!==null&&F.delete(y),ay(v,L)}var oy;oy=function(v,y,L){if(v!==null)if(v.memoizedProps!==y.pendingProps||sn.current)ps=!0;else{if((v.lanes&L)===0&&(y.flags&128)===0)return ps=!1,Ug(v,y,L);ps=(v.flags&131072)!==0}else ps=!1,cr&&(y.flags&1048576)!==0&&Vi(y,H,y.index);switch(y.lanes=0,y.tag){case 2:var F=y.type;v!==null&&(v.alternate=null,y.alternate=null,y.flags|=2),v=y.pendingProps;var G=Qt(y,Mn.current);pi(y,L),G=bd(null,y,F,v,G,L);var Q=ru();return y.flags|=1,typeof G=="object"&&G!==null&&typeof G.render=="function"&&G.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,Bn(F)?(Q=!0,An(y)):Q=!1,y.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,ql(y),G.updater=Gu,y.stateNode=G,G._reactInternals=y,md(y,F,v,L),y=Ys(null,y,F,!0,Q,L)):(y.tag=0,cr&&Q&&lr(y),Si(null,y,G,L),y=y.child),y;case 16:F=y.elementType;e:{switch(v!==null&&(v.alternate=null,y.alternate=null,y.flags|=2),v=y.pendingProps,G=F._init,F=G(F._payload),y.type=F,G=y.tag=QT(F),v=jr(F,v),G){case 0:y=sc(null,y,F,v,L);break e;case 1:y=$u(null,y,F,v,L);break e;case 11:y=ei(null,y,F,v,L);break e;case 14:y=Yr(null,y,F,jr(F.type,v),L);break e}throw Error(a(306,F,""))}return y;case 0:return F=y.type,G=y.pendingProps,G=y.elementType===F?G:jr(F,G),sc(v,y,F,G,L);case 1:return F=y.type,G=y.pendingProps,G=y.elementType===F?G:jr(F,G),$u(v,y,F,G,L);case 3:e:{if(dp(y),v===null)throw Error(a(387));F=y.pendingProps,Q=y.memoizedState,G=Q.element,ju(v,y),Vu(y,F,null,L);var xe=y.memoizedState;if(F=xe.element,Ge&&Q.isDehydrated)if(Q={element:F,isDehydrated:!1,cache:xe.cache,transitions:xe.transitions},y.updateQueue.baseState=Q,y.memoizedState=Q,y.flags&256){G=Error(a(423)),y=Hv(v,y,F,L,G);break e}else if(F!==G){G=Error(a(424)),y=Hv(v,y,F,L,G);break e}else for(Ge&&(li=ni(y.stateNode.containerInfo),Tr=y,cr=!0,Ws=null,Jo=!1),L=Ab(y,null,F,L),y.child=L;L;)L.flags=L.flags&-3|4096,L=L.sibling;else{if(gd(),F===G){y=Ia(v,y,L);break e}Si(v,y,F,L)}y=y.child}return y;case 5:return Tb(y),v===null&&tu(y),F=y.type,G=y.pendingProps,Q=v!==null?v.memoizedProps:null,xe=G.children,ge(F,G)?xe=null:Q!==null&&ge(F,Q)&&(y.flags|=32),oa(v,y),Si(v,y,xe,L),y.child;case 6:return v===null&&tu(y),null;case 13:return Wv(v,y,L);case 4:return Sg(y,y.stateNode.containerInfo),F=y.pendingProps,v===null?y.child=ec(y,null,F,L):Si(v,y,F,L),y.child;case 11:return F=y.type,G=y.pendingProps,G=y.elementType===F?G:jr(F,G),ei(v,y,F,G,L);case 7:return Si(v,y,y.pendingProps,L),y.child;case 8:return Si(v,y,y.pendingProps.children,L),y.child;case 12:return Si(v,y,y.pendingProps.children,L),y.child;case 10:e:{if(F=y.type._context,G=y.pendingProps,Q=y.memoizedProps,xe=G.value,Ta(y,F,xe),Q!==null)if(Li(Q.value,xe)){if(Q.children===G.children&&!sn.current){y=Ia(v,y,L);break e}}else for(Q=y.child,Q!==null&&(Q.return=y);Q!==null;){var We=Q.dependencies;if(We!==null){xe=Q.child;for(var St=We.firstContext;St!==null;){if(St.context===F){if(Q.tag===1){St=qa(-1,L&-L),St.tag=2;var Vt=Q.updateQueue;if(Vt!==null){Vt=Vt.shared;var cn=Vt.pending;cn===null?St.next=St:(St.next=cn.next,cn.next=St),Vt.pending=St}}Q.lanes|=L,St=Q.alternate,St!==null&&(St.lanes|=L),oi(Q.return,L,y),We.lanes|=L;break}St=St.next}}else if(Q.tag===10)xe=Q.type===y.type?null:Q.child;else if(Q.tag===18){if(xe=Q.return,xe===null)throw Error(a(341));xe.lanes|=L,We=xe.alternate,We!==null&&(We.lanes|=L),oi(xe,L,y),xe=Q.sibling}else xe=Q.child;if(xe!==null)xe.return=Q;else for(xe=Q;xe!==null;){if(xe===y){xe=null;break}if(Q=xe.sibling,Q!==null){Q.return=xe.return,xe=Q;break}xe=xe.return}Q=xe}Si(v,y,G.children,L),y=y.child}return y;case 9:return G=y.type,F=y.pendingProps.children,pi(y,L),G=Zr(G),F=F(G),y.flags|=1,Si(v,y,F,L),y.child;case 14:return F=y.type,G=jr(F,y.pendingProps),G=jr(F.type,G),Yr(v,y,F,G,L);case 15:return ic(v,y,y.type,y.pendingProps,L);case 17:return F=y.type,G=y.pendingProps,G=y.elementType===F?G:jr(F,G),v!==null&&(v.alternate=null,y.alternate=null,y.flags|=2),y.tag=1,Bn(F)?(v=!0,An(y)):v=!1,pi(y,L),Hu(y,F,G),md(y,F,G,L),Ys(null,y,F,!0,v,L);case 19:return tf(v,y,L);case 22:return As(v,y,L)}throw Error(a(156,y.tag))};function Wg(v,y){return Vs(v,y)}function Bb(v,y,L,F){this.tag=v,this.key=L,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function io(v,y,L,F){return new Bb(v,y,L,F)}function Yg(v){return v=v.prototype,!(!v||!v.isReactComponent)}function QT(v){if(typeof v=="function")return Yg(v)?1:0;if(v!=null){if(v=v.$$typeof,v===_)return 11;if(v===C)return 14}return 2}function hc(v,y){var L=v.alternate;return L===null?(L=io(v.tag,y,v.key,v.mode),L.elementType=v.elementType,L.type=v.type,L.stateNode=v.stateNode,L.alternate=v,v.alternate=L):(L.pendingProps=y,L.type=v.type,L.flags=0,L.subtreeFlags=0,L.deletions=null),L.flags=v.flags&14680064,L.childLanes=v.childLanes,L.lanes=v.lanes,L.child=v.child,L.memoizedProps=v.memoizedProps,L.memoizedState=v.memoizedState,L.updateQueue=v.updateQueue,y=v.dependencies,L.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},L.sibling=v.sibling,L.index=v.index,L.ref=v.ref,L}function Jg(v,y,L,F,G,Q){var xe=2;if(F=v,typeof v=="function")Yg(v)&&(xe=1);else if(typeof v=="string")xe=5;else e:switch(v){case u:return hf(L.children,G,Q,y);case f:xe=8,G|=8;break;case d:return v=io(12,L,y,G|2),v.elementType=d,v.lanes=Q,v;case w:return v=io(13,L,y,G),v.elementType=w,v.lanes=Q,v;case b:return v=io(19,L,y,G),v.elementType=b,v.lanes=Q,v;case A:return Ep(L,G,Q,y);default:if(typeof v=="object"&&v!==null)switch(v.$$typeof){case p:xe=10;break e;case g:xe=9;break e;case _:xe=11;break e;case C:xe=14;break e;case M:xe=16,F=null;break e}throw Error(a(130,v==null?v:typeof v,""))}return y=io(xe,L,y,G),y.elementType=v,y.type=F,y.lanes=Q,y}function hf(v,y,L,F){return v=io(7,v,F,y),v.lanes=L,v}function Ep(v,y,L,F){return v=io(22,v,F,y),v.elementType=A,v.lanes=L,v.stateNode={},v}function Xg(v,y,L){return v=io(6,v,null,y),v.lanes=L,v}function Qg(v,y,L){return y=io(4,v.children!==null?v.children:[],v.key,y),y.lanes=L,y.stateNode={containerInfo:v.containerInfo,pendingChildren:null,implementation:v.implementation},y}function Kg(v,y,L,F,G){this.tag=y,this.containerInfo=v,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Pe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ql(0),this.expirationTimes=Ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ql(0),this.identifierPrefix=F,this.onRecoverableError=G,Ge&&(this.mutableSourceEagerHydrationData=null)}function Ub(v,y,L,F,G,Q,xe,We,St){return v=new Kg(v,y,L,We,St),y===1?(y=1,Q===!0&&(y|=8)):y=0,Q=io(3,null,null,y),v.current=Q,Q.stateNode=v,Q.memoizedState={element:F,isDehydrated:L,cache:null,transitions:null},ql(Q),v}function jb(v){if(!v)return Wt;v=v._reactInternals;e:{if(D(v)!==v||v.tag!==1)throw Error(a(170));var y=v;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(Bn(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(a(171))}if(v.tag===1){var L=v.type;if(Bn(L))return Ar(v,L,y)}return y}function zb(v){var y=v._reactInternals;if(y===void 0)throw typeof v.render=="function"?Error(a(188)):(v=Object.keys(v).join(","),Error(a(268,v)));return v=U(y),v===null?null:v.stateNode}function Co(v,y){if(v=v.memoizedState,v!==null&&v.dehydrated!==null){var L=v.retryLane;v.retryLane=L!==0&&L<y?L:y}}function Ip(v,y){Co(v,y),(v=v.alternate)&&Co(v,y)}function qg(v){return v=U(v),v===null?null:v.stateNode}function Vb(){return null}return t.attemptContinuousHydration=function(v){if(v.tag===13){var y=Er();Xs(v,134217728,y),Ip(v,134217728)}},t.attemptHydrationAtCurrentPriority=function(v){if(v.tag===13){var y=Er(),L=el(v);Xs(v,L,y),Ip(v,L)}},t.attemptSynchronousHydration=function(v){switch(v.tag){case 3:var y=v.stateNode;if(y.current.memoizedState.isDehydrated){var L=ai(y.pendingLanes);L!==0&&(Kr(y,L|1),La(y,qr()),(Zn&6)===0&&(uf(),qi()))}break;case 13:var F=Er();kd(function(){return Xs(v,1,F)}),Ip(v,1)}},t.batchedUpdates=function(v,y){var L=Zn;Zn|=1;try{return v(y)}finally{Zn=L,Zn===0&&(uf(),Sr&&qi())}},t.createComponentSelector=function(v){return{$$typeof:yp,value:v}},t.createContainer=function(v,y,L,F,G,Q,xe){return Ub(v,y,!1,null,L,F,G,Q,xe)},t.createHasPseudoClassSelector=function(v){return{$$typeof:sf,value:v}},t.createHydrationContainer=function(v,y,L,F,G,Q,xe,We,St){return v=Ub(L,F,!0,v,G,Q,xe,We,St),v.context=jb(null),L=v.current,F=Er(),G=el(L),Q=qa(F,G),Q.callback=y??null,Yo(L,Q),v.current.lanes=G,xa(v,G,F),La(v,F),v},t.createPortal=function(v,y,L){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:F==null?null:""+F,children:v,containerInfo:y,implementation:L}},t.createRoleSelector=function(v){return{$$typeof:af,value:v}},t.createTestNameSelector=function(v){return{$$typeof:lc,value:v}},t.createTextSelector=function(v){return{$$typeof:Id,value:v}},t.deferredUpdates=function(v){var y=Pn,L=zr.transition;try{return zr.transition=null,Pn=16,v()}finally{Pn=y,zr.transition=L}},t.discreteUpdates=function(v,y,L,F,G){var Q=Pn,xe=zr.transition;try{return zr.transition=null,Pn=1,v(y,L,F,G)}finally{Pn=Q,zr.transition=xe,Zn===0&&uf()}},t.findAllNodes=cc,t.findBoundingRects=function(v,y){if(!Ee)throw Error(a(363));y=cc(v,y),v=[];for(var L=0;L<y.length;L++)v.push(W(y[L]));for(y=v.length-1;0<y;y--){L=v[y];for(var F=L.x,G=F+L.width,Q=L.y,xe=Q+L.height,We=y-1;0<=We;We--)if(y!==We){var St=v[We],Vt=St.x,cn=Vt+St.width,Gn=St.y,Ln=Gn+St.height;if(F>=Vt&&Q>=Gn&&G<=cn&&xe<=Ln){v.splice(y,1);break}else if(F!==Vt||L.width!==St.width||Ln<Q||Gn>xe){if(!(Q!==Gn||L.height!==St.height||cn<F||Vt>G)){Vt>F&&(St.width+=Vt-F,St.x=F),cn<G&&(St.width=G-Vt),v.splice(y,1);break}}else{Gn>Q&&(St.height+=Gn-Q,St.y=Q),Ln<xe&&(St.height=xe-Gn),v.splice(y,1);break}}}return v},t.findHostInstance=zb,t.findHostInstanceWithNoPortals=function(v){return v=B(v),v=v!==null?X(v):null,v===null?null:v.stateNode},t.findHostInstanceWithWarning=function(v){return zb(v)},t.flushControlled=function(v){var y=Zn;Zn|=1;var L=zr.transition,F=Pn;try{zr.transition=null,Pn=1,v()}finally{Pn=F,zr.transition=L,Zn=y,Zn===0&&(uf(),qi())}},t.flushPassiveEffects=Tl,t.flushSync=kd,t.focusWithin=function(v,y){if(!Ee)throw Error(a(363));for(v=wp(v),y=to(v,y),y=Array.from(y),v=0;v<y.length;){var L=y[v++];if(!be(L)){if(L.tag===5&&Je(L.stateNode))return!0;for(L=L.child;L!==null;)y.push(L),L=L.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Pn},t.getFindAllNodesFailureDescription=function(v,y){if(!Ee)throw Error(a(363));var L=0,F=[];v=[wp(v),0];for(var G=0;G<v.length;){var Q=v[G++],xe=v[G++],We=y[xe];if((Q.tag!==5||!be(Q))&&(_p(Q,We)&&(F.push(ou(We)),xe++,xe>L&&(L=xe)),xe<y.length))for(Q=Q.child;Q!==null;)v.push(Q,xe),Q=Q.sibling}if(L<y.length){for(v=[];L<y.length;L++)v.push(ou(y[L]));return`findAllNodes was able to match part of the selector:
  `+(F.join(" > ")+`

No matching component was found for:
  `)+v.join(" > ")}return null},t.getPublicRootInstance=function(v){if(v=v.current,!v.child)return null;switch(v.child.tag){case 5:return ee(v.child.stateNode);default:return v.child.stateNode}},t.injectIntoDevTools=function(v){if(v={bundleType:v.bundleType,version:v.version,rendererPackageName:v.rendererPackageName,rendererConfig:v.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:qg,findFiberByHostInstance:v.findFiberByHostInstance||Vb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")v=!1;else{var y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(y.isDisabled||!y.supportsFiber)v=!0;else{try{Ka=y.inject(v),Gs=y}catch{}v=!!y.checkDCE}}return v},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(v,y,L,F){if(!Ee)throw Error(a(363));v=cc(v,y);var G=$e(v,L,F).disconnect;return{disconnect:function(){G()}}},t.registerMutableSourceForHydration=function(v,y){var L=y._getVersion;L=L(y._source),v.mutableSourceEagerHydrationData==null?v.mutableSourceEagerHydrationData=[y,L]:v.mutableSourceEagerHydrationData.push(y,L)},t.runWithPriority=function(v,y){var L=Pn;try{return Pn=v,y()}finally{Pn=L}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(v,y,L,F){var G=y.current,Q=Er(),xe=el(G);return L=jb(L),y.context===null?y.context=L:y.pendingContext=L,y=qa(Q,xe),y.payload={element:v},F=F===void 0?null:F,F!==null&&(y.callback=F),Yo(G,y),v=Xs(G,xe,Q),v!==null&&Zl(v,G,xe),xe},t}),tI}var YU;function aCe(){return YU||(YU=1,Z4.exports=sCe()),Z4.exports}var oCe=aCe();const lCe=pN(oCe);var JU=PJ();const IR={},OJ=r=>void Object.assign(IR,r);function cCe(r,e){function t(u,{args:f=[],attach:d,...p},g){let _=`${u[0].toUpperCase()}${u.slice(1)}`,w;if(u==="primitive"){if(p.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const b=p.object;w=R0(b,{type:u,root:g,attach:d,primitive:!0})}else{const b=IR[_];if(!b)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");w=R0(new b(...f),{type:u,root:g,attach:d,memoizedProps:{args:f}})}return w.__r3f.attach===void 0&&(w.isBufferGeometry?w.__r3f.attach="geometry":w.isMaterial&&(w.__r3f.attach="material")),_!=="inject"&&iI(w,p),w}function n(u,f){let d=!1;if(f){var p,g;(p=f.__r3f)!=null&&p.attach?rI(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),d=!0),d||(g=u.__r3f)==null||g.objects.push(f),f.__r3f||R0(f,{}),f.__r3f.parent=u,L3(f),P0(f)}}function i(u,f,d){let p=!1;if(f){var g,_;if((g=f.__r3f)!=null&&g.attach)rI(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:f});const w=u.children.filter(C=>C!==f),b=w.indexOf(d);u.children=[...w.slice(0,b),f,...w.slice(b)],p=!0}p||(_=u.__r3f)==null||_.objects.push(f),f.__r3f||R0(f,{}),f.__r3f.parent=u,L3(f),P0(f)}}function s(u,f,d=!1){u&&[...u].forEach(p=>a(f,p,d))}function a(u,f,d){if(f){var p,g,_;if(f.__r3f&&(f.__r3f.parent=null),(p=u.__r3f)!=null&&p.objects&&(u.__r3f.objects=u.__r3f.objects.filter(A=>A!==f)),(g=f.__r3f)!=null&&g.attach)ZU(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var w;u.remove(f),(w=f.__r3f)!=null&&w.root&&gCe(Lx(f),f)}const C=(_=f.__r3f)==null?void 0:_.primitive,M=!C&&(d===void 0?f.dispose!==null:d);if(!C){var b;s((b=f.__r3f)==null?void 0:b.objects,f,M),s(f.children,f,M)}if(delete f.__r3f,M&&f.dispose&&f.type!=="Scene"){const A=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?JU.unstable_scheduleCallback(JU.unstable_IdlePriority,A):A()}P0(u)}}function o(u,f,d,p){var g;const _=(g=u.__r3f)==null?void 0:g.parent;if(!_)return;const w=t(f,d,u.__r3f.root);if(u.children){for(const b of u.children)b.__r3f&&n(w,b);u.children=u.children.filter(b=>!b.__r3f)}u.__r3f.objects.forEach(b=>n(w,b)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||a(_,u),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),n(_,w),w.raycast&&w.__r3f.eventCount&&Lx(w).getState().internal.interaction.push(w),[p,p.alternate].forEach(b=>{b!==null&&(b.stateNode=w,b.ref&&(typeof b.ref=="function"?b.ref(w):b.ref.current=w))})}const l=()=>{};return{reconciler:lCe({createInstance:t,removeChild:a,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const d=u.getState().scene;d.__r3f&&(d.__r3f.root=u,n(d,f))},removeChildFromContainer:(u,f)=>{f&&a(u.getState().scene,f)},insertInContainerBefore:(u,f,d)=>{if(!f||!d)return;const p=u.getState().scene;p.__r3f&&i(p,f,d)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,d,p){var g;if(((g=u==null?void 0:u.__r3f)!=null?g:{}).primitive&&p.object&&p.object!==u)return[!0];{const{args:w=[],children:b,...C}=p,{args:M=[],children:A,...k}=d;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((R,I)=>R!==M[I]))return[!0];const O=GJ(u,C,k,!0);return O.changes.length?[!1,O]:null}},commitUpdate(u,[f,d],p,g,_,w){f?o(u,p,_,w):iI(u,d)},commitMount(u,f,d,p){var g;const _=(g=u.__r3f)!=null?g:{};u.raycast&&_.handlers&&_.eventCount&&Lx(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>R0(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:d,parent:p}=(f=u.__r3f)!=null?f:{};d&&p&&ZU(p,u,d),u.isObject3D&&(u.visible=!1),P0(u)},unhideInstance(u,f){var d;const{attach:p,parent:g}=(d=u.__r3f)!=null?d:{};p&&g&&rI(g,u,p),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),P0(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():X0.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&ui.fun(performance.now)?performance.now:ui.fun(Date.now)?Date.now:()=>0,scheduleTimeout:ui.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ui.fun(clearTimeout)?clearTimeout:void 0}),applyProps:iI}}var XU,QU;const nI=r=>"colorSpace"in r||"outputColorSpace"in r,FJ=()=>{var r;return(r=IR.ColorManagement)!=null?r:null},BJ=r=>r&&r.isOrthographicCamera,uCe=r=>r&&r.hasOwnProperty("current"),gb=typeof window<"u"&&((XU=window.document)!=null&&XU.createElement||((QU=window.navigator)==null?void 0:QU.product)==="ReactNative")?P.useLayoutEffect:P.useEffect;function UJ(r){const e=P.useRef(r);return gb(()=>void(e.current=r),[r]),e}function fCe({set:r}){return gb(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}class jJ extends P.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}jJ.getDerivedStateFromError=()=>({error:!0});const zJ="__default",KU=new Map,dCe=r=>r&&!!r.memoized&&!!r.changes;function VJ(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}const ky=r=>{var e;return(e=r.__r3f)==null?void 0:e.root.getState()};function Lx(r){let e=r.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const ui={obj:r=>r===Object(r)&&!ui.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(ui.str(r)||ui.num(r)||ui.boo(r))return r===e;const s=ui.obj(r);if(s&&n==="reference")return r===e;const a=ui.arr(r);if(a&&t==="reference")return r===e;if((a||s)&&r===e)return!0;let o;for(o in r)if(!(o in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(o in i?e:r)if(!ui.equ(r[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:r)if(r[o]!==e[o])return!1;if(ui.und(o)){if(a&&r.length===0&&e.length===0||s&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function hCe(r){const e={nodes:{},materials:{}};return r&&r.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function pCe(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const e in r)e.dispose==null||e.dispose(),delete r[e]}function R0(r,e){const t=r;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},r}function I3(r,e){let t=r;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((s,a)=>s[a],r),{target:t,key:i}}else return{target:t,key:e}}const qU=/-\d+$/;function rI(r,e,t){if(ui.str(t)){if(qU.test(t)){const s=t.replace(qU,""),{target:a,key:o}=I3(r,s);Array.isArray(a[o])||(a[o]=[])}const{target:n,key:i}=I3(r,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(r,e)}function ZU(r,e,t){var n,i;if(ui.str(t)){const{target:s,key:a}=I3(r,t),o=e.__r3f.previousAttach;o===void 0?delete s[a]:s[a]=o}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(r,e);(i=e.__r3f)==null||delete i.previousAttach}function GJ(r,{children:e,key:t,ref:n,...i},{children:s,key:a,ref:o,...l}={},c=!1){const u=r.__r3f,f=Object.entries(i),d=[];if(c){const g=Object.keys(l);for(let _=0;_<g.length;_++)i.hasOwnProperty(g[_])||f.unshift([g[_],zJ+"remove"])}f.forEach(([g,_])=>{var w;if((w=r.__r3f)!=null&&w.primitive&&g==="object"||ui.equ(_,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return d.push([g,_,!0,[]]);let b=[];g.includes("-")&&(b=g.split("-")),d.push([g,_,!1,b]);for(const C in i){const M=i[C];C.startsWith(`${g}-`)&&d.push([C,M,!1,C.split("-")])}});const p={...i};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(p.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(p.attach=u.memoizedProps.attach),{memoized:p,changes:d}}function iI(r,e){var t;const n=r.__r3f,i=n==null?void 0:n.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:a,changes:o}=dCe(e)?e:GJ(r,e),l=n==null?void 0:n.eventCount;r.__r3f&&(r.__r3f.memoizedProps=a);for(let d=0;d<o.length;d++){let[p,g,_,w]=o[d];if(nI(r)){const A="srgb",k="srgb-linear";p==="encoding"?(p="colorSpace",g=g===3001?A:k):p==="outputEncoding"&&(p="outputColorSpace",g=g===3001?A:k)}let b=r,C=b[p];if(w.length&&(C=w.reduce((M,A)=>M[A],r),!(C&&C.set))){const[M,...A]=w.reverse();b=A.reverse().reduce((k,O)=>k[O],r),p=M}if(g===zJ+"remove")if(b.constructor){let M=KU.get(b.constructor);M||(M=new b.constructor,KU.set(b.constructor,M)),g=M[p]}else g=0;if(_&&n)g?n.handlers[p]=g:delete n.handlers[p],n.eventCount=Object.keys(n.handlers).length;else if(C&&C.set&&(C.copy||C instanceof Nm)){if(Array.isArray(g))C.fromArray?C.fromArray(g):C.set(...g);else if(C.copy&&g&&g.constructor&&C.constructor===g.constructor)C.copy(g);else if(g!==void 0){var c;const M=(c=C)==null?void 0:c.isColor;!M&&C.setScalar?C.setScalar(g):C instanceof Nm&&g instanceof Nm?C.mask=g.mask:C.set(g),!FJ()&&s&&!s.linear&&M&&C.convertSRGBToLinear()}}else{var u;if(b[p]=g,(u=b[p])!=null&&u.isTexture&&b[p].format===os&&b[p].type===jo&&s){const M=b[p];nI(M)&&nI(s.gl)?M.colorSpace=s.gl.outputColorSpace:M.encoding=s.gl.outputEncoding}}P0(r)}if(n&&n.parent&&r.raycast&&l!==n.eventCount){const d=Lx(r).getState().internal,p=d.interaction.indexOf(r);p>-1&&d.interaction.splice(p,1),n.eventCount&&d.interaction.push(r)}return!(o.length===1&&o[0][0]==="onUpdate")&&o.length&&(t=r.__r3f)!=null&&t.parent&&L3(r),r}function P0(r){var e,t;const n=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function L3(r){r.onUpdate==null||r.onUpdate(r)}function HJ(r,e){r.manual||(BJ(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function yS(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function mCe(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return X0.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return X0.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return X0.ContinuousEventPriority;default:return X0.DefaultEventPriority}}function WJ(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function gCe(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{WJ(t.capturedMap,e,n,i)})}function vCe(r){function e(l){const{internal:c}=r.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function n(l,c){const u=r.getState(),f=new Set,d=[],p=c?c(u.internal.interaction):u.internal.interaction;for(let b=0;b<p.length;b++){const C=ky(p[b]);C&&(C.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(b){const C=ky(b);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var M;C.events.compute==null||C.events.compute(l,C,(M=C.previousRoot)==null?void 0:M.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(b,!0):[]}let _=p.flatMap(g).sort((b,C)=>{const M=ky(b.object),A=ky(C.object);return!M||!A?b.distance-C.distance:A.events.priority-M.events.priority||b.distance-C.distance}).filter(b=>{const C=yS(b);return f.has(C)?!1:(f.add(C),!0)});u.events.filter&&(_=u.events.filter(_,u));for(const b of _){let C=b.object;for(;C;){var w;(w=C.__r3f)!=null&&w.eventCount&&d.push({...b,eventObject:C}),C=C.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let b of u.internal.capturedMap.get(l.pointerId).values())f.has(yS(b.intersection))||d.push(b.intersection);return d}function i(l,c,u,f){const d=r.getState();if(l.length){const p={stopped:!1};for(const g of l){const _=ky(g.object)||d,{raycaster:w,pointer:b,camera:C,internal:M}=_,A=new ye(b.x,b.y,0).unproject(C),k=E=>{var B,U;return(B=(U=M.capturedMap.get(E))==null?void 0:U.has(g.eventObject))!=null?B:!1},O=E=>{const B={intersection:g,target:c.target};M.capturedMap.has(E)?M.capturedMap.get(E).set(g.eventObject,B):M.capturedMap.set(E,new Map([[g.eventObject,B]])),c.target.setPointerCapture(E)},R=E=>{const B=M.capturedMap.get(E);B&&WJ(M.capturedMap,g.eventObject,B,E)};let I={};for(let E in c){let B=c[E];typeof B!="function"&&(I[E]=B)}let D={...g,...I,pointer:b,intersections:l,stopped:p.stopped,delta:u,unprojectedPoint:A,ray:w.ray,camera:C,stopPropagation(){const E="pointerId"in c&&M.capturedMap.get(c.pointerId);if((!E||E.has(g.eventObject))&&(D.stopped=p.stopped=!0,M.hovered.size&&Array.from(M.hovered.values()).find(B=>B.eventObject===g.eventObject))){const B=l.slice(0,l.indexOf(g));s([...B,g])}},target:{hasPointerCapture:k,setPointerCapture:O,releasePointerCapture:R},currentTarget:{hasPointerCapture:k,setPointerCapture:O,releasePointerCapture:R},nativeEvent:c};if(f(D),p.stopped===!0)break}}return l}function s(l){const{internal:c}=r.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const d=u.eventObject.__r3f,p=d==null?void 0:d.handlers;if(c.hovered.delete(yS(u)),d!=null&&d.eventCount){const g={...u,intersections:l};p.onPointerOut==null||p.onPointerOut(g),p.onPointerLeave==null||p.onPointerLeave(g)}}}function a(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=r.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:d}=r.getState();d.lastEvent.current=u;const p=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",w=n(u,p?t:void 0),b=g?e(u):0;l==="onPointerDown"&&(d.initialClick=[u.offsetX,u.offsetY],d.initialHits=w.map(M=>M.eventObject)),g&&!w.length&&b<=2&&(a(u,d.interaction),f&&f(u)),p&&s(w);function C(M){const A=M.eventObject,k=A.__r3f,O=k==null?void 0:k.handlers;if(k!=null&&k.eventCount)if(p){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const R=yS(M),I=d.hovered.get(R);I?I.stopped&&M.stopPropagation():(d.hovered.set(R,M),O.onPointerOver==null||O.onPointerOver(M),O.onPointerEnter==null||O.onPointerEnter(M))}O.onPointerMove==null||O.onPointerMove(M)}else{const R=O[l];R?(!g||d.initialHits.includes(A))&&(a(u,d.interaction.filter(I=>!d.initialHits.includes(I))),R(M)):g&&d.initialHits.includes(A)&&a(u,d.interaction.filter(I=>!d.initialHits.includes(I)))}}i(w,u,b,C)}}return{handlePointer:o}}const yCe=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],YJ=r=>!!(r!=null&&r.render),LR=P.createContext(null),wCe=(r,e)=>{const t=NJ((o,l)=>{const c=new ye,u=new ye,f=new ye;function d(b=l().camera,C=u,M=l().size){const{width:A,height:k,top:O,left:R}=M,I=A/k;C.isVector3?f.copy(C):f.set(...C);const D=b.getWorldPosition(c).distanceTo(f);if(BJ(b))return{width:A/b.zoom,height:k/b.zoom,top:O,left:R,factor:1,distance:D,aspect:I};{const E=b.fov*Math.PI/180,B=2*Math.tan(E/2)*D,U=B*(A/k);return{width:U,height:B,top:O,left:R,factor:A/U,distance:D,aspect:I}}}let p;const g=b=>o(C=>({performance:{...C.performance,current:b}})),_=new Mt;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(b=1)=>r(l(),b),advance:(b,C)=>e(b,C,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new bR,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const b=l();p&&clearTimeout(p),b.performance.current!==b.performance.min&&g(b.performance.min),p=setTimeout(()=>g(l().performance.max),b.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:b=>o(C=>({...C,events:{...C.events,...b}})),setSize:(b,C,M,A,k)=>{const O=l().camera,R={width:b,height:C,top:A||0,left:k||0,updateStyle:M};o(I=>({size:R,viewport:{...I.viewport,...d(O,u,R)}}))},setDpr:b=>o(C=>{const M=VJ(b);return{viewport:{...C.viewport,dpr:M,initialDpr:C.viewport.initialDpr||M}}}),setFrameloop:(b="always")=>{const C=l().clock;C.stop(),C.elapsedTime=0,b!=="never"&&(C.start(),C.elapsedTime=0),o(()=>({frameloop:b}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:P.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(b,C,M)=>{const A=l().internal;return A.priority=A.priority+(C>0?1:0),A.subscribers.push({ref:b,priority:C,store:M}),A.subscribers=A.subscribers.sort((k,O)=>k.priority-O.priority),()=>{const k=l().internal;k!=null&&k.subscribers&&(k.priority=k.priority-(C>0?1:0),k.subscribers=k.subscribers.filter(O=>O.ref!==b))}}}}}),n=t.getState();let i=n.size,s=n.viewport.dpr,a=n.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:c,gl:u,set:f}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var d;i=l,s=c.dpr,HJ(o,l),u.setPixelRatio(c.dpr);const p=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,p)}o!==a&&(a=o,f(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>r(o)),t};let wS,_Ce=new Set,bCe=new Set,SCe=new Set;function sI(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function Ry(r,e){switch(r){case"before":return sI(_Ce,e);case"after":return sI(bCe,e);case"tail":return sI(SCe,e)}}let aI,oI;function lI(r,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),aI=e.internal.subscribers,wS=0;wS<aI.length;wS++)oI=aI[wS],oI.ref.current(oI.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function xCe(r){let e=!1,t=!1,n,i,s;function a(c){i=requestAnimationFrame(a),e=!0,n=0,Ry("before",c),t=!0;for(const f of r.values()){var u;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(n+=lI(c,s))}if(t=!1,Ry("after",c),n===0)return Ry("tail",c),e=!1,cancelAnimationFrame(i)}function o(c,u=1){var f;if(!c)return r.forEach(d=>o(d.store.getState(),u));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function l(c,u=!0,f,d){if(u&&Ry("before",c),f)lI(c,f,d);else for(const p of r.values())lI(c,p.store.getState());u&&Ry("after",c)}return{loop:a,invalidate:o,advance:l}}function NR(){const r=P.useContext(LR);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Ds(r=t=>t,e){return NR()(r,e)}function _T(r,e=0){const t=NR(),n=t.getState().internal.subscribe,i=UJ(r);return gb(()=>n(i,e,t),[e,n,t]),null}const $U=new WeakMap;function JJ(r,e){return function(t,...n){let i=$U.get(t);return i||(i=new t,$U.set(t,i)),r&&r(i),Promise.all(n.map(s=>new Promise((a,o)=>i.load(s,l=>{l.scene&&Object.assign(l,hCe(l.scene)),a(l)},e,l=>o(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function nd(r,e,t,n){const i=Array.isArray(e)?e:[e],s=RJ(JJ(t,n),[r,...i],{equal:ui.equ});return Array.isArray(e)?s:s[0]}nd.preload=function(r,e,t){const n=Array.isArray(e)?e:[e];return nCe(JJ(t),[r,...n])};nd.clear=function(r,e){const t=Array.isArray(e)?e:[e];return rCe([r,...t])};const q1=new Map,{invalidate:ej,advance:tj}=xCe(q1),{reconciler:g_,applyProps:sh}=cCe(q1,mCe),_0={objects:"shallow",strict:!1},CCe=(r,e)=>{const t=typeof r=="function"?r(e):r;return YJ(t)?t:new ER({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...r})};function MCe(r,e){const t=typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement;if(e){const{width:n,height:i,top:s,left:a,updateStyle:o=t}=e;return{width:n,height:i,top:s,left:a,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:n,height:i,top:s,left:a}=r.parentElement.getBoundingClientRect();return{width:n,height:i,top:s,left:a,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function ACe(r){const e=q1.get(r),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=n||wCe(ej,tj),a=t||g_.createContainer(s,X0.ConcurrentRoot,null,!1,null,"",i,null);e||q1.set(r,{fiber:a,store:s});let o,l=!1,c;return{configure(u={}){let{gl:f,size:d,scene:p,events:g,onCreated:_,shadows:w=!1,linear:b=!1,flat:C=!1,legacy:M=!1,orthographic:A=!1,frameloop:k="always",dpr:O=[1,2],performance:R,raycaster:I,camera:D,onPointerMissed:E}=u,B=s.getState(),U=B.gl;B.gl||B.set({gl:U=CCe(f,r)});let V=B.raycaster;V||B.set({raycaster:V=new MR});const{params:X,...te}=I||{};if(ui.equ(te,V,_0)||sh(V,{...te}),ui.equ(X,V.params,_0)||sh(V,{params:{...V.params,...X}}),!B.camera||B.camera===c&&!ui.equ(c,D,_0)){c=D;const q=D instanceof sb,J=q?D:A?new Iu(0,0,0,0,.1,1e3):new Qi(75,0,.1,1e3);q||(J.position.z=5,D&&(sh(J,D),("aspect"in D||"left"in D||"right"in D||"bottom"in D||"top"in D)&&(J.manual=!0,J.updateProjectionMatrix())),!B.camera&&!(D!=null&&D.rotation)&&J.lookAt(0,0,0)),B.set({camera:J}),V.camera=J}if(!B.scene){let q;p!=null&&p.isScene?q=p:(q=new ob,p&&sh(q,p)),B.set({scene:R0(q)})}if(!B.xr){var ee;const q=(he,$)=>{const ge=s.getState();ge.frameloop!=="never"&&tj(he,!0,ge,$)},J=()=>{const he=s.getState();he.gl.xr.enabled=he.gl.xr.isPresenting,he.gl.xr.setAnimationLoop(he.gl.xr.isPresenting?q:null),he.gl.xr.isPresenting||ej(he)},ie={connect(){const he=s.getState().gl;he.xr.addEventListener("sessionstart",J),he.xr.addEventListener("sessionend",J)},disconnect(){const he=s.getState().gl;he.xr.removeEventListener("sessionstart",J),he.xr.removeEventListener("sessionend",J)}};typeof((ee=U.xr)==null?void 0:ee.addEventListener)=="function"&&ie.connect(),B.set({xr:ie})}if(U.shadowMap){const q=U.shadowMap.enabled,J=U.shadowMap.type;if(U.shadowMap.enabled=!!w,ui.boo(w))U.shadowMap.type=u1;else if(ui.str(w)){var ue;const ie={basic:GW,percentage:BA,soft:u1,variance:Ec};U.shadowMap.type=(ue=ie[w])!=null?ue:u1}else ui.obj(w)&&Object.assign(U.shadowMap,w);(q!==U.shadowMap.enabled||J!==U.shadowMap.type)&&(U.shadowMap.needsUpdate=!0)}const ne=FJ();ne&&("enabled"in ne?ne.enabled=!M:"legacyMode"in ne&&(ne.legacyMode=M)),l||sh(U,{outputEncoding:b?3e3:3001,toneMapping:C?Tu:UA}),B.legacy!==M&&B.set(()=>({legacy:M})),B.linear!==b&&B.set(()=>({linear:b})),B.flat!==C&&B.set(()=>({flat:C})),f&&!ui.fun(f)&&!YJ(f)&&!ui.equ(f,U,_0)&&sh(U,f),g&&!B.events.handlers&&B.set({events:g(s)});const oe=MCe(r,d);return ui.equ(oe,B.size,_0)||B.setSize(oe.width,oe.height,oe.updateStyle,oe.top,oe.left),O&&B.viewport.dpr!==VJ(O)&&B.setDpr(O),B.frameloop!==k&&B.setFrameloop(k),B.onPointerMissed||B.set({onPointerMissed:E}),R&&!ui.equ(R,B.performance,_0)&&B.set(q=>({performance:{...q.performance,...R}})),o=_,l=!0,this},render(u){return l||this.configure(),g_.updateContainer(S(TCe,{store:s,children:u,onCreated:o,rootElement:r}),a,null,()=>{}),s},unmount(){XJ(r)}}}function TCe({store:r,children:e,onCreated:t,rootElement:n}){return gb(()=>{const i=r.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),S(LR.Provider,{value:r,children:e})}function XJ(r,e){const t=q1.get(r),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),g_.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var s,a,o,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),pCe(i),q1.delete(r)}catch{}},500)})}}function ECe(r,e,t){return S(ICe,{children:r,container:e,state:t},e.uuid)}function ICe({state:r={},children:e,container:t}){const{events:n,size:i,...s}=r,a=NR(),[o]=P.useState(()=>new MR),[l]=P.useState(()=>new Mt),c=P.useCallback((f,d)=>{const p={...f};Object.keys(f).forEach(_=>{(yCe.includes(_)||f[_]!==d[_]&&d[_])&&delete p[_]});let g;if(d&&i){const _=d.camera;g=f.viewport.getCurrentViewport(_,new ye,i),_!==f.camera&&HJ(_,i)}return{...p,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...f.events,...d==null?void 0:d.events,...n},size:{...f.size,...i},viewport:{...f.viewport,...g},...s}},[r]),[u]=P.useState(()=>{const f=a.getState();return NJ((p,g)=>({...f,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...f.events,...n},size:{...f.size,...i},...s,set:p,get:g,setEvents:_=>p(w=>({...w,events:{...w.events,..._}}))}))});return P.useEffect(()=>{const f=a.subscribe(d=>u.setState(p=>c(d,p)));return()=>{f()}},[c]),P.useEffect(()=>{u.setState(f=>c(a.getState(),f))},[c]),P.useEffect(()=>()=>{u.destroy()},[]),S(Br,{children:g_.createPortal(S(LR.Provider,{value:u,children:e}),u,null)})}g_.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:P.version});const cI={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function LCe(r){const{handlePointer:e}=vCe(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(cI).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:s}=r.getState();s.disconnect==null||s.disconnect(),i(a=>({events:{...a.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([a,o])=>{const[l,c]=cI[a];t.addEventListener(l,o,{passive:c})})},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([s,a])=>{if(n&&n.connected instanceof HTMLElement){const[o]=cI[s];n.connected.removeEventListener(o,a)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function nj(r,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...n),e)}}function NCe({debounce:r,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=P.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=P.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=r?typeof r=="number"?r:r.scroll:null,c=r?typeof r=="number"?r:r.resize:null,u=P.useRef(!1);P.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[f,d,p]=P.useMemo(()=>{const b=()=>{if(!o.current.element)return;const{left:C,top:M,width:A,height:k,bottom:O,right:R,x:I,y:D}=o.current.element.getBoundingClientRect(),E={left:C,top:M,width:A,height:k,bottom:O,right:R,x:I,y:D};o.current.element instanceof HTMLElement&&n&&(E.height=o.current.element.offsetHeight,E.width=o.current.element.offsetWidth),Object.freeze(E),u.current&&!PCe(o.current.lastBounds,E)&&a(o.current.lastBounds=E)};return[b,c?nj(b,c):b,l?nj(b,l):b]},[a,n,l,c]);function g(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(b=>b.removeEventListener("scroll",p,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function _(){o.current.element&&(o.current.resizeObserver=new i(p),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(b=>b.addEventListener("scroll",p,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const w=b=>{!b||b===o.current.element||(g(),o.current.element=b,o.current.scrollContainers=QJ(b),_())};return kCe(p,!!e),DCe(d),P.useEffect(()=>{g(),_()},[e,p,d]),P.useEffect(()=>g,[]),[w,s,f]}function DCe(r){P.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function kCe(r,e){P.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function QJ(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(s=>s==="auto"||s==="scroll")&&e.push(r),[...e,...QJ(r.parentElement)]}const RCe=["x","y","top","bottom","left","right","width","height"],PCe=(r,e)=>RCe.every(t=>r[t]===e[t]);var OCe=Object.defineProperty,FCe=Object.defineProperties,BCe=Object.getOwnPropertyDescriptors,rj=Object.getOwnPropertySymbols,UCe=Object.prototype.hasOwnProperty,jCe=Object.prototype.propertyIsEnumerable,ij=(r,e,t)=>e in r?OCe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,sj=(r,e)=>{for(var t in e||(e={}))UCe.call(e,t)&&ij(r,t,e[t]);if(rj)for(var t of rj(e))jCe.call(e,t)&&ij(r,t,e[t]);return r},zCe=(r,e)=>FCe(r,BCe(e)),aj,oj;typeof window<"u"&&((aj=window.document)!=null&&aj.createElement||((oj=window.navigator)==null?void 0:oj.product)==="ReactNative")?P.useLayoutEffect:P.useEffect;function KJ(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=r.child;for(;n;){const i=KJ(n,e,t);if(i)return i;n=n.sibling}}function qJ(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const lj=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=lj;return}return lj.apply(this,arguments)};const DR=qJ(P.createContext(null));class ZJ extends P.Component{render(){return P.createElement(DR.Provider,{value:this._reactInternals},this.props.children)}}function VCe(){const r=P.useContext(DR);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=P.useId();return P.useMemo(()=>{for(const n of[r,r==null?void 0:r.alternate]){if(!n)continue;const i=KJ(n,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[r,e])}function GCe(){const r=VCe(),[e]=P.useState(()=>new Map);e.clear();let t=r;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==DR&&!e.has(i)&&e.set(i,P.useContext(qJ(i)))}t=t.return}return e}function HCe(){const r=GCe();return P.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>P.createElement(e,null,P.createElement(t.Provider,zCe(sj({},n),{value:r.get(t)}))),e=>P.createElement(ZJ,sj({},e))),[r])}const WCe=P.forwardRef(function({children:e,fallback:t,resize:n,style:i,gl:s,events:a=LCe,eventSource:o,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:d,orthographic:p,frameloop:g,dpr:_,performance:w,raycaster:b,camera:C,scene:M,onPointerMissed:A,onCreated:k,...O},R){P.useMemo(()=>OJ(Kxe),[]);const I=HCe(),[D,E]=NCe({scroll:!0,debounce:{scroll:50,resize:0},...n}),B=P.useRef(null),U=P.useRef(null);P.useImperativeHandle(R,()=>B.current);const V=UJ(A),[X,te]=P.useState(!1),[ee,ue]=P.useState(!1);if(X)throw X;if(ee)throw ee;const ne=P.useRef(null);return gb(()=>{const q=B.current;E.width>0&&E.height>0&&q&&(ne.current||(ne.current=ACe(q)),ne.current.configure({gl:s,events:a,shadows:c,linear:u,flat:f,legacy:d,orthographic:p,frameloop:g,dpr:_,performance:w,raycaster:b,camera:C,scene:M,size:E,onPointerMissed:(...J)=>V.current==null?void 0:V.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(o?uCe(o)?o.current:o:U.current),l&&J.setEvents({compute:(ie,he)=>{const $=ie[l+"X"],ge=ie[l+"Y"];he.pointer.set($/he.size.width*2-1,-(ge/he.size.height)*2+1),he.raycaster.setFromCamera(he.pointer,he.camera)}}),k==null||k(J)}}),ne.current.render(S(I,{children:S(jJ,{set:ue,children:S(P.Suspense,{fallback:S(fCe,{set:te}),children:e??null})})})))}),P.useEffect(()=>{const q=B.current;if(q)return()=>XJ(q)},[]),S("div",{ref:U,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:o?"none":"auto",...i},...O,children:S("div",{ref:D,style:{width:"100%",height:"100%"},children:S("canvas",{ref:B,style:{display:"block"},children:t})})})}),YCe=P.forwardRef(function(e,t){return S(ZJ,{children:S(WCe,{...e,ref:t})})});function Z1(){return Z1=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Z1.apply(null,arguments)}const kR=parseInt($_.replace(/\D+/g,""));function cj(r,e){if(e===_Y)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(e===lM||e===Yk){let t=r.getIndex();if(t===null){const a=[],o=r.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);r.setIndex(a),t=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const n=t.count-2,i=[];if(t)if(e===lM)for(let a=1;a<=n;a++)i.push(t.getX(0)),i.push(t.getX(a)),i.push(t.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(i.push(t.getX(a)),i.push(t.getX(a+1)),i.push(t.getX(a+2))):(i.push(t.getX(a+2)),i.push(t.getX(a+1)),i.push(t.getX(a)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=r.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),r}var Bl=Uint8Array,hh=Uint16Array,N3=Uint32Array,$J=new Bl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),eX=new Bl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),JCe=new Bl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tX=function(r,e){for(var t=new hh(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new N3(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return[t,i]},nX=tX($J,2),rX=nX[0],XCe=nX[1];rX[28]=258,XCe[258]=28;var QCe=tX(eX,0),KCe=QCe[0],D3=new hh(32768);for(var vi=0;vi<32768;++vi){var qd=(vi&43690)>>>1|(vi&21845)<<1;qd=(qd&52428)>>>2|(qd&13107)<<2,qd=(qd&61680)>>>4|(qd&3855)<<4,D3[vi]=((qd&65280)>>>8|(qd&255)<<8)>>>1}var xw=function(r,e,t){for(var n=r.length,i=0,s=new hh(e);i<n;++i)++s[r[i]-1];var a=new hh(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new hh(1<<e);var l=15-e;for(i=0;i<n;++i)if(r[i])for(var c=i<<4|r[i],u=e-r[i],f=a[r[i]-1]++<<u,d=f|(1<<u)-1;f<=d;++f)o[D3[f]>>>l]=c}else for(o=new hh(n),i=0;i<n;++i)r[i]&&(o[i]=D3[a[r[i]-1]++]>>>15-r[i]);return o},vb=new Bl(288);for(var vi=0;vi<144;++vi)vb[vi]=8;for(var vi=144;vi<256;++vi)vb[vi]=9;for(var vi=256;vi<280;++vi)vb[vi]=7;for(var vi=280;vi<288;++vi)vb[vi]=8;var iX=new Bl(32);for(var vi=0;vi<32;++vi)iX[vi]=5;var qCe=xw(vb,9,1),ZCe=xw(iX,5,1),uI=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},xc=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},fI=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},$Ce=function(r){return(r/8|0)+(r&7&&1)},eMe=function(r,e,t){(t==null||t>r.length)&&(t=r.length);var n=new(r instanceof hh?hh:r instanceof N3?N3:Bl)(t-e);return n.set(r.subarray(e,t)),n},tMe=function(r,e,t){var n=r.length;if(!n||t&&!t.l&&n<5)return e||new Bl(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Bl(n*3));var a=function(pe){var we=e.length;if(pe>we){var ke=new Bl(Math.max(we*2,pe));ke.set(e),e=ke}},o=t.f||0,l=t.p||0,c=t.b||0,u=t.l,f=t.d,d=t.m,p=t.n,g=n*8;do{if(!u){t.f=o=xc(r,l,1);var _=xc(r,l+1,3);if(l+=3,_)if(_==1)u=qCe,f=ZCe,d=9,p=5;else if(_==2){var M=xc(r,l,31)+257,A=xc(r,l+10,15)+4,k=M+xc(r,l+5,31)+1;l+=14;for(var O=new Bl(k),R=new Bl(19),I=0;I<A;++I)R[JCe[I]]=xc(r,l+I*3,7);l+=A*3;for(var D=uI(R),E=(1<<D)-1,B=xw(R,D,1),I=0;I<k;){var U=B[xc(r,l,E)];l+=U&15;var w=U>>>4;if(w<16)O[I++]=w;else{var V=0,X=0;for(w==16?(X=3+xc(r,l,3),l+=2,V=O[I-1]):w==17?(X=3+xc(r,l,7),l+=3):w==18&&(X=11+xc(r,l,127),l+=7);X--;)O[I++]=V}}var te=O.subarray(0,M),ee=O.subarray(M);d=uI(te),p=uI(ee),u=xw(te,d,1),f=xw(ee,p,1)}else throw"invalid block type";else{var w=$Ce(l)+4,b=r[w-4]|r[w-3]<<8,C=w+b;if(C>n){if(s)throw"unexpected EOF";break}i&&a(c+b),e.set(r.subarray(w,C),c),t.b=c+=b,t.p=l=C*8;continue}if(l>g){if(s)throw"unexpected EOF";break}}i&&a(c+131072);for(var ue=(1<<d)-1,ne=(1<<p)-1,oe=l;;oe=l){var V=u[fI(r,l)&ue],q=V>>>4;if(l+=V&15,l>g){if(s)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(q<256)e[c++]=q;else if(q==256){oe=l,u=null;break}else{var J=q-254;if(q>264){var I=q-257,ie=$J[I];J=xc(r,l,(1<<ie)-1)+rX[I],l+=ie}var he=f[fI(r,l)&ne],$=he>>>4;if(!he)throw"invalid distance";l+=he&15;var ee=KCe[$];if($>3){var ie=eX[$];ee+=fI(r,l)&(1<<ie)-1,l+=ie}if(l>g){if(s)throw"unexpected EOF";break}i&&a(c+131072);for(var ge=c+J;c<ge;c+=4)e[c]=e[c-ee],e[c+1]=e[c+1-ee],e[c+2]=e[c+2-ee],e[c+3]=e[c+3-ee];c=ge}}t.l=u,t.p=oe,t.b=c,u&&(o=1,t.m=d,t.d=f,t.n=p)}while(!o);return c==e.length?e:eMe(e,0,c)},nMe=new Bl(0),rMe=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function _S(r,e){return tMe((rMe(r),r.subarray(2,-4)),e)}var iMe=typeof TextDecoder<"u"&&new TextDecoder,sMe=0;try{iMe.decode(nMe,{stream:!0}),sMe=1}catch{}const aMe=r=>r&&r.isCubeTexture;class oMe extends si{constructor(e,t){var n,i;const s=aMe(e),o=((i=s?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(o)),c=Math.pow(2,l),u=3*Math.max(c,16*7),f=4*c,d=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],p=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,g=d.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${kR>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,_={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},w=new db(1,16),b=new zo({uniforms:_,fragmentShader:g,vertexShader:p,side:ll});super(w,b)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var lMe=Object.defineProperty,cMe=(r,e,t)=>e in r?lMe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,uMe=(r,e,t)=>(cMe(r,e+"",t),t);class fMe{constructor(){uMe(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}var dMe=Object.defineProperty,hMe=(r,e,t)=>e in r?dMe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Rn=(r,e,t)=>(hMe(r,typeof e!="symbol"?e+"":e,t),t);const bS=new mg,uj=new Cf,pMe=Math.cos(70*(Math.PI/180)),fj=(r,e)=>(r%e+e)%e;let mMe=class extends fMe{constructor(e,t){super(),Rn(this,"object"),Rn(this,"domElement"),Rn(this,"enabled",!0),Rn(this,"target",new ye),Rn(this,"minDistance",0),Rn(this,"maxDistance",1/0),Rn(this,"minZoom",0),Rn(this,"maxZoom",1/0),Rn(this,"minPolarAngle",0),Rn(this,"maxPolarAngle",Math.PI),Rn(this,"minAzimuthAngle",-1/0),Rn(this,"maxAzimuthAngle",1/0),Rn(this,"enableDamping",!1),Rn(this,"dampingFactor",.05),Rn(this,"enableZoom",!0),Rn(this,"zoomSpeed",1),Rn(this,"enableRotate",!0),Rn(this,"rotateSpeed",1),Rn(this,"enablePan",!0),Rn(this,"panSpeed",1),Rn(this,"screenSpacePanning",!0),Rn(this,"keyPanSpeed",7),Rn(this,"zoomToCursor",!1),Rn(this,"autoRotate",!1),Rn(this,"autoRotateSpeed",2),Rn(this,"reverseOrbit",!1),Rn(this,"reverseHorizontalOrbit",!1),Rn(this,"reverseVerticalOrbit",!1),Rn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Rn(this,"mouseButtons",{LEFT:em.ROTATE,MIDDLE:em.DOLLY,RIGHT:em.PAN}),Rn(this,"touches",{ONE:tm.ROTATE,TWO:tm.DOLLY_PAN}),Rn(this,"target0"),Rn(this,"position0"),Rn(this,"zoom0"),Rn(this,"_domElementKeyEvents",null),Rn(this,"getPolarAngle"),Rn(this,"getAzimuthalAngle"),Rn(this,"setPolarAngle"),Rn(this,"setAzimuthalAngle"),Rn(this,"getDistance"),Rn(this,"getZoomScale"),Rn(this,"listenToKeyEvents"),Rn(this,"stopListenToKeyEvents"),Rn(this,"saveState"),Rn(this,"reset"),Rn(this,"update"),Rn(this,"connect"),Rn(this,"dispose"),Rn(this,"dollyIn"),Rn(this,"dollyOut"),Rn(this,"getScale"),Rn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=Me=>{let tt=fj(Me,2*Math.PI),Tt=u.phi;Tt<0&&(Tt+=2*Math.PI),tt<0&&(tt+=2*Math.PI);let Ae=Math.abs(tt-Tt);2*Math.PI-Ae<Ae&&(tt<Tt?tt+=2*Math.PI:Tt+=2*Math.PI),f.phi=tt-Tt,n.update()},this.setAzimuthalAngle=Me=>{let tt=fj(Me,2*Math.PI),Tt=u.theta;Tt<0&&(Tt+=2*Math.PI),tt<0&&(tt+=2*Math.PI);let Ae=Math.abs(tt-Tt);2*Math.PI-Ae<Ae&&(tt<Tt?tt+=2*Math.PI:Tt+=2*Math.PI),f.theta=tt-Tt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=Me=>{Me.addEventListener("keydown",it),this._domElementKeyEvents=Me},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",it),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),l=o.NONE},this.update=(()=>{const Me=new ye,tt=new ye(0,1,0),Tt=new ea().setFromUnitVectors(e.up,tt),Ae=Tt.clone().invert(),Oe=new ye,Ye=new ea,yt=2*Math.PI;return function(){const xt=n.object.position;Tt.setFromUnitVectors(e.up,tt),Ae.copy(Tt).invert(),Me.copy(xt).sub(n.target),Me.applyQuaternion(Tt),u.setFromVector3(Me),n.autoRotate&&l===o.NONE&&X(U()),n.enableDamping?(u.theta+=f.theta*n.dampingFactor,u.phi+=f.phi*n.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let Yt=n.minAzimuthAngle,on=n.maxAzimuthAngle;isFinite(Yt)&&isFinite(on)&&(Yt<-Math.PI?Yt+=yt:Yt>Math.PI&&(Yt-=yt),on<-Math.PI?on+=yt:on>Math.PI&&(on-=yt),Yt<=on?u.theta=Math.max(Yt,Math.min(on,u.theta)):u.theta=u.theta>(Yt+on)/2?Math.max(Yt,u.theta):Math.min(on,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),n.zoomToCursor&&D||n.object.isOrthographicCamera?u.radius=he(u.radius):u.radius=he(u.radius*d),Me.setFromSpherical(u),Me.applyQuaternion(Ae),xt.copy(n.target).add(Me),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(f.theta*=1-n.dampingFactor,f.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(f.set(0,0,0),p.set(0,0,0));let Zt=!1;if(n.zoomToCursor&&D){let qt=null;if(n.object instanceof Qi&&n.object.isPerspectiveCamera){const Xe=Me.length();qt=he(Xe*d);const ot=Xe-qt;n.object.position.addScaledVector(R,ot),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Xe=new ye(I.x,I.y,0);Xe.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix(),Zt=!0;const ot=new ye(I.x,I.y,0);ot.unproject(n.object),n.object.position.sub(ot).add(Xe),n.object.updateMatrixWorld(),qt=Me.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;qt!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(qt).add(n.object.position):(bS.origin.copy(n.object.position),bS.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(bS.direction))<pMe?e.lookAt(n.target):(uj.setFromNormalAndCoplanarPoint(n.object.up,n.target),bS.intersectPlane(uj,n.target))))}else n.object instanceof Iu&&n.object.isOrthographicCamera&&(Zt=d!==1,Zt&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix()));return d=1,D=!1,Zt||Oe.distanceToSquared(n.object.position)>c||8*(1-Ye.dot(n.object.quaternion))>c?(n.dispatchEvent(i),Oe.copy(n.object.position),Ye.copy(n.object.quaternion),Zt=!1,!0):!1}})(),this.connect=Me=>{n.domElement=Me,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Le),n.domElement.addEventListener("pointerdown",W),n.domElement.addEventListener("pointercancel",be),n.domElement.addEventListener("wheel",$e)},this.dispose=()=>{var Me,tt,Tt,Ae,Oe,Ye;n.domElement&&(n.domElement.style.touchAction="auto"),(Me=n.domElement)==null||Me.removeEventListener("contextmenu",Le),(tt=n.domElement)==null||tt.removeEventListener("pointerdown",W),(Tt=n.domElement)==null||Tt.removeEventListener("pointercancel",be),(Ae=n.domElement)==null||Ae.removeEventListener("wheel",$e),(Oe=n.domElement)==null||Oe.ownerDocument.removeEventListener("pointermove",re),(Ye=n.domElement)==null||Ye.ownerDocument.removeEventListener("pointerup",be),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",it)};const n=this,i={type:"change"},s={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const c=1e-6,u=new M3,f=new M3;let d=1;const p=new ye,g=new Mt,_=new Mt,w=new Mt,b=new Mt,C=new Mt,M=new Mt,A=new Mt,k=new Mt,O=new Mt,R=new ye,I=new Mt;let D=!1;const E=[],B={};function U(){return 2*Math.PI/60/60*n.autoRotateSpeed}function V(){return Math.pow(.95,n.zoomSpeed)}function X(Me){n.reverseOrbit||n.reverseHorizontalOrbit?f.theta+=Me:f.theta-=Me}function te(Me){n.reverseOrbit||n.reverseVerticalOrbit?f.phi+=Me:f.phi-=Me}const ee=(()=>{const Me=new ye;return function(Tt,Ae){Me.setFromMatrixColumn(Ae,0),Me.multiplyScalar(-Tt),p.add(Me)}})(),ue=(()=>{const Me=new ye;return function(Tt,Ae){n.screenSpacePanning===!0?Me.setFromMatrixColumn(Ae,1):(Me.setFromMatrixColumn(Ae,0),Me.crossVectors(n.object.up,Me)),Me.multiplyScalar(Tt),p.add(Me)}})(),ne=(()=>{const Me=new ye;return function(Tt,Ae){const Oe=n.domElement;if(Oe&&n.object instanceof Qi&&n.object.isPerspectiveCamera){const Ye=n.object.position;Me.copy(Ye).sub(n.target);let yt=Me.length();yt*=Math.tan(n.object.fov/2*Math.PI/180),ee(2*Tt*yt/Oe.clientHeight,n.object.matrix),ue(2*Ae*yt/Oe.clientHeight,n.object.matrix)}else Oe&&n.object instanceof Iu&&n.object.isOrthographicCamera?(ee(Tt*(n.object.right-n.object.left)/n.object.zoom/Oe.clientWidth,n.object.matrix),ue(Ae*(n.object.top-n.object.bottom)/n.object.zoom/Oe.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function oe(Me){n.object instanceof Qi&&n.object.isPerspectiveCamera||n.object instanceof Iu&&n.object.isOrthographicCamera?d=Me:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function q(Me){oe(d/Me)}function J(Me){oe(d*Me)}function ie(Me){if(!n.zoomToCursor||!n.domElement)return;D=!0;const tt=n.domElement.getBoundingClientRect(),Tt=Me.clientX-tt.left,Ae=Me.clientY-tt.top,Oe=tt.width,Ye=tt.height;I.x=Tt/Oe*2-1,I.y=-(Ae/Ye)*2+1,R.set(I.x,I.y,1).unproject(n.object).sub(n.object.position).normalize()}function he(Me){return Math.max(n.minDistance,Math.min(n.maxDistance,Me))}function $(Me){g.set(Me.clientX,Me.clientY)}function ge(Me){ie(Me),A.set(Me.clientX,Me.clientY)}function pe(Me){b.set(Me.clientX,Me.clientY)}function we(Me){_.set(Me.clientX,Me.clientY),w.subVectors(_,g).multiplyScalar(n.rotateSpeed);const tt=n.domElement;tt&&(X(2*Math.PI*w.x/tt.clientHeight),te(2*Math.PI*w.y/tt.clientHeight)),g.copy(_),n.update()}function ke(Me){k.set(Me.clientX,Me.clientY),O.subVectors(k,A),O.y>0?q(V()):O.y<0&&J(V()),A.copy(k),n.update()}function Pe(Me){C.set(Me.clientX,Me.clientY),M.subVectors(C,b).multiplyScalar(n.panSpeed),ne(M.x,M.y),b.copy(C),n.update()}function je(Me){ie(Me),Me.deltaY<0?J(V()):Me.deltaY>0&&q(V()),n.update()}function Ke(Me){let tt=!1;switch(Me.code){case n.keys.UP:ne(0,n.keyPanSpeed),tt=!0;break;case n.keys.BOTTOM:ne(0,-n.keyPanSpeed),tt=!0;break;case n.keys.LEFT:ne(n.keyPanSpeed,0),tt=!0;break;case n.keys.RIGHT:ne(-n.keyPanSpeed,0),tt=!0;break}tt&&(Me.preventDefault(),n.update())}function Ie(){if(E.length==1)g.set(E[0].pageX,E[0].pageY);else{const Me=.5*(E[0].pageX+E[1].pageX),tt=.5*(E[0].pageY+E[1].pageY);g.set(Me,tt)}}function Ge(){if(E.length==1)b.set(E[0].pageX,E[0].pageY);else{const Me=.5*(E[0].pageX+E[1].pageX),tt=.5*(E[0].pageY+E[1].pageY);b.set(Me,tt)}}function ce(){const Me=E[0].pageX-E[1].pageX,tt=E[0].pageY-E[1].pageY,Tt=Math.sqrt(Me*Me+tt*tt);A.set(0,Tt)}function _t(){n.enableZoom&&ce(),n.enablePan&&Ge()}function _e(){n.enableZoom&&ce(),n.enableRotate&&Ie()}function Ne(Me){if(E.length==1)_.set(Me.pageX,Me.pageY);else{const Tt=et(Me),Ae=.5*(Me.pageX+Tt.x),Oe=.5*(Me.pageY+Tt.y);_.set(Ae,Oe)}w.subVectors(_,g).multiplyScalar(n.rotateSpeed);const tt=n.domElement;tt&&(X(2*Math.PI*w.x/tt.clientHeight),te(2*Math.PI*w.y/tt.clientHeight)),g.copy(_)}function Ce(Me){if(E.length==1)C.set(Me.pageX,Me.pageY);else{const tt=et(Me),Tt=.5*(Me.pageX+tt.x),Ae=.5*(Me.pageY+tt.y);C.set(Tt,Ae)}M.subVectors(C,b).multiplyScalar(n.panSpeed),ne(M.x,M.y),b.copy(C)}function He(Me){const tt=et(Me),Tt=Me.pageX-tt.x,Ae=Me.pageY-tt.y,Oe=Math.sqrt(Tt*Tt+Ae*Ae);k.set(0,Oe),O.set(0,Math.pow(k.y/A.y,n.zoomSpeed)),q(O.y),A.copy(k)}function Ee(Me){n.enableZoom&&He(Me),n.enablePan&&Ce(Me)}function Z(Me){n.enableZoom&&He(Me),n.enableRotate&&Ne(Me)}function W(Me){var tt,Tt;n.enabled!==!1&&(E.length===0&&((tt=n.domElement)==null||tt.ownerDocument.addEventListener("pointermove",re),(Tt=n.domElement)==null||Tt.ownerDocument.addEventListener("pointerup",be)),at(Me),Me.pointerType==="touch"?pt(Me):ve(Me))}function re(Me){n.enabled!==!1&&(Me.pointerType==="touch"?Ft(Me):Je(Me))}function be(Me){var tt,Tt,Ae;vt(Me),E.length===0&&((tt=n.domElement)==null||tt.releasePointerCapture(Me.pointerId),(Tt=n.domElement)==null||Tt.ownerDocument.removeEventListener("pointermove",re),(Ae=n.domElement)==null||Ae.ownerDocument.removeEventListener("pointerup",be)),n.dispatchEvent(a),l=o.NONE}function ve(Me){let tt;switch(Me.button){case 0:tt=n.mouseButtons.LEFT;break;case 1:tt=n.mouseButtons.MIDDLE;break;case 2:tt=n.mouseButtons.RIGHT;break;default:tt=-1}switch(tt){case em.DOLLY:if(n.enableZoom===!1)return;ge(Me),l=o.DOLLY;break;case em.ROTATE:if(Me.ctrlKey||Me.metaKey||Me.shiftKey){if(n.enablePan===!1)return;pe(Me),l=o.PAN}else{if(n.enableRotate===!1)return;$(Me),l=o.ROTATE}break;case em.PAN:if(Me.ctrlKey||Me.metaKey||Me.shiftKey){if(n.enableRotate===!1)return;$(Me),l=o.ROTATE}else{if(n.enablePan===!1)return;pe(Me),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&n.dispatchEvent(s)}function Je(Me){if(n.enabled!==!1)switch(l){case o.ROTATE:if(n.enableRotate===!1)return;we(Me);break;case o.DOLLY:if(n.enableZoom===!1)return;ke(Me);break;case o.PAN:if(n.enablePan===!1)return;Pe(Me);break}}function $e(Me){n.enabled===!1||n.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||(Me.preventDefault(),n.dispatchEvent(s),je(Me),n.dispatchEvent(a))}function it(Me){n.enabled===!1||n.enablePan===!1||Ke(Me)}function pt(Me){switch(qe(Me),E.length){case 1:switch(n.touches.ONE){case tm.ROTATE:if(n.enableRotate===!1)return;Ie(),l=o.TOUCH_ROTATE;break;case tm.PAN:if(n.enablePan===!1)return;Ge(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(n.touches.TWO){case tm.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;_t(),l=o.TOUCH_DOLLY_PAN;break;case tm.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;_e(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&n.dispatchEvent(s)}function Ft(Me){switch(qe(Me),l){case o.TOUCH_ROTATE:if(n.enableRotate===!1)return;Ne(Me),n.update();break;case o.TOUCH_PAN:if(n.enablePan===!1)return;Ce(Me),n.update();break;case o.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Ee(Me),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Z(Me),n.update();break;default:l=o.NONE}}function Le(Me){n.enabled!==!1&&Me.preventDefault()}function at(Me){E.push(Me)}function vt(Me){delete B[Me.pointerId];for(let tt=0;tt<E.length;tt++)if(E[tt].pointerId==Me.pointerId){E.splice(tt,1);return}}function qe(Me){let tt=B[Me.pointerId];tt===void 0&&(tt=new Mt,B[Me.pointerId]=tt),tt.set(Me.pageX,Me.pageY)}function et(Me){const tt=Me.pointerId===E[0].pointerId?E[1]:E[0];return B[tt.pointerId]}this.dollyIn=(Me=V())=>{J(Me),n.update()},this.dollyOut=(Me=V())=>{q(Me),n.update()},this.getScale=()=>d,this.setScale=Me=>{oe(Me),n.update()},this.getZoomScale=()=>V(),t!==void 0&&this.connect(t),this.update()}};function hM(r){if(typeof TextDecoder<"u")return new TextDecoder().decode(r);let e="";for(let t=0,n=r.length;t<n;t++)e+=String.fromCharCode(r[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Sm="srgb",Vf="srgb-linear",dj=3001,gMe=3e3;class RR extends Sa{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new bMe(t)}),this.register(function(t){return new SMe(t)}),this.register(function(t){return new NMe(t)}),this.register(function(t){return new DMe(t)}),this.register(function(t){return new kMe(t)}),this.register(function(t){return new CMe(t)}),this.register(function(t){return new MMe(t)}),this.register(function(t){return new AMe(t)}),this.register(function(t){return new TMe(t)}),this.register(function(t){return new _Me(t)}),this.register(function(t){return new EMe(t)}),this.register(function(t){return new xMe(t)}),this.register(function(t){return new LMe(t)}),this.register(function(t){return new IMe(t)}),this.register(function(t){return new yMe(t)}),this.register(function(t){return new RMe(t)}),this.register(function(t){return new PMe(t)})}load(e,t,n,i){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const c=_h.extractUrlBase(e);a=_h.resolveURL(c,this.path)}else a=_h.extractUrlBase(e);this.manager.itemStart(e);const o=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new _a(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,a,function(u){t(u),s.manager.itemEnd(e)},o)}catch(u){o(u)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let s;const a={},o={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(hM(new Uint8Array(e.slice(0,4)))===sX){try{a[mr.KHR_BINARY_GLTF]=new OMe(e)}catch(u){i&&i(u);return}s=JSON.parse(a[mr.KHR_BINARY_GLTF].content)}else s=JSON.parse(hM(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new QMe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[u.name]=u,a[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(u){case mr.KHR_MATERIALS_UNLIT:a[u]=new wMe;break;case mr.KHR_DRACO_MESH_COMPRESSION:a[u]=new FMe(s,this.dracoLoader);break;case mr.KHR_TEXTURE_TRANSFORM:a[u]=new BMe;break;case mr.KHR_MESH_QUANTIZATION:a[u]=new UMe;break;default:f.indexOf(u)>=0&&o[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(a),l.setPlugins(o),l.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,s){n.parse(e,t,i,s)})}}function vMe(){let r={};return{get:function(e){return r[e]},add:function(e,t){r[e]=t},remove:function(e){delete r[e]},removeAll:function(){r={}}}}const mr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class yMe{constructor(e){this.parser=e,this.name=mr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Kt(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],Vf);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new yR(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new vR(u),c.distance=f;break;case"spot":c=new gR(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,xf(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(n,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return n._getNodeRef(t.cache,o,l)})}}class wMe{constructor(){this.name=mr.KHR_MATERIALS_UNLIT}getMaterialType(){return mo}extendParams(e,t,n){const i=[];e.color=new Kt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],Vf),e.opacity=a[3]}s.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",s.baseColorTexture,Sm))}return Promise.all(i)}}class _Me{constructor(e){this.parser=e,this.name=mr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class bMe{constructor(e){this.parser=e,this.name=mr.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Jl}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Mt(o,o)}return Promise.all(s)}}class SMe{constructor(e){this.parser=e,this.name=mr.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Jl}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class xMe{constructor(e){this.parser=e,this.name=mr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Jl}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class CMe{constructor(e){this.parser=e,this.name=mr.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Jl}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Kt(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=i.extensions[this.name];if(a.sheenColorFactor!==void 0){const o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],Vf)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Sm)),a.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class MMe{constructor(e){this.parser=e,this.name=mr.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Jl}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class AMe{constructor(e){this.parser=e,this.name=mr.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Jl}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new Kt().setRGB(o[0],o[1],o[2],Vf),Promise.all(s)}}class TMe{constructor(e){this.parser=e,this.name=mr.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Jl}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class EMe{constructor(e){this.parser=e,this.name=mr.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Jl}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new Kt().setRGB(o[0],o[1],o[2],Vf),a.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,Sm)),Promise.all(s)}}class IMe{constructor(e){this.parser=e,this.name=mr.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Jl}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(s)}}class LMe{constructor(e){this.parser=e,this.name=mr.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Jl}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class NMe{constructor(e){this.parser=e,this.name=mr.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class DMe{constructor(e){this.parser=e,this.name=mr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=i.images[a.source];let l=n.textureLoader;if(o.uri){const c=n.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class kMe{constructor(e){this.parser=e,this.name=mr.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=i.images[a.source];let l=n.textureLoader;if(o.uri){const c=n.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class RMe{constructor(e){this.name=mr.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,f=i.byteStride,d=new Uint8Array(o,l,c);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(u,f,d,i.mode,i.filter).then(function(p){return p.buffer}):a.ready.then(function(){const p=new ArrayBuffer(u*f);return a.decodeGltfBuffer(new Uint8Array(p),u,f,d,i.mode,i.filter),p})})}else return null}}class PMe{constructor(e){this.name=mr.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=t.meshes[n.mesh];for(const c of i.primitives)if(c.mode!==Pl.TRIANGLES&&c.mode!==Pl.TRIANGLE_STRIP&&c.mode!==Pl.TRIANGLE_FAN&&c.mode!==void 0)return null;const a=n.extensions[this.name].attributes,o=[],l={};for(const c in a)o.push(this.parser.getDependency("accessor",a[c]).then(u=>(l[c]=u,l[c])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],d=c[0].count,p=[];for(const g of f){const _=new Nn,w=new ye,b=new ea,C=new ye(1,1,1),M=new nR(g.geometry,g.material,d);for(let A=0;A<d;A++)l.TRANSLATION&&w.fromBufferAttribute(l.TRANSLATION,A),l.ROTATION&&b.fromBufferAttribute(l.ROTATION,A),l.SCALE&&C.fromBufferAttribute(l.SCALE,A),M.setMatrixAt(A,_.compose(w,b,C));for(const A in l)if(A==="_COLOR_0"){const k=l[A];M.instanceColor=new Fh(k.array,k.itemSize,k.normalized)}else A!=="TRANSLATION"&&A!=="ROTATION"&&A!=="SCALE"&&g.geometry.setAttribute(A,l[A]);Mr.prototype.copy.call(M,g),this.parser.assignFinalMaterial(M),p.push(M)}return u.isGroup?(u.clear(),u.add(...p),u):p[0]}))}}const sX="glTF",Py=12,hj={JSON:1313821514,BIN:5130562};class OMe{constructor(e){this.name=mr.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Py);if(this.header={magic:hM(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==sX)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-Py,i=new DataView(e,Py);let s=0;for(;s<n;){const a=i.getUint32(s,!0);s+=4;const o=i.getUint32(s,!0);if(s+=4,o===hj.JSON){const l=new Uint8Array(e,Py+s,a);this.content=hM(l)}else if(o===hj.BIN){const l=Py+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class FMe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=mr.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},c={};for(const u in a){const f=k3[u]||u.toLowerCase();o[f]=a[u]}for(const u in e.attributes){const f=k3[u]||u.toLowerCase();if(a[u]!==void 0){const d=n.accessors[e.attributes[u]],p=p1[d.componentType];c[f]=p.name,l[f]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f,d){i.decodeDracoFile(u,function(p){for(const g in p.attributes){const _=p.attributes[g],w=l[g];w!==void 0&&(_.normalized=w)}f(p)},o,c,Vf,d)})})}}class BMe{constructor(){this.name=mr.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class UMe{constructor(){this.name=mr.KHR_MESH_QUANTIZATION}}class aX extends wv{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let a=0;a!==i;a++)t[a]=n[s+a];return t}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,u=i-t,f=(n-t)/u,d=f*f,p=d*f,g=e*c,_=g-c,w=-2*p+3*d,b=p-d,C=1-w,M=b-d+f;for(let A=0;A!==o;A++){const k=a[_+A+o],O=a[_+A+l]*u,R=a[g+A+o],I=a[g+A]*u;s[A]=C*k+M*O+w*R+b*I}return s}}const jMe=new ea;class zMe extends aX{interpolate_(e,t,n,i){const s=super.interpolate_(e,t,n,i);return jMe.fromArray(s).normalize().toArray(s),s}}const Pl={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},p1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},pj={9728:$s,9729:dr,9984:jA,9985:f1,9986:mm,9987:zl},mj={33071:as,33648:H1,10497:Ph},dI={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},k3={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...kR>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Zd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},VMe={CUBICSPLINE:void 0,LINEAR:J1,STEP:Y1},hI={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function GMe(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new mb({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ku})),r.DefaultMaterial}function Qp(r,e,t){for(const n in t.extensions)r[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function xf(r,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(r.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function HMe(r,e,t){let n=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(n=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),n&&i&&s)break}if(!n&&!i&&!s)return Promise.resolve(r);const a=[],o=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(n){const d=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):r.attributes.position;a.push(d)}if(i){const d=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):r.attributes.normal;o.push(d)}if(s){const d=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):r.attributes.color;l.push(d)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],d=c[2];return n&&(r.morphAttributes.position=u),i&&(r.morphAttributes.normal=f),s&&(r.morphAttributes.color=d),r.morphTargetsRelative=!0,r})}function WMe(r,e){if(r.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)r.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(r.morphTargetInfluences.length===t.length){r.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++)r.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function YMe(r){let e;const t=r.extensions&&r.extensions[mr.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+pI(t.attributes):e=r.indices+":"+pI(r.attributes)+":"+r.mode,r.targets!==void 0)for(let n=0,i=r.targets.length;n<i;n++)e+=":"+pI(r.targets[n]);return e}function pI(r){let e="";const t=Object.keys(r).sort();for(let n=0,i=t.length;n<i;n++)e+=t[n]+":"+r[t[n]]+";";return e}function R3(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function JMe(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const XMe=new Nn;class QMe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new vMe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||i&&s<98?this.textureLoader=new dM(this.options.manager):this.textureLoader=new wJ(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new _a(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const o={scene:a[0][i.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:i.asset,parser:n,userData:{}};return Qp(s,o,i),xf(o,i),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){for(const l of o.scenes)l.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const a=t[i].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const a=e[i];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[c,u]of a.children.entries())s(u,o.children[c])};return s(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,a){return n.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[mr.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,a){n.load(_h.resolveURL(t.uri,i.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const i=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+i)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const a=dI[i.type],o=p1[i.componentType],l=i.normalized===!0,c=new o(i.count*a);return Promise.resolve(new Pr(c,a,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=dI[i.type],c=p1[i.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,d=i.byteOffset||0,p=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let _,w;if(p&&p!==f){const b=Math.floor(d/p),C="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+b+":"+i.count;let M=t.cache.get(C);M||(_=new c(o,b*p,i.count*p/u),M=new lb(_,p/u),t.cache.add(C,M)),w=new Oh(M,l,d%p/u,g)}else o===null?_=new c(i.count*l):_=new c(o,d,i.count*l),w=new Pr(_,l,g);if(i.sparse!==void 0){const b=dI.SCALAR,C=p1[i.sparse.indices.componentType],M=i.sparse.indices.byteOffset||0,A=i.sparse.values.byteOffset||0,k=new C(a[1],M,i.sparse.count*b),O=new c(a[2],A,i.sparse.count*l);o!==null&&(w=new Pr(w.array.slice(),w.itemSize,w.normalized));for(let R=0,I=k.length;R<I;R++){const D=k[R];if(w.setX(D,O[R*l]),l>=2&&w.setY(D,O[R*l+1]),l>=3&&w.setZ(D,O[R*l+2]),l>=4&&w.setW(D,O[R*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const l=n.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,n){const i=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(u){u.flipY=!1,u.name=a.name||o.name||"",u.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(u.name=o.uri);const d=(s.samplers||{})[a.sampler]||{};return u.magFilter=pj[d.magFilter]||dr,u.minFilter=pj[d.minFilter]||zl,u.wrapS=mj[d.wrapS]||Ph,u.wrapT=mj[d.wrapT]||Ph,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const a=i.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",c=!1;if(a.bufferView!==void 0)l=n.getDependency("bufferView",a.bufferView).then(function(f){c=!0;const d=new Blob([f],{type:a.mimeType});return l=o.createObjectURL(d),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(d,p){let g=d;t.isImageBitmapLoader===!0&&(g=function(_){const w=new Ur(_);w.needsUpdate=!0,d(w)}),t.load(_h.resolveURL(f,s.path),g,void 0,p)})}).then(function(f){return c===!0&&o.revokeObjectURL(l),xf(f,a),f.userData.mimeType=a.mimeType||JMe(a.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,t,n,i){const s=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),s.extensions[mr.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[mr.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[mr.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===dj?Sm:Vf),"colorSpace"in a?a.colorSpace=i:a.encoding=i===Sm?dj:gMe),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new $A,Os.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(o,l)),n=l}else if(e.isLine){const o="LineBasicMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new Xa,Os.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(o,l)),n=l}if(i||s||a){let o="ClonedMaterial:"+n.uuid+":";i&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=n.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return mb}loadMaterial(e){const t=this,n=this.json,i=this.extensions,s=n.materials[e];let a;const o={},l=s.extensions||{},c=[];if(l[mr.KHR_MATERIALS_UNLIT]){const f=i[mr.KHR_MATERIALS_UNLIT];a=f.getMaterialType(),c.push(f.extendParams(o,s,t))}else{const f=s.pbrMetallicRoughness||{};if(o.color=new Kt(1,1,1),o.opacity=1,Array.isArray(f.baseColorFactor)){const d=f.baseColorFactor;o.color.setRGB(d[0],d[1],d[2],Vf),o.opacity=d[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",f.baseColorTexture,Sm)),o.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,o.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",f.metallicRoughnessTexture))),a=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=ll);const u=s.alphaMode||hI.OPAQUE;if(u===hI.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,u===hI.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==mo&&(c.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new Mt(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;o.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&a!==mo&&(c.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==mo){const f=s.emissiveFactor;o.emissive=new Kt().setRGB(f[0],f[1],f[2],Vf)}return s.emissiveTexture!==void 0&&a!==mo&&c.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,Sm)),Promise.all(c).then(function(){const f=new a(o);return s.name&&(f.name=s.name),xf(f,s),t.associations.set(f,{materials:e}),s.extensions&&Qp(i,f,s),f})}createUniqueName(e){const t=Lr.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function s(o){return n[mr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return gj(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],u=YMe(c),f=i[u];if(f)a.push(f.promise);else{let d;c.extensions&&c.extensions[mr.KHR_DRACO_MESH_COMPRESSION]?d=s(c):d=gj(new $n,c,t),i[u]={primitive:c,promise:d},a.push(d)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,i=this.extensions,s=n.meshes[e],a=s.primitives,o=[];for(let l=0,c=a.length;l<c;l++){const u=a[l].material===void 0?GMe(this.cache):this.getDependency("material",a[l].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let p=0,g=u.length;p<g;p++){const _=u[p],w=a[p];let b;const C=c[p];if(w.mode===Pl.TRIANGLES||w.mode===Pl.TRIANGLE_STRIP||w.mode===Pl.TRIANGLE_FAN||w.mode===void 0)b=s.isSkinnedMesh===!0?new tR(_,C):new si(_,C),b.isSkinnedMesh===!0&&b.normalizeSkinWeights(),w.mode===Pl.TRIANGLE_STRIP?b.geometry=cj(b.geometry,Yk):w.mode===Pl.TRIANGLE_FAN&&(b.geometry=cj(b.geometry,lM));else if(w.mode===Pl.LINES)b=new Xc(_,C);else if(w.mode===Pl.LINE_STRIP)b=new td(_,C);else if(w.mode===Pl.LINE_LOOP)b=new rR(_,C);else if(w.mode===Pl.POINTS)b=new iR(_,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);Object.keys(b.geometry.morphAttributes).length>0&&WMe(b,s),b.name=t.createUniqueName(s.name||"mesh_"+e),xf(b,s),w.extensions&&Qp(i,b,w),t.assignFinalMaterial(b),f.push(b)}for(let p=0,g=f.length;p<g;p++)t.associations.set(f[p],{meshes:e,primitives:p});if(f.length===1)return s.extensions&&Qp(i,f[0],s),f[0];const d=new kf;s.extensions&&Qp(i,d,s),t.associations.set(d,{meshes:e});for(let p=0,g=f.length;p<g;p++)d.add(f[p]);return d})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Qi(LY.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(t=new Iu(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),xf(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,s=t.joints.length;i<s;i++)n.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const s=i.pop(),a=i,o=[],l=[];for(let c=0,u=a.length;c<u;c++){const f=a[c];if(f){o.push(f);const d=new Nn;s!==null&&d.fromArray(s.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new cb(o,l)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,a=[],o=[],l=[],c=[],u=[];for(let f=0,d=i.channels.length;f<d;f++){const p=i.channels[f],g=i.samplers[p.sampler],_=p.target,w=_.node,b=i.parameters!==void 0?i.parameters[g.input]:g.input,C=i.parameters!==void 0?i.parameters[g.output]:g.output;_.node!==void 0&&(a.push(this.getDependency("node",w)),o.push(this.getDependency("accessor",b)),l.push(this.getDependency("accessor",C)),c.push(g),u.push(_))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(f){const d=f[0],p=f[1],g=f[2],_=f[3],w=f[4],b=[];for(let C=0,M=d.length;C<M;C++){const A=d[C],k=p[C],O=g[C],R=_[C],I=w[C];if(A===void 0)continue;A.updateMatrix&&A.updateMatrix();const D=n._createAnimationTracks(A,k,O,R,I);if(D)for(let E=0;E<D.length;E++)b.push(D[E])}return new K1(s,void 0,b)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(s){const a=n._getNodeRef(n.meshCache,i.mesh,s);return i.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,c=i.weights.length;l<c;l++)o.morphTargetInfluences[l]=i.weights[l]}),a})}loadNode(e){const t=this.json,n=this,i=t.nodes[e],s=n._loadNodeShallow(e),a=[],o=i.children||[];for(let c=0,u=o.length;c<u;c++)a.push(n.getDependency("node",o[c]));const l=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([s,Promise.all(a),l]).then(function(c){const u=c[0],f=c[1],d=c[2];d!==null&&u.traverse(function(p){p.isSkinnedMesh&&p.bind(d,XMe)});for(let p=0,g=f.length;p<g;p++)u.add(f[p]);return u})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?i.createUniqueName(s.name):"",o=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),this.nodeCache[e]=Promise.all(o).then(function(c){let u;if(s.isBone===!0?u=new ZA:c.length>1?u=new kf:c.length===1?u=c[0]:u=new Mr,u!==c[0])for(let f=0,d=c.length;f<d;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=a),xf(u,s),s.extensions&&Qp(n,u,s),s.matrix!==void 0){const f=new Nn;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,s=new kf;n.name&&(s.name=i.createUniqueName(n.name)),xf(s,n),n.extensions&&Qp(t,s,n);const a=n.nodes||[],o=[];for(let l=0,c=a.length;l<c;l++)o.push(i.getDependency("node",a[l]));return Promise.all(o).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[d,p]of i.associations)(d instanceof Os||d instanceof Ur)&&f.set(d,p);return u.traverse(d=>{const p=i.associations.get(d);p!=null&&f.set(d,p)}),f};return i.associations=c(s),s})}_createAnimationTracks(e,t,n,i,s){const a=[],o=e.name?e.name:e.uuid,l=[];Zd[s.path]===Zd.weights?e.traverse(function(d){d.morphTargetInfluences&&l.push(d.name?d.name:d.uuid)}):l.push(o);let c;switch(Zd[s.path]){case Zd.weights:c=Km;break;case Zd.rotation:c=qm;break;case Zd.position:case Zd.scale:c=Zm;break;default:switch(n.itemSize){case 1:c=Km;break;case 2:case 3:default:c=Zm;break}break}const u=i.interpolation!==void 0?VMe[i.interpolation]:J1,f=this._getArrayFromAccessor(n);for(let d=0,p=l.length;d<p;d++){const g=new c(l[d]+"."+Zd[s.path],t.array,f,u);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),a.push(g)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=R3(t.constructor),i=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s++)i[s]=t[s]*n;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const i=this instanceof qm?zMe:aX;return new i(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function KMe(r,e,t){const n=e.attributes,i=new ta;if(n.POSITION!==void 0){const o=t.json.accessors[n.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(i.set(new ye(l[0],l[1],l[2]),new ye(c[0],c[1],c[2])),o.normalized){const u=R3(p1[o.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new ye,l=new ye;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const d=t.json.accessors[f.POSITION],p=d.min,g=d.max;if(p!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(g[2]))),d.normalized){const _=R3(p1[d.componentType]);l.multiplyScalar(_)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(o)}r.boundingBox=i;const a=new na;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,r.boundingSphere=a}function gj(r,e,t){const n=e.attributes,i=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){r.setAttribute(o,l)})}for(const a in n){const o=k3[a]||a.toLowerCase();o in r.attributes||i.push(s(n[a],o))}if(e.indices!==void 0&&!r.index){const a=t.getDependency("accessor",e.indices).then(function(o){r.setIndex(o)});i.push(a)}return xf(r,e),KMe(r,e,t),Promise.all(i).then(function(){return e.targets!==void 0?HMe(r,e.targets,t):r})}class qMe extends pR{constructor(e){super(e),this.type=ks}parse(e){const a=function(I,D){switch(I){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(D||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(D||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(D||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(D||""))}},u=`
`,f=function(I,D,E){D=D||1024;let U=I.pos,V=-1,X=0,te="",ee=String.fromCharCode.apply(null,new Uint16Array(I.subarray(U,U+128)));for(;0>(V=ee.indexOf(u))&&X<D&&U<I.byteLength;)te+=ee,X+=ee.length,U+=128,ee+=String.fromCharCode.apply(null,new Uint16Array(I.subarray(U,U+128)));return-1<V?(I.pos+=X+V+1,te+ee.slice(0,V)):!1},d=function(I){const D=/^#\?(\S+)/,E=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,B=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,U=/^\s*FORMAT=(\S+)\s*$/,V=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,X={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let te,ee;for((I.pos>=I.byteLength||!(te=f(I)))&&a(1,"no header found"),(ee=te.match(D))||a(3,"bad initial token"),X.valid|=1,X.programtype=ee[1],X.string+=te+`
`;te=f(I),te!==!1;){if(X.string+=te+`
`,te.charAt(0)==="#"){X.comments+=te+`
`;continue}if((ee=te.match(E))&&(X.gamma=parseFloat(ee[1])),(ee=te.match(B))&&(X.exposure=parseFloat(ee[1])),(ee=te.match(U))&&(X.valid|=2,X.format=ee[1]),(ee=te.match(V))&&(X.valid|=4,X.height=parseInt(ee[1],10),X.width=parseInt(ee[2],10)),X.valid&2&&X.valid&4)break}return X.valid&2||a(3,"missing format specifier"),X.valid&4||a(3,"missing image size specifier"),X},p=function(I,D,E){const B=D;if(B<8||B>32767||I[0]!==2||I[1]!==2||I[2]&128)return new Uint8Array(I);B!==(I[2]<<8|I[3])&&a(3,"wrong scanline width");const U=new Uint8Array(4*D*E);U.length||a(4,"unable to allocate buffer space");let V=0,X=0;const te=4*B,ee=new Uint8Array(4),ue=new Uint8Array(te);let ne=E;for(;ne>0&&X<I.byteLength;){X+4>I.byteLength&&a(1),ee[0]=I[X++],ee[1]=I[X++],ee[2]=I[X++],ee[3]=I[X++],(ee[0]!=2||ee[1]!=2||(ee[2]<<8|ee[3])!=B)&&a(3,"bad rgbe scanline format");let oe=0,q;for(;oe<te&&X<I.byteLength;){q=I[X++];const ie=q>128;if(ie&&(q-=128),(q===0||oe+q>te)&&a(3,"bad scanline data"),ie){const he=I[X++];for(let $=0;$<q;$++)ue[oe++]=he}else ue.set(I.subarray(X,X+q),oe),oe+=q,X+=q}const J=B;for(let ie=0;ie<J;ie++){let he=0;U[V]=ue[ie+he],he+=B,U[V+1]=ue[ie+he],he+=B,U[V+2]=ue[ie+he],he+=B,U[V+3]=ue[ie+he],V+=4}ne--}return U},g=function(I,D,E,B){const U=I[D+3],V=Math.pow(2,U-128)/255;E[B+0]=I[D+0]*V,E[B+1]=I[D+1]*V,E[B+2]=I[D+2]*V,E[B+3]=1},_=function(I,D,E,B){const U=I[D+3],V=Math.pow(2,U-128)/255;E[B+0]=wm.toHalfFloat(Math.min(I[D+0]*V,65504)),E[B+1]=wm.toHalfFloat(Math.min(I[D+1]*V,65504)),E[B+2]=wm.toHalfFloat(Math.min(I[D+2]*V,65504)),E[B+3]=wm.toHalfFloat(1)},w=new Uint8Array(e);w.pos=0;const b=d(w),C=b.width,M=b.height,A=p(w.subarray(w.pos),C,M);let k,O,R;switch(this.type){case Mi:R=A.length/4;const I=new Float32Array(R*4);for(let E=0;E<R;E++)g(A,E*4,I,E*4);k=I,O=Mi;break;case ks:R=A.length/4;const D=new Uint16Array(R*4);for(let E=0;E<R;E++)_(A,E*4,D,E*4);k=D,O=ks;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:C,height:M,data:k,header:b.string,gamma:b.gamma,exposure:b.exposure,type:O}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(a,o){switch(a.type){case Mi:case ks:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=dr,a.magFilter=dr,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,o)}return super.load(e,s,n,i)}}const Oy=kR>=152;class ZMe extends pR{constructor(e){super(e),this.type=ks}parse(e){const D=Math.pow(2.7182818,2.2);function E(se,fe){for(var Re=0,nt=0;nt<65536;++nt)(nt==0||se[nt>>3]&1<<(nt&7))&&(fe[Re++]=nt);for(var mt=Re-1;Re<65536;)fe[Re++]=0;return mt}function B(se){for(var fe=0;fe<16384;fe++)se[fe]={},se[fe].len=0,se[fe].lit=0,se[fe].p=null}const U={l:0,c:0,lc:0};function V(se,fe,Re,nt,mt){for(;Re<se;)fe=fe<<8|et(nt,mt),Re+=8;Re-=se,U.l=fe>>Re&(1<<se)-1,U.c=fe,U.lc=Re}const X=new Array(59);function te(se){for(var fe=0;fe<=58;++fe)X[fe]=0;for(var fe=0;fe<65537;++fe)X[se[fe]]+=1;for(var Re=0,fe=58;fe>0;--fe){var nt=Re+X[fe]>>1;X[fe]=Re,Re=nt}for(var fe=0;fe<65537;++fe){var mt=se[fe];mt>0&&(se[fe]=mt|X[mt]++<<6)}}function ee(se,fe,Re,nt,mt,gt,Ot){for(var kt=Re,ae=0,Se=0;mt<=gt;mt++){if(kt.value-Re.value>nt)return!1;V(6,ae,Se,se,kt);var De=U.l;if(ae=U.c,Se=U.lc,Ot[mt]=De,De==63){if(kt.value-Re.value>nt)throw"Something wrong with hufUnpackEncTable";V(8,ae,Se,se,kt);var me=U.l+6;if(ae=U.c,Se=U.lc,mt+me>gt+1)throw"Something wrong with hufUnpackEncTable";for(;me--;)Ot[mt++]=0;mt--}else if(De>=59){var me=De-59+2;if(mt+me>gt+1)throw"Something wrong with hufUnpackEncTable";for(;me--;)Ot[mt++]=0;mt--}}te(Ot)}function ue(se){return se&63}function ne(se){return se>>6}function oe(se,fe,Re,nt){for(;fe<=Re;fe++){var mt=ne(se[fe]),gt=ue(se[fe]);if(mt>>gt)throw"Invalid table entry";if(gt>14){var Ot=nt[mt>>gt-14];if(Ot.len)throw"Invalid table entry";if(Ot.lit++,Ot.p){var kt=Ot.p;Ot.p=new Array(Ot.lit);for(var ae=0;ae<Ot.lit-1;++ae)Ot.p[ae]=kt[ae]}else Ot.p=new Array(1);Ot.p[Ot.lit-1]=fe}else if(gt)for(var Se=0,ae=1<<14-gt;ae>0;ae--){var Ot=nt[(mt<<14-gt)+Se];if(Ot.len||Ot.p)throw"Invalid table entry";Ot.len=gt,Ot.lit=fe,Se++}}return!0}const q={c:0,lc:0};function J(se,fe,Re,nt){se=se<<8|et(Re,nt),fe+=8,q.c=se,q.lc=fe}const ie={c:0,lc:0};function he(se,fe,Re,nt,mt,gt,Ot,kt,ae,Se){if(se==fe){nt<8&&(J(Re,nt,mt,Ot),Re=q.c,nt=q.lc),nt-=8;var De=Re>>nt,De=new Uint8Array([De])[0];if(ae.value+De>Se)return!1;for(var me=kt[ae.value-1];De-- >0;)kt[ae.value++]=me}else if(ae.value<Se)kt[ae.value++]=se;else return!1;ie.c=Re,ie.lc=nt}function $(se){return se&65535}function ge(se){var fe=$(se);return fe>32767?fe-65536:fe}const pe={a:0,b:0};function we(se,fe){var Re=ge(se),nt=ge(fe),mt=nt,gt=Re+(mt&1)+(mt>>1),Ot=gt,kt=gt-mt;pe.a=Ot,pe.b=kt}function ke(se,fe){var Re=$(se),nt=$(fe),mt=Re-(nt>>1)&65535,gt=nt+mt-32768&65535;pe.a=gt,pe.b=mt}function Pe(se,fe,Re,nt,mt,gt,Ot){for(var kt=Ot<16384,ae=Re>mt?mt:Re,Se=1,De;Se<=ae;)Se<<=1;for(Se>>=1,De=Se,Se>>=1;Se>=1;){for(var me=0,Fe=me+gt*(mt-De),st=gt*Se,dt=gt*De,Ct=nt*Se,It=nt*De,Gt,Ut,Et,Jt;me<=Fe;me+=dt){for(var Wt=me,Mn=me+nt*(Re-De);Wt<=Mn;Wt+=It){var sn=Wt+Ct,fn=Wt+st,Qt=fn+Ct;kt?(we(se[Wt+fe],se[fn+fe]),Gt=pe.a,Et=pe.b,we(se[sn+fe],se[Qt+fe]),Ut=pe.a,Jt=pe.b,we(Gt,Ut),se[Wt+fe]=pe.a,se[sn+fe]=pe.b,we(Et,Jt),se[fn+fe]=pe.a,se[Qt+fe]=pe.b):(ke(se[Wt+fe],se[fn+fe]),Gt=pe.a,Et=pe.b,ke(se[sn+fe],se[Qt+fe]),Ut=pe.a,Jt=pe.b,ke(Gt,Ut),se[Wt+fe]=pe.a,se[sn+fe]=pe.b,ke(Et,Jt),se[fn+fe]=pe.a,se[Qt+fe]=pe.b)}if(Re&Se){var fn=Wt+st;kt?we(se[Wt+fe],se[fn+fe]):ke(se[Wt+fe],se[fn+fe]),Gt=pe.a,se[fn+fe]=pe.b,se[Wt+fe]=Gt}}if(mt&Se)for(var Wt=me,Mn=me+nt*(Re-De);Wt<=Mn;Wt+=It){var sn=Wt+Ct;kt?we(se[Wt+fe],se[sn+fe]):ke(se[Wt+fe],se[sn+fe]),Gt=pe.a,se[sn+fe]=pe.b,se[Wt+fe]=Gt}De=Se,Se>>=1}return me}function je(se,fe,Re,nt,mt,gt,Ot,kt,ae,Se){for(var De=0,me=0,Fe=kt,st=Math.trunc(mt.value+(gt+7)/8);mt.value<st;)for(J(De,me,Re,mt),De=q.c,me=q.lc;me>=14;){var dt=De>>me-14&16383,Ct=fe[dt];if(Ct.len)me-=Ct.len,he(Ct.lit,Ot,De,me,Re,nt,mt,ae,Se,Fe),De=ie.c,me=ie.lc;else{if(!Ct.p)throw"hufDecode issues";var It;for(It=0;It<Ct.lit;It++){for(var Gt=ue(se[Ct.p[It]]);me<Gt&&mt.value<st;)J(De,me,Re,mt),De=q.c,me=q.lc;if(me>=Gt&&ne(se[Ct.p[It]])==(De>>me-Gt&(1<<Gt)-1)){me-=Gt,he(Ct.p[It],Ot,De,me,Re,nt,mt,ae,Se,Fe),De=ie.c,me=ie.lc;break}}if(It==Ct.lit)throw"hufDecode issues"}}var Ut=8-gt&7;for(De>>=Ut,me-=Ut;me>0;){var Ct=fe[De<<14-me&16383];if(Ct.len)me-=Ct.len,he(Ct.lit,Ot,De,me,Re,nt,mt,ae,Se,Fe),De=ie.c,me=ie.lc;else throw"hufDecode issues"}return!0}function Ke(se,fe,Re,nt,mt,gt){var Ot={value:0},kt=Re.value,ae=qe(fe,Re),Se=qe(fe,Re);Re.value+=4;var De=qe(fe,Re);if(Re.value+=4,ae<0||ae>=65537||Se<0||Se>=65537)throw"Something wrong with HUF_ENCSIZE";var me=new Array(65537),Fe=new Array(16384);B(Fe);var st=nt-(Re.value-kt);if(ee(se,fe,Re,st,ae,Se,me),De>8*(nt-(Re.value-kt)))throw"Something wrong with hufUncompress";oe(me,ae,Se,Fe),je(me,Fe,se,fe,Re,De,Se,gt,mt,Ot)}function Ie(se,fe,Re){for(var nt=0;nt<Re;++nt)fe[nt]=se[fe[nt]]}function Ge(se){for(var fe=1;fe<se.length;fe++){var Re=se[fe-1]+se[fe]-128;se[fe]=Re}}function ce(se,fe){for(var Re=0,nt=Math.floor((se.length+1)/2),mt=0,gt=se.length-1;!(mt>gt||(fe[mt++]=se[Re++],mt>gt));)fe[mt++]=se[nt++]}function _t(se){for(var fe=se.byteLength,Re=new Array,nt=0,mt=new DataView(se);fe>0;){var gt=mt.getInt8(nt++);if(gt<0){var Ot=-gt;fe-=Ot+1;for(var kt=0;kt<Ot;kt++)Re.push(mt.getUint8(nt++))}else{var Ot=gt;fe-=2;for(var ae=mt.getUint8(nt++),kt=0;kt<Ot+1;kt++)Re.push(ae)}}return Re}function _e(se,fe,Re,nt,mt,gt){var sn=new DataView(gt.buffer),Ot=Re[se.idx[0]].width,kt=Re[se.idx[0]].height,ae=3,Se=Math.floor(Ot/8),De=Math.ceil(Ot/8),me=Math.ceil(kt/8),Fe=Ot-(De-1)*8,st=kt-(me-1)*8,dt={value:0},Ct=new Array(ae),It=new Array(ae),Gt=new Array(ae),Ut=new Array(ae),Et=new Array(ae);for(let In=0;In<ae;++In)Et[In]=fe[se.idx[In]],Ct[In]=In<1?0:Ct[In-1]+De*me,It[In]=new Float32Array(64),Gt[In]=new Uint16Array(64),Ut[In]=new Uint16Array(De*64);for(let In=0;In<me;++In){var Jt=8;In==me-1&&(Jt=st);var Wt=8;for(let An=0;An<De;++An){An==De-1&&(Wt=Fe);for(let gn=0;gn<ae;++gn)Gt[gn].fill(0),Gt[gn][0]=mt[Ct[gn]++],Ne(dt,nt,Gt[gn]),Ce(Gt[gn],It[gn]),He(It[gn]);Ee(It);for(let gn=0;gn<ae;++gn)Z(It[gn],Ut[gn],An*64)}let Ar=0;for(let An=0;An<ae;++An){const gn=Re[se.idx[An]].type;for(let Sn=8*In;Sn<8*In+Jt;++Sn){Ar=Et[An][Sn];for(let gr=0;gr<Se;++gr){const qn=gr*64+(Sn&7)*8;sn.setUint16(Ar+0*2*gn,Ut[An][qn+0],!0),sn.setUint16(Ar+1*2*gn,Ut[An][qn+1],!0),sn.setUint16(Ar+2*2*gn,Ut[An][qn+2],!0),sn.setUint16(Ar+3*2*gn,Ut[An][qn+3],!0),sn.setUint16(Ar+4*2*gn,Ut[An][qn+4],!0),sn.setUint16(Ar+5*2*gn,Ut[An][qn+5],!0),sn.setUint16(Ar+6*2*gn,Ut[An][qn+6],!0),sn.setUint16(Ar+7*2*gn,Ut[An][qn+7],!0),Ar+=8*2*gn}}if(Se!=De)for(let Sn=8*In;Sn<8*In+Jt;++Sn){const gr=Et[An][Sn]+8*Se*2*gn,qn=Se*64+(Sn&7)*8;for(let Tn=0;Tn<Wt;++Tn)sn.setUint16(gr+Tn*2*gn,Ut[An][qn+Tn],!0)}}}for(var Mn=new Uint16Array(Ot),sn=new DataView(gt.buffer),fn=0;fn<ae;++fn){Re[se.idx[fn]].decoded=!0;var Qt=Re[se.idx[fn]].type;if(Re[fn].type==2)for(var Bn=0;Bn<kt;++Bn){const In=Et[fn][Bn];for(var pn=0;pn<Ot;++pn)Mn[pn]=sn.getUint16(In+pn*2*Qt,!0);for(var pn=0;pn<Ot;++pn)sn.setFloat32(In+pn*2*Qt,Oe(Mn[pn]),!0)}}}function Ne(se,fe,Re){for(var nt,mt=1;mt<64;)nt=fe[se.value],nt==65280?mt=64:nt>>8==255?mt+=nt&255:(Re[mt]=nt,mt++),se.value++}function Ce(se,fe){fe[0]=Oe(se[0]),fe[1]=Oe(se[1]),fe[2]=Oe(se[5]),fe[3]=Oe(se[6]),fe[4]=Oe(se[14]),fe[5]=Oe(se[15]),fe[6]=Oe(se[27]),fe[7]=Oe(se[28]),fe[8]=Oe(se[2]),fe[9]=Oe(se[4]),fe[10]=Oe(se[7]),fe[11]=Oe(se[13]),fe[12]=Oe(se[16]),fe[13]=Oe(se[26]),fe[14]=Oe(se[29]),fe[15]=Oe(se[42]),fe[16]=Oe(se[3]),fe[17]=Oe(se[8]),fe[18]=Oe(se[12]),fe[19]=Oe(se[17]),fe[20]=Oe(se[25]),fe[21]=Oe(se[30]),fe[22]=Oe(se[41]),fe[23]=Oe(se[43]),fe[24]=Oe(se[9]),fe[25]=Oe(se[11]),fe[26]=Oe(se[18]),fe[27]=Oe(se[24]),fe[28]=Oe(se[31]),fe[29]=Oe(se[40]),fe[30]=Oe(se[44]),fe[31]=Oe(se[53]),fe[32]=Oe(se[10]),fe[33]=Oe(se[19]),fe[34]=Oe(se[23]),fe[35]=Oe(se[32]),fe[36]=Oe(se[39]),fe[37]=Oe(se[45]),fe[38]=Oe(se[52]),fe[39]=Oe(se[54]),fe[40]=Oe(se[20]),fe[41]=Oe(se[22]),fe[42]=Oe(se[33]),fe[43]=Oe(se[38]),fe[44]=Oe(se[46]),fe[45]=Oe(se[51]),fe[46]=Oe(se[55]),fe[47]=Oe(se[60]),fe[48]=Oe(se[21]),fe[49]=Oe(se[34]),fe[50]=Oe(se[37]),fe[51]=Oe(se[47]),fe[52]=Oe(se[50]),fe[53]=Oe(se[56]),fe[54]=Oe(se[59]),fe[55]=Oe(se[61]),fe[56]=Oe(se[35]),fe[57]=Oe(se[36]),fe[58]=Oe(se[48]),fe[59]=Oe(se[49]),fe[60]=Oe(se[57]),fe[61]=Oe(se[58]),fe[62]=Oe(se[62]),fe[63]=Oe(se[63])}function He(se){const fe=.5*Math.cos(.7853975),Re=.5*Math.cos(3.14159/16),nt=.5*Math.cos(3.14159/8),mt=.5*Math.cos(3*3.14159/16),gt=.5*Math.cos(5*3.14159/16),Ot=.5*Math.cos(3*3.14159/8),kt=.5*Math.cos(7*3.14159/16);for(var ae=new Array(4),Se=new Array(4),De=new Array(4),me=new Array(4),Fe=0;Fe<8;++Fe){var st=Fe*8;ae[0]=nt*se[st+2],ae[1]=Ot*se[st+2],ae[2]=nt*se[st+6],ae[3]=Ot*se[st+6],Se[0]=Re*se[st+1]+mt*se[st+3]+gt*se[st+5]+kt*se[st+7],Se[1]=mt*se[st+1]-kt*se[st+3]-Re*se[st+5]-gt*se[st+7],Se[2]=gt*se[st+1]-Re*se[st+3]+kt*se[st+5]+mt*se[st+7],Se[3]=kt*se[st+1]-gt*se[st+3]+mt*se[st+5]-Re*se[st+7],De[0]=fe*(se[st+0]+se[st+4]),De[3]=fe*(se[st+0]-se[st+4]),De[1]=ae[0]+ae[3],De[2]=ae[1]-ae[2],me[0]=De[0]+De[1],me[1]=De[3]+De[2],me[2]=De[3]-De[2],me[3]=De[0]-De[1],se[st+0]=me[0]+Se[0],se[st+1]=me[1]+Se[1],se[st+2]=me[2]+Se[2],se[st+3]=me[3]+Se[3],se[st+4]=me[3]-Se[3],se[st+5]=me[2]-Se[2],se[st+6]=me[1]-Se[1],se[st+7]=me[0]-Se[0]}for(var dt=0;dt<8;++dt)ae[0]=nt*se[16+dt],ae[1]=Ot*se[16+dt],ae[2]=nt*se[48+dt],ae[3]=Ot*se[48+dt],Se[0]=Re*se[8+dt]+mt*se[24+dt]+gt*se[40+dt]+kt*se[56+dt],Se[1]=mt*se[8+dt]-kt*se[24+dt]-Re*se[40+dt]-gt*se[56+dt],Se[2]=gt*se[8+dt]-Re*se[24+dt]+kt*se[40+dt]+mt*se[56+dt],Se[3]=kt*se[8+dt]-gt*se[24+dt]+mt*se[40+dt]-Re*se[56+dt],De[0]=fe*(se[dt]+se[32+dt]),De[3]=fe*(se[dt]-se[32+dt]),De[1]=ae[0]+ae[3],De[2]=ae[1]-ae[2],me[0]=De[0]+De[1],me[1]=De[3]+De[2],me[2]=De[3]-De[2],me[3]=De[0]-De[1],se[0+dt]=me[0]+Se[0],se[8+dt]=me[1]+Se[1],se[16+dt]=me[2]+Se[2],se[24+dt]=me[3]+Se[3],se[32+dt]=me[3]-Se[3],se[40+dt]=me[2]-Se[2],se[48+dt]=me[1]-Se[1],se[56+dt]=me[0]-Se[0]}function Ee(se){for(var fe=0;fe<64;++fe){var Re=se[0][fe],nt=se[1][fe],mt=se[2][fe];se[0][fe]=Re+1.5747*mt,se[1][fe]=Re-.1873*nt-.4682*mt,se[2][fe]=Re+1.8556*nt}}function Z(se,fe,Re){for(var nt=0;nt<64;++nt)fe[Re+nt]=wm.toHalfFloat(W(se[nt]))}function W(se){return se<=1?Math.sign(se)*Math.pow(Math.abs(se),2.2):Math.sign(se)*Math.pow(D,Math.abs(se)-1)}function re(se){return new DataView(se.array.buffer,se.offset.value,se.size)}function be(se){var fe=se.viewer.buffer.slice(se.offset.value,se.offset.value+se.size),Re=new Uint8Array(_t(fe)),nt=new Uint8Array(Re.length);return Ge(Re),ce(Re,nt),new DataView(nt.buffer)}function ve(se){var fe=se.array.slice(se.offset.value,se.offset.value+se.size),Re=_S(fe),nt=new Uint8Array(Re.length);return Ge(Re),ce(Re,nt),new DataView(nt.buffer)}function Je(se){for(var fe=se.viewer,Re={value:se.offset.value},nt=new Uint16Array(se.width*se.scanlineBlockSize*(se.channels*se.type)),mt=new Uint8Array(8192),gt=0,Ot=new Array(se.channels),kt=0;kt<se.channels;kt++)Ot[kt]={},Ot[kt].start=gt,Ot[kt].end=Ot[kt].start,Ot[kt].nx=se.width,Ot[kt].ny=se.lines,Ot[kt].size=se.type,gt+=Ot[kt].nx*Ot[kt].ny*Ot[kt].size;var ae=Ye(fe,Re),Se=Ye(fe,Re);if(Se>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ae<=Se)for(var kt=0;kt<Se-ae+1;kt++)mt[kt+ae]=Me(fe,Re);var De=new Uint16Array(65536),me=E(mt,De),Fe=qe(fe,Re);Ke(se.array,fe,Re,Fe,nt,gt);for(var kt=0;kt<se.channels;++kt)for(var st=Ot[kt],dt=0;dt<Ot[kt].size;++dt)Pe(nt,st.start+dt,st.nx,st.size,st.ny,st.nx*st.size,me);Ie(De,nt,gt);for(var Ct=0,It=new Uint8Array(nt.buffer.byteLength),Gt=0;Gt<se.lines;Gt++)for(var Ut=0;Ut<se.channels;Ut++){var st=Ot[Ut],Et=st.nx*st.size,Jt=new Uint8Array(nt.buffer,st.end*2,Et*2);It.set(Jt,Ct),Ct+=Et*2,st.end+=Et}return new DataView(It.buffer)}function $e(se){var fe=se.array.slice(se.offset.value,se.offset.value+se.size),Re=_S(fe);const nt=se.lines*se.channels*se.width,mt=se.type==1?new Uint16Array(nt):new Uint32Array(nt);let gt=0,Ot=0;const kt=new Array(4);for(let ae=0;ae<se.lines;ae++)for(let Se=0;Se<se.channels;Se++){let De=0;switch(se.type){case 1:kt[0]=gt,kt[1]=kt[0]+se.width,gt=kt[1]+se.width;for(let me=0;me<se.width;++me){const Fe=Re[kt[0]++]<<8|Re[kt[1]++];De+=Fe,mt[Ot]=De,Ot++}break;case 2:kt[0]=gt,kt[1]=kt[0]+se.width,kt[2]=kt[1]+se.width,gt=kt[2]+se.width;for(let me=0;me<se.width;++me){const Fe=Re[kt[0]++]<<24|Re[kt[1]++]<<16|Re[kt[2]++]<<8;De+=Fe,mt[Ot]=De,Ot++}break}}return new DataView(mt.buffer)}function it(se){var fe=se.viewer,Re={value:se.offset.value},nt=new Uint8Array(se.width*se.lines*(se.channels*se.type*2)),mt={version:tt(fe,Re),unknownUncompressedSize:tt(fe,Re),unknownCompressedSize:tt(fe,Re),acCompressedSize:tt(fe,Re),dcCompressedSize:tt(fe,Re),rleCompressedSize:tt(fe,Re),rleUncompressedSize:tt(fe,Re),rleRawSize:tt(fe,Re),totalAcUncompressedCount:tt(fe,Re),totalDcUncompressedCount:tt(fe,Re),acCompression:tt(fe,Re)};if(mt.version<2)throw"EXRLoader.parse: "+sr.compression+" version "+mt.version+" is unsupported";for(var gt=new Array,Ot=Ye(fe,Re)-2;Ot>0;){var kt=pt(fe.buffer,Re),ae=Me(fe,Re),Se=ae>>2&3,De=(ae>>4)-1,me=new Int8Array([De])[0],Fe=Me(fe,Re);gt.push({name:kt,index:me,type:Fe,compression:Se}),Ot-=kt.length+3}for(var st=sr.channels,dt=new Array(se.channels),Ct=0;Ct<se.channels;++Ct){var It=dt[Ct]={},Gt=st[Ct];It.name=Gt.name,It.compression=0,It.decoded=!1,It.type=Gt.pixelType,It.pLinear=Gt.pLinear,It.width=se.width,It.height=se.lines}for(var Ut={idx:new Array(3)},Et=0;Et<se.channels;++Et)for(var It=dt[Et],Ct=0;Ct<gt.length;++Ct){var Jt=gt[Ct];It.name==Jt.name&&(It.compression=Jt.compression,Jt.index>=0&&(Ut.idx[Jt.index]=Et),It.offset=Et)}if(mt.acCompressedSize>0)switch(mt.acCompression){case 0:var sn=new Uint16Array(mt.totalAcUncompressedCount);Ke(se.array,fe,Re,mt.acCompressedSize,sn,mt.totalAcUncompressedCount);break;case 1:var Wt=se.array.slice(Re.value,Re.value+mt.totalAcUncompressedCount),Mn=_S(Wt),sn=new Uint16Array(Mn.buffer);Re.value+=mt.totalAcUncompressedCount;break}if(mt.dcCompressedSize>0){var fn={array:se.array,offset:Re,size:mt.dcCompressedSize},Qt=new Uint16Array(ve(fn).buffer);Re.value+=mt.dcCompressedSize}if(mt.rleRawSize>0){var Wt=se.array.slice(Re.value,Re.value+mt.rleCompressedSize),Mn=_S(Wt),Bn=_t(Mn.buffer);Re.value+=mt.rleCompressedSize}for(var pn=0,In=new Array(dt.length),Ct=0;Ct<In.length;++Ct)In[Ct]=new Array;for(var Ar=0;Ar<se.lines;++Ar)for(var An=0;An<dt.length;++An)In[An].push(pn),pn+=dt[An].width*se.type*2;_e(Ut,In,dt,sn,Qt,nt);for(var Ct=0;Ct<dt.length;++Ct){var It=dt[Ct];if(!It.decoded)switch(It.compression){case 2:for(var gn=0,Sn=0,Ar=0;Ar<se.lines;++Ar){for(var gr=In[Ct][gn],qn=0;qn<It.width;++qn){for(var Tn=0;Tn<2*It.type;++Tn)nt[gr++]=Bn[Sn+Tn*It.width*It.height];Sn++}gn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(nt.buffer)}function pt(se,fe){for(var Re=new Uint8Array(se),nt=0;Re[fe.value+nt]!=0;)nt+=1;var mt=new TextDecoder().decode(Re.slice(fe.value,fe.value+nt));return fe.value=fe.value+nt+1,mt}function Ft(se,fe,Re){var nt=new TextDecoder().decode(new Uint8Array(se).slice(fe.value,fe.value+Re));return fe.value=fe.value+Re,nt}function Le(se,fe){var Re=vt(se,fe),nt=qe(se,fe);return[Re,nt]}function at(se,fe){var Re=qe(se,fe),nt=qe(se,fe);return[Re,nt]}function vt(se,fe){var Re=se.getInt32(fe.value,!0);return fe.value=fe.value+4,Re}function qe(se,fe){var Re=se.getUint32(fe.value,!0);return fe.value=fe.value+4,Re}function et(se,fe){var Re=se[fe.value];return fe.value=fe.value+1,Re}function Me(se,fe){var Re=se.getUint8(fe.value);return fe.value=fe.value+1,Re}const tt=function(se,fe){let Re;return"getBigInt64"in DataView.prototype?Re=Number(se.getBigInt64(fe.value,!0)):Re=se.getUint32(fe.value+4,!0)+Number(se.getUint32(fe.value,!0)<<32),fe.value+=8,Re};function Tt(se,fe){var Re=se.getFloat32(fe.value,!0);return fe.value+=4,Re}function Ae(se,fe){return wm.toHalfFloat(Tt(se,fe))}function Oe(se){var fe=(se&31744)>>10,Re=se&1023;return(se>>15?-1:1)*(fe?fe===31?Re?NaN:1/0:Math.pow(2,fe-15)*(1+Re/1024):6103515625e-14*(Re/1024))}function Ye(se,fe){var Re=se.getUint16(fe.value,!0);return fe.value+=2,Re}function yt(se,fe){return Oe(Ye(se,fe))}function Lt(se,fe,Re,nt){for(var mt=Re.value,gt=[];Re.value<mt+nt-1;){var Ot=pt(fe,Re),kt=vt(se,Re),ae=Me(se,Re);Re.value+=3;var Se=vt(se,Re),De=vt(se,Re);gt.push({name:Ot,pixelType:kt,pLinear:ae,xSampling:Se,ySampling:De})}return Re.value+=1,gt}function xt(se,fe){var Re=Tt(se,fe),nt=Tt(se,fe),mt=Tt(se,fe),gt=Tt(se,fe),Ot=Tt(se,fe),kt=Tt(se,fe),ae=Tt(se,fe),Se=Tt(se,fe);return{redX:Re,redY:nt,greenX:mt,greenY:gt,blueX:Ot,blueY:kt,whiteX:ae,whiteY:Se}}function Yt(se,fe){var Re=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],nt=Me(se,fe);return Re[nt]}function on(se,fe){var Re=qe(se,fe),nt=qe(se,fe),mt=qe(se,fe),gt=qe(se,fe);return{xMin:Re,yMin:nt,xMax:mt,yMax:gt}}function Zt(se,fe){var Re=["INCREASING_Y"],nt=Me(se,fe);return Re[nt]}function qt(se,fe){var Re=Tt(se,fe),nt=Tt(se,fe);return[Re,nt]}function Xe(se,fe){var Re=Tt(se,fe),nt=Tt(se,fe),mt=Tt(se,fe);return[Re,nt,mt]}function ot(se,fe,Re,nt,mt){if(nt==="string"||nt==="stringvector"||nt==="iccProfile")return Ft(fe,Re,mt);if(nt==="chlist")return Lt(se,fe,Re,mt);if(nt==="chromaticities")return xt(se,Re);if(nt==="compression")return Yt(se,Re);if(nt==="box2i")return on(se,Re);if(nt==="lineOrder")return Zt(se,Re);if(nt==="float")return Tt(se,Re);if(nt==="v2f")return qt(se,Re);if(nt==="v3f")return Xe(se,Re);if(nt==="int")return vt(se,Re);if(nt==="rational")return Le(se,Re);if(nt==="timecode")return at(se,Re);if(nt==="preview")return Re.value+=mt,"skipped";Re.value+=mt}function Dt(se,fe,Re){const nt={};if(se.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";nt.version=se.getUint8(4);const mt=se.getUint8(5);nt.spec={singleTile:!!(mt&2),longName:!!(mt&4),deepFormat:!!(mt&8),multiPart:!!(mt&16)},Re.value=8;for(var gt=!0;gt;){var Ot=pt(fe,Re);if(Ot==0)gt=!1;else{var kt=pt(fe,Re),ae=qe(se,Re),Se=ot(se,fe,Re,kt,ae);Se===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${kt}'.`):nt[Ot]=Se}}if((mt&-5)!=0)throw console.error("EXRHeader:",nt),"THREE.EXRLoader: provided file is currently unsupported.";return nt}function nn(se,fe,Re,nt,mt){const gt={size:0,viewer:fe,array:Re,offset:nt,width:se.dataWindow.xMax-se.dataWindow.xMin+1,height:se.dataWindow.yMax-se.dataWindow.yMin+1,channels:se.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:se.channels[0].pixelType,uncompress:null,getter:null,format:null,[Oy?"colorSpace":"encoding"]:null};switch(se.compression){case"NO_COMPRESSION":gt.lines=1,gt.uncompress=re;break;case"RLE_COMPRESSION":gt.lines=1,gt.uncompress=be;break;case"ZIPS_COMPRESSION":gt.lines=1,gt.uncompress=ve;break;case"ZIP_COMPRESSION":gt.lines=16,gt.uncompress=ve;break;case"PIZ_COMPRESSION":gt.lines=32,gt.uncompress=Je;break;case"PXR24_COMPRESSION":gt.lines=16,gt.uncompress=$e;break;case"DWAA_COMPRESSION":gt.lines=32,gt.uncompress=it;break;case"DWAB_COMPRESSION":gt.lines=256,gt.uncompress=it;break;default:throw"EXRLoader.parse: "+se.compression+" is unsupported"}if(gt.scanlineBlockSize=gt.lines,gt.type==1)switch(mt){case Mi:gt.getter=yt,gt.inputSize=2;break;case ks:gt.getter=Ye,gt.inputSize=2;break}else if(gt.type==2)switch(mt){case Mi:gt.getter=Tt,gt.inputSize=4;break;case ks:gt.getter=Ae,gt.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+gt.type+" for "+se.compression+".";gt.blockCount=(se.dataWindow.yMax+1)/gt.scanlineBlockSize;for(var Ot=0;Ot<gt.blockCount;Ot++)tt(fe,nt);gt.outputChannels=gt.channels==3?4:gt.channels;const kt=gt.width*gt.height*gt.outputChannels;switch(mt){case Mi:gt.byteArray=new Float32Array(kt),gt.channels<gt.outputChannels&&gt.byteArray.fill(1,0,kt);break;case ks:gt.byteArray=new Uint16Array(kt),gt.channels<gt.outputChannels&&gt.byteArray.fill(15360,0,kt);break;default:console.error("THREE.EXRLoader: unsupported type: ",mt);break}return gt.bytesPerLine=gt.width*gt.inputSize*gt.channels,gt.outputChannels==4?gt.format=os:gt.format=nb,Oy?gt.colorSpace="srgb-linear":gt.encoding=3e3,gt}const Fn=new DataView(e),Or=new Uint8Array(e),Yn={value:0},sr=Dt(Fn,e,Yn),xn=nn(sr,Fn,Or,Yn,this.type),ni={value:0},Ii={R:0,G:1,B:2,A:3,Y:0};for(let se=0;se<xn.height/xn.scanlineBlockSize;se++){const fe=qe(Fn,Yn);xn.size=qe(Fn,Yn),xn.lines=fe+xn.scanlineBlockSize>xn.height?xn.height-fe:xn.scanlineBlockSize;const nt=xn.size<xn.lines*xn.bytesPerLine?xn.uncompress(xn):re(xn);Yn.value+=xn.size;for(let mt=0;mt<xn.scanlineBlockSize;mt++){const gt=mt+se*xn.scanlineBlockSize;if(gt>=xn.height)break;for(let Ot=0;Ot<xn.channels;Ot++){const kt=Ii[sr.channels[Ot].name];for(let ae=0;ae<xn.width;ae++){ni.value=(mt*(xn.channels*xn.width)+Ot*xn.width+ae)*xn.inputSize;const Se=(xn.height-1-gt)*(xn.width*xn.outputChannels)+ae*xn.outputChannels+kt;xn.byteArray[Se]=xn.getter(nt,ni)}}}}return{header:sr,width:xn.width,height:xn.height,data:xn.byteArray,format:xn.format,[Oy?"colorSpace":"encoding"]:xn[Oy?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(a,o){Oy?a.colorSpace=o.colorSpace:a.encoding=o.encoding,a.minFilter=dr,a.magFilter=dr,a.generateMipmaps=!1,a.flipY=!1,t&&t(a,o)}return super.load(e,s,n,i)}}const mI=new WeakMap;class $Me extends Sa{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const s=new _a(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,o).then(t).catch(i)},n,i)}decodeDracoFile(e,t,n,i){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const n=JSON.stringify(t);if(mI.has(e)){const l=mI.get(e);if(l.key===n)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(s,a).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),mI.set(e,{key:n,promise:o}),o}_createGeometry(e){const t=new $n;e.index&&t.setIndex(new Pr(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],s=i.name,a=i.array,o=i.itemSize;t.setAttribute(s,new Pr(a,o))}return t}_loadLibrary(e,t){const n=new _a(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((i,s)=>{n.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const i=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=eAe.toString(),a=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const a=s.data;switch(a.type){case"decode":i._callbacks[a.id].resolve(a);break;case"error":i._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function eAe(){let r,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":r=o.decoderConfig,e=new Promise(function(u){r.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(r)});break;case"decode":const l=o.buffer,c=o.taskConfig;e.then(u=>{const f=u.draco,d=new f.Decoder,p=new f.DecoderBuffer;p.Init(new Int8Array(l),l.byteLength);try{const g=t(f,d,p,c),_=g.attributes.map(w=>w.array.buffer);g.index&&_.push(g.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:g},_)}catch(g){console.error(g),self.postMessage({type:"error",id:o.id,error:g.message})}finally{f.destroy(p),f.destroy(d)}});break}};function t(a,o,l,c){const u=c.attributeIDs,f=c.attributeTypes;let d,p;const g=o.GetEncodedGeometryType(l);if(g===a.TRIANGULAR_MESH)d=new a.Mesh,p=o.DecodeBufferToMesh(l,d);else if(g===a.POINT_CLOUD)d=new a.PointCloud,p=o.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const _={index:null,attributes:[]};for(const w in u){const b=self[f[w]];let C,M;if(c.useUniqueIDs)M=u[w],C=o.GetAttributeByUniqueId(d,M);else{if(M=o.GetAttributeId(d,a[u[w]]),M===-1)continue;C=o.GetAttribute(d,M)}_.attributes.push(i(a,o,d,w,b,C))}return g===a.TRIANGULAR_MESH&&(_.index=n(a,o,d)),a.destroy(d),_}function n(a,o,l){const u=l.num_faces()*3,f=u*4,d=a._malloc(f);o.GetTrianglesUInt32Array(l,f,d);const p=new Uint32Array(a.HEAPF32.buffer,d,u).slice();return a._free(d),{array:p,itemSize:1}}function i(a,o,l,c,u,f){const d=f.num_components(),g=l.num_points()*d,_=g*u.BYTES_PER_ELEMENT,w=s(a,u),b=a._malloc(_);o.GetAttributeDataArrayForAllPoints(l,f,w,_,b);const C=new u(a.HEAPF32.buffer,b,g).slice();return a._free(b),{name:c,array:C,itemSize:d}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let SS;const gI=()=>{if(SS)return SS;const r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=r;WebAssembly.validate(t)&&(i=e);let s;const a=WebAssembly.instantiate(o(i),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function o(f){const d=new Uint8Array(f.length);for(let g=0;g<f.length;++g){const _=f.charCodeAt(g);d[g]=_>96?_-71:_>64?_-65:_>47?_+4:_>46?63:62}let p=0;for(let g=0;g<f.length;++g)d[p++]=d[g]<60?n[d[g]]:(d[g]-60)*64+d[++g];return d.buffer.slice(0,p)}function l(f,d,p,g,_,w){const b=s.exports.sbrk,C=p+3&-4,M=b(C*g),A=b(_.length),k=new Uint8Array(s.exports.memory.buffer);k.set(_,A);const O=f(M,p,g,A,_.length);if(O===0&&w&&w(M,C,g),d.set(k.subarray(M,M+p*g)),b(M-b(0)),O!==0)throw new Error(`Malformed buffer data: ${O}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return SS={ready:a,supported:!0,decodeVertexBuffer(f,d,p,g,_){l(s.exports.meshopt_decodeVertexBuffer,f,d,p,g,s.exports[c[_]])},decodeIndexBuffer(f,d,p,g){l(s.exports.meshopt_decodeIndexBuffer,f,d,p,g)},decodeIndexSequence(f,d,p,g){l(s.exports.meshopt_decodeIndexSequence,f,d,p,g)},decodeGltfBuffer(f,d,p,g,_,w){l(s.exports[u[_]],f,d,p,g,s.exports[c[w]])}},SS};function tAe(){var r=Object.create(null);function e(i,s){var a=i.id,o=i.name,l=i.dependencies;l===void 0&&(l=[]);var c=i.init;c===void 0&&(c=function(){});var u=i.getTransferables;if(u===void 0&&(u=null),!r[a])try{l=l.map(function(d){return d&&d.isWorkerModule&&(e(d,function(p){if(p instanceof Error)throw p}),d=r[d.id].value),d}),c=n("<"+o+">.init",c),u&&(u=n("<"+o+">.getTransferables",u));var f=null;typeof c=="function"?f=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),r[a]={id:a,value:f,getTransferables:u},s(f)}catch(d){d&&d.noLog||console.error(d),s(d)}}function t(i,s){var a,o=i.id,l=i.args;(!r[o]||typeof r[o].value!="function")&&s(new Error("Worker module "+o+": not found or its 'init' did not return a function"));try{var c=(a=r[o]).value.apply(a,l);c&&typeof c.then=="function"?c.then(u,function(f){return s(f instanceof Error?f:new Error(""+f))}):u(c)}catch(f){s(f)}function u(f){try{var d=r[o].getTransferables&&r[o].getTransferables(f);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),s(f,d)}catch(p){console.error(p),s(p)}}}function n(i,s){var a=void 0;self.troikaDefine=function(l){return a=l};var o=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(o)}catch(l){console.error(l)}return URL.revokeObjectURL(o),delete self.troikaDefine,a}self.addEventListener("message",function(i){var s=i.data,a=s.messageId,o=s.action,l=s.data;try{o==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:a,success:!1,error:c.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof c=="function"}})}),o==="callModule"&&t(l,function(c,u){c instanceof Error?postMessage({messageId:a,success:!1,error:c.message}):postMessage({messageId:a,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:a,success:!1,error:c.stack})}})}function nAe(r){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=r.dependencies,n=r.init;t=Array.isArray(t)?t.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var i=Promise.all(t).then(function(s){return n.apply(null,s)});return e._getInitResult=function(){return i},i},e}var oX=function(){var r=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),r=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return oX=function(){return r},r},rAe=0,iAe=0,vI=!1,Cw=Object.create(null),Mw=Object.create(null),P3=Object.create(null);function bv(r){if((!r||typeof r.init!="function")&&!vI)throw new Error("requires `options.init` function");var e=r.dependencies,t=r.init,n=r.getTransferables,i=r.workerId,s=nAe(r);i==null&&(i="#default");var a="workerModule"+ ++rAe,o=r.name||a,l=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(vI=!0,u=bv({workerId:i,name:"<"+o+"> function dependency: "+u.name,init:`function(){return (
`+Nx(u)+`
)}`}),vI=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function c(){for(var u=[],f=arguments.length;f--;)u[f]=arguments[f];if(!oX())return s.apply(void 0,u);if(!l){l=vj(i,"registerModule",c.workerModuleData);var d=function(){l=null,Mw[i].delete(d)};(Mw[i]||(Mw[i]=new Set)).add(d)}return l.then(function(p){var g=p.isCallable;if(g)return vj(i,"callModule",{id:a,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return c.workerModuleData={isWorkerModule:!0,id:a,name:o,dependencies:e,init:Nx(t),getTransferables:n&&Nx(n)},c.onMainThread=s,c}function sAe(r){Mw[r]&&Mw[r].forEach(function(e){e()}),Cw[r]&&(Cw[r].terminate(),delete Cw[r])}function Nx(r){var e=r.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function aAe(r){var e=Cw[r];if(!e){var t=Nx(tAe);e=Cw[r]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+r.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(n){var i=n.data,s=i.messageId,a=P3[s];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete P3[s],a(i)}}return e}function vj(r,e,t){return new Promise(function(n,i){var s=++iAe;P3[s]=function(a){a.success?n(a.result):i(new Error("Error in worker "+e+" call: "+a.error))},aAe(r).postMessage({messageId:s,action:e,data:t})})}function lX(){var r=function(e){function t(oe,q,J,ie,he,$,ge,pe){var we=1-ge;pe.x=we*we*oe+2*we*ge*J+ge*ge*he,pe.y=we*we*q+2*we*ge*ie+ge*ge*$}function n(oe,q,J,ie,he,$,ge,pe,we,ke){var Pe=1-we;ke.x=Pe*Pe*Pe*oe+3*Pe*Pe*we*J+3*Pe*we*we*he+we*we*we*ge,ke.y=Pe*Pe*Pe*q+3*Pe*Pe*we*ie+3*Pe*we*we*$+we*we*we*pe}function i(oe,q){for(var J=/([MLQCZ])([^MLQCZ]*)/g,ie,he,$,ge,pe;ie=J.exec(oe);){var we=ie[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(ke){return parseFloat(ke)});switch(ie[1]){case"M":ge=he=we[0],pe=$=we[1];break;case"L":(we[0]!==ge||we[1]!==pe)&&q("L",ge,pe,ge=we[0],pe=we[1]);break;case"Q":{q("Q",ge,pe,ge=we[2],pe=we[3],we[0],we[1]);break}case"C":{q("C",ge,pe,ge=we[4],pe=we[5],we[0],we[1],we[2],we[3]);break}case"Z":(ge!==he||pe!==$)&&q("L",ge,pe,he,$);break}}}function s(oe,q,J){J===void 0&&(J=16);var ie={x:0,y:0};i(oe,function(he,$,ge,pe,we,ke,Pe,je,Ke){switch(he){case"L":q($,ge,pe,we);break;case"Q":{for(var Ie=$,Ge=ge,ce=1;ce<J;ce++)t($,ge,ke,Pe,pe,we,ce/(J-1),ie),q(Ie,Ge,ie.x,ie.y),Ie=ie.x,Ge=ie.y;break}case"C":{for(var _t=$,_e=ge,Ne=1;Ne<J;Ne++)n($,ge,ke,Pe,je,Ke,pe,we,Ne/(J-1),ie),q(_t,_e,ie.x,ie.y),_t=ie.x,_e=ie.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(oe,q){var J=oe.getContext?oe.getContext("webgl",c):oe,ie=l.get(J);if(!ie){let _t=function(Z){var W=$[Z];if(!W&&(W=$[Z]=J.getExtension(Z),!W))throw new Error(Z+" not supported");return W},_e=function(Z,W){var re=J.createShader(W);return J.shaderSource(re,Z),J.compileShader(re),re},Ne=function(Z,W,re,be){if(!ge[Z]){var ve={},Je={},$e=J.createProgram();J.attachShader($e,_e(W,J.VERTEX_SHADER)),J.attachShader($e,_e(re,J.FRAGMENT_SHADER)),J.linkProgram($e),ge[Z]={program:$e,transaction:function(pt){J.useProgram($e),pt({setUniform:function(Le,at){for(var vt=[],qe=arguments.length-2;qe-- >0;)vt[qe]=arguments[qe+2];var et=Je[at]||(Je[at]=J.getUniformLocation($e,at));J["uniform"+Le].apply(J,[et].concat(vt))},setAttribute:function(Le,at,vt,qe,et){var Me=ve[Le];Me||(Me=ve[Le]={buf:J.createBuffer(),loc:J.getAttribLocation($e,Le),data:null}),J.bindBuffer(J.ARRAY_BUFFER,Me.buf),J.vertexAttribPointer(Me.loc,at,J.FLOAT,!1,0,0),J.enableVertexAttribArray(Me.loc),he?J.vertexAttribDivisor(Me.loc,qe):_t("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Me.loc,qe),et!==Me.data&&(J.bufferData(J.ARRAY_BUFFER,et,vt),Me.data=et)}})}}}ge[Z].transaction(be)},Ce=function(Z,W){we++;try{J.activeTexture(J.TEXTURE0+we);var re=pe[Z];re||(re=pe[Z]=J.createTexture(),J.bindTexture(J.TEXTURE_2D,re),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.NEAREST),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.NEAREST)),J.bindTexture(J.TEXTURE_2D,re),W(re,we)}finally{we--}},He=function(Z,W,re){var be=J.createFramebuffer();ke.push(be),J.bindFramebuffer(J.FRAMEBUFFER,be),J.activeTexture(J.TEXTURE0+W),J.bindTexture(J.TEXTURE_2D,Z),J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Z,0);try{re(be)}finally{J.deleteFramebuffer(be),J.bindFramebuffer(J.FRAMEBUFFER,ke[--ke.length-1]||null)}},Ee=function(){$={},ge={},pe={},we=-1,ke.length=0};var Pe=_t,je=_e,Ke=Ne,Ie=Ce,Ge=He,ce=Ee,he=typeof WebGL2RenderingContext<"u"&&J instanceof WebGL2RenderingContext,$={},ge={},pe={},we=-1,ke=[];J.canvas.addEventListener("webglcontextlost",function(Z){Ee(),Z.preventDefault()},!1),l.set(J,ie={gl:J,isWebGL2:he,getExtension:_t,withProgram:Ne,withTexture:Ce,withTextureFramebuffer:He,handleContextLoss:Ee})}q(ie)}function f(oe,q,J,ie,he,$,ge,pe){ge===void 0&&(ge=15),pe===void 0&&(pe=null),u(oe,function(we){var ke=we.gl,Pe=we.withProgram,je=we.withTexture;je("copy",function(Ke,Ie){ke.texImage2D(ke.TEXTURE_2D,0,ke.RGBA,he,$,0,ke.RGBA,ke.UNSIGNED_BYTE,q),Pe("copy",a,o,function(Ge){var ce=Ge.setUniform,_t=Ge.setAttribute;_t("aUV",2,ke.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ce("1i","image",Ie),ke.bindFramebuffer(ke.FRAMEBUFFER,pe||null),ke.disable(ke.BLEND),ke.colorMask(ge&8,ge&4,ge&2,ge&1),ke.viewport(J,ie,he,$),ke.scissor(J,ie,he,$),ke.drawArrays(ke.TRIANGLES,0,3)})})})}function d(oe,q,J){var ie=oe.width,he=oe.height;u(oe,function($){var ge=$.gl,pe=new Uint8Array(ie*he*4);ge.readPixels(0,0,ie,he,ge.RGBA,ge.UNSIGNED_BYTE,pe),oe.width=q,oe.height=J,f(ge,pe,0,0,ie,he)})}var p=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:f,resizeWebGLCanvasWithoutClearing:d});function g(oe,q,J,ie,he,$){$===void 0&&($=1);var ge=new Uint8Array(oe*q),pe=ie[2]-ie[0],we=ie[3]-ie[1],ke=[];s(J,function(_t,_e,Ne,Ce){ke.push({x1:_t,y1:_e,x2:Ne,y2:Ce,minX:Math.min(_t,Ne),minY:Math.min(_e,Ce),maxX:Math.max(_t,Ne),maxY:Math.max(_e,Ce)})}),ke.sort(function(_t,_e){return _t.maxX-_e.maxX});for(var Pe=0;Pe<oe;Pe++)for(var je=0;je<q;je++){var Ke=Ge(ie[0]+pe*(Pe+.5)/oe,ie[1]+we*(je+.5)/q),Ie=Math.pow(1-Math.abs(Ke)/he,$)/2;Ke<0&&(Ie=1-Ie),Ie=Math.max(0,Math.min(255,Math.round(Ie*255))),ge[je*oe+Pe]=Ie}return ge;function Ge(_t,_e){for(var Ne=1/0,Ce=1/0,He=ke.length;He--;){var Ee=ke[He];if(Ee.maxX+Ce<=_t)break;if(_t+Ce>Ee.minX&&_e-Ce<Ee.maxY&&_e+Ce>Ee.minY){var Z=b(_t,_e,Ee.x1,Ee.y1,Ee.x2,Ee.y2);Z<Ne&&(Ne=Z,Ce=Math.sqrt(Ne))}}return ce(_t,_e)&&(Ce=-Ce),Ce}function ce(_t,_e){for(var Ne=0,Ce=ke.length;Ce--;){var He=ke[Ce];if(He.maxX<=_t)break;var Ee=He.y1>_e!=He.y2>_e&&_t<(He.x2-He.x1)*(_e-He.y1)/(He.y2-He.y1)+He.x1;Ee&&(Ne+=He.y1<He.y2?1:-1)}return Ne!==0}}function _(oe,q,J,ie,he,$,ge,pe,we,ke){$===void 0&&($=1),pe===void 0&&(pe=0),we===void 0&&(we=0),ke===void 0&&(ke=0),w(oe,q,J,ie,he,$,ge,null,pe,we,ke)}function w(oe,q,J,ie,he,$,ge,pe,we,ke,Pe){$===void 0&&($=1),we===void 0&&(we=0),ke===void 0&&(ke=0),Pe===void 0&&(Pe=0);for(var je=g(oe,q,J,ie,he,$),Ke=new Uint8Array(je.length*4),Ie=0;Ie<je.length;Ie++)Ke[Ie*4+Pe]=je[Ie];f(ge,Ke,we,ke,oe,q,1<<3-Pe,pe)}function b(oe,q,J,ie,he,$){var ge=he-J,pe=$-ie,we=ge*ge+pe*pe,ke=we?Math.max(0,Math.min(1,((oe-J)*ge+(q-ie)*pe)/we)):0,Pe=oe-(J+ke*ge),je=q-(ie+ke*pe);return Pe*Pe+je*je}var C=Object.freeze({__proto__:null,generate:g,generateIntoCanvas:_,generateIntoFramebuffer:w}),M="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",A="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",k="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",O=new Float32Array([0,0,2,0,0,2]),R=null,I=!1,D={},E=new WeakMap;function B(oe){if(!I&&!te(oe))throw new Error("WebGL generation not supported")}function U(oe,q,J,ie,he,$,ge){if($===void 0&&($=1),ge===void 0&&(ge=null),!ge&&(ge=R,!ge)){var pe=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!pe)throw new Error("OffscreenCanvas or DOM canvas not supported");ge=R=pe.getContext("webgl",{depth:!1})}B(ge);var we=new Uint8Array(oe*q*4);u(ge,function(Ke){var Ie=Ke.gl,Ge=Ke.withTexture,ce=Ke.withTextureFramebuffer;Ge("readable",function(_t,_e){Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,oe,q,0,Ie.RGBA,Ie.UNSIGNED_BYTE,null),ce(_t,_e,function(Ne){X(oe,q,J,ie,he,$,Ie,Ne,0,0,0),Ie.readPixels(0,0,oe,q,Ie.RGBA,Ie.UNSIGNED_BYTE,we)})})});for(var ke=new Uint8Array(oe*q),Pe=0,je=0;Pe<we.length;Pe+=4)ke[je++]=we[Pe];return ke}function V(oe,q,J,ie,he,$,ge,pe,we,ke){$===void 0&&($=1),pe===void 0&&(pe=0),we===void 0&&(we=0),ke===void 0&&(ke=0),X(oe,q,J,ie,he,$,ge,null,pe,we,ke)}function X(oe,q,J,ie,he,$,ge,pe,we,ke,Pe){$===void 0&&($=1),we===void 0&&(we=0),ke===void 0&&(ke=0),Pe===void 0&&(Pe=0),B(ge);var je=[];s(J,function(Ke,Ie,Ge,ce){je.push(Ke,Ie,Ge,ce)}),je=new Float32Array(je),u(ge,function(Ke){var Ie=Ke.gl,Ge=Ke.isWebGL2,ce=Ke.getExtension,_t=Ke.withProgram,_e=Ke.withTexture,Ne=Ke.withTextureFramebuffer,Ce=Ke.handleContextLoss;if(_e("rawDistances",function(He,Ee){(oe!==He._lastWidth||q!==He._lastHeight)&&Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,He._lastWidth=oe,He._lastHeight=q,0,Ie.RGBA,Ie.UNSIGNED_BYTE,null),_t("main",M,A,function(Z){var W=Z.setAttribute,re=Z.setUniform,be=!Ge&&ce("ANGLE_instanced_arrays"),ve=!Ge&&ce("EXT_blend_minmax");W("aUV",2,Ie.STATIC_DRAW,0,O),W("aLineSegment",4,Ie.DYNAMIC_DRAW,1,je),re.apply(void 0,["4f","uGlyphBounds"].concat(ie)),re("1f","uMaxDistance",he),re("1f","uExponent",$),Ne(He,Ee,function(Je){Ie.enable(Ie.BLEND),Ie.colorMask(!0,!0,!0,!0),Ie.viewport(0,0,oe,q),Ie.scissor(0,0,oe,q),Ie.blendFunc(Ie.ONE,Ie.ONE),Ie.blendEquationSeparate(Ie.FUNC_ADD,Ge?Ie.MAX:ve.MAX_EXT),Ie.clear(Ie.COLOR_BUFFER_BIT),Ge?Ie.drawArraysInstanced(Ie.TRIANGLES,0,3,je.length/4):be.drawArraysInstancedANGLE(Ie.TRIANGLES,0,3,je.length/4)})}),_t("post",a,k,function(Z){Z.setAttribute("aUV",2,Ie.STATIC_DRAW,0,O),Z.setUniform("1i","tex",Ee),Ie.bindFramebuffer(Ie.FRAMEBUFFER,pe),Ie.disable(Ie.BLEND),Ie.colorMask(Pe===0,Pe===1,Pe===2,Pe===3),Ie.viewport(we,ke,oe,q),Ie.scissor(we,ke,oe,q),Ie.drawArrays(Ie.TRIANGLES,0,3)})}),Ie.isContextLost())throw Ce(),new Error("webgl context lost")})}function te(oe){var q=!oe||oe===R?D:oe.canvas||oe,J=E.get(q);if(J===void 0){I=!0;var ie=null;try{var he=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],$=U(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,oe);J=$&&he.length===$.length&&$.every(function(ge,pe){return ge===he[pe]}),J||(ie="bad trial run results",console.info(he,$))}catch(ge){J=!1,ie=ge.message}ie&&console.warn("WebGL SDF generation not supported:",ie),I=!1,E.set(q,J)}return J}var ee=Object.freeze({__proto__:null,generate:U,generateIntoCanvas:V,generateIntoFramebuffer:X,isSupported:te});function ue(oe,q,J,ie,he,$){he===void 0&&(he=Math.max(ie[2]-ie[0],ie[3]-ie[1])/2),$===void 0&&($=1);try{return U.apply(ee,arguments)}catch(ge){return console.info("WebGL SDF generation failed, falling back to JS",ge),g.apply(C,arguments)}}function ne(oe,q,J,ie,he,$,ge,pe,we,ke){he===void 0&&(he=Math.max(ie[2]-ie[0],ie[3]-ie[1])/2),$===void 0&&($=1),pe===void 0&&(pe=0),we===void 0&&(we=0),ke===void 0&&(ke=0);try{return V.apply(ee,arguments)}catch(Pe){return console.info("WebGL SDF generation failed, falling back to JS",Pe),_.apply(C,arguments)}}return e.forEachPathCommand=i,e.generate=ue,e.generateIntoCanvas=ne,e.javascript=C,e.pathToLineSegments=s,e.webgl=ee,e.webglUtils=p,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return r}function oAe(){var r=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},i={};n.L=1,i[1]="L",Object.keys(t).forEach(function(Ce,He){n[Ce]=1<<He+1,i[n[Ce]]=Ce}),Object.freeze(n);var s=n.LRI|n.RLI|n.FSI,a=n.L|n.R|n.AL,o=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,l=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,c=n.S|n.WS|n.B|s|n.PDI|l,u=null;function f(){if(!u){u=new Map;var Ce=function(Ee){if(t.hasOwnProperty(Ee)){var Z=0;t[Ee].split(",").forEach(function(W){var re=W.split("+"),be=re[0],ve=re[1];be=parseInt(be,36),ve=ve?parseInt(ve,36):0,u.set(Z+=be,n[Ee]);for(var Je=0;Je<ve;Je++)u.set(++Z,n[Ee])})}};for(var He in t)Ce(He)}}function d(Ce){return f(),u.get(Ce.codePointAt(0))||n.L}function p(Ce){return i[d(Ce)]}var g={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function _(Ce,He){var Ee=36,Z=0,W=new Map,re=He&&new Map,be;return Ce.split(",").forEach(function ve(Je){if(Je.indexOf("+")!==-1)for(var $e=+Je;$e--;)ve(be);else{be=Je;var it=Je.split(">"),pt=it[0],Ft=it[1];pt=String.fromCodePoint(Z+=parseInt(pt,Ee)),Ft=String.fromCodePoint(Z+=parseInt(Ft,Ee)),W.set(pt,Ft),He&&re.set(Ft,pt)}}),{map:W,reverseMap:re}}var w,b,C;function M(){if(!w){var Ce=_(g.pairs,!0),He=Ce.map,Ee=Ce.reverseMap;w=He,b=Ee,C=_(g.canonical,!1).map}}function A(Ce){return M(),w.get(Ce)||null}function k(Ce){return M(),b.get(Ce)||null}function O(Ce){return M(),C.get(Ce)||null}var R=n.L,I=n.R,D=n.EN,E=n.ES,B=n.ET,U=n.AN,V=n.CS,X=n.B,te=n.S,ee=n.ON,ue=n.BN,ne=n.NSM,oe=n.AL,q=n.LRO,J=n.RLO,ie=n.LRE,he=n.RLE,$=n.PDF,ge=n.LRI,pe=n.RLI,we=n.FSI,ke=n.PDI;function Pe(Ce,He){for(var Ee=125,Z=new Uint32Array(Ce.length),W=0;W<Ce.length;W++)Z[W]=d(Ce[W]);var re=new Map;function be(hi,oi){var pi=Z[hi];Z[hi]=oi,re.set(pi,re.get(pi)-1),pi&o&&re.set(o,re.get(o)-1),re.set(oi,(re.get(oi)||0)+1),oi&o&&re.set(o,(re.get(o)||0)+1)}for(var ve=new Uint8Array(Ce.length),Je=new Map,$e=[],it=null,pt=0;pt<Ce.length;pt++)it||$e.push(it={start:pt,end:Ce.length-1,level:He==="rtl"?1:He==="ltr"?0:bi(pt,!1)}),Z[pt]&X&&(it.end=pt,it=null);for(var Ft=he|ie|J|q|s|ke|$|X,Le=function(hi){return hi+(hi&1?1:2)},at=function(hi){return hi+(hi&1?2:1)},vt=0;vt<$e.length;vt++){it=$e[vt];var qe=[{_level:it.level,_override:0,_isolate:0}],et=void 0,Me=0,tt=0,Tt=0;re.clear();for(var Ae=it.start;Ae<=it.end;Ae++){var Oe=Z[Ae];if(et=qe[qe.length-1],re.set(Oe,(re.get(Oe)||0)+1),Oe&o&&re.set(o,(re.get(o)||0)+1),Oe&Ft)if(Oe&(he|ie)){ve[Ae]=et._level;var Ye=(Oe===he?at:Le)(et._level);Ye<=Ee&&!Me&&!tt?qe.push({_level:Ye,_override:0,_isolate:0}):Me||tt++}else if(Oe&(J|q)){ve[Ae]=et._level;var yt=(Oe===J?at:Le)(et._level);yt<=Ee&&!Me&&!tt?qe.push({_level:yt,_override:Oe&J?I:R,_isolate:0}):Me||tt++}else if(Oe&s){Oe&we&&(Oe=bi(Ae+1,!0)===1?pe:ge),ve[Ae]=et._level,et._override&&be(Ae,et._override);var Lt=(Oe===pe?at:Le)(et._level);Lt<=Ee&&Me===0&&tt===0?(Tt++,qe.push({_level:Lt,_override:0,_isolate:1,_isolInitIndex:Ae})):Me++}else if(Oe&ke){if(Me>0)Me--;else if(Tt>0){for(tt=0;!qe[qe.length-1]._isolate;)qe.pop();var xt=qe[qe.length-1]._isolInitIndex;xt!=null&&(Je.set(xt,Ae),Je.set(Ae,xt)),qe.pop(),Tt--}et=qe[qe.length-1],ve[Ae]=et._level,et._override&&be(Ae,et._override)}else Oe&$?(Me===0&&(tt>0?tt--:!et._isolate&&qe.length>1&&(qe.pop(),et=qe[qe.length-1])),ve[Ae]=et._level):Oe&X&&(ve[Ae]=it.level);else ve[Ae]=et._level,et._override&&Oe!==ue&&be(Ae,et._override)}for(var Yt=[],on=null,Zt=it.start;Zt<=it.end;Zt++){var qt=Z[Zt];if(!(qt&l)){var Xe=ve[Zt],ot=qt&s,Dt=qt===ke;on&&Xe===on._level?(on._end=Zt,on._endsWithIsolInit=ot):Yt.push(on={_start:Zt,_end:Zt,_level:Xe,_startsWithPDI:Dt,_endsWithIsolInit:ot})}}for(var nn=[],Fn=0;Fn<Yt.length;Fn++){var Or=Yt[Fn];if(!Or._startsWithPDI||Or._startsWithPDI&&!Je.has(Or._start)){for(var Yn=[on=Or],sr=void 0;on&&on._endsWithIsolInit&&(sr=Je.get(on._end))!=null;)for(var xn=Fn+1;xn<Yt.length;xn++)if(Yt[xn]._start===sr){Yn.push(on=Yt[xn]);break}for(var ni=[],Ii=0;Ii<Yn.length;Ii++)for(var se=Yn[Ii],fe=se._start;fe<=se._end;fe++)ni.push(fe);for(var Re=ve[ni[0]],nt=it.level,mt=ni[0]-1;mt>=0;mt--)if(!(Z[mt]&l)){nt=ve[mt];break}var gt=ni[ni.length-1],Ot=ve[gt],kt=it.level;if(!(Z[gt]&s)){for(var ae=gt+1;ae<=it.end;ae++)if(!(Z[ae]&l)){kt=ve[ae];break}}nn.push({_seqIndices:ni,_sosType:Math.max(nt,Re)%2?I:R,_eosType:Math.max(kt,Ot)%2?I:R})}}for(var Se=0;Se<nn.length;Se++){var De=nn[Se],me=De._seqIndices,Fe=De._sosType,st=De._eosType,dt=ve[me[0]]&1?I:R;if(re.get(ne))for(var Ct=0;Ct<me.length;Ct++){var It=me[Ct];if(Z[It]&ne){for(var Gt=Fe,Ut=Ct-1;Ut>=0;Ut--)if(!(Z[me[Ut]]&l)){Gt=Z[me[Ut]];break}be(It,Gt&(s|ke)?ee:Gt)}}if(re.get(D))for(var Et=0;Et<me.length;Et++){var Jt=me[Et];if(Z[Jt]&D)for(var Wt=Et-1;Wt>=-1;Wt--){var Mn=Wt===-1?Fe:Z[me[Wt]];if(Mn&a){Mn===oe&&be(Jt,U);break}}}if(re.get(oe))for(var sn=0;sn<me.length;sn++){var fn=me[sn];Z[fn]&oe&&be(fn,I)}if(re.get(E)||re.get(V))for(var Qt=1;Qt<me.length-1;Qt++){var Bn=me[Qt];if(Z[Bn]&(E|V)){for(var pn=0,In=0,Ar=Qt-1;Ar>=0&&(pn=Z[me[Ar]],!!(pn&l));Ar--);for(var An=Qt+1;An<me.length&&(In=Z[me[An]],!!(In&l));An++);pn===In&&(Z[Bn]===E?pn===D:pn&(D|U))&&be(Bn,pn)}}if(re.get(D))for(var gn=0;gn<me.length;gn++){var Sn=me[gn];if(Z[Sn]&D){for(var gr=gn-1;gr>=0&&Z[me[gr]]&(B|l);gr--)be(me[gr],D);for(gn++;gn<me.length&&Z[me[gn]]&(B|l|D);gn++)Z[me[gn]]!==D&&be(me[gn],D)}}if(re.get(B)||re.get(E)||re.get(V))for(var qn=0;qn<me.length;qn++){var Tn=me[qn];if(Z[Tn]&(B|E|V)){be(Tn,ee);for(var Dr=qn-1;Dr>=0&&Z[me[Dr]]&l;Dr--)be(me[Dr],ee);for(var Un=qn+1;Un<me.length&&Z[me[Un]]&l;Un++)be(me[Un],ee)}}if(re.get(D))for(var ai=0,_l=Fe;ai<me.length;ai++){var Xl=me[ai],eu=Z[Xl];eu&D?_l===R&&be(Xl,R):eu&a&&(_l=eu)}if(re.get(o)){var wo=I|D|U,Ql=wo|R,xa=[];{for(var Cs=[],Kr=0;Kr<me.length;Kr++)if(Z[me[Kr]]&o){var Pn=Ce[me[Kr]],ra=void 0;if(A(Pn)!==null)if(Cs.length<63)Cs.push({char:Pn,seqIndex:Kr});else break;else if((ra=k(Pn))!==null)for(var Vs=Cs.length-1;Vs>=0;Vs--){var Ms=Cs[Vs].char;if(Ms===ra||Ms===k(O(Pn))||A(O(Ms))===Pn){xa.push([Cs[Vs].seqIndex,Kr]),Cs.length=Vs;break}}}xa.sort(function(hi,oi){return hi[0]-oi[0]})}for(var Ca=0;Ca<xa.length;Ca++){for(var fd=xa[Ca],qr=fd[0],ji=fd[1],dd=!1,us=0,Qa=qr+1;Qa<ji;Qa++){var Ka=me[Qa];if(Z[Ka]&Ql){dd=!0;var Gs=Z[Ka]&wo?I:R;if(Gs===dt){us=Gs;break}}}if(dd&&!us){us=Fe;for(var ia=qr-1;ia>=0;ia--){var Ma=me[ia];if(Z[Ma]&Ql){var Li=Z[Ma]&wo?I:R;Li!==dt?us=Li:us=dt;break}}}if(us){if(Z[me[qr]]=Z[me[ji]]=us,us!==dt){for(var wi=qr+1;wi<me.length;wi++)if(!(Z[me[wi]]&l)){d(Ce[me[wi]])&ne&&(Z[me[wi]]=us);break}}if(us!==dt){for(var Sr=ji+1;Sr<me.length;Sr++)if(!(Z[me[Sr]]&l)){d(Ce[me[Sr]])&ne&&(Z[me[Sr]]=us);break}}}}for(var Aa=0;Aa<me.length;Aa++)if(Z[me[Aa]]&o){for(var Kl=Aa,Go=Aa,qi=Fe,Ho=Aa-1;Ho>=0;Ho--)if(Z[me[Ho]]&l)Kl=Ho;else{qi=Z[me[Ho]]&wo?I:R;break}for(var Zi=st,_o=Aa+1;_o<me.length;_o++)if(Z[me[_o]]&(o|l))Go=_o;else{Zi=Z[me[_o]]&wo?I:R;break}for(var jr=Kl;jr<=Go;jr++)Z[me[jr]]=qi===Zi?qi:dt;Aa=Go}}}for(var _i=it.start;_i<=it.end;_i++){var Wo=ve[_i],zi=Z[_i];if(Wo&1?zi&(R|D|U)&&ve[_i]++:zi&I?ve[_i]++:zi&(U|D)&&(ve[_i]+=2),zi&l&&(ve[_i]=_i===0?it.level:ve[_i-1]),_i===it.end||d(Ce[_i])&(te|X))for(var bo=_i;bo>=0&&d(Ce[bo])&c;bo--)ve[bo]=it.level}}return{levels:ve,paragraphs:$e};function bi(hi,oi){for(var pi=hi;pi<Ce.length;pi++){var Zr=Z[pi];if(Zr&(I|oe))return 1;if(Zr&(X|R)||oi&&Zr===ke)return 0;if(Zr&s){var Ni=Ta(pi);pi=Ni===-1?Ce.length:Ni}}return 0}function Ta(hi){for(var oi=1,pi=hi+1;pi<Ce.length;pi++){var Zr=Z[pi];if(Zr&X)break;if(Zr&ke){if(--oi===0)return pi}else Zr&s&&oi++}return-1}}var je="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Ke;function Ie(){if(!Ke){var Ce=_(je,!0),He=Ce.map,Ee=Ce.reverseMap;Ee.forEach(function(Z,W){He.set(W,Z)}),Ke=He}}function Ge(Ce){return Ie(),Ke.get(Ce)||null}function ce(Ce,He,Ee,Z){var W=Ce.length;Ee=Math.max(0,Ee==null?0:+Ee),Z=Math.min(W-1,Z==null?W-1:+Z);for(var re=new Map,be=Ee;be<=Z;be++)if(He[be]&1){var ve=Ge(Ce[be]);ve!==null&&re.set(be,ve)}return re}function _t(Ce,He,Ee,Z){var W=Ce.length;Ee=Math.max(0,Ee==null?0:+Ee),Z=Math.min(W-1,Z==null?W-1:+Z);var re=[];return He.paragraphs.forEach(function(be){var ve=Math.max(Ee,be.start),Je=Math.min(Z,be.end);if(ve<Je){for(var $e=He.levels.slice(ve,Je+1),it=Je;it>=ve&&d(Ce[it])&c;it--)$e[it]=be.level;for(var pt=be.level,Ft=1/0,Le=0;Le<$e.length;Le++){var at=$e[Le];at>pt&&(pt=at),at<Ft&&(Ft=at|1)}for(var vt=pt;vt>=Ft;vt--)for(var qe=0;qe<$e.length;qe++)if($e[qe]>=vt){for(var et=qe;qe+1<$e.length&&$e[qe+1]>=vt;)qe++;qe>et&&re.push([et+ve,qe+ve])}}}),re}function _e(Ce,He,Ee,Z){var W=Ne(Ce,He,Ee,Z),re=[].concat(Ce);return W.forEach(function(be,ve){re[ve]=(He.levels[be]&1?Ge(Ce[be]):null)||Ce[be]}),re.join("")}function Ne(Ce,He,Ee,Z){for(var W=_t(Ce,He,Ee,Z),re=[],be=0;be<Ce.length;be++)re[be]=be;return W.forEach(function(ve){for(var Je=ve[0],$e=ve[1],it=re.slice(Je,$e+1),pt=it.length;pt--;)re[$e-pt]=it[pt]}),re}return e.closingToOpeningBracket=k,e.getBidiCharType=d,e.getBidiCharTypeName=p,e.getCanonicalBracket=O,e.getEmbeddingLevels=Pe,e.getMirroredCharacter=Ge,e.getMirroredCharactersMap=ce,e.getReorderSegments=_t,e.getReorderedIndices=Ne,e.getReorderedString=_e,e.openingToClosingBracket=A,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return r}const cX=/\bvoid\s+main\s*\(\s*\)\s*{/g;function O3(r){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(n,i){let s=tr[i];return s?O3(s):n}return r.replace(e,t)}const ha=[];for(let r=0;r<256;r++)ha[r]=(r<16?"0":"")+r.toString(16);function lAe(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(ha[r&255]+ha[r>>8&255]+ha[r>>16&255]+ha[r>>24&255]+"-"+ha[e&255]+ha[e>>8&255]+"-"+ha[e>>16&15|64]+ha[e>>24&255]+"-"+ha[t&63|128]+ha[t>>8&255]+"-"+ha[t>>16&255]+ha[t>>24&255]+ha[n&255]+ha[n>>8&255]+ha[n>>16&255]+ha[n>>24&255]).toUpperCase()}const Kp=Object.assign||function(){let r=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let n=arguments[e];if(n)for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},cAe=Date.now(),yj=new WeakMap,wj=new Map;let uAe=1e10;function F3(r,e){const t=pAe(e);let n=yj.get(r);if(n||yj.set(r,n=Object.create(null)),n[t])return new n[t];const i=`_onBeforeCompile${t}`,s=function(c,u){r.onBeforeCompile.call(this,c,u);const f=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let d=wj[f];if(!d){const p=fAe(this,c,e,t);d=wj[f]=p}c.vertexShader=d.vertexShader,c.fragmentShader=d.fragmentShader,Kp(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-cAe}}),this[i]&&this[i](c)},a=function(){return o(e.chained?r:r.clone())},o=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:r}),Object.defineProperty(u,"id",{value:uAe++}),u.uuid=lAe(),u.uniforms=Kp({},c.uniforms,e.uniforms),u.defines=Kp({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",u.extensions=Kp({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:()=>r.type,set:c=>{r.type=c}},isDerivedFrom:{writable:!0,configurable:!0,value:function(c){const u=this.baseMaterial;return c===u||u.isDerivedMaterial&&u.isDerivedFrom(c)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return r.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(c){this[i]=c}},copy:{writable:!0,configurable:!0,value:function(c){return r.copy.call(this,c),!r.isShaderMaterial&&!r.isDerivedMaterial&&(Kp(this.extensions,c.extensions),Kp(this.defines,c.defines),Kp(this.uniforms,Zk.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new r.constructor;return o(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=F3(r.isDerivedMaterial?r.getDepthMaterial():new mT({depthPacking:Jk}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=F3(r.isDerivedMaterial?r.getDistanceMaterial():new gT,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),r.dispose.call(this)}}};return n[t]=a,new a}function fAe(r,{vertexShader:e,fragmentShader:t},n,i){let{vertexDefs:s,vertexMainIntro:a,vertexMainOutro:o,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:f,fragmentColorTransform:d,customRewriter:p,timeUniform:g}=n;if(s=s||"",a=a||"",o=o||"",c=c||"",u=u||"",f=f||"",(l||p)&&(e=O3(e)),(d||p)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=O3(t)),p){let _=p({vertexShader:e,fragmentShader:t});e=_.vertexShader,t=_.fragmentShader}if(d){let _=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,w=>(_.push(w),"")),f=`${d}
${_.join(`
`)}
${f}`}if(g){const _=`
uniform float ${g};
`;s=_+s,c=_+c}return l&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,a=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${a}
`,e=e.replace(/\b(position|normal|uv)\b/g,(_,w,b,C)=>/\battribute\s+vec[23]\s+$/.test(C.substr(0,b))?w:`troika_${w}_${i}`),r.map&&r.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=_j(e,i,s,a,o),t=_j(t,i,c,u,f),{vertexShader:e,fragmentShader:t}}function _j(r,e,t,n,i){return(n||i||t)&&(r=r.replace(cX,`
${t}
void troikaOrigMain${e}() {`),r+=`
void main() {
  ${n}
  troikaOrigMain${e}();
  ${i}
}`),r}function dAe(r,e){return r==="uniforms"?void 0:typeof e=="function"?e.toString():e}let hAe=0;const bj=new Map;function pAe(r){const e=JSON.stringify(r,dAe);let t=bj.get(e);return t==null&&bj.set(e,t=++hAe),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function mAe(){return typeof window>"u"&&(self.window=self),function(r){var e={parse:function(i){var s=e._bin,a=new Uint8Array(i);if(s.readASCII(a,0,4)=="ttcf"){var o=4;s.readUshort(a,o),o+=2,s.readUshort(a,o),o+=2;var l=s.readUint(a,o);o+=4;for(var c=[],u=0;u<l;u++){var f=s.readUint(a,o);o+=4,c.push(e._readFont(a,f))}return c}return[e._readFont(a,0)]},_readFont:function(i,s){var a=e._bin,o=s;a.readFixed(i,s),s+=4;var l=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],u={_data:i,_offset:o},f={},d=0;d<l;d++){var p=a.readASCII(i,s,4);s+=4,a.readUint(i,s),s+=4;var g=a.readUint(i,s);s+=4;var _=a.readUint(i,s);s+=4,f[p]={offset:g,length:_}}for(d=0;d<c.length;d++){var w=c[d];f[w]&&(u[w.trim()]=e[w.trim()].parse(i,f[w].offset,f[w].length,u))}return u},_tabOffset:function(i,s,a){for(var o=e._bin,l=o.readUshort(i,a+4),c=a+12,u=0;u<l;u++){var f=o.readASCII(i,c,4);c+=4,o.readUint(i,c),c+=4;var d=o.readUint(i,c);if(c+=4,o.readUint(i,c),c+=4,f==s)return d}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,a){for(var o=[],l=0;l<a;l++)o.push(e._bin.readUshort(i,s+2*l));return o},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,a){for(var o="",l=0;l<a;l++)o+=String.fromCharCode(i[s+l]);return o},readUnicode:function(i,s,a){for(var o="",l=0;l<a;l++){var c=i[s++]<<8|i[s++];o+=String.fromCharCode(c)}return o},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,a){var o=e._bin._tdec;return o&&s==0&&a==i.length?o.decode(i):e._bin.readASCII(i,s,a)},readBytes:function(i,s,a){for(var o=[],l=0;l<a;l++)o.push(i[s+l]);return o},readASCIIArray:function(i,s,a){for(var o=[],l=0;l<a;l++)o.push(String.fromCharCode(i[s+l]));return o},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,a,o,l){var c=e._bin,u={},f=s;c.readFixed(i,s),s+=4;var d=c.readUshort(i,s);s+=2;var p=c.readUshort(i,s);s+=2;var g=c.readUshort(i,s);return s+=2,u.scriptList=e._lctf.readScriptList(i,f+d),u.featureList=e._lctf.readFeatureList(i,f+p),u.lookupList=e._lctf.readLookupList(i,f+g,l),u},e._lctf.readLookupList=function(i,s,a){var o=e._bin,l=s,c=[],u=o.readUshort(i,s);s+=2;for(var f=0;f<u;f++){var d=o.readUshort(i,s);s+=2;var p=e._lctf.readLookupTable(i,l+d,a);c.push(p)}return c},e._lctf.readLookupTable=function(i,s,a){var o=e._bin,l=s,c={tabs:[]};c.ltype=o.readUshort(i,s),s+=2,c.flag=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2;for(var f=c.ltype,d=0;d<u;d++){var p=o.readUshort(i,s);s+=2;var g=a(i,f,l+p,c);c.tabs.push(g)}return c},e._lctf.numOfOnes=function(i){for(var s=0,a=0;a<32;a++)(i>>>a&1)!=0&&s++;return s},e._lctf.readClassDef=function(i,s){var a=e._bin,o=[],l=a.readUshort(i,s);if(s+=2,l==1){var c=a.readUshort(i,s);s+=2;var u=a.readUshort(i,s);s+=2;for(var f=0;f<u;f++)o.push(c+f),o.push(c+f),o.push(a.readUshort(i,s)),s+=2}if(l==2){var d=a.readUshort(i,s);for(s+=2,f=0;f<d;f++)o.push(a.readUshort(i,s)),s+=2,o.push(a.readUshort(i,s)),s+=2,o.push(a.readUshort(i,s)),s+=2}return o},e._lctf.getInterval=function(i,s){for(var a=0;a<i.length;a+=3){var o=i[a],l=i[a+1];if(i[a+2],o<=s&&s<=l)return a}return-1},e._lctf.readCoverage=function(i,s){var a=e._bin,o={};o.fmt=a.readUshort(i,s),s+=2;var l=a.readUshort(i,s);return s+=2,o.fmt==1&&(o.tab=a.readUshorts(i,s,l)),o.fmt==2&&(o.tab=a.readUshorts(i,s,3*l)),o},e._lctf.coverageIndex=function(i,s){var a=i.tab;if(i.fmt==1)return a.indexOf(s);if(i.fmt==2){var o=e._lctf.getInterval(a,s);if(o!=-1)return a[o+2]+(s-a[o])}return-1},e._lctf.readFeatureList=function(i,s){var a=e._bin,o=s,l=[],c=a.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=a.readASCII(i,s,4);s+=4;var d=a.readUshort(i,s);s+=2;var p=e._lctf.readFeatureTable(i,o+d);p.tag=f.trim(),l.push(p)}return l},e._lctf.readFeatureTable=function(i,s){var a=e._bin,o=s,l={},c=a.readUshort(i,s);s+=2,c>0&&(l.featureParams=o+c);var u=a.readUshort(i,s);s+=2,l.tab=[];for(var f=0;f<u;f++)l.tab.push(a.readUshort(i,s+2*f));return l},e._lctf.readScriptList=function(i,s){var a=e._bin,o=s,l={},c=a.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=a.readASCII(i,s,4);s+=4;var d=a.readUshort(i,s);s+=2,l[f.trim()]=e._lctf.readScriptTable(i,o+d)}return l},e._lctf.readScriptTable=function(i,s){var a=e._bin,o=s,l={},c=a.readUshort(i,s);s+=2,c>0&&(l.default=e._lctf.readLangSysTable(i,o+c));var u=a.readUshort(i,s);s+=2;for(var f=0;f<u;f++){var d=a.readASCII(i,s,4);s+=4;var p=a.readUshort(i,s);s+=2,l[d.trim()]=e._lctf.readLangSysTable(i,o+p)}return l},e._lctf.readLangSysTable=function(i,s){var a=e._bin,o={};a.readUshort(i,s),s+=2,o.reqFeature=a.readUshort(i,s),s+=2;var l=a.readUshort(i,s);return s+=2,o.features=a.readUshorts(i,s,l),o},e.CFF={},e.CFF.parse=function(i,s,a){var o=e._bin;(i=new Uint8Array(i.buffer,s,a))[s=0],i[++s],i[++s],i[++s],s++;var l=[];s=e.CFF.readIndex(i,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(o.readASCII(i,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var f=[];s=e.CFF.readIndex(i,s,f);var d=[];for(u=0;u<f.length-1;u++)d.push(e.CFF.readDict(i,s+f[u],s+f[u+1]));s+=f[f.length-1];var p=d[0],g=[];s=e.CFF.readIndex(i,s,g);var _=[];for(u=0;u<g.length-1;u++)_.push(o.readASCII(i,s+g[u],g[u+1]-g[u]));if(s+=g[g.length-1],e.CFF.readSubrs(i,s,p),p.CharStrings){s=p.CharStrings,g=[],s=e.CFF.readIndex(i,s,g);var w=[];for(u=0;u<g.length-1;u++)w.push(o.readBytes(i,s+g[u],g[u+1]-g[u]));p.CharStrings=w}if(p.ROS){s=p.FDArray;var b=[];for(s=e.CFF.readIndex(i,s,b),p.FDArray=[],u=0;u<b.length-1;u++){var C=e.CFF.readDict(i,s+b[u],s+b[u+1]);e.CFF._readFDict(i,C,_),p.FDArray.push(C)}s+=b[b.length-1],s=p.FDSelect,p.FDSelect=[];var M=i[s];if(s++,M!=3)throw M;var A=o.readUshort(i,s);for(s+=2,u=0;u<A+1;u++)p.FDSelect.push(o.readUshort(i,s),i[s+2]),s+=3}return p.Encoding&&(p.Encoding=e.CFF.readEncoding(i,p.Encoding,p.CharStrings.length)),p.charset&&(p.charset=e.CFF.readCharset(i,p.charset,p.CharStrings.length)),e.CFF._readFDict(i,p,_),p},e.CFF._readFDict=function(i,s,a){var o;for(var l in s.Private&&(o=s.Private[1],s.Private=e.CFF.readDict(i,o,o+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,o+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=a[s[l]-426+35])},e.CFF.readSubrs=function(i,s,a){var o=e._bin,l=[];s=e.CFF.readIndex(i,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,a.Bias=c,a.Subrs=[];for(var f=0;f<l.length-1;f++)a.Subrs.push(o.readBytes(i,s+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var a=0;a<i.charset.length;a++)if(i.charset[a]==s)return a;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,a){e._bin;var o=[".notdef"],l=i[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=i[s];s++;for(var u=0;u<c;u++)o.push(i[s+u]);return o},e.CFF.readCharset=function(i,s,a){var o=e._bin,l=[".notdef"],c=i[s];if(s++,c==0)for(var u=0;u<a;u++){var f=o.readUshort(i,s);s+=2,l.push(f)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<a;){f=o.readUshort(i,s),s+=2;var d=0;for(c==1?(d=i[s],s++):(d=o.readUshort(i,s),s+=2),u=0;u<=d;u++)l.push(f),f++}}return l},e.CFF.readIndex=function(i,s,a){var o=e._bin,l=o.readUshort(i,s)+1,c=i[s+=2];if(s++,c==1)for(var u=0;u<l;u++)a.push(i[s+u]);else if(c==2)for(u=0;u<l;u++)a.push(o.readUshort(i,s+2*u));else if(c==3)for(u=0;u<l;u++)a.push(16777215&o.readUint(i,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(i,s,a){var o=e._bin,l=i[s],c=i[s+1];i[s+2],i[s+3],i[s+4];var u=1,f=null,d=null;l<=20&&(f=l,u=1),l==12&&(f=100*l+c,u=2),21<=l&&l<=27&&(f=l,u=1),l==28&&(d=o.readShort(i,s+1),u=3),29<=l&&l<=31&&(f=l,u=1),32<=l&&l<=246&&(d=l-139,u=1),247<=l&&l<=250&&(d=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(d=256*-(l-251)-c-108,u=2),l==255&&(d=o.readInt(i,s+1)/65535,u=5),a.val=d??"o"+f,a.size=u},e.CFF.readCharString=function(i,s,a){for(var o=s+a,l=e._bin,c=[];s<o;){var u=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var d=1,p=null,g=null;u<=20&&(p=u,d=1),u==12&&(p=100*u+f,d=2),u!=19&&u!=20||(p=u,d=2),21<=u&&u<=27&&(p=u,d=1),u==28&&(g=l.readShort(i,s+1),d=3),29<=u&&u<=31&&(p=u,d=1),32<=u&&u<=246&&(g=u-139,d=1),247<=u&&u<=250&&(g=256*(u-247)+f+108,d=2),251<=u&&u<=254&&(g=256*-(u-251)-f-108,d=2),u==255&&(g=l.readInt(i,s+1)/65535,d=5),c.push(g??"o"+p),s+=d}return c},e.CFF.readDict=function(i,s,a){for(var o=e._bin,l={},c=[];s<a;){var u=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var d=1,p=null,g=null;if(u==28&&(g=o.readShort(i,s+1),d=3),u==29&&(g=o.readInt(i,s+1),d=5),32<=u&&u<=246&&(g=u-139,d=1),247<=u&&u<=250&&(g=256*(u-247)+f+108,d=2),251<=u&&u<=254&&(g=256*-(u-251)-f-108,d=2),u==255)throw g=o.readInt(i,s+1)/65535,d=5,"unknown number";if(u==30){var _=[];for(d=1;;){var w=i[s+d];d++;var b=w>>4,C=15&w;if(b!=15&&_.push(b),C!=15&&_.push(C),C==15)break}for(var M="",A=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],k=0;k<_.length;k++)M+=A[_[k]];g=parseFloat(M)}u<=21&&(p=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],d=1,u==12&&(p=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],d=2)),p!=null?(l[p]=c.length==1?c[0]:c,c=[]):c.push(g),s+=d}return l},e.cmap={},e.cmap.parse=function(i,s,a){i=new Uint8Array(i.buffer,s,a),s=0;var o=e._bin,l={};o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2;var u=[];l.tables=[];for(var f=0;f<c;f++){var d=o.readUshort(i,s);s+=2;var p=o.readUshort(i,s);s+=2;var g=o.readUint(i,s);s+=4;var _="p"+d+"e"+p,w=u.indexOf(g);if(w==-1){var b;w=l.tables.length,u.push(g);var C=o.readUshort(i,g);C==0?b=e.cmap.parse0(i,g):C==4?b=e.cmap.parse4(i,g):C==6?b=e.cmap.parse6(i,g):C==12?b=e.cmap.parse12(i,g):console.debug("unknown format: "+C,d,p,g),l.tables.push(b)}if(l[_]!=null)throw"multiple tables for one platform+encoding";l[_]=w}return l},e.cmap.parse0=function(i,s){var a=e._bin,o={};o.format=a.readUshort(i,s),s+=2;var l=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,o.map=[];for(var c=0;c<l-6;c++)o.map.push(i[s+c]);return o},e.cmap.parse4=function(i,s){var a=e._bin,o=s,l={};l.format=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;var f=u/2;l.searchRange=a.readUshort(i,s),s+=2,l.entrySelector=a.readUshort(i,s),s+=2,l.rangeShift=a.readUshort(i,s),s+=2,l.endCount=a.readUshorts(i,s,f),s+=2*f,s+=2,l.startCount=a.readUshorts(i,s,f),s+=2*f,l.idDelta=[];for(var d=0;d<f;d++)l.idDelta.push(a.readShort(i,s)),s+=2;for(l.idRangeOffset=a.readUshorts(i,s,f),s+=2*f,l.glyphIdArray=[];s<o+c;)l.glyphIdArray.push(a.readUshort(i,s)),s+=2;return l},e.cmap.parse6=function(i,s){var a=e._bin,o={};o.format=a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,o.firstCode=a.readUshort(i,s),s+=2;var l=a.readUshort(i,s);s+=2,o.glyphIdArray=[];for(var c=0;c<l;c++)o.glyphIdArray.push(a.readUshort(i,s)),s+=2;return o},e.cmap.parse12=function(i,s){var a=e._bin,o={};o.format=a.readUshort(i,s),s+=2,s+=2,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4;var l=a.readUint(i,s);s+=4,o.groups=[];for(var c=0;c<l;c++){var u=s+12*c,f=a.readUint(i,u+0),d=a.readUint(i,u+4),p=a.readUint(i,u+8);o.groups.push([f,d,p])}return o},e.glyf={},e.glyf.parse=function(i,s,a,o){for(var l=[],c=0;c<o.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(i,s){var a=e._bin,o=i._data,l=e._tabOffset(o,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var c={};if(c.noc=a.readShort(o,l),l+=2,c.xMin=a.readShort(o,l),l+=2,c.yMin=a.readShort(o,l),l+=2,c.xMax=a.readShort(o,l),l+=2,c.yMax=a.readShort(o,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(a.readUshort(o,l)),l+=2;var f=a.readUshort(o,l);if(l+=2,o.length-l<f)return null;c.instructions=a.readBytes(o,l,f),l+=f;var d=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<d;u++){var p=o[l];if(l++,c.flags.push(p),(8&p)!=0){var g=o[l];l++;for(var _=0;_<g;_++)c.flags.push(p),u++}}for(c.xs=[],u=0;u<d;u++){var w=(2&c.flags[u])!=0,b=(16&c.flags[u])!=0;w?(c.xs.push(b?o[l]:-o[l]),l++):b?c.xs.push(0):(c.xs.push(a.readShort(o,l)),l+=2)}for(c.ys=[],u=0;u<d;u++)w=(4&c.flags[u])!=0,b=(32&c.flags[u])!=0,w?(c.ys.push(b?o[l]:-o[l]),l++):b?c.ys.push(0):(c.ys.push(a.readShort(o,l)),l+=2);var C=0,M=0;for(u=0;u<d;u++)C+=c.xs[u],M+=c.ys[u],c.xs[u]=C,c.ys[u]=M}else{var A;c.parts=[];do{A=a.readUshort(o,l),l+=2;var k={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(k),k.glyphIndex=a.readUshort(o,l),l+=2,1&A){var O=a.readShort(o,l);l+=2;var R=a.readShort(o,l);l+=2}else O=a.readInt8(o,l),l++,R=a.readInt8(o,l),l++;2&A?(k.m.tx=O,k.m.ty=R):(k.p1=O,k.p2=R),8&A?(k.m.a=k.m.d=a.readF2dot14(o,l),l+=2):64&A?(k.m.a=a.readF2dot14(o,l),l+=2,k.m.d=a.readF2dot14(o,l),l+=2):128&A&&(k.m.a=a.readF2dot14(o,l),l+=2,k.m.b=a.readF2dot14(o,l),l+=2,k.m.c=a.readF2dot14(o,l),l+=2,k.m.d=a.readF2dot14(o,l),l+=2)}while(32&A);if(256&A){var I=a.readUshort(o,l);for(l+=2,c.instr=[],u=0;u<I;u++)c.instr.push(o[l]),l++}}return c},e.GDEF={},e.GDEF.parse=function(i,s,a,o){var l=s;s+=4;var c=e._bin.readUshort(i,s);return{glyphClassDef:c===0?null:e._lctf.readClassDef(i,l+c)}},e.GPOS={},e.GPOS.parse=function(i,s,a,o){return e._lctf.parse(i,s,a,o,e.GPOS.subt)},e.GPOS.subt=function(i,s,a,o){var l=e._bin,c=a,u={};if(u.fmt=l.readUshort(i,a),a+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var f=l.readUshort(i,a);a+=2,u.coverage=e._lctf.readCoverage(i,f+c)}if(s==1&&u.fmt==1){var d=l.readUshort(i,a);a+=2,d!=0&&(u.pos=e.GPOS.readValueRecord(i,a,d))}else if(s==2&&u.fmt>=1&&u.fmt<=2){d=l.readUshort(i,a),a+=2;var p=l.readUshort(i,a);a+=2;var g=e._lctf.numOfOnes(d),_=e._lctf.numOfOnes(p);if(u.fmt==1){u.pairsets=[];var w=l.readUshort(i,a);a+=2;for(var b=0;b<w;b++){var C=c+l.readUshort(i,a);a+=2;var M=l.readUshort(i,C);C+=2;for(var A=[],k=0;k<M;k++){var O=l.readUshort(i,C);C+=2,d!=0&&(U=e.GPOS.readValueRecord(i,C,d),C+=2*g),p!=0&&(V=e.GPOS.readValueRecord(i,C,p),C+=2*_),A.push({gid2:O,val1:U,val2:V})}u.pairsets.push(A)}}if(u.fmt==2){var R=l.readUshort(i,a);a+=2;var I=l.readUshort(i,a);a+=2;var D=l.readUshort(i,a);a+=2;var E=l.readUshort(i,a);for(a+=2,u.classDef1=e._lctf.readClassDef(i,c+R),u.classDef2=e._lctf.readClassDef(i,c+I),u.matrix=[],b=0;b<D;b++){var B=[];for(k=0;k<E;k++){var U=null,V=null;d!=0&&(U=e.GPOS.readValueRecord(i,a,d),a+=2*g),p!=0&&(V=e.GPOS.readValueRecord(i,a,p),a+=2*_),B.push({val1:U,val2:V})}u.matrix.push(B)}}}else if(s==4&&u.fmt==1)u.markCoverage=e._lctf.readCoverage(i,l.readUshort(i,a)+c),u.baseCoverage=e._lctf.readCoverage(i,l.readUshort(i,a+2)+c),u.markClassCount=l.readUshort(i,a+4),u.markArray=e.GPOS.readMarkArray(i,l.readUshort(i,a+6)+c),u.baseArray=e.GPOS.readBaseArray(i,l.readUshort(i,a+8)+c,u.markClassCount);else if(s==6&&u.fmt==1)u.mark1Coverage=e._lctf.readCoverage(i,l.readUshort(i,a)+c),u.mark2Coverage=e._lctf.readCoverage(i,l.readUshort(i,a+2)+c),u.markClassCount=l.readUshort(i,a+4),u.mark1Array=e.GPOS.readMarkArray(i,l.readUshort(i,a+6)+c),u.mark2Array=e.GPOS.readBaseArray(i,l.readUshort(i,a+8)+c,u.markClassCount);else{if(s==9&&u.fmt==1){var X=l.readUshort(i,a);a+=2;var te=l.readUint(i,a);if(a+=4,o.ltype==9)o.ltype=X;else if(o.ltype!=X)throw"invalid extension substitution";return e.GPOS.subt(i,o.ltype,c+te)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(i,s,a){var o=e._bin,l=[];return l.push(1&a?o.readShort(i,s):0),s+=1&a?2:0,l.push(2&a?o.readShort(i,s):0),s+=2&a?2:0,l.push(4&a?o.readShort(i,s):0),s+=4&a?2:0,l.push(8&a?o.readShort(i,s):0),s+=8&a?2:0,l},e.GPOS.readBaseArray=function(i,s,a){var o=e._bin,l=[],c=s,u=o.readUshort(i,s);s+=2;for(var f=0;f<u;f++){for(var d=[],p=0;p<a;p++)d.push(e.GPOS.readAnchorRecord(i,c+o.readUshort(i,s))),s+=2;l.push(d)}return l},e.GPOS.readMarkArray=function(i,s){var a=e._bin,o=[],l=s,c=a.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=e.GPOS.readAnchorRecord(i,a.readUshort(i,s+2)+l);f.markClass=a.readUshort(i,s),o.push(f),s+=4}return o},e.GPOS.readAnchorRecord=function(i,s){var a=e._bin,o={};return o.fmt=a.readUshort(i,s),o.x=a.readShort(i,s+2),o.y=a.readShort(i,s+4),o},e.GSUB={},e.GSUB.parse=function(i,s,a,o){return e._lctf.parse(i,s,a,o,e.GSUB.subt)},e.GSUB.subt=function(i,s,a,o){var l=e._bin,c=a,u={};if(u.fmt=l.readUshort(i,a),a+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var f=l.readUshort(i,a);a+=2,u.coverage=e._lctf.readCoverage(i,c+f)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(i,a),a+=2;else if(u.fmt==2){var d=l.readUshort(i,a);a+=2,u.newg=l.readUshorts(i,a,d),a+=2*u.newg.length}}else if(s==2&&u.fmt==1){d=l.readUshort(i,a),a+=2,u.seqs=[];for(var p=0;p<d;p++){var g=l.readUshort(i,a)+c;a+=2;var _=l.readUshort(i,g);u.seqs.push(l.readUshorts(i,g+2,_))}}else if(s==4)for(u.vals=[],d=l.readUshort(i,a),a+=2,p=0;p<d;p++){var w=l.readUshort(i,a);a+=2,u.vals.push(e.GSUB.readLigatureSet(i,c+w))}else if(s==5&&u.fmt==2){if(u.fmt==2){var b=l.readUshort(i,a);a+=2,u.cDef=e._lctf.readClassDef(i,c+b),u.scset=[];var C=l.readUshort(i,a);for(a+=2,p=0;p<C;p++){var M=l.readUshort(i,a);a+=2,u.scset.push(M==0?null:e.GSUB.readSubClassSet(i,c+M))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(p=0;p<3;p++){d=l.readUshort(i,a),a+=2;for(var A=[],k=0;k<d;k++)A.push(e._lctf.readCoverage(i,c+l.readUshort(i,a+2*k)));a+=2*d,p==0&&(u.backCvg=A),p==1&&(u.inptCvg=A),p==2&&(u.ahedCvg=A)}d=l.readUshort(i,a),a+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(i,a,d)}}else{if(s==7&&u.fmt==1){var O=l.readUshort(i,a);a+=2;var R=l.readUint(i,a);if(a+=4,o.ltype==9)o.ltype=O;else if(o.ltype!=O)throw"invalid extension substitution";return e.GSUB.subt(i,o.ltype,c+R)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(i,s){var a=e._bin.readUshort,o=s,l=[],c=a(i,s);s+=2;for(var u=0;u<c;u++){var f=a(i,s);s+=2,l.push(e.GSUB.readSubClassRule(i,o+f))}return l},e.GSUB.readSubClassRule=function(i,s){var a=e._bin.readUshort,o={},l=a(i,s),c=a(i,s+=2);s+=2,o.input=[];for(var u=0;u<l-1;u++)o.input.push(a(i,s)),s+=2;return o.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,c),o},e.GSUB.readSubstLookupRecords=function(i,s,a){for(var o=e._bin.readUshort,l=[],c=0;c<a;c++)l.push(o(i,s),o(i,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(i,s){var a=e._bin,o=s,l=[],c=a.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=a.readUshort(i,s);s+=2,l.push(e.GSUB.readChainSubClassRule(i,o+f))}return l},e.GSUB.readChainSubClassRule=function(i,s){for(var a=e._bin,o={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=a.readUshort(i,s);s+=2,c==1&&u--,o[l[c]]=a.readUshorts(i,s,u),s+=2*o[l[c]].length}return u=a.readUshort(i,s),s+=2,o.subst=a.readUshorts(i,s,2*u),s+=2*o.subst.length,o},e.GSUB.readLigatureSet=function(i,s){var a=e._bin,o=s,l=[],c=a.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=a.readUshort(i,s);s+=2,l.push(e.GSUB.readLigature(i,o+f))}return l},e.GSUB.readLigature=function(i,s){var a=e._bin,o={chain:[]};o.nglyph=a.readUshort(i,s),s+=2;var l=a.readUshort(i,s);s+=2;for(var c=0;c<l-1;c++)o.chain.push(a.readUshort(i,s)),s+=2;return o},e.head={},e.head.parse=function(i,s,a){var o=e._bin,l={};return o.readFixed(i,s),s+=4,l.fontRevision=o.readFixed(i,s),s+=4,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4,l.flags=o.readUshort(i,s),s+=2,l.unitsPerEm=o.readUshort(i,s),s+=2,l.created=o.readUint64(i,s),s+=8,l.modified=o.readUint64(i,s),s+=8,l.xMin=o.readShort(i,s),s+=2,l.yMin=o.readShort(i,s),s+=2,l.xMax=o.readShort(i,s),s+=2,l.yMax=o.readShort(i,s),s+=2,l.macStyle=o.readUshort(i,s),s+=2,l.lowestRecPPEM=o.readUshort(i,s),s+=2,l.fontDirectionHint=o.readShort(i,s),s+=2,l.indexToLocFormat=o.readShort(i,s),s+=2,l.glyphDataFormat=o.readShort(i,s),s+=2,l},e.hhea={},e.hhea.parse=function(i,s,a){var o=e._bin,l={};return o.readFixed(i,s),s+=4,l.ascender=o.readShort(i,s),s+=2,l.descender=o.readShort(i,s),s+=2,l.lineGap=o.readShort(i,s),s+=2,l.advanceWidthMax=o.readUshort(i,s),s+=2,l.minLeftSideBearing=o.readShort(i,s),s+=2,l.minRightSideBearing=o.readShort(i,s),s+=2,l.xMaxExtent=o.readShort(i,s),s+=2,l.caretSlopeRise=o.readShort(i,s),s+=2,l.caretSlopeRun=o.readShort(i,s),s+=2,l.caretOffset=o.readShort(i,s),s+=2,s+=8,l.metricDataFormat=o.readShort(i,s),s+=2,l.numberOfHMetrics=o.readUshort(i,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(i,s,a,o){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,f=0,d=0;d<o.maxp.numGlyphs;d++)d<o.hhea.numberOfHMetrics&&(u=l.readUshort(i,s),s+=2,f=l.readShort(i,s),s+=2),c.aWidth.push(u),c.lsBearing.push(f);return c},e.kern={},e.kern.parse=function(i,s,a,o){var l=e._bin,c=l.readUshort(i,s);if(s+=2,c==1)return e.kern.parseV1(i,s-2,a,o);var u=l.readUshort(i,s);s+=2;for(var f={glyph1:[],rval:[]},d=0;d<u;d++){s+=2,a=l.readUshort(i,s),s+=2;var p=l.readUshort(i,s);s+=2;var g=p>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;s=e.kern.readFormat0(i,s,f)}return f},e.kern.parseV1=function(i,s,a,o){var l=e._bin;l.readFixed(i,s),s+=4;var c=l.readUint(i,s);s+=4;for(var u={glyph1:[],rval:[]},f=0;f<c;f++){l.readUint(i,s),s+=4;var d=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2;var p=d>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;s=e.kern.readFormat0(i,s,u)}return u},e.kern.readFormat0=function(i,s,a){var o=e._bin,l=-1,c=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var u=0;u<c;u++){var f=o.readUshort(i,s);s+=2;var d=o.readUshort(i,s);s+=2;var p=o.readShort(i,s);s+=2,f!=l&&(a.glyph1.push(f),a.rval.push({glyph2:[],vals:[]}));var g=a.rval[a.rval.length-1];g.glyph2.push(d),g.vals.push(p),l=f}return s},e.loca={},e.loca.parse=function(i,s,a,o){var l=e._bin,c=[],u=o.head.indexToLocFormat,f=o.maxp.numGlyphs+1;if(u==0)for(var d=0;d<f;d++)c.push(l.readUshort(i,s+(d<<1))<<1);if(u==1)for(d=0;d<f;d++)c.push(l.readUint(i,s+(d<<2)));return c},e.maxp={},e.maxp.parse=function(i,s,a){var o=e._bin,l={},c=o.readUint(i,s);return s+=4,l.numGlyphs=o.readUshort(i,s),s+=2,c==65536&&(l.maxPoints=o.readUshort(i,s),s+=2,l.maxContours=o.readUshort(i,s),s+=2,l.maxCompositePoints=o.readUshort(i,s),s+=2,l.maxCompositeContours=o.readUshort(i,s),s+=2,l.maxZones=o.readUshort(i,s),s+=2,l.maxTwilightPoints=o.readUshort(i,s),s+=2,l.maxStorage=o.readUshort(i,s),s+=2,l.maxFunctionDefs=o.readUshort(i,s),s+=2,l.maxInstructionDefs=o.readUshort(i,s),s+=2,l.maxStackElements=o.readUshort(i,s),s+=2,l.maxSizeOfInstructions=o.readUshort(i,s),s+=2,l.maxComponentElements=o.readUshort(i,s),s+=2,l.maxComponentDepth=o.readUshort(i,s),s+=2),l},e.name={},e.name.parse=function(i,s,a){var o=e._bin,l={};o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2,o.readUshort(i,s);for(var u,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=s+=2,p=0;p<c;p++){var g=o.readUshort(i,s);s+=2;var _=o.readUshort(i,s);s+=2;var w=o.readUshort(i,s);s+=2;var b=o.readUshort(i,s);s+=2;var C=o.readUshort(i,s);s+=2;var M=o.readUshort(i,s);s+=2;var A,k=f[b],O=d+12*c+M;if(g==0)A=o.readUnicode(i,O,C/2);else if(g==3&&_==0)A=o.readUnicode(i,O,C/2);else if(_==0)A=o.readASCII(i,O,C);else if(_==1)A=o.readUnicode(i,O,C/2);else if(_==3)A=o.readUnicode(i,O,C/2);else{if(g!=1)throw"unknown encoding "+_+", platformID: "+g;A=o.readASCII(i,O,C),console.debug("reading unknown MAC encoding "+_+" as ASCII")}var R="p"+g+","+w.toString(16);l[R]==null&&(l[R]={}),l[R][k!==void 0?k:b]=A,l[R]._lang=w}for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==1033)return l[I];for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==0)return l[I];for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==3084)return l[I];for(var I in l)if(l[I].postScriptName!=null)return l[I];for(var I in l){u=I;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(i,s,a){var o=e._bin.readUshort(i,s);s+=2;var l={};if(o==0)e["OS/2"].version0(i,s,l);else if(o==1)e["OS/2"].version1(i,s,l);else if(o==2||o==3||o==4)e["OS/2"].version2(i,s,l);else{if(o!=5)throw"unknown OS/2 table version: "+o;e["OS/2"].version5(i,s,l)}return l},e["OS/2"].version0=function(i,s,a){var o=e._bin;return a.xAvgCharWidth=o.readShort(i,s),s+=2,a.usWeightClass=o.readUshort(i,s),s+=2,a.usWidthClass=o.readUshort(i,s),s+=2,a.fsType=o.readUshort(i,s),s+=2,a.ySubscriptXSize=o.readShort(i,s),s+=2,a.ySubscriptYSize=o.readShort(i,s),s+=2,a.ySubscriptXOffset=o.readShort(i,s),s+=2,a.ySubscriptYOffset=o.readShort(i,s),s+=2,a.ySuperscriptXSize=o.readShort(i,s),s+=2,a.ySuperscriptYSize=o.readShort(i,s),s+=2,a.ySuperscriptXOffset=o.readShort(i,s),s+=2,a.ySuperscriptYOffset=o.readShort(i,s),s+=2,a.yStrikeoutSize=o.readShort(i,s),s+=2,a.yStrikeoutPosition=o.readShort(i,s),s+=2,a.sFamilyClass=o.readShort(i,s),s+=2,a.panose=o.readBytes(i,s,10),s+=10,a.ulUnicodeRange1=o.readUint(i,s),s+=4,a.ulUnicodeRange2=o.readUint(i,s),s+=4,a.ulUnicodeRange3=o.readUint(i,s),s+=4,a.ulUnicodeRange4=o.readUint(i,s),s+=4,a.achVendID=[o.readInt8(i,s),o.readInt8(i,s+1),o.readInt8(i,s+2),o.readInt8(i,s+3)],s+=4,a.fsSelection=o.readUshort(i,s),s+=2,a.usFirstCharIndex=o.readUshort(i,s),s+=2,a.usLastCharIndex=o.readUshort(i,s),s+=2,a.sTypoAscender=o.readShort(i,s),s+=2,a.sTypoDescender=o.readShort(i,s),s+=2,a.sTypoLineGap=o.readShort(i,s),s+=2,a.usWinAscent=o.readUshort(i,s),s+=2,a.usWinDescent=o.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,a){var o=e._bin;return s=e["OS/2"].version0(i,s,a),a.ulCodePageRange1=o.readUint(i,s),s+=4,a.ulCodePageRange2=o.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,a){var o=e._bin;return s=e["OS/2"].version1(i,s,a),a.sxHeight=o.readShort(i,s),s+=2,a.sCapHeight=o.readShort(i,s),s+=2,a.usDefault=o.readUshort(i,s),s+=2,a.usBreak=o.readUshort(i,s),s+=2,a.usMaxContext=o.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,a){var o=e._bin;return s=e["OS/2"].version2(i,s,a),a.usLowerOpticalPointSize=o.readUshort(i,s),s+=2,a.usUpperOpticalPointSize=o.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,a){var o=e._bin,l={};return l.version=o.readFixed(i,s),s+=4,l.italicAngle=o.readFixed(i,s),s+=4,l.underlinePosition=o.readShort(i,s),s+=2,l.underlineThickness=o.readShort(i,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var a=i.cmap,o=-1;if(a.p0e4!=null?o=a.p0e4:a.p3e1!=null?o=a.p3e1:a.p1e0!=null?o=a.p1e0:a.p0e3!=null&&(o=a.p0e3),o==-1)throw"no familiar platform and encoding!";var l=a.tables[o];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var f=l.groups[u];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,s){var a={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var o=i.SVG.entries[s];return o==null?a:(typeof o=="string"&&(o=e.SVG.toPath(o),i.SVG.entries[s]=o),o)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},c=i.CFF,u=i.CFF.Private;if(c.ROS){for(var f=0;c.FDSelect[f+2]<=s;)f+=2;u=c.FDArray[c.FDSelect[f+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],l,c,u,a)}else i.glyf&&e.U._drawGlyf(s,i,a);return a},e.U._drawGlyf=function(i,s,a){var o=s.glyf[i];o==null&&(o=s.glyf[i]=e.glyf._parseGlyf(s,i)),o!=null&&(o.noc>-1?e.U._simpleGlyph(o,a):e.U._compoGlyph(o,s,a))},e.U._simpleGlyph=function(i,s){for(var a=0;a<i.noc;a++){for(var o=a==0?0:i.endPts[a-1]+1,l=i.endPts[a],c=o;c<=l;c++){var u=c==o?l:c-1,f=c==l?o:c+1,d=1&i.flags[c],p=1&i.flags[u],g=1&i.flags[f],_=i.xs[c],w=i.ys[c];if(c==o)if(d){if(!p){e.U.P.moveTo(s,_,w);continue}e.U.P.moveTo(s,i.xs[u],i.ys[u])}else p?e.U.P.moveTo(s,i.xs[u],i.ys[u]):e.U.P.moveTo(s,(i.xs[u]+_)/2,(i.ys[u]+w)/2);d?p&&e.U.P.lineTo(s,_,w):g?e.U.P.qcurveTo(s,_,w,i.xs[f],i.ys[f]):e.U.P.qcurveTo(s,_,w,(_+i.xs[f])/2,(w+i.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,a){for(var o=0;o<i.parts.length;o++){var l={cmds:[],crds:[]},c=i.parts[o];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,f=0;f<l.crds.length;f+=2){var d=l.crds[f],p=l.crds[f+1];a.crds.push(d*u.a+p*u.b+u.tx),a.crds.push(d*u.c+p*u.d+u.ty)}for(f=0;f<l.cmds.length;f++)a.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(i,s){var a=e._lctf.getInterval(s,i);return a==-1?0:s[a+2]},e.U._applySubs=function(i,s,a,o){for(var l=i.length-s-1,c=0;c<a.tabs.length;c++)if(a.tabs[c]!=null){var u,f=a.tabs[c];if(!f.coverage||(u=e._lctf.coverageIndex(f.coverage,i[s]))!=-1){if(a.ltype==1)i[s],f.fmt==1?i[s]=i[s]+f.delta:i[s]=f.newg[u];else if(a.ltype==4)for(var d=f.vals[u],p=0;p<d.length;p++){var g=d[p],_=g.chain.length;if(!(_>l)){for(var w=!0,b=0,C=0;C<_;C++){for(;i[s+b+(1+C)]==-1;)b++;g.chain[C]!=i[s+b+(1+C)]&&(w=!1)}if(w){for(i[s]=g.nglyph,C=0;C<_+b;C++)i[s+C+1]=-1;break}}}else if(a.ltype==5&&f.fmt==2)for(var M=e._lctf.getInterval(f.cDef,i[s]),A=f.cDef[M+2],k=f.scset[A],O=0;O<k.length;O++){var R=k[O],I=R.input;if(!(I.length>l)){for(w=!0,C=0;C<I.length;C++){var D=e._lctf.getInterval(f.cDef,i[s+1+C]);if(M==-1&&f.cDef[D+2]!=I[C]){w=!1;break}}if(w){var E=R.substLookupRecords;for(p=0;p<E.length;p+=2)E[p],E[p+1]}}}else if(a.ltype==6&&f.fmt==3){if(!e.U._glsCovered(i,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(i,f.inptCvg,s)||!e.U._glsCovered(i,f.ahedCvg,s+f.inptCvg.length))continue;var B=f.lookupRec;for(O=0;O<B.length;O+=2){M=B[O];var U=o[B[O+1]];e.U._applySubs(i,s+M,U,o)}}}}},e.U._glsCovered=function(i,s,a){for(var o=0;o<s.length;o++)if(e._lctf.coverageIndex(s[o],i[a+o])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,a){for(var o={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var f=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,d=e.U.glyphToPath(i,u),p=0;p<d.crds.length;p+=2)o.crds.push(d.crds[p]+l),o.crds.push(d.crds[p+1]);for(a&&o.cmds.push(a),p=0;p<d.cmds.length;p++)o.cmds.push(d.cmds[p]);a&&o.cmds.push("X"),l+=i.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(i,u,f))}}return o},e.U.P={},e.U.P.moveTo=function(i,s,a){i.cmds.push("M"),i.crds.push(s,a)},e.U.P.lineTo=function(i,s,a){i.cmds.push("L"),i.crds.push(s,a)},e.U.P.curveTo=function(i,s,a,o,l,c,u){i.cmds.push("C"),i.crds.push(s,a,o,l,c,u)},e.U.P.qcurveTo=function(i,s,a,o,l){i.cmds.push("Q"),i.crds.push(s,a,o,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,a,o,l){for(var c=s.stack,u=s.nStems,f=s.haveWidth,d=s.width,p=s.open,g=0,_=s.x,w=s.y,b=0,C=0,M=0,A=0,k=0,O=0,R=0,I=0,D=0,E=0,B={val:0,size:0};g<i.length;){e.CFF.getCharString(i,g,B);var U=B.val;if(g+=B.size,U=="o1"||U=="o18")c.length%2!=0&&!f&&(d=c.shift()+o.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(U=="o3"||U=="o23")c.length%2!=0&&!f&&(d=c.shift()+o.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(U=="o4")c.length>1&&!f&&(d=c.shift()+o.nominalWidthX,f=!0),p&&e.U.P.closePath(l),w+=c.pop(),e.U.P.moveTo(l,_,w),p=!0;else if(U=="o5")for(;c.length>0;)_+=c.shift(),w+=c.shift(),e.U.P.lineTo(l,_,w);else if(U=="o6"||U=="o7")for(var V=c.length,X=U=="o6",te=0;te<V;te++){var ee=c.shift();X?_+=ee:w+=ee,X=!X,e.U.P.lineTo(l,_,w)}else if(U=="o8"||U=="o24"){V=c.length;for(var ue=0;ue+6<=V;)b=_+c.shift(),C=w+c.shift(),M=b+c.shift(),A=C+c.shift(),_=M+c.shift(),w=A+c.shift(),e.U.P.curveTo(l,b,C,M,A,_,w),ue+=6;U=="o24"&&(_+=c.shift(),w+=c.shift(),e.U.P.lineTo(l,_,w))}else{if(U=="o11")break;if(U=="o1234"||U=="o1235"||U=="o1236"||U=="o1237")U=="o1234"&&(C=w,M=(b=_+c.shift())+c.shift(),E=A=C+c.shift(),O=A,I=w,_=(R=(k=(D=M+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,b,C,M,A,D,E),e.U.P.curveTo(l,k,O,R,I,_,w)),U=="o1235"&&(b=_+c.shift(),C=w+c.shift(),M=b+c.shift(),A=C+c.shift(),D=M+c.shift(),E=A+c.shift(),k=D+c.shift(),O=E+c.shift(),R=k+c.shift(),I=O+c.shift(),_=R+c.shift(),w=I+c.shift(),c.shift(),e.U.P.curveTo(l,b,C,M,A,D,E),e.U.P.curveTo(l,k,O,R,I,_,w)),U=="o1236"&&(b=_+c.shift(),C=w+c.shift(),M=b+c.shift(),E=A=C+c.shift(),O=A,R=(k=(D=M+c.shift())+c.shift())+c.shift(),I=O+c.shift(),_=R+c.shift(),e.U.P.curveTo(l,b,C,M,A,D,E),e.U.P.curveTo(l,k,O,R,I,_,w)),U=="o1237"&&(b=_+c.shift(),C=w+c.shift(),M=b+c.shift(),A=C+c.shift(),D=M+c.shift(),E=A+c.shift(),k=D+c.shift(),O=E+c.shift(),R=k+c.shift(),I=O+c.shift(),Math.abs(R-_)>Math.abs(I-w)?_=R+c.shift():w=I+c.shift(),e.U.P.curveTo(l,b,C,M,A,D,E),e.U.P.curveTo(l,k,O,R,I,_,w));else if(U=="o14"){if(c.length>0&&!f&&(d=c.shift()+a.nominalWidthX,f=!0),c.length==4){var ne=c.shift(),oe=c.shift(),q=c.shift(),J=c.shift(),ie=e.CFF.glyphBySE(a,q),he=e.CFF.glyphBySE(a,J);e.U._drawCFF(a.CharStrings[ie],s,a,o,l),s.x=ne,s.y=oe,e.U._drawCFF(a.CharStrings[he],s,a,o,l)}p&&(e.U.P.closePath(l),p=!1)}else if(U=="o19"||U=="o20")c.length%2!=0&&!f&&(d=c.shift()+o.nominalWidthX),u+=c.length>>1,c.length=0,f=!0,g+=u+7>>3;else if(U=="o21")c.length>2&&!f&&(d=c.shift()+o.nominalWidthX,f=!0),w+=c.pop(),_+=c.pop(),p&&e.U.P.closePath(l),e.U.P.moveTo(l,_,w),p=!0;else if(U=="o22")c.length>1&&!f&&(d=c.shift()+o.nominalWidthX,f=!0),_+=c.pop(),p&&e.U.P.closePath(l),e.U.P.moveTo(l,_,w),p=!0;else if(U=="o25"){for(;c.length>6;)_+=c.shift(),w+=c.shift(),e.U.P.lineTo(l,_,w);b=_+c.shift(),C=w+c.shift(),M=b+c.shift(),A=C+c.shift(),_=M+c.shift(),w=A+c.shift(),e.U.P.curveTo(l,b,C,M,A,_,w)}else if(U=="o26")for(c.length%2&&(_+=c.shift());c.length>0;)b=_,C=w+c.shift(),_=M=b+c.shift(),w=(A=C+c.shift())+c.shift(),e.U.P.curveTo(l,b,C,M,A,_,w);else if(U=="o27")for(c.length%2&&(w+=c.shift());c.length>0;)C=w,M=(b=_+c.shift())+c.shift(),A=C+c.shift(),_=M+c.shift(),w=A,e.U.P.curveTo(l,b,C,M,A,_,w);else if(U=="o10"||U=="o29"){var $=U=="o10"?o:a;if(c.length==0)console.debug("error: empty stack");else{var ge=c.pop(),pe=$.Subrs[ge+$.Bias];s.x=_,s.y=w,s.nStems=u,s.haveWidth=f,s.width=d,s.open=p,e.U._drawCFF(pe,s,a,o,l),_=s.x,w=s.y,u=s.nStems,f=s.haveWidth,d=s.width,p=s.open}}else if(U=="o30"||U=="o31"){var we=c.length,ke=(ue=0,U=="o31");for(ue+=we-(V=-3&we);ue<V;)ke?(C=w,M=(b=_+c.shift())+c.shift(),w=(A=C+c.shift())+c.shift(),V-ue==5?(_=M+c.shift(),ue++):_=M,ke=!1):(b=_,C=w+c.shift(),M=b+c.shift(),A=C+c.shift(),_=M+c.shift(),V-ue==5?(w=A+c.shift(),ue++):w=A,ke=!0),e.U.P.curveTo(l,b,C,M,A,_,w),ue+=4}else{if((U+"").charAt(0)=="o")throw console.debug("Unknown operation: "+U,i),U;c.push(U)}}}s.x=_,s.y=w,s.nStems=u,s.haveWidth=f,s.width=d,s.open=p};var t=e,n={Typr:t};return r.Typr=t,r.default=n,Object.defineProperty(r,"__esModule",{value:!0}),r}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function gAe(){return function(r){var e=Uint8Array,t=Uint16Array,n=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(U,V){for(var X=new t(31),te=0;te<31;++te)X[te]=V+=1<<U[te-1];var ee=new n(X[30]);for(te=1;te<30;++te)for(var ue=X[te];ue<X[te+1];++ue)ee[ue]=ue-X[te]<<5|te;return[X,ee]},l=o(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var f=o(s,0)[0],d=new t(32768),p=0;p<32768;++p){var g=(43690&p)>>>1|(21845&p)<<1;g=(61680&(g=(52428&g)>>>2|(13107&g)<<2))>>>4|(3855&g)<<4,d[p]=((65280&g)>>>8|(255&g)<<8)>>>1}var _=function(U,V,X){for(var te=U.length,ee=0,ue=new t(V);ee<te;++ee)++ue[U[ee]-1];var ne,oe=new t(V);for(ee=0;ee<V;++ee)oe[ee]=oe[ee-1]+ue[ee-1]<<1;{ne=new t(1<<V);var q=15-V;for(ee=0;ee<te;++ee)if(U[ee])for(var J=ee<<4|U[ee],ie=V-U[ee],he=oe[U[ee]-1]++<<ie,$=he|(1<<ie)-1;he<=$;++he)ne[d[he]>>>q]=J}return ne},w=new e(288);for(p=0;p<144;++p)w[p]=8;for(p=144;p<256;++p)w[p]=9;for(p=256;p<280;++p)w[p]=7;for(p=280;p<288;++p)w[p]=8;var b=new e(32);for(p=0;p<32;++p)b[p]=5;var C=_(w,9),M=_(b,5),A=function(U){for(var V=U[0],X=1;X<U.length;++X)U[X]>V&&(V=U[X]);return V},k=function(U,V,X){var te=V/8|0;return(U[te]|U[te+1]<<8)>>(7&V)&X},O=function(U,V){var X=V/8|0;return(U[X]|U[X+1]<<8|U[X+2]<<16)>>(7&V)},R=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],I=function(U,V,X){var te=new Error(V||R[U]);if(te.code=U,Error.captureStackTrace&&Error.captureStackTrace(te,I),!X)throw te;return te},D=function(U,V,X){var te=U.length;if(!te||X&&!X.l&&te<5)return V||new e(0);var ee=!V||X,ue=!X||X.i;X||(X={}),V||(V=new e(3*te));var ne,oe=function(et){var Me=V.length;if(et>Me){var tt=new e(Math.max(2*Me,et));tt.set(V),V=tt}},q=X.f||0,J=X.p||0,ie=X.b||0,he=X.l,$=X.d,ge=X.m,pe=X.n,we=8*te;do{if(!he){X.f=q=k(U,J,1);var ke=k(U,J+1,3);if(J+=3,!ke){var Pe=U[(Ee=((ne=J)/8|0)+(7&ne&&1)+4)-4]|U[Ee-3]<<8,je=Ee+Pe;if(je>te){ue&&I(0);break}ee&&oe(ie+Pe),V.set(U.subarray(Ee,je),ie),X.b=ie+=Pe,X.p=J=8*je;continue}if(ke==1)he=C,$=M,ge=9,pe=5;else if(ke==2){var Ke=k(U,J,31)+257,Ie=k(U,J+10,15)+4,Ge=Ke+k(U,J+5,31)+1;J+=14;for(var ce=new e(Ge),_t=new e(19),_e=0;_e<Ie;++_e)_t[a[_e]]=k(U,J+3*_e,7);J+=3*Ie;var Ne=A(_t),Ce=(1<<Ne)-1,He=_(_t,Ne);for(_e=0;_e<Ge;){var Ee,Z=He[k(U,J,Ce)];if(J+=15&Z,(Ee=Z>>>4)<16)ce[_e++]=Ee;else{var W=0,re=0;for(Ee==16?(re=3+k(U,J,3),J+=2,W=ce[_e-1]):Ee==17?(re=3+k(U,J,7),J+=3):Ee==18&&(re=11+k(U,J,127),J+=7);re--;)ce[_e++]=W}}var be=ce.subarray(0,Ke),ve=ce.subarray(Ke);ge=A(be),pe=A(ve),he=_(be,ge),$=_(ve,pe)}else I(1);if(J>we){ue&&I(0);break}}ee&&oe(ie+131072);for(var Je=(1<<ge)-1,$e=(1<<pe)-1,it=J;;it=J){var pt=(W=he[O(U,J)&Je])>>>4;if((J+=15&W)>we){ue&&I(0);break}if(W||I(2),pt<256)V[ie++]=pt;else{if(pt==256){it=J,he=null;break}var Ft=pt-254;if(pt>264){var Le=i[_e=pt-257];Ft=k(U,J,(1<<Le)-1)+c[_e],J+=Le}var at=$[O(U,J)&$e],vt=at>>>4;if(at||I(3),J+=15&at,ve=f[vt],vt>3&&(Le=s[vt],ve+=O(U,J)&(1<<Le)-1,J+=Le),J>we){ue&&I(0);break}ee&&oe(ie+131072);for(var qe=ie+Ft;ie<qe;ie+=4)V[ie]=V[ie-ve],V[ie+1]=V[ie+1-ve],V[ie+2]=V[ie+2-ve],V[ie+3]=V[ie+3-ve];ie=qe}}X.l=he,X.p=it,X.b=ie,he&&(q=1,X.m=ge,X.d=$,X.n=pe)}while(!q);return ie==V.length?V:function(et,Me,tt){(tt==null||tt>et.length)&&(tt=et.length);var Tt=new(et instanceof t?t:et instanceof n?n:e)(tt-Me);return Tt.set(et.subarray(Me,tt)),Tt}(V,0,ie)},E=new e(0),B=typeof TextDecoder<"u"&&new TextDecoder;try{B.decode(E,{stream:!0})}catch{}return r.convert_streams=function(U){var V=new DataView(U),X=0;function te(){var Ke=V.getUint16(X);return X+=2,Ke}function ee(){var Ke=V.getUint32(X);return X+=4,Ke}function ue(Ke){Pe.setUint16(je,Ke),je+=2}function ne(Ke){Pe.setUint32(je,Ke),je+=4}for(var oe={signature:ee(),flavor:ee(),length:ee(),numTables:te(),reserved:te(),totalSfntSize:ee(),majorVersion:te(),minorVersion:te(),metaOffset:ee(),metaLength:ee(),metaOrigLength:ee(),privOffset:ee(),privLength:ee()},q=0;Math.pow(2,q)<=oe.numTables;)q++;q--;for(var J=16*Math.pow(2,q),ie=16*oe.numTables-J,he=12,$=[],ge=0;ge<oe.numTables;ge++)$.push({tag:ee(),offset:ee(),compLength:ee(),origLength:ee(),origChecksum:ee()}),he+=16;var pe,we=new Uint8Array(12+16*$.length+$.reduce(function(Ke,Ie){return Ke+Ie.origLength+4},0)),ke=we.buffer,Pe=new DataView(ke),je=0;return ne(oe.flavor),ue(oe.numTables),ue(J),ue(q),ue(ie),$.forEach(function(Ke){ne(Ke.tag),ne(Ke.origChecksum),ne(he),ne(Ke.origLength),Ke.outOffset=he,(he+=Ke.origLength)%4!=0&&(he+=4-he%4)}),$.forEach(function(Ke){var Ie,Ge=U.slice(Ke.offset,Ke.offset+Ke.compLength);if(Ke.compLength!=Ke.origLength){var ce=new Uint8Array(Ke.origLength);Ie=new Uint8Array(Ge,2),D(Ie,ce)}else ce=new Uint8Array(Ge);we.set(ce,Ke.outOffset);var _t=0;(he=Ke.outOffset+Ke.origLength)%4!=0&&(_t=4-he%4),we.set(new Uint8Array(_t).buffer,Ke.outOffset+Ke.origLength),pe=he+_t}),ke.slice(0,pe)},Object.defineProperty(r,"__esModule",{value:!0}),r}({}).convert_streams}function vAe(r,e){const t={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,a=4,o=8,l=16,c=32;let u;function f(R){if(!u){const I={R:s,L:i,D:a,C:l,U:c,T:o};u=new Map;for(let D in n){let E=0;n[D].split(",").forEach(B=>{let[U,V]=B.split("+");U=parseInt(U,36),V=V?parseInt(V,36):0,u.set(E+=U,I[D]);for(let X=V;X--;)u.set(++E,I[D])})}}return u.get(R)||c}const d=1,p=2,g=3,_=4,w=[null,"isol","init","fina","medi"];function b(R){const I=new Uint8Array(R.length);let D=c,E=d,B=-1;for(let U=0;U<R.length;U++){const V=R.codePointAt(U);let X=f(V)|0,te=d;X&o||(D&(i|a|l)?X&(s|a|l)?(te=g,(E===d||E===g)&&I[B]++):X&(i|c)&&(E===p||E===_)&&I[B]--:D&(s|c)&&(E===p||E===_)&&I[B]--,E=I[U]=te,D=X,B=U,V>65535&&U++)}return I}function C(R,I){const D=[];for(let B=0;B<I.length;B++){const U=I.codePointAt(B);U>65535&&B++,D.push(r.U.codeToGlyph(R,U))}const E=R.GSUB;if(E){const{lookupList:B,featureList:U}=E;let V;const X=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,te=[];U.forEach(ee=>{if(X.test(ee.tag))for(let ue=0;ue<ee.tab.length;ue++){if(te[ee.tab[ue]])continue;te[ee.tab[ue]]=!0;const ne=B[ee.tab[ue]],oe=/^(isol|init|fina|medi)$/.test(ee.tag);oe&&!V&&(V=b(I));for(let q=0;q<D.length;q++)(!V||!oe||w[V[q]]===ee.tag)&&r.U._applySubs(D,q,ne,B)}})}return D}function M(R,I){const D=new Int16Array(I.length*3);let E=0;for(;E<I.length;E++){const X=I[E];if(X===-1)continue;D[E*3+2]=R.hmtx.aWidth[X];const te=R.GPOS;if(te){const ee=te.lookupList;for(let ue=0;ue<ee.length;ue++){const ne=ee[ue];for(let oe=0;oe<ne.tabs.length;oe++){const q=ne.tabs[oe];if(ne.ltype===1){if(r._lctf.coverageIndex(q.coverage,X)!==-1&&q.pos){V(q.pos,E);break}}else if(ne.ltype===2){let J=null,ie=B();if(ie!==-1){const he=r._lctf.coverageIndex(q.coverage,I[ie]);if(he!==-1){if(q.fmt===1){const $=q.pairsets[he];for(let ge=0;ge<$.length;ge++)$[ge].gid2===X&&(J=$[ge])}else if(q.fmt===2){const $=r.U._getGlyphClass(I[ie],q.classDef1),ge=r.U._getGlyphClass(X,q.classDef2);J=q.matrix[$][ge]}if(J){J.val1&&V(J.val1,ie),J.val2&&V(J.val2,E);break}}}}else if(ne.ltype===4){const J=r._lctf.coverageIndex(q.markCoverage,X);if(J!==-1){const ie=B(U),he=ie===-1?-1:r._lctf.coverageIndex(q.baseCoverage,I[ie]);if(he!==-1){const $=q.markArray[J],ge=q.baseArray[he][$.markClass];D[E*3]=ge.x-$.x+D[ie*3]-D[ie*3+2],D[E*3+1]=ge.y-$.y+D[ie*3+1];break}}}else if(ne.ltype===6){const J=r._lctf.coverageIndex(q.mark1Coverage,X);if(J!==-1){const ie=B();if(ie!==-1){const he=I[ie];if(A(R,he)===3){const $=r._lctf.coverageIndex(q.mark2Coverage,he);if($!==-1){const ge=q.mark1Array[J],pe=q.mark2Array[$][ge.markClass];D[E*3]=pe.x-ge.x+D[ie*3]-D[ie*3+2],D[E*3+1]=pe.y-ge.y+D[ie*3+1];break}}}}}}}}else if(R.kern&&!R.cff){const ee=B();if(ee!==-1){const ue=R.kern.glyph1.indexOf(I[ee]);if(ue!==-1){const ne=R.kern.rval[ue].glyph2.indexOf(X);ne!==-1&&(D[ee*3+2]+=R.kern.rval[ue].vals[ne])}}}}return D;function B(X){for(let te=E-1;te>=0;te--)if(I[te]!==-1&&(!X||X(I[te])))return te;return-1}function U(X){return A(R,X)===1}function V(X,te){for(let ee=0;ee<3;ee++)D[te*3+ee]+=X[ee]||0}}function A(R,I){const D=R.GDEF&&R.GDEF.glyphClassDef;return D?r.U._getGlyphClass(I,D):0}function k(...R){for(let I=0;I<R.length;I++)if(typeof R[I]=="number")return R[I]}function O(R){const I=Object.create(null),D=R["OS/2"],E=R.hhea,B=R.head.unitsPerEm,U=k(D&&D.sTypoAscender,E&&E.ascender,B),V={unitsPerEm:B,ascender:U,descender:k(D&&D.sTypoDescender,E&&E.descender,0),capHeight:k(D&&D.sCapHeight,U),xHeight:k(D&&D.sxHeight,U),lineGap:k(D&&D.sTypoLineGap,E&&E.lineGap),supportsCodePoint(X){return r.U.codeToGlyph(R,X)>0},forEachGlyph(X,te,ee,ue){let ne=0;const oe=1/V.unitsPerEm*te,q=C(R,X);let J=0;const ie=M(R,q);return q.forEach((he,$)=>{if(he!==-1){let ge=I[he];if(!ge){const{cmds:pe,crds:we}=r.U.glyphToPath(R,he);let ke="",Pe=0;for(let ce=0,_t=pe.length;ce<_t;ce++){const _e=t[pe[ce]];ke+=pe[ce];for(let Ne=1;Ne<=_e;Ne++)ke+=(Ne>1?",":"")+we[Pe++]}let je,Ke,Ie,Ge;if(we.length){je=Ke=1/0,Ie=Ge=-1/0;for(let ce=0,_t=we.length;ce<_t;ce+=2){let _e=we[ce],Ne=we[ce+1];_e<je&&(je=_e),Ne<Ke&&(Ke=Ne),_e>Ie&&(Ie=_e),Ne>Ge&&(Ge=Ne)}}else je=Ie=Ke=Ge=0;ge=I[he]={index:he,advanceWidth:R.hmtx.aWidth[he],xMin:je,yMin:Ke,xMax:Ie,yMax:Ge,path:ke}}ue.call(null,ge,ne+ie[$*3]*oe,ie[$*3+1]*oe,J),ne+=ie[$*3+2]*oe,ee&&(ne+=ee*te)}J+=X.codePointAt(J)>65535?2:1}),ne}};return V}return function(I){const D=new Uint8Array(I,0,4),E=r._bin.readASCII(D,0,4);if(E==="wOFF")I=e(I);else if(E==="wOF2")throw new Error("woff2 fonts not supported");return O(r.parse(I)[0])}}const yAe=bv({name:"Typr Font Parser",dependencies:[mAe,gAe,vAe],init(r,e,t){const n=r(),i=e();return t(n,i)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function wAe(){return function(r){var e=function(){this.buckets=new Map};e.prototype.add=function(M){var A=M>>5;this.buckets.set(A,(this.buckets.get(A)||0)|1<<(31&M))},e.prototype.has=function(M){var A=this.buckets.get(M>>5);return A!==void 0&&(A&1<<(31&M))!=0},e.prototype.serialize=function(){var M=[];return this.buckets.forEach(function(A,k){M.push((+k).toString(36)+":"+A.toString(36))}),M.join(",")},e.prototype.deserialize=function(M){var A=this;this.buckets.clear(),M.split(",").forEach(function(k){var O=k.split(":");A.buckets.set(parseInt(O[0],36),parseInt(O[1],36))})};var t=Math.pow(2,8),n=t-1,i=~n;function s(M){var A=function(O){return O&i}(M).toString(16),k=function(O){return(O&i)+t-1}(M).toString(16);return"codepoint-index/plane"+(M>>16)+"/"+A+"-"+k+".json"}function a(M,A){var k=M&n,O=A.codePointAt(k/6|0);return((O=(O||48)-48)&1<<k%6)!=0}function o(M,A){var k;(k=M,k.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(O){return O.split("-").map(function(R){return parseInt(R.trim(),16)})})).forEach(function(O){var R=O[0],I=O[1];I===void 0&&(I=R),A(R,I)})}function l(M,A){o(M,function(k,O){for(var R=k;R<=O;R++)A(R)})}var c={},u={},f=new WeakMap,d="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function p(M){var A=f.get(M);return A||(A=new e,l(M.ranges,function(k){return A.add(k)}),f.set(M,A)),A}var g,_=new Map;function w(M,A,k){return M[A]?A:M[k]?k:function(O){for(var R in O)return R}(M)}function b(M,A){var k=A;if(!M.includes(k)){k=1/0;for(var O=0;O<M.length;O++)Math.abs(M[O]-A)<Math.abs(k-A)&&(k=M[O])}return k}function C(M){return g||(g=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(A){g.add(A)})),g.has(M)}return r.CodePointSet=e,r.clearCache=function(){c={},u={}},r.getFontsForString=function(M,A){A===void 0&&(A={});var k,O=A.lang;O===void 0&&(O=new RegExp("\\p{Script=Hangul}","u").test(k=M)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(k)?"ja":"en");var R=A.category;R===void 0&&(R="sans-serif");var I=A.style;I===void 0&&(I="normal");var D=A.weight;D===void 0&&(D=400);var E=(A.dataUrl||d).replace(/\/$/g,""),B=new Map,U=new Uint8Array(M.length),V={},X={},te=new Array(M.length),ee=new Map,ue=!1;function ne(J){var ie=_.get(J);return ie||(ie=fetch(E+"/"+J).then(function(he){if(!he.ok)throw new Error(he.statusText);return he.json().then(function($){if(!Array.isArray($)||$[0]!==1)throw new Error("Incorrect schema version; need 1, got "+$[0]);return $[1]})}).catch(function(he){if(E!==d)return ue||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+E+'", trying default CDN. '+he.message),ue=!0),E=d,_.delete(J),ne(J);throw he}),_.set(J,ie)),ie}for(var oe=function(J){var ie=M.codePointAt(J),he=s(ie);te[J]=he,c[he]||ee.has(he)||ee.set(he,ne(he).then(function($){c[he]=$})),ie>65535&&(J++,q=J)},q=0;q<M.length;q++)oe(q);return Promise.all(ee.values()).then(function(){ee.clear();for(var J=function(he){var $=M.codePointAt(he),ge=null,pe=c[te[he]],we=void 0;for(var ke in pe){var Pe=X[ke];if(Pe===void 0&&(Pe=X[ke]=new RegExp(ke).test(O||"en")),Pe){for(var je in we=ke,pe[ke])if(a($,pe[ke][je])){ge=je;break}break}}if(!ge){e:for(var Ke in pe)if(Ke!==we){for(var Ie in pe[Ke])if(a($,pe[Ke][Ie])){ge=Ie;break e}}}ge||(console.debug("No font coverage for U+"+$.toString(16)),ge="latin"),te[he]=ge,u[ge]||ee.has(ge)||ee.set(ge,ne("font-meta/"+ge+".json").then(function(Ge){u[ge]=Ge})),$>65535&&(he++,ie=he)},ie=0;ie<M.length;ie++)J(ie);return Promise.all(ee.values())}).then(function(){for(var J,ie=null,he=0;he<M.length;he++){var $=M.codePointAt(he);if(ie&&(C($)||p(ie).has($)))U[he]=U[he-1];else{ie=u[te[he]];var ge=V[ie.id];if(!ge){var pe=ie.typeforms,we=w(pe,R,"sans-serif"),ke=w(pe[we],I,"normal"),Pe=b((J=pe[we])===null||J===void 0?void 0:J[ke],D);ge=V[ie.id]=E+"/font-files/"+ie.id+"/"+we+"."+ke+"."+Pe+".woff"}var je=B.get(ge);je==null&&(je=B.size,B.set(ge,je)),U[he]=je}$>65535&&(he++,U[he]=U[he-1])}return{fontUrls:Array.from(B.keys()),chars:U}})},Object.defineProperty(r,"__esModule",{value:!0}),r}({})}function _Ae(r,e){const t=Object.create(null),n=Object.create(null);function i(a,o){const l=c=>{console.error(`Failure loading font ${a}`,c)};try{const c=new XMLHttpRequest;c.open("get",a,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>=400)l(new Error(c.statusText));else if(c.status>0)try{const u=r(c.response);u.src=a,o(u)}catch(u){l(u)}},c.onerror=l,c.send()}catch(c){l(c)}}function s(a,o){let l=t[a];l?o(l):n[a]?n[a].push(o):(n[a]=[o],i(a,c=>{c.src=a,t[a]=c,n[a].forEach(u=>u(c)),delete n[a]}))}return function(a,o,{lang:l,fonts:c=[],style:u="normal",weight:f="normal",unicodeFontsURL:d}={}){const p=new Uint8Array(a.length),g=[];a.length||C();const _=new Map,w=[];if(u!=="italic"&&(u="normal"),typeof f!="number"&&(f=f==="bold"?700:400),c&&!Array.isArray(c)&&(c=[c]),c=c.slice().filter(A=>!A.lang||A.lang.test(l)).reverse(),c.length){let R=0;(function I(D=0){for(let E=D,B=a.length;E<B;E++){const U=a.codePointAt(E);if(R===1&&g[p[E-1]].supportsCodePoint(U)||E>0&&/\s/.test(a[E]))p[E]=p[E-1],R===2&&(w[w.length-1][1]=E);else for(let V=p[E],X=c.length;V<=X;V++)if(V===X){const te=R===2?w[w.length-1]:w[w.length]=[E,E];te[1]=E,R=2}else{p[E]=V;const{src:te,unicodeRange:ee}=c[V];if(!ee||M(U,ee)){const ue=t[te];if(!ue){s(te,()=>{I(E)});return}if(ue.supportsCodePoint(U)){let ne=_.get(ue);typeof ne!="number"&&(ne=g.length,g.push(ue),_.set(ue,ne)),p[E]=ne,R=1;break}}}U>65535&&E+1<B&&(p[E+1]=p[E],E++,R===2&&(w[w.length-1][1]=E))}b()})()}else w.push([0,a.length-1]),b();function b(){if(w.length){const A=w.map(k=>a.substring(k[0],k[1]+1)).join(`
`);e.getFontsForString(A,{lang:l||void 0,style:u,weight:f,dataUrl:d}).then(({fontUrls:k,chars:O})=>{const R=g.length;let I=0;w.forEach(E=>{for(let B=0,U=E[1]-E[0];B<=U;B++)p[E[0]+B]=O[I++]+R;I++});let D=0;k.forEach((E,B)=>{s(E,U=>{g[B+R]=U,++D===k.length&&C()})})})}else C()}function C(){o({chars:p,fonts:g})}function M(A,k){for(let O=0;O<k.length;O++){const[R,I=R]=k[O];if(R<=A&&A<=I)return!0}return!1}}}const bAe=bv({name:"FontResolver",dependencies:[_Ae,yAe,wAe],init(r,e,t){return r(e,t())}});function SAe(r,e){const n=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i="[^\\S\\u00A0]",s=new RegExp(`${i}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a({text:g,lang:_,fonts:w,style:b,weight:C,preResolvedFonts:M,unicodeFontsURL:A},k){const O=({chars:R,fonts:I})=>{let D,E;const B=[];for(let U=0;U<R.length;U++)R[U]!==E?(E=R[U],B.push(D={start:U,end:U,fontObj:I[R[U]]})):D.end=U;k(B)};M?O(M):r(g,O,{lang:_,fonts:w,style:b,weight:C,unicodeFontsURL:A})}function o({text:g="",font:_,lang:w,sdfGlyphSize:b=64,fontSize:C=400,fontWeight:M=1,fontStyle:A="normal",letterSpacing:k=0,lineHeight:O="normal",maxWidth:R=1/0,direction:I,textAlign:D="left",textIndent:E=0,whiteSpace:B="normal",overflowWrap:U="normal",anchorX:V=0,anchorY:X=0,metricsOnly:te=!1,unicodeFontsURL:ee,preResolvedFonts:ue=null,includeCaretPositions:ne=!1,chunkedBoundsSize:oe=8192,colorRanges:q=null},J){const ie=f(),he={fontLoad:0,typesetting:0};g.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),g=g.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),C=+C,k=+k,R=+R,O=O||"normal",E=+E,a({text:g,lang:w,style:A,weight:M,fonts:typeof _=="string"?[{src:_}]:_,unicodeFontsURL:ee,preResolvedFonts:ue},$=>{he.fontLoad=f()-ie;const ge=isFinite(R);let pe=null,we=null,ke=null,Pe=null,je=null,Ke=null,Ie=null,Ge=null,ce=0,_t=0,_e=B!=="nowrap";const Ne=new Map,Ce=f();let He=E,Ee=0,Z=new d;const W=[Z];$.forEach($e=>{const{fontObj:it}=$e,{ascender:pt,descender:Ft,unitsPerEm:Le,lineGap:at,capHeight:vt,xHeight:qe}=it;let et=Ne.get(it);if(!et){const Oe=C/Le,Ye=O==="normal"?(pt-Ft+at)*Oe:O*C,yt=(Ye-(pt-Ft)*Oe)/2,Lt=Math.min(Ye,(pt-Ft)*Oe),xt=(pt+Ft)/2*Oe+Lt/2;et={index:Ne.size,src:it.src,fontObj:it,fontSizeMult:Oe,unitsPerEm:Le,ascender:pt*Oe,descender:Ft*Oe,capHeight:vt*Oe,xHeight:qe*Oe,lineHeight:Ye,baseline:-yt-pt*Oe,caretTop:xt,caretBottom:xt-Lt},Ne.set(it,et)}const{fontSizeMult:Me}=et,tt=g.slice($e.start,$e.end+1);let Tt,Ae;it.forEachGlyph(tt,C,k,(Oe,Ye,yt,Lt)=>{Ye+=Ee,Lt+=$e.start,Tt=Ye,Ae=Oe;const xt=g.charAt(Lt),Yt=Oe.advanceWidth*Me,on=Z.count;let Zt;if("isEmpty"in Oe||(Oe.isWhitespace=!!xt&&new RegExp(i).test(xt),Oe.canBreakAfter=!!xt&&s.test(xt),Oe.isEmpty=Oe.xMin===Oe.xMax||Oe.yMin===Oe.yMax||n.test(xt)),!Oe.isWhitespace&&!Oe.isEmpty&&_t++,_e&&ge&&!Oe.isWhitespace&&Ye+Yt+He>R&&on){if(Z.glyphAt(on-1).glyphObj.canBreakAfter)Zt=new d,He=-Ye;else for(let Xe=on;Xe--;)if(Xe===0&&U==="break-word"){Zt=new d,He=-Ye;break}else if(Z.glyphAt(Xe).glyphObj.canBreakAfter){Zt=Z.splitAt(Xe+1);const ot=Zt.glyphAt(0).x;He-=ot;for(let Dt=Zt.count;Dt--;)Zt.glyphAt(Dt).x-=ot;break}Zt&&(Z.isSoftWrapped=!0,Z=Zt,W.push(Z),ce=R)}let qt=Z.glyphAt(Z.count);qt.glyphObj=Oe,qt.x=Ye+He,qt.y=yt,qt.width=Yt,qt.charIndex=Lt,qt.fontData=et,xt===`
`&&(Z=new d,W.push(Z),He=-(Ye+Yt+k*C)+E)}),Ee=Tt+Ae.advanceWidth*Me+k*C});let re=0;W.forEach($e=>{let it=!0;for(let pt=$e.count;pt--;){const Ft=$e.glyphAt(pt);it&&!Ft.glyphObj.isWhitespace&&($e.width=Ft.x+Ft.width,$e.width>ce&&(ce=$e.width),it=!1);let{lineHeight:Le,capHeight:at,xHeight:vt,baseline:qe}=Ft.fontData;Le>$e.lineHeight&&($e.lineHeight=Le);const et=qe-$e.baseline;et<0&&($e.baseline+=et,$e.cap+=et,$e.ex+=et),$e.cap=Math.max($e.cap,$e.baseline+at),$e.ex=Math.max($e.ex,$e.baseline+vt)}$e.baseline-=re,$e.cap-=re,$e.ex-=re,re+=$e.lineHeight});let be=0,ve=0;if(V&&(typeof V=="number"?be=-V:typeof V=="string"&&(be=-ce*(V==="left"?0:V==="center"?.5:V==="right"?1:c(V)))),X&&(typeof X=="number"?ve=-X:typeof X=="string"&&(ve=X==="top"?0:X==="top-baseline"?-W[0].baseline:X==="top-cap"?-W[0].cap:X==="top-ex"?-W[0].ex:X==="middle"?re/2:X==="bottom"?re:X==="bottom-baseline"?-W[W.length-1].baseline:c(X)*re)),!te){const $e=e.getEmbeddingLevels(g,I);pe=new Uint16Array(_t),we=new Uint8Array(_t),ke=new Float32Array(_t*2),Pe={},Ie=[1/0,1/0,-1/0,-1/0],Ge=[],ne&&(Ke=new Float32Array(g.length*4)),q&&(je=new Uint8Array(_t*3));let it=0,pt=-1,Ft=-1,Le,at;if(W.forEach((vt,qe)=>{let{count:et,width:Me}=vt;if(et>0){let tt=0;for(let Lt=et;Lt--&&vt.glyphAt(Lt).glyphObj.isWhitespace;)tt++;let Tt=0,Ae=0;if(D==="center")Tt=(ce-Me)/2;else if(D==="right")Tt=ce-Me;else if(D==="justify"&&vt.isSoftWrapped){let Lt=0;for(let xt=et-tt;xt--;)vt.glyphAt(xt).glyphObj.isWhitespace&&Lt++;Ae=(ce-Me)/Lt}if(Ae||Tt){let Lt=0;for(let xt=0;xt<et;xt++){let Yt=vt.glyphAt(xt);const on=Yt.glyphObj;Yt.x+=Tt+Lt,Ae!==0&&on.isWhitespace&&xt<et-tt&&(Lt+=Ae,Yt.width+=Ae)}}const Oe=e.getReorderSegments(g,$e,vt.glyphAt(0).charIndex,vt.glyphAt(vt.count-1).charIndex);for(let Lt=0;Lt<Oe.length;Lt++){const[xt,Yt]=Oe[Lt];let on=1/0,Zt=-1/0;for(let qt=0;qt<et;qt++)if(vt.glyphAt(qt).charIndex>=xt){let Xe=qt,ot=qt;for(;ot<et;ot++){let Dt=vt.glyphAt(ot);if(Dt.charIndex>Yt)break;ot<et-tt&&(on=Math.min(on,Dt.x),Zt=Math.max(Zt,Dt.x+Dt.width))}for(let Dt=Xe;Dt<ot;Dt++){const nn=vt.glyphAt(Dt);nn.x=Zt-(nn.x+nn.width-on)}break}}let Ye;const yt=Lt=>Ye=Lt;for(let Lt=0;Lt<et;Lt++){const xt=vt.glyphAt(Lt);Ye=xt.glyphObj;const Yt=Ye.index,on=$e.levels[xt.charIndex]&1;if(on){const Zt=e.getMirroredCharacter(g[xt.charIndex]);Zt&&xt.fontData.fontObj.forEachGlyph(Zt,0,0,yt)}if(ne){const{charIndex:Zt,fontData:qt}=xt,Xe=xt.x+be,ot=xt.x+xt.width+be;Ke[Zt*4]=on?ot:Xe,Ke[Zt*4+1]=on?Xe:ot,Ke[Zt*4+2]=vt.baseline+qt.caretBottom+ve,Ke[Zt*4+3]=vt.baseline+qt.caretTop+ve;const Dt=Zt-pt;Dt>1&&u(Ke,pt,Dt),pt=Zt}if(q){const{charIndex:Zt}=xt;for(;Zt>Ft;)Ft++,q.hasOwnProperty(Ft)&&(at=q[Ft])}if(!Ye.isWhitespace&&!Ye.isEmpty){const Zt=it++,{fontSizeMult:qt,src:Xe,index:ot}=xt.fontData,Dt=Pe[Xe]||(Pe[Xe]={});Dt[Yt]||(Dt[Yt]={path:Ye.path,pathBounds:[Ye.xMin,Ye.yMin,Ye.xMax,Ye.yMax]});const nn=xt.x+be,Fn=xt.y+vt.baseline+ve;ke[Zt*2]=nn,ke[Zt*2+1]=Fn;const Or=nn+Ye.xMin*qt,Yn=Fn+Ye.yMin*qt,sr=nn+Ye.xMax*qt,xn=Fn+Ye.yMax*qt;Or<Ie[0]&&(Ie[0]=Or),Yn<Ie[1]&&(Ie[1]=Yn),sr>Ie[2]&&(Ie[2]=sr),xn>Ie[3]&&(Ie[3]=xn),Zt%oe===0&&(Le={start:Zt,end:Zt,rect:[1/0,1/0,-1/0,-1/0]},Ge.push(Le)),Le.end++;const ni=Le.rect;if(Or<ni[0]&&(ni[0]=Or),Yn<ni[1]&&(ni[1]=Yn),sr>ni[2]&&(ni[2]=sr),xn>ni[3]&&(ni[3]=xn),pe[Zt]=Yt,we[Zt]=ot,q){const Ii=Zt*3;je[Ii]=at>>16&255,je[Ii+1]=at>>8&255,je[Ii+2]=at&255}}}}}),Ke){const vt=g.length-pt;vt>1&&u(Ke,pt,vt)}}const Je=[];Ne.forEach(({index:$e,src:it,unitsPerEm:pt,ascender:Ft,descender:Le,lineHeight:at,capHeight:vt,xHeight:qe})=>{Je[$e]={src:it,unitsPerEm:pt,ascender:Ft,descender:Le,lineHeight:at,capHeight:vt,xHeight:qe}}),he.typesetting=f()-Ce,J({glyphIds:pe,glyphFontIndices:we,glyphPositions:ke,glyphData:Pe,fontData:Je,caretPositions:Ke,glyphColors:je,chunkedBounds:Ge,fontSize:C,topBaseline:ve+W[0].baseline,blockBounds:[be,ve-re,be+ce,ve],visibleBounds:Ie,timings:he})})}function l(g,_){o({...g,metricsOnly:!0},w=>{const[b,C,M,A]=w.blockBounds;_({width:M-b,height:A-C})})}function c(g){let _=g.match(/^([\d.]+)%$/),w=_?parseFloat(_[1]):NaN;return isNaN(w)?0:w/100}function u(g,_,w){const b=g[_*4],C=g[_*4+1],M=g[_*4+2],A=g[_*4+3],k=(C-b)/w;for(let O=0;O<w;O++){const R=(_+O)*4;g[R]=b+k*O,g[R+1]=b+k*(O+1),g[R+2]=M,g[R+3]=A}}function f(){return(self.performance||Date).now()}function d(){this.data=[]}const p=["glyphObj","x","y","width","charIndex","fontData"];return d.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/p.length)},glyphAt(g){let _=d.flyweight;return _.data=this.data,_.index=g,_},splitAt(g){let _=new d;return _.data=this.data.splice(g*p.length),_}},d.flyweight=p.reduce((g,_,w,b)=>(Object.defineProperty(g,_,{get(){return this.data[this.index*p.length+w]},set(C){this.data[this.index*p.length+w]=C}}),g),{data:null,index:0}),{typeset:o,measure:l}}const km=()=>(self.performance||Date).now(),bT=lX();let Sj;function xAe(r,e,t,n,i,s,a,o,l,c,u=!0){return u?MAe(r,e,t,n,i,s,a,o,l,c).then(null,f=>(Sj||(console.warn("WebGL SDF generation failed, falling back to JS",f),Sj=!0),Cj(r,e,t,n,i,s,a,o,l,c))):Cj(r,e,t,n,i,s,a,o,l,c)}const Dx=[],CAe=5;let B3=0;function uX(){const r=km();for(;Dx.length&&km()-r<CAe;)Dx.shift()();B3=Dx.length?setTimeout(uX,0):0}const MAe=(...r)=>new Promise((e,t)=>{Dx.push(()=>{const n=km();try{bT.webgl.generateIntoCanvas(...r),e({timing:km()-n})}catch(i){t(i)}}),B3||(B3=setTimeout(uX,0))}),AAe=4,TAe=2e3,xj={};let EAe=0;function Cj(r,e,t,n,i,s,a,o,l,c){const u="TroikaTextSDFGenerator_JS_"+EAe++%AAe;let f=xj[u];return f||(f=xj[u]={workerModule:bv({name:u,workerId:u,dependencies:[lX,km],init(d,p){const g=d().javascript.generate;return function(..._){const w=p();return{textureData:g(..._),timing:p()-w}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(r,e,t,n,i,s).then(({textureData:d,timing:p})=>{const g=km(),_=new Uint8Array(d.length*4);for(let w=0;w<d.length;w++)_[w*4+c]=d[w];return bT.webglUtils.renderImageData(a,_,o,l,r,e,1<<3-c),p+=km()-g,--f.requests===0&&(f.idleTimer=setTimeout(()=>{sAe(u)},TAe)),{timing:p}})}function IAe(r){r._warm||(bT.webgl.isSupported(r),r._warm=!0)}const LAe=bT.webglUtils.resizeWebGLCanvasWithoutClearing,ew={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},NAe=new Kt;function b0(){return(self.performance||Date).now()}const Mj=Object.create(null);function fX(r,e){r=RAe({},r);const t=b0(),n=[];if(r.font&&n.push({label:"user",src:PAe(r.font)}),r.font=n,r.text=""+r.text,r.sdfGlyphSize=r.sdfGlyphSize||ew.sdfGlyphSize,r.unicodeFontsURL=r.unicodeFontsURL||ew.unicodeFontsURL,r.colorRanges!=null){let d={};for(let p in r.colorRanges)if(r.colorRanges.hasOwnProperty(p)){let g=r.colorRanges[p];typeof g!="number"&&(g=NAe.set(g).getHex()),d[p]=g}r.colorRanges=d}Object.freeze(r);const{textureWidth:i,sdfExponent:s}=ew,{sdfGlyphSize:a}=r,o=i/a*4;let l=Mj[a];if(!l){const d=document.createElement("canvas");d.width=i,d.height=a*256/o,l=Mj[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:d,sdfTexture:new Ur(d,void 0,void 0,void 0,dr,dr),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,DAe(l)}const{sdfTexture:c,sdfCanvas:u}=l;pX(r).then(d=>{const{glyphIds:p,glyphFontIndices:g,fontData:_,glyphPositions:w,fontSize:b,timings:C}=d,M=[],A=new Float32Array(p.length*4);let k=0,O=0;const R=b0(),I=_.map(V=>{let X=l.glyphsByFont.get(V.src);return X||l.glyphsByFont.set(V.src,X=new Map),X});p.forEach((V,X)=>{const te=g[X],{src:ee,unitsPerEm:ue}=_[te];let ne=I[te].get(V);if(!ne){const{path:he,pathBounds:$}=d.glyphData[ee][V],ge=Math.max($[2]-$[0],$[3]-$[1])/a*(ew.sdfMargin*a+.5),pe=l.glyphCount++,we=[$[0]-ge,$[1]-ge,$[2]+ge,$[3]+ge];I[te].set(V,ne={path:he,atlasIndex:pe,sdfViewBox:we}),M.push(ne)}const{sdfViewBox:oe}=ne,q=w[O++],J=w[O++],ie=b/ue;A[k++]=q+oe[0]*ie,A[k++]=J+oe[1]*ie,A[k++]=q+oe[2]*ie,A[k++]=J+oe[3]*ie,p[X]=ne.atlasIndex}),C.quads=(C.quads||0)+(b0()-R);const D=b0();C.sdf={};const E=u.height,B=Math.ceil(l.glyphCount/o),U=Math.pow(2,Math.ceil(Math.log2(B*a)));U>E&&(console.info(`Increasing SDF texture size ${E}->${U}`),LAe(u,i,U),c.dispose()),Promise.all(M.map(V=>dX(V,l,r.gpuAccelerateSDF).then(({timing:X})=>{C.sdf[V.atlasIndex]=X}))).then(()=>{M.length&&!l.contextLost&&(hX(l),c.needsUpdate=!0),C.sdfTotal=b0()-D,C.total=b0()-t,e(Object.freeze({parameters:r,sdfTexture:c,sdfGlyphSize:a,sdfExponent:s,glyphBounds:A,glyphAtlasIndices:p,glyphColors:d.glyphColors,caretPositions:d.caretPositions,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))})}),Promise.resolve().then(()=>{l.contextLost||IAe(u)})}function dX({path:r,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:n,sdfCanvas:i,contextLost:s},a){if(s)return Promise.resolve({timing:-1});const{textureWidth:o,sdfExponent:l}=ew,c=Math.max(t[2]-t[0],t[3]-t[1]),u=Math.floor(e/4),f=u%(o/n)*n,d=Math.floor(u/(o/n))*n,p=e%4;return xAe(n,n,r,t,c,l,i,f,d,p,a)}function DAe(r){const e=r.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),r.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),r.contextLost=!1;const n=[];r.glyphsByFont.forEach(i=>{i.forEach(s=>{n.push(dX(s,r,!0))})}),Promise.all(n).then(()=>{hX(r),r.sdfTexture.needsUpdate=!0})})}function kAe({font:r,characters:e,sdfGlyphSize:t},n){let i=Array.isArray(e)?e.join(`
`):""+e;fX({font:r,sdfGlyphSize:t,text:i},n)}function RAe(r,e){for(let t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}let xS;function PAe(r){return xS||(xS=typeof document>"u"?{}:document.createElement("a")),xS.href=r,xS.href}function hX(r){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=r,{width:n,height:i}=e,s=r.sdfCanvas.getContext("webgl");let a=t.image.data;(!a||a.length!==n*i*4)&&(a=new Uint8Array(n*i*4),t.image={width:n,height:i,data:a},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,n,i,s.RGBA,s.UNSIGNED_BYTE,a)}}const OAe=bv({name:"Typesetter",dependencies:[SAe,bAe,oAe],init(r,e,t){return r(e,t())}}),pX=bv({name:"Typesetter",dependencies:[OAe],init(r){return function(e){return new Promise(t=>{r.typeset(e,t)})}},getTransferables(r){const e=[];for(let t in r)r[t]&&r[t].buffer&&e.push(r[t].buffer);return e}});pX.onMainThread;const Aj={};function FAe(r){let e=Aj[r];return e||(e=Aj[r]=new Kc(1,1,r,r).translate(.5,.5,0)),e}const BAe="aTroikaGlyphBounds",Tj="aTroikaGlyphIndex",UAe="aTroikaGlyphColor";class jAe extends wR{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new na,this.boundingBox=new ta}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=FAe(e);["position","normal","uv"].forEach(n=>{this.attributes[n]=t.attributes[n].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,i,s){this.updateAttributeData(BAe,e,4),this.updateAttributeData(Tj,t,1),this.updateAttributeData(UAe,s,3),this._blockBounds=n,this._chunkedBounds=i,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:i,floor:s,min:a,max:o,sin:l,cos:c}=Math,u=i/2,f=i*2,d=Math.abs(t),p=e[0]/d,g=e[2]/d,_=s((p+u)/f)!==s((g+u)/f)?-d:a(l(p)*d,l(g)*d),w=s((p-u)/f)!==s((g-u)/f)?d:o(l(p)*d,l(g)*d),b=s((p+i)/f)!==s((g+i)/f)?d*2:o(d-c(p)*d,d-c(g)*d);n.min.set(_,e[1],t<0?-b:0),n.max.set(w,e[3],t<0?0:b)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(Tj).count,n=this._chunkedBounds;if(n)for(let i=n.length;i--;){t=n[i].end;let s=n[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,n){const i=this.getAttribute(e);t?i&&i.array.length===t.length?(i.array.set(t),i.needsUpdate=!0):(this.setAttribute(e,new Fh(t,n)),delete this._maxInstanceCount,this.dispose()):i&&this.deleteAttribute(e)}}const zAe=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,VAe=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,GAe=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,HAe=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function WAe(r){const e=F3(r,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Mt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Cr(0,0,0,0)},uTroikaClipRect:{value:new Cr(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Mt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Kt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Xn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:zAe,vertexTransform:VAe,fragmentDefs:GAe,fragmentColorTransform:HAe,customRewriter({vertexShader:t,fragmentShader:n}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(n)&&(n=n.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(cX,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:n}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const PR=new mo({color:16777215,side:ll,transparent:!0}),Ej=8421504,Ij=new Nn,CS=new ye,yI=new ye,Fy=[],YAe=new ye,wI="+x+y";function Lj(r){return Array.isArray(r)?r[0]:r}let mX=()=>{const r=new si(new Kc(1,1),PR);return mX=()=>r,r},gX=()=>{const r=new si(new Kc(1,1,32,1),PR);return gX=()=>r,r};const JAe={type:"syncstart"},XAe={type:"synccomplete"},vX=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],QAe=vX.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let yX=class extends si{constructor(){const e=new jAe;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Ej,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=wI,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(JAe),fX({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(i=>i&&i())})),this.dispatchEvent(XAe),e&&e()})))}onBeforeRender(e,t,n,i,s,a){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return WAe(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=PR.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),this.hasOutline()){let n=e._outlineMtl;return n||(n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),n.dispose()})),[n,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return Lj(this.material).getDepthMaterial()}get customDistanceMaterial(){return Lj(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:o,blockBounds:l}=i;n.uTroikaSDFTexture.value=o,n.uTroikaSDFTextureSize.value.set(o.image.width,o.image.height),n.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,n.uTroikaSDFExponent.value=i.sdfExponent,n.uTroikaTotalBounds.value.fromArray(l),n.uTroikaUseGlyphColors.value=!t&&!!i.glyphColors;let c=0,u=0,f=0,d,p,g,_=0,w=0;if(t){let{outlineWidth:C,outlineOffsetX:M,outlineOffsetY:A,outlineBlur:k,outlineOpacity:O}=this;c=this._parsePercent(C)||0,u=Math.max(0,this._parsePercent(k)||0),d=O,_=this._parsePercent(M)||0,w=this._parsePercent(A)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(g=this.strokeColor,n.uTroikaStrokeColor.value.set(g??Ej),p=this.strokeOpacity,p==null&&(p=1)),d=this.fillOpacity;n.uTroikaEdgeOffset.value=c,n.uTroikaPositionOffset.value.set(_,w),n.uTroikaBlurRadius.value=u,n.uTroikaStrokeWidth.value=f,n.uTroikaStrokeOpacity.value=p,n.uTroikaFillOpacity.value=d??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let b=this.clipRect;if(b&&Array.isArray(b)&&b.length===4)n.uTroikaClipRect.value.fromArray(b);else{const C=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(l[0]-C,l[1]-C,l[2]+C,l[3]+C)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const o=e.hasOwnProperty("color")?e.color:e.color=new Kt;(s!==o._input||typeof s=="object")&&o.set(o._input=s)}let a=this.orientation||wI;if(a!==e._orientation){let o=n.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let l=a!==wI&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,f,d]=l;CS.set(0,0,0)[u]=c==="-"?1:-1,yI.set(0,0,0)[d]=f==="-"?-1:1,Ij.lookAt(YAe,CS.cross(yI),yI),o.setFromMatrix4(Ij)}else o.identity();e._orientation=a}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Mt){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new Mt){return CS.copy(e),this.localPositionToTextCoords(this.worldToLocal(CS),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:i}=this;if(n){const s=n.blockBounds,a=i?gX():mX(),o=a.geometry,{position:l,uv:c}=o.attributes;for(let u=0;u<c.count;u++){let f=s[0]+c.getX(u)*(s[2]-s[0]);const d=s[1]+c.getY(u)*(s[3]-s[1]);let p=0;i&&(p=i-Math.cos(f/i)*i,f=Math.sin(f/i)*i),l.setXYZ(u,f,d,p)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,Fy.length=0,a.raycast(e,Fy);for(let u=0;u<Fy.length;u++)Fy[u].object=this,t.push(Fy[u])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,QAe.forEach(n=>{this[n]=e[n]}),this}clone(){return new this.constructor().copy(this)}};vX.forEach(r=>{const e="_private_"+r;Object.defineProperty(yX.prototype,r,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new ta;new Kt;const KAe=P.forwardRef(({sdfGlyphSize:r=64,anchorX:e="center",anchorY:t="middle",font:n,fontSize:i=1,children:s,characters:a,onSync:o,...l},c)=>{const u=Ds(({invalidate:g})=>g),[f]=P.useState(()=>new yX),[d,p]=P.useMemo(()=>{const g=[];let _="";return P.Children.forEach(s,w=>{typeof w=="string"||typeof w=="number"?_+=w:g.push(w)}),[g,_]},[s]);return RJ(()=>new Promise(g=>kAe({font:n,characters:a},g)),["troika-text",n,a]),P.useLayoutEffect(()=>void f.sync(()=>{u(),o&&o(f)})),P.useEffect(()=>()=>f.dispose(),[f]),P.createElement("primitive",Z1({object:f,ref:c,font:n,text:p,anchorX:e,anchorY:t,fontSize:i,sdfGlyphSize:r},l),d)});let MS=null,wX="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function _X(r=!0,e=!0,t){return n=>{t&&t(n),r&&(MS||(MS=new $Me),MS.setDecoderPath(typeof r=="string"?r:wX),n.setDRACOLoader(MS)),e&&n.setMeshoptDecoder(typeof gI=="function"?gI():gI)}}const ST=(r,e,t,n)=>nd(RR,r,_X(e,t,n));ST.preload=(r,e,t,n)=>nd.preload(RR,r,_X(e,t,n));ST.clear=r=>nd.clear(RR,r);ST.setDecoderPath=r=>{wX=r};function qAe(r,e,t){const n=Ds(d=>d.size),i=Ds(d=>d.viewport),s=typeof r=="number"?r:n.width*i.dpr,a=n.height*i.dpr,o=(typeof r=="number"?t:r)||{},{samples:l=0,depth:c,...u}=o,f=P.useMemo(()=>{const d=new pl(s,a,{minFilter:dr,magFilter:dr,type:ks,...u});return c&&(d.depthTexture=new tT(s,a,Mi)),d.samples=l,d},[]);return P.useLayoutEffect(()=>{f.setSize(s,a),l&&(f.samples=l)},[l,f,s,a]),P.useEffect(()=>()=>f.dispose(),[]),f}const ZAe=r=>typeof r=="function",$Ae=P.forwardRef(({envMap:r,resolution:e=256,frames:t=1/0,makeDefault:n,children:i,...s},a)=>{const o=Ds(({set:w})=>w),l=Ds(({camera:w})=>w),c=Ds(({size:w})=>w),u=P.useRef(null);P.useImperativeHandle(a,()=>u.current,[]);const f=P.useRef(null),d=qAe(e);P.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),P.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let p=0,g=null;const _=ZAe(i);return _T(w=>{_&&(t===1/0||p<t)&&(f.current.visible=!1,w.gl.setRenderTarget(d),g=w.scene.background,r&&(w.scene.background=r),w.gl.render(w.scene,u.current),w.scene.background=g,w.gl.setRenderTarget(null),f.current.visible=!0,p++)}),P.useLayoutEffect(()=>{if(n){const w=l;return o(()=>({camera:u.current})),()=>o(()=>({camera:w}))}},[u,n,o]),P.createElement(P.Fragment,null,P.createElement("perspectiveCamera",Z1({ref:u},s),!_&&i),P.createElement("group",{ref:f},_&&i(d.texture)))}),eTe=P.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:a,onStart:o,onEnd:l,...c},u)=>{const f=Ds(O=>O.invalidate),d=Ds(O=>O.camera),p=Ds(O=>O.gl),g=Ds(O=>O.events),_=Ds(O=>O.setEvents),w=Ds(O=>O.set),b=Ds(O=>O.get),C=Ds(O=>O.performance),M=e||d,A=n||g.connected||p.domElement,k=P.useMemo(()=>new mMe(M),[M]);return _T(()=>{k.enabled&&k.update()},-1),P.useEffect(()=>(s&&k.connect(s===!0?A:s),k.connect(A),()=>void k.dispose()),[s,A,t,k,f]),P.useEffect(()=>{const O=D=>{f(),t&&C.regress(),a&&a(D)},R=D=>{o&&o(D)},I=D=>{l&&l(D)};return k.addEventListener("change",O),k.addEventListener("start",R),k.addEventListener("end",I),()=>{k.removeEventListener("start",R),k.removeEventListener("end",I),k.removeEventListener("change",O)}},[a,o,l,k,f,_]),P.useEffect(()=>{if(r){const O=b().controls;return w({controls:k}),()=>w({controls:O})}},[r,k]),P.createElement("primitive",Z1({ref:u,object:k,enableDamping:i},c))}),tTe=3e3,nTe=3001,bX=(r,e,t)=>{let n;switch(r){case jo:n=new Uint8ClampedArray(e*t*4);break;case ks:n=new Uint16Array(e*t*4);break;case Pu:n=new Uint32Array(e*t*4);break;case zA:n=new Int8Array(e*t*4);break;case VA:n=new Int16Array(e*t*4);break;case tb:n=new Int32Array(e*t*4);break;case Mi:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let AS;const rTe=(r,e,t,n)=>{if(AS!==void 0)return AS;const i=new pl(1,1,n);e.setRenderTarget(i);const s=new si(new Kc,new mo({color:16777215}));e.render(s,t),e.setRenderTarget(null);const a=bX(r,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,a),i.dispose(),s.geometry.dispose(),s.material.dispose(),AS=a[0]!==0,AS};class OR{constructor(e){var t,n,i,s,a,o,l,c,u,f,d,p,g,_,w,b;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(M){throw this._renderer.setRenderTarget(null),M}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const C={format:os,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter)!==void 0?(o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter:dr,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:dr,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS:as,wrapT:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT)!==void 0?(_=e.renderTargetOptions)===null||_===void 0?void 0:_.wrapT:as};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=OR.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new ob,this._camera=new Iu,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!rTe(this._type,this._renderer,this._camera,C)){let M;switch(this._type){case ks:M=this._renderer.extensions.has("EXT_color_buffer_float")?Mi:void 0;break}M!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Mi}`),this._type=M):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new si(new Kc,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new pl(this.width,this.height,C),this._renderTarget.texture.mapping=((w=e.renderTargetOptions)===null||w===void 0?void 0:w.mapping)!==void 0?(b=e.renderTargetOptions)===null||b===void 0?void 0:b.mapping:kh}static instantiateRenderer(){const e=new ER;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=bX(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Uc(this.toArray(),this.width,this.height,os,this._type,(e==null?void 0:e.mapping)||kh,(e==null?void 0:e.wrapS)||as,(e==null?void 0:e.wrapT)||as,(e==null?void 0:e.magFilter)||dr,(e==null?void 0:e.minFilter)||dr,(e==null?void 0:e.anisotropy)||1,Ou);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof zo&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Ur&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Ur&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const iTe=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,sTe=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class aTe extends zo{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:i,gainMapMax:s,maxDisplayBoost:a,hdrCapacityMin:o,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:iTe,fragmentShader:sTe,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new ye(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new ye().fromArray(t)},offsetSdr:{value:new ye().fromArray(n)},gainMapMin:{value:new ye().fromArray(i)},gainMapMax:{value:new ye().fromArray(s)},weightFactor:{value:(Math.log2(a)-o)/(l-o)}},blending:Au,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=o,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class SX extends Error{}class xX extends Error{}const By=(r,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(r);if(n)return n[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(r);if(i){const s=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(a=>a.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},oTe=r=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(r):e=r.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),i=e.slice(t,n+10);try{const s=By(i,"hdrgm:GainMapMin","0"),a=By(i,"hdrgm:GainMapMax"),o=By(i,"hdrgm:Gamma","1"),l=By(i,"hdrgm:OffsetSDR","0.015625"),c=By(i,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),f=u?u[1]:"0",d=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!d)throw new Error("Incomplete gainmap metadata");const p=d[1];return{gainMapMin:Array.isArray(s)?s.map(g=>parseFloat(g)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(a)?a.map(g=>parseFloat(g)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(o)?o.map(g=>parseFloat(g)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(l)?l.map(g=>parseFloat(g)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map(g=>parseFloat(g)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(f),hdrCapacityMax:parseFloat(p)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class lTe{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const a=s.byteLength;let o=2,l=0,c;for(;o<a;){if(++l>250){n(new Error(`Found no marker after ${l} loops `));return}if(s.getUint8(o)!==255){n(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${s.getUint8(o).toString(16)}`));return}if(c=s.getUint8(o+1),i&&console.log(`Marker: ${c.toString(16)}`),c===226){i&&console.log("Found APP2 marker (0xffe2)");const u=o+4;if(s.getUint32(u)===1297106432){const f=u+4;let d;if(s.getUint16(f)===18761)d=!1;else if(s.getUint16(f)===19789)d=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(f+2,!d)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const p=s.getUint32(f+4,!d);if(p<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const g=f+p,_=s.getUint16(g,!d),w=g+2;let b=0;for(let k=w;k<w+12*_;k+=12)s.getUint16(k,!d)===45057&&(b=s.getUint32(k+8,!d));const M=g+2+_*12+4,A=[];for(let k=M;k<M+b*16;k+=16){const O={MPType:s.getUint32(k,!d),size:s.getUint32(k+4,!d),dataOffset:s.getUint32(k+8,!d),dependantImages:s.getUint32(k+12,!d),start:-1,end:-1,isFII:!1};O.dataOffset?(O.start=f+O.dataOffset,O.isFII=!1):(O.start=0,O.isFII=!0),O.end=O.start+O.size,A.push(O)}if(this.options.extractNonFII&&A.length){const k=new Blob([s]),O=[];for(const R of A){if(R.isFII&&!this.options.extractFII)continue;const I=k.slice(R.start,R.end+1,"image/jpeg");O.push(I)}t(O)}}}o+=2+s.getUint16(o+2)}})}}const cTe=async r=>{const e=oTe(r);if(!e)throw new xX("Gain map XMP metadata not found");const n=await new lTe({extractFII:!0,extractNonFII:!0}).extract(r);if(n.length!==2)throw new SX("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},Nj=r=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=i=>{t(i)},n.src=URL.createObjectURL(r)});class CX extends Sa{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new vT}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new aTe({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Ur,sdr:new Ur});return new OR({width:16,height:16,type:ks,colorSpace:Ou,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,i){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,a=new Blob([n],{type:"image/jpeg"});let o,l,c=!1;if(typeof createImageBitmap>"u"){const d=await Promise.all([s?Nj(s):Promise.resolve(void 0),Nj(a)]);l=d[0],o=d[1],c=!0}else{const d=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);l=d[0],o=d[1]}const u=new Ur(l||new ImageData(2,2),kh,as,as,dr,d1,os,jo,1,Ou);u.flipY=c,u.needsUpdate=!0;const f=new Ur(o,kh,as,as,dr,d1,os,jo,1,co);f.flipY=c,f.needsUpdate=!0,e.width=o.width,e.height=o.height,e.material.gainMap=u,e.material.sdr=f,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class uTe extends CX{load([e,t,n],i,s,a){const o=this.prepareQuadRenderer();let l,c,u;const f=async()=>{if(l&&c&&u){try{await this.render(o,u,l,c)}catch(D){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof a=="function"&&a(D),o.disposeOnDemandRenderer();return}typeof i=="function"&&i(o),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),o.disposeOnDemandRenderer()}};let d=!0,p=0,g=0,_=!0,w=0,b=0,C=!0,M=0,A=0;const k=()=>{if(typeof s=="function"){const D=p+w+M,E=g+b+A,B=d&&_&&C;s(new ProgressEvent("progress",{lengthComputable:B,loaded:E,total:D}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const O=new _a(this._internalLoadingManager);O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(e,async D=>{if(typeof D=="string")throw new Error("Invalid sdr buffer");l=D,await f()},D=>{d=D.lengthComputable,g=D.loaded,p=D.total,k()},D=>{this.manager.itemError(e),typeof a=="function"&&a(D)});const R=new _a(this._internalLoadingManager);R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(t,async D=>{if(typeof D=="string")throw new Error("Invalid gainmap buffer");c=D,await f()},D=>{_=D.lengthComputable,b=D.loaded,w=D.total,k()},D=>{this.manager.itemError(t),typeof a=="function"&&a(D)});const I=new _a(this._internalLoadingManager);return I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(n,async D=>{if(typeof D!="string")throw new Error("Invalid metadata string");u=JSON.parse(D),await f()},D=>{C=D.lengthComputable,A=D.loaded,M=D.total,k()},D=>{this.manager.itemError(n),typeof a=="function"&&a(D)}),o}}class fTe extends CX{load(e,t,n,i){const s=this.prepareQuadRenderer(),a=new _a(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(o);let c,u,f;try{const d=await cTe(l);c=d.sdr,u=d.gainMap,f=d.metadata}catch(d){if(d instanceof xX||d instanceof SX)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw d}try{await this.render(s,f,c,u)}catch(d){this.manager.itemError(e),typeof i=="function"&&i(d),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},n,o=>{this.manager.itemError(e),typeof i=="function"&&i(o)}),s}}const v_={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},MX="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",m1=r=>Array.isArray(r),FR=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function xT({files:r=FR,path:e="",preset:t=void 0,encoding:n=void 0,extensions:i}={}){let s=null,a=!1;t&&(BR(t),r=v_[t],e=MX),a=m1(r);const{extension:o,isCubemap:l}=UR(r);if(s=jR(o),!s)throw new Error("useEnvironment: Unrecognized file extension: "+r);const c=Ds(p=>p.gl);P.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function p(){nd.clear(s,a?[r]:r)}c.domElement.addEventListener("webglcontextlost",p,{once:!0})},[r,c.domElement]);const u=nd(s,a?[r]:r,p=>{(o==="webp"||o==="jpg"||o==="jpeg")&&p.setRenderer(c),p.setPath==null||p.setPath(e),i&&i(p)});let f=a?u[0]:u;if(o==="jpg"||o==="jpeg"||o==="webp"){var d;f=(d=f.renderTarget)==null?void 0:d.texture}return f.mapping=l?Ru:G1,"colorSpace"in f?f.colorSpace=n??l?"srgb":"srgb-linear":f.encoding=n??l?nTe:tTe,f}const dTe={files:FR,path:"",preset:void 0,extensions:void 0};xT.preload=r=>{const e={...dTe,...r};let{files:t,path:n=""}=e;const{preset:i,extensions:s}=e;i&&(BR(i),t=v_[i],n=MX);const{extension:a}=UR(t);if(a==="webp"||a==="jpg"||a==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=jR(a);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);nd.preload(o,m1(t)?[t]:t,l=>{l.setPath==null||l.setPath(n),s&&s(l)})};const hTe={files:FR,preset:void 0};xT.clear=r=>{const e={...hTe,...r};let{files:t}=e;const{preset:n}=e;n&&(BR(n),t=v_[n]);const{extension:i}=UR(t),s=jR(i);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);nd.clear(s,m1(t)?[t]:t)};function BR(r){if(!(r in v_))throw new Error("Preset must be one of: "+Object.keys(v_).join(", "))}function UR(r){var e;const t=m1(r)&&r.length===6,n=m1(r)&&r.length===3&&r.some(a=>a.endsWith("json")),i=m1(r)?r[0]:r;return{extension:t?"cube":n?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function jR(r){return r==="cube"?dJ:r==="hdr"?qMe:r==="exr"?ZMe:r==="jpg"||r==="jpeg"?fTe:r==="webp"?uTe:null}const pTe=r=>r.current&&r.current.isScene,mTe=r=>pTe(r)?r.current:r;function zR(r,e,t,n,i={}){var s,a,o,l;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const c=mTe(e||t),u=c.background,f=c.environment,d={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:(s=(a=c.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:(o=(l=c.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&o!==void 0?o:[0,0,0]};return r!=="only"&&(c.environment=n),r&&(c.background=n),sh(c,i),()=>{r!=="only"&&(c.environment=f),r&&(c.background=u),sh(c,d)}}function VR({scene:r,background:e=!1,map:t,...n}){const i=Ds(s=>s.scene);return P.useLayoutEffect(()=>{if(t)return zR(e,r,i,t,n)}),null}function AX({background:r=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:a,environmentRotation:o,...l}){const c=xT(l),u=Ds(f=>f.scene);return P.useLayoutEffect(()=>zR(r,e,u,c,{backgroundBlurriness:t??n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:a,environmentRotation:o})),P.useEffect(()=>()=>{c.dispose()},[c]),null}function gTe({children:r,near:e=.1,far:t=1e3,resolution:n=256,frames:i=1,map:s,background:a=!1,blur:o,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:d,scene:p,files:g,path:_,preset:w=void 0,extensions:b}){const C=Ds(I=>I.gl),M=Ds(I=>I.scene),A=P.useRef(null),[k]=P.useState(()=>new ob),O=P.useMemo(()=>{const I=new $k(n);return I.texture.type=ks,I},[n]);P.useEffect(()=>()=>{O.dispose()},[O]),P.useLayoutEffect(()=>{if(i===1){const I=C.autoClear;C.autoClear=!0,A.current.update(C,k),C.autoClear=I}return zR(a,p,M,O.texture,{backgroundBlurriness:o??l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:d})},[r,k,O.texture,p,M,a,i,C]);let R=1;return _T(()=>{if(i===1/0||R<i){const I=C.autoClear;C.autoClear=!0,A.current.update(C,k),C.autoClear=I,R++}}),P.createElement(P.Fragment,null,ECe(P.createElement(P.Fragment,null,r,P.createElement("cubeCamera",{ref:A,args:[e,t,O]}),g||w?P.createElement(AX,{background:!0,files:g,preset:w,path:_,extensions:b}):s?P.createElement(VR,{background:!0,map:s,extensions:b}):null),k))}function vTe(r){var e,t,n,i;const s=xT(r),a=r.map||s;P.useMemo(()=>OJ({GroundProjectedEnvImpl:oMe}),[]),P.useEffect(()=>()=>{s.dispose()},[s]);const o=P.useMemo(()=>[a],[a]),l=(e=r.ground)==null?void 0:e.height,c=(t=r.ground)==null?void 0:t.radius,u=(n=(i=r.ground)==null?void 0:i.scale)!==null&&n!==void 0?n:1e3;return P.createElement(P.Fragment,null,P.createElement(VR,Z1({},r,{map:a})),P.createElement("groundProjectedEnvImpl",{args:o,scale:u,height:l,radius:c}))}function yTe(r){return r.ground?P.createElement(vTe,r):r.map?P.createElement(VR,r):r.children?P.createElement(gTe,r):P.createElement(AX,r)}function wTe({modelPath:r,colors:e,materials:t,modelType:n,modelSettings:i,modelParts:s,selectedPart:a,setSelectedPart:o,textElements:l,selectedTextIndex:c,onTextSelect:u,logoElements:f,selectedLogoIndex:d,onLogoSelect:p,textures:g}){const{scene:_}=ST(r,!0),w=P.useRef(),[b,C]=P.useState({}),M=P.useRef([]),A=P.useRef([]);P.useEffect(()=>{M.current=l.map((D,E)=>M.current[E]||P.createRef())},[l.length]),P.useEffect(()=>{A.current=f.map((D,E)=>A.current[E]||P.createRef())},[f.length]),P.useEffect(()=>{const D={},E=new dM,B=[];return Object.entries(t).forEach(([U,V])=>{if(V){const X=new Promise(te=>{E.load(V,ee=>{D[U]=ee,te()})});B.push(X)}}),Promise.all(B).then(()=>{C(U=>({...U,...D}))}),()=>{Object.values(D).forEach(U=>{U&&U.dispose&&U.dispose()})}},[t]),P.useEffect(()=>{_&&_.traverse(D=>{D.isMesh&&(D.castShadow=!0,D.receiveShadow=!0,D.material&&(D.material.precision="highp",D.material.roughness=.7,D.material.envMapIntensity=1.5,D.material.map&&(D.material.map.anisotropy=16,D.material.map.minFilter=d1,D.material.map.magFilter=dr)))})},[_]);const k=P.useMemo(()=>D=>{if(D.stopPropagation(),D.object.isText){const U=l.findIndex((V,X)=>{var te;return((te=M.current[X])==null?void 0:te.current)===D.object});if(U!==-1){u(U);return}}if(D.object.isLogo){const U=f.findIndex((V,X)=>{var te;return((te=A.current[X])==null?void 0:te.current)===D.object});if(U!==-1){p(U);return}}const E=D.object.name.toLowerCase(),B=s[n].find(U=>E.includes(U)||U.includes(E))||s[n][0];o(B)},[l,f,u,p,s,n,o]);_T(()=>{if(!w.current)return;const{scale:D,position:E}=i[n];w.current.scale.set(D,D,D),w.current.position.set(...E),w.current.traverse(B=>{if(B.isMesh){const U=B.name.toLowerCase(),V=s[n].find(X=>U.includes(X)||X.includes(U))||s[n][0];B.material.color.set(e[V]||e.main||"#ffffff"),b[V]&&(B.material.map=b[V],B.material.map.anisotropy=16,B.material.map.minFilter=d1,B.material.map.magFilter=dr,B.material.needsUpdate=!0),g&&g[V]&&(B.material.map=g[V],B.material.map.anisotropy=16,B.material.map.minFilter=d1,B.material.map.magFilter=dr,B.material.needsUpdate=!0)}})});const O=P.useMemo(()=>f.map(D=>D.image?new dM().load(D.image):null),[f]),R=P.useMemo(()=>[...f].sort((E,B)=>{const U=E.zIndex!==void 0?E.zIndex:E.position[2]||0;return(B.zIndex!==void 0?B.zIndex:B.position[2]||0)-U}).map((E,B)=>{const U=f.findIndex(X=>X===E),V=O[U];return V?j("mesh",{position:E.position,rotation:E.rotation,onClick:X=>{X.stopPropagation(),p(U)},userData:{isLogo:!0},renderOrder:E.zIndex||0,children:[S("planeGeometry",{args:[E.size,E.size]}),S("meshBasicMaterial",{map:V,transparent:!0,opacity:d===U?.8:1,depthTest:!0,depthWrite:!1})]},`logo-${U}`):null}).filter(Boolean),[f,O,d,p]),I=P.useMemo(()=>[...l].sort((E,B)=>{const U=E.zIndex!==void 0?E.zIndex:E.position[2]||0;return(B.zIndex!==void 0?B.zIndex:B.position[2]||0)-U}).map((E,B)=>{const U=l.findIndex(V=>V===E);return j("group",{position:E.position,onClick:V=>{V.stopPropagation(),u(U)},renderOrder:E.zIndex||0,children:[S(KAe,{ref:M.current[U],color:E.color,fontSize:E.fontSize*.02,maxWidth:2,lineHeight:1.2,textAlign:E.textAlign||"center",anchorX:E.textAlign||"center",anchorY:"middle",fontWeight:E.fontWeight||"normal",fontStyle:E.fontStyle||"normal",renderOrder:E.zIndex||1,userData:{isText:!0,isSelected:U===c},"material-toneMapped":!1,"material-transparent":!0,"material-depthTest":!0,"material-depthWrite":!0,"material-opacity":.95,outlineWidth:U===c?.01:0,outlineColor:"#ffffff",children:E.text}),U===c&&j("mesh",{position:[0,0,.05],scale:[E.text.length*E.fontSize*8e-4,E.fontSize*.0015,.001],userData:{isDragHandle:!0},children:[S("planeGeometry",{}),S("meshBasicMaterial",{color:"#ffffff",transparent:!0,opacity:.2})]})]},`text-group-${U}`)}),[l,c,u]);return j("group",{children:[S("primitive",{ref:w,object:_,onClick:k}),I,R]})}const _Te=()=>j("mesh",{children:[S("sphereGeometry",{args:[1,16,16]}),S("meshStandardMaterial",{color:"#cccccc",wireframe:!0})]}),bTe=P.memo(wTe),TX=P.forwardRef(({modelKey:r,selectedModel:e,modelPath:t,colors:n,materials:i,modelSettings:s,modelParts:a,selectedPart:o,setSelectedPart:l,textElements:c,selectedTextIndex:u,onTextSelect:f,logoElements:d,selectedLogoIndex:p,onLogoSelect:g,textures:_,lighting:w},b)=>{const C=P.useRef(null);return P.useImperativeHandle(b,()=>({handleRotate:M=>{if(console.log("ModelViewer handleRotate called with direction:",M),!C.current){console.error("Camera ref is not available");return}const A=new ye().copy(C.current.position);M==="left"?(C.current.position.x=A.z,C.current.position.z=-A.x):M==="right"?(C.current.position.x=-A.z,C.current.position.z=A.x):M==="reset"&&C.current.position.set(0,0,10),C.current.lookAt(0,0,0)}}),[C]),j(YCe,{shadows:!0,className:"canvas",ref:b,dpr:[1,2],gl:{antialias:!0,preserveDrawingBuffer:!0,alpha:!0,powerPreference:"high-performance"},camera:{position:[0,0,10],fov:45},performance:{min:.5},children:[S($Ae,{makeDefault:!0,position:[0,0,10],ref:C}),S("ambientLight",{intensity:w.intensity}),S("directionalLight",{position:w.direction,intensity:w.intensity,castShadow:!0,"shadow-mapSize":[2048,2048]}),S(yTe,{preset:w.environment}),S(P.Suspense,{fallback:S(_Te,{}),children:S(bTe,{modelPath:t,colors:n,materials:i,modelType:e,modelSettings:s,modelParts:a,selectedPart:o,setSelectedPart:l,textElements:c,selectedTextIndex:u,onTextSelect:f,logoElements:d,selectedLogoIndex:p,onLogoSelect:g,textures:_},r)}),S(eTe,{enableZoom:!0,enableDamping:!0,dampingFactor:.25})]})});TX.displayName="ModelViewer";function Be(r,e,t){return(e=function(n){var i=function(s,a){if(typeof s!="object"||!s)return s;var o=s[Symbol.toPrimitive];if(o!==void 0){var l=o.call(s,a);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}(n,"string");return typeof i=="symbol"?i:i+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Dj(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ve(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Dj(Object(t),!0).forEach(function(n){Be(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Dj(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ti(r,e){if(r==null)return{};var t,n,i=function(a,o){if(a==null)return{};var l={};for(var c in a)if({}.hasOwnProperty.call(a,c)){if(o.indexOf(c)>=0)continue;l[c]=a[c]}return l}(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function $h(r,e){return e||(e=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(e)}}))}class kj{constructor(){Be(this,"browserShadowBlurConstant",1),Be(this,"DPI",96),Be(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),Be(this,"perfLimitSizeTotal",2097152),Be(this,"maxCacheSideLimit",4096),Be(this,"minCacheSideLimit",256),Be(this,"disableStyleCopyPaste",!1),Be(this,"enableGLFiltering",!0),Be(this,"textureSize",4096),Be(this,"forceGLPutImageData",!1),Be(this,"cachesBoundsOfCurve",!1),Be(this,"fontPaths",{}),Be(this,"NUM_FRACTION_DIGITS",4)}}const Rr=new class extends kj{constructor(r){super(),this.configure(r)}configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,r)}addFonts(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=Ve(Ve({},this.fontPaths),r)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>{delete this.fontPaths[r]})}clearFonts(){this.fontPaths={}}restoreDefaults(r){const e=new kj,t=(r==null?void 0:r.reduce((n,i)=>(n[i]=e[i],n),{}))||e;this.configure(t)}},Bh=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return console[r]("fabric",...t)};class _u extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class STe extends _u{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class xTe{}let CTe=class extends xTe{testPrecision(e,t){const n="precision ".concat(t,` float;
void main(){}`),i=e.createShader(e.FRAGMENT_SHADER);return!!i&&(e.shaderSource(i,n),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(t,n)),t.getExtension("WEBGL_lose_context").loseContext(),Bh("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}};const MTe={};let Rj;const Fu=()=>Rj||(Rj={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new CTe,dispose(){},copyPasteData:MTe}),Sv=()=>Fu().document,GR=()=>Fu().window,EX=()=>{var r;return Math.max((r=Rr.devicePixelRatio)!==null&&r!==void 0?r:GR().devicePixelRatio,1)},Aw=new class{constructor(){Be(this,"charWidthsCache",{}),Be(this,"boundsOfCurveCache",{})}getFontCache(r){let{fontFamily:e,fontStyle:t,fontWeight:n}=r;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const i=this.charWidthsCache[e],s="".concat(t.toLowerCase(),"_").concat((n+"").toLowerCase());return i[s]||(i[s]={}),i[s]}clearFontCache(r){(r=(r||"").toLowerCase())?this.charWidthsCache[r]&&delete this.charWidthsCache[r]:this.charWidthsCache={}}limitDimsByArea(r){const{perfLimitSizeTotal:e}=Rr,t=Math.sqrt(e*r);return[Math.floor(t),Math.floor(e/t)]}},U3="6.6.1";function kx(){}const yb=Math.PI/2,pM=2*Math.PI,HR=Math.PI/180,yo=Object.freeze([1,0,0,1,0,0]),WR=16,$d=.4477152502,or="center",Hr="left",Oo="top",j3="bottom",ss="right",Fo="none",YR=/\r?\n/,IX="moving",CT="scaling",LX="rotating",JR="rotate",NX="skewing",y_="resizing",ATe="modifyPoly",TTe="modifyPath",mM="changed",MT="scale",Vo="scaleX",Hl="scaleY",xv="skewX",Cv="skewY",Fs="fill",Bo="stroke",gM="modified",S0="json",_I="svg",dn=new class{constructor(){this[S0]=new Map,this[_I]=new Map}has(r){return this[S0].has(r)}getClass(r){const e=this[S0].get(r);if(!e)throw new _u("No class registered for ".concat(r));return e}setClass(r,e){e?this[S0].set(e,r):(this[S0].set(r.type,r),this[S0].set(r.type.toLowerCase(),r))}getSVGClass(r){return this[_I].get(r)}setSVGClass(r,e){this[_I].set(e??r.type.toLowerCase(),r)}},vM=new class extends Array{remove(r){const e=this.indexOf(r);e>-1&&this.splice(e,1)}cancelAll(){const r=this.splice(0);return r.forEach(e=>e.abort()),r}cancelByCanvas(r){if(!r)return[];const e=this.filter(t=>{var n;return t.target===r||typeof t.target=="object"&&((n=t.target)===null||n===void 0?void 0:n.canvas)===r});return e.forEach(t=>t.abort()),e}cancelByTarget(r){if(!r)return[];const e=this.filter(t=>t.target===r);return e.forEach(t=>t.abort()),e}};class ETe{constructor(){Be(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(n=>{let[i,s]=n;this.on(i,s)}),()=>this.off(e);if(t){const n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(t),()=>this.off(n,t)}return()=>!1}once(e,t){if(typeof e=="object"){const n=[];return Object.entries(e).forEach(i=>{let[s,a]=i;n.push(this.once(s,a))}),()=>n.forEach(i=>i())}if(t){const n=this.on(e,function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];t.call(this,...s),n()});return n}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const n=this.__eventListeners[e],i=n.indexOf(t);i>-1&&n.splice(i,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof e=="object"?Object.entries(e).forEach(n=>{let[i,s]=n;this._removeEventListener(i,s)}):this._removeEventListener(e,t)}fire(e,t){var n;if(!this.__eventListeners)return;const i=(n=this.__eventListeners[e])===null||n===void 0?void 0:n.concat();if(i)for(let s=0;s<i.length;s++)i[s].call(this,t||{})}}const O0=(r,e)=>{const t=r.indexOf(e);return t!==-1&&r.splice(t,1),r},rd=r=>{if(r===0)return 1;switch(Math.abs(r)/yb){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},id=r=>{if(r===0)return 0;const e=r/yb,t=Math.sign(r);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(r)};class ut{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new ut(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new ut(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new ut(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new ut(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new ut(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new ut(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new ut(this.x/e.x,this.y/e.y)}scalarDivide(e){return new ut(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new ut(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new ut(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new ut(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}clone(){return new ut(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:XR;const n=id(e),i=rd(e),s=this.subtract(t);return new ut(s.x*i-s.y*n,s.x*n+s.y*i).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new ut(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const XR=new ut(0,0),Rx=r=>!!r&&Array.isArray(r._objects);function DX(r){class e extends r{constructor(){super(...arguments),Be(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];const a=this._objects.push(...i);return i.forEach(o=>this._onObjectAdded(o)),a}insertAt(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return this._objects.splice(n,0,...s),s.forEach(o=>this._onObjectAdded(o)),this._objects.length}remove(){const n=this._objects,i=[];for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return a.forEach(l=>{const c=n.indexOf(l);c!==-1&&(n.splice(c,1),i.push(l),this._onObjectRemoved(l))}),i}forEachObject(n){this.getObjects().forEach((i,s,a)=>n(i,s,a))}getObjects(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return i.length===0?[...this._objects]:this._objects.filter(a=>a.isType(...i))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,i){return!!this._objects.includes(n)||!!i&&this._objects.some(s=>s instanceof e&&s.contains(n,!0))}complexity(){return this._objects.reduce((n,i)=>n+=i.complexity?i.complexity():0,0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(O0(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(O0(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,i){if(!n)return!1;const s=this._objects.indexOf(n);if(s!==0){const a=this.findNewLowerIndex(n,s,i);return O0(this._objects,n),this._objects.splice(a,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,i){if(!n)return!1;const s=this._objects.indexOf(n);if(s!==this._objects.length-1){const a=this.findNewUpperIndex(n,s,i);return O0(this._objects,n),this._objects.splice(a,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,i){return n!==this._objects[i]&&(O0(this._objects,n),this._objects.splice(i,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,i,s){let a;if(s){a=i;for(let o=i-1;o>=0;--o)if(n.isOverlapping(this._objects[o])){a=o;break}}else a=i-1;return a}findNewUpperIndex(n,i,s){let a;if(s){a=i;for(let o=i+1;o<this._objects.length;++o)if(n.isOverlapping(this._objects[o])){a=o;break}}else a=i+1;return a}collectObjects(n){let{left:i,top:s,width:a,height:o}=n,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],u=new ut(i,s),f=u.add(new ut(a,o));for(let d=this._objects.length-1;d>=0;d--){const p=this._objects[d];p.selectable&&p.visible&&(l&&p.intersectsWithRect(u,f)||p.isContainedWithinRect(u,f)||l&&p.containsPoint(u)||l&&p.containsPoint(f))&&c.push(p)}return c}}return e}class kX extends ETe{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Px(r){return GR().requestAnimationFrame(r)}function ITe(r){return GR().cancelAnimationFrame(r)}let LTe=0;const Uh=()=>LTe++,Gc=()=>{const r=Sv().createElement("canvas");if(!r||r.getContext===void 0)throw new _u("Failed to create `canvas` element");return r},NTe=()=>Sv().createElement("img"),Bu=r=>{const e=Gc();return e.width=r.width,e.height=r.height,e},RX=(r,e,t)=>r.toDataURL("image/".concat(e),t),PX=(r,e,t)=>new Promise((n,i)=>{r.toBlob(n,"image/".concat(e),t)}),ls=r=>r*HR,$m=r=>r/HR,DTe=r=>r.every((e,t)=>e===yo[t]),No=(r,e,t)=>new ut(r).transform(e,t),Pc=r=>{const e=1/(r[0]*r[3]-r[1]*r[2]),t=[e*r[3],-e*r[1],-e*r[2],e*r[0],0,0],{x:n,y:i}=new ut(r[4],r[5]).transform(t,!0);return t[4]=-n,t[5]=-i,t},wa=(r,e,t)=>[r[0]*e[0]+r[2]*e[1],r[1]*e[0]+r[3]*e[1],r[0]*e[2]+r[2]*e[3],r[1]*e[2]+r[3]*e[3],t?0:r[0]*e[4]+r[2]*e[5]+r[4],t?0:r[1]*e[4]+r[3]*e[5]+r[5]],QR=(r,e)=>r.reduceRight((t,n)=>n&&t?wa(n,t,e):n||t,void 0)||yo.concat(),OX=r=>{let[e,t]=r;return Math.atan2(t,e)},yM=r=>{const e=OX(r),t=Math.pow(r[0],2)+Math.pow(r[1],2),n=Math.sqrt(t),i=(r[0]*r[3]-r[2]*r[1])/n,s=Math.atan2(r[0]*r[2]+r[1]*r[3],t);return{angle:$m(e),scaleX:n,scaleY:i,skewX:$m(s),skewY:0,translateX:r[4]||0,translateY:r[5]||0}},wb=function(r){return[1,0,0,1,r,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function _b(){let{angle:r=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=ls(r),i=rd(n),s=id(n);return[i,s,-s,i,e?e-(i*e-s*t):0,t?t-(s*e+i*t):0]}const KR=function(r){return[r,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,0,0]},FX=r=>Math.tan(ls(r)),BX=r=>[1,0,FX(r),1,0,0],UX=r=>[1,FX(r),0,1,0,0],AT=r=>{let{scaleX:e=1,scaleY:t=1,flipX:n=!1,flipY:i=!1,skewX:s=0,skewY:a=0}=r,o=KR(n?-e:e,i?-t:t);return s&&(o=wa(o,BX(s),!0)),a&&(o=wa(o,UX(a),!0)),o},kTe=r=>{const{translateX:e=0,translateY:t=0,angle:n=0}=r;let i=wb(e,t);n&&(i=wa(i,_b({angle:n})));const s=AT(r);return DTe(s)||(i=wa(i,s)),i},Ox=function(r){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,i){if(e&&e.aborted)return i(new STe("loadImage"));const s=NTe();let a;e&&(a=function(l){s.src="",i(l)},e.addEventListener("abort",a,{once:!0}));const o=function(){s.onload=s.onerror=null,a&&(e==null||e.removeEventListener("abort",a)),n(s)};r?(s.onload=o,s.onerror=function(){a&&(e==null||e.removeEventListener("abort",a)),i(new _u("Error loading ".concat(s.src)))},t&&(s.crossOrigin=t),s.src=r):o()})},w_=function(r){let{signal:e,reviver:t=kx}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,i)=>{const s=[];e&&e.addEventListener("abort",i,{once:!0}),Promise.all(r.map(a=>dn.getClass(a.type).fromObject(a,{signal:e}).then(o=>(t(a,o),s.push(o),o)))).then(n).catch(a=>{s.forEach(o=>{o.dispose&&o.dispose()}),i(a)}).finally(()=>{e&&e.removeEventListener("abort",i)})})},TT=function(r){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,n)=>{const i=[];e&&e.addEventListener("abort",n,{once:!0});const s=Object.values(r).map(o=>o&&o.type&&dn.has(o.type)?w_([o],{signal:e}).then(l=>{let[c]=l;return i.push(c),c}):o),a=Object.keys(r);Promise.all(s).then(o=>o.reduce((l,c,u)=>(l[a[u]]=c,l),{})).then(t).catch(o=>{i.forEach(l=>{l.dispose&&l.dispose()}),n(o)}).finally(()=>{e&&e.removeEventListener("abort",n)})})},Mv=function(r){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in r&&(e[t]=r[t]),e),{})},qR=(r,e)=>Object.keys(r).reduce((t,n)=>(e(r[n],n,r)&&(t[n]=r[n]),t),{}),Pj={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},bI=(r,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(e-r)*t:t<.5?e:t<2/3?r+(e-r)*(2/3-t)*6:r),Oj=(r,e,t,n)=>{r/=255,e/=255,t/=255;const i=Math.max(r,e,t),s=Math.min(r,e,t);let a,o;const l=(i+s)/2;if(i===s)a=o=0;else{const c=i-s;switch(o=l>.5?c/(2-i-s):c/(i+s),i){case r:a=(e-t)/c+(e<t?6:0);break;case e:a=(t-r)/c+2;break;case t:a=(r-e)/c+4}a/=6}return[Math.round(360*a),Math.round(100*o),Math.round(100*l),n]},Fj=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(r)/(r.endsWith("%")?100:1)},TS=r=>Math.min(Math.round(r),255).toString(16).toUpperCase().padStart(2,"0"),Bj=r=>{let[e,t,n,i=1]=r;const s=Math.round(.3*e+.59*t+.11*n);return[s,s,s,i]};class Gr{constructor(e){if(Be(this,"isUnrecognised",!1),e)if(e instanceof Gr)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,n,i,s=1]=e;this.setSource([t,n,i,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Pj&&(e=Pj[e]),e==="transparent"?[255,255,255,0]:Gr.sourceFromHex(e)||Gr.sourceFromRgb(e)||Gr.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,n]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,n]=Oj(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(n,"%)")}toHsla(){const[e,t,n,i]=Oj(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(n,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,n,i]=this.getSource();return"".concat(TS(e)).concat(TS(t)).concat(TS(n)).concat(TS(Math.round(255*i)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Bj(this.getSource())),this}toBlackWhite(e){const[t,,,n]=Bj(this.getSource()),i=t<(e||127)?0:255;return this.setSource([i,i,i,n]),this}overlayWith(e){e instanceof Gr||(e=new Gr(e));const t=this.getSource(),n=e.getSource(),[i,s,a]=t.map((o,l)=>Math.round(.5*o+.5*n[l]));return this.setSource([i,s,a,t[3]]),this}static fromRgb(e){return Gr.fromRgba(e)}static fromRgba(e){return new Gr(Gr.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[n,i,s]=t.slice(1,4).map(a=>{const o=parseFloat(a);return a.endsWith("%")?Math.round(2.55*o):o});return[n,i,s,Fj(t[4])]}}static fromHsl(e){return Gr.fromHsla(e)}static fromHsla(e){return new Gr(Gr.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const n=(Gr.parseAngletoDegrees(t[1])%360+360)%360/360,i=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let a,o,l;if(i===0)a=o=l=s;else{const c=s<=.5?s*(i+1):s+i-s*i,u=2*s-c;a=bI(u,c,n+1/3),o=bI(u,c,n),l=bI(u,c,n-1/3)}return[Math.round(255*a),Math.round(255*o),Math.round(255*l),Fj(t[4])]}static fromHex(e){return new Gr(Gr.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let n;n=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);const[i,s,a,o=255]=n.map(l=>parseInt(l,16));return[i,s,a,o/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),n=parseFloat(t);return t.includes("rad")?$m(n):t.includes("turn")?360*n:n}}const Fi=(r,e)=>parseFloat(Number(r).toFixed(e)),g1=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:WR;const t=/\D{0,2}$/.exec(r),n=parseFloat(r),i=Rr.DPI;switch(t==null?void 0:t[0]){case"mm":return n*i/25.4;case"cm":return n*i/2.54;case"in":return n*i;case"pt":return n*i/72;case"pc":return n*i/72*12;case"em":return n*e;default:return n}},RTe=r=>{const[e,t]=r.trim().split(" "),[n,i]=(s=e)&&s!==Fo?[s.slice(1,4),s.slice(5,8)]:s===Fo?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:t||"meet",alignX:n,alignY:i}},wM=r=>"matrix("+r.map(e=>Fi(e,Rr.NUM_FRACTION_DIGITS)).join(" ")+")",__=function(r,e){let t,n,i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const s=new Gr(e),a=s.getAlpha();t=s.toRgb(),a!==1&&(n=a.toString())}else t="none";return i?"".concat(r,": ").concat(t,"; ").concat(n?"".concat(r,"-opacity: ").concat(n,"; "):""):"".concat(r,'="').concat(t,'" ').concat(n?"".concat(r,'-opacity="').concat(n,'" '):"")},Ul=r=>!!r&&r.toLive!==void 0,Uj=r=>!!r&&typeof r.toObject=="function",jj=r=>!!r&&r.offsetX!==void 0&&"source"in r,om=r=>!!r&&"multiSelectionStacking"in r;function jX(r){const e=r&&Dc(r);let t=0,n=0;if(!r||!e)return{left:t,top:n};let i=r;const s=e.documentElement,a=e.body||{scrollLeft:0,scrollTop:0};for(;i&&(i.parentNode||i.host)&&(i=i.parentNode||i.host,i===e?(t=a.scrollLeft||s.scrollLeft||0,n=a.scrollTop||s.scrollTop||0):(t+=i.scrollLeft||0,n+=i.scrollTop||0),i.nodeType!==1||i.style.position!=="fixed"););return{left:t,top:n}}const Dc=r=>r.ownerDocument||null,zX=r=>{var e;return((e=r.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},VX=function(r,e,t){let{width:n,height:i}=t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;r.width=n,r.height=i,s>1&&(r.setAttribute("width",(n*s).toString()),r.setAttribute("height",(i*s).toString()),e.scale(s,s))},z3=(r,e)=>{let{width:t,height:n}=e;t&&(r.style.width=typeof t=="number"?"".concat(t,"px"):t),n&&(r.style.height=typeof n=="number"?"".concat(n,"px"):n)};function zj(r){return r.onselectstart!==void 0&&(r.onselectstart=()=>!1),r.style.userSelect=Fo,r}class GX{constructor(e){Be(this,"_originalCanvasStyle",void 0),Be(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(n=e)&&n.getContext!==void 0?e:e&&Sv().getElementById(e)||Gc();var n;if(t.hasAttribute("data-fabric"))throw new _u("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:n}=e;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(t)),i.setAttribute("height","".concat(n)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:n,ctx:i}=this.lower;VX(n,i,e,t)}setCSSDimensions(e){z3(this.lower.el,e)}calcOffset(){return function(e){var t;const n=e&&Dc(e),i={left:0,top:0};if(!n)return i;const s=((t=zX(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};i.left+=parseInt(s.borderLeftWidth,10)||0,i.top+=parseInt(s.borderTopWidth,10)||0,i.left+=parseInt(s.paddingLeft,10)||0,i.top+=parseInt(s.paddingTop,10)||0;let a={left:0,top:0};const o=n.documentElement;e.getBoundingClientRect!==void 0&&(a=e.getBoundingClientRect());const l=jX(e);return{left:a.left+l.left-(o.clientLeft||0)+i.left,top:a.top+l.top-(o.clientTop||0)+i.top}}(this.lower.el)}dispose(){Fu().dispose(this.lower.el),delete this.lower}}const PTe={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...yo]};class bb extends DX(kX){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return bb.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new GX(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const s=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(Bh("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?EX():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const i=Ve({width:this.width,height:this.height},e);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const n=e,i=[...this.viewportTransform],s=No(e,Pc(i));i[0]=t,i[3]=t;const a=No(s,i);i[4]+=n.x-a.x,i[5]+=n.y-a.y,this.setViewportTransform(i)}setZoom(e){this.zoomToPoint(new ut(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new ut(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Px(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,n=Pc(this.viewportTransform),i=No({x:0,y:0},n),s=No({x:e,y:t},n),a=i.min(s),o=i.max(s);return this.vptCoords={tl:a,tr:new ut(o.x,a.y),bl:new ut(a.x,o.y),br:o}}cancelRequestedRender(){this.nextRenderHandle&&(ITe(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const n=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,i)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let n=0,i=t.length;n<i;++n)t[n]&&t[n].render(e)}_renderBackgroundOrOverlay(e,t){const n=this["".concat(t,"Color")],i=this["".concat(t,"Image")],s=this.viewportTransform,a=this["".concat(t,"Vpt")];if(!n&&!i)return;const o=Ul(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=o?n.toLive(e):n,a&&e.transform(...s),o){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const l=n.gradientTransform||n.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(i){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=a,a&&e.transform(...s),i.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new ut(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new ut(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new ut(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new ut(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new ut(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return No(this.getCenterPoint(),Pc(this.viewportTransform))}_centerObject(e,t){e.setXY(t,or,or),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const n=this.clipPath,i=n&&!n.excludeFromExport?this._toObject(n,e,t):null;return Ve(Ve(Ve({version:U3},Mv(this,t)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,t))},this.__serializeBgOverlay(e,t)),i?{clipPath:i}:null)}_toObject(e,t,n){let i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=!!i),s}__serializeBgOverlay(e,t){const n={},i=this.backgroundImage,s=this.overlayImage,a=this.backgroundColor,o=this.overlayColor;return Ul(a)?a.excludeFromExport||(n.background=a.toObject(t)):a&&(n.background=a),Ul(o)?o.excludeFromExport||(n.overlay=o.toObject(t)):o&&(n.overlay=o),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,e,t)),s&&!s.excludeFromExport&&(n.overlayImage=this._toObject(s,e,t)),n}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const n=t.width||"".concat(this.width),i=t.height||"".concat(this.height),s=Rr.NUM_FRACTION_DIGITS,a=t.viewBox;let o;if(a)o='viewBox="'.concat(a.x," ").concat(a.y," ").concat(a.width," ").concat(a.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;o='viewBox="'.concat(Fi(-l[4]/l[0],s)," ").concat(Fi(-l[5]/l[3],s)," ").concat(Fi(this.width/l[0],s)," ").concat(Fi(this.height/l[3],s),'" ')}else o='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',i,'" ',o,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",U3,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Uh()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Ul(t)){const n=this["".concat(e,"Vpt")],i=this.viewportTransform,s={isType:()=>!1,width:this.width/(n?i[0]:1),height:this.height/(n?i[3]:1)};return t.toSVG(s,{additionalTransform:n?wM(i):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},n=Rr.fontPaths;this._objects.forEach(function s(a){e.push(a),Rx(a)&&a._objects.forEach(s)}),e.forEach(s=>{if(!(a=s)||typeof a._renderText!="function")return;var a;const{styles:o,fontFamily:l}=s;!t[l]&&n[l]&&(t[l]=!0,o&&Object.values(o).forEach(c=>{Object.values(c).forEach(u=>{let{fontFamily:f=""}=u;!t[f]&&n[f]&&(t[f]=!0)})}))});const i=Object.keys(t).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(n[s],`');
		}
`)).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(e,n,t)})}_setSVGObject(e,t,n){e.push(t.toSVG(n))}_setSVGBgOverlayImage(e,t,n){const i=this[t];i&&!i.excludeFromExport&&i.toSVG&&e.push(i.toSVG(n))}_setSVGBgOverlayColor(e,t){const n=this["".concat(t,"Color")];if(n)if(Ul(n)){const i=n.repeat||"",s=this.width,a=this.height,o=this["".concat(t,"Vpt")]?wM(Pc(this.viewportTransform)):"";e.push('<rect transform="'.concat(o," translate(").concat(s/2,",").concat(a/2,')" x="').concat(n.offsetX-s/2,'" y="').concat(n.offsetY-a/2,'" width="').concat(i!=="repeat-y"&&i!=="no-repeat"||!jj(n)?s:n.source.width,'" height="').concat(i!=="repeat-x"&&i!=="no-repeat"||!jj(n)?a:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new _u("`json` is undefined"));const i=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:a,background:o,overlayImage:l,overlay:c,clipPath:u}=i,f=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([w_(s,{reviver:t,signal:n}),TT({backgroundImage:a,backgroundColor:o,overlayImage:l,overlayColor:c,clipPath:u},{signal:n})]).then(d=>{let[p,g]=d;return this.clear(),this.add(...p),this.set(i),this.set(g),this.renderOnAddRemove=f,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Bu(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,a=i*(s?this.getRetinaScaling():1);return RX(this.toCanvasElement(a,e),t,n)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,a=i*(s?this.getRetinaScaling():1);return PX(this.toCanvasElement(a,e),t,n)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:n,left:i,top:s,filter:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=(t||this.width)*e,l=(n||this.height)*e,c=this.getZoom(),u=this.width,f=this.height,d=this.skipControlsDrawing,p=c*e,g=this.viewportTransform,_=[p,0,0,p,(g[4]-(i||0))*e,(g[5]-(s||0))*e],w=this.enableRetinaScaling,b=Bu({width:o,height:l}),C=a?this._objects.filter(M=>a(M)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=_,this.width=o,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),C),this.viewportTransform=g,this.width=u,this.height=f,this.calcViewportBoundaries(),this.enableRetinaScaling=w,this.skipControlsDrawing=d,b}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),vM.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const n=()=>{this.destroy(),e(!0)};n.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}Be(bb,"ownDefaults",PTe);const OTe=["touchstart","touchmove","touchend"],FTe=r=>{const e=jX(r.target),t=function(n){const i=n.changedTouches;return i&&i[0]?i[0]:n}(r);return new ut(t.clientX+e.left,t.clientY+e.top)},V3=r=>OTe.includes(r.type)||r.pointerType==="touch",G3=r=>{r.preventDefault(),r.stopPropagation()},Gf=r=>{let e=0,t=0,n=0,i=0;for(let s=0,a=r.length;s<a;s++){const{x:o,y:l}=r[s];(o>n||!s)&&(n=o),(o<e||!s)&&(e=o),(l>i||!s)&&(i=l),(l<t||!s)&&(t=l)}return{left:e,top:t,width:n-e,height:i-t}},BTe=["translateX","translateY","scaleX","scaleY"],UTe=(r,e)=>_M(r,wa(e,r.calcOwnMatrix())),_M=(r,e)=>{const t=yM(e),{translateX:n,translateY:i,scaleX:s,scaleY:a}=t,o=Ti(t,BTe),l=new ut(n,i);r.flipX=!1,r.flipY=!1,Object.assign(r,o),r.set({scaleX:s,scaleY:a}),r.setPositionByOrigin(l,or,or)},jTe=r=>{r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},HX=r=>({scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}),ZR=(r,e,t)=>{const n=r/2,i=e/2,s=[new ut(-n,-i),new ut(n,-i),new ut(-n,i),new ut(n,i)].map(o=>o.transform(t)),a=Gf(s);return new ut(a.width,a.height)},ET=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yo;return wa(Pc(arguments.length>1&&arguments[1]!==void 0?arguments[1]:yo),r)},v1=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yo,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yo;return r.transform(ET(e,t))},zTe=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yo,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yo;return r.transform(ET(e,t),!0)},VTe=(r,e,t)=>{const n=ET(e,t);return _M(r,wa(n,r.calcOwnMatrix())),n},WX=(r,e)=>{var t;const{transform:{target:n}}=e;(t=n.canvas)===null||t===void 0||t.fire("object:".concat(r),Ve(Ve({},e),{},{target:n})),n.fire(r,e)},GTe={left:-.5,top:-.5,center:0,bottom:.5,right:.5},ws=r=>typeof r=="string"?GTe[r]:r-.5,bM="not-allowed";function YX(r){return ws(r.originX)===ws(or)&&ws(r.originY)===ws(or)}function Vj(r){return .5-ws(r)}const jc=(r,e)=>r[e],JX=(r,e,t,n)=>({e:r,transform:e,pointer:new ut(t,n)});function XX(r,e){const t=r.getTotalAngle()+$m(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function $R(r,e,t,n,i){var s;let{target:a,corner:o}=r;const l=a.controls[o],c=((s=a.canvas)===null||s===void 0?void 0:s.getZoom())||1,u=a.padding/c,f=function(d,p,g,_){const w=d.getRelativeCenterPoint(),b=g!==void 0&&_!==void 0?d.translateToGivenOrigin(w,or,or,g,_):new ut(d.left,d.top);return(d.angle?p.rotate(-ls(d.angle),w):p).subtract(b)}(a,new ut(n,i),e,t);return f.x>=u&&(f.x-=u),f.x<=-u&&(f.x+=u),f.y>=u&&(f.y-=u),f.y<=u&&(f.y+=u),f.x-=l.offsetX,f.y-=l.offsetY,f}const HTe=(r,e,t,n)=>{const{target:i,offsetX:s,offsetY:a}=e,o=t-s,l=n-a,c=!jc(i,"lockMovementX")&&i.left!==o,u=!jc(i,"lockMovementY")&&i.top!==l;return c&&i.set(Hr,o),u&&i.set(Oo,l),(c||u)&&WX(IX,JX(r,e,t,n)),c||u};class QX{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):Fo,s=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",o=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",u=this.visible?"":" visibility: hidden;",f=e?"":this.getSvgFilter(),d=__(Fs,this.fill);return[__(Bo,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",o,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",t,"; ","opacity: ",c,";",f,u].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(wM(n));return"".concat(i).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=i,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:n,withShadow:i,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=t?"":'style="'.concat(this.getSvgStyles(),'" '),o=i?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,f=this.stroke,d=this.fill,p=this.shadow,g=[],_=e.indexOf("COMMON_PARTS");let w;l&&(l.clipPathId="CLIPPATH_".concat(Uh()),w='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(n),`</clipPath>
`)),u&&g.push("<g ",o,this.getSvgCommons(),` >
`),g.push("<g ",this.getSvgTransform(!1),u?"":o+this.getSvgCommons(),` >
`);const b=[a,c,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[_]=b,Ul(d)&&g.push(d.toSVG(this)),Ul(f)&&g.push(f.toSVG(this)),p&&g.push(p.toSVG(this)),l&&g.push(w),g.push(e.join("")),g.push(`</g>
`),u&&g.push(`</g>
`),n?n(g.join("")):g.join("")}addPaintOrder(){return this.paintFirst!==Fs?' paint-order="'.concat(this.paintFirst,'" '):""}}function IT(r){return new RegExp("^("+r.join("|")+")\\b","i")}var Gj;const eg=String.raw(Gj||(Gj=$h(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),WTe=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+eg+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+eg+"))?\\s+(.*)"),YTe={cx:Hr,x:Hr,r:"radius",cy:Oo,y:Oo,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},SI="font-size",xI="clip-path";IT(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);IT(["symbol","image","marker","pattern","view","svg"]);const Hj=IT(["symbol","g","a","svg","clipPath","defs"]),JTe=new ut(1,0),KX=new ut,qX=(r,e)=>r.rotate(e),H3=(r,e)=>new ut(e).subtract(r),W3=r=>r.distanceFrom(KX),Y3=(r,e)=>Math.atan2(Tw(r,e),QTe(r,e)),XTe=r=>Y3(JTe,r),eP=r=>r.eq(KX)?r:r.scalarDivide(W3(r)),ZX=function(r){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return eP(new ut(-r.y,r.x).scalarMultiply(e?1:-1))},Tw=(r,e)=>r.x*e.y-r.y*e.x,QTe=(r,e)=>r.x*e.x+r.y*e.y,Wj=(r,e,t)=>{if(r.eq(e)||r.eq(t))return!0;const n=Tw(e,t),i=Tw(e,r),s=Tw(t,r);return n>=0?i>=0&&s<=0:!(i<=0&&s>=0)},Yj="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Jj=new RegExp("(?:\\s|^)"+Yj+Yj+"("+eg+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Lu{constructor(e){const t=typeof e=="string"?Lu.parseShadow(e):e;Object.assign(this,Lu.ownDefaults,t),this.id=Uh()}static parseShadow(e){const t=e.trim(),[,n=0,i=0,s=0]=(Jj.exec(t)||[]).map(a=>parseFloat(a)||0);return{color:(t.replace(Jj,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:i,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=qX(new ut(this.offsetX,this.offsetY),ls(-e.angle)),n=new Gr(this.color);let i=40,s=40;return e.width&&e.height&&(i=100*Fi((Math.abs(t.x)+this.blur)/e.width,Rr.NUM_FRACTION_DIGITS)+20,s=100*Fi((Math.abs(t.y)+this.blur)/e.height,Rr.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(i,'%" width="').concat(100+2*i,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Fi(this.blur?this.blur/2:0,Rr.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Fi(t.x,Rr.NUM_FRACTION_DIGITS),'" dy="').concat(Fi(t.y,Rr.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Lu.ownDefaults;return this.includeDefaultValues?e:qR(e,(n,i)=>n!==t[i])}static async fromObject(e){return new this(e)}}Be(Lu,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),Be(Lu,"type","shadow"),dn.setClass(Lu,"shadow");const $1=(r,e,t)=>Math.max(r,Math.min(e,t)),KTe=[Oo,Hr,Vo,Hl,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",xv,Cv],cd=[Fs,Bo,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],qTe={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Hr,originY:Oo,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Fs,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},ZTe=(r,e,t,n)=>-t*Math.cos(r/n*yb)+t+e,$Te=()=>!1;class tP{constructor(e){let{startValue:t,byValue:n,duration:i=500,delay:s=0,easing:a=ZTe,onStart:o=kx,onChange:l=kx,onComplete:c=kx,abort:u=$Te,target:f}=e;Be(this,"_state","pending"),Be(this,"durationProgress",0),Be(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=s,this.easing=a,this._onStart=o,this._onChange=l,this._onComplete=c,this._abort=u,this.target=f,this.startValue=t,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Px(e),this.delay):Px(e)}tick(e){const t=(e||+new Date)-this.startTime,n=Math.min(t,this.duration);this.durationProgress=n/this.duration;const{value:i,valueProgress:s}=this.calculate(n);this.value=Object.freeze(i),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Px(this.tick)))}register(){vM.push(this)}unregister(){vM.remove(this)}abort(){this._state="aborted",this.unregister()}}const eEe=["startValue","endValue"];class tEe extends tP{constructor(e){let{startValue:t=0,endValue:n=100}=e;super(Ve(Ve({},Ti(e,eEe)),{},{startValue:t,byValue:n-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const nEe=["startValue","endValue"];class rEe extends tP{constructor(e){let{startValue:t=[0],endValue:n=[100]}=e;super(Ve(Ve({},Ti(e,nEe)),{},{startValue:t,byValue:n.map((i,s)=>i-t[s])}))}calculate(e){const t=this.startValue.map((n,i)=>this.easing(e,n,this.byValue[i],this.duration,i));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const iEe=["startValue","endValue","easing","onChange","onComplete","abort"],sEe=(r,e,t,n)=>e+t*(1-Math.cos(r/n*yb)),CI=r=>r&&((e,t,n)=>r(new Gr(e).toRgba(),t,n));class aEe extends tP{constructor(e){let{startValue:t,endValue:n,easing:i=sEe,onChange:s,onComplete:a,abort:o}=e,l=Ti(e,iEe);const c=new Gr(t).getSource(),u=new Gr(n).getSource();super(Ve(Ve({},l),{},{startValue:c,byValue:u.map((f,d)=>f-c[d]),easing:i,onChange:CI(s),onComplete:CI(a),abort:CI(o)}))}calculate(e){const[t,n,i,s]=this.startValue.map((o,l)=>this.easing(e,o,this.byValue[l],this.duration,l)),a=[...[t,n,i].map(Math.round),$1(0,s,1)];return{value:a,valueProgress:a.map((o,l)=>this.byValue[l]!==0?Math.abs((o-this.startValue[l])/this.byValue[l]):0).find(o=>o!==0)||0}}}function $X(r){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(r)?new rEe(r):new tEe(r);return e.start(),e}function oEe(r){const e=new aEe(r);return e.start(),e}class Ri{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.points=this.points.concat(t.filter(i=>!this.includes(i))),this}static isPointContained(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(n))return e.eq(t);if(t.x===n.x)return e.x===t.x&&(i||e.y>=Math.min(t.y,n.y)&&e.y<=Math.max(t.y,n.y));if(t.y===n.y)return e.y===t.y&&(i||e.x>=Math.min(t.x,n.x)&&e.x<=Math.max(t.x,n.x));{const s=H3(t,n),a=H3(t,e).divide(s);return i?Math.abs(a.x)===Math.abs(a.y):a.x===a.y&&a.x>=0&&a.x<=1}}static isPointInPolygon(e,t){const n=new ut(e).setX(Math.min(e.x-1,...t.map(s=>s.x)));let i=0;for(let s=0;s<t.length;s++){const a=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,n);if(a.includes(e))return!0;i+=+(a.status==="Intersection")}return i%2==1}static intersectLineLine(e,t,n,i){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],a=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const o=t.x-e.x,l=t.y-e.y,c=i.x-n.x,u=i.y-n.y,f=e.x-n.x,d=e.y-n.y,p=c*d-u*f,g=o*d-l*f,_=u*o-c*l;if(_!==0){const w=p/_,b=g/_;return(s||0<=w&&w<=1)&&(a||0<=b&&b<=1)?new Ri("Intersection").append(new ut(e.x+w*o,e.y+w*l)):new Ri}if(p===0||g===0){const w=s||a||Ri.isPointContained(e,n,i)||Ri.isPointContained(t,n,i)||Ri.isPointContained(n,e,t)||Ri.isPointContained(i,e,t);return new Ri(w?"Coincident":void 0)}return new Ri("Parallel")}static intersectSegmentLine(e,t,n,i){return Ri.intersectLineLine(e,t,n,i,!1,!0)}static intersectSegmentSegment(e,t,n,i){return Ri.intersectLineLine(e,t,n,i,!1,!1)}static intersectLinePolygon(e,t,n){let i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new Ri,a=n.length;for(let o,l,c,u=0;u<a;u++){if(o=n[u],l=n[(u+1)%a],c=Ri.intersectLineLine(e,t,o,l,i,!1),c.status==="Coincident")return c;s.append(...c.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,n){return Ri.intersectLinePolygon(e,t,n,!1)}static intersectPolygonPolygon(e,t){const n=new Ri,i=e.length,s=[];for(let a=0;a<i;a++){const o=e[a],l=e[(a+1)%i],c=Ri.intersectSegmentPolygon(o,l,t);c.status==="Coincident"?(s.push(c),n.append(o,l)):n.append(...c.points)}return s.length>0&&s.length===e.length?new Ri("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,t,n){const i=t.min(n),s=t.max(n),a=new ut(s.x,i.y),o=new ut(i.x,s.y);return Ri.intersectPolygonPolygon(e,[i,a,s,o])}}class lEe extends kX{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?No(e,this.group.calcTransformMatrix()):e}setXY(e,t,n){this.group&&(e=No(e,Pc(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,n)}getRelativeXY(){return new ut(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:n,bl:i}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,n,i];if(this.group){const a=this.group.calcTransformMatrix();return s.map(o=>No(o,a))}return s}intersectsWithRect(e,t){return Ri.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Ri.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:n,top:i,width:s,height:a}=this.getBoundingRect();return n>=e.x&&n+s<=t.x&&i>=e.y&&i+a<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Ri.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=t.x&&n.x>=e.x&&n.y<=t.y&&n.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(n=>(n.x>=t.x||n.x<=e.x)&&(n.y>=t.y||n.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Gf(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Vo,e),this._set(Hl,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?$m(OX(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||yo.concat()}calcACoords(){const e=_b({angle:this.angle}),{x:t,y:n}=this.getRelativeCenterPoint(),i=wb(t,n),s=wa(i,e),a=this._getTransformedDimensions(),o=a.x/2,l=a.y/2;return{tl:No({x:-o,y:-l},s),tr:No({x:o,y:-l},s),bl:No({x:-o,y:l},s),br:No({x:o,y:l},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,ws(this.originX),ws(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const n=this.transformMatrixKey(e),i=this.matrixCache;return i&&i.key.every((s,a)=>s===n[a])?i.value:(this.group&&(t=wa(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:n,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const n=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=kTe(i);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new ut(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Ve({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=t.strokeWidth;let i=n,s=0;this.strokeUniform&&(i=0,s=n);const a=t.width+i,o=t.height+i;let l;return l=t.skewX===0&&t.skewY===0?new ut(a*t.scaleX,o*t.scaleY):ZR(a,o,AT(t)),l.scalarAdd(s)}translateToGivenOrigin(e,t,n,i,s){let a=e.x,o=e.y;const l=ws(i)-ws(t),c=ws(s)-ws(n);if(l||c){const u=this._getTransformedDimensions();a+=l*u.x,o+=c*u.y}return new ut(a,o)}translateToCenterPoint(e,t,n){if(t===or&&n===or)return e;const i=this.translateToGivenOrigin(e,t,n,or,or);return this.angle?i.rotate(ls(this.angle),e):i}translateToOriginPoint(e,t,n){const i=this.translateToGivenOrigin(e,or,or,t,n);return this.angle?i.rotate(ls(this.angle),e):i}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?No(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new ut(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,n){const i=this.translateToCenterPoint(e,t,n),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Hr,Oo)}}const cEe=["type"],uEe=["extraParam"];let Sf=class Fx extends lEe{static getDefaults(){return Fx.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){Bh("warn","Setting type has no effect",e)}constructor(e){super(),Be(this,"_cacheContext",null),Object.assign(this,Fx.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Gc(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,n=e.height,i=Rr.maxCacheSideLimit,s=Rr.minCacheSideLimit;if(t<=i&&n<=i&&t*n<=Rr.perfLimitSizeTotal)return t<s&&(e.width=s),n<s&&(e.height=s),e;const a=t/n,[o,l]=Aw.limitDimsByArea(a),c=$1(s,o,i),u=$1(s,l,i);return t>c&&(e.zoomX/=t/c,e.width=c,e.capped=!0),n>u&&(e.zoomY/=n/u,e.height=u,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),n=t.x*e.x/this.scaleX,i=t.y*e.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(i+2),zoomX:e.x,zoomY:e.y,x:n,y:i}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:n,height:i,zoomX:s,zoomY:a,x:o,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=n!==e.width||i!==e.height,u=this.zoomX!==s||this.zoomY!==a;if(!e||!t)return!1;if(c||u){n!==e.width||i!==e.height?(e.width=n,e.height=i):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const f=o/2,d=l/2;return this.cacheTranslationX=Math.round(e.width/2-f)+f,this.cacheTranslationY=Math.round(e.height/2-d)+d,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,a),this.zoomX=s,this.zoomY=a,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new ut(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=yM(this.calcTransformMatrix());return new ut(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(t*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Vo&&e!==Hl||(t=this._constrainScale(t)),e===Vo&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof Lu||(t=new Lu(t));const n=this[e]!==t;return this[e]=t,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:n,cacheTranslationX:i,cacheTranslationY:s}=this,{width:a,height:o}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:n,cacheTranslationX:i,cacheTranslationY:s,width:a,height:o,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Bo&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,n){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(n,0,0),e.restore()}drawObject(e,t,n){const i=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,n),this.fill=i,this.stroke=s}createClipPathLayer(e,t){const n=Bu(t),i=n.getContext("2d");if(i.translate(t.cacheTranslationX,t.cacheTranslationY),i.scale(t.zoomX,t.zoomY),e._cacheCanvas=n,t.parentClipPaths.forEach(s=>{s.transform(i)}),t.parentClipPaths.push(e),e.absolutePositioned){const s=Pc(this.calcTransformMatrix());i.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return e.transform(i),e.drawObject(i,!0,t),n}_drawClipPath(e,t,n){if(!t)return;t._transformDone=!0;const i=this.createClipPathLayer(t,n);this.drawClipPathOnCache(e,t,i)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,n=this._cacheContext;return!(!t||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Ul(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:n}=t;n&&(Ul(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,n=this.canvas,i=this.getCanvasRetinaScaling(),[s,,,a]=(n==null?void 0:n.viewportTransform)||yo,o=s*i,l=a*i,c=t.nonScaling?new ut(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*Rr.browserShadowBlurConstant*(o+l)*(c.x+c.y)/4,e.shadowOffsetX=t.offsetX*o*c.x,e.shadowOffsetY=t.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Ul(t))return{offsetX:0,offsetY:0};const n=t.gradientTransform||t.patternTransform,i=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,i,s):e.transform(1,0,0,1,i,s),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===Bo?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var n;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),a=i.x/this.scaleX/s,o=i.y/this.scaleY/s,l=Bu({width:Math.ceil(a),height:Math.ceil(o)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(a,0),c.lineTo(a,o),c.lineTo(0,o),c.closePath(),c.translate(a/2,o/2),c.scale(i.zoomX/this.scaleX/s,i.zoomY/this.scaleY/s),this._applyPatternGradientTransform(c,t),c.fillStyle=t.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/i.zoomX,s*this.scaleY/i.zoomY),e.strokeStyle=(n=c.createPattern(l,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new ut(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(dn.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=HX(this),n=this.group,i=this.shadow,s=Math.abs,a=e.enableRetinaScaling?EX():1,o=(e.multiplier||1)*a,l=e.canvasProvider||(C=>new bb(C,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&jTe(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&VTe(this,this.getViewportTransform()),this.setCoords();const c=Gc(),u=this.getBoundingRect(),f=this.shadow,d=new ut;if(f){const C=f.blur,M=f.nonScaling?new ut(1,1):this.getObjectScaling();d.x=2*Math.round(s(f.offsetX)+C)*s(M.x),d.y=2*Math.round(s(f.offsetY)+C)*s(M.y)}const p=u.width+d.x,g=u.height+d.y;c.width=Math.ceil(p),c.height=Math.ceil(g);const _=l(c);e.format==="jpeg"&&(_.backgroundColor="#fff"),this.setPositionByOrigin(new ut(_.width/2,_.height/2),or,or);const w=this.canvas;_._objects=[this],this.set("canvas",_),this.setCoords();const b=_.toCanvasElement(o||1,e);return this.set("canvas",w),this.shadow=i,n&&(this.group=n),this.set(t),this.setCoords(),_._objects=[],_.destroy(),b}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return RX(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return PX(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:n,originY:i}=this;if(t){const{x:s,y:a}=this.getRelativeCenterPoint();this.originX=or,this.originY=or,this.left=s,this.top=a}if(this.set("angle",e),t){const{x:s,y:a}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,i);this.left=s,this.top=a,this.originX=n,this.originY=i}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){vM.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Fu().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((n,i)=>{let[s,a]=i;return n[s]=this._animate(s,a,t),n},{})}_animate(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.split("."),s=this.constructor.colorProperties.includes(i[i.length-1]),{abort:a,startValue:o,onChange:l,onComplete:c}=n,u=Ve(Ve({},n),{},{target:this,startValue:o??i.reduce((f,d)=>f[d],this),endValue:t,abort:a==null?void 0:a.bind(this),onChange:(f,d,p)=>{i.reduce((g,_,w)=>(w===i.length-1&&(g[_]=f),g[_]),this),l&&l(f,d,p)},onComplete:(f,d,p)=>{this.setCoords(),c&&c(f,d,p)}});return s?oEe(u):$X(u)}isDescendantOf(e){const{parent:t,group:n}=this;return t===e||n===e||!!t&&t.isDescendantOf(e)||!!n&&n!==t&&n.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),n=e.getAncestors();if(t.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let i,s=0;s<t.length;s++){if(i=t[s],i===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let a=0;a<n.length;a++){if(this===n[a])return{fork:[],otherFork:[e,...n.slice(0,a)],common:[this,...t]};if(i===n[a])return{fork:[this,...t.slice(0,s)],otherFork:[e,...n.slice(0,a)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const n=t.common[0]||this.canvas;if(!n)return;const i=t.fork.pop(),s=t.otherFork.pop(),a=n._objects.indexOf(i),o=n._objects.indexOf(s);return a>-1&&a>o}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Fx.customProperties,this.constructor.customProperties||[]);let t;const n=Rr.NUM_FRACTION_DIGITS,{clipPath:i,fill:s,stroke:a,shadow:o,strokeDashArray:l,left:c,top:u,originX:f,originY:d,width:p,height:g,strokeWidth:_,strokeLineCap:w,strokeDashOffset:b,strokeLineJoin:C,strokeUniform:M,strokeMiterLimit:A,scaleX:k,scaleY:O,angle:R,flipX:I,flipY:D,opacity:E,visible:B,backgroundColor:U,fillRule:V,paintFirst:X,globalCompositeOperation:te,skewX:ee,skewY:ue}=this;i&&!i.excludeFromExport&&(t=i.toObject(e.concat("inverted","absolutePositioned")));const ne=q=>Fi(q,n),oe=Ve(Ve({},Mv(this,e)),{},{type:this.constructor.type,version:U3,originX:f,originY:d,left:ne(c),top:ne(u),width:ne(p),height:ne(g),fill:Uj(s)?s.toObject():s,stroke:Uj(a)?a.toObject():a,strokeWidth:ne(_),strokeDashArray:l&&l.concat(),strokeLineCap:w,strokeDashOffset:b,strokeLineJoin:C,strokeUniform:M,strokeMiterLimit:ne(A),scaleX:ne(k),scaleY:ne(O),angle:ne(R),flipX:I,flipY:D,opacity:ne(E),shadow:o&&o.toObject(),visible:B,backgroundColor:U,fillRule:V,paintFirst:X,globalCompositeOperation:te,skewX:ne(ee),skewY:ne(ue)},t?{clipPath:t}:null);return this.includeDefaultValues?oe:this._removeDefaultValues(oe)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),n=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return qR(e,(i,s)=>{if(s===Hr||s===Oo||s==="type")return!0;const a=n[s];return i!==a&&!(Array.isArray(i)&&Array.isArray(a)&&i.length===0&&a.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Ti(e,cEe),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:i}=n,s=Ti(n,uEe);return TT(t,s).then(a=>i?(delete a[i],new this(t[i],a)):new this(a))}static fromObject(e,t){return this._fromObject(e,t)}};Be(Sf,"stateProperties",KTe),Be(Sf,"cacheProperties",cd),Be(Sf,"ownDefaults",qTe),Be(Sf,"type","FabricObject"),Be(Sf,"colorProperties",[Fs,Bo,"backgroundColor"]),Be(Sf,"customProperties",[]),dn.setClass(Sf),dn.setClass(Sf,"object");const Av=(r,e,t)=>(n,i,s,a)=>{const o=e(n,i,s,a);return o&&WX(r,Ve(Ve({},JX(n,i,s,a)),t)),o};function Tv(r){return(e,t,n,i)=>{const{target:s,originX:a,originY:o}=t,l=s.getRelativeCenterPoint(),c=s.translateToOriginPoint(l,a,o),u=r(e,t,n,i);return s.setPositionByOrigin(c,t.originX,t.originY),u}}const Xj=Av(y_,Tv((r,e,t,n)=>{const i=$R(e,e.originX,e.originY,t,n);if(ws(e.originX)===ws(or)||ws(e.originX)===ws(ss)&&i.x<0||ws(e.originX)===ws(Hr)&&i.x>0){const{target:s}=e,a=s.strokeWidth/(s.strokeUniform?s.scaleX:1),o=YX(e)?2:1,l=s.width,c=Math.abs(i.x*o/s.scaleX)-a;return s.set("width",Math.max(c,1)),l!==s.width}return!1}));function fEe(r,e,t,n,i){n=n||{};const s=this.sizeX||n.cornerSize||i.cornerSize,a=this.sizeY||n.cornerSize||i.cornerSize,o=n.transparentCorners!==void 0?n.transparentCorners:i.transparentCorners,l=o?Bo:Fs,c=!o&&(n.cornerStrokeColor||i.cornerStrokeColor);let u,f=e,d=t;r.save(),r.fillStyle=n.cornerColor||i.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",s>a?(u=s,r.scale(1,a/s),d=t*s/a):a>s?(u=a,r.scale(s/a,1),f=e*a/s):u=s,r.beginPath(),r.arc(f,d,u/2,0,pM,!1),r[l](),c&&r.stroke(),r.restore()}function dEe(r,e,t,n,i){n=n||{};const s=this.sizeX||n.cornerSize||i.cornerSize,a=this.sizeY||n.cornerSize||i.cornerSize,o=n.transparentCorners!==void 0?n.transparentCorners:i.transparentCorners,l=o?Bo:Fs,c=!o&&(n.cornerStrokeColor||i.cornerStrokeColor),u=s/2,f=a/2;r.save(),r.fillStyle=n.cornerColor||i.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",r.translate(e,t);const d=i.getTotalAngle();r.rotate(ls(d)),r["".concat(l,"Rect")](-u,-f,s,a),c&&r.strokeRect(-u,-f,s,a),r.restore()}class Tc{constructor(e){Be(this,"visible",!0),Be(this,"actionName",MT),Be(this,"angle",0),Be(this,"x",0),Be(this,"y",0),Be(this,"offsetX",0),Be(this,"offsetY",0),Be(this,"sizeX",0),Be(this,"sizeY",0),Be(this,"touchSizeX",0),Be(this,"touchSizeY",0),Be(this,"cursorStyle","crosshair"),Be(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,n,i){var s;let{tl:a,tr:o,br:l,bl:c}=i;return((s=t.canvas)===null||s===void 0?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&Ri.isPointInPolygon(n,[a,o,l,c])}getActionHandler(e,t,n){return this.actionHandler}getMouseDownHandler(e,t,n){return this.mouseDownHandler}getMouseUpHandler(e,t,n){return this.mouseUpHandler}cursorStyleHandler(e,t,n){return t.cursorStyle}getActionName(e,t,n){return t.actionName}getVisibility(e,t){var n,i;return(n=(i=e._controlsVisibility)===null||i===void 0?void 0:i[t])!==null&&n!==void 0?n:this.visible}setVisibility(e,t,n){this.visible=e}positionHandler(e,t,n,i){return new ut(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,n,i,s,a){const o=QR([wb(n,i),_b({angle:e}),KR((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new ut(-.5,-.5).transform(o),tr:new ut(.5,-.5).transform(o),br:new ut(.5,.5).transform(o),bl:new ut(-.5,.5).transform(o)}}render(e,t,n,i,s){((i=i||{}).cornerStyle||s.cornerStyle)==="circle"?fEe.call(this,e,t,n,i,s):dEe.call(this,e,t,n,i,s)}}const hEe=(r,e,t)=>t.lockRotation?bM:e.cursorStyle,pEe=Av(LX,Tv((r,e,t,n)=>{let{target:i,ex:s,ey:a,theta:o,originX:l,originY:c}=e;const u=i.translateToOriginPoint(i.getRelativeCenterPoint(),l,c);if(jc(i,"lockRotation"))return!1;const f=Math.atan2(a-u.y,s-u.x),d=Math.atan2(n-u.y,t-u.x);let p=$m(d-f+o);if(i.snapAngle&&i.snapAngle>0){const _=i.snapAngle,w=i.snapThreshold||_,b=Math.ceil(p/_)*_,C=Math.floor(p/_)*_;Math.abs(p-C)<w?p=C:Math.abs(p-b)<w&&(p=b)}p<0&&(p=360+p),p%=360;const g=i.angle!==p;return i.angle=p,g}));function eQ(r,e){const t=e.canvas,n=r[t.uniScaleKey];return t.uniformScaling&&!n||!t.uniformScaling&&n}function tQ(r,e,t){const n=jc(r,"lockScalingX"),i=jc(r,"lockScalingY");if(n&&i||!e&&(n||i)&&t||n&&e==="x"||i&&e==="y")return!0;const{width:s,height:a,strokeWidth:o}=r;return s===0&&o===0&&e!=="y"||a===0&&o===0&&e!=="x"}const mEe=["e","se","s","sw","w","nw","n","ne","e"],tw=(r,e,t)=>{const n=eQ(r,t);if(tQ(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",n))return bM;const i=XX(t,e);return"".concat(mEe[i],"-resize")};function nP(r,e,t,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,a=i.by,o=eQ(r,s);let l,c,u,f,d,p;if(tQ(s,a,o))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,u=e.scaleY*e.gestureScale;else{if(l=$R(e,e.originX,e.originY,t,n),d=a!=="y"?Math.sign(l.x||e.signX||1):1,p=a!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=d),e.signY||(e.signY=p),jc(s,"lockScalingFlip")&&(e.signX!==d||e.signY!==p))return!1;if(f=s._getTransformedDimensions(),o&&!a){const w=Math.abs(l.x)+Math.abs(l.y),{original:b}=e,C=w/(Math.abs(f.x*b.scaleX/s.scaleX)+Math.abs(f.y*b.scaleY/s.scaleY));c=b.scaleX*C,u=b.scaleY*C}else c=Math.abs(l.x*s.scaleX/f.x),u=Math.abs(l.y*s.scaleY/f.y);YX(e)&&(c*=2,u*=2),e.signX!==d&&a!=="y"&&(e.originX=Vj(e.originX),c*=-1,e.signX=d),e.signY!==p&&a!=="x"&&(e.originY=Vj(e.originY),u*=-1,e.signY=p)}const g=s.scaleX,_=s.scaleY;return a?(a==="x"&&s.set(Vo,c),a==="y"&&s.set(Hl,u)):(!jc(s,"lockScalingX")&&s.set(Vo,c),!jc(s,"lockScalingY")&&s.set(Hl,u)),g!==s.scaleX||_!==s.scaleY}const ES=Av(CT,Tv((r,e,t,n)=>nP(r,e,t,n))),gEe=Av(CT,Tv((r,e,t,n)=>nP(r,e,t,n,{by:"x"}))),vEe=Av(CT,Tv((r,e,t,n)=>nP(r,e,t,n,{by:"y"}))),yEe=["target","ex","ey","skewingSide"],MI={x:{counterAxis:"y",scale:Vo,skew:xv,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Hl,skew:Cv,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},wEe=["ns","nesw","ew","nwse"],_Ee=(r,e,t)=>{if(e.x!==0&&jc(t,"lockSkewingY")||e.y!==0&&jc(t,"lockSkewingX"))return bM;const n=XX(t,e)%4;return"".concat(wEe[n],"-resize")};function nQ(r,e,t,n,i){const{target:s}=t,{counterAxis:a,origin:o,lockSkewing:l,skew:c,flip:u}=MI[r];if(jc(s,l))return!1;const{origin:f,flip:d}=MI[a],p=ws(t[f])*(s[d]?-1:1),g=-Math.sign(p)*(s[u]?-1:1),_=.5*-((s[c]===0&&$R(t,or,or,n,i)[r]>0||s[c]>0?1:-1)*g)+.5;return Av(NX,Tv((b,C,M,A)=>function(k,O,R){let{target:I,ex:D,ey:E,skewingSide:B}=O,U=Ti(O,yEe);const{skew:V}=MI[k],X=R.subtract(new ut(D,E)).divide(new ut(I.scaleX,I.scaleY))[k],te=I[V],ee=U[V],ue=Math.tan(ls(ee)),ne=k==="y"?I._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:I._getTransformedDimensions({scaleX:1,scaleY:1}).y,oe=2*X*B/Math.max(ne,1)+ue,q=$m(Math.atan(oe));I.set(V,q);const J=te!==I[V];if(J&&k==="y"){const{skewX:ie,scaleX:he}=I,$=I._getTransformedDimensions({skewY:te}),ge=I._getTransformedDimensions(),pe=ie!==0?$.x/ge.x:1;pe!==1&&I.set(Vo,pe*he)}return J}(r,C,new ut(M,A))))(e,Ve(Ve({},t),{},{[o]:_,skewingSide:g}),n,i)}const bEe=(r,e,t,n)=>nQ("x",r,e,t,n),SEe=(r,e,t,n)=>nQ("y",r,e,t,n);function LT(r,e){return r[e.canvas.altActionKey]}const IS=(r,e,t)=>{const n=LT(r,t);return e.x===0?n?xv:Hl:e.y===0?n?Cv:Vo:""},Q0=(r,e,t)=>LT(r,t)?_Ee(0,e,t):tw(r,e,t),Qj=(r,e,t,n)=>LT(r,e.target)?SEe(r,e,t,n):gEe(r,e,t,n),Kj=(r,e,t,n)=>LT(r,e.target)?bEe(r,e,t,n):vEe(r,e,t,n),rQ=()=>({ml:new Tc({x:-.5,y:0,cursorStyleHandler:Q0,actionHandler:Qj,getActionName:IS}),mr:new Tc({x:.5,y:0,cursorStyleHandler:Q0,actionHandler:Qj,getActionName:IS}),mb:new Tc({x:0,y:.5,cursorStyleHandler:Q0,actionHandler:Kj,getActionName:IS}),mt:new Tc({x:0,y:-.5,cursorStyleHandler:Q0,actionHandler:Kj,getActionName:IS}),tl:new Tc({x:-.5,y:-.5,cursorStyleHandler:tw,actionHandler:ES}),tr:new Tc({x:.5,y:-.5,cursorStyleHandler:tw,actionHandler:ES}),bl:new Tc({x:-.5,y:.5,cursorStyleHandler:tw,actionHandler:ES}),br:new Tc({x:.5,y:.5,cursorStyleHandler:tw,actionHandler:ES}),mtr:new Tc({x:0,y:-.5,actionHandler:pEe,cursorStyleHandler:hEe,offsetY:-40,withConnection:!0,actionName:JR})}),xEe=()=>({mr:new Tc({x:.5,y:0,actionHandler:Xj,cursorStyleHandler:Q0,actionName:y_}),ml:new Tc({x:-.5,y:0,actionHandler:Xj,cursorStyleHandler:Q0,actionName:y_})}),CEe=()=>Ve(Ve({},rQ()),xEe());class b_ extends Sf{static getDefaults(){return Ve(Ve({},super.getDefaults()),b_.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),b_.ownDefaults),this.setOptions(e)}static createControls(){return{controls:rQ()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,n=t.target,i=t.action;if(this===n&&i&&i.startsWith(MT))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let i=n.length-1;i>=0;i--){const[s,a]=n[i],o=this.controls[s];if(o.shouldActivate(s,this,e,t?a.touchCorner:a.corner))return this.__corner=s,{key:s,control:o,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),n=wb(t.x,t.y),i=_b({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=wa(n,i),a=wa(e,s),o=wa(a,[1/e[0],0,0,1/e[3],0,0]),l=this.group?yM(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),u={};return this.forEachControl((f,d)=>{const p=f.positionHandler(c,o,this,f);u[d]=Object.assign(p,this._calcCornerCoords(f,p))}),u}_calcCornerCoords(e,t){const n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),i=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/i[0],1/i[3]),e.rotate(ls(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=Ve({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=i.borderColor,this._setLineDash(e,i.borderDashArray),this.strokeBorders(e,t),i.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:i}=this,s=Ve({hasBorders:n,hasControls:i},t),a=this.getViewportTransform(),o=s.hasBorders,l=s.hasControls,c=wa(a,this.calcTransformMatrix()),u=yM(c);e.save(),e.translate(u.translateX,u.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),e.rotate(ls(this.group?u.angle:this.angle)),o&&this.drawBorders(e,u,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,n){let i;if(n&&n.forActiveSelection||this.group){const s=ZR(this.width,this.height,AT(t)),a=this.isStrokeAccountedForInDimensions()?XR:(this.strokeUniform?new ut().scalarAdd(this.canvas?this.canvas.getZoom():1):new ut(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);i=s.add(a).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,i,n)}drawControlsConnectingLines(e,t){let n=!1;e.beginPath(),this.forEachControl((i,s)=>{i.withConnection&&i.getVisibility(this,s)&&(n=!0,e.moveTo(i.x*t.x,i.y*t.y),e.lineTo(i.x*t.x+i.offsetX,i.y*t.y+i.offsetY))}),n&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:s,cornerColor:a}=this,o=Ve({cornerStrokeColor:i,cornerDashArray:s,cornerColor:a},t);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=o.cornerColor,this.transparentCorners||(e.strokeStyle=o.cornerStrokeColor),this._setLineDash(e,o.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const u=this.oCoords[c];l.render(e,u.x,u.y,o,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[n,i]=t;return this.setControlVisible(n,i)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t);const i=this.width+4,s=this.height+4;return t.clearRect(-i/2,-s/2,i,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function iQ(r,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))})}),r}Be(b_,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Ha extends b_{}iQ(Ha,[QX]),dn.setClass(Ha),dn.setClass(Ha,"object");const MEe=(r,e,t,n)=>{const i=2*(n=Math.round(n))+1,{data:s}=r.getImageData(e-n,t-n,i,i);for(let a=3;a<s.length;a+=4)if(s[a]>0)return!1;return!0};class sQ{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new ut(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new ut(1/this.options.scaleX,1/this.options.scaleY):new ut(1,1)}createSideVector(e,t){const n=H3(e,t);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,t,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new ut(e);return t.y+=t.x*Math.tan(ls(this.options.skewY)),t.x+=t.y*Math.tan(ls(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const AEe=new ut;class y1 extends sQ{static getOrthogonalRotationFactor(e,t){const n=t?Y3(e,t):XTe(e);return Math.abs(n)<yb?-1:1}constructor(e,t,n,i){super(i),Be(this,"AB",void 0),Be(this,"AC",void 0),Be(this,"alpha",void 0),Be(this,"bisector",void 0),this.A=new ut(e),this.B=new ut(t),this.C=new ut(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Y3(this.AB,this.AC),this.bisector=eP(qX(this.AB.eq(AEe)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t),s=ZX(i),a=y1.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,n*a)}projectBevel(){const e=[];return(this.alpha%pM==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),n=1/Math.sin(t/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),s=this.options.strokeUniform?W3(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return W3(i)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(i))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const n=[],i=new ut(y1.getOrthogonalRotationFactor(this.bisector),y1.getOrthogonalRotationFactor(new ut(this.bisector.y,this.bisector.x)));return[new ut(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),new ut(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i)].forEach(s=>{Wj(s,e,t)&&n.push(this.A.add(s))}),n}projectRoundWithSkew(e,t){const n=[],{skewX:i,skewY:s,scaleX:a,scaleY:o,strokeUniform:l}=this.options,c=new ut(Math.tan(ls(i)),Math.tan(ls(s))),u=this.strokeProjectionMagnitude,f=l?u/o/Math.sqrt(1/o**2+1/a**2*c.y**2):u/Math.sqrt(1+c.y**2),d=new ut(Math.sqrt(Math.max(u**2-f**2,0)),f),p=l?u/Math.sqrt(1+c.x**2*(1/o)**2/(1/a+1/a*c.x*c.y)**2):u/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),g=new ut(p,Math.sqrt(Math.max(u**2-p**2,0)));return[g,g.scalarMultiply(-1),d,d.scalarMultiply(-1)].map(_=>this.applySkew(l?_.multiply(this.strokeUniformScalar):_)).forEach(_=>{Wj(_,e,t)&&n.push(this.applySkew(this.A).add(_))}),n}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%pM==0,n=this.applySkew(this.A),i=e[t?0:2].subtract(n),s=e[t?1:0].subtract(n),a=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),o=Tw(i,a)>0,l=o?i:s,c=o?s:i;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class qj extends sQ{constructor(e,t,n){super(n),this.A=new ut(e),this.T=new ut(t)}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t);return this.scaleUnitVector(ZX(i),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new ut(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new y1(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new ut(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(eP(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(n);e.push(i.add(t),i.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const TEe=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(r.length===0)return n;const i=r.reduce((s,a)=>(s[s.length-1].eq(a)||s.push(new ut(a)),s),[new ut(r[0])]);if(i.length===1)t=!0;else if(!t){const s=i[0],a=((o,l)=>{for(let c=o.length-1;c>=0;c--)if(l(o[c],c,o))return c;return-1})(i,o=>!o.eq(s));i.splice(a+1)}return i.forEach((s,a,o)=>{let l,c;a===0?(c=o[1],l=t?s:o[o.length-1]):a===o.length-1?(l=o[a-1],c=t?s:o[0]):(l=o[a-1],c=o[a+1]),t&&o.length===1?n.push(...new qj(s,s,e).project()):!t||a!==0&&a!==o.length-1?n.push(...new y1(s,l,c,e).project()):n.push(...new qj(s,a===0?c:l,e).project())}),n},rP=r=>{const e={};return Object.keys(r).forEach(t=>{e[t]={},Object.keys(r[t]).forEach(n=>{e[t][n]=Ve({},r[t][n])})}),e},EEe=r=>r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),iP=r=>{const e=[];for(let t,n=0;n<r.length;n++)(t=IEe(r,n))!==!1&&e.push(t);return e},IEe=(r,e)=>{const t=r.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return r.charAt(e);if(55296<=t&&t<=56319){if(r.length<=e+1)throw"High surrogate without following low surrogate";const i=r.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return r.charAt(e)+r.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const n=r.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1},sP=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return r.fill!==e.fill||r.stroke!==e.stroke||r.strokeWidth!==e.strokeWidth||r.fontSize!==e.fontSize||r.fontFamily!==e.fontFamily||r.fontWeight!==e.fontWeight||r.fontStyle!==e.fontStyle||r.textBackgroundColor!==e.textBackgroundColor||r.deltaY!==e.deltaY||t&&(r.overline!==e.overline||r.underline!==e.underline||r.linethrough!==e.linethrough)},LEe=(r,e)=>{const t=e.split(`
`),n=[];let i=-1,s={};r=rP(r);for(let a=0;a<t.length;a++){const o=iP(t[a]);if(r[a])for(let l=0;l<o.length;l++){i++;const c=r[a][l];c&&Object.keys(c).length>0&&(sP(s,c,!0)?n.push({start:i,end:i+1,style:c}):n[n.length-1].end++),s=c||{}}else i+=o.length,s={}}return n},NEe=(r,e)=>{if(!Array.isArray(r))return rP(r);const t=e.split(YR),n={};let i=-1,s=0;for(let a=0;a<t.length;a++){const o=iP(t[a]);for(let l=0;l<o.length;l++)i++,r[s]&&r[s].start<=i&&i<r[s].end&&(n[a]=n[a]||{},n[a][l]=Ve({},r[s].style),i===r[s].end-1&&s++)}return n},ep=["display","transform",Fs,"fill-opacity","fill-rule","opacity",Bo,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Zj(r,e){const t=r.nodeName,n=r.getAttribute("class"),i=r.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let a;if(a=new RegExp("^"+t,"i"),e=e.replace(a,""),i&&e.length&&(a=new RegExp("#"+i+s,"i"),e=e.replace(a,"")),n&&e.length){const o=n.split(" ");for(let l=o.length;l--;)a=new RegExp("\\."+o[l]+s,"i"),e=e.replace(a,"")}return e.length===0}function DEe(r,e){let t=!0;const n=Zj(r,e.pop());return n&&e.length&&(t=function(i,s){let a,o=!0;for(;i.parentElement&&i.parentElement.nodeType===1&&s.length;)o&&(a=s.pop()),o=Zj(i=i.parentElement,a);return s.length===0}(r,e)),n&&t&&e.length===0}const kEe=r=>{var e;return(e=YTe[r])!==null&&e!==void 0?e:r},REe=new RegExp("(".concat(eg,")"),"gi"),PEe=r=>r.replace(REe," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var $j,ez,tz,nz,rz,iz,sz;const fo="(".concat(eg,")"),OEe=String.raw($j||($j=$h(["(skewX)(",")"],["(skewX)\\(","\\)"])),fo),FEe=String.raw(ez||(ez=$h(["(skewY)(",")"],["(skewY)\\(","\\)"])),fo),BEe=String.raw(tz||(tz=$h(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),fo,fo,fo),UEe=String.raw(nz||(nz=$h(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),fo,fo),jEe=String.raw(rz||(rz=$h(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),fo,fo),zEe=String.raw(iz||(iz=$h(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),fo,fo,fo,fo,fo,fo),aP="(?:".concat(zEe,"|").concat(jEe,"|").concat(BEe,"|").concat(UEe,"|").concat(OEe,"|").concat(FEe,")"),VEe="(?:".concat(aP,"*)"),GEe=String.raw(sz||(sz=$h(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),VEe),HEe=new RegExp(GEe),WEe=new RegExp(aP),YEe=new RegExp(aP,"g");function J3(r){const e=[];if(!(r=PEe(r).replace(/\s*([()])\s*/gi,"$1"))||r&&!HEe.test(r))return[...yo];for(const t of r.matchAll(YEe)){const n=WEe.exec(t[0]);if(!n)continue;let i=yo;const s=n.filter(g=>!!g),[,a,...o]=s,[l,c,u,f,d,p]=o.map(g=>parseFloat(g));switch(a){case"translate":i=wb(l,c);break;case JR:i=_b({angle:l},{x:c,y:u});break;case MT:i=KR(l,c);break;case xv:i=BX(l);break;case Cv:i=UX(l);break;case"matrix":i=[l,c,u,f,d,p]}e.push(i)}return QR(e)}function JEe(r,e,t,n){const i=Array.isArray(e);let s,a=e;if(r!==Fs&&r!==Bo||e!==Fo){if(r==="strokeUniform")return e==="non-scaling-stroke";if(r==="strokeDashArray")a=e===Fo?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(r==="transformMatrix")a=t&&t.transformMatrix?wa(t.transformMatrix,J3(e)):J3(e);else if(r==="visible")a=e!==Fo&&e!=="hidden",t&&t.visible===!1&&(a=!1);else if(r==="opacity")a=parseFloat(e),t&&t.opacity!==void 0&&(a*=t.opacity);else if(r==="textAnchor")a=e==="start"?Hr:e==="end"?ss:or;else if(r==="charSpacing")s=g1(e,n)/n*1e3;else if(r==="paintFirst"){const o=e.indexOf(Fs),l=e.indexOf(Bo);a=Fs,(o>-1&&l>-1&&l<o||o===-1&&l>-1)&&(a=Bo)}else{if(r==="href"||r==="xlink:href"||r==="font"||r==="id")return e;if(r==="imageSmoothing")return e==="optimizeQuality";s=i?e.map(g1):g1(e,n)}}else a="";return!i&&isNaN(s)?a:s}function XEe(r,e){const t=r.match(WTe);if(!t)return;const n=t[1],i=t[3],s=t[4],a=t[5],o=t[6];n&&(e.fontStyle=n),i&&(e.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),s&&(e.fontSize=g1(s)),o&&(e.fontFamily=o),a&&(e.lineHeight=a==="normal"?1:a)}function QEe(r,e){r.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[n,i]=t.split(":");e[n.trim().toLowerCase()]=i.trim()})}function KEe(r){const e={},t=r.getAttribute("style");return t&&(typeof t=="string"?QEe(t,e):function(n,i){Object.entries(n).forEach(s=>{let[a,o]=s;o!==void 0&&(i[a.toLowerCase()]=o)})}(t,e)),e}const qEe={stroke:"strokeOpacity",fill:"fillOpacity"};function ud(r,e,t){if(!r)return{};let n,i={},s=WR;r.parentNode&&Hj.test(r.parentNode.nodeName)&&(i=ud(r.parentElement,e,t),i.fontSize&&(n=s=g1(i.fontSize)));const a=Ve(Ve(Ve({},e.reduce((c,u)=>{const f=r.getAttribute(u);return f&&(c[u]=f),c},{})),function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f={};for(const d in u)DEe(c,d.split(" "))&&(f=Ve(Ve({},f),u[d]));return f}(r,t)),KEe(r));a[xI]&&r.setAttribute(xI,a[xI]),a[SI]&&(n=g1(a[SI],s),a[SI]="".concat(n));const o={};for(const c in a){const u=kEe(c),f=JEe(u,a[c],i,n);o[u]=f}o&&o.font&&XEe(o.font,o);const l=Ve(Ve({},i),o);return Hj.test(r.nodeName)?l:function(c){const u=Ha.getDefaults();return Object.entries(qEe).forEach(f=>{let[d,p]=f;if(c[p]===void 0||c[d]==="")return;if(c[d]===void 0){if(!u[d])return;c[d]=u[d]}if(c[d].indexOf("url(")===0)return;const g=new Gr(c[d]);c[d]=g.setAlpha(Fi(g.getAlpha()*c[p],2)).toRgba()}),c}(l)}const ZEe=["left","top","width","height","visible"],aQ=["rx","ry"];class mu extends Ha{static getDefaults(){return Ve(Ve({},super.getDefaults()),mu.ownDefaults)}constructor(e){super(),Object.assign(this,mu.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:n}=this,i=-t/2,s=-n/2,a=this.rx?Math.min(this.rx,t/2):0,o=this.ry?Math.min(this.ry,n/2):0,l=a!==0||o!==0;e.beginPath(),e.moveTo(i+a,s),e.lineTo(i+t-a,s),l&&e.bezierCurveTo(i+t-$d*a,s,i+t,s+$d*o,i+t,s+o),e.lineTo(i+t,s+n-o),l&&e.bezierCurveTo(i+t,s+n-$d*o,i+t-$d*a,s+n,i+t-a,s+n),e.lineTo(i+a,s+n),l&&e.bezierCurveTo(i+$d*a,s+n,i,s+n-$d*o,i,s+n-o),e.lineTo(i,s+o),l&&e.bezierCurveTo(i,s+$d*o,i+$d*a,s,i+a,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...aQ,...e])}_toSVG(){const{width:e,height:t,rx:n,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(n,'" ry="').concat(i,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,n){const i=ud(e,this.ATTRIBUTE_NAMES,n),{left:s=0,top:a=0,width:o=0,height:l=0,visible:c=!0}=i,u=Ti(i,ZEe);return new this(Ve(Ve(Ve({},t),u),{},{left:s,top:a,width:o,height:l,visible:!!(c&&o&&l)}))}}Be(mu,"type","Rect"),Be(mu,"cacheProperties",[...cd,...aQ]),Be(mu,"ownDefaults",{rx:0,ry:0}),Be(mu,"ATTRIBUTE_NAMES",[...ep,"x","y","rx","ry","width","height"]),dn.setClass(mu),dn.setSVGClass(mu);const Pf="initialization",SM="added",oP="removed",xM="imperative",oQ=(r,e)=>{const{strokeUniform:t,strokeWidth:n,width:i,height:s,group:a}=e,o=a&&a!==r?ET(a.calcTransformMatrix(),r.calcTransformMatrix()):null,l=o?e.getRelativeCenterPoint().transform(o):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),u=t&&c?zTe(new ut(n,n),void 0,r.calcTransformMatrix()):XR,f=!t&&c?n:0,d=ZR(i+f,s+f,QR([o,e.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(d),l.add(d)]};class NT{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:n,strategy:i}=e;return t===Pf||t===xM||!!n&&i!==n}shouldLayoutClipPath(e){let{type:t,target:{clipPath:n}}=e;return t!==Pf&&n&&!n.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:n,target:i}=t;if(n===xM&&t.overrides)return t.overrides;if(e.length===0)return;const{left:s,top:a,width:o,height:l}=Gf(e.map(f=>oQ(i,f)).reduce((f,d)=>f.concat(d),[])),c=new ut(o,l),u=new ut(s,a).add(c.scalarDivide(2));if(n===Pf){const f=this.getInitialSize(t,{size:c,center:u});return{center:u,relativeCorrection:new ut(0,0),size:f}}return{center:u.transform(i.calcOwnMatrix()),size:c}}}Be(NT,"type","strategy");class X3 extends NT{shouldPerformLayout(e){return!0}}Be(X3,"type","fit-content"),dn.setClass(X3);const $Ee=["strategy"],e4e=["target","strategy","bubbles","prevStrategy"],lQ="layoutManager";class S_{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new X3;Be(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=Ve(Ve({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const n=this.getLayoutResult(t);n&&this.commitLayout(t,n),this.onAfterLayout(t,n),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:n}=t;return[gM,IX,y_,LX,CT,NX,mM,ATe,TTe].map(i=>e.on(i,s=>this.performLayout(i===gM?{type:"object_modified",trigger:i,e:s,target:n}:{type:"object_modifying",trigger:i,e:s,target:n})))}subscribe(e,t){this.unsubscribe(e,t);const n=this.attachHandlers(e,t);this._subscriptions.set(e,n)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(n=>n()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:n}=e,{canvas:i}=t;if(n===Pf||n===SM?this.subscribeTargets(e):n===oP&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),i&&i.fire("object:layout:before",{target:t,context:e}),n===xM&&e.deep){const s=Ti(e,$Ee);t.forEachObject(a=>a.layoutManager&&a.layoutManager.performLayout(Ve(Ve({},s),{},{bubbles:!1,target:a})))}}getLayoutResult(e){const{target:t,strategy:n,type:i}=e,s=n.calcLayoutResult(e,t.getObjects());if(!s)return;const a=i===Pf?new ut:t.getRelativeCenterPoint(),{center:o,correction:l=new ut,relativeCorrection:c=new ut}=s,u=a.subtract(o).add(l).transform(i===Pf?yo:Pc(t.calcOwnMatrix()),!0).add(c);return{result:s,prevCenter:a,nextCenter:o,offset:u}}commitLayout(e,t){const{target:n}=e,{result:{size:i},nextCenter:s}=t;var a,o;n.set({width:i.x,height:i.y}),this.layoutObjects(e,t),e.type===Pf?n.set({left:(a=e.x)!==null&&a!==void 0?a:s.x+i.x*ws(n.originX),top:(o=e.y)!==null&&o!==void 0?o:s.y+i.y*ws(n.originY)}):(n.setPositionByOrigin(s,or,or),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,t){const{target:n}=e;n.forEachObject(i=>{i.group===n&&this.layoutObject(e,t,i)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,n.clipPath)}layoutObject(e,t,n){let{offset:i}=t;n.set({left:n.left+i.x,top:n.top+i.y})}onAfterLayout(e,t){const{target:n,strategy:i,bubbles:s,prevStrategy:a}=e,o=Ti(e,e4e),{canvas:l}=n;n.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:n});const c=n.parent;s&&c!=null&&c.layoutManager&&((o.path||(o.path=[])).push(n),c.layoutManager.performLayout(Ve(Ve({},o),{},{target:c}))),n.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(n=>n())),e.clear()}toObject(){return{type:lQ,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}dn.setClass(S_,lQ);const t4e=["type","objects","layoutManager"];class n4e extends S_{performLayout(){}}class Rm extends DX(Ha){static getDefaults(){return Ve(Ve({},super.getDefaults()),Rm.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Be(this,"_activeObjects",[]),Be(this,"__objectSelectionTracker",void 0),Be(this,"__objectSelectionDisposer",void 0),Object.assign(this,Rm.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(i=>{this.enterGroup(i,!1)}),this.layoutManager=(n=t.layoutManager)!==null&&n!==void 0?n:new S_,this.layoutManager.performLayout({type:Pf,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(Bh("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(Bh("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,n,i)=>this.canEnterGroup(t)&&i.indexOf(t)===n)}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...i);return this._onAfterObjectsChange(SM,i),s}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(n),a=super.insertAt(e,...s);return this._onAfterObjectsChange(SM,s),a}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(oP,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const n=this[e];return super._set(e,t),e==="canvas"&&n!==t&&(this._objects||[]).forEach(i=>{i._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:n}=t;const i=this._activeObjects;if(e)i.push(n),this._set("dirty",!0);else if(i.length>0){const s=i.indexOf(n);s>-1&&(i.splice(s,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&_M(e,wa(Pc(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(_M(e,wa(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const e=Ha.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,n){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var i;const a=this._objects[s];(i=this.canvas)!==null&&i!==void 0&&i.preserveObjectStacking&&a.group!==this?(e.save(),e.transform(...Pc(this.calcTransformMatrix())),a.render(e),e.restore()):a.group===this&&a.render(e)}this._drawClipPath(e,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(Ve({target:this,type:xM},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const n=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const s=i.includeDefaultValues;i.includeDefaultValues=n;const a=i[e||"toObject"](t);return i.includeDefaultValues=s,a})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return Ve(Ve(Ve({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=mu.prototype._toSVG.call(this),n=t.indexOf("COMMON_PARTS");t[n]='for="group" ';const i=t.join("");return e?e(i):i}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(e);n&&t.push("		",n);for(let i=0;i<this._objects.length;i++)t.push("		",this._objects[i].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],n=this._createSVGBgRect(e);n&&t.push("	",n);for(let i=0;i<this._objects.length;i++)t.push("	",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:n,objects:i=[],layoutManager:s}=e,a=Ti(e,t4e);return Promise.all([w_(i,t),TT(a,t)]).then(o=>{let[l,c]=o;const u=new this(l,Ve(Ve(Ve({},a),c),{},{layoutManager:new n4e}));if(s){const f=dn.getClass(s.type),d=dn.getClass(s.strategy);u.layoutManager=new f(new d)}else u.layoutManager=new S_;return u.layoutManager.subscribeTargets({type:Pf,target:u,targets:u.getObjects()}),u.setCoords(),u})}}Be(Rm,"type","Group"),Be(Rm,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),dn.setClass(Rm);const r4e=(r,e)=>Math.min(e.width/r.width,e.height/r.height),i4e=(r,e)=>Math.max(e.width/r.width,e.height/r.height),Q3="\\s*,?\\s*",Uy="".concat(Q3,"(").concat(eg,")"),s4e="".concat(Uy).concat(Uy).concat(Uy).concat(Q3,"([01])").concat(Q3,"([01])").concat(Uy).concat(Uy),a4e={m:"l",M:"L"},o4e=(r,e,t,n,i,s,a,o,l,c,u)=>{const f=rd(r),d=id(r),p=rd(e),g=id(e),_=t*i*p-n*s*g+a,w=n*i*p+t*s*g+o;return["C",c+l*(-t*i*d-n*s*f),u+l*(-n*i*d+t*s*f),_+l*(t*i*g+n*s*p),w+l*(n*i*g-t*s*p),_,w]},az=(r,e,t,n)=>{const i=Math.atan2(e,r),s=Math.atan2(n,t);return s>=i?s-i:2*Math.PI-(i-s)};function oz(r,e,t,n,i,s,a,o){let l;if(Rr.cachesBoundsOfCurve&&(l=[...arguments].join(),Aw.boundsOfCurveCache[l]))return Aw.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,f=[],d=[[0,0],[0,0]];let p=6*r-12*t+6*i,g=-3*r+9*t-9*i+3*a,_=3*t-3*r;for(let A=0;A<2;++A){if(A>0&&(p=6*e-12*n+6*s,g=-3*e+9*n-9*s+3*o,_=3*n-3*e),u(g)<1e-12){if(u(p)<1e-12)continue;const D=-_/p;0<D&&D<1&&f.push(D);continue}const k=p*p-4*_*g;if(k<0)continue;const O=c(k),R=(-p+O)/(2*g);0<R&&R<1&&f.push(R);const I=(-p-O)/(2*g);0<I&&I<1&&f.push(I)}let w=f.length;const b=w,C=cQ(r,e,t,n,i,s,a,o);for(;w--;){const{x:A,y:k}=C(f[w]);d[0][w]=A,d[1][w]=k}d[0][b]=r,d[1][b]=e,d[0][b+1]=a,d[1][b+1]=o;const M=[new ut(Math.min(...d[0]),Math.min(...d[1])),new ut(Math.max(...d[0]),Math.max(...d[1]))];return Rr.cachesBoundsOfCurve&&(Aw.boundsOfCurveCache[l]=M),M}const l4e=(r,e,t)=>{let[n,i,s,a,o,l,c,u]=t;const f=((d,p,g,_,w,b,C)=>{if(g===0||_===0)return[];let M=0,A=0,k=0;const O=Math.PI,R=C*HR,I=id(R),D=rd(R),E=.5*(-D*d-I*p),B=.5*(-D*p+I*d),U=g**2,V=_**2,X=B**2,te=E**2,ee=U*V-U*X-V*te;let ue=Math.abs(g),ne=Math.abs(_);if(ee<0){const je=Math.sqrt(1-ee/(U*V));ue*=je,ne*=je}else k=(w===b?-1:1)*Math.sqrt(ee/(U*X+V*te));const oe=k*ue*B/ne,q=-k*ne*E/ue,J=D*oe-I*q+.5*d,ie=I*oe+D*q+.5*p;let he=az(1,0,(E-oe)/ue,(B-q)/ne),$=az((E-oe)/ue,(B-q)/ne,(-E-oe)/ue,(-B-q)/ne);b===0&&$>0?$-=2*O:b===1&&$<0&&($+=2*O);const ge=Math.ceil(Math.abs($/O*2)),pe=[],we=$/ge,ke=8/3*Math.sin(we/4)*Math.sin(we/4)/Math.sin(we/2);let Pe=he+we;for(let je=0;je<ge;je++)pe[je]=o4e(he,Pe,D,I,ue,ne,J,ie,ke,M,A),M=pe[je][5],A=pe[je][6],he=Pe,Pe+=we;return pe})(c-r,u-e,i,s,o,l,a);for(let d=0,p=f.length;d<p;d++)f[d][1]+=r,f[d][2]+=e,f[d][3]+=r,f[d][4]+=e,f[d][5]+=r,f[d][6]+=e;return f},c4e=r=>{let e=0,t=0,n=0,i=0;const s=[];let a,o=0,l=0;for(const c of r){const u=[...c];let f;switch(u[0]){case"l":u[1]+=e,u[2]+=t;case"L":e=u[1],t=u[2],f=["L",e,t];break;case"h":u[1]+=e;case"H":e=u[1],f=["L",e,t];break;case"v":u[1]+=t;case"V":t=u[1],f=["L",e,t];break;case"m":u[1]+=e,u[2]+=t;case"M":e=u[1],t=u[2],n=u[1],i=u[2],f=["M",e,t];break;case"c":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t,u[5]+=e,u[6]+=t;case"C":o=u[3],l=u[4],e=u[5],t=u[6],f=["C",u[1],u[2],o,l,e,t];break;case"s":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"S":a==="C"?(o=2*e-o,l=2*t-l):(o=e,l=t),e=u[3],t=u[4],f=["C",o,l,u[1],u[2],e,t],o=f[3],l=f[4];break;case"q":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"Q":o=u[1],l=u[2],e=u[3],t=u[4],f=["Q",o,l,e,t];break;case"t":u[1]+=e,u[2]+=t;case"T":a==="Q"?(o=2*e-o,l=2*t-l):(o=e,l=t),e=u[1],t=u[2],f=["Q",o,l,e,t];break;case"a":u[6]+=e,u[7]+=t;case"A":l4e(e,t,u).forEach(d=>s.push(d)),e=u[6],t=u[7];break;case"z":case"Z":e=n,t=i,f=["Z"]}f?(s.push(f),a=f[0]):a=""}return s},CM=(r,e,t,n)=>Math.sqrt((t-r)**2+(n-e)**2),cQ=(r,e,t,n,i,s,a,o)=>l=>{const c=l**3,u=(p=>3*p**2*(1-p))(l),f=(p=>3*p*(1-p)**2)(l),d=(p=>(1-p)**3)(l);return new ut(a*c+i*u+t*f+r*d,o*c+s*u+n*f+e*d)},uQ=r=>r**2,fQ=r=>2*r*(1-r),dQ=r=>(1-r)**2,u4e=(r,e,t,n,i,s,a,o)=>l=>{const c=uQ(l),u=fQ(l),f=dQ(l),d=3*(f*(t-r)+u*(i-t)+c*(a-i)),p=3*(f*(n-e)+u*(s-n)+c*(o-s));return Math.atan2(p,d)},f4e=(r,e,t,n,i,s)=>a=>{const o=uQ(a),l=fQ(a),c=dQ(a);return new ut(i*o+t*l+r*c,s*o+n*l+e*c)},d4e=(r,e,t,n,i,s)=>a=>{const o=1-a,l=2*(o*(t-r)+a*(i-t)),c=2*(o*(n-e)+a*(s-n));return Math.atan2(c,l)},lz=(r,e,t)=>{let n=new ut(e,t),i=0;for(let s=1;s<=100;s+=1){const a=r(s/100);i+=CM(n.x,n.y,a.x,a.y),n=a}return i},h4e=(r,e)=>{let t,n=0,i=0,s={x:r.x,y:r.y},a=Ve({},s),o=.01,l=0;const c=r.iterator,u=r.angleFinder;for(;i<e&&o>1e-4;)a=c(n),l=n,t=CM(s.x,s.y,a.x,a.y),t+i>e?(n-=o,o/=2):(s=a,n+=o,i+=t);return Ve(Ve({},a),{},{angle:u(l)})},hQ=r=>{let e,t,n=0,i=0,s=0,a=0,o=0;const l=[];for(const c of r){const u={x:i,y:s,command:c[0],length:0};switch(c[0]){case"M":t=u,t.x=a=i=c[1],t.y=o=s=c[2];break;case"L":t=u,t.length=CM(i,s,c[1],c[2]),i=c[1],s=c[2];break;case"C":e=cQ(i,s,c[1],c[2],c[3],c[4],c[5],c[6]),t=u,t.iterator=e,t.angleFinder=u4e(i,s,c[1],c[2],c[3],c[4],c[5],c[6]),t.length=lz(e,i,s),i=c[5],s=c[6];break;case"Q":e=f4e(i,s,c[1],c[2],c[3],c[4]),t=u,t.iterator=e,t.angleFinder=d4e(i,s,c[1],c[2],c[3],c[4]),t.length=lz(e,i,s),i=c[3],s=c[4];break;case"Z":t=u,t.destX=a,t.destY=o,t.length=CM(i,s,a,o),i=a,s=o}n+=t.length,l.push(t)}return l.push({length:n,x:i,y:s}),l},p4e=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:hQ(r),n=0;for(;e-t[n].length>0&&n<t.length-2;)e-=t[n].length,n++;const i=t[n],s=e/i.length,a=r[n];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return Ve(Ve({},new ut(i.x,i.y).lerp(new ut(i.destX,i.destY),s)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return Ve(Ve({},new ut(i.x,i.y).lerp(new ut(a[1],a[2]),s)),{},{angle:Math.atan2(a[2]-i.y,a[1]-i.x)});case"C":case"Q":return h4e(i,e)}},m4e=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),cz=new RegExp(s4e,"g"),g4e=new RegExp(eg,"gi"),v4e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},y4e=r=>{var e;const t=[],n=(e=r.match(m4e))!==null&&e!==void 0?e:[];for(const i of n){const s=i[0];if(s==="z"||s==="Z"){t.push([s]);continue}const a=v4e[s.toLowerCase()];let o=[];if(s==="a"||s==="A"){cz.lastIndex=0;for(let l=null;l=cz.exec(i);)o.push(...l.slice(1))}else o=i.match(g4e)||[];for(let l=0;l<o.length;l+=a){const c=new Array(a),u=a4e[s];c[0]=l>0&&u?u:s;for(let f=0;f<a;f++)c[f+1]=parseFloat(o[l+f]);t.push(c)}}return t},w4e=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new ut(r[0]),n=new ut(r[1]),i=1,s=0;const a=[],o=r.length,l=o>2;let c;for(l&&(i=r[2].x<n.x?-1:r[2].x===n.x?0:1,s=r[2].y<n.y?-1:r[2].y===n.y?0:1),a.push(["M",t.x-i*e,t.y-s*e]),c=1;c<o;c++){if(!t.eq(n)){const u=t.midPointFrom(n);a.push(["Q",t.x,t.y,u.x,u.y])}t=r[c],c+1<r.length&&(n=r[c+1])}return l&&(i=t.x>r[c-2].x?1:t.x===r[c-2].x?0:-1,s=t.y>r[c-2].y?1:t.y===r[c-2].y?0:-1),a.push(["L",t.x+i*e,t.y+s*e]),a},pQ=(r,e)=>r.map(t=>t.map((n,i)=>i===0||e===void 0?n:Fi(n,e)).join(" ")).join(" ");function K3(r,e){const t=r.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(n=>{let[i,s]=n;return t.setProperty(i,s)}))}class _4e extends GX{constructor(e){let{allowTouchScrolling:t=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),Be(this,"upper",void 0),Be(this,"container",void 0);const{el:i}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const a=this.createContainerElement();a.classList.add(n),i.parentNode&&i.parentNode.replaceChild(a,i),a.append(i,s),this.container=a}createUpperCanvas(){const{el:e}=this.lower,t=Gc();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Sv().createElement("div");return e.setAttribute("data-fabric","wrapper"),K3(e,{position:"relative"}),zj(e),e}applyCanvasStyle(e,t){const{styles:n,allowTouchScrolling:i}=t;K3(e,Ve(Ve({},n),{},{"touch-action":i?"manipulation":Fo})),zj(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:n,ctx:i}=this.upper;VX(n,i,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),z3(this.upper.el,e),z3(this.container,e)}cleanupDOM(e){const t=this.container,{el:n}=this.lower,{el:i}=this.upper;super.cleanupDOM(e),t.removeChild(i),t.removeChild(n),t.parentNode&&t.parentNode.replaceChild(n,t)}dispose(){super.dispose(),Fu().dispose(this.upper.el),delete this.upper,delete this.container}}class DT extends bb{constructor(){super(...arguments),Be(this,"targets",[]),Be(this,"_hoveredTargets",[]),Be(this,"_objectsToRender",void 0),Be(this,"_currentTransform",null),Be(this,"_groupSelector",null),Be(this,"contextTopDirty",!1)}static getDefaults(){return Ve(Ve({},super.getDefaults()),DT.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new _4e(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),n=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,n){const i=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+i,-n+i),s.transform(...this.viewportTransform);const a=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=a,s.restore();const o=Math.round(i*this.getRetinaScaling());return MEe(s,o,o,o)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(n=>!!n&&e[n]===!0):e[t])}_shouldClearSelection(e,t){const n=this.getActiveObjects(),i=this._activeObject;return!!(!t||t&&i&&n.length>1&&n.indexOf(t)===-1&&i!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&i&&i!==t)}_shouldCenterTransform(e,t,n){if(!e)return;let i;return t===MT||t===Vo||t===Hl||t===y_?i=this.centeredScaling||e.centeredScaling:t===JR&&(i=this.centeredRotation||e.centeredRotation),i?!n:n}_getOriginFromCorner(e,t){const n={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?n.x=ss:["mr","tr","br"].includes(t)&&(n.x=Hr),["tl","mt","tr"].includes(t)?n.y=j3:["bl","mb","br"].includes(t)&&(n.y=Oo)),n}_setupCurrentTransform(e,t,n){var i;const s=t.group?v1(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:a="",control:o}=t.getActiveControl()||{},l=n&&o?(i=o.getActionHandler(e,t,o))===null||i===void 0?void 0:i.bind(o):HTe,c=((p,g,_,w)=>{if(!g||!p)return"drag";const b=w.controls[g];return b.getActionName(_,b,w)})(n,a,e,t),u=e[this.centeredKey],f=this._shouldCenterTransform(t,c,u)?{x:or,y:or}:this._getOriginFromCorner(t,a),d={target:t,action:c,actionHandler:l,actionPerformed:!1,corner:a,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:f.x,originY:f.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:ls(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:u,original:Ve(Ve({},HX(t)),{},{originX:f.x,originY:f.y})};this._currentTransform=d,this.fire("before:transform",{e,transform:d})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:n,deltaX:i,deltaY:s}=this._groupSelector,a=new ut(t,n).transform(this.viewportTransform),o=new ut(t+i,n+s).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(a.x,o.x),u=Math.min(a.y,o.y),f=Math.max(a.x,o.x),d=Math.max(a.y,o.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,u,f-c,d-u)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,u+=l,f-=l,d-=l,Ha.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,u,f-c,d-u))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),n=this._activeObject,i=this.getActiveObjects();if(this.targets=[],n&&i.length>=1){if(n.findControl(t,V3(e))||i.length>1&&this.searchPossibleTargets([n],t))return n;if(n===this.searchPossibleTargets([n],t)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const a=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&a&&a!==n?(this.targets=s,n):a}return n}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let n=e.getCoords();const i=this.getZoom(),s=e.padding/i;if(s){const[a,o,l,c]=n,u=Math.atan2(o.y-a.y,o.x-a.x),f=rd(u)*s,d=id(u)*s,p=f+d,g=f-d;n=[new ut(a.x-g,a.y-p),new ut(o.x+p,o.y-g),new ut(l.x+g,l.y+p),new ut(c.x-p,c.y+g)]}return Ri.isPointInPolygon(t,n)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,v1(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let n=e.length;for(;n--;){const i=e[n];if(this._checkTarget(i,t)){if(Rx(i)&&i.subTargetCheck){const s=this._searchPossibleTargets(i._objects,t);s&&this.targets.push(s)}return i}}}searchPossibleTargets(e,t){const n=this._searchPossibleTargets(e,t);if(n&&Rx(n)&&n.interactive&&this.targets[0]){const i=this.targets;for(let s=i.length-1;s>0;s--){const a=i[s];if(!Rx(a)||!a.interactive)return a}return i[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,i=n.getBoundingClientRect();let s=FTe(e),a=i.width||0,o=i.height||0;a&&o||(Oo in i&&j3 in i&&(o=Math.abs(i.top-i.bottom)),ss in i&&Hr in i&&(a=Math.abs(i.right-i.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=v1(s,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(s.x/=l,s.y/=l);const c=a===0||o===0?new ut(1,1):new ut(n.width/a,n.height/o);return s.multiply(c)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Gc(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return om(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let n=!1,i=!1;const s=this.getActiveObjects(),a=[],o=[];e.forEach(l=>{s.includes(l)||(n=!0,l.fire("deselected",{e:t,target:l}),o.push(l))}),s.forEach(l=>{e.includes(l)||(n=!0,l.fire("selected",{e:t,target:l}),a.push(l))}),e.length>0&&s.length>0?(i=!0,n&&this.fire("selection:updated",{e:t,selected:a,deselected:o})):s.length>0?(i=!0,this.fire("selection:created",{e:t,selected:a})):e.length>0&&(i=!0,this.fire("selection:cleared",{e:t,deselected:o})),i&&(this._objectsToRender=void 0)}setActiveObject(e,t){const n=this.getActiveObjects(),i=this._setActiveObject(e,t);return this._fireSelectionEvents(n,t),i}_setActiveObject(e,t){const n=this._activeObject;return n!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,om(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const n=this._activeObject;return!!n&&!n.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),om(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),n=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[n]});const i=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),i}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,n=t.target,i={e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),t.actionPerformed&&(this.fire("object:modified",i),n.fire(gM,i))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;om(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,n){const i=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,n);return e.set(i),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&om(t)&&this._activeObject===t){const n=Mv(e,["angle","flipX","flipY",Hr,Vo,Hl,xv,Cv,Oo]);return UTe(e,t.calcOwnMatrix()),n}return{}}_setSVGObject(e,t,n){const i=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,n),t.set(i)}}Be(DT,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class b4e{constructor(e){Be(this,"targets",[]),Be(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:i}=e.getActiveObject()||{};i&&i.focus()},n=e.upperCanvasEl;n.addEventListener("click",t),this.__disposer=()=>n.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),O0(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const S4e=["target","oldTarget","fireCanvas","e"],sl={passive:!1},x0=(r,e)=>{const t=r.getViewportPoint(e),n=r.getScenePoint(e);return{viewportPoint:t,scenePoint:n,pointer:t,absolutePointer:n}},eh=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return r.addEventListener(...t)},kl=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return r.removeEventListener(...t)},x4e={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class q3 extends DT{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),Be(this,"_isClick",void 0),Be(this,"textEditingManager",new b4e(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(eh,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const n=this.upperCanvasEl,i=this._getEventPrefix();e(zX(n),"resize",this._onResize),e(n,i+"down",this._onMouseDown),e(n,"".concat(i,"move"),this._onMouseMove,sl),e(n,"".concat(i,"out"),this._onMouseOut),e(n,"".concat(i,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"dblclick",this._onDoubleClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,sl)}removeListeners(){this.addOrRemove(kl,"remove");const e=this._getEventPrefix(),t=Dc(this.upperCanvasEl);kl(t,"".concat(e,"up"),this._onMouseUp),kl(t,"touchend",this._onTouchEnd,sl),kl(t,"".concat(e,"move"),this._onMouseMove,sl),kl(t,"touchmove",this._onMouseMove,sl),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,n=Ve({e},x0(this,e));this.fire("mouse:out",Ve(Ve({},n),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",Ve({},n)),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",Ve(Ve({},n),{},{target:i})),i&&i.fire("mouseout",Ve({},n))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",Ve({e},x0(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const n={e,target:t};return this.fire("dragstart",n),t.fire("dragstart",n),void eh(this.upperCanvasEl,"drag",this._onDragProgress)}G3(e)}_renderDragEffects(e,t,n){let i=!1;const s=this._dropTarget;s&&s!==t&&s!==n&&(s.clearContextTop(),i=!0),t==null||t.clearContextTop(),n!==t&&(n==null||n.clearContextTop());const a=this.contextTop;a.save(),a.transform(...this.viewportTransform),t&&(a.save(),t.transform(a),t.renderDragSourceEffect(e),a.restore(),i=!0),n&&(a.save(),n.transform(a),n.renderDropTargetEffect(e),a.restore(),i=!0),a.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Fo,n=t?this._activeObject:void 0,i={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:n};kl(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:n,targets:i}=this.findDragTargets(e),s=this._dragSource,a={e,target:n,subTargets:i,dragSource:s,canDrop:!1,dropTarget:void 0};let o;this.fire(t,a),this._fireEnterLeaveEvents(n,a),n&&(n.canDrop(e)&&(o=n),n.fire(t,a));for(let l=0;l<i.length;l++){const c=i[l];c.canDrop(e)&&(o=c),c.fire(t,a)}this._renderDragEffects(e,s,o),this._dropTarget=o}_onDragEnter(e){const{target:t,targets:n}=this.findDragTargets(e),i={e,target:t,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(t,i)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:n}=this.findDragTargets(e),i=this._basicEventHandler("drop:before",Ve({e,target:t,subTargets:n,dragSource:this._dragSource},x0(this,e)));i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(e){const t=this.findTarget(e),n=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:n});return this.stopContextMenu&&G3(e),this._basicEventHandler("contextmenu",i),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const n=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||n&&this._target===n)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const i=this.upperCanvasEl,s=this._getEventPrefix(),a=Dc(i);eh(a,"touchend",this._onTouchEnd,sl),t&&eh(a,"touchmove",this._onMouseMove,sl),kl(i,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();kl(t,"".concat(n,"move"),this._onMouseMove,sl);const i=Dc(t);eh(i,"".concat(n,"up"),this._onMouseUp),eh(i,"".concat(n,"move"),this._onMouseMove,sl)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),n=Dc(this.upperCanvasEl);kl(n,"touchend",this._onTouchEnd,sl),kl(n,"touchmove",this._onMouseMove,sl),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{eh(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){const i=Dc(this.upperCanvasEl);kl(i,"".concat(n,"up"),this._onMouseUp),kl(i,"".concat(n,"move"),this._onMouseMove,sl),eh(t,"".concat(n,"move"),this._onMouseMove,sl)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const n=this._currentTransform,i=this._isClick,s=this._target,{button:a}=e;if(a)return(this.fireMiddleClick&&a===1||this.fireRightClick&&a===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let o,l,c=!1;if(n&&(this._finalizeCurrentTransform(e),c=n.actionPerformed),!i){const u=s===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(s)||!u&&s===this._activeObject)}if(s){const u=s.findControl(this.getViewportPoint(e),V3(e)),{key:f,control:d}=u||{};if(l=f,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),c=!0;else if(d){const p=d.getMouseUpHandler(e,s,d);p&&(o=this.getScenePoint(e),p.call(d,e,n,o.x,o.y))}s.isMoving=!1}if(n&&(n.target!==s||n.corner!==l)){const u=n.target&&n.target.controls[n.corner],f=u&&u.getMouseUpHandler(e,n.target,u);o=o||this.getScenePoint(e),f&&f.call(u,e,n,o.x,o.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),c?this.requestRenderAll():i||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:n,subTargets:i=[]}=t;this.fire(e,t),n&&n.fire(e,t);for(let s=0;s<i.length;s++)i[s]!==n&&i[s].fire(e,t);return t}_handleEvent(e,t){const n=this._target,i=this.targets||[],s=Ve(Ve({e,target:n,subTargets:i},x0(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),s),n&&n.fire("mouse".concat(t),s);for(let a=0;a<i.length;a++)i[a]!==n&&i[a].fire("mouse".concat(t),s)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:n}=e;if(n)return(this.fireMiddleClick&&n===1||this.fireRightClick&&n===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let i=this._shouldRender(t),s=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,s=!0,i=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const a=this.getScenePoint(e);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(t){const a=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const o=t.findControl(this.getViewportPoint(e),V3(e));if(t===this._activeObject&&(o||!s)){this._setupCurrentTransform(e,t,a);const l=o?o.control:void 0,c=this.getScenePoint(e),u=l&&l.getMouseDownHandler(e,t,l);u&&u.call(l,e,this._currentTransform,c.x,c.y)}}i&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),i&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=v1(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const n=this.getScenePoint(e);t.deltaX=n.x-t.x,t.deltaY=n.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const n=this.findTarget(e);this._setCursorFromEvent(e,n),this._fireOverOutEvents(e,n)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const n=this._hoveredTarget,i=this._hoveredTargets,s=this.targets,a=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:n,fireCanvas:!0});for(let o=0;o<a;o++)this.fireSyntheticInOutEvents("mouse",{e,target:s[o],oldTarget:i[o]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const n=this._draggedoverTarget,i=this._hoveredTargets,s=this.targets,a=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("drag",Ve(Ve({},t),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let o=0;o<a;o++)this.fireSyntheticInOutEvents("drag",Ve(Ve({},t),{},{target:s[o],oldTarget:i[o]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:n,oldTarget:i,fireCanvas:s,e:a}=t,o=Ti(t,S4e);const{targetIn:l,targetOut:c,canvasIn:u,canvasOut:f}=x4e[e],d=i!==n;if(i&&d){const p=Ve(Ve({},o),{},{e:a,target:i,nextTarget:n},x0(this,a));s&&this.fire(f,p),i.fire(c,p)}if(n&&d){const p=Ve(Ve({},o),{},{e:a,target:n,previousTarget:i},x0(this,a));s&&this.fire(u,p),n.fire(l,p)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),n=this._currentTransform,i=n.target,s=i.group?v1(t,void 0,i.group.calcTransformMatrix()):t;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,s),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,n){const{action:i,actionHandler:s,target:a}=t,o=!!s&&s(e,t,n.x,n.y);o&&a.setCoords(),i==="drag"&&o&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||o}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let n=t.hoverCursor||this.hoverCursor;const i=om(this._activeObject)?this._activeObject:null,s=(!i||t.group!==i)&&t.findControl(this.getViewportPoint(e));if(s){const a=s.control;this.setCursor(a.cursorStyleHandler(e,a,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(a=>{n=a.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(e,t){const n=this._activeObject,i=om(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(n!==t||i)&&(i||!t.isDescendantOf(n)&&!n.isDescendantOf(t))&&!t.onSelect({e})&&!n.getActiveControl()){if(i){const s=n.getObjects();if(t===n){const a=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(s,a)||this.searchPossibleTargets(this._objects,a))||!t.selectable)return!1}t.group===n?(n.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(t),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,e)}else{n.isEditing&&n.exitEditing();const s=new(dn.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(n,t),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:n,deltaX:i,deltaY:s}=this._groupSelector,a=new ut(t,n),o=a.add(new ut(i,s)),l=a.min(o),c=a.max(o).subtract(l),u=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),f=a.eq(o)?u[0]?[u[0]]:[]:u.length>1?u.filter(d=>!d.onSelect({e})).reverse():u;if(f.length===1)this.setActiveObject(f[0],e);else if(f.length>1){const d=dn.getClass("ActiveSelection");this.setActiveObject(new d(f,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const mQ={x1:0,y1:0,x2:0,y2:0},C4e=Ve(Ve({},mQ),{},{r1:0,r2:0}),K0=(r,e)=>isNaN(r)&&typeof e=="number"?e:r,M4e=/^(\d+\.\d+)%|(\d+)%$/;function gQ(r){return r&&M4e.test(r)}function vQ(r,e){const t=typeof r=="number"?r:typeof r=="string"?parseFloat(r)/(gQ(r)?100:1):NaN;return $1(0,K0(t,e),1)}const A4e=/\s*;\s*/,T4e=/\s*:\s*/;function E4e(r,e){let t,n;const i=r.getAttribute("style");if(i){const a=i.split(A4e);a[a.length-1]===""&&a.pop();for(let o=a.length;o--;){const[l,c]=a[o].split(T4e).map(u=>u.trim());l==="stop-color"?t=c:l==="stop-opacity"&&(n=c)}}const s=new Gr(t||r.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:vQ(r.getAttribute("offset"),0),color:s.toRgb(),opacity:K0(parseFloat(n||r.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function I4e(r,e){const t=[],n=r.getElementsByTagName("stop"),i=vQ(e,1);for(let s=n.length;s--;)t.push(E4e(n[s],i));return t}function yQ(r){return r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?"linear":"radial"}function wQ(r){return r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Cc(r,e){return r.getAttribute(e)}function L4e(r,e){return function(t,n){let i,{width:s,height:a,gradientUnits:o}=n;return Object.keys(t).reduce((l,c)=>{const u=t[c];return u==="Infinity"?i=1:u==="-Infinity"?i=0:(i=typeof u=="string"?parseFloat(u):u,typeof u=="string"&&gQ(u)&&(i*=.01,o==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(i*=s),c!=="y1"&&c!=="y2"||(i*=a)))),l[c]=i,l},{})}(yQ(r)==="linear"?function(t){return{x1:Cc(t,"x1")||0,y1:Cc(t,"y1")||0,x2:Cc(t,"x2")||"100%",y2:Cc(t,"y2")||0}}(r):function(t){return{x1:Cc(t,"fx")||Cc(t,"cx")||"50%",y1:Cc(t,"fy")||Cc(t,"cy")||"50%",r1:0,x2:Cc(t,"cx")||"50%",y2:Cc(t,"cy")||"50%",r2:Cc(t,"r")||"50%"}}(r),Ve(Ve({},e),{},{gradientUnits:wQ(r)}))}class LS{constructor(e){const{type:t="linear",gradientUnits:n="pixels",coords:i={},colorStops:s=[],offsetX:a=0,offsetY:o=0,gradientTransform:l,id:c}=e||{};Object.assign(this,{type:t,gradientUnits:n,coords:Ve(Ve({},t==="radial"?C4e:mQ),i),colorStops:s,offsetX:a,offsetY:o,gradientTransform:l,id:c?"".concat(c,"_").concat(Uh()):Uh()})}addColorStop(e){for(const t in e){const n=new Gr(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return Ve(Ve({},Mv(this,e)),{},{type:this.type,coords:Ve({},this.coords),colorStops:this.colorStops.map(t=>Ve({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],i=this.gradientTransform?this.gradientTransform.concat():yo.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",a=this.colorStops.map(f=>Ve({},f)).sort((f,d)=>f.offset-d.offset);let o=-this.offsetX,l=-this.offsetY;var c;s==="objectBoundingBox"?(o/=e.width,l/=e.height):(o+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(o-=e.pathOffset.x,l-=e.pathOffset.y),i[4]-=o,i[5]-=l;const u=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(wM(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:f,y1:d,x2:p,y2:g}=this.coords;n.push("<linearGradient ",u,' x1="',f,'" y1="',d,'" x2="',p,'" y2="',g,`">
`)}else if(this.type==="radial"){const{x1:f,y1:d,x2:p,y2:g,r1:_,r2:w}=this.coords,b=_>w;n.push("<radialGradient ",u,' cx="',b?f:p,'" cy="',b?d:g,'" r="',b?_:w,'" fx="',b?p:f,'" fy="',b?g:d,`">
`),b&&(a.reverse(),a.forEach(M=>{M.offset=1-M.offset}));const C=Math.min(_,w);if(C>0){const M=C/Math.max(_,w);a.forEach(A=>{A.offset+=M*(1-A.offset)})}}return a.forEach(f=>{let{color:d,offset:p,opacity:g}=f;n.push("<stop ",'offset="',100*p+"%",'" style="stop-color:',d,g!==void 0?";stop-opacity: "+g:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(e){const{x1:t,y1:n,x2:i,y2:s,r1:a,r2:o}=this.coords,l=this.type==="linear"?e.createLinearGradient(t,n,i,s):e.createRadialGradient(t,n,a,i,s,o);return this.colorStops.forEach(c=>{let{color:u,opacity:f,offset:d}=c;l.addColorStop(d,f!==void 0?new Gr(u).setAlpha(f).toRgba():u)}),l}static async fromObject(e){const{colorStops:t,gradientTransform:n}=e;return new this(Ve(Ve({},e),{},{colorStops:t?t.map(i=>Ve({},i)):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(e,t,n){const i=wQ(e),s=t._findCenterFromElement();return new this(Ve({id:e.getAttribute("id")||void 0,type:yQ(e),coords:L4e(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:I4e(e,n.opacity),gradientUnits:i,gradientTransform:J3(e.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}Be(LS,"type","Gradient"),dn.setClass(LS,"gradient"),dn.setClass(LS,"linear"),dn.setClass(LS,"radial");const N4e=["type","source","patternTransform"];class AI{get type(){return"pattern"}set type(e){Bh("warn","Setting type has no effect",e)}constructor(e){Be(this,"repeat","repeat"),Be(this,"offsetX",0),Be(this,"offsetY",0),Be(this,"crossOrigin",""),this.id=Uh(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:n}=this;return Ve(Ve({},Mv(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:n,offsetX:Fi(this.offsetX,Rr.NUM_FRACTION_DIGITS),offsetY:Fi(this.offsetY,Rr.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:n}=e;const{source:i,repeat:s,id:a}=this,o=K0(this.offsetX/t,0),l=K0(this.offsetY/n,0),c=s==="repeat-y"||s==="no-repeat"?1+Math.abs(o||0):K0(i.width/t,0),u=s==="repeat-x"||s==="no-repeat"?1+Math.abs(l||0):K0(i.height/n,0);return['<pattern id="SVGID_'.concat(a,'" x="').concat(o,'" y="').concat(l,'" width="').concat(c,'" height="').concat(u,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:n,source:i,patternTransform:s}=e,a=Ti(e,N4e);const o=await Ox(i,Ve(Ve({},t),{},{crossOrigin:a.crossOrigin}));return new this(Ve(Ve({},a),{},{patternTransform:s&&s.slice(0),source:o}))}}Be(AI,"type","Pattern"),dn.setClass(AI),dn.setClass(AI,"pattern");class D4e{constructor(e){Be(this,"color","rgb(0, 0, 0)"),Be(this,"width",1),Be(this,"shadow",null),Be(this,"strokeLineCap","round"),Be(this,"strokeLineJoin","round"),Be(this,"strokeMiterLimit",10),Be(this,"strokeDashArray",null),Be(this,"limitedToCanvasSize",!1),this.canvas=e}_setBrushStyles(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])}_saveAndTransform(e){const t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}needsFullRender(){return new Gr(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const e=this.canvas,t=this.shadow,n=e.contextTop,i=e.getZoom()*e.getRetinaScaling();n.shadowColor=t.color,n.shadowBlur=t.blur*i,n.shadowOffsetX=t.offsetX*i,n.shadowOffsetY=t.offsetY*i}_resetShadow(){const e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}_isOutSideCanvas(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}const k4e=["path","left","top"],R4e=["d"];class uh extends Ha{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:i,top:s}=t,a=Ti(t,k4e);super(),Object.assign(this,uh.ownDefaults),this.setOptions(a),this._setPath(e||[],!0),typeof i=="number"&&this.set(Hr,i),typeof s=="number"&&this.set(Oo,s)}_setPath(e,t){this.path=c4e(Array.isArray(e)?e:y4e(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new ut(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(const i of this.path)switch(i[0]){case"L":e.lineTo(i[1]+t,i[2]+n);break;case"M":e.moveTo(i[1]+t,i[2]+n);break;case"C":e.bezierCurveTo(i[1]+t,i[2]+n,i[3]+t,i[4]+n,i[5]+t,i[6]+n);break;case"Q":e.quadraticCurveTo(i[1]+t,i[2]+n,i[3]+t,i[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ve(Ve({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=pQ(this.path,Rr.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=Rr.NUM_FRACTION_DIGITS;return" translate(".concat(Fi(-this.pathOffset.x,e),", ").concat(Fi(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:n,pathOffset:i}=this._calcDimensions();this.set({width:t,height:n,pathOffset:i}),e&&this.setPositionByOrigin(i,or,or)}_calcBoundsFromPath(){const e=[];let t=0,n=0,i=0,s=0;for(const a of this.path)switch(a[0]){case"L":i=a[1],s=a[2],e.push({x:t,y:n},{x:i,y:s});break;case"M":i=a[1],s=a[2],t=i,n=s;break;case"C":e.push(...oz(i,s,a[1],a[2],a[3],a[4],a[5],a[6])),i=a[5],s=a[6];break;case"Q":e.push(...oz(i,s,a[1],a[2],a[1],a[2],a[3],a[4])),i=a[3],s=a[4];break;case"Z":i=t,s=n}return Gf(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return Ve(Ve({},e),{},{pathOffset:new ut(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,n){const i=ud(e,this.ATTRIBUTE_NAMES,n),{d:s}=i;return new this(s,Ve(Ve(Ve({},Ti(i,R4e)),t),{},{left:void 0,top:void 0}))}}Be(uh,"type","Path"),Be(uh,"cacheProperties",[...cd,"path","fillRule"]),Be(uh,"ATTRIBUTE_NAMES",[...ep,"d"]),dn.setClass(uh),dn.setSVGClass(uh);class x_ extends D4e{constructor(e){super(e),Be(this,"decimate",.4),Be(this,"drawStraightLine",!1),Be(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(e,t,n){const i=t.midPointFrom(n);return e.quadraticCurveTo(t.x,t.y,i.x,i.y),i}onMouseDown(e,t){let{e:n}=t;this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],this._prepareForDrawing(e),this._addPoint(e),this._render())}onMouseMove(e,t){let{e:n}=t;if(this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(e))&&this._addPoint(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const i=this._points,s=i.length,a=this.canvas.contextTop;this._saveAndTransform(a),this.oldEnd&&(a.beginPath(),a.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=x_.drawSegment(a,i[s-2],i[s-1]),a.stroke(),a.restore()}}onMouseUp(e){let{e:t}=e;return!this.canvas._isMainEvent(t)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(e){this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)}_addPoint(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,t=this._points[0],n=this._points[1];if(this._saveAndTransform(e),e.beginPath(),this._points.length===2&&t.x===n.x&&t.y===n.y){const i=this.width/1e3;t.x-=i,n.x+=i}e.moveTo(t.x,t.y);for(let i=1;i<this._points.length;i++)x_.drawSegment(e,t,n),t=this._points[i],n=this._points[i+1];e.lineTo(t.x,t.y),e.stroke(),e.restore()}convertPointsToSVGPath(e){const t=this.width/1e3;return w4e(e,t)}createPath(e){const t=new uh(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new Lu(this.shadow)),t}decimatePoints(e,t){if(e.length<=2)return e;let n,i=e[0];const s=this.canvas.getZoom(),a=Math.pow(t/s,2),o=e.length-1,l=[i];for(let c=1;c<o-1;c++)n=Math.pow(i.x-e[c].x,2)+Math.pow(i.y-e[c].y,2),n>=a&&(i=e[c],l.push(i));return l.push(e[o]),l}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const e=this.convertPointsToSVGPath(this._points);if(function(n){return pQ(n)==="M 0 0 Q 0 0 0 0 L 0 0"}(e))return void this.canvas.requestRenderAll();const t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}const P4e=["left","top","radius"],_Q=["radius","startAngle","endAngle","counterClockwise"];class Mf extends Ha{static getDefaults(){return Ve(Ve({},super.getDefaults()),Mf.ownDefaults)}constructor(e){super(),Object.assign(this,Mf.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,ls(this.startAngle),ls(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Vo)}getRadiusY(){return this.get("radius")*this.get(Hl)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([..._Q,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,n=ls(this.startAngle),i=ls(this.endAngle),s=rd(n)*t,a=id(n)*t,o=rd(i)*t,l=id(i)*t,c=e>180?1:0,u=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(a," A ").concat(t," ").concat(t," 0 ").concat(c," ").concat(u," ").concat(o," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,n){const i=ud(e,this.ATTRIBUTE_NAMES,n),{left:s=0,top:a=0,radius:o=0}=i;return new this(Ve(Ve({},Ti(i,P4e)),{},{radius:o,left:s-o,top:a-o}))}static fromObject(e){return super._fromObject(e)}}Be(Mf,"type","Circle"),Be(Mf,"cacheProperties",[...cd,..._Q]),Be(Mf,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),Be(Mf,"ATTRIBUTE_NAMES",["cx","cy","r",...ep]),dn.setClass(Mf),dn.setSVGClass(Mf);const O4e=["x1","y1","x2","y2"],F4e=["x1","y1","x2","y2"],Z3=["x1","x2","y1","y2"];class lm extends Ha{constructor(){let[e,t,n,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,lm.ownDefaults),this.setOptions(s),this.x1=e,this.x2=n,this.y1=t,this.y2=i,this._setWidthHeight();const{left:a,top:o}=s;typeof a=="number"&&this.set(Hr,a),typeof o=="number"&&this.set(Oo,o)}_setWidthHeight(){const{x1:e,y1:t,x2:n,y2:i}=this;this.width=Math.abs(n-e),this.height=Math.abs(i-t);const{left:s,top:a,width:o,height:l}=Gf([{x:e,y:t},{x:n,y:i}]),c=new ut(s+o/2,a+l/2);this.setPositionByOrigin(c,or,or)}_set(e,t){return super._set(e,t),Z3.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const n=e.strokeStyle;var i;Ul(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new ut((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ve(Ve({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:n,y2:i,width:s,height:a}=this,o=e<=t?-1:1,l=n<=i?-1:1;return{x1:o*s/2,x2:o*-s/2,y1:l*a/2,y2:l*-a/2}}_toSVG(){const{x1:e,x2:t,y1:n,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(t,'" y2="').concat(i,`" />
`)]}static async fromElement(e,t,n){const i=ud(e,this.ATTRIBUTE_NAMES,n),{x1:s=0,y1:a=0,x2:o=0,y2:l=0}=i;return new this([s,a,o,l],Ti(i,O4e))}static fromObject(e){let{x1:t,y1:n,x2:i,y2:s}=e,a=Ti(e,F4e);return this._fromObject(Ve(Ve({},a),{},{points:[t,n,i,s]}),{extraParam:"points"})}}Be(lm,"type","Line"),Be(lm,"cacheProperties",[...cd,...Z3]),Be(lm,"ATTRIBUTE_NAMES",ep.concat(Z3)),dn.setClass(lm),dn.setSVGClass(lm);class xm extends Ha{static getDefaults(){return Ve(Ve({},super.getDefaults()),xm.ownDefaults)}constructor(e){super(),Object.assign(this,xm.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}Be(xm,"type","Triangle"),Be(xm,"ownDefaults",{width:100,height:100}),dn.setClass(xm),dn.setSVGClass(xm);const bQ=["rx","ry"];class Af extends Ha{static getDefaults(){return Ve(Ve({},super.getDefaults()),Af.ownDefaults)}constructor(e){super(),Object.assign(this,Af.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Vo)}getRy(){return this.get("ry")*this.get(Hl)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...bQ,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,pM,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,n){const i=ud(e,this.ATTRIBUTE_NAMES,n);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}function B4e(r){if(!r)return[];const e=r.replace(/,/g," ").trim().split(/\s+/),t=[];for(let n=0;n<e.length;n+=2)t.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return t}Be(Af,"type","Ellipse"),Be(Af,"cacheProperties",[...cd,...bQ]),Be(Af,"ownDefaults",{rx:0,ry:0}),Be(Af,"ATTRIBUTE_NAMES",[...ep,"cx","cy","rx","ry"]),dn.setClass(Af),dn.setSVGClass(Af);const U4e=["left","top"],SQ={exactBoundingBox:!1};class Ic extends Ha{static getDefaults(){return Ve(Ve({},super.getDefaults()),Ic.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Be(this,"strokeDiff",void 0),Object.assign(this,Ic.ownDefaults),this.setOptions(t),this.points=e;const{left:n,top:i}=t;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(Hr,n),typeof i=="number"&&this.set(Oo,i)}isOpen(){return!0}_projectStrokeOnPoints(e){return TEe(this.points,e,this.isOpen())}_calcDimensions(e){e=Ve({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new ut,strokeOffset:new ut,strokeDiff:new ut};const n=Gf(t),i=AT(Ve(Ve({},e),{},{scaleX:1,scaleY:1})),s=Gf(this.points.map(c=>No(c,i,!0))),a=new ut(this.scaleX,this.scaleY);let o=n.left+n.width/2,l=n.top+n.height/2;return this.exactBoundingBox&&(o-=l*Math.tan(ls(this.skewX)),l-=o*Math.tan(ls(this.skewY))),Ve(Ve({},n),{},{pathOffset:new ut(o,l),strokeOffset:new ut(s.left,s.top).subtract(new ut(n.left,n.top)).multiply(a),strokeDiff:new ut(n.width,n.height).subtract(new ut(s.width,s.height)).multiply(a)})}_findCenterFromElement(){const e=Gf(this.points);return new ut(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:n,width:i,height:s,pathOffset:a,strokeOffset:o,strokeDiff:l}=this._calcDimensions();this.set({width:i,height:s,pathOffset:a,strokeOffset:o,strokeDiff:l}),e&&this.setPositionByOrigin(new ut(t+i/2,n+s/2),or,or)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new ut(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let a;if(Object.keys(e).some(o=>this.strokeUniform||this.constructor.layoutProperties.includes(o))){var t,n;const{width:o,height:l}=this._calcDimensions(e);a=new ut((t=e.width)!==null&&t!==void 0?t:o,(n=e.height)!==null&&n!==void 0?n:l)}else{var i,s;a=new ut((i=e.width)!==null&&i!==void 0?i:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return a.multiply(new ut(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const n=this.initialized&&this[e]!==t,i=super._set(e,t);return this.exactBoundingBox&&n&&((e===Vo||e===Hl)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),i}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ve(Ve({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:n,y:i}=t;return{x:n,y:i}})})}_toSVG(){const e=[],t=this.pathOffset.x,n=this.pathOffset.y,i=Rr.NUM_FRACTION_DIGITS;for(let s=0,a=this.points.length;s<a;s++)e.push(Fi(this.points[s].x-t,i),",",Fi(this.points[s].y-n,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,n=this.pathOffset.x,i=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-i);for(let s=0;s<t;s++){const a=this.points[s];e.lineTo(a.x-n,a.y-i)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,n){return new this(B4e(e.getAttribute("points")),Ve(Ve({},Ti(ud(e,this.ATTRIBUTE_NAMES,n),U4e)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}Be(Ic,"ownDefaults",SQ),Be(Ic,"type","Polyline"),Be(Ic,"layoutProperties",[xv,Cv,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),Be(Ic,"cacheProperties",[...cd,"points"]),Be(Ic,"ATTRIBUTE_NAMES",[...ep]),dn.setClass(Ic),dn.setSVGClass(Ic);class NS extends Ic{isOpen(){return!1}}Be(NS,"ownDefaults",SQ),Be(NS,"type","Polygon"),dn.setClass(NS),dn.setSVGClass(NS);const xQ=["fontSize","fontWeight","fontFamily","fontStyle"],CQ=["underline","overline","linethrough"],MQ=[...xQ,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],AQ=[...MQ,...CQ,"textBackgroundColor","direction"],j4e=[...xQ,...CQ,Bo,"strokeWidth",Fs,"deltaY","textBackgroundColor"],z4e={_reNewline:YR,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Hr,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Hr,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},vu="justify",MM="justify-left",Ew="justify-right",Iw="justify-center";class TQ extends Ha{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const n in t)for(const i in t[n])for(const s in t[n][i])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const n=t===void 0?this.styles:{0:this.styles[t]};for(const i in n)for(const s in n[i])if(n[i][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let n,i,s=0,a=!0,o=0;for(const l in t){n=0;for(const c in t[l]){const u=t[l][c]||{};s++,u[e]!==void 0?(i?u[e]!==i&&(a=!1):i=u[e],u[e]===this[e]&&delete u[e]):a=!1,Object.keys(u).length!==0?n++:delete t[l][c]}n===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)o+=this._textLines[l].length;a&&s===o&&(this[e]=i,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let n,i,s;for(i in t){for(s in n=t[i],n)delete n[s][e],Object.keys(n[s]).length===0&&delete n[s];Object.keys(n).length===0&&delete t[i]}}_extendStyles(e,t){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);const s=qR(Ve(Ve({},this._getStyleDeclaration(n,i)),t),a=>a!==void 0);this._setStyleDeclaration(n,i,s)}getSelectionStyles(e,t,n){const i=[];for(let s=e;s<(t||e);s++)i.push(this.getStyleAtPosition(s,n));return i}getStyleAtPosition(e,t){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(n,i):this._getStyleDeclaration(n,i)}setSelectionStyles(e,t,n){for(let i=t;i<(n||t);i++)this._extendStyles(i,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var n;const i=this.styles&&this.styles[e];return i&&(n=i[t])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(e,t){return Ve(Ve({},Mv(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,n){this.styles[e][t]=n}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}Be(TQ,"_styleProperties",j4e);const V4e=/  +/g,G4e=/"/g;function TI(r,e,t,n,i){return"		".concat(function(s,a){let{left:o,top:l,width:c,height:u}=a,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rr.NUM_FRACTION_DIGITS;const d=__(Fs,s,!1),[p,g,_,w]=[o,l,c,u].map(b=>Fi(b,f));return"<rect ".concat(d,' x="').concat(p,'" y="').concat(g,'" width="').concat(_,'" height="').concat(w,'"></rect>')}(r,{left:e,top:t,width:n,height:i}),`
`)}const H4e=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let EI;class Ba extends TQ{static getDefaults(){return Ve(Ve({},super.getDefaults()),Ba.ownDefaults)}constructor(e,t){super(),Be(this,"__charBounds",[]),Object.assign(this,Ba.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=hQ(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(vu)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,n,i,s,a,o;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===vu||l!==c-1&&!this.isEndOfWrapping(l))&&(i=0,s=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(o=this.textLines[l].match(this._reSpacesAndTabs)))){n=o.length,e=(this.width-t)/n;for(let u=0;u<=s.length;u++)a=this.__charBounds[l][u],this._reSpaceAndTab.test(s[u])?(a.width+=e,a.kernedWidth+=e,a.left+=i,i+=e):a.left+=i}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const n=t?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<n.length;i++){if(e<=n[i].length)return{lineIndex:i,charIndex:e};e-=n[i].length+this.missingNewlineOffset(i,t)}return{lineIndex:i-1,charIndex:n[i-1].length<e?n[i-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Bo?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case or:e.textBaseline="middle";break;case"ascender":e.textBaseline=Oo;break;case"descender":e.textBaseline=j3}e.font=this._getFontDeclaration(t,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,n=this._textLines.length;t<n;t++){const i=this.getLineWidth(t);i>e&&(e=i)}return e}_renderTextLine(e,t,n,i,s,a){this._renderChars(e,t,n,i,s,a)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,n=this._getLeftOffset();let i=this._getTopOffset();for(let s=0,a=this._textLines.length;s<a;s++){const o=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){i+=o;continue}const l=this._textLines[s].length,c=this._getLineLeftOffset(s);let u,f,d=0,p=0,g=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let _=0;_<l;_++){const w=this.__charBounds[s][_];f=this.getValueOfPropertyAt(s,_,"textBackgroundColor"),this.path?(e.save(),e.translate(w.renderLeft,w.renderTop),e.rotate(w.angle),e.fillStyle=f,f&&e.fillRect(-w.width/2,-o/this.lineHeight*(1-this._fontSizeFraction),w.width,o/this.lineHeight),e.restore()):f!==g?(u=n+c+p,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=g,g&&e.fillRect(u,i,d,o/this.lineHeight),p=w.left,d=w.width,g=f):d+=w.kernedWidth}f&&!this.path&&(u=n+c+p,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=f,e.fillRect(u,i,d,o/this.lineHeight)),i+=o}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,n,i){const s=Aw.getFontCache(t),a=this._getFontDeclaration(t),o=n+e,l=n&&a===this._getFontDeclaration(i),c=t.fontSize/this.CACHE_FONT_SIZE;let u,f,d,p;if(n&&s[n]!==void 0&&(d=s[n]),s[e]!==void 0&&(p=u=s[e]),l&&s[o]!==void 0&&(f=s[o],p=f-d),u===void 0||d===void 0||f===void 0){const g=function(){return EI||(EI=Bu({width:0,height:0}).getContext("2d")),EI}();this._setTextStyles(g,t,!0),u===void 0&&(p=u=g.measureText(e).width,s[e]=u),d===void 0&&l&&n&&(d=g.measureText(n).width,s[n]=d),l&&f===void 0&&(f=g.measureText(o).width,s[o]=f,p=f-d)}return{width:u*c,kernedWidth:p*c}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,n,i=0;const s=this.pathSide===ss,a=this.path,o=this._textLines[e],l=o.length,c=new Array(l);this.__charBounds[e]=c;for(let u=0;u<l;u++){const f=o[u];n=this._getGraphemeBox(f,e,u,t),c[u]=n,i+=n.kernedWidth,t=f}if(c[l]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},a&&a.segmentsInfo){let u=0;const f=a.segmentsInfo[a.segmentsInfo.length-1].length;switch(this.textAlign){case Hr:u=s?f-i:0;break;case or:u=(f-i)/2;break;case ss:u=s?0:f-i}u+=this.pathStartOffset*(s?-1:1);for(let d=s?l-1:0;s?d>=0:d<l;s?d--:d++)n=c[d],u>f?u%=f:u<0&&(u+=f),this._setGraphemeOnPath(u,n),u+=n.kernedWidth}return{width:i,numOfSpaces:0}}_setGraphemeOnPath(e,t){const n=e+t.kernedWidth/2,i=this.path,s=p4e(i.path,n,i.segmentsInfo);t.renderLeft=s.x-i.pathOffset.x,t.renderTop=s.y-i.pathOffset.y,t.angle=s.angle+(this.pathSide===ss?Math.PI:0)}_getGraphemeBox(e,t,n,i,s){const a=this.getCompleteStyleDeclaration(t,n),o=i?this.getCompleteStyleDeclaration(t,n-1):{},l=this._measureChar(e,a,i,o);let c,u=l.kernedWidth,f=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),f+=c,u+=c);const d={width:f,left:0,height:a.fontSize,kernedWidth:u,deltaY:a.deltaY};if(n>0&&!s){const p=this.__charBounds[t][n-1];d.left=p.left+p.width+l.kernedWidth-l.width}return d}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let n=1,i=this._textLines[e].length;n<i;n++)t=Math.max(this.getHeightOfChar(e,n),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let n=0,i=this._textLines.length;n<i;n++)e=this.getHeightOfLine(n),t+=n===i-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let n=0;const i=this._getLeftOffset(),s=this._getTopOffset();for(let a=0,o=this._textLines.length;a<o;a++){const l=this.getHeightOfLine(a),c=l/this.lineHeight,u=this._getLineLeftOffset(a);this._renderTextLine(t,e,this._textLines[a],i+u,s+n+c,a),n+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Fs))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,n,i,s,a){const o=this.getHeightOfLine(a),l=this.textAlign.includes(vu),c=this.path,u=!l&&this.charSpacing===0&&this.isEmptyStyles(a)&&!c,f=this.direction==="ltr",d=this.direction==="ltr"?1:-1,p=t.direction;let g,_,w,b,C,M="",A=0;if(t.save(),p!==this.direction&&(t.canvas.setAttribute("dir",f?"ltr":"rtl"),t.direction=f?"ltr":"rtl",t.textAlign=f?Hr:ss),s-=o*this._fontSizeFraction/this.lineHeight,u)return this._renderChar(e,t,a,0,n.join(""),i,s),void t.restore();for(let k=0,O=n.length-1;k<=O;k++)b=k===O||this.charSpacing||c,M+=n[k],w=this.__charBounds[a][k],A===0?(i+=d*(w.kernedWidth-w.width),A+=w.width):A+=w.kernedWidth,l&&!b&&this._reSpaceAndTab.test(n[k])&&(b=!0),b||(g=g||this.getCompleteStyleDeclaration(a,k),_=this.getCompleteStyleDeclaration(a,k+1),b=sP(g,_,!1)),b&&(c?(t.save(),t.translate(w.renderLeft,w.renderTop),t.rotate(w.angle),this._renderChar(e,t,a,k,M,-A/2,0),t.restore()):(C=i,this._renderChar(e,t,a,k,M,C,s)),M="",g=_,i+=d*A,A=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,n=this.height+this.strokeWidth,i=Bu({width:t,height:n}),s=i.getContext("2d");return i.width=t,i.height=n,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,n),s.lineTo(0,n),s.closePath(),s.translate(t/2,n/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(i,"no-repeat")}handleFiller(e,t,n){let i,s;return Ul(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(i=-this.width/2,s=-this.height/2,e.translate(i,s),e[t]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:s}):(e[t]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:n,strokeWidth:i}=t;return e.lineWidth=i,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,t){let{fill:n}=t;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,t,n,i,s,a,o){const l=this._getStyleDeclaration(n,i),c=this.getCompleteStyleDeclaration(n,i),u=e==="fillText"&&c.fill,f=e==="strokeText"&&c.stroke&&c.strokeWidth;if(f||u){if(t.save(),t.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(o+=l.deltaY),u){const d=this._setFillStyles(t,c);t.fillText(s,a-d.offsetX,o-d.offsetY)}if(f){const d=this._setStrokeStyles(t,c);t.strokeText(s,a-d.offsetX,o-d.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,n){const i=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),a=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),o={fontSize:s*n.size,deltaY:a+s*n.baseline};this.setSelectionStyles(o,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),n=this.width-t,i=this.textAlign,s=this.direction,a=this.isEndOfWrapping(e);let o=0;return i===vu||i===Iw&&!a||i===Ew&&!a||i===MM&&!a?0:(i===or&&(o=n/2),i===ss&&(o=n),i===Iw&&(o=n/2),i===Ew&&(o=n),s==="rtl"&&(i===ss||i===vu||i===Ew?o=0:i===Hr||i===MM?o=-n:i!==or&&i!==Iw||(o=-n/2)),o)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,n){var i;return(i=this._getStyleDeclaration(e,t)[n])!==null&&i!==void 0?i:this[n]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let n=this._getTopOffset();const i=this._getLeftOffset(),s=this.path,a=this._getWidthOfCharSpacing(),o=this.offsets[t];for(let l=0,c=this._textLines.length;l<c;l++){const u=this.getHeightOfLine(l);if(!this[t]&&!this.styleHas(t,l)){n+=u;continue}const f=this._textLines[l],d=u/this.lineHeight,p=this._getLineLeftOffset(l);let g,_,w=0,b=0,C=this.getValueOfPropertyAt(l,0,t),M=this.getValueOfPropertyAt(l,0,Fs);const A=n+d*(1-this._fontSizeFraction);let k=this.getHeightOfChar(l,0),O=this.getValueOfPropertyAt(l,0,"deltaY");for(let I=0,D=f.length;I<D;I++){const E=this.__charBounds[l][I];g=this.getValueOfPropertyAt(l,I,t),_=this.getValueOfPropertyAt(l,I,Fs);const B=this.getHeightOfChar(l,I),U=this.getValueOfPropertyAt(l,I,"deltaY");if(s&&g&&_)e.save(),e.fillStyle=M,e.translate(E.renderLeft,E.renderTop),e.rotate(E.angle),e.fillRect(-E.kernedWidth/2,o*B+U,E.kernedWidth,this.fontSize/15),e.restore();else if((g!==C||_!==M||B!==k||U!==O)&&b>0){let V=i+p+w;this.direction==="rtl"&&(V=this.width-V-b),C&&M&&(e.fillStyle=M,e.fillRect(V,A+o*k+O,b,this.fontSize/15)),w=E.left,b=E.width,C=g,M=_,k=B,O=U}else b+=E.kernedWidth}let R=i+p+w;this.direction==="rtl"&&(R=this.width-R-b),e.fillStyle=_,g&&_&&e.fillRect(R,A+o*k+O,b-a,this.fontSize/15),n+=u}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const a=e.includes("'")||e.includes('"')||e.includes(",")||Ba.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,n,"".concat(s?this.CACHE_FONT_SIZE:i,"px"),a].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return iP(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),n=new Array(t.length),i=[`
`];let s=[];for(let a=0;a<t.length;a++)n[a]=this.graphemeSplit(t[a]),s=s.concat(n[a],i);return s.pop(),{_unwrappedLines:n,lines:t,graphemeText:s,graphemeLines:n}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ve(Ve({},super.toObject([...AQ,...e])),{},{styles:LEe(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:n}=this.constructor;super.set(e,t);let i=!1,s=!1;if(typeof e=="object")for(const a in e)a==="path"&&this.setPathInfo(),i=i||n.includes(a),s=s||a==="path";else i=n.includes(e),s=e==="path";return s&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,n){const i=ud(e,Ba.ATTRIBUTE_NAMES,n),s=Ve(Ve({},t),i),{textAnchor:a=Hr,textDecoration:o="",dx:l=0,dy:c=0,top:u=0,left:f=0,fontSize:d=WR,strokeWidth:p=1}=s,g=Ti(s,H4e),_=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),Ve({left:f+l,top:u+c,underline:o.includes("underline"),overline:o.includes("overline"),linethrough:o.includes("line-through"),strokeWidth:0,fontSize:d},g)),w=_.getScaledHeight()/_.height,b=((_.height+_.strokeWidth)*_.lineHeight-_.height)*w,C=_.getScaledHeight()+b;let M=0;return a===or&&(M=_.getScaledWidth()/2),a===ss&&(M=_.getScaledWidth()),_.set({left:_.left-M,top:_.top-(C-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:p}),_}static fromObject(e){return this._fromObject(Ve(Ve({},e),{},{styles:NEe(e.styles||{},e.text)}),{extraParam:"text"})}}Be(Ba,"textLayoutProperties",MQ),Be(Ba,"cacheProperties",[...cd,...AQ]),Be(Ba,"ownDefaults",z4e),Be(Ba,"type","Text"),Be(Ba,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Be(Ba,"ATTRIBUTE_NAMES",ep.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),iQ(Ba,[class extends QX{_toSVG(){const r=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(r.textTop,r.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(r){return this._createBaseSVGMarkup(this._toSVG(),{reviver:r,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(r){let{textBgRects:e,textSpans:t}=r;const n=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(G4e,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(r,e){const t=[],n=[];let i,s=r;this.backgroundColor&&n.push(...TI(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let a=0,o=this._textLines.length;a<o;a++)i=this._getLineLeftOffset(a),this.direction==="rtl"&&(i+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(n,a,e+i,s),this._setSVGTextLineText(t,a,e+i,s),s+=this.getHeightOfLine(a);return{textSpans:t,textBgRects:n}}_createTextCharSpan(r,e,t,n){const i=this.getSvgSpanStyles(e,r!==r.trim()||!!r.match(V4e)),s=i?'style="'.concat(i,'"'):"",a=e.deltaY,o=a?' dy="'.concat(Fi(a,Rr.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Fi(t,Rr.NUM_FRACTION_DIGITS),'" y="').concat(Fi(n,Rr.NUM_FRACTION_DIGITS),'" ').concat(o).concat(s,">").concat(EEe(r),"</tspan>")}_setSVGTextLineText(r,e,t,n){const i=this.getHeightOfLine(e),s=this.textAlign.includes(vu),a=this._textLines[e];let o,l,c,u,f,d="",p=0;n+=i*(1-this._fontSizeFraction)/this.lineHeight;for(let g=0,_=a.length-1;g<=_;g++)f=g===_||this.charSpacing,d+=a[g],c=this.__charBounds[e][g],p===0?(t+=c.kernedWidth-c.width,p+=c.width):p+=c.kernedWidth,s&&!f&&this._reSpaceAndTab.test(a[g])&&(f=!0),f||(o=o||this.getCompleteStyleDeclaration(e,g),l=this.getCompleteStyleDeclaration(e,g+1),f=sP(o,l,!0)),f&&(u=this._getStyleDeclaration(e,g),r.push(this._createTextCharSpan(d,u,t,n)),d="",o=l,this.direction==="rtl"?t-=p:t+=p,p=0)}_setSVGTextLineBg(r,e,t,n){const i=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let a,o=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let u=0;u<i.length;u++){const{left:f,width:d,kernedWidth:p}=this.__charBounds[e][u];a=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),a!==c?(c&&r.push(...TI(c,t+l,n,o,s)),l=f,o=d,c=a):o+=p}a&&r.push(...TI(c,t+l,n,o,s))}_getSVGLineTopOffset(r){let e,t=0;for(e=0;e<r;e++)t+=this.getHeightOfLine(e);const n=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(r){return"".concat(super.getSvgStyles(r)," white-space: pre;")}getSvgSpanStyles(r,e){const{fontFamily:t,strokeWidth:n,stroke:i,fill:s,fontSize:a,fontStyle:o,fontWeight:l,deltaY:c}=r,u=this.getSvgTextDecoration(r);return[i?__(Bo,i):"",n?"stroke-width: ".concat(n,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",a?"font-size: ".concat(a,"px; "):"",o?"font-style: ".concat(o,"; "):"",l?"font-weight: ".concat(l,"; "):"",u&&"text-decoration: ".concat(u,"; "),s?__(Fs,s):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(r){return["overline","underline","line-through"].filter(e=>r[e.replace("-","")]).join(" ")}}]),dn.setClass(Ba),dn.setSVGClass(Ba);class W4e{constructor(e){Be(this,"target",void 0),Be(this,"__mouseDownInPlace",!1),Be(this,"__dragStartFired",!1),Be(this,"__isDraggingOver",!1),Be(this,"__dragStartSelection",void 0),Be(this,"__dragImageDisposer",void 0),Be(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,n=t.getSelectionStartFromPointer(e);return t.isEditing&&n>=t.selectionStart&&n<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var n;let{selectionStart:i,selectionEnd:s}=t;const a=this.target,o=a.canvas,l=new ut(a.flipX?-1:1,a.flipY?-1:1),c=a._getCursorBoundaries(i),u=new ut(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(a.calcTransformMatrix()),f=o.getScenePoint(e).subtract(u),d=a.getCanvasRetinaScaling(),p=a.getBoundingRect(),g=u.subtract(new ut(p.left,p.top)),_=o.viewportTransform,w=g.add(f).transform(_,!0),b=a.backgroundColor,C=rP(a.styles);a.backgroundColor="";const M={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};a.setSelectionStyles(M,0,i),a.setSelectionStyles(M,s,a.text.length),a.dirty=!0;const A=a.toCanvasElement({enableRetinaScaling:o.enableRetinaScaling,viewportTransform:!0});a.backgroundColor=b,a.styles=C,a.dirty=!0,K3(A,{position:"fixed",left:"".concat(-A.width,"px"),border:Fo,width:"".concat(A.width/d,"px"),height:"".concat(A.height/d,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{A.remove()},Dc(e.target||this.target.hiddenTextarea).body.appendChild(A),(n=e.dataTransfer)===null||n===void 0||n.setDragImage(A,w.x,w.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,n=this.isActive();if(n&&e.dataTransfer){const i=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},s=t._text.slice(i.selectionStart,i.selectionEnd).join(""),a=Ve({text:t.text,value:s},i);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:t.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,a)}return t.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return t<n.selectionStart||t>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const n=this.targetCanDrop(t);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,n=this.targetCanDrop(t);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:n}=e,i=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let s=(t=n.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(s&&!i){const a=this.target,o=a.canvas;let l=a.getSelectionStartFromPointer(n);const{styles:c}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},u=s[Math.max(0,s.length-1)],f=0;if(this.__dragStartSelection){const d=this.__dragStartSelection.selectionStart,p=this.__dragStartSelection.selectionEnd;l>d&&l<=p?l=d:l>p&&(l-=p-d),a.removeChars(d,p),delete this.__dragStartSelection}a._reNewline.test(u)&&(a._reNewline.test(a._text[l])||l===a._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=a,a.insertChars(s,c,l),o.setActiveObject(a),a.enterEditing(n),a.selectionStart=Math.min(l+f,a._text.length),a.selectionEnd=Math.min(a.selectionStart+s.length,a._text.length),a.hiddenTextarea.value=a.text,a._updateTextarea(),a.hiddenTextarea.focus(),a.fire(mM,{index:l+f,action:"drop"}),o.fire("text:changed",{target:a}),o.contextTopDirty=!0,o.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const i=this.target,s=this.target.canvas,{selectionStart:a,selectionEnd:o}=this.__dragStartSelection,l=((n=t.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||Fo;l===Fo?(i.selectionStart=a,i.selectionEnd=o,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),l==="move"&&(i.removeChars(a,o),i.selectionStart=i.selectionEnd=a,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire(mM,{index:a,action:"dragend"}),s.fire("text:changed",{target:i}),s.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const uz=/[ \n\.,;!\?\-]/;class Y4e extends Ba{constructor(){super(...arguments),Be(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:n,delay:i,onComplete:s}=e;return $X({startValue:this._currentCursorOpacity,endValue:t,duration:n,delay:i,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:a=>{this._currentCursorOpacity=a,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findWordBoundaryRight(e){let t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}findLineBoundaryLeft(e){let t=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findLineBoundaryRight(e){let t=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}searchWordBoundary(e,t){const n=this._text;let i=e>0&&this._reSpace.test(n[e])&&(t===-1||!YR.test(n[e-1]))?e-1:e,s=n[i];for(;i>0&&i<n.length&&!uz.test(s);)i+=t,s=n[i];return t===-1&&uz.test(s)&&i++,i}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),n=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;Dc(t).activeElement!==t&&t.focus();const n=this.getSelectionStartFromPointer(e),i=this.selectionStart,s=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&i!==s||i!==n&&s!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,n){const i=n.slice(0,e),s=this.graphemeSplit(i).length;if(e===t)return{selectionStart:s,selectionEnd:s};const a=n.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(a).length}}fromGraphemeToStringSelection(e,t,n){const i=n.slice(0,e).join("").length;return e===t?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+n.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),i=n.lineIndex,s=n.charIndex,a=this.getValueOfPropertyAt(i,s,"fontSize")*this.lineHeight,o=t.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,f=c.height/l,d=u-a,p=f-a,g=new ut(t.left+o,t.top+t.topOffset+a).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new ut(c.clientWidth/u,c.clientHeight/f));return g.x<0&&(g.x=0),g.x>d&&(g.x=d),g.y<0&&(g.y=0),g.y>p&&(g.y=p),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:"".concat(g.x,"px"),top:"".concat(g.y,"px"),fontSize:"".concat(a,"px"),charHeight:a}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(gM),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:a}=this.get2DCursorLocation(t,!0);if(n!==s){if(this.styles[n])for(let o=i;o<this._unwrappedTextLines[n].length;o++)delete this.styles[n][o];if(this.styles[s])for(let o=a;o<this._unwrappedTextLines[s].length;o++){const l=this.styles[s][o];l&&(this.styles[n]||(this.styles[n]={}),this.styles[n][i+o-a]=l)}for(let o=n+1;o<=s;o++)delete this.styles[o];this.shiftLineStyles(s,n-s)}else if(this.styles[n]){const o=this.styles[n],l=a-i;for(let c=i;c<a;c++)delete o[c];for(const c in this.styles[n]){const u=parseInt(c,10);u>=a&&(o[u-l]=o[c],delete o[c])}}}shiftLineStyles(e,t){const n=Object.assign({},this.styles);for(const i in this.styles){const s=parseInt(i,10);s>e&&(this.styles[s+t]=n[s],n[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,n,i){const s={},a=this._unwrappedTextLines[e].length,o=a===t;let l=!1;n||(n=1),this.shiftLineStyles(e,n);const c=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const f in this.styles[e]){const d=parseInt(f,10);d>=t&&(l=!0,s[d-t]=this.styles[e][f],o&&t===0||delete this.styles[e][f])}let u=!1;for(l&&!o&&(this.styles[e+n]=s,u=!0),(u||a>t)&&n--;n>0;)i&&i[n-1]?this.styles[e+n]={0:Ve({},i[n-1])}:c?this.styles[e+n]={0:Ve({},c)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,t,n,i){this.styles||(this.styles={});const s=this.styles[e],a=s?Ve({},s):{};n||(n=1);for(const l in a){const c=parseInt(l,10);c>=t&&(s[c+n]=a[c],a[c-n]||delete s[c])}if(this._forceClearCache=!0,i){for(;n--;)Object.keys(i[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+n]=Ve({},i[n]));return}if(!s)return;const o=s[t?t-1:1];for(;o&&n--;)this.styles[e][t+n]=Ve({},o)}insertNewStyleBlock(e,t,n){const i=this.get2DCursorLocation(t,!0),s=[0];let a,o=0;for(let l=0;l<e.length;l++)e[l]===`
`?(o++,s[o]=0):s[o]++;for(s[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,s[0],n),n=n&&n.slice(s[0]+1)),o&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+s[0],o),a=1;a<o;a++)s[a]>0?this.insertCharStyleObject(i.lineIndex+a,0,s[a],n):n&&this.styles[i.lineIndex+a]&&n[0]&&(this.styles[i.lineIndex+a][0]=n[0]),n=n&&n.slice(s[a]+1);s[a]>0&&this.insertCharStyleObject(i.lineIndex+a,0,s[a],n)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;i>n&&this.removeStyleFromTo(n,i);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,n,t),this._text=[...this._text.slice(0,n),...s,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,n){n<=e?(t===e?this._selectionDirection=Hr:this._selectionDirection===ss&&(this._selectionDirection=Hr,this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?this._selectionDirection===ss?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection=ss:this._selectionDirection===Hr&&(this._selectionDirection=ss,this.selectionStart=t),this.selectionEnd=n)}}class J4e extends Y4e{initHiddenTextarea(){const e=this.canvas&&Dc(this.canvas.getElement())||Sv(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(a=>{let[o,l]=a;return t.setAttribute(o,l)});const{top:n,left:i,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(a=>{let[o,l]=a;return t.addEventListener(o,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const n=()=>{this.updateFromTextArea(),this.fire(mM),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void n();const i=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,a=i.length,o=this.selectionStart,l=this.selectionEnd,c=o!==l;let u,f,d,p,g=a-s;const _=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),w=o>_.selectionStart;c?(f=this._text.slice(o,l),g+=l-o):a<s&&(f=w?this._text.slice(l+g,l):this._text.slice(o,o-g));const b=i.slice(_.selectionEnd-g,_.selectionEnd);if(f&&f.length&&(b.length&&(u=this.getSelectionStyles(o,o+1,!1),u=b.map(()=>u[0])),c?(d=o,p=l):w?(d=l-f.length,p=l):(d=l,p=l+f.length),this.removeStyleFromTo(d,p)),b.length){const{copyPasteData:C}=Fu();t&&b.join("")===C.copiedText&&!Rr.disableStyleCopyPaste&&(u=C.copiedTextStyle),this.insertNewStyleBlock(b,o,u)}n()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:n,selectionEnd:i}=t;this.compositionStart=n,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Fu();e.copiedText=this.getSelectedText(),Rr.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let n,i=this._getLineLeftOffset(e);return t>0&&(n=this.__charBounds[e][t-1],i+=n.left+n.width),i}getDownCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(n),s=i.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-n;const a=i.charIndex,o=this._getWidthBeforeCursor(s,a),l=this._getIndexOnLine(s+1,o);return this._textLines[s].slice(a).length+l+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(n),s=i.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-n;const a=i.charIndex,o=this._getWidthBeforeCursor(s,a),l=this._getIndexOnLine(s-1,o),c=this._textLines[s].slice(0,a),u=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+l-c.length+(1-u)}_getIndexOnLine(e,t){const n=this._textLines[e];let i,s,a=this._getLineLeftOffset(e),o=0;for(let l=0,c=n.length;l<c;l++)if(i=this.__charBounds[e][l].width,a+=i,a>t){s=!0;const u=a-i,f=a,d=Math.abs(u-t);o=Math.abs(f-t)<d?l:l-1;break}return s||(o=n.length-1),o}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const n=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===ss);if(t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const i=this.text.length;this.selectionStart=$1(0,this.selectionStart,i),this.selectionEnd=$1(0,this.selectionEnd,i),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===Hr?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,n){let i;if(e.altKey)i=this["findWordBoundary".concat(n)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=n==="Left"?-1:1,!0;i=this["findLineBoundary".concat(n)](this[t])}return i!==void 0&&this[t]!==i&&(this[t]=i,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Hr,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===ss&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Hr,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const n="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===Hr&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=ss,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=ss,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const II=r=>!!r.button;class X4e extends J4e{constructor(){super(...arguments),Be(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new W4e(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),G3(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!II(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!II(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:n}=e;const i=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||II(t)||i||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),n=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,i,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Pc(this.calcTransformMatrix())).add(new ut(-this._getLeftOffset(),-this._getTopOffset()));let n=0,i=0,s=0;for(let c=0;c<this._textLines.length&&n<=t.y;c++)n+=this.getHeightOfLine(c),s=c,c>0&&(i+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let a=Math.abs(this._getLineLeftOffset(s));const o=this._textLines[s].length,l=this.__charBounds[s];for(let c=0;c<o;c++){const u=a+l[c].kernedWidth;if(t.x<=u){Math.abs(t.x-u)<=Math.abs(t.x-a)&&i++;break}a=u,i++}return Math.min(this.flipX?o-i:i,this._text.length)}}const DS="moveCursorUp",kS="moveCursorDown",RS="moveCursorLeft",PS="moveCursorRight",OS="exitEditing",Q4e=Ve({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:OS,27:OS,33:DS,34:kS,35:PS,36:RS,37:RS,38:DS,39:PS,40:kS},keysMapRtl:{9:OS,27:OS,33:DS,34:kS,35:RS,36:PS,37:PS,38:DS,39:RS,40:kS},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Of extends X4e{static getDefaults(){return Ve(Ve({},super.getDefaults()),Of.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,Ve(Ve({},Of.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof q3&&this.canvas.textEditingManager.remove(this),t instanceof q3&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,n)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,n)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(e);return this.isEditing=t,n}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),i=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:n,top:i,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,n=0;const{charIndex:i,lineIndex:s}=this.get2DCursorLocation(e);for(let c=0;c<s;c++)t+=this.getHeightOfLine(c);const a=this._getLineLeftOffset(s),o=this.__charBounds[s][i];o&&(n=o.left),this.charSpacing!==0&&i===this._textLines[s].length&&(n-=this._getWidthOfCharSpacing());const l={top:t,left:a+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===ss||this.textAlign===vu||this.textAlign===Ew?l.left*=-1:this.textAlign===Hr||this.textAlign===MM?l.left=a-(n>0?n:0):this.textAlign!==or&&this.textAlign!==Iw||(l.left=a-(n>0?n:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const n=this.get2DCursorLocation(e),i=n.lineIndex,s=n.charIndex>0?n.charIndex-1:0,a=this.getValueOfPropertyAt(i,s,"fontSize"),o=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/o,c=this.getValueOfPropertyAt(i,s,"deltaY"),u=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-a*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(i,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:u+t.top+c,width:l,height:a}}_renderCursor(e,t,n){const{color:i,opacity:s,left:a,top:o,width:l,height:c}=this.getCursorRenderingData(n,t);e.fillStyle=i,e.globalAlpha=s,e.fillRect(a,o,l,c)}renderSelection(e,t){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,n){const i=t.selectionStart,s=t.selectionEnd,a=this.textAlign.includes(vu),o=this.get2DCursorLocation(i),l=this.get2DCursorLocation(s),c=o.lineIndex,u=l.lineIndex,f=o.charIndex<0?0:o.charIndex,d=l.charIndex<0?0:l.charIndex;for(let p=c;p<=u;p++){const g=this._getLineLeftOffset(p)||0;let _=this.getHeightOfLine(p),w=0,b=0,C=0;if(p===c&&(b=this.__charBounds[c][f].left),p>=c&&p<u)C=a&&!this.isEndOfWrapping(p)?this.width:this.getLineWidth(p)||5;else if(p===u)if(d===0)C=this.__charBounds[u][d].left;else{const R=this._getWidthOfCharSpacing();C=this.__charBounds[u][d-1].left+this.__charBounds[u][d-1].width-R}w=_,(this.lineHeight<1||p===u&&this.lineHeight>1)&&(_/=this.lineHeight);let M=n.left+g+b,A=_,k=0;const O=C-b;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",A=1,k=_):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===ss||this.textAlign===vu||this.textAlign===Ew?M=this.width-M-O:this.textAlign===Hr||this.textAlign===MM?M=n.left+g-C:this.textAlign!==or&&this.textAlign!==Iw||(M=n.left+g-C)),e.fillRect(M,n.top+n.topOffset+k,O,A),n.topOffset+=w}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Fs)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}Be(Of,"ownDefaults",Q4e),Be(Of,"type","IText"),dn.setClass(Of),dn.setClass(Of,"i-text");class Cm extends Of{static getDefaults(){return Ve(Ve({},super.getDefaults()),Cm.ownDefaults)}constructor(e,t){super(e,Ve(Ve({},Cm.ownDefaults),t))}static createControls(){return{controls:CEe()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(vu)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,n=0,i=0;const s={};for(let a=0;a<e.graphemeLines.length;a++)e.graphemeText[i]===`
`&&a>0?(n=0,i++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&a>0&&(n++,i++),s[a]={line:t,offset:n},i+=e.graphemeLines[a].length,n+=e.graphemeLines[a].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];n&&(t=n.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,n=0,i=e+1,s=!1;const a=this._styleMap[e],o=this._styleMap[e+1];a&&(e=a.line,n=a.offset),o&&(i=o.line,s=i===e,t=o.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const c in l)for(const u in l[c]){const f=parseInt(u,10);if(f>=n&&(!s||f<t))for(const d in l[c][u])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];if(!n)return{};e=n.line,t=n.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,n){const i=this._styleMap[e];super._setStyleDeclaration(i.line,i.offset+t,n)}_deleteStyleDeclaration(e,t){const n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const n=this.getGraphemeDataForRender(e),i=[];for(let s=0;s<n.wordsData.length;s++)i.push(...this._wrapLine(s,t,n));return this.isWrapping=!1,i}getGraphemeDataForRender(e){const t=this.splitByGrapheme,n=t?"":" ";let i=0;return{wordsData:e.map((s,a)=>{let o=0;const l=t?this.graphemeSplit(s):this.wordSplit(s);return l.length===0?[{word:[],width:0}]:l.map(c=>{const u=t?[c]:this.graphemeSplit(c),f=this._measureWord(u,a,o);return i=Math.max(f,i),o+=u.length+n.length,{word:u,width:f}})}),largestWordWidth:i}}_measureWord(e,t){let n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let a=0,o=e.length;a<o;a++)s+=this._getGraphemeBox(e[a],t,a+i,n,!0).kernedWidth,n=e[a];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,n){let{largestWordWidth:i,wordsData:s}=n,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const o=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],u=l?"":" ";let f=0,d=[],p=0,g=0,_=!0;t-=a;const w=Math.max(t,i,this.dynamicMinWidth),b=s[e];let C;for(p=0,C=0;C<b.length;C++){const{word:M,width:A}=b[C];p+=M.length,f+=g+A-o,f>w&&!_?(c.push(d),d=[],f=A,_=!0):f+=o,_||l||d.push(u),d=d.concat(M),g=l?0:this._measureWord([u],e,p),p++,_=!1}return C&&c.push(d),i+a>this.dynamicMinWidth&&(this.dynamicMinWidth=i-o+a),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),n=this._wrapText(t.lines,this.width),i=new Array(n.length);for(let s=0;s<n.length;s++)i[s]=n[s].join("");return t.lines=i,t.graphemeLines=n,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const n=parseInt(t,10);if(this._textLines[n]){const i=this._styleMap[t].line;e.set("".concat(i),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}Be(Cm,"type","Textbox"),Be(Cm,"textLayoutProperties",[...Of.textLayoutProperties,"width"]),Be(Cm,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),dn.setClass(Cm);class fz extends NT{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:n}=e,{clipPath:i,group:s}=n;if(!i||!this.shouldPerformLayout(e))return;const{width:a,height:o}=Gf(oQ(n,i)),l=new ut(a,o);if(i.absolutePositioned)return{center:v1(i.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:l};{const c=i.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:u=new ut,correction:f=new ut}=this.calcBoundingBox(t,e)||{};return{center:u.add(c),correction:f.subtract(c),size:l}}return{center:n.getRelativeCenterPoint().add(c),size:l}}}}Be(fz,"type","clip-path"),dn.setClass(fz);class dz extends NT{getInitialSize(e,t){let{target:n}=e,{size:i}=t;return new ut(n.width||i.x,n.height||i.y)}}Be(dz,"type","fixed"),dn.setClass(dz);class K4e extends S_{subscribeTargets(e){const t=e.target;e.targets.reduce((n,i)=>(i.parent&&n.add(i.parent),n),new Set).forEach(n=>{n.layoutManager.subscribeTargets({target:n,targets:[t]})})}unsubscribeTargets(e){const t=e.target,n=t.getObjects();e.targets.reduce((i,s)=>(s.parent&&i.add(s.parent),i),new Set).forEach(i=>{!n.some(s=>s.parent===i)&&i.layoutManager.unsubscribeTargets({target:i,targets:[t]})})}}class Mm extends Rm{static getDefaults(){return Ve(Ve({},super.getDefaults()),Mm.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Mm.ownDefaults),this.setOptions(t);const{left:n,top:i,layoutManager:s}=t;this.groupInit(e,{left:n,top:i,layoutManager:s??new K4e})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(i=>{const s=this._objects.findIndex(o=>o.isInFrontOf(i)),a=s===-1?this.size():s;this.insertAt(a,i)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(Bh("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const n=new Set;t.forEach(i=>{const{parent:s}=i;s&&n.add(s)}),e===oP?n.forEach(i=>{i._onAfterObjectsChange(SM,t)}):n.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const i=Ve(Ve({hasControls:!1},n),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,i);super._renderControls(e,t),e.restore()}}Be(Mm,"type","ActiveSelection"),Be(Mm,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),dn.setClass(Mm),dn.setClass(Mm,"activeSelection");class q4e{constructor(){Be(this,"resources",{})}applyFilters(e,t,n,i,s){const a=s.getContext("2d");if(!a)return;a.drawImage(t,0,0,n,i);const o={sourceWidth:n,sourceHeight:i,imageData:a.getImageData(0,0,n,i),originalEl:t,originalImageData:a.getImageData(0,0,n,i),canvasEl:s,ctx:a,filterBackend:this};e.forEach(c=>{c.applyTo(o)});const{imageData:l}=o;return l.width===n&&l.height===i||(s.width=l.width,s.height=l.height),a.putImageData(l,0,0),o}}class EQ{constructor(){let{tileSize:e=Rr.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Be(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),Be(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const n=Bu({width:e,height:t}),i=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});i&&(i.clearColor(0,0,0,0),this.canvas=n,this.gl=i)}applyFilters(e,t,n,i,s,a){const o=this.gl,l=s.getContext("2d");if(!o||!l)return;let c;a&&(c=this.getCachedTexture(a,t));const u={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:o,sourceTexture:this.createTexture(o,n,i,c?void 0:t),targetTexture:this.createTexture(o,n,i),originalTexture:c||this.createTexture(o,n,i,c?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},f=o.createFramebuffer();return o.bindFramebuffer(o.FRAMEBUFFER,f),e.forEach(d=>{d&&d.applyTo(u)}),function(d){const p=d.targetCanvas,g=p.width,_=p.height,w=d.destinationWidth,b=d.destinationHeight;g===w&&_===b||(p.width=w,p.height=b)}(u),this.copyGLTo2D(o,u),o.bindTexture(o.TEXTURE_2D,null),o.deleteTexture(u.sourceTexture),o.deleteTexture(u.targetTexture),o.deleteFramebuffer(f),l.setTransform(1,0,0,1,0,0),u}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,n,i,s){const{NEAREST:a,TEXTURE_2D:o,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:u,TEXTURE_MAG_FILTER:f,TEXTURE_MIN_FILTER:d,TEXTURE_WRAP_S:p,TEXTURE_WRAP_T:g}=e,_=e.createTexture();return e.bindTexture(o,_),e.texParameteri(o,f,s||a),e.texParameteri(o,d,s||a),e.texParameteri(o,p,u),e.texParameteri(o,g,u),i?e.texImage2D(o,0,l,l,c,i):e.texImage2D(o,0,l,t,n,0,l,c,null),_}getCachedTexture(e,t,n){const{textureCache:i}=this;if(i[e])return i[e];{const s=this.createTexture(this.gl,t.width,t.height,t,n);return s&&(i[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const n=e.canvas,i=t.targetCanvas,s=i.getContext("2d");if(!s)return;s.translate(0,i.height),s.scale(1,-1);const a=n.height-i.height;s.drawImage(n,0,a,i.width,i.height,0,0,i.width,i.height)}copyGLTo2DPutImageData(e,t){const n=t.targetCanvas.getContext("2d"),i=t.destinationWidth,s=t.destinationHeight,a=i*s*4;if(!n)return;const o=new Uint8Array(this.imageBuffer,0,a),l=new Uint8ClampedArray(this.imageBuffer,0,a);e.readPixels(0,0,i,s,e.RGBA,e.UNSIGNED_BYTE,o);const c=new ImageData(l,i,s);n.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const n=e.getExtension("WEBGL_debug_renderer_info");if(n){const i=e.getParameter(n.UNMASKED_RENDERER_WEBGL),s=e.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(t.renderer=i.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let LI;function Z4e(){const{WebGLProbe:r}=Fu();return r.queryWebGL(Gc()),Rr.enableGLFiltering&&r.isSupported(Rr.textureSize)?new EQ({tileSize:Rr.textureSize}):new q4e}function NI(){return!LI&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(LI=Z4e()),LI}const $4e=["filters","resizeFilter","src","crossOrigin","type"],IQ=["cropX","cropY"];class uo extends Ha{static getDefaults(){return Ve(Ve({},super.getDefaults()),uo.ownDefaults)}constructor(e,t){super(),Be(this,"_lastScaleX",1),Be(this,"_lastScaleY",1),Be(this,"_filterScalingX",1),Be(this,"_filterScalingY",1),this.filters=[],Object.assign(this,uo.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Uh()),this.setElement(typeof e=="string"?(this.canvas&&Dc(this.canvas.getElement())||Sv()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(n),(t=e.classList)===null||t===void 0||t.add(uo.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=NI(!1);t instanceof EQ&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Fu().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(n=>{n&&t.push(n.toObject())}),Ve(Ve({},super.toObject([...IQ,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,n=-this.width/2,i=-this.height/2;let s=[],a=[],o="",l="";if(!t)return[];if(this.hasCrop()){const c=Uh();s.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+n+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),o=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(o,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,a=['	<rect x="'.concat(n,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return s=this.paintFirst!==Fs?s.concat(a,e):s.concat(e,a),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ox(e,{crossOrigin:t,signal:n}).then(i=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(i)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.x,s=n.y,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>t&&s>t)return this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=s);const o=Bu(a),{width:l,height:c}=a;this._element=o,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=s,NI().applyFilters([e],a,l,c,this._element),this._filterScalingX=o.width/this._originalElement.width,this._filterScalingY=o.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,n=t.naturalWidth||t.width,i=t.naturalHeight||t.height;if(this._element===this._originalElement){const s=Bu({width:n,height:i});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1);NI().applyFilters(e,this._originalElement,n,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const n=this._filterScalingX,i=this._filterScalingY,s=this.width,a=this.height,o=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=t.naturalWidth||t.width,u=t.naturalHeight||t.height,f=o*n,d=l*i,p=Math.min(s*n,c-f),g=Math.min(a*i,u-d),_=-s/2,w=-a/2,b=Math.min(s,c/n-o),C=Math.min(a,u/i-l);t&&e.drawImage(t,f,d,p,g,_,w,b,C)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=e||n.width,this.height=t||n.height}parsePreserveAspectRatioAttribute(){const e=RTe(this.preserveAspectRatio||""),t=this.width,n=this.height,i={width:t,height:n};let s,a=this._element.width,o=this._element.height,l=1,c=1,u=0,f=0,d=0,p=0;return!e||e.alignX===Fo&&e.alignY===Fo?(l=t/a,c=n/o):(e.meetOrSlice==="meet"&&(l=c=r4e(this._element,i),s=(t-a*l)/2,e.alignX==="Min"&&(u=-s),e.alignX==="Max"&&(u=s),s=(n-o*c)/2,e.alignY==="Min"&&(f=-s),e.alignY==="Max"&&(f=s)),e.meetOrSlice==="slice"&&(l=c=i4e(this._element,i),s=a-t/l,e.alignX==="Mid"&&(d=s/2),e.alignX==="Max"&&(d=s),s=o-n/c,e.alignY==="Mid"&&(p=s/2),e.alignY==="Max"&&(p=s),a=t/l,o=n/c)),{width:a,height:o,scaleX:l,scaleY:c,offsetLeft:u,offsetTop:f,cropX:d,cropY:p}}static fromObject(e,t){let{filters:n,resizeFilter:i,src:s,crossOrigin:a,type:o}=e,l=Ti(e,$4e);return Promise.all([Ox(s,Ve(Ve({},t),{},{crossOrigin:a})),n&&w_(n,t),i&&w_([i],t),TT(l,t)]).then(c=>{let[u,f=[],[d]=[],p={}]=c;return new this(u,Ve(Ve({},l),{},{src:s,filters:f,resizeFilter:d},p))})}static fromURL(e){let{crossOrigin:t=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return Ox(e,{crossOrigin:t,signal:n}).then(s=>new this(s,i))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=ud(e,this.ATTRIBUTE_NAMES,n);return this.fromURL(i["xlink:href"],t,i).catch(s=>(Bh("log","Unable to parse Image",s),null))}}Be(uo,"type","Image"),Be(uo,"cacheProperties",[...cd,...IQ]),Be(uo,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),Be(uo,"CSS_CANVAS","canvas-img"),Be(uo,"ATTRIBUTE_NAMES",[...ep,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),dn.setClass(uo),dn.setSVGClass(uo);IT(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const kT=r=>r.webgl!==void 0,lP="precision highp float",eIe=`
    `.concat(lP,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),tIe=["type"],nIe=["type"],rIe=new RegExp(lP,"g");class zs{get type(){return this.constructor.type}constructor(){let e=Ti(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tIe);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return eIe}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:i="highp"}}=Fu();i!=="highp"&&(t=t.replace(rIe,lP.replace("highp",i)));const s=e.createShader(e.VERTEX_SHADER),a=e.createShader(e.FRAGMENT_SHADER),o=e.createProgram();if(!s||!a||!o)throw new _u("Vertex, fragment shader or program creation error");if(e.shaderSource(s,n),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new _u("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(a,t),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new _u("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.attachShader(o,s),e.attachShader(o,a),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw new _u('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(o)));const l=this.getUniformLocations(e,o)||{};return l.uStepW=e.getUniformLocation(o,"uStepW"),l.uStepH=e.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:this.getAttributeLocations(e,o),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const n=this.constructor.uniformLocations,i={};for(let s=0;s<n.length;s++)i[n[s]]=e.getUniformLocation(t,n[s]);return i}sendAttributeData(e,t,n){const i=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const n=e.destinationWidth,i=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===i||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,n,i)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){kT(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,n=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:n}=e,i=Bu({width:t,height:n});e.helpLayer=i}}toObject(){const e=Object.keys(this.constructor.defaults||{});return Ve({type:this.type},e.reduce((t,n)=>(t[n]=this[n],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Ti(e,nIe))}}Be(zs,"type","BaseFilter"),Be(zs,"uniformLocations",[]);const iIe={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class FS extends zs{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(iIe[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const n=new Gr(this.color).getSource(),i=this.alpha,s=n[0]*i,a=n[1]*i,o=n[2]*i,l=1-i;for(let c=0;c<t.length;c+=4){const u=t[c],f=t[c+1],d=t[c+2];let p,g,_;switch(this.mode){case"multiply":p=u*s/255,g=f*a/255,_=d*o/255;break;case"screen":p=255-(255-u)*(255-s)/255,g=255-(255-f)*(255-a)/255,_=255-(255-d)*(255-o)/255;break;case"add":p=u+s,g=f+a,_=d+o;break;case"difference":p=Math.abs(u-s),g=Math.abs(f-a),_=Math.abs(d-o);break;case"subtract":p=u-s,g=f-a,_=d-o;break;case"darken":p=Math.min(u,s),g=Math.min(f,a),_=Math.min(d,o);break;case"lighten":p=Math.max(u,s),g=Math.max(f,a),_=Math.max(d,o);break;case"overlay":p=s<128?2*u*s/255:255-2*(255-u)*(255-s)/255,g=a<128?2*f*a/255:255-2*(255-f)*(255-a)/255,_=o<128?2*d*o/255:255-2*(255-d)*(255-o)/255;break;case"exclusion":p=s+u-2*s*u/255,g=a+f-2*a*f/255,_=o+d-2*o*d/255;break;case"tint":p=s+u*l,g=a+f*l,_=o+d*l}t[c]=p,t[c+1]=g,t[c+2]=_}}sendUniformData(e,t){const n=new Gr(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(t.uColor,n)}}Be(FS,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),Be(FS,"type","BlendColor"),Be(FS,"uniformLocations",["uColor"]),dn.setClass(FS);const sIe={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},aIe=["type","image"];class BS extends zs{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return sIe[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]}applyTo2d(e){let{imageData:{data:t,width:n,height:i},filterBackend:{resources:s}}=e;const a=this.image;s.blendImage||(s.blendImage=Gc());const o=s.blendImage,l=o.getContext("2d");o.width!==n||o.height!==i?(o.width=n,o.height=i):l.clearRect(0,0,n,i),l.setTransform(a.scaleX,0,0,a.scaleY,a.left,a.top),l.drawImage(a.getElement(),0,0,n,i);const c=l.getImageData(0,0,n,i).data;for(let u=0;u<t.length;u+=4){const f=t[u],d=t[u+1],p=t[u+2],g=t[u+3],_=c[u],w=c[u+1],b=c[u+2],C=c[u+3];switch(this.mode){case"multiply":t[u]=f*_/255,t[u+1]=d*w/255,t[u+2]=p*b/255,t[u+3]=g*C/255;break;case"mask":t[u+3]=C}}}sendUniformData(e,t){const n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)}toObject(){return Ve(Ve({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:n,image:i}=e,s=Ti(e,aIe);return uo.fromObject(i,t).then(a=>new this(Ve(Ve({},s),{},{image:a})))}}Be(BS,"type","BlendImage"),Be(BS,"defaults",{mode:"multiply",alpha:1}),Be(BS,"uniformLocations",["uTransformMatrix","uImage"]),dn.setClass(BS);class US extends zs{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){kT(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:n,filterBackend:{resources:i}}=e;const{width:s,height:a}=n;i.blurLayer1||(i.blurLayer1=Gc(),i.blurLayer2=Gc());const o=i.blurLayer1,l=i.blurLayer2;o.width===s&&o.height===a||(l.width=o.width=s,l.height=o.height=a);const c=o.getContext("2d"),u=l.getContext("2d"),f=15,d=.06*this.blur*.5;let p,g,_,w;for(c.putImageData(n,0,0),u.clearRect(0,0,s,a),w=-15;w<=f;w++)p=(Math.random()-.5)/4,g=w/f,_=d*g*s+p,u.globalAlpha=1-Math.abs(g),u.drawImage(o,_,p),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);for(w=-15;w<=f;w++)p=(Math.random()-.5)/4,g=w/f,_=d*g*a+p,u.globalAlpha=1-Math.abs(g),u.drawImage(o,p,_),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);t.drawImage(o,0,0);const b=t.getImageData(0,0,o.width,o.height);return c.globalAlpha=1,c.clearRect(0,0,o.width,o.height),b}sendUniformData(e,t){const n=this.chooseRightDelta();e.uniform2fv(t.uDelta,n)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const n=e*this.blur*.12;return this.horizontal?t[0]=n:t[1]=n,t}}Be(US,"type","Blur"),Be(US,"defaults",{blur:0}),Be(US,"uniformLocations",["uDelta"]),dn.setClass(US);class jS extends zs{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.round(255*this.brightness);for(let i=0;i<t.length;i+=4)t[i]+=n,t[i+1]+=n,t[i+2]+=n}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}Be(jS,"type","Brightness"),Be(jS,"defaults",{brightness:0}),Be(jS,"uniformLocations",["uBrightness"]),dn.setClass(jS);const LQ={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class q0 extends zs{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,n=this.matrix,i=this.colorsOnly;for(let s=0;s<t.length;s+=4){const a=t[s],o=t[s+1],l=t[s+2];if(t[s]=a*n[0]+o*n[1]+l*n[2]+255*n[4],t[s+1]=a*n[5]+o*n[6]+l*n[7]+255*n[9],t[s+2]=a*n[10]+o*n[11]+l*n[12]+255*n[14],!i){const c=t[s+3];t[s]+=c*n[3],t[s+1]+=c*n[8],t[s+2]+=c*n[13],t[s+3]=a*n[15]+o*n[16]+l*n[17]+c*n[18]+255*n[19]}}}sendUniformData(e,t){const n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],s=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,i),e.uniform4fv(t.uConstants,s)}toObject(){return Ve(Ve({},super.toObject()),{},{matrix:[...this.matrix]})}}function wg(r,e){var t;const n=(Be(t=class extends q0{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",r),Be(t,"defaults",{colorsOnly:!1,matrix:e}),t);return dn.setClass(n,r),n}Be(q0,"type","ColorMatrix"),Be(q0,"defaults",LQ),Be(q0,"uniformLocations",["uColorMatrix","uConstants"]),dn.setClass(q0);wg("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);wg("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);wg("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);wg("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);wg("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);wg("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);wg("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class hz extends zs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){kT(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(n=>dn.getClass(n.type).fromObject(n,t))).then(n=>new this({subFilters:n}))}}Be(hz,"type","Composed"),dn.setClass(hz);class zS extends zs{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.floor(255*this.contrast),i=259*(n+255)/(255*(259-n));for(let s=0;s<t.length;s+=4)t[s]=i*(t[s]-128)+128,t[s+1]=i*(t[s+1]-128)+128,t[s+2]=i*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}Be(zS,"type","Contrast"),Be(zS,"defaults",{contrast:0}),Be(zS,"uniformLocations",["uContrast"]),dn.setClass(zS);const oIe={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class VS extends zs{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return oIe[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,n=t.data,i=this.matrix,s=Math.round(Math.sqrt(i.length)),a=Math.floor(s/2),o=t.width,l=t.height,c=e.ctx.createImageData(o,l),u=c.data,f=this.opaque?1:0;let d,p,g,_,w,b,C,M,A,k,O,R,I;for(O=0;O<l;O++)for(k=0;k<o;k++){for(w=4*(O*o+k),d=0,p=0,g=0,_=0,I=0;I<s;I++)for(R=0;R<s;R++)C=O+I-a,b=k+R-a,C<0||C>=l||b<0||b>=o||(M=4*(C*o+b),A=i[I*s+R],d+=n[M]*A,p+=n[M+1]*A,g+=n[M+2]*A,f||(_+=n[M+3]*A));u[w]=d,u[w+1]=p,u[w+2]=g,u[w+3]=f?n[w+3]:_}e.imageData=c}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return Ve(Ve({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}Be(VS,"type","Convolute"),Be(VS,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),Be(VS,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),dn.setClass(VS);const NQ="Gamma";class GS extends zs{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.gamma,i=1/n[0],s=1/n[1],a=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const o=this.rgbValues;for(let l=0;l<256;l++)o.r[l]=255*Math.pow(l/255,i),o.g[l]=255*Math.pow(l/255,s),o.b[l]=255*Math.pow(l/255,a);for(let l=0;l<t.length;l+=4)t[l]=o.r[t[l]],t[l+1]=o.g[t[l+1]],t[l+2]=o.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:NQ,gamma:this.gamma.concat()}}}Be(GS,"type",NQ),Be(GS,"defaults",{gamma:[1,1,1]}),Be(GS,"uniformLocations",["uGamma"]),dn.setClass(GS);const lIe={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class HS extends zs{applyTo2d(e){let{imageData:{data:t}}=e;for(let n,i=0;i<t.length;i+=4){const s=t[i],a=t[i+1],o=t[i+2];switch(this.mode){case"average":n=(s+a+o)/3;break;case"lightness":n=(Math.min(s,a,o)+Math.max(s,a,o))/2;break;case"luminosity":n=.21*s+.72*a+.07*o}t[i+2]=t[i+1]=t[i]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return lIe[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}Be(HS,"type","Grayscale"),Be(HS,"defaults",{mode:"average"}),Be(HS,"uniformLocations",["uMode"]),dn.setClass(HS);const cIe=Ve(Ve({},LQ),{},{rotation:0});class DI extends q0{calculateMatrix(){const e=this.rotation*Math.PI,t=rd(e),n=id(e),i=1/3,s=Math.sqrt(i)*n,a=1-t;this.matrix=[t+a/3,i*a-s,i*a+s,0,0,i*a+s,t+i*a,i*a-s,0,0,i*a-s,i*a+s,t+i*a,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}Be(DI,"type","HueRotation"),Be(DI,"defaults",cIe),dn.setClass(DI);class WS extends zs{applyTo2d(e){let{imageData:{data:t}}=e;for(let n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2],this.alpha&&(t[n+3]=255-t[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}Be(WS,"type","Invert"),Be(WS,"defaults",{alpha:!1,invert:!0}),Be(WS,"uniformLocations",["uInvert","uAlpha"]),dn.setClass(WS);class YS extends zs{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.noise;for(let i=0;i<t.length;i+=4){const s=(.5-Math.random())*n;t[i]+=s,t[i+1]+=s,t[i+2]+=s}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}Be(YS,"type","Noise"),Be(YS,"defaults",{noise:0}),Be(YS,"uniformLocations",["uNoise","uSeed"]),dn.setClass(YS);class JS extends zs{applyTo2d(e){let{imageData:{data:t,width:n,height:i}}=e;for(let s=0;s<i;s+=this.blocksize)for(let a=0;a<n;a+=this.blocksize){const o=4*s*n+4*a,l=t[o],c=t[o+1],u=t[o+2],f=t[o+3];for(let d=s;d<Math.min(s+this.blocksize,i);d++)for(let p=a;p<Math.min(a+this.blocksize,n);p++){const g=4*d*n+4*p;t[g]=l,t[g+1]=c,t[g+2]=u,t[g+3]=f}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}Be(JS,"type","Pixelate"),Be(JS,"defaults",{blocksize:4}),Be(JS,"uniformLocations",["uBlocksize"]),dn.setClass(JS);class XS extends zs{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=255*this.distance,i=new Gr(this.color).getSource(),s=[i[0]-n,i[1]-n,i[2]-n],a=[i[0]+n,i[1]+n,i[2]+n];for(let o=0;o<t.length;o+=4){const l=t[o],c=t[o+1],u=t[o+2];l>s[0]&&c>s[1]&&u>s[2]&&l<a[0]&&c<a[1]&&u<a[2]&&(t[o+3]=0)}}sendUniformData(e,t){const n=new Gr(this.color).getSource(),i=this.distance,s=[0+n[0]/255-i,0+n[1]/255-i,0+n[2]/255-i,1],a=[n[0]/255+i,n[1]/255+i,n[2]/255+i,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,a)}}Be(XS,"type","RemoveColor"),Be(XS,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),Be(XS,"uniformLocations",["uLow","uHigh"]),dn.setClass(XS);class QS extends zs{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),i=new Array(n);for(let s=1;s<=n;s++)i[s-1]=e(s*t);return i}generateShader(e){const t=new Array(e);for(let n=1;n<=e;n++)t[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((n,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){kT(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const n=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(n)/n}}applyTo2d(e){const t=e.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;const s=t.width,a=t.height,o=Math.round(s*n),l=Math.round(a*i);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,a,o,l):this.resizeType==="hermite"?this.hermiteFastResize(e,s,a,o,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,a,o,l):this.resizeType==="lanczos"?this.lanczosResize(e,s,a,o,l):new ImageData(o,l),e.imageData=c}sliceByTwo(e,t,n,i,s){const a=e.imageData,o=.5;let l=!1,c=!1,u=t*o,f=n*o;const d=e.filterBackend.resources;let p=0,g=0;const _=t;let w=0;d.sliceByTwo||(d.sliceByTwo=Gc());const b=d.sliceByTwo;(b.width<1.5*t||b.height<n)&&(b.width=1.5*t,b.height=n);const C=b.getContext("2d");for(C.clearRect(0,0,1.5*t,n),C.putImageData(a,0,0),i=Math.floor(i),s=Math.floor(s);!l||!c;)t=u,n=f,i<Math.floor(u*o)?u=Math.floor(u*o):(u=i,l=!0),s<Math.floor(f*o)?f=Math.floor(f*o):(f=s,c=!0),C.drawImage(b,p,g,t,n,_,w,u,f),p=_,g=w,w+=f;return C.getImageData(p,g,i,s)}lanczosResize(e,t,n,i,s){const a=e.imageData.data,o=e.ctx.createImageData(i,s),l=o.data,c=this.lanczosCreate(this.lanczosLobes),u=this.rcpScaleX,f=this.rcpScaleY,d=2/this.rcpScaleX,p=2/this.rcpScaleY,g=Math.ceil(u*this.lanczosLobes/2),_=Math.ceil(f*this.lanczosLobes/2),w={},b={x:0,y:0},C={x:0,y:0};return function M(A){let k,O,R,I,D,E,B,U,V,X,te;for(b.x=(A+.5)*u,C.x=Math.floor(b.x),k=0;k<s;k++){for(b.y=(k+.5)*f,C.y=Math.floor(b.y),D=0,E=0,B=0,U=0,V=0,O=C.x-g;O<=C.x+g;O++)if(!(O<0||O>=t)){X=Math.floor(1e3*Math.abs(O-b.x)),w[X]||(w[X]={});for(let ee=C.y-_;ee<=C.y+_;ee++)ee<0||ee>=n||(te=Math.floor(1e3*Math.abs(ee-b.y)),w[X][te]||(w[X][te]=c(Math.sqrt(Math.pow(X*d,2)+Math.pow(te*p,2))/1e3)),R=w[X][te],R>0&&(I=4*(ee*t+O),D+=R,E+=R*a[I],B+=R*a[I+1],U+=R*a[I+2],V+=R*a[I+3]))}I=4*(k*i+A),l[I]=E/D,l[I+1]=B/D,l[I+2]=U/D,l[I+3]=V/D}return++A<i?M(A):o}(0)}bilinearFiltering(e,t,n,i,s){let a,o,l,c,u,f,d,p,g,_,w,b,C,M=0;const A=this.rcpScaleX,k=this.rcpScaleY,O=4*(t-1),R=e.imageData.data,I=e.ctx.createImageData(i,s),D=I.data;for(d=0;d<s;d++)for(p=0;p<i;p++)for(u=Math.floor(A*p),f=Math.floor(k*d),g=A*p-u,_=k*d-f,C=4*(f*t+u),w=0;w<4;w++)a=R[C+w],o=R[C+4+w],l=R[C+O+w],c=R[C+O+4+w],b=a*(1-g)*(1-_)+o*g*(1-_)+l*_*(1-g)+c*g*_,D[M++]=b;return I}hermiteFastResize(e,t,n,i,s){const a=this.rcpScaleX,o=this.rcpScaleY,l=Math.ceil(a/2),c=Math.ceil(o/2),u=e.imageData.data,f=e.ctx.createImageData(i,s),d=f.data;for(let p=0;p<s;p++)for(let g=0;g<i;g++){const _=4*(g+p*i);let w=0,b=0,C=0,M=0,A=0,k=0,O=0;const R=(p+.5)*o;for(let I=Math.floor(p*o);I<(p+1)*o;I++){const D=Math.abs(R-(I+.5))/c,E=(g+.5)*a,B=D*D;for(let U=Math.floor(g*a);U<(g+1)*a;U++){let V=Math.abs(E-(U+.5))/l;const X=Math.sqrt(B+V*V);X>1&&X<-1||(w=2*X*X*X-3*X*X+1,w>0&&(V=4*(U+I*t),O+=w*u[V+3],C+=w,u[V+3]<255&&(w=w*u[V+3]/250),M+=w*u[V],A+=w*u[V+1],k+=w*u[V+2],b+=w))}}d[_]=M/b,d[_+1]=A/b,d[_+2]=k/b,d[_+3]=O/C}return f}}Be(QS,"type","Resize"),Be(QS,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),Be(QS,"uniformLocations",["uDelta","uTaps"]),dn.setClass(QS);class KS extends zs{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.saturation;for(let i=0;i<t.length;i+=4){const s=t[i],a=t[i+1],o=t[i+2],l=Math.max(s,a,o);t[i]+=l!==s?(l-s)*n:0,t[i+1]+=l!==a?(l-a)*n:0,t[i+2]+=l!==o?(l-o)*n:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}Be(KS,"type","Saturation"),Be(KS,"defaults",{saturation:0}),Be(KS,"uniformLocations",["uSaturation"]),dn.setClass(KS);class qS extends zs{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.vibrance;for(let i=0;i<t.length;i+=4){const s=t[i],a=t[i+1],o=t[i+2],l=Math.max(s,a,o),c=(s+a+o)/3,u=2*Math.abs(l-c)/255*n;t[i]+=l!==s?(l-s)*u:0,t[i+1]+=l!==a?(l-a)*u:0,t[i+2]+=l!==o?(l-o)*u:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}Be(qS,"type","Vibrance"),Be(qS,"defaults",{vibrance:0}),Be(qS,"uniformLocations",["uVibrance"]),dn.setClass(qS);const DQ=P.memo(({drawingMode:r,setDrawingMode:e,handleCanvasUndo:t,handleCanvasRedo:n,handleClearCanvas:i,updateTextureFromCanvas:s,canUndo:a=!1,canRedo:o=!1})=>j("div",{className:"texture-editor-toolbar",children:[S("button",{className:`texture-editor-tool ${r==="brush"?"active":""}`,onClick:()=>e("brush"),title:"Brush",children:S(bre,{size:16})}),S("button",{className:`texture-editor-tool ${r==="eraser"?"active":""}`,onClick:()=>e("eraser"),title:"Eraser",children:S(Vre,{size:16})}),S("button",{className:`texture-editor-tool ${r==="text"?"active":""}`,onClick:()=>e("text"),title:"Text",children:S(lx,{size:16})}),S("button",{className:`texture-editor-tool ${r==="logo"?"active":""}`,onClick:()=>e("logo"),title:"Logo",children:S($0,{size:16})}),S("div",{className:"texture-editor-tool-spacer"}),S("button",{className:"texture-editor-tool",onClick:t,disabled:!a,title:"Undo",children:S(cV,{size:16})}),S("button",{className:"texture-editor-tool",onClick:n,disabled:!o,title:"Redo",children:S(uV,{size:16})}),S("button",{className:"texture-editor-tool",onClick:i,title:"Clear",children:S(x1,{size:16})}),S("button",{className:"texture-editor-tool",onClick:s,title:"Apply to Model",children:S(YM,{size:16})})]}));DQ.displayName="EditorToolbar";const pz=({isEraser:r=!1,brushColor:e,setBrushColor:t,brushSize:n,setBrushSize:i})=>j(Br,{children:[!r&&j("div",{className:"brush-control",children:[S("label",{className:"brush-control-label",children:"Brush Color"}),S("input",{type:"color",value:e,onChange:s=>t(s.target.value),className:"brush-color-input"})]}),j("div",{className:"brush-control",children:[j("label",{className:"brush-control-label",children:[r?"Eraser":"Brush"," Size: ",n,"px"]}),S("input",{type:"range",min:"1",max:"50",value:n,onChange:s=>i(Number(s.target.value)),className:"brush-size-input"})]})]}),uIe=({textSettings:r,onTextSettingsChange:e,handleApplyTextToCanvas:t})=>{var s;const n=[{value:"Arial",label:"Arial"},{value:"Helvetica",label:"Helvetica"},{value:"Times New Roman",label:"Times New Roman"},{value:"Georgia",label:"Georgia"},{value:"Verdana",label:"Verdana"},{value:"Roboto",label:"Roboto"},{value:"Open Sans",label:"Open Sans"},{value:"Montserrat",label:"Montserrat"},{value:"Vegan Style",label:"Vegan Style"},{value:"JURASICK",label:"JURASICK"},{value:"Lemon Jelly",label:"Lemon Jelly"},{value:"Beautiful People",label:"Beautiful People"},{value:"Beauty Mountains",label:"Beauty Mountains"},{value:"Stylish Calligraphy",label:"Stylish Calligraphy"}],i={"Standard Fonts":n.slice(0,5),"Google Fonts":n.slice(5,8),"Specialty Fonts":n.slice(8)};return j(Br,{children:[S("div",{className:"text-input-group",children:S("input",{type:"text",value:r.text,onChange:a=>e("text",a.target.value),placeholder:"Enter your text here",className:"text-input"})}),j("div",{className:"text-controls-grid",children:[j("div",{className:"text-control",children:[S("label",{className:"text-control-label",children:"Font"}),S("select",{value:r.fontFamily||"Arial",onChange:a=>e("fontFamily",a.target.value),className:"font-select",children:Object.entries(i).map(([a,o])=>S("optgroup",{label:a,children:o.map(l=>S("option",{value:l.value,style:{fontFamily:l.value},children:l.label},l.value))},a))})]}),j("div",{className:"text-control",children:[S("label",{className:"text-control-label",children:"Size"}),S("input",{type:"range",min:"12",max:"72",value:r.fontSize,onChange:a=>e("fontSize",Number(a.target.value)),className:"text-range"}),j("span",{className:"text-value",children:[r.fontSize,"px"]})]}),j("div",{className:"text-control",children:[S("label",{className:"text-control-label",children:"Color"}),S("input",{type:"color",value:r.color,onChange:a=>e("color",a.target.value),className:"text-color-input"})]})]}),S("div",{className:"text-font-preview",style:{fontFamily:r.fontFamily||"Arial",fontSize:`${r.fontSize}px`,color:r.color},children:r.text||"Font Preview"}),S("div",{className:"text-actions",children:S("button",{className:"text-add-button",onClick:t,disabled:!((s=r.text)!=null&&s.trim()),children:"Add Text to Canvas"})})]})};class fIe{constructor(){this.cloudName="ds0xdh85j",this.uploadPreset="Styloft",this.apiUrl=`https://api.cloudinary.com/v1_1/${this.cloudName}/image/upload`}async uploadImage(e){try{const t=new FormData;t.append("file",e),t.append("upload_preset",this.uploadPreset);const i=await(await fetch(this.apiUrl,{method:"POST",body:t})).json();if(!i.secure_url)throw new Error("Image upload failed");return{url:i.secure_url,publicId:i.public_id,width:i.width,height:i.height,format:i.format}}catch(t){throw console.error("Error uploading to Cloudinary:",t),t}}}const $3=new fIe,dIe=({logoSettings:r,onLogoSettingsChange:e,handleApplyLogoToCanvas:t,selectedLogoIndex:n,removeLogo:i})=>{const[s,a]=P.useState(!1),[o,l]=P.useState(null);return j("div",{className:"logo-controls",children:[S("h4",{className:"logo-controls-title",children:"Logo Controls"}),j("div",{className:"logo-input-group",children:[S("input",{type:"file",accept:"image/*",onChange:async u=>{const f=u.target.files[0];if(!f)return;if(console.log("File selected:",f.name,"size:",f.size,"type:",f.type),!f.type.startsWith("image/")){console.error("Selected file is not an image"),l("Please select an image file");return}const d=5*1024*1024;if(f.size>d){console.error("File too large"),l("Please select an image smaller than 5MB");return}try{a(!0),l(null);const p=await $3.uploadImage(f);console.log("Uploaded to Cloudinary:",p),e("image",p.url),l(null)}catch(p){console.error("Error uploading image:",p),l("Failed to upload image. Please try again.")}finally{a(!1)}},className:"logo-input",id:"logo-upload",disabled:s}),S("label",{htmlFor:"logo-upload",className:"logo-upload-label",children:s?"Uploading...":"Choose Logo File"}),o&&S("div",{className:"logo-upload-error",children:o}),r.image&&j("div",{className:"logo-preview",children:[S("p",{children:"Logo selected "}),S("img",{src:r.image,alt:"Logo preview",style:{maxWidth:"100px",maxHeight:"50px",marginTop:"5px",border:"1px solid #ddd"}})]})]}),j("div",{className:"logo-controls-grid",children:[j("div",{className:"logo-control",children:[S("label",{className:"logo-control-label",children:"Size"}),S("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:r.size,onChange:u=>e("size",Number(u.target.value)),className:"logo-range",disabled:s}),j("span",{className:"logo-value",children:[r.size.toFixed(1),"x"]})]}),j("div",{className:"logo-control",children:[S("label",{className:"logo-control-label",children:"Opacity"}),S("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:r.opacity||1,onChange:u=>e("opacity",Number(u.target.value)),className:"logo-range",disabled:s}),j("span",{className:"logo-value",children:[Math.round((r.opacity||1)*100),"%"]})]}),n!==null&&j("div",{className:"logo-advanced-controls",children:[j("div",{className:"logo-control-checkbox",children:[S("input",{type:"checkbox",id:"lock-movement",checked:r.lockMovement||!1,onChange:u=>e("lockMovement",u.target.checked),disabled:s}),S("label",{htmlFor:"lock-movement",children:"Lock Position"})]}),j("div",{className:"logo-control-checkbox",children:[S("input",{type:"checkbox",id:"lock-rotation",checked:r.lockRotation||!1,onChange:u=>e("lockRotation",u.target.checked),disabled:s}),S("label",{htmlFor:"lock-rotation",children:"Lock Rotation"})]}),j("div",{className:"logo-control-checkbox",children:[S("input",{type:"checkbox",id:"lock-scaling",checked:r.lockScaling||!1,onChange:u=>e("lockScaling",u.target.checked),disabled:s}),S("label",{htmlFor:"lock-scaling",children:"Lock Scaling"})]})]})]}),j("div",{className:"logo-actions",children:[S("button",{className:"logo-add-button",onClick:t,disabled:!r.image||s,children:s?"Uploading...":"Add Logo to Canvas"}),n!==null&&j(Br,{children:[S("button",{className:"logo-remove-button",onClick:i,disabled:s,children:"Remove Selected Logo"}),j("div",{className:"logo-manipulation-info",children:[S("p",{children:" Drag to move the logo"}),S("p",{children:" Drag corners to resize"}),S("p",{children:" Drag rotation control to rotate"})]})]})]})]})},hIe=P.forwardRef(({selectedModel:r,selectedPart:e,uvMappings:t,textElements:n,textSettings:i,onTextSettingsChange:s,canvasTextures:a,setCanvasTextures:o,setTextures:l,logoElements:c,onLogoSettingsChange:u,onClose:f,onCanvasObjectsChange:d},p)=>{var _t;const g=P.useRef(null),_=P.useRef(null),[w]=P.useState({width:512,height:512}),[b,C]=P.useState("brush"),[M,A]=P.useState("#000000"),[k,O]=P.useState(5),[R,I]=P.useState(null),[D,E]=P.useState({image:null,size:1,opacity:1,lockMovement:!1,lockRotation:!1,lockScaling:!1}),[B,U]=P.useState({}),[V,X]=P.useState({}),[te,ee]=P.useState({}),[ue,ne]=P.useState([]),oe=()=>{if(_.current)try{const _e=_.current.toDataURL({format:"png",quality:1});o(Z=>({...Z,[e]:_e}));const Ne=_.current.getElement(),Ce=document.createElement("canvas"),He=Ce.getContext("2d");Ce.width=Ne.width,Ce.height=Ne.height,He.translate(0,Ne.height),He.scale(1,-1),He.drawImage(Ne,0,0,Ne.width,Ne.height);const Ee=new zY(Ce);Ee.needsUpdate=!0,l(Z=>({...Z,[e]:Ee}))}catch(_e){console.error("Error updating texture:",_e)}},q=()=>{if(_.current)try{const _e=JSON.stringify(_.current.toJSON()),Ne=te[e]||0,Ce=[...(V[e]||[]).slice(0,Ne+1),_e];X(He=>({...He,[e]:Ce})),ee(He=>({...He,[e]:Ce.length-1})),oe()}catch(_e){console.error("Error saving canvas state:",_e)}},J=_e=>{if(!_.current)return;const Ne=_.current,Ce=Ne.getObjects();if(_e>=Ce.length-1)return;const He=Ce[_e],Ee=Ce[_e+1];Ne.moveTo(He,_e+1),Ne.moveTo(Ee,_e),Ne.renderAll(),q()},ie=_e=>{if(!_.current)return;const Ne=_.current,Ce=Ne.getObjects();if(_e<=0)return;const He=Ce[_e],Ee=Ce[_e-1];Ne.moveTo(He,_e-1),Ne.moveTo(Ee,_e),Ne.renderAll(),q()},he=_e=>{if(!_.current)return;const Ne=_.current,Ce=Ne.getObjects();if(_e<0||_e>=Ce.length)return;const He=Ce[_e];Ne.bringToFront(He),Ne.renderAll(),q()},$=_e=>{if(!_.current)return;const Ne=_.current,Ce=Ne.getObjects();if(_e<0||_e>=Ce.length)return;const He=Ce[_e];Ne.sendToBack(He),Ne.renderAll(),q()};P.useImperativeHandle(p,()=>({moveObjectForward:_e=>{console.log("Moving object forward:",_e),J(_e)},moveObjectBackward:_e=>{console.log("Moving object backward:",_e),ie(_e)},bringObjectToFront:_e=>{console.log("Bringing object to front:",_e),he(_e)},sendObjectToBack:_e=>{console.log("Sending object to back:",_e),$(_e)},selectObject:_e=>{if(console.log("Selecting object:",_e),!_.current)return;const Ne=_.current.getObjects();_e>=0&&_e<Ne.length&&(_.current.setActiveObject(Ne[_e]),_.current.renderAll())},loadMaterialAsBackground:_e=>{if(console.log("Loading material as background:",_e),!_.current)return;const Ne=_.current,Ce=Ne.getObjects().find(He=>He.name==="base-texture");Ce&&Ne.remove(Ce),uo.fromURL(_e,He=>{He.set({selectable:!1,evented:!1,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,hasControls:!1,hasBorders:!1,name:"base-texture",excludeFromExport:!1}),He.scaleToWidth(Ne.width),He.scaleToHeight(Ne.height),Ne.add(He),Ne.sendToBack(He),Ne.renderAll(),q(),oe()},{crossOrigin:"anonymous"})},getAllCanvasData:()=>_.current?{[e]:_.current.toJSON()}:{},getCanvasHistory:()=>({canvasHistory:V,historyIndex:te}),loadCanvasData:_e=>{if(!_.current)return;const Ne=_e[e];Ne&&_.current.loadFromJSON(Ne,()=>{_.current.renderAll(),oe()})},restoreCanvasHistory:_e=>{_e.canvasHistory&&X(_e.canvasHistory),_e.historyIndex&&ee(_e.historyIndex)}}),[e,V,te,oe]),P.useEffect(()=>{if(_.current){const _e=()=>{const Ce=_.current.getObjects().map((He,Ee)=>({id:He.id||`canvas-object-${Ee}`,type:He.type,name:He.text||(He.type==="image"?`Logo ${Ee+1}`:`Object ${Ee+1}`),fabricObject:He,zIndex:_.current.getObjects().indexOf(He)}));ne(Ce),typeof d=="function"&&d(Ce,e)};return _.current.on("object:added",_e),_.current.on("object:removed",_e),_.current.on("object:modified",_e),_.current.on("object:moved",_e),_e(),()=>{_.current&&(_.current.off("object:added",_e),_.current.off("object:removed",_e),_.current.off("object:modified",_e),_.current.off("object:moved",_e))}}},[_.current,e,d]),P.useEffect(()=>(g.current&&ce()&&(ge(b),U(Ne=>({...Ne,[e]:!0}))),()=>{_.current&&(_.current.off(),_.current.dispose())}),[e]),P.useEffect(()=>{ge(b)},[b]),P.useEffect(()=>{if(!_.current)return;const _e=_.current;_e.isDrawingMode&&_e.freeDrawingBrush&&(_e.freeDrawingBrush.color=M,_e.freeDrawingBrush.width=k)},[M,k]),P.useEffect(()=>{if(_.current)return _.current.on("selection:created",Ke),_.current.on("selection:updated",Ke),_.current.on("selection:cleared",()=>I(null)),()=>{_.current&&(_.current.off("selection:created",Ke),_.current.off("selection:updated",Ke),_.current.off("selection:cleared"))}},[_.current]);const ge=_e=>{if(!_.current)return;const Ne=_.current;switch(Ne.isDrawingMode=!1,Ne.getActiveObject()&&Ne.discardActiveObject(),Ne.renderAll(),_e){case"brush":Ne.isDrawingMode=!0,Ne.freeDrawingBrush||(Ne.freeDrawingBrush=new x_(Ne)),Ne.freeDrawingBrush.color=M,Ne.freeDrawingBrush.width=k;break;case"eraser":Ne.isDrawingMode=!0,Ne.freeDrawingBrush||(Ne.freeDrawingBrush=new x_(Ne)),Ne.freeDrawingBrush.color="#ffffff",Ne.freeDrawingBrush.width=k;break}},pe=()=>{if(!_.current)return;const _e=te[e]||0;if(_e<=0)return;const Ne=_e-1,Ce=V[e][Ne];try{_.current.loadFromJSON(JSON.parse(Ce),()=>{_.current.renderAll(),ee(He=>({...He,[e]:Ne})),oe()})}catch(He){console.error("Error during undo operation:",He)}},we=()=>{var Ee;if(!_.current)return;const _e=te[e]||0,Ne=(((Ee=V[e])==null?void 0:Ee.length)||1)-1;if(_e>=Ne)return;const Ce=_e+1,He=V[e][Ce];try{_.current.loadFromJSON(JSON.parse(He),()=>{_.current.renderAll(),ee(Z=>({...Z,[e]:Ce})),oe()})}catch(Z){console.error("Error during redo operation:",Z)}},ke=()=>{if(_.current)try{const _e=_.current.getObjects().find(Ne=>Ne.name==="base-texture");_.current.clear(),_e?_.current.add(_e):_.current.backgroundColor="#ffffff",_.current.renderAll(),q()}catch(_e){console.error("Error clearing canvas:",_e)}},Pe=()=>{if(!(!_.current||!i.text.trim()))try{const _e=new Ba(i.text,{left:w.width/2,top:w.height/2,fontSize:i.fontSize||24,fontWeight:i.fontWeight||"normal",fontStyle:i.fontStyle||"normal",fontFamily:i.fontFamily||"Arial",fill:i.color||"#000000",originX:"center",originY:"center"});_.current.add(_e),_.current.setActiveObject(_e),_.current.renderAll(),q()}catch(_e){console.error("Error adding text to canvas:",_e)}},je=()=>{if(!_.current||!D.image){console.error("Canvas or logo image not available");return}console.log("Adding logo to canvas from URL:",D.image);const _e=new Image;_e.crossOrigin="anonymous",_e.onload=()=>{console.log("Logo image loaded successfully");try{const Ne=new uo(_e,{left:_.current.width/2,top:_.current.height/2,originX:"center",originY:"center",opacity:D.opacity||1,scaleX:D.size,scaleY:D.size,selectable:!0});if(D.lockMovement&&(Ne.lockMovementX=Ne.lockMovementY=!0),D.lockRotation&&(Ne.lockRotation=!0),D.lockScaling&&(Ne.lockScalingX=Ne.lockScalingY=!0),Ne.set("cloudinaryUrl",D.image),_.current.add(Ne),_.current.setActiveObject(Ne),_.current.renderAll(),q(),d){const Ce=_.current.getObjects();d(Ce,e)}}catch(Ne){console.error("Error creating fabric image object:",Ne)}},_e.onerror=Ne=>{console.error("Error loading logo image:",Ne),alert("Failed to load the logo image. Please try a different image.")},_e.src=D.image},Ke=_e=>{if(!_e.selected||_e.selected.length===0)return;const Ne=_e.selected[0];if(Ne.type==="image"){const He=_.current.getObjects().indexOf(Ne);I(He),E(Ee=>({...Ee,opacity:Ne.opacity||1,lockMovement:Ne.lockMovementX||!1,lockRotation:Ne.lockRotation||!1,lockScaling:Ne.lockScalingX||!1}))}else I(null)},Ie=(_e,Ne)=>{if(E(Ce=>({...Ce,[_e]:Ne})),u&&u(_e,Ne),R!==null&&_.current){const Ce=_.current.getActiveObject();if(Ce&&Ce.type==="image"){switch(_e){case"opacity":Ce.set("opacity",Ne);break;case"lockMovement":Ce.lockMovementX=Ne,Ce.lockMovementY=Ne;break;case"lockRotation":Ce.lockRotation=Ne;break;case"lockScaling":Ce.lockScalingX=Ne,Ce.lockScalingY=Ne;break}_.current.renderAll(),q()}}},Ge=()=>{if(!_.current)return;const _e=_.current.getActiveObject();_e&&(_.current.remove(_e),_.current.renderAll(),q(),I(null))},ce=()=>{if(!g.current)return;console.log("Initializing Fabric.js canvas"),g.current.innerHTML="";const _e=document.createElement("div");_e.className="fabric-canvas-container",g.current.appendChild(_e);const Ne=document.createElement("canvas");Ne.width=w.width,Ne.height=w.height,Ne.id="fabric-canvas",_e.appendChild(Ne);try{const Ce=new q3("fabric-canvas",{width:w.width,height:w.height,backgroundColor:"#ffffff",preserveObjectStacking:!0,selection:!0});return _.current=Ce,console.log("Fabric.js canvas initialized successfully"),Ce.on("selection:created",Ke),Ce.on("selection:updated",Ke),Ce.on("selection:cleared",()=>I(null)),Ce.on("object:modified",q),Ce.on("object:added",q),V[e]||(X(He=>({...He,[e]:[JSON.stringify(Ce.toJSON())]})),ee(He=>({...He,[e]:0}))),a[e]&&uo.fromURL(a[e],He=>{He.set({selectable:!1,evented:!1,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,hasControls:!1,hasBorders:!1,name:"base-texture",excludeFromExport:!1}),He.scaleToWidth(Ce.width),He.scaleToHeight(Ce.height),Ce.add(He),Ce.sendToBack(He),Ce.renderAll(),q()},{crossOrigin:"anonymous"}),Ce}catch(Ce){return console.error("Error initializing Fabric.js canvas:",Ce),null}};return j("div",{className:"texture-editor-container",children:[j("div",{className:"texture-editor-toolbar",children:[S(DQ,{drawingMode:b,setDrawingMode:C,handleCanvasUndo:pe,handleCanvasRedo:we,handleClearCanvas:ke,updateTextureFromCanvas:oe,canUndo:te[e]>0,canRedo:te[e]<(((_t=V[e])==null?void 0:_t.length)||1)-1}),S("button",{className:"texture-editor-tool",onClick:f,"data-tooltip":"Close Editor",children:S("span",{children:""})})]}),S("div",{className:"texture-editor-canvas-container",children:S("div",{ref:g,className:"texture-editor-canvas-wrapper"})}),j("div",{className:"texture-editor-controls",children:[b==="brush"&&S(pz,{brushColor:M,setBrushColor:A,brushSize:k,setBrushSize:O}),b==="eraser"&&S(pz,{isEraser:!0,brushSize:k,setBrushSize:O}),b==="text"&&S(uIe,{textSettings:i,onTextSettingsChange:s,handleApplyTextToCanvas:Pe}),b==="logo"&&S(dIe,{logoSettings:D,onLogoSettingsChange:Ie,handleApplyLogoToCanvas:je,selectedLogoIndex:R,removeLogo:Ge})]})]})}),kQ=P.memo(({activeTab:r,onTabChange:e,tabs:t,children:n})=>{const i=P.useMemo(()=>ir.Children.toArray(n).find(s=>s.props.id===r),[n,r]);return j("div",{className:"tabs",children:[S("div",{className:"tabs-list",children:t.map(s=>S("button",{className:`tab-button ${r===s.id?"tab-active":""}`,onClick:()=>e(s.id),"aria-selected":r===s.id,role:"tab",children:s.label},s.id))}),S("div",{className:"tab-content tab-content-active",role:"tabpanel",children:i})]})});kQ.displayName="TabPanel";function pIe({selectedModel:r,onModelChange:e}){return j("div",{className:"model-grid",children:[j("button",{className:`model-button ${r==="shirt"?"model-button-selected":""}`,onClick:()=>e("shirt"),children:[S(Qx,{className:"model-icon"}),S("span",{children:"Shirt"})]}),j("button",{className:`model-button ${r==="trouser"?"model-button-selected":""}`,onClick:()=>e("trouser"),children:[S(lV,{className:"model-icon"}),S("span",{children:"Trouser"})]}),j("button",{className:`model-button ${r==="short"?"model-button-selected":""}`,onClick:()=>e("short"),children:[S(jie,{className:"model-icon"}),S("span",{children:"Short"})]}),j("button",{className:`model-button ${r==="frock"?"model-button-selected":""}`,onClick:()=>e("frock"),children:[S(_ie,{className:"model-icon"}),S("span",{children:"Frock"})]})]})}function mz({parts:r,selectedPart:e,onPartSelect:t}){return j("div",{className:"part-selector",children:[S("label",{className:"part-selector-label",children:"Select Part"}),S("div",{className:"part-buttons",children:r.map(n=>S("button",{className:`part-button ${e===n?"part-button-selected":""}`,onClick:()=>t(n),children:n},n))})]})}function mIe({color:r,onChange:e}){return j("div",{className:"color-grid",children:[["#ffffff","#000000","#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ff9900","#9900ff"].map(n=>S("button",{className:`color-button ${r===n?"color-button-selected":""}`,style:{backgroundColor:n},onClick:()=>e(n),"aria-label":`Select color ${n}`},n)),j("div",{className:"custom-color-container",children:[S("label",{htmlFor:"custom-color",className:"color-label",children:"Custom Color"}),S("input",{id:"custom-color",type:"color",value:r,onChange:n=>e(n.target.value),className:"custom-color-input"})]})]})}function gIe({label:r,accept:e,onChange:t,preview:n}){const i=P.useRef(null);return j("div",{className:"file-uploader",children:[S("label",{className:"file-label",children:r}),j("div",{className:"file-controls",children:[S("button",{className:"file-button",onClick:()=>i.current.click(),children:"Choose File"}),S("input",{ref:i,type:"file",accept:e,onChange:a=>{const o=a.target.files[0];if(o){const l=new FileReader;l.onload=c=>{t(c.target.result)},l.readAsDataURL(o)}},className:"hidden-input"}),n&&S("div",{className:"file-preview",children:S("img",{src:n||"/placeholder.svg",alt:"Preview",className:"preview-image"})})]})]})}function vIe({onChange:r,lighting:e}){return j("div",{className:"lighting-controls",children:[S("label",{className:"lighting-label",children:"Lighting"}),j("div",{className:"lighting-control",children:[S("label",{className:"lighting-control-label",children:"Intensity"}),S("input",{type:"range",min:"0",max:"2",step:"0.1",value:e.intensity,onChange:t=>r({...e,intensity:Number(t.target.value)}),className:"lighting-range"}),S("span",{children:e.intensity.toFixed(1)})]}),j("div",{className:"lighting-control",children:[S("label",{className:"lighting-control-label",children:"Direction"}),j("div",{className:"lighting-direction-controls",children:[S("button",{className:"lighting-direction-button",onClick:()=>r({...e,direction:[0,5,5]}),children:"Front"}),S("button",{className:"lighting-direction-button",onClick:()=>r({...e,direction:[0,5,-5]}),children:"Back"}),S("button",{className:"lighting-direction-button",onClick:()=>r({...e,direction:[5,5,0]}),children:"Right"}),S("button",{className:"lighting-direction-button",onClick:()=>r({...e,direction:[-5,5,0]}),children:"Left"})]})]}),j("div",{className:"lighting-control",children:[S("label",{className:"lighting-control-label",children:"Environment"}),j("select",{className:"lighting-select",value:e.environment,onChange:t=>r({...e,environment:t.target.value}),children:[S("option",{value:"studio",children:"Studio"}),S("option",{value:"sunset",children:"Sunset"}),S("option",{value:"dawn",children:"Dawn"}),S("option",{value:"night",children:"Night"}),S("option",{value:"warehouse",children:"Warehouse"}),S("option",{value:"forest",children:"Forest"}),S("option",{value:"apartment",children:"Apartment"}),S("option",{value:"city",children:"City"}),S("option",{value:"park",children:"Park"}),S("option",{value:"lobby",children:"Lobby"})]})]})]})}const yIe=({onPatternGenerated:r})=>{const[e,t]=P.useState("stripes"),[n,i]=P.useState("#4f46e5"),[s,a]=P.useState("#ffffff"),[o,l]=P.useState(20),[c,u]=P.useState(0),[f,d]=P.useState(!1),p=P.useRef(null),g=[{id:"stripes",name:"Stripes",icon:S(EO,{size:16})},{id:"dots",name:"Polka Dots",icon:S(Bw,{size:16})},{id:"chevron",name:"Chevron",icon:S(cx,{size:16})},{id:"checkered",name:"Checkered",icon:S(GM,{size:16})},{id:"diagonal",name:"Diagonal",icon:S(EO,{size:16})},{id:"herringbone",name:"Herringbone",icon:S(cx,{size:16})},{id:"houndstooth",name:"Houndstooth",icon:S(Bw,{size:16})},{id:"argyle",name:"Argyle",icon:S(cx,{size:16})}];P.useEffect(()=>{_()},[e,n,s,o,c]);const _=()=>{const E=p.current;if(!E)return;const B=E.getContext("2d"),U=E.width,V=E.height;switch(B.clearRect(0,0,U,V),B.fillStyle=s,B.fillRect(0,0,U,V),c!==0&&(B.save(),B.translate(U/2,V/2),B.rotate(c*Math.PI/180),B.translate(-U/2,-V/2)),B.fillStyle=n,e){case"stripes":w(B,U,V,o);break;case"dots":b(B,U,V,o);break;case"chevron":C(B,U,V,o);break;case"checkered":M(B,U,V,o);break;case"diagonal":A(B,U,V,o);break;case"herringbone":k(B,U,V,o);break;case"houndstooth":O(B,U,V,o);break;case"argyle":R(B,U,V,o);break;default:w(B,U,V,o)}c!==0&&B.restore()},w=(E,B,U,V)=>{const X=V;for(let te=0;te<B;te+=X*2)E.fillRect(te,0,X,U)},b=(E,B,U,V)=>{const X=V/2,te=V*2;for(let ee=X;ee<U;ee+=te)for(let ue=X;ue<B;ue+=te)E.beginPath(),E.arc(ue,ee,X,0,Math.PI*2),E.fill();for(let ee=X+te/2;ee<U;ee+=te)for(let ue=X+te/2;ue<B;ue+=te)E.beginPath(),E.arc(ue,ee,X,0,Math.PI*2),E.fill()},C=(E,B,U,V)=>{const X=V,te=V*2;for(let ee=0;ee<U+X;ee+=X){E.beginPath();for(let ue=0;ue<B+te;ue+=te)E.lineTo(ue,ee-X/2),E.lineTo(ue+te/2,ee),E.lineTo(ue+te,ee-X/2);E.lineTo(B,ee-X/2),E.lineTo(B,ee+X/2),E.lineTo(0,ee+X/2),E.closePath(),E.fill()}},M=(E,B,U,V)=>{const X=V;for(let te=0;te<U;te+=X*2)for(let ee=0;ee<B;ee+=X*2)E.fillRect(ee,te,X,X),E.fillRect(ee+X,te+X,X,X)},A=(E,B,U,V)=>{const X=V/2,te=V*2;E.lineWidth=X;for(let ee=-U;ee<B+U;ee+=te)E.beginPath(),E.moveTo(ee,0),E.lineTo(ee+U,U),E.stroke()},k=(E,B,U,V)=>{const X=V/3,te=V*1.5;E.lineWidth=X;for(let ee=0;ee<U+te;ee+=te)for(let ue=0;ue<B+te;ue+=te)E.beginPath(),E.moveTo(ue-te/2,ee),E.lineTo(ue,ee+te/2),E.lineTo(ue+te/2,ee),E.stroke(),E.beginPath(),E.moveTo(ue-te/2,ee+te/2),E.lineTo(ue,ee),E.lineTo(ue+te/2,ee+te/2),E.stroke()},O=(E,B,U,V)=>{const X=V*1.5;for(let te=0;te<U;te+=X*2)for(let ee=0;ee<B;ee+=X*2)E.beginPath(),E.moveTo(ee,te),E.lineTo(ee+X,te),E.lineTo(ee+X,te+X),E.lineTo(ee+X*2,te+X),E.lineTo(ee+X*2,te+X*2),E.lineTo(ee+X,te+X*2),E.lineTo(ee+X,te+X),E.lineTo(ee,te+X),E.closePath(),E.fill(),E.beginPath(),E.moveTo(ee+X,te+X),E.lineTo(ee+X*2,te+X),E.lineTo(ee+X*2,te),E.lineTo(ee+X,te),E.closePath(),E.fill()},R=(E,B,U,V)=>{const X=V*3;for(let te=-X;te<U+X;te+=X)for(let ee=-X;ee<B+X;ee+=X){E.beginPath(),E.moveTo(ee,te+X/2),E.lineTo(ee+X/2,te),E.lineTo(ee+X,te+X/2),E.lineTo(ee+X/2,te+X),E.closePath(),E.fill(),E.strokeStyle=s,E.lineWidth=V/6;for(let ue=X/4;ue<X;ue+=X/2)E.beginPath(),E.moveTo(ee,te+ue),E.lineTo(ee+X,te+ue),E.stroke();for(let ue=X/4;ue<X;ue+=X/2)E.beginPath(),E.moveTo(ee+ue,te),E.lineTo(ee+ue,te+X),E.stroke();E.strokeStyle=n}},I=()=>{d(!0),setTimeout(()=>{const E=p.current;if(E){const B=E.toDataURL("image/png");r(B)}d(!1)},500)},D=()=>{const E=["#4f46e5","#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#6366f1","#14b8a6","#f43f5e"],B=E[Math.floor(Math.random()*E.length)];let U;do U=E[Math.floor(Math.random()*E.length)];while(U===B);i(B),a(U)};return j("div",{className:"pattern-generator",children:[S("h3",{className:"pattern-generator-title",children:"Pattern Generator"}),S("div",{className:"pattern-preview",children:S("canvas",{ref:p,width:256,height:256,className:"pattern-canvas"})}),j("div",{className:"pattern-controls",children:[j("div",{className:"pattern-type-selector",children:[S("label",{className:"control-label",children:"Pattern Type"}),S("div",{className:"pattern-type-buttons",children:g.map(E=>j("button",{className:`pattern-type-button ${e===E.id?"selected":""}`,onClick:()=>t(E.id),children:[E.icon,S("span",{children:E.name})]},E.id))})]}),j("div",{className:"pattern-color-controls",children:[j("div",{className:"color-control",children:[S("label",{className:"control-label",children:"Primary"}),S("input",{type:"color",value:n,onChange:E=>i(E.target.value),className:"color-input"})]}),j("div",{className:"color-control",children:[S("label",{className:"control-label",children:"Secondary"}),S("input",{type:"color",value:s,onChange:E=>a(E.target.value),className:"color-input"})]}),j("button",{className:"randomize-colors-button",onClick:D,children:[S(jw,{size:16}),S("span",{children:"Randomize Colors"})]})]}),j("div",{className:"pattern-size-control",children:[j("label",{className:"control-label",children:["Pattern Size: ",o,"px"]}),S("input",{type:"range",min:"5",max:"50",value:o,onChange:E=>l(Number.parseInt(E.target.value)),className:"size-slider"})]}),j("div",{className:"pattern-rotation-control",children:[j("label",{className:"control-label",children:["Rotation: ",c,""]}),S("input",{type:"range",min:"0",max:"360",value:c,onChange:E=>u(Number.parseInt(E.target.value)),className:"rotation-slider"})]}),S("button",{className:"apply-pattern-button",onClick:I,disabled:f,children:f?j(Br,{children:[S(jw,{className:"animate-spin",size:16}),S("span",{children:"Generating..."})]}):j(Br,{children:[S(Uw,{size:16}),S("span",{children:"Apply Pattern"})]})})]})]})},wIe=({onApplyMaterial:r,selectedPart:e})=>{const[t,n]=P.useState("cotton"),[i,s]=P.useState(.5),[a,o]=P.useState(0),[l,c]=P.useState(.2),[u,f]=P.useState(.1),[d,p]=P.useState(!1),g=[{id:"cotton",name:"Cotton",icon:S(Qx,{size:20})},{id:"silk",name:"Silk",icon:S(tse,{size:20})},{id:"leather",name:"Leather",icon:S(jre,{size:20})},{id:"denim",name:"Denim",icon:S(fV,{size:20})}],_=[{name:"Matte Cotton",settings:{type:"cotton",roughness:.8,metalness:0,reflectivity:.1,bumpScale:.05}},{name:"Glossy Silk",settings:{type:"silk",roughness:.2,metalness:.1,reflectivity:.6,bumpScale:.02}},{name:"Worn Leather",settings:{type:"leather",roughness:.7,metalness:.1,reflectivity:.3,bumpScale:.2}},{name:"Rough Denim",settings:{type:"denim",roughness:.9,metalness:0,reflectivity:.1,bumpScale:.3}},{name:"Metallic Finish",settings:{type:"silk",roughness:.3,metalness:.8,reflectivity:.7,bumpScale:.05}}],w=C=>{n(C.settings.type),s(C.settings.roughness),o(C.settings.metalness),c(C.settings.reflectivity),f(C.settings.bumpScale)},b=()=>{p(!0);const C={type:t,roughness:i,metalness:a,reflectivity:l,bumpScale:u};setTimeout(()=>{r(C),p(!1)},500)};return j("div",{className:"material-simulation",children:[j("h3",{className:"material-simulation-title",children:[S(ox,{size:16,className:"material-icon"}),"Material Simulation"]}),S("div",{className:"material-types",children:g.map(C=>j("button",{className:`material-type-button ${t===C.id?"selected":""}`,onClick:()=>n(C.id),children:[S("div",{className:"material-icon",children:C.icon}),S("span",{className:"material-name",children:C.name})]},C.id))}),j("div",{className:"material-properties",children:[j("div",{className:"material-property",children:[j("div",{className:"property-label",children:[S("span",{className:"property-name",children:"Roughness"}),S("span",{className:"property-value",children:i.toFixed(2)})]}),S("input",{type:"range",min:"0",max:"1",step:"0.01",value:i,onChange:C=>s(Number.parseFloat(C.target.value)),className:"property-slider"})]}),j("div",{className:"material-property",children:[j("div",{className:"property-label",children:[S("span",{className:"property-name",children:"Metalness"}),S("span",{className:"property-value",children:a.toFixed(2)})]}),S("input",{type:"range",min:"0",max:"1",step:"0.01",value:a,onChange:C=>o(Number.parseFloat(C.target.value)),className:"property-slider"})]}),j("div",{className:"material-property",children:[j("div",{className:"property-label",children:[S("span",{className:"property-name",children:"Reflectivity"}),S("span",{className:"property-value",children:l.toFixed(2)})]}),S("input",{type:"range",min:"0",max:"1",step:"0.01",value:l,onChange:C=>c(Number.parseFloat(C.target.value)),className:"property-slider"})]}),j("div",{className:"material-property",children:[j("div",{className:"property-label",children:[S("span",{className:"property-name",children:"Texture Depth"}),S("span",{className:"property-value",children:u.toFixed(2)})]}),S("input",{type:"range",min:"0",max:"0.5",step:"0.01",value:u,onChange:C=>f(Number.parseFloat(C.target.value)),className:"property-slider"})]})]}),S("button",{className:"apply-material-button",onClick:b,disabled:d,children:d?j(Br,{children:[S(ox,{className:"animate-spin",size:16}),S("span",{children:"Applying..."})]}):j(Br,{children:[S(ox,{size:16}),j("span",{children:["Apply to ",e]})]})}),j("div",{className:"material-presets",children:[S("h4",{className:"presets-title",children:"Material Presets"}),S("div",{className:"preset-buttons",children:_.map((C,M)=>S("button",{className:"preset-button",onClick:()=>w(C),children:C.name},M))})]})]})},_Ie=({onColorSelect:r})=>{const[e,t]=P.useState([]),[n,i]=P.useState("monochromatic"),[s,a]=P.useState("#4f46e5"),[o,l]=P.useState(!1),[c,u]=P.useState(null),[f,d]=P.useState([]),p=[{id:"monochromatic",name:"Monochromatic"},{id:"analogous",name:"Analogous"},{id:"complementary",name:"Complementary"},{id:"triadic",name:"Triadic"},{id:"tetradic",name:"Tetradic"}];P.useEffect(()=>{w()},[n,s]),P.useEffect(()=>{const A=localStorage.getItem("stylestudio-favorite-colors");if(A)try{d(JSON.parse(A))}catch(k){console.error("Error loading favorite colors",k)}},[]),P.useEffect(()=>{localStorage.setItem("stylestudio-favorite-colors",JSON.stringify(f))},[f]);const g=A=>{A=A.replace(/^#/,"");const k=Number.parseInt(A.substring(0,2),16)/255,O=Number.parseInt(A.substring(2,4),16)/255,R=Number.parseInt(A.substring(4,6),16)/255,I=Math.max(k,O,R),D=Math.min(k,O,R);let E=(I+D)/2,B,U;if(I===D)B=U=0;else{switch(U=E>.5?(I-D)/(2-I-D):(I-D)/(I+D),I){case k:B=(O-R)/(I-D)+(O<R?6:0);break;case O:B=(R-k)/(I-D)+2;break;case R:B=(k-O)/(I-D)+4;break}B/=6}return B=Math.round(B*360),U=Math.round(U*100),E=Math.round(E*100),{h:B,s:U,l:E}},_=(A,k,O)=>{A=A%360,k=Math.max(0,Math.min(100,k))/100,O=Math.max(0,Math.min(100,O))/100;const R=(1-Math.abs(2*O-1))*k,I=R*(1-Math.abs(A/60%2-1)),D=O-R/2;let E,B,U;A>=0&&A<60?[E,B,U]=[R,I,0]:A>=60&&A<120?[E,B,U]=[I,R,0]:A>=120&&A<180?[E,B,U]=[0,R,I]:A>=180&&A<240?[E,B,U]=[0,I,R]:A>=240&&A<300?[E,B,U]=[I,0,R]:[E,B,U]=[R,0,I];const V=X=>{const te=Math.round((X+D)*255).toString(16);return te.length===1?"0"+te:te};return`#${V(E)}${V(B)}${V(U)}`},w=()=>{l(!0);const{h:A,s:k,l:O}=g(s);let R=[];switch(n){case"monochromatic":R=[{name:"Lightest",color:_(A,k,Math.min(O+40,95))},{name:"Lighter",color:_(A,k,Math.min(O+20,85))},{name:"Base",color:s},{name:"Darker",color:_(A,k,Math.max(O-20,15))},{name:"Darkest",color:_(A,k,Math.max(O-40,5))}];break;case"analogous":R=[{name:"Adjacent -2",color:_((A-40+360)%360,k,O)},{name:"Adjacent -1",color:_((A-20+360)%360,k,O)},{name:"Base",color:s},{name:"Adjacent +1",color:_((A+20)%360,k,O)},{name:"Adjacent +2",color:_((A+40)%360,k,O)}];break;case"complementary":const I=(A+180)%360;R=[{name:"Base Lighter",color:_(A,k,Math.min(O+20,90))},{name:"Base",color:s},{name:"Base Darker",color:_(A,k,Math.max(O-20,10))},{name:"Complement Lighter",color:_(I,k,Math.min(O+20,90))},{name:"Complement",color:_(I,k,O)},{name:"Complement Darker",color:_(I,k,Math.max(O-20,10))}];break;case"triadic":R=[{name:"Base",color:s},{name:"Triad 1",color:_((A+120)%360,k,O)},{name:"Triad 2",color:_((A+240)%360,k,O)}];break;case"tetradic":R=[{name:"Base",color:s},{name:"Tetrad 1",color:_((A+90)%360,k,O)},{name:"Tetrad 2",color:_((A+180)%360,k,O)},{name:"Tetrad 3",color:_((A+270)%360,k,O)}];break;default:R=[{name:"Base",color:s}]}setTimeout(()=>{t(R),l(!1)},300)},b=A=>{navigator.clipboard.writeText(A),u(A),setTimeout(()=>{u(null)},2e3)},C=A=>{f.includes(A)?d(f.filter(k=>k!==A)):d([...f,A])};return j("div",{className:"color-palette-suggestions",children:[S("h3",{className:"palette-title",children:"Color Palette Suggestions"}),S("div",{className:"base-color-selector",children:j("div",{className:"color-input-group",children:[S("label",{className:"control-label",children:"Base Color"}),j("div",{className:"color-input-with-random",children:[S("input",{type:"color",value:s,onChange:A=>a(A.target.value),className:"base-color-input"}),S("button",{className:"randomize-color-button",onClick:()=>{const A="0123456789ABCDEF";let k="#";for(let O=0;O<6;O++)k+=A[Math.floor(Math.random()*16)];a(k)},title:"Randomize Color",children:S(jw,{size:16})})]})]})}),j("div",{className:"palette-type-selector",children:[S("label",{className:"control-label",children:"Palette Type"}),S("div",{className:"palette-type-buttons",children:p.map(A=>S("button",{className:`palette-type-button ${n===A.id?"selected":""}`,onClick:()=>i(A.id),children:A.name},A.id))})]}),S("div",{className:"palette-results",children:o?j("div",{className:"palette-loading",children:[S(jw,{className:"animate-spin",size:24}),S("span",{children:"Generating palette..."})]}):S("div",{className:"color-swatches",children:e.map((A,k)=>j("div",{className:"color-swatch-item",children:[S("div",{className:"color-swatch",style:{backgroundColor:A.color},onClick:()=>r(A.color),children:j("div",{className:"swatch-actions",children:[S("button",{className:"swatch-action-button favorite-button",onClick:O=>{O.stopPropagation(),C(A.color)},title:f.includes(A.color)?"Remove from favorites":"Add to favorites",children:S(S1,{size:16,fill:f.includes(A.color)?"#ef4444":"none",color:f.includes(A.color)?"#ef4444":"#ffffff"})}),S("button",{className:"swatch-action-button copy-button",onClick:O=>{O.stopPropagation(),b(A.color)},title:"Copy color code",children:c===A.color?S(GM,{size:16}):S(mL,{size:16})})]})}),j("div",{className:"color-swatch-info",children:[S("span",{className:"swatch-name",children:A.name}),S("span",{className:"swatch-hex",children:A.color})]})]},k))})}),f.length>0&&j("div",{className:"favorite-colors",children:[j("h4",{className:"favorites-title",children:[S(S1,{size:16,fill:"#ef4444",color:"#ef4444"}),S("span",{children:"Favorite Colors"})]}),S("div",{className:"favorite-swatches",children:f.map((A,k)=>S("div",{className:"favorite-swatch",style:{backgroundColor:A},onClick:()=>r(A),title:A},k))})]})]})},bIe=({currentDesign:r,onLoadTemplate:e,selectedModel:t})=>{const[n,i]=P.useState([]),[s,a]=P.useState(!0),[o,l]=P.useState(""),[c,u]=P.useState("");P.useEffect(()=>{f()},[]);const f=()=>{a(!0),setTimeout(()=>{try{const C=localStorage.getItem("stylestudio-templates");C&&i(JSON.parse(C))}catch(C){console.error("Error loading templates:",C)}a(!1)},500)},d=()=>{if(!o.trim()){u("Please enter a template name");return}if(n.some(A=>A.name===o)){u("A template with this name already exists");return}u("");const C={id:Date.now().toString(),name:o,model:t,design:r,createdAt:new Date().toISOString(),isFavorite:!1},M=[...n,C];i(M),localStorage.setItem("stylestudio-templates",JSON.stringify(M)),l("")},p=C=>{const M=n.filter(A=>A.id!==C);i(M),localStorage.setItem("stylestudio-templates",JSON.stringify(M))},g=C=>{const M=n.map(A=>A.id===C?{...A,isFavorite:!A.isFavorite}:A);i(M),localStorage.setItem("stylestudio-templates",JSON.stringify(M))},_=C=>new Date(C).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),w=C=>{switch(C){case"shirt":return"#4f46e5";case"trouser":return"#10b981";case"short":return"#f59e0b";case"frock":return"#ec4899";default:return"#6b7280"}},b=C=>{switch(C){case"shirt":return"Shirt";case"trouser":return"Trouser";case"short":return"Short";case"frock":return"Frock";default:return"Unknown"}};return j("div",{className:"design-templates",children:[S("h3",{className:"templates-title",children:"Design Templates"}),j("div",{className:"save-template-form",children:[j("div",{className:"template-input-group",children:[S("input",{type:"text",value:o,onChange:C=>l(C.target.value),placeholder:"Enter template name",className:"template-name-input"}),j("button",{className:"save-template-button",onClick:d,disabled:!o.trim(),children:[S(YM,{size:16}),S("span",{children:"Save Current Design"})]})]}),c&&S("p",{className:"template-error",children:c})]}),j("div",{className:"templates-list",children:[S("h4",{className:"templates-section-title",children:"Your Templates"}),s?j("div",{className:"templates-loading",children:[S(jw,{className:"animate-spin",size:24}),S("span",{children:"Loading templates..."})]}):n.length===0?j("div",{className:"no-templates",children:[S("p",{children:"You haven't saved any templates yet."}),S("p",{children:"Save your current design to create a template!"})]}):j(Br,{children:[n.some(C=>C.isFavorite)&&j("div",{className:"favorite-templates",children:[j("h5",{className:"templates-subsection-title",children:[S(Fm,{size:16,fill:"#f59e0b",color:"#f59e0b"}),S("span",{children:"Favorites"})]}),S("div",{className:"favorite-templates-grid",children:n.filter(C=>C.isFavorite).map(C=>j("div",{className:"template-card favorite",children:[S("div",{className:"template-thumbnail",style:{backgroundColor:w(C.model)},children:S("span",{className:"template-model-name",children:b(C.model)})}),j("div",{className:"template-info",children:[S("h5",{className:"template-name",children:C.name}),S("p",{className:"template-date",children:_(C.createdAt)})]}),j("div",{className:"template-actions",children:[S("button",{className:"template-action-button load-button",onClick:()=>e(C.design,C.model),title:"Load template",children:S(AO,{size:16})}),S("button",{className:"template-action-button favorite-button",onClick:()=>g(C.id),title:"Remove from favorites",children:S(IO,{size:16})}),S("button",{className:"template-action-button delete-button",onClick:()=>p(C.id),title:"Delete template",children:S(x1,{size:16})})]})]},C.id))})]}),j("div",{className:"all-templates",children:[S("h5",{className:"templates-subsection-title",children:"All Templates"}),S("div",{className:"templates-grid",children:n.map(C=>j("div",{className:"template-card",children:[S("div",{className:"template-thumbnail",style:{backgroundColor:w(C.model)},children:S("span",{className:"template-model-name",children:b(C.model)})}),j("div",{className:"template-info",children:[S("h5",{className:"template-name",children:C.name}),S("p",{className:"template-date",children:_(C.createdAt)})]}),j("div",{className:"template-actions",children:[S("button",{className:"template-action-button load-button",onClick:()=>e(C.design,C.model),title:"Load template",children:S(AO,{size:16})}),S("button",{className:"template-action-button favorite-button",onClick:()=>g(C.id),title:C.isFavorite?"Remove from favorites":"Add to favorites",children:C.isFavorite?S(IO,{size:16}):S(Fm,{size:16})}),S("button",{className:"template-action-button delete-button",onClick:()=>p(C.id),title:"Delete template",children:S(x1,{size:16})})]})]},C.id))})]})]})]})]})},SIe=({activeTab:r,setActiveTab:e,selectedModel:t,onModelChange:n,backgroundColor:i,setBackgroundColor:s,selectedPart:a,setSelectedPart:o,modelParts:l,colors:c,onColorChange:u,materials:f,onMaterialChange:d,showTextureEditor:p,toggleTextureEditor:g,textElements:_,logoElements:w,lighting:b,setLighting:C,onLoadTemplate:M})=>S("div",{className:"controls-card",children:S("div",{className:"controls-content",children:j(kQ,{activeTab:r,onTabChange:e,tabs:[{id:"model",label:"Model"},{id:"color",label:"Color"},{id:"texture",label:"Texture"},{id:"lighting",label:"Lighting"},{id:"patterns",label:"Patterns"},{id:"materials",label:"Materials"},{id:"palettes",label:"Palettes"},{id:"templates",label:"Templates"}],children:[j("div",{id:"model",children:[S(pIe,{selectedModel:t,onModelChange:n}),j("div",{className:"background-control",children:[S("label",{className:"background-label",children:"Background Color"}),S("input",{type:"color",value:i,onChange:A=>s(A.target.value),className:"background-color-input"})]})]}),j("div",{id:"color",children:[S(mz,{parts:l,selectedPart:a,onPartSelect:o}),S(mIe,{color:c[a]||"#ffffff",onChange:u})]}),j("div",{id:"texture",children:[S(mz,{parts:l,selectedPart:a,onPartSelect:o}),S("div",{className:"texture-editor-toggle",children:S("button",{className:"texture-editor-toggle-button",onClick:g,children:p?"Hide Texture Editor":"Show Texture Editor"})}),S(gIe,{label:`Upload Texture for ${a}`,accept:"image/*",onChange:d,preview:f[a]}),j("div",{className:"sample-materials",children:[S("h3",{children:"Sample Materials"}),S("div",{className:"material-grid",children:["Fabrics-Background-PNG-Image.png","Fabrics-PNG-Images-HD.png","Fabrics-PNG-Photo-Image.png","Fabrics-Transparent-Background.png"].map((A,k)=>S("div",{className:"material-sample",style:{backgroundImage:`url(/src/assets/images/StyleStudio/${A})`,backgroundSize:"cover",backgroundPosition:"center"},onClick:()=>d(`/src/assets/images/StyleStudio/${A}`)},k))})]})]}),S("div",{id:"lighting",children:S(vIe,{lighting:b,onChange:C})}),S("div",{id:"patterns",children:S(yIe,{onPatternGenerated:d})}),S("div",{id:"materials",children:S(wIe,{onApplyMaterial:d,selectedPart:a})}),S("div",{id:"palettes",children:S(_Ie,{onColorSelect:u})}),S("div",{id:"templates",children:S(bIe,{currentDesign:{colors:c,materials:f,textElements:_,logoElements:w,lighting:b,backgroundColor:i},onLoadTemplate:M,selectedModel:t})})]})})});function xIe({onRotate:r,onUndo:e,onRedo:t,onScreenshot:n,onScreenshotDownload:i,onSaveDesign:s,onLoadDesign:a,onToggleLayerManager:o,onShowUserGuide:l,canUndo:c,canRedo:u,showLayerManager:f}){const[d,p]=P.useState([]),[g,_]=P.useState(!1),[w,b]=P.useState(""),[C,M]=P.useState(!1),[A,k]=P.useState(null),[O,R]=P.useState(null),[I,D]=P.useState(!1),[E,B]=P.useState(null),[U,V]=P.useState(null),[X,te]=P.useState(!1);P.useEffect(()=>{ee()},[]);const ee=()=>{try{const Pe=localStorage.getItem("subscriptionData");if(Pe){const je=JSON.parse(Pe);V(je.planName||"Free")}else V("Free")}catch(Pe){console.error("Error checking subscription status:",Pe),V("Free")}},ue=U==="Silver Plan"||U==="Gold Plan",ne=()=>{te(!0),setTimeout(()=>te(!1),3e3)},oe=()=>{console.log("Rotate left button clicked"),r&&r("left")},q=()=>{console.log("Rotate right button clicked"),r&&r("right")};async function J(){if(!ue){ne();return}const Pe=JSON.parse(localStorage.getItem("currentUser"));if(!Pe||!Pe.uid){k("Please login to view your designs");return}M(!0),k(null);try{const je=await fetch("https://styloftbackendnew-production.up.railway.app/design/user",{method:"GET",headers:{"Content-Type":"application/json",userId:Pe.uid}});if(!je.ok)throw new Error(`Server error: ${je.statusText}`);const Ke=await je.json();console.log("Fetched designs:",Ke),p(Ke),_(!0)}catch(je){console.error("Error fetching designs:",je),k("Failed to load designs. Please try again later.")}finally{M(!1)}}async function ie(Pe){if(!ue){ne();return}const je=JSON.parse(localStorage.getItem("currentUser"));if(!je||!je.uid){alert("Please login to save your design");return}const Ke=O?w:Pe.model?`${Pe.model} design`:"My Design",Ie=w||prompt("Enter a name for your design:",Ke);if(Ie){M(!0),k(null);try{const Ge=await n(!0);if(!Ge)throw new Error("Failed to capture design preview");const _t=(await $3.uploadImage(Ge)).url;let _e,Ne,Ce;if(O?(Ne=`https://styloftbackendnew-production.up.railway.app/design/update/${O}`,Ce="PUT",console.log("Updating existing design:",O)):(Ne="https://styloftbackendnew-production.up.railway.app/design/save",Ce="POST",console.log("Creating new design")),_e=await fetch(Ne,{method:Ce,headers:{"Content-Type":"application/json",userId:je.uid},body:JSON.stringify({designData:Pe,designName:Ie,imageUrl:_t})}),!_e.ok)throw new Error(`Server error: ${_e.statusText}`);const He=await _e.json();He.result&&He.result.id&&R(He.result.id),console.log(`Design ${O?"updated":"saved"} successfully:`,He),b(Ie),alert(`Design ${O?"updated":"saved"} successfully!`)}catch(Ge){console.error(`Error ${O?"updating":"saving"} design:`,Ge),k(`Failed to ${O?"update":"save"} design. Please try again.`)}finally{M(!1)}}}const he=()=>{if(!ue){ne();return}const Pe=s();ie(Pe)},$=()=>{if(!ue){ne();return}J()},ge=Pe=>{if(console.log("Design selected:",Pe),!Pe||!Pe.designData){console.error("Invalid design data:",Pe);return}try{a(Pe.designData),R(Pe.id),b(Pe.designName||""),_(!1),console.log("Design loaded successfully, ID:",Pe.id)}catch(je){console.error("Error loading design:",je),k("Failed to load design. The format may be incompatible.")}};return j("div",{className:"canvas-toolbar",children:[X&&S("div",{className:"premium-feature-alert",children:"This feature requires a Silver Plan subscription. Please upgrade to access."}),j("div",{className:"toolbar-group",children:[S("button",{className:"toolbar-button",onClick:oe,title:"Rotate Left",children:S(cV,{size:16})}),S("button",{className:"toolbar-button",onClick:q,title:"Rotate Right",children:S(uV,{size:16})})]}),j("div",{className:"toolbar-group",children:[S("button",{className:`toolbar-button ${c?"":"disabled"}`,onClick:()=>{console.log("Undo button clicked"),c&&e&&e()},disabled:!c,title:"Undo",children:S(Xie,{size:16})}),S("button",{className:`toolbar-button ${u?"":"disabled"}`,onClick:()=>{console.log("Redo button clicked"),u&&t&&t()},disabled:!u,title:"Redo",children:S(pie,{size:16})})]}),j("div",{className:"toolbar-group",children:[S("button",{className:`toolbar-button ${f?"active":""}`,onClick:o,title:"Toggle Layer Manager",children:S(V0,{size:16})}),j("button",{className:`toolbar-button ${ue?"":"premium-locked"}`,onClick:()=>{if(!ue){ne();return}i()},title:ue?"Take Screenshot":"Premium Feature - Take Screenshot",children:[S(Bre,{size:16}),!ue&&S(fm,{size:10,className:"lock-icon"})]}),j("button",{className:`toolbar-button ${C?"loading":""} ${O?"has-update":""} ${ue?"":"premium-locked"}`,onClick:he,title:ue?O?"Update Design":"Save Design":"Premium Feature - Save Design",disabled:C||!ue,children:[S(YM,{size:16}),O&&S("span",{className:"update-indicator"}),!ue&&S(fm,{size:10,className:"lock-icon"})]}),j("button",{className:`new-design-button ${C?"loading":""} ${ue?"":"premium-locked"}`,title:ue?"Load Design":"Premium Feature - Load Design",onClick:$,disabled:C||!ue,children:[S(JM,{size:16}),"Your Designs",!ue&&S(fm,{size:10,className:"lock-icon"})]}),j("button",{className:`new-design-button ${I?"loading":""} ${ue?"":"premium-locked"}`,onClick:async()=>{if(!ue){ne();return}const Pe=JSON.parse(localStorage.getItem("currentUser"));if(!Pe||!Pe.uid){alert("Please login to publish your design");return}D(!0),B(null);try{let je;if(O){const Ge=d.find(ce=>ce.id===O);je=Ge==null?void 0:Ge.imageUrl}if(!je){const Ge=await n(!0);if(!Ge)throw new Error("Failed to capture design preview");je=(await $3.uploadImage(Ge)).url}const Ke=await fetch("https://styloftbackendnew-production.up.railway.app/design/publish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileUrl:je,userId:Pe.uid,description:w||"Style Studio design"})});if(!Ke.ok)throw new Error(`Server error: ${Ke.statusText}`);const Ie=await Ke.json();console.log("Design published successfully:",Ie),alert("Design published successfully to your portfolio!")}catch(je){console.error("Error publishing design:",je),B("Failed to publish design. Please try again."),alert("Failed to publish design. Please try again.")}finally{D(!1)}},title:ue?"Publish to Your Portfolio":"Premium Feature - Publish to Portfolio",disabled:I||!ue,children:[S(Eie,{size:16}),"Publish Design",!ue&&S(fm,{size:10,className:"lock-icon"})]}),S("button",{className:"toolbar-button",onClick:l,title:"Show User Guide",children:S(Nre,{size:16})})]}),O&&ue&&j("div",{className:"current-design-indicator",children:[S("span",{className:"design-name-label",children:"Editing:"}),S("span",{className:"design-name-value",children:w}),j("button",{className:"new-design-button",onClick:()=>{O&&!window.confirm("This will start a new design. Any unsaved changes to the current design will be lost. Continue?")||(R(null),b(""))},title:"Start New Design",children:[S(nD,{size:12}),S("span",{children:"New"})]})]}),g&&j("div",{className:"designs-list",children:[j("div",{className:"designs-list-header",children:[S("h3",{children:"Your Saved Designs"}),S("button",{className:"close-button",onClick:()=>_(!1),children:S(Oc,{size:16})})]}),C&&j("div",{className:"loading-container",children:[S("div",{className:"loading-spinner"}),S("div",{className:"loading-text",children:"Loading designs..."})]}),A&&S("div",{className:"error-message",children:A}),!C&&!A&&d.length>0?S("div",{className:"designs-items",children:d.map((Pe,je)=>j("div",{className:`design-item ${Pe.id===O?"current-design":""}`,onClick:()=>ge(Pe),children:[S("div",{className:"design-name",children:Pe.designName||`Design ${je+1}`}),j("div",{className:"design-date",children:[new Date(Pe.createdAt).toLocaleDateString()," ",new Date(Pe.createdAt).toLocaleTimeString()]}),Pe.id===O&&S("div",{className:"current-indicator",children:"Current"})]},Pe.id||je))}):!C&&!A&&j("div",{className:"no-designs",children:[S("div",{className:"no-designs-icon",children:""}),S("div",{className:"no-designs-text",children:"No saved designs found"})]})]})]})}const gz="/assets/Home-BG9mpHhw.png",CIe="/assets/Color-GDrwBasA.png",MIe="/assets/Body-image-BtLsmDnF.png",AIe="/assets/Publish-iiND2H1O.png",TIe="/assets/Layers-CVsbxivc.png",EIe="/assets/Lighting-BoZl4Am9.png",IIe="/assets/Logo-text-CvTrPLuz.png",LIe=({onClose:r,showOnStartup:e,setShowOnStartup:t})=>{const[n,i]=P.useState(0),[s,a]=P.useState(!e),o=[{title:"Welcome to Style Studio",content:"Your powerful 3D garment design tool that brings your fashion ideas to life. Let's take a quick tour to help you get started.",image:gz,icon:S(Qx,{size:24})},{title:"Choose Your Model",content:"Start by selecting the Model type you want to design. Choose from shirts, trousers, shorts, or frocks.",image:"/assets/images/StyleStudio/model-selection.png",icon:S(Qx,{size:24})},{title:"Customize Colors",content:"Select different parts of your garment and apply colors. You can use the color picker or choose from suggested color palettes.",image:CIe,icon:S(Uw,{size:24})},{title:"Apply Textures & Patterns",content:"Add textures and patterns to your design. Upload your own images or use our pattern generator to create unique looks.",image:MIe,icon:S(Bw,{size:24})},{title:"Add Text & Logos",content:"Personalize your design with text and logos. Use the texture editor to position and customize these elements.",image:IIe,icon:S(lV,{size:24})},{title:"Adjust Lighting",content:"Change the lighting to see how your design looks in different environments. Adjust intensity and direction for the perfect view.",image:EIe,icon:S(fV,{size:24})},{title:"Manage Layers",content:"Use the layer manager to organize and adjust the elements in your design. Reorder, hide, or lock layers as needed.",image:TIe,icon:S(V0,{size:24})},{title:"Save & Share",content:"Save your designs to your account and publish them to your portfolio. You can also download screenshots of your creations.",image:AIe,icon:S(YM,{size:24})},{title:"You're Ready to Design!",content:"Now you know the basics of Style Studio. Explore and experiment to create amazing designs. Happy creating!",image:gz,icon:S(cx,{size:24})}],l=()=>{n<o.length-1?i(n+1):u()},c=()=>{n>0&&i(n-1)},u=()=>{t&&t(!s),r&&r()};return P.useEffect(()=>{const f=d=>{d.key==="ArrowRight"||d.key==="ArrowDown"?l():d.key==="ArrowLeft"||d.key==="ArrowUp"?c():d.key==="Escape"&&u()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[n]),S("div",{className:"user-guide-overlay",children:j("div",{className:"user-guide-modal",children:[S("button",{className:"user-guide-close",onClick:u,children:S(Oc,{size:20})}),j("div",{className:"user-guide-content",children:[j("div",{className:"user-guide-header",children:[S("div",{className:"user-guide-icon",children:o[n].icon}),S("h2",{className:"user-guide-title",children:o[n].title})]}),j("div",{className:"user-guide-body",children:[S("div",{className:"user-guide-image",children:S("div",{className:"user-guide-placeholder",children:o[n].image?S("img",{src:o[n].image||"/placeholder.svg",alt:o[n].title,onError:f=>{f.target.onerror=null,f.target.src="/placeholder.svg?height=300&width=500"}}):S("div",{className:"user-guide-placeholder-icon",children:o[n].icon})})}),S("p",{className:"user-guide-description",children:o[n].content})]}),S("div",{className:"user-guide-progress",children:o.map((f,d)=>S("div",{className:`progress-dot ${d===n?"active":""}`,onClick:()=>i(d)},d))}),j("div",{className:"user-guide-footer",children:[j("div",{className:"user-guide-checkbox",children:[S("input",{type:"checkbox",id:"dont-show-again",checked:s,onChange:()=>a(!s)}),S("label",{htmlFor:"dont-show-again",children:"Don't show this guide again"})]}),j("div",{className:"user-guide-buttons",children:[n>0&&j("button",{className:"user-guide-button secondary",onClick:c,children:[S(pL,{size:16}),S("span",{children:"Previous"})]}),j("button",{className:"user-guide-button primary",onClick:l,children:[S("span",{children:n<o.length-1?"Next":"Get Started"}),n<o.length-1?S(HM,{size:16}):null]})]})]})]})]})})},NIe=({textElements:r,logoElements:e,materials:t,colors:n,selectedPart:i,onUpdateTextElement:s,onRemoveTextElement:a,onDuplicateTextElement:o,onUpdateLogoElement:l,onRemoveLogoElement:c,onDuplicateLogoElement:u,onSelectTextElement:f,onSelectLogoElement:d,selectedTextIndex:p,selectedLogoIndex:g,onReorderLayers:_,onToggleTextureEditor:w,canvasObjects:b=[],onMoveCanvasObjectForward:C,onMoveCanvasObjectBackward:M,onBringCanvasObjectToFront:A,onSendCanvasObjectToBack:k,onSelectCanvasObject:O,selectedCanvasObjectIndex:R})=>{const[I,D]=P.useState([]),[E,B]=P.useState(null),[U,V]=P.useState(null),[X,te]=P.useState(!1),[ee,ue]=P.useState({logos:!0,text:!0,textures:!0,colors:!1,canvasObjects:!0}),[ne,oe]=P.useState(null);P.useEffect(()=>{R!=null&&oe(R)},[R]),P.useEffect(()=>{const W=[];e.forEach((re,be)=>{W.push({id:`logo-${be}`,type:"logo",originalIndex:be,element:re,name:`Logo ${be+1}`,visible:re.visible!==!1,locked:re.locked||!1,zIndex:re.zIndex||100+be})}),r.forEach((re,be)=>{W.push({id:`text-${be}`,type:"text",originalIndex:be,element:re,name:re.text||`Text ${be+1}`,visible:re.visible!==!1,locked:re.locked||!1,zIndex:re.zIndex||200+be})}),Object.entries(t).forEach(([re,be],ve)=>{be&&W.push({id:`texture-${re}`,type:"texture",part:re,element:be,name:`${re.charAt(0).toUpperCase()+re.slice(1)} Texture`,visible:!0,locked:!1,zIndex:50+ve})}),Object.entries(n).forEach(([re,be],ve)=>{be&&W.push({id:`color-${re}`,type:"color",part:re,element:be,name:`${re.charAt(0).toUpperCase()+re.slice(1)} Color`,visible:!0,locked:!1,zIndex:ve})}),W.sort((re,be)=>be.zIndex-re.zIndex),D(W)},[r,e,t,n]),P.useEffect(()=>{if(p!==null){const W=I.findIndex(re=>re.type==="text"&&re.originalIndex===p);B(W)}else if(g!==null){const W=I.findIndex(re=>re.type==="logo"&&re.originalIndex===g);B(W)}},[p,g,I]);const q=W=>{const re=I[W];re.locked||(B(W),re.type==="text"?f(re.originalIndex):re.type==="logo"?d(re.originalIndex):re.type==="texture"||re.type)},J=W=>{oe(W),O&&O(W)},ie=W=>{const re=I[W],be=!re.visible;if(re.type==="text"){const ve={...re.element,visible:be};s(re.originalIndex,ve)}else if(re.type==="logo"){const ve={...re.element,visible:be};l(re.originalIndex,ve)}},he=W=>{const re=I[W],be=!re.locked;if(re.type==="text"){const ve={...re.element,locked:be};s(re.originalIndex,ve)}else if(re.type==="logo"){const ve={...re.element,locked:be};l(re.originalIndex,ve)}},$=W=>{const re=I[W];re.locked||(re.type==="text"?a(re.originalIndex):re.type==="logo"&&c(re.originalIndex))},ge=W=>{const re=I[W];re.type==="text"?o(re.originalIndex):re.type==="logo"&&u(re.originalIndex)},pe=W=>{const re=I[W];re.locked||(q(W),(re.type==="text"||re.type==="logo"||re.type==="texture")&&w())},we=(W,re)=>{if(!I[re].locked&&(V(re),te(!0),W.dataTransfer)){W.dataTransfer.effectAllowed="move";const be=document.createElement("div");be.className="layer-drag-image",be.textContent=I[re].name,document.body.appendChild(be),W.dataTransfer.setDragImage(be,0,0),setTimeout(()=>{document.body.removeChild(be)},0)}},ke=(W,re)=>{W.preventDefault(),!(U===null||U===re)&&W.currentTarget.classList.add("layer-drop-target")},Pe=W=>{W.currentTarget.classList.remove("layer-drop-target")},je=(W,re)=>{if(W.preventDefault(),W.currentTarget.classList.remove("layer-drop-target"),U===null||U===re)return;const be=I[U],ve=I[re];if(be.type!==ve.type)return;const Je=be.zIndex,$e=ve.zIndex,it=U>re,pt=.1;if(be.type==="text"){const Ft={...be.element,zIndex:$e,position:[be.element.position[0],be.element.position[1],it?be.element.position[2]+pt:be.element.position[2]-pt]},Le={...ve.element,zIndex:Je,position:[ve.element.position[0],ve.element.position[1],it?ve.element.position[2]-pt:ve.element.position[2]+pt]};s(be.originalIndex,Ft),s(ve.originalIndex,Le)}else if(be.type==="logo"){const Ft={...be.element,zIndex:$e,position:[be.element.position[0],be.element.position[1],it?be.element.position[2]+pt:be.element.position[2]-pt]},Le={...ve.element,zIndex:Je,position:[ve.element.position[0],ve.element.position[1],it?ve.element.position[2]-pt:ve.element.position[2]+pt]};l(be.originalIndex,Ft),l(ve.originalIndex,Le)}_&&_(be,ve),V(null),te(!1)},Ke=()=>{V(null),te(!1)},Ie=W=>{ue({...ee,[W]:!ee[W]})},Ge=I.filter(W=>W.type==="logo"),ce=I.filter(W=>W.type==="text"),_t=I.filter(W=>W.type==="texture"),_e=I.filter(W=>W.type==="color"),Ne=W=>{switch(W.type){case"logo":return S($0,{size:16});case"text":return S(lx,{size:16});case"texture":return S(Bw,{size:16});case"color":return S(Uw,{size:16});default:return S(V0,{size:16})}},Ce=W=>{const re=I[W],be=.2;if(re.type==="text"){const ve={...re.element,zIndex:(re.element.zIndex||0)+10,position:[re.element.position[0],re.element.position[1],(re.element.position[2]||0)+be]};s(re.originalIndex,ve)}else if(re.type==="logo"){const ve={...re.element,zIndex:(re.element.zIndex||0)+10,position:[re.element.position[0],re.element.position[1],(re.element.position[2]||0)+be]};l(re.originalIndex,ve)}_&&_(re,null)},He=W=>{const re=I[W],be=.2;if(re.type==="text"){const ve={...re.element,zIndex:(re.element.zIndex||0)-10,position:[re.element.position[0],re.element.position[1],(re.element.position[2]||0)-be]};s(re.originalIndex,ve)}else if(re.type==="logo"){const ve={...re.element,zIndex:(re.element.zIndex||0)-10,position:[re.element.position[0],re.element.position[1],(re.element.position[2]||0)-be]};l(re.originalIndex,ve)}_&&_(re,null)},Ee=W=>{const re=I[W],be=I.filter($e=>$e.type===re.type),ve=Math.max(...be.map($e=>{var it;return $e.element.zIndex!==void 0?$e.element.zIndex:((it=$e.element.position)==null?void 0:it[2])||0}))+20,Je=Math.max(...be.map($e=>{var it;return((it=$e.element.position)==null?void 0:it[2])||0}))+.5;if(re.type==="text"){const $e={...re.element,zIndex:ve,position:[re.element.position[0],re.element.position[1],Je]};s(re.originalIndex,$e)}else if(re.type==="logo"){const $e={...re.element,zIndex:ve,position:[re.element.position[0],re.element.position[1],Je]};l(re.originalIndex,$e)}_&&_(re,null)},Z=W=>{const re=I[W],be=I.filter(Le=>Le.type===re.type),{minZIndex:ve,minPosition:Je}=be.reduce((Le,at)=>{var et,Me;const vt=at.element.zIndex??((et=at.element.position)==null?void 0:et[2])??0,qe=((Me=at.element.position)==null?void 0:Me[2])??0;return{minZIndex:Math.min(Le.minZIndex,vt),minPosition:Math.min(Le.minPosition,qe)}},{minZIndex:1/0,minPosition:1/0}),$e=ve-20,it=Je-.5,pt={...re.element,zIndex:$e,position:[re.element.position[0],re.element.position[1],it]};(re.type==="text"?s:l)(re.originalIndex,pt),_==null||_(re,null)};return j("div",{className:"layer-manager",children:[S("div",{className:"layer-manager-header",children:j("h3",{className:"layer-manager-title",children:[S(V0,{size:16}),S("span",{children:"Layers"})]})}),j("div",{className:"layer-groups",children:[Ge.length>0&&j("div",{className:"layer-group",children:[j("div",{className:"layer-group-header",onClick:()=>Ie("logos"),children:[j("div",{className:"group-title",children:[S($0,{size:16}),S("span",{children:"Logos"}),S("span",{className:"group-count",children:Ge.length})]}),S("button",{className:"group-toggle",children:ee.logos?S(wc,{size:16}):S(yc,{size:16})})]}),ee.logos&&S("div",{className:"layer-list",children:Ge.map((W,re)=>{const be=E!==null&&I[E].id===W.id;return j("div",{className:`layer-item ${be?"selected":""} ${W.locked?"locked":""}`,onClick:()=>q(I.indexOf(W)),draggable:!W.locked,onDragStart:ve=>we(ve,I.indexOf(W)),onDragOver:ve=>ke(ve,I.indexOf(W)),onDragLeave:Pe,onDrop:ve=>je(ve,I.indexOf(W)),onDragEnd:Ke,children:[j("div",{className:"layer-info",children:[Ne(W),S("span",{className:"layer-name",children:W.name})]}),j("div",{className:"layer-actions",children:[S("button",{className:"layer-action visibility-toggle",onClick:ve=>{ve.stopPropagation(),ie(I.indexOf(W))},title:W.visible?"Hide":"Show",children:W.visible?S(Wy,{size:14}):S(p2,{size:14})}),S("button",{className:"layer-action lock-toggle",onClick:ve=>{ve.stopPropagation(),he(I.indexOf(W))},title:W.locked?"Unlock":"Lock",children:W.locked?S(fm,{size:14}):S(TO,{size:14})}),S("button",{className:"layer-action move-forward",onClick:ve=>{ve.stopPropagation(),Ce(I.indexOf(W))},title:"Bring Forward",disabled:W.locked||re===0,children:S(wc,{size:14})}),S("button",{className:"layer-action move-backward",onClick:ve=>{ve.stopPropagation(),He(I.indexOf(W))},title:"Send Backward",disabled:W.locked||re===(W.type==="logo"?Ge.length-1:ce.length-1),children:S(yc,{size:14})}),j("div",{className:"layer-action-dropdown",children:[S("button",{className:"layer-action more-actions",children:S("span",{className:"dots",children:""})}),j("div",{className:"layer-action-menu",children:[j("button",{onClick:ve=>{ve.stopPropagation(),pe(I.indexOf(W))},disabled:W.locked,children:[S(m2,{size:14}),S("span",{children:"Edit"})]}),j("button",{onClick:ve=>{ve.stopPropagation(),ge(I.indexOf(W))},children:[S(mL,{size:14}),S("span",{children:"Duplicate"})]}),j("button",{onClick:ve=>{ve.stopPropagation(),Ee(I.indexOf(W))},disabled:re===0,children:[S(wc,{size:14}),S("span",{children:"Bring to Front"})]}),j("button",{onClick:ve=>{ve.stopPropagation(),Z(I.indexOf(W))},disabled:re===(W.type==="logo"?Ge.length-1:ce.length-1),children:[S(yc,{size:14}),S("span",{children:"Send to Back"})]}),j("button",{className:"delete-action",onClick:ve=>{ve.stopPropagation(),$(I.indexOf(W))},disabled:W.locked,children:[S(x1,{size:14}),S("span",{children:"Delete"})]})]})]})]})]},W.id)})})]}),ce.length>0&&j("div",{className:"layer-group",children:[j("div",{className:"layer-group-header",onClick:()=>Ie("text"),children:[j("div",{className:"group-title",children:[S(lx,{size:16}),S("span",{children:"Text"}),S("span",{className:"group-count",children:ce.length})]}),S("button",{className:"group-toggle",children:ee.text?S(wc,{size:16}):S(yc,{size:16})})]}),ee.text&&S("div",{className:"layer-list",children:ce.map((W,re)=>{const be=E!==null&&I[E].id===W.id;return j("div",{className:`layer-item ${be?"selected":""} ${W.locked?"locked":""}`,onClick:()=>q(I.indexOf(W)),draggable:!W.locked,onDragStart:ve=>we(ve,I.indexOf(W)),onDragOver:ve=>ke(ve,I.indexOf(W)),onDragLeave:Pe,onDrop:ve=>je(ve,I.indexOf(W)),onDragEnd:Ke,children:[j("div",{className:"layer-info",children:[Ne(W),S("span",{className:"layer-name",children:W.name})]}),j("div",{className:"layer-actions",children:[S("button",{className:"layer-action visibility-toggle",onClick:ve=>{ve.stopPropagation(),ie(I.indexOf(W))},title:W.visible?"Hide":"Show",children:W.visible?S(Wy,{size:14}):S(p2,{size:14})}),S("button",{className:"layer-action lock-toggle",onClick:ve=>{ve.stopPropagation(),he(I.indexOf(W))},title:W.locked?"Unlock":"Lock",children:W.locked?S(fm,{size:14}):S(TO,{size:14})}),S("button",{className:"layer-action move-forward",onClick:ve=>{ve.stopPropagation(),Ce(I.indexOf(W))},title:"Bring Forward",disabled:W.locked||re===0,children:S(wc,{size:14})}),S("button",{className:"layer-action move-backward",onClick:ve=>{ve.stopPropagation(),He(I.indexOf(W))},title:"Send Backward",disabled:W.locked||re===(W.type==="logo"?Ge.length-1:ce.length-1),children:S(yc,{size:14})}),j("div",{className:"layer-action-dropdown",children:[S("button",{className:"layer-action more-actions",children:S("span",{className:"dots",children:""})}),j("div",{className:"layer-action-menu",children:[j("button",{onClick:ve=>{ve.stopPropagation(),pe(I.indexOf(W))},disabled:W.locked,children:[S(m2,{size:14}),S("span",{children:"Edit"})]}),j("button",{onClick:ve=>{ve.stopPropagation(),ge(I.indexOf(W))},children:[S(mL,{size:14}),S("span",{children:"Duplicate"})]}),j("button",{onClick:ve=>{ve.stopPropagation(),Ee(I.indexOf(W))},disabled:re===0,children:[S(wc,{size:14}),S("span",{children:"Bring to Front"})]}),j("button",{onClick:ve=>{ve.stopPropagation(),Z(I.indexOf(W))},disabled:re===(W.type==="logo"?Ge.length-1:ce.length-1),children:[S(yc,{size:14}),S("span",{children:"Send to Back"})]}),j("button",{className:"delete-action",onClick:ve=>{ve.stopPropagation(),$(I.indexOf(W))},disabled:W.locked,children:[S(x1,{size:14}),S("span",{children:"Delete"})]})]})]})]})]},W.id)})})]}),_t.length>0&&j("div",{className:"layer-group",children:[j("div",{className:"layer-group-header",onClick:()=>Ie("textures"),children:[j("div",{className:"group-title",children:[S(Bw,{size:16}),S("span",{children:"Textures"}),S("span",{className:"group-count",children:_t.length})]}),S("button",{className:"group-toggle",children:ee.textures?S(wc,{size:16}):S(yc,{size:16})})]}),ee.textures&&S("div",{className:"layer-list",children:_t.map((W,re)=>{const be=E!==null&&I[E].id===W.id;return j("div",{className:`layer-item ${be?"selected":""}`,onClick:()=>q(I.indexOf(W)),children:[j("div",{className:"layer-info",children:[Ne(W),S("span",{className:"layer-name",children:W.name})]}),j("div",{className:"layer-actions",children:[S("button",{className:"layer-action visibility-toggle",onClick:ve=>{ve.stopPropagation()},title:W.visible?"Hide":"Show",children:W.visible?S(Wy,{size:14}):S(p2,{size:14})}),S("button",{className:"layer-action edit-action",onClick:ve=>{ve.stopPropagation(),pe(I.indexOf(W))},title:"Edit",children:S(m2,{size:14})})]})]},W.id)})})]}),_e.length>0&&j("div",{className:"layer-group",children:[j("div",{className:"layer-group-header",onClick:()=>Ie("colors"),children:[j("div",{className:"group-title",children:[S(Uw,{size:16}),S("span",{children:"Colors"}),S("span",{className:"group-count",children:_e.length})]}),S("button",{className:"group-toggle",children:ee.colors?S(wc,{size:16}):S(yc,{size:16})})]}),ee.colors&&S("div",{className:"layer-list",children:_e.map((W,re)=>{const be=E!==null&&I[E].id===W.id;return j("div",{className:`layer-item ${be?"selected":""}`,onClick:()=>q(I.indexOf(W)),children:[j("div",{className:"layer-info",children:[S("div",{className:"color-swatch",style:{backgroundColor:W.element}}),S("span",{className:"layer-name",children:W.name})]}),S("div",{className:"layer-actions",children:S("button",{className:"layer-action visibility-toggle",onClick:ve=>{ve.stopPropagation()},title:W.visible?"Hide":"Show",children:W.visible?S(Wy,{size:14}):S(p2,{size:14})})})]},W.id)})})]}),b.length>0&&j("div",{className:"layer-group",children:[j("div",{className:"layer-group-header",onClick:()=>Ie("canvasObjects"),children:[j("div",{className:"group-title",children:[S(V0,{size:16}),S("span",{children:"Canvas Objects"}),S("span",{className:"group-count",children:b.length})]}),S("button",{className:"group-toggle",children:ee.canvasObjects?S(wc,{size:16}):S(yc,{size:16})})]}),ee.canvasObjects&&S("div",{className:"layer-list",children:b.map((W,re)=>j("div",{className:`layer-item ${ne===re?"selected":""}`,onClick:()=>J(re),children:[j("div",{className:"layer-info",children:[W.type==="text"?S(lx,{size:16}):W.type==="image"?S($0,{size:16}):S(V0,{size:16}),S("span",{className:"layer-name",children:W.name})]}),j("div",{className:"layer-actions",children:[S("button",{className:"layer-action move-forward",onClick:ve=>{ve.stopPropagation(),C&&C(re)},title:"Bring Forward",disabled:re===b.length-1,children:S(wc,{size:14})}),S("button",{className:"layer-action move-backward",onClick:ve=>{ve.stopPropagation(),M&&M(re)},title:"Send Backward",disabled:re===0,children:S(yc,{size:14})}),j("div",{className:"layer-action-dropdown",children:[S("button",{className:"layer-action more-actions",children:S("span",{className:"dots",children:""})}),j("div",{className:"layer-action-menu",children:[j("button",{onClick:ve=>{ve.stopPropagation(),w&&w()},children:[S(m2,{size:14}),S("span",{children:"Edit"})]}),j("button",{onClick:ve=>{ve.stopPropagation(),A&&A(re)},disabled:re===b.length-1,children:[S(wc,{size:14}),S("span",{children:"Bring to Front"})]}),j("button",{onClick:ve=>{ve.stopPropagation(),k&&k(re)},disabled:re===0,children:[S(yc,{size:14}),S("span",{children:"Send to Back"})]})]})]})]})]},`canvas-object-${re}`))})]})]}),S("div",{className:"layer-manager-footer",children:S("div",{className:"layer-count",children:j("span",{children:[I.length+b.length," Layers"]})})})]})},DIe={shirt:"/models/shirt_baked.glb",trouser:"/models/1861_trousers.glb",short:"/models/man_shorts.glb",frock:"/models/ladies_black_frock.glb"},qp={shirt:["body","collar","sleeves"],trouser:["main","pockets","waistband"],short:["main","pockets"],frock:["body","sleeves","collar"]},kIe={shirt:{scale:6.5,position:[0,.5,0]},trouser:{scale:4,position:[0,-2.5,0]},short:{scale:4.5,position:[0,-3.3,0]},frock:{scale:3,position:[0,-4.2,0]}},RIe={shirt:{body:{x:0,y:0,width:1,height:1},collar:{x:0,y:0,width:1,height:.2},sleeves:{x:0,y:0,width:1,height:.4}},trouser:{main:{x:0,y:0,width:1,height:1},pockets:{x:.2,y:.2,width:.6,height:.3},waistband:{x:0,y:0,width:1,height:.2}},short:{main:{x:0,y:0,width:1,height:1},pockets:{x:.2,y:.2,width:.6,height:.3}},frock:{body:{x:0,y:0,width:1,height:1},sleeves:{x:0,y:0,width:1,height:.4},collar:{x:0,y:0,width:1,height:.2}}},PIe={text:"",fontSize:24,color:"#000000",fontWeight:"normal",fontStyle:"normal",fontFamily:"Arial",textAlign:"center"},OIe={image:null,size:1,position:[0,0,.5],rotation:[0,0,0]},vz={intensity:.5,direction:[5,5,5],environment:"studio"};function FIe(){const r=P.useRef(null),[e,t]=P.useState("shirt"),[n,i]=P.useState(0),[s,a]=P.useState("body"),[o,l]=P.useState("model"),[c,u]=P.useState(!1),[f,d]=P.useState("#f5f5f5"),[p,g]=P.useState(!1),[_,w]=P.useState(!0),[b,C]=P.useState({main:"#ffffff"}),[M,A]=P.useState({}),[k,O]=P.useState({}),[R,I]=P.useState({}),[D,E]=P.useState(vz),[B,U]=P.useState([]),[V,X]=P.useState(null),[te,ee]=P.useState(PIe),[ue,ne]=P.useState([]),[oe,q]=P.useState(null),[J,ie]=P.useState(OIe),[he,$]=P.useState([{colors:{main:"#ffffff"},materials:{}}]),[ge,pe]=P.useState(0),[we,ke]=P.useState([]),[Pe,je]=P.useState(null),Ke=P.useMemo(()=>qp[e],[e]),[Ie,Ge]=P.useState(!1),ce=P.useRef(null);P.useEffect(()=>{const Xe=localStorage.getItem("styleStudio_hasSeenGuide");Xe===null?(g(!0),w(!0)):w(Xe!=="false")},[]),P.useEffect(()=>{localStorage.setItem("styleStudio_hasSeenGuide",_.toString())},[_]);const _t=P.useCallback(Xe=>{t(Xe),i(Fn=>Fn+1),a(qp[Xe][0]);const ot={},Dt={},nn={};qp[Xe].forEach(Fn=>{ot[Fn]="#ffffff",nn[Fn]=null}),C(ot),A(Dt),I(nn),Ce(ot,Dt)},[]),_e=P.useCallback(Xe=>{C(ot=>{const Dt={...ot,[s]:Xe};return Ce(Dt,M),Dt})},[s,M]),Ne=P.useCallback(Xe=>{A(ot=>{const Dt={...ot,[s]:Xe};return Ce(b,Dt),c&&ce.current&&ce.current.loadMaterialAsBackground(Xe),Dt})},[s,b,c,ce]),Ce=P.useCallback((Xe,ot)=>{$(Dt=>{const nn=Dt.slice(0,ge+1);return nn.push({colors:{...Xe},materials:{...ot}}),nn}),pe(Dt=>Dt+1)},[ge]),He=P.useCallback(()=>{if(ge>0){const Xe=ge-1,{colors:ot,materials:Dt}=he[Xe];C(ot),A(Dt),pe(Xe),i(nn=>nn+1),console.log("Undo performed, new history index:",Xe)}else console.log("Cannot undo: at beginning of history")},[ge,he]),Ee=P.useCallback(()=>{if(ge<he.length-1){const Xe=ge+1,{colors:ot,materials:Dt}=he[Xe];C(ot),A(Dt),pe(Xe),i(nn=>nn+1),console.log("Redo performed, new history index:",Xe)}else console.log("Cannot redo: at end of history")},[ge,he]),Z=P.useCallback(async(Xe=!1)=>r.current?new Promise(ot=>{requestAnimationFrame(()=>{const Dt=r.current;if(Xe)Dt.toBlob(nn=>{ot(nn)},"image/png");else{const nn=document.createElement("a");nn.download=`${e}-design.png`,nn.href=Dt.toDataURL("image/png"),nn.click(),ot()}})}):null,[e]),W=P.useCallback(()=>{r.current&&requestAnimationFrame(()=>{const Xe=r.current,ot=document.createElement("a");ot.download=`${e}-design.png`,ot.href=Xe.toDataURL("image/png"),ot.click()})},[e]),re=P.useCallback(()=>{let Xe={},ot={};if(ce.current)try{Xe=ce.current.getAllCanvasData(),ot=ce.current.getCanvasHistory()}catch(Yn){console.error("Error retrieving canvas data:",Yn)}const Dt=ue.map(Yn=>Yn.image&&typeof Yn.image=="string"&&Yn.image.includes("cloudinary.com")?{...Yn,isCloudinaryImage:!0}:Yn),nn={model:e,colors:b,materials:M,textElements:B,logoElements:Dt,lighting:D,backgroundColor:f,canvasData:Xe,canvasHistory:ot,layers:{textLayers:B.map((Yn,sr)=>({id:`text-${sr}`,zIndex:Yn.zIndex||200+sr,visible:Yn.visible!==!1,locked:Yn.locked||!1})),logoLayers:ue.map((Yn,sr)=>({id:`logo-${sr}`,zIndex:Yn.zIndex||100+sr,visible:Yn.visible!==!1,locked:Yn.locked||!1})),parts:Object.keys(b).map(Yn=>({id:Yn,visible:!0}))}},Fn=new Blob([JSON.stringify(nn)],{type:"application/json"}),Or=document.createElement("a");return Or.download=`${e}-design.json`,Or.href=URL.createObjectURL(Fn),Or.click(),setTimeout(()=>URL.revokeObjectURL(Or.href),100),nn},[e,b,M,B,ue,D,f,ce]),be=P.useCallback(Xe=>{try{if(!Xe){console.error("No design data provided");return}t(Xe.model||"shirt"),C(Xe.colors||{main:"#ffffff"}),A(Xe.materials||{}),U(Xe.textElements||[]),ne(Xe.logoElements||[]),E(Xe.lighting||vz),d(Xe.backgroundColor||"#f5f5f5"),$([{colors:Xe.colors||{main:"#ffffff"},materials:Xe.materials||{}}]),pe(0),i(ot=>ot+1),Xe.canvasData&&ce.current&&setTimeout(()=>{try{ce.current.loadCanvasData(Xe.canvasData),Xe.canvasHistory&&ce.current.restoreCanvasHistory(Xe.canvasHistory)}catch(ot){console.error("Error loading canvas data:",ot)}},500),Xe.layers&&(Xe.layers.textLayers&&Xe.textElements&&U(ot=>Xe.textElements.map((Dt,nn)=>{const Fn=Xe.layers.textLayers[nn];return Fn?{...Dt,zIndex:Fn.zIndex||Dt.zIndex||200+nn,visible:Fn.visible!==!1,locked:Fn.locked||!1}:Dt})),Xe.layers.logoLayers&&Xe.logoElements&&ne(ot=>Xe.logoElements.map((Dt,nn)=>{const Fn=Xe.layers.logoLayers[nn];return Fn?{...Dt,zIndex:Fn.zIndex||Dt.zIndex||100+nn,visible:Fn.visible!==!1,locked:Fn.locked||!1}:Dt}))),console.log("Design loaded successfully")}catch(ot){console.error("Failed to load design:",ot),alert("Failed to load design. The file might be corrupted or in an incompatible format.")}},[ce]),ve=P.useCallback(Xe=>{if(X(Xe),q(null),l("text"),Xe!==null){const ot=B[Xe];ee({text:ot.text,fontSize:ot.fontSize||24,color:ot.color||"#000000",fontWeight:ot.fontWeight||"normal",fontStyle:ot.fontStyle||"normal",fontFamily:ot.fontFamily||"Arial",textAlign:ot.textAlign||"center"})}},[B]);P.useCallback((Xe,ot)=>{U(Dt=>{const nn=[...Dt];return nn[Xe]=ot,nn})},[]),P.useCallback(()=>{if(te.text.trim()){const ot={...te,position:[0,0,.5]};U(Dt=>[...Dt,ot]),X(Dt=>Dt.length),u(!0)}},[te]);const Je=P.useCallback(Xe=>{U(ot=>{const Dt=[...ot];return Dt.splice(Xe,1),Dt}),X(ot=>ot===Xe?null:ot>Xe?ot-1:ot)},[]),$e=P.useCallback((Xe,ot)=>{ee(Dt=>({...Dt,[Xe]:ot})),V!==null&&U(Dt=>{const nn=[...Dt];return nn[V]={...nn[V],[Xe]:ot},nn})},[V]),it=P.useCallback(Xe=>{if(q(Xe),X(null),l("logo"),Xe!==null){const ot=ue[Xe];ie({image:ot.image,size:ot.size||1,position:ot.position||[0,0,.5],rotation:ot.rotation||[0,0,0]})}},[ue]),pt=P.useCallback((Xe,ot)=>{ne(Dt=>{const nn=[...Dt];return nn[Xe]=ot,nn})},[]),Ft=P.useCallback(Xe=>{const ot={...J,...Xe};ne(Dt=>[...Dt,ot]),q(Dt=>Dt.length),u(!0)},[J]),Le=P.useCallback(Xe=>{ne(ot=>{const Dt=[...ot];return Dt.splice(Xe,1),Dt}),q(ot=>ot===Xe?null:ot>Xe?ot-1:ot)},[]),at=P.useCallback((Xe,ot)=>{ie(Dt=>({...Dt,[Xe]:ot})),oe!==null&&ne(Dt=>{const nn=[...Dt];return nn[oe]={...nn[oe],[Xe]:ot},nn})},[oe]),vt=P.useCallback(Xe=>{oe!==null&&ne(ot=>{const Dt=[...ot];return Dt[oe]={...Dt[oe],position:Xe},Dt})},[oe]),qe=P.useCallback(Xe=>{oe!==null&&ne(ot=>{const Dt=[...ot];return Dt[oe]={...Dt[oe],rotation:Xe},Dt})},[oe]),et=P.useCallback(()=>{u(Xe=>!Xe),c||(!s&&qp[e].length>0&&a(qp[e][0]),l("texture"),ce.current&&M[s]&&setTimeout(()=>{ce.current.loadMaterialAsBackground(M[s])},100))},[c,s,qp,e,M,ce]),Me=P.useCallback((Xe,ot)=>{ot!==e&&(t(ot),i(Dt=>Dt+1)),Xe.colors&&C(Xe.colors),Xe.materials&&A(Xe.materials),Xe.textElements&&U(Xe.textElements),Xe.logoElements&&ne(Xe.logoElements),Xe.lighting&&E(Xe.lighting),Xe.backgroundColor&&d(Xe.backgroundColor),$([{colors:Xe.colors,materials:Xe.materials}]),pe(0)},[e]),tt=(Xe,ot)=>{ot===s&&ke(Xe)},Tt=Xe=>{je(Xe),ce.current&&ce.current.selectObject(Xe)},Ae=Xe=>{ce.current&&ce.current.moveObjectForward&&ce.current.moveObjectForward(Xe)},Oe=Xe=>{ce.current&&ce.current.moveObjectBackward&&ce.current.moveObjectBackward(Xe)},Ye=Xe=>{ce.current&&ce.current.bringObjectToFront&&ce.current.bringObjectToFront(Xe)},yt=Xe=>{ce.current&&ce.current.sendObjectToBack&&ce.current.sendObjectToBack(Xe)},Lt=P.useCallback((Xe,ot)=>{U(Dt=>{const nn=[...Dt];return nn[Xe]=ot,nn})},[]),xt=P.useCallback((Xe,ot)=>{ne(Dt=>{const nn=[...Dt];return nn[Xe]=ot,nn})},[]),Yt=P.useCallback((Xe,ot)=>{i(Dt=>Dt+1)},[]),on=P.useCallback(()=>{Ge(Xe=>!Xe)},[]),Zt=P.useCallback(()=>{g(Xe=>!Xe)},[]),qt=P.useCallback(()=>{if(r.current){const Xe=r.current.gl;Xe&&(Xe.setPixelRatio(window.devicePixelRatio||2),Xe.shadowMap.enabled=!0,Xe.shadowMap.type=u1,Xe.outputEncoding=void 0,Xe.toneMapping=UA,Xe.toneMappingExposure=1.2)}},[r]);return P.useEffect(()=>{qt();const Xe=()=>{qt()};return window.addEventListener("resize",Xe),()=>window.removeEventListener("resize",Xe)},[qt,n]),j("div",{className:"model-editor-container",children:[j("div",{className:`model-view-container ${c?"with-editor":""}`,children:[j("div",{className:"canvas-card",style:{backgroundColor:f},children:[S(xIe,{onRotate:Xe=>{console.log("Rotate called with direction:",Xe),r.current&&r.current.handleRotate?r.current.handleRotate(Xe):console.error("Rotation handler not available on canvas ref")},onUndo:He,onRedo:Ee,onScreenshot:Z,onScreenshotDownload:W,onSaveDesign:re,onLoadDesign:be,onToggleLayerManager:on,onShowUserGuide:Zt,canUndo:ge>0,canRedo:ge<he.length-1,showLayerManager:Ie}),S("div",{className:"canvas-content",children:S(TX,{ref:r,modelKey:n,selectedModel:e,modelPath:DIe[e],colors:b,materials:M,modelSettings:kIe,modelParts:qp,selectedPart:s,setSelectedPart:a,textElements:B,selectedTextIndex:V,onTextSelect:ve,logoElements:ue,selectedLogoIndex:oe,onLogoSelect:it,textures:k,lighting:D})}),s&&j("div",{className:"part-indicator",children:["Selected part: ",S("span",{className:"part-name",children:s})]}),Ie&&S("div",{className:"layer-manager-overlay",children:S(NIe,{textElements:B,logoElements:ue,materials:M,colors:b,selectedPart:s,onUpdateTextElement:Lt,onRemoveTextElement:Je,onDuplicateTextElement:Xe=>{const ot=B[Xe];U(Dt=>[...Dt,{...ot,position:[ot.position[0],ot.position[1]+.1,ot.position[2]+.1],zIndex:(ot.zIndex||0)+1}])},onUpdateLogoElement:xt,onRemoveLogoElement:Le,onDuplicateLogoElement:Xe=>{const ot=ue[Xe];ne(Dt=>[...Dt,{...ot,position:[ot.position[0],ot.position[1]+.1,ot.position[2]+.1],zIndex:(ot.zIndex||0)+1}])},onSelectTextElement:ve,onSelectLogoElement:it,selectedTextIndex:V,selectedLogoIndex:oe,onReorderLayers:Yt,onToggleTextureEditor:et,canvasObjects:we,onMoveCanvasObjectForward:Ae,onMoveCanvasObjectBackward:Oe,onBringCanvasObjectToFront:Ye,onSendCanvasObjectToBack:yt,onSelectCanvasObject:Tt,selectedCanvasObjectIndex:Pe})})]}),c&&S(hIe,{ref:ce,selectedModel:e,selectedPart:s,uvMappings:RIe,textElements:B,textSettings:te,onTextSettingsChange:$e,canvasTextures:R,setCanvasTextures:I,setTextures:O,logoElements:ue,logoSettings:J,onLogoSettingsChange:at,onClose:et,onCanvasObjectsChange:tt})]}),S(SIe,{activeTab:o,setActiveTab:l,selectedModel:e,onModelChange:_t,backgroundColor:f,setBackgroundColor:d,selectedPart:s,setSelectedPart:a,modelParts:Ke,colors:b,onColorChange:_e,materials:M,onMaterialChange:Ne,showTextureEditor:c,toggleTextureEditor:et,textElements:B,selectedTextIndex:V,onTextSelect:ve,onRemoveText:Je,logoElements:ue,selectedLogoIndex:oe,onLogoSelect:it,onAddLogo:Ft,onRemoveLogo:Le,onUpdateLogo:pt,onUpdateLogoPosition:vt,onUpdateLogoRotation:qe,lighting:D,setLighting:E,onLoadTemplate:Me,onShowUserGuide:Zt}),p&&S(LIe,{onClose:()=>g(!1),showOnStartup:_,setShowOnStartup:w})]})}function BIe(){return S("div",{children:S(FIe,{})})}const UIe=({children:r})=>S("div",{className:"contest-card",children:r}),jIe=({children:r})=>S("div",{className:"contest-card-content",children:r}),zIe=({children:r,className:e,onClick:t})=>j("button",{className:`contest-button ${e}`,onClick:t,children:[S("span",{children:r}),S(yre,{className:"button-icon",size:16})]}),VIe=({contests:r})=>{Yc();const[e,t]=P.useState({}),[n,i]=P.useState({});return P.useEffect(()=>{(async()=>{try{const c=(await(await fetch("https://styloftbackendnew-production.up.railway.app/submission/count-by-contest")).json()).reduce((u,f)=>(u[f.contestId]=f.count,u),{});t(c)}catch(o){console.error("Error fetching submission counts:",o)}})(),(async()=>{try{const c=(await(await fetch("https://styloftbackendnew-production.up.railway.app/submission/designers-by-contest")).json()).reduce((u,f)=>(u[f.contestId]=f.count,u),{});i(c)}catch(o){console.error("Error fetching designer counts:",o)}})()},[]),!r||r.length===0?j("div",{className:"no-contests",children:[S("div",{className:"no-contests-icon",children:""}),S("p",{children:"No contests available at the moment."}),S("p",{className:"no-contests-sub",children:"Check back soon or create your own!"})]}):S("div",{className:"contest-cards-grid",children:r.map(s=>j(UIe,{children:[j("div",{className:"contest-card-image-container",children:[S("img",{src:s.image||"/placeholder.svg",alt:"Contest Banner",className:"contest-card-image"}),j("div",{className:"contest-card-badge",children:["$",s.prize]})]}),j(jIe,{children:[S("h3",{className:"contest-card-title",children:s.title||"Design Contest"}),S("p",{className:"contest-card-description",children:s.description}),j("div",{className:"contest-card-info",children:[j("div",{className:"contest-card-stat",children:[S(Zie,{size:16,className:"contest-card-icon"}),j("span",{children:[n[s.id]||0," Designers"]})]}),j("div",{className:"contest-card-stat",children:[S(Fm,{size:16,className:"contest-card-icon"}),j("span",{children:[e[s.id]||0," Designs"]})]}),j("div",{className:"contest-card-stat",children:[S(C1,{size:16,className:"contest-card-icon trophy-icon"}),j("span",{children:["$",s.prize]})]})]}),S(zIe,{className:"contest-card-button",onClick:()=>window.open(`/contest/${s.id}`,"_blank","noopener,noreferrer"),children:"Enter Contest"})]})]},s.id))})},GIe=({children:r,className:e,onClick:t,icon:n})=>j("button",{className:`contest-button ${e}`,onClick:t,children:[n&&S(n,{className:"button-icon",size:18}),S("span",{children:r})]}),HIe=()=>{const[r,e]=P.useState([]),[t,n]=P.useState(!1),[i,s]=P.useState(""),[a,o]=P.useState(!0),[l,c]=P.useState("Free"),[u,f]=P.useState(!1),d=P.useRef(null),p=P.useRef(null);P.useEffect(()=>{g()},[]);const g=()=>{try{const k=localStorage.getItem("subscriptionData");if(k){const O=JSON.parse(k);c(O.planName||"Free")}else c("Free")}catch(k){console.error("Error checking subscription status:",k),c("Free")}},_=l==="Gold Plan",w=()=>{f(!0),setTimeout(()=>f(!1),3e3)},b=k=>{_||(k.preventDefault(),w())},C=async(k="")=>{o(!0);try{const O=k?`https://styloftbackendnew-production.up.railway.app/contest/search?query=${k}`:"https://styloftbackendnew-production.up.railway.app/contest",R=await fetch(O);if(!R.ok)throw new Error("Failed to fetch contests");const I=await R.json();e(I)}catch(O){console.error("Error fetching contests:",O)}finally{o(!1)}};P.useEffect(()=>{C()},[]),P.useEffect(()=>{const k=()=>{d.current&&(d.current.getBoundingClientRect().top<=0?n(!0):n(!1))};return window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)},[]);const M=k=>{const O=k.target.value;s(O),C(O)},A=()=>{p.current&&p.current.focus()};return j("div",{className:"contest-page",children:[u&&S("div",{className:"premium-feature-alert",children:"Creating contests requires a Gold Plan subscription. Please upgrade to access."}),S("div",{className:`contest-banner-container ${t?"fixed":""}`,children:j("header",{className:"contest-banner",children:[j("div",{className:"contest-banner-content",children:[S("h1",{className:"contest-banner-title",children:"DESIGN CONTEST"}),S("p",{className:"contest-banner-subtitle",children:"Unleash your creativity, design your legacy!"}),!localStorage.getItem("authToken")&&S(GIe,{className:"contest-signup-button",onClick:()=>window.location.href="/register",children:"SIGN UP"})]}),S("div",{className:"contest-banner-decoration",children:S(ow,{size:120,className:"contest-banner-icon"})})]})}),j("div",{className:"contest-controls",children:[j("div",{className:"contest-search-container",onClick:A,children:[S(rD,{className:"contest-search-icon"}),S("input",{ref:p,type:"text",placeholder:"Search for contests...",className:"contest-search-input",value:i,onChange:M}),i&&S("button",{className:"contest-search-clear",onClick:()=>{s(""),C("")},children:""})]}),j(Gl,{to:_?"/contest/add-contest":"#",className:`contest-add-button ${_?"":"premium-locked"}`,onClick:b,children:[S(nD,{size:18}),S("span",{children:"Create Contest"}),!_&&S(fm,{size:12,className:"lock-icon"})]})]}),S("div",{className:"contest-content",ref:d,children:a?j("div",{className:"contest-loading",children:[S(iie,{className:"contest-loading-icon"}),S("p",{children:"Loading contests..."})]}):S(VIe,{contests:r})})]})},RQ=6048e5,WIe=864e5,yz=Symbol.for("constructDateFrom");function jh(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&yz in r?r[yz](e):r instanceof Date?new r.constructor(e):new Date(e)}function Zc(r,e){return jh(e||r,r)}let YIe={};function RT(){return YIe}function C_(r,e){var o,l,c,u;const t=RT(),n=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Zc(r,e==null?void 0:e.in),s=i.getDay(),a=(s<n?7:0)+s-n;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function AM(r,e){return C_(r,{...e,weekStartsOn:1})}function PQ(r,e){const t=Zc(r,e==null?void 0:e.in),n=t.getFullYear(),i=jh(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const s=AM(i),a=jh(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=AM(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function wz(r){const e=Zc(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function JIe(r,...e){const t=jh.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function _z(r,e){const t=Zc(r,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function XIe(r,e,t){const[n,i]=JIe(t==null?void 0:t.in,r,e),s=_z(n),a=_z(i),o=+s-wz(s),l=+a-wz(a);return Math.round((o-l)/WIe)}function QIe(r,e){const t=PQ(r,e),n=jh(r,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),AM(n)}function KIe(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function qIe(r){return!(!KIe(r)&&typeof r!="number"||isNaN(+Zc(r)))}function ZIe(r,e){const t=Zc(r,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const $Ie={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},eLe=(r,e,t)=>{let n;const i=$Ie[r];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function kI(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const tLe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nLe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rLe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},iLe={date:kI({formats:tLe,defaultWidth:"full"}),time:kI({formats:nLe,defaultWidth:"full"}),dateTime:kI({formats:rLe,defaultWidth:"full"})},sLe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},aLe=(r,e,t,n)=>sLe[r];function jy(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let i;if(n==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,o=t!=null&&t.width?String(t.width):a;i=r.formattingValues[o]||r.formattingValues[a]}else{const a=r.defaultWidth,o=t!=null&&t.width?String(t.width):r.defaultWidth;i=r.values[o]||r.values[a]}const s=r.argumentCallback?r.argumentCallback(e):e;return i[s]}}const oLe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lLe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cLe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},uLe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fLe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},dLe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},hLe=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},pLe={ordinalNumber:hLe,era:jy({values:oLe,defaultWidth:"wide"}),quarter:jy({values:lLe,defaultWidth:"wide",argumentCallback:r=>r-1}),month:jy({values:cLe,defaultWidth:"wide"}),day:jy({values:uLe,defaultWidth:"wide"}),dayPeriod:jy({values:fLe,defaultWidth:"wide",formattingValues:dLe,defaultFormattingWidth:"wide"})};function zy(r){return(e,t={})=>{const n=t.width,i=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],l=Array.isArray(o)?gLe(o,f=>f.test(a)):mLe(o,f=>f.test(a));let c;c=r.valueCallback?r.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function mLe(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function gLe(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function vLe(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const i=n[0],s=e.match(r.parsePattern);if(!s)return null;let a=r.valueCallback?r.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(i.length);return{value:a,rest:o}}}const yLe=/^(\d+)(th|st|nd|rd)?/i,wLe=/\d+/i,_Le={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bLe={any:[/^b/i,/^(a|c)/i]},SLe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xLe={any:[/1/i,/2/i,/3/i,/4/i]},CLe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},MLe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ALe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},TLe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ELe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ILe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},LLe={ordinalNumber:vLe({matchPattern:yLe,parsePattern:wLe,valueCallback:r=>parseInt(r,10)}),era:zy({matchPatterns:_Le,defaultMatchWidth:"wide",parsePatterns:bLe,defaultParseWidth:"any"}),quarter:zy({matchPatterns:SLe,defaultMatchWidth:"wide",parsePatterns:xLe,defaultParseWidth:"any",valueCallback:r=>r+1}),month:zy({matchPatterns:CLe,defaultMatchWidth:"wide",parsePatterns:MLe,defaultParseWidth:"any"}),day:zy({matchPatterns:ALe,defaultMatchWidth:"wide",parsePatterns:TLe,defaultParseWidth:"any"}),dayPeriod:zy({matchPatterns:ELe,defaultMatchWidth:"any",parsePatterns:ILe,defaultParseWidth:"any"})},NLe={code:"en-US",formatDistance:eLe,formatLong:iLe,formatRelative:aLe,localize:pLe,match:LLe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function DLe(r,e){const t=Zc(r,e==null?void 0:e.in);return XIe(t,ZIe(t))+1}function kLe(r,e){const t=Zc(r,e==null?void 0:e.in),n=+AM(t)-+QIe(t);return Math.round(n/RQ)+1}function OQ(r,e){var u,f,d,p;const t=Zc(r,e==null?void 0:e.in),n=t.getFullYear(),i=RT(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(d=i.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??1,a=jh((e==null?void 0:e.in)||r,0);a.setFullYear(n+1,0,s),a.setHours(0,0,0,0);const o=C_(a,e),l=jh((e==null?void 0:e.in)||r,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const c=C_(l,e);return+t>=+o?n+1:+t>=+c?n:n-1}function RLe(r,e){var o,l,c,u;const t=RT(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=OQ(r,e),s=jh((e==null?void 0:e.in)||r,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),C_(s,e)}function PLe(r,e){const t=Zc(r,e==null?void 0:e.in),n=+C_(t,e)-+RLe(t,e);return Math.round(n/RQ)+1}function Xr(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const th={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return Xr(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):Xr(t+1,2)},d(r,e){return Xr(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return Xr(r.getHours()%12||12,e.length)},H(r,e){return Xr(r.getHours(),e.length)},m(r,e){return Xr(r.getMinutes(),e.length)},s(r,e){return Xr(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),i=Math.trunc(n*Math.pow(10,t-3));return Xr(i,e.length)}},C0={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},bz={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),i=n>0?n:1-n;return t.ordinalNumber(i,{unit:"year"})}return th.y(r,e)},Y:function(r,e,t,n){const i=OQ(r,n),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return Xr(a,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):Xr(s,e.length)},R:function(r,e){const t=PQ(r);return Xr(t,e.length)},u:function(r,e){const t=r.getFullYear();return Xr(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Xr(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Xr(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return th.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return Xr(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const i=PLe(r,n);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Xr(i,e.length)},I:function(r,e,t){const n=kLe(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):Xr(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):th.d(r,e)},D:function(r,e,t){const n=DLe(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):Xr(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const i=r.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Xr(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const i=r.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Xr(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Xr(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const i=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let i;switch(n===12?i=C0.noon:n===0?i=C0.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let i;switch(n>=17?i=C0.evening:n>=12?i=C0.afternoon:n>=4?i=C0.morning:i=C0.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return th.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):th.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):Xr(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):Xr(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):th.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):th.s(r,e)},S:function(r,e){return th.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return xz(n);case"XXXX":case"XX":return im(n);case"XXXXX":case"XXX":default:return im(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return xz(n);case"xxxx":case"xx":return im(n);case"xxxxx":case"xxx":default:return im(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Sz(n,":");case"OOOO":default:return"GMT"+im(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Sz(n,":");case"zzzz":default:return"GMT"+im(n,":")}},t:function(r,e,t){const n=Math.trunc(+r/1e3);return Xr(n,e.length)},T:function(r,e,t){return Xr(+r,e.length)}};function Sz(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),i=Math.trunc(n/60),s=n%60;return s===0?t+String(i):t+String(i)+e+Xr(s,2)}function xz(r,e){return r%60===0?(r>0?"-":"+")+Xr(Math.abs(r)/60,2):im(r,e)}function im(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),i=Xr(Math.trunc(n/60),2),s=Xr(n%60,2);return t+i+e+s}const Cz=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},FQ=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},OLe=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],i=t[2];if(!i)return Cz(r,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Cz(n,e)).replace("{{time}}",FQ(i,e))},FLe={p:FQ,P:OLe},BLe=/^D+$/,ULe=/^Y+$/,jLe=["D","DD","YY","YYYY"];function zLe(r){return BLe.test(r)}function VLe(r){return ULe.test(r)}function GLe(r,e,t){const n=HLe(r,e,t);if(console.warn(n),jLe.includes(r))throw new RangeError(n)}function HLe(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const WLe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,YLe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,JLe=/^'([^]*?)'?$/,XLe=/''/g,QLe=/[a-zA-Z]/;function RI(r,e,t){var u,f,d,p;const n=RT(),i=n.locale??NLe,s=n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,a=n.weekStartsOn??((p=(d=n.locale)==null?void 0:d.options)==null?void 0:p.weekStartsOn)??0,o=Zc(r,t==null?void 0:t.in);if(!qIe(o))throw new RangeError("Invalid time value");let l=e.match(YLe).map(g=>{const _=g[0];if(_==="p"||_==="P"){const w=FLe[_];return w(g,i.formatLong)}return g}).join("").match(WLe).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const _=g[0];if(_==="'")return{isToken:!1,value:KLe(g)};if(bz[_])return{isToken:!0,value:g};if(_.match(QLe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:g}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const c={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(g=>{if(!g.isToken)return g.value;const _=g.value;(VLe(_)||zLe(_))&&GLe(_,e,String(r));const w=bz[_[0]];return w(o,_,i.localize,c)}).join("")}function KLe(r){const e=r.match(JLe);return e?e[1].replace(XLe,"'"):r}function qLe(){const[r,e]=P.useState({title:"",description:"",prize:"",deadline:"",image:""}),[t,n]=P.useState(null),[i,s]=P.useState(!1),[a,o]=P.useState(""),[l,c]=P.useState(null),[u,f]=P.useState(!1),[d,p]=P.useState(!1),g=P.useRef(null),_=P.useRef(null),w=D=>{const{name:E,value:B}=D.target;e(U=>({...U,[E]:B}))},b=D=>{c(D),e(E=>({...E,deadline:RI(D,"yyyy-MM-dd")})),p(!1)},C=D=>{D.preventDefault(),D.stopPropagation(),D.type==="dragenter"||D.type==="dragover"?f(!0):D.type==="dragleave"&&f(!1)},M=D=>{D.preventDefault(),D.stopPropagation(),f(!1),D.dataTransfer.files&&D.dataTransfer.files[0]&&k(D.dataTransfer.files[0])},A=D=>{D.target.files&&D.target.files[0]&&k(D.target.files[0])},k=async D=>{if(!D)return;if(!["image/jpeg","image/png","image/jpg"].includes(D.type)){o("Invalid file type. Please upload a JPG or PNG image."),O("Invalid file type","Please upload a JPG or PNG image.","error");return}n(URL.createObjectURL(D)),s(!0);const B=new FormData;B.append("file",D),B.append("upload_preset","Styloft");try{const V=await(await fetch("https://api.cloudinary.com/v1_1/ds0xdh85j/image/upload",{method:"POST",body:B})).json();V.secure_url?(e(X=>({...X,image:V.secure_url})),o(""),O("Image uploaded successfully","Your image has been uploaded to the cloud.","success")):(o("Image upload failed. Try again."),O("Upload failed","Image upload failed. Please try again.","error"))}catch{o("Error uploading image. Check your network."),O("Upload error","Error uploading image. Check your network connection.","error")}finally{s(!1)}},O=(D,E,B="success")=>{const U=document.createElement("div");U.className=`toast toast-${B}`,U.innerHTML=`
      <div class="toast-header">${D}</div>
      <div class="toast-body">${E}</div>
    `,document.body.appendChild(U),setTimeout(()=>{U.classList.add("show"),setTimeout(()=>{U.classList.remove("show"),setTimeout(()=>{document.body.removeChild(U)},300)},3e3)},100)},R=async D=>{D.preventDefault();const E=JSON.parse(localStorage.getItem("currentUser"));if(!E||!E.uid){O("Authentication error","You must be logged in to create a contest.","error");return}if(!r.image){o("Please upload an image before submitting."),O("Image required","Please upload an image before submitting.","error");return}const B={...r,createdBy:E.uid};try{const V=await(await fetch("https://styloftbackendnew-production.up.railway.app/contest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)})).json();O("Contest created!","Your contest has been successfully created.","success"),e({title:"",description:"",prize:"",deadline:"",image:""}),n(null),c(null)}catch{O("Submission error","There was an error creating your contest. Please try again.","error")}},I=()=>{if(!d)return null;const D=new Date,E=l?l.getMonth():D.getMonth(),B=l?l.getFullYear():D.getFullYear(),U=new Date(B,E+1,0).getDate(),V=new Date(B,E,1).getDay(),X=[];for(let te=0;te<V;te++)X.push(S("div",{className:"calendar-day empty"},`empty-${te}`));for(let te=1;te<=U;te++){const ee=new Date(B,E,te),ue=ee<D,ne=l&&l.getDate()===te&&l.getMonth()===E&&l.getFullYear()===B;X.push(S("div",{className:`calendar-day ${ue?"disabled":""} ${ne?"selected":""}`,onClick:()=>!ue&&b(ee),children:te},`day-${te}`))}return j("div",{className:"calendar-popup",ref:_,children:[j("div",{className:"calendar-header",children:[S("button",{className:"calendar-nav-btn",onClick:()=>{const te=new Date(B,E-1,1);c(ee=>ee?new Date(ee.getFullYear(),ee.getMonth()-1,ee.getDate()):te)},children:"<"}),S("div",{className:"calendar-title",children:new Date(B,E).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),S("button",{className:"calendar-nav-btn",onClick:()=>{const te=new Date(B,E+1,1);c(ee=>ee?new Date(ee.getFullYear(),ee.getMonth()+1,ee.getDate()):te)},children:">"})]}),j("div",{className:"calendar-days-header",children:[S("div",{children:"Su"}),S("div",{children:"Mo"}),S("div",{children:"Tu"}),S("div",{children:"We"}),S("div",{children:"Th"}),S("div",{children:"Fr"}),S("div",{children:"Sa"})]}),S("div",{className:"calendar-days-grid",children:X})]})};return S("div",{className:"container",children:j("div",{className:"contest-grid",children:[S("div",{className:"form-section",children:j("div",{className:"card",children:[S("div",{className:"card-header",children:S("h2",{className:"card-title",children:"Create New Contest"})}),S("div",{className:"card-content",children:j("form",{onSubmit:R,className:"contest-form",children:[j("div",{className:"form-group",children:[S("label",{htmlFor:"title",className:"form-label",children:"Contest Title"}),S("input",{id:"title",name:"title",value:r.title,onChange:w,placeholder:"Enter an engaging title",className:"form-input",required:!0})]}),j("div",{className:"form-group",children:[S("label",{htmlFor:"description",className:"form-label",children:"Description"}),S("textarea",{id:"description",name:"description",value:r.description,onChange:w,placeholder:"Describe your contest in detail",className:"form-textarea",required:!0})]}),j("div",{className:"form-group",children:[S("label",{htmlFor:"prize",className:"form-label",children:"Prize Amount ($)"}),j("div",{className:"input-with-icon",children:[S("span",{className:"input-icon",children:"$"}),S("input",{id:"prize",name:"prize",type:"number",value:r.prize,onChange:w,placeholder:"1000",className:"form-input with-icon",min:"0",required:!0})]})]}),j("div",{className:"form-group",children:[S("label",{htmlFor:"deadline",className:"form-label",children:"Submission Deadline"}),j("div",{className:"date-picker-container",children:[j("button",{type:"button",className:"date-picker-button",onClick:()=>p(!d),children:[S(iV,{className:"icon"}),S("span",{children:l?RI(l,"PPP"):"Select deadline date"})]}),I()]})]}),j("div",{className:"form-group",children:[S("label",{className:"form-label",children:"Contest Image"}),j("div",{className:`image-upload-area ${u?"active":""}`,onDragEnter:C,onDragLeave:C,onDragOver:C,onDrop:M,onClick:()=>g.current.click(),children:[S("input",{ref:g,type:"file",id:"image",name:"image",onChange:A,className:"hidden-input",accept:"image/png, image/jpeg"}),j("div",{className:"upload-content",children:[S("div",{className:"upload-icon-container",children:S(JM,{className:"upload-icon"})}),S("p",{className:"upload-text",children:t?"Change image":"Upload contest image"}),S("p",{className:"upload-subtext",children:"Drag and drop or click to browse"})]})]}),i&&j("div",{className:"upload-status",children:[S("div",{className:"spinner"}),S("span",{className:"upload-status-text",children:"Uploading..."})]}),a&&j("div",{className:"error-message",children:[S(sV,{className:"error-icon"}),S("p",{children:a})]})]}),S("button",{type:"submit",className:"submit-button",disabled:i,children:i?"Uploading...":"Create Contest"})]})})]})}),j("div",{className:"preview-section",children:[j("div",{className:"card preview-card",children:[S("div",{className:"card-header preview-header",children:S("h2",{className:"card-title",children:"Contest Preview"})}),j("div",{className:"preview-content",children:[t?S("div",{className:"preview-image-container",children:S("img",{src:t||"/placeholder.svg",alt:"Contest Preview",className:"preview-image"})}):S("div",{className:"preview-image-placeholder",children:S($0,{className:"placeholder-icon"})}),j("div",{className:"preview-details",children:[r.title?S("h3",{className:"preview-title",children:r.title}):S("div",{className:"title-placeholder"}),r.description?S("p",{className:"preview-description",children:r.description}):j("div",{className:"description-placeholder",children:[S("div",{className:"placeholder-line"}),S("div",{className:"placeholder-line short"})]}),j("div",{className:"preview-meta",children:[j("div",{className:"meta-item",children:[S(C1,{className:"meta-icon prize-icon"}),j("div",{className:"meta-content",children:[S("p",{className:"meta-label",children:"Prize"}),S("p",{className:"meta-value",children:r.prize?`$${r.prize}`:"Not specified"})]})]}),j("div",{className:"meta-item",children:[S(Z0,{className:"meta-icon deadline-icon"}),j("div",{className:"meta-content",children:[S("p",{className:"meta-label",children:"Deadline"}),S("p",{className:"meta-value",children:l?RI(l,"MMM d, yyyy"):"Not specified"})]})]})]}),j("div",{className:"preview-banner",children:[S("div",{className:"banner-trophy"}),S("p",{className:"banner-text",children:r.title?`Join "${r.title}" and showcase your talent!`:"Complete the form to create your contest"})]})]})]})]}),j("div",{className:"tips-container",children:[S("h4",{className:"tips-title",children:"Tips for a successful contest"}),j("ul",{className:"tips-list",children:[S("li",{children:" Use a clear, descriptive title that explains the contest"}),S("li",{children:" Set a reasonable deadline to attract more participants"}),S("li",{children:" Upload a high-quality image that represents your contest"}),S("li",{children:" Provide detailed instructions in the description"})]})]})]})]})})}function ZLe({submission:r,contest:e,isContestCreator:t}){const[n,i]=P.useState([]),[s,a]=P.useState(""),[o,l]=P.useState(!0),c=P.useRef(null),u=JSON.parse(localStorage.getItem("currentUser"));P.useEffect(()=>{f();const _=setInterval(f,5e3);return()=>clearInterval(_)},[r.id]),P.useEffect(()=>{p()},[n]);const f=async()=>{try{l(!0);const _=await fetch(`https://styloftbackendnew-production.up.railway.app/messages/submission/${r.id}`);if(!_.ok)throw new Error("Failed to fetch messages");const w=await _.json();i(w)}catch(_){console.error("Error fetching messages:",_)}finally{l(!1)}},d=async()=>{if(s.trim())try{if(!u||!u.uid){console.error("User not logged in"),alert("You must be logged in to send messages");return}const _={senderId:u.uid,senderName:u.displayName||"User",content:s};console.log("Sending message:",_),console.log("To submission ID:",r.id);const w=await fetch(`https://styloftbackendnew-production.up.railway.app/messages/submission/${r.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(console.log("Response status:",w.status),!w.ok){const C=await w.text();throw console.error("Error response:",C),new Error(`Failed to send message: ${C}`)}const b=await w.json();console.log("New message data:",b),i(C=>[...C,b]),a("")}catch(_){console.error("Error sending message:",_),alert(`Error sending message: ${_.message}`)}},p=()=>{var _;(_=c.current)==null||_.scrollIntoView({behavior:"smooth"})},g=_=>new Date(_).toLocaleString();return j("div",{className:"submission-chat-container",children:[j("div",{className:"submission-chat-left",children:[S("div",{className:"submission-image-wrapper",children:S("img",{src:r.fileUrl||"/placeholder.svg",alt:"Submission Design",className:"submission-full-image"})}),j("div",{className:"submission-details",children:[j("div",{className:"submission-meta",children:[j("div",{className:"submission-creator",children:[S(iD,{size:16,className:"meta-icon"}),j("span",{children:["Designer: ",r.userName]})]}),j("div",{className:"submission-date",children:[S(Z0,{size:16,className:"meta-icon"}),j("span",{children:["Submitted: ",new Date(r.createdAt||Date.now()).toLocaleDateString()]})]})]}),r.message&&j("div",{className:"submission-message-box",children:[S("h4",{children:"Designer's Notes:"}),S("p",{children:r.message})]})]})]}),j("div",{className:"submission-chat-right",children:[j("div",{className:"chat-header",children:[S("h3",{children:t?`Chat with ${r.userName}`:"Chat with Contest Creator"}),S("p",{className:"chat-subtitle",children:"Discuss the submission details privately"})]}),S("div",{className:"chat-messages",children:o&&n.length===0?S("div",{className:"chat-loading",children:"Loading messages..."}):n.length===0?j("div",{className:"chat-empty",children:[S($0,{size:32}),S("p",{children:"No messages yet. Start the conversation!"})]}):j(Br,{children:[n.map((_,w)=>S("div",{className:`chat-message ${_.senderId===(u==null?void 0:u.uid)?"sent":"received"}`,children:j("div",{className:"message-content",children:[S("div",{className:"message-sender",children:_.senderName}),S("div",{className:"message-text",children:_.content}),S("div",{className:"message-time",children:g(_.timestamp)})]})},w)),S("div",{ref:c})]})}),j("div",{className:"chat-input-container",children:[S("textarea",{className:"chat-input",placeholder:"Type your message here...",value:s,onChange:_=>a(_.target.value),onKeyDown:_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),d())}}),S("button",{className:"chat-send-button",onClick:d,disabled:!s.trim(),children:S(Aie,{size:20})})]})]})]})}const $Le=({isSubmitted:r,isDragging:e,errorMessage:t,imagePreview:n,isUploading:i,newMessage:s,isDeadlinePassed:a,handleDragEnter:o,handleDragLeave:l,handleDragOver:c,handleDrop:u,handleImageUpload:f,handleClearForm:d,handleSubmit:p,setNewMessage:g})=>S("div",{children:r?j("div",{className:"submission-success",children:[S(aV,{size:48,className:"success-icon"}),S("h3",{children:"Submission Successful!"}),S("p",{children:"Your design has been submitted to the contest."})]}):j(Br,{children:[S("h2",{className:"submission-title",children:"Submit Your Design"}),j("div",{className:`upload-box ${e?"dragging":""} ${t?"error":""}`,onDragEnter:o,onDragLeave:l,onDragOver:c,onDrop:u,onClick:()=>document.getElementById("file-upload").click(),children:[S("input",{id:"file-upload",type:"file",onChange:f,className:"file-input",accept:"image/jpeg,image/png,image/jpg",style:{display:"none"}}),n?j("div",{className:"image-preview-container",children:[S("img",{src:n||"/placeholder.svg",alt:"Preview",className:"submission-image-preview"}),S("button",{className:"remove-image-btn",onClick:_=>{_.stopPropagation(),d()},children:S(Oc,{size:16})})]}):j("div",{className:"upload-placeholder",children:[S("div",{className:"upload-icon-container",children:S(JM,{size:24,className:"upload-icon"})}),S("p",{className:"upload-text",children:"Drag and drop your design here"}),S("p",{className:"upload-subtext",children:"or click to browse files"}),S("p",{className:"upload-formats",children:"Supported formats: JPG, PNG"})]}),i&&j("div",{className:"upload-overlay",children:[S("div",{className:"upload-spinner"}),S("p",{children:"Uploading..."})]})]}),t&&j("div",{className:"error-message",children:[S(Oc,{size:16}),S("span",{children:t})]}),j("div",{className:"message-container",children:[j("label",{htmlFor:"message",className:"message-label",children:[S(WM,{size:16}),S("span",{children:"Add a message with your submission"})]}),S("textarea",{id:"message",className:"message-input",value:s,onChange:_=>g(_.target.value),placeholder:"Describe your design or add any notes for the contest creator..."})]}),j("div",{className:"button-group",children:[S("button",{className:"submit-btn",onClick:p,disabled:i||a,children:i?"Uploading...":"Submit Design"}),S("button",{className:"clear-btn",onClick:d,children:"Clear Form"})]}),a&&j("div",{className:"deadline-passed-message",children:[S(Z0,{size:16}),S("span",{children:"This contest has ended and is no longer accepting submissions."})]})]})}),e3e=({submissions:r,contest:e,isContestCreator:t,isDeadlinePassed:n,handleToggleFavorite:i,openModal:s,openChatModal:a,handleSetWinner:o,canChatWithSubmission:l})=>{const c=Yc();return j("div",{className:"submission-gallery",children:[j("div",{className:"gallery-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S("h2",{className:"gallery-title",children:j("span",{children:["Submissions (",r.length,")"]})}),t&&j("button",{className:"favorites-button",style:{display:"flex",alignItems:"center",gap:"5px",background:"#3b82f6",color:"white",padding:"8px 16px",borderRadius:"4px",textDecoration:"none",fontSize:"14px"},onClick:()=>c(`/contest/${e.id}/favorites`),children:[S(S1,{size:16}),S("span",{children:"Favorites"})]})]}),r.length===0?S("div",{className:"no-submissions",children:S("p",{children:"No submissions yet. Be the first to submit your design!"})}):S("div",{className:"submission-cards",children:r.map(u=>j("div",{className:"submission-card",children:[j("div",{className:"submission-image-container",onClick:()=>s(u),children:[S("img",{src:u.fileUrl||"/placeholder.svg",alt:"Submission",className:"submission-image"}),e.winner===u.id&&j("div",{className:"winner-badge-overlay",children:[S(C1,{size:24,color:"#f59e0b"}),S("span",{children:"Winner"})]}),t&&S("button",{className:"favorite-button",onClick:f=>{f.stopPropagation(),i(u.id)},children:S(S1,{size:20,fill:u.favorite?"#ef4444":"none",color:u.favorite?"#ef4444":"#666"})})]}),j("div",{className:"submission-info",children:[j("div",{className:"submission-user",children:[S(iD,{size:16,className:"user-icon"}),S("span",{children:u.userName})]}),u.message&&S("p",{className:"submission-message",children:u.message}),j("div",{className:"submission-actions",children:[l(u)&&j("button",{className:"chat-button",onClick:()=>a(u),children:[S(WM,{size:16}),S("span",{children:"Chat"})]}),t&&n&&!e.winner&&j("button",{className:"winner-button",onClick:()=>o(u.id),style:{marginTop:"10px",padding:"5px 10px",display:"flex",alignItems:"center",gap:"5px",background:"#f59e0b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:[S(C1,{size:16}),S("span",{children:"Set as Winner"})]})]})]})]},u.id))})]})};function t3e(){const{id:r}=FM(),[e,t]=P.useState(null),[n,i]=P.useState(null),[s,a]=P.useState({image:""}),[o,l]=P.useState(""),[c,u]=P.useState(null),[f,d]=P.useState(!1),[p,g]=P.useState(""),[_,w]=P.useState([]),[b,C]=P.useState(!1),[M,A]=P.useState(!1),[k,O]=P.useState(!1),[R,I]=P.useState(null),[D,E]=P.useState(!1),[B,U]=P.useState(!1),[V,X]=P.useState({title:"",description:"",prize:"",deadline:""}),[te,ee]=P.useState([]),[ue,ne]=P.useState(!1),oe=JSON.parse(localStorage.getItem("currentUser"));P.useEffect(()=>{(async()=>{try{const Z=await fetch(`https://styloftbackendnew-production.up.railway.app/contest/${r}`);if(!Z.ok)throw new Error("Failed to fetch contest");const W=await Z.json();t(W),u(q(new Date(W.deadline)))}catch(Z){console.error("Error fetching contest:",Z)}})()},[r]),P.useEffect(()=>{if(!c)return;const Ee=setInterval(()=>{u(q(new Date(e==null?void 0:e.deadline)))},1e3);return()=>clearInterval(Ee)},[e==null?void 0:e.deadline]),P.useEffect(()=>{(async()=>{try{const Z=await fetch(`https://styloftbackendnew-production.up.railway.app/submission/contest/${r}`);if(!Z.ok)throw new Error("Failed to fetch submissions");const re=(await Z.json()).map(be=>({...be,userName:be.userName||"Unknown User"}));w(re)}catch(Z){console.error("Error fetching submissions:",Z)}})()},[r,M]),P.useEffect(()=>{e&&oe&&oe.uid===e.createdBy&&(async()=>{ne(!0);try{const Z=await fetch(`https://styloftbackendnew-production.up.railway.app/submission/contest/${r}/favorites`);if(!Z.ok)throw new Error("Failed to fetch favorite submissions");const W=await Z.json();ee(W)}catch(Z){console.error("Error fetching favorite submissions:",Z)}finally{ne(!1)}})()},[r,e]),P.useEffect(()=>{if(e){const Ee=e.deadline?new Date(e.deadline).toISOString().split("T")[0]:"";X({title:e.title||"",description:e.description||"",prize:e.prize||"",deadline:Ee})}},[e]);const q=Ee=>{const W=Ee-new Date;return W<=0?{days:0,hours:0,minutes:0,seconds:0}:{days:Math.floor(W/(1e3*60*60*24)),hours:Math.floor(W/(1e3*60*60)%24),minutes:Math.floor(W/1e3/60%60),seconds:Math.floor(W/1e3%60)}},J=Ee=>{Ee.preventDefault(),Ee.stopPropagation(),C(!0)},ie=Ee=>{Ee.preventDefault(),Ee.stopPropagation(),C(!1)},he=Ee=>{Ee.preventDefault(),Ee.stopPropagation()},$=Ee=>{Ee.preventDefault(),Ee.stopPropagation(),C(!1),Ee.dataTransfer.files&&Ee.dataTransfer.files[0]&&pe(Ee.dataTransfer.files[0])},ge=Ee=>{Ee.target.files&&Ee.target.files[0]&&pe(Ee.target.files[0])},pe=async Ee=>{if(!Ee)return;if(!["image/jpeg","image/png","image/jpg"].includes(Ee.type)){g("Invalid file type. Please upload a JPG or PNG image.");return}i(URL.createObjectURL(Ee)),d(!0),g("");const W=new FormData;W.append("file",Ee),W.append("upload_preset","Styloft");try{const be=await(await fetch("https://api.cloudinary.com/v1_1/ds0xdh85j/image/upload",{method:"POST",body:W})).json();be.secure_url?a(ve=>({...ve,image:be.secure_url})):g("Image upload failed. Try again.")}catch{g("Error uploading image. Check your network.")}finally{d(!1)}},we=async()=>{if(!s.image){g(f?"File is still uploading. Please wait.":"Please upload a file before submitting.");return}const Ee=JSON.parse(localStorage.getItem("currentUser"));if(!Ee){g("User not logged in. Please log in before submitting.");return}const Z={fileUrl:s.image,contestId:r,userId:Ee.uid,userName:Ee.displayName,message:o};try{const W=await fetch("https://styloftbackendnew-production.up.railway.app/submission/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)}),re=await W.json();if(!W.ok)throw new Error(re.message||"Failed to submit design");A(!0),setTimeout(()=>{ke(),A(!1)},3e3)}catch(W){console.error("Error submitting design:",W),g(W.message)}},ke=()=>{a({image:""}),l(""),i(null),g(""),document.getElementById("file-upload").value=""},Pe=Ee=>{I(Ee),O(!0)},je=()=>{O(!1),I(null)},Ke=Ee=>{I(Ee),E(!0)},Ie=()=>{E(!1),I(null)},Ge=Ee=>{const{name:Z,value:W}=Ee.target;X({...V,[Z]:W})},ce=async()=>{try{const Ee={title:V.title,description:V.description,prize:parseFloat(V.prize),deadline:new Date(V.deadline).toISOString()},Z=await fetch(`https://styloftbackendnew-production.up.railway.app/contest/${r}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ee)});if(!Z.ok){const W=await Z.json();throw new Error(W.message||"Failed to update contest")}t({...e,...Ee}),alert("Contest updated successfully!"),g("")}catch(Ee){console.error("Error updating contest:",Ee),g(Ee.message)}},_t=Ee=>{if(!oe)return!1;const Z=oe.uid===(e==null?void 0:e.createdBy),W=oe.uid===Ee.userId;return Z||W},_e=async Ee=>{if(!(!oe||!He))try{console.log(`Toggling favorite for submission ${Ee}`);const Z=await fetch(`https://styloftbackendnew-production.up.railway.app/submission/${Ee}/favorite`,{method:"PATCH",headers:{"Content-Type":"application/json"}});if(!Z.ok){const re=await Z.json();throw new Error(re.message||"Failed to toggle favorite status")}const W=await Z.json();if(console.log("Updated submission:",W),w(_.map(re=>re.id===Ee?{...re,favorite:W.favorite}:re)),W.favorite){if(!te.find(re=>re.id===Ee)){const re=_.find(be=>be.id===Ee);ee([...te,re])}}else ee(te.filter(re=>re.id!==Ee))}catch(Z){console.error("Error toggling favorite:",Z),alert("Failed to update favorite status. Please try again.")}},Ne=async Ee=>{if(!(!oe||!He||!Ce))try{const Z=await fetch(`https://styloftbackendnew-production.up.railway.app/contest/${r}/winner`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({winnerId:Ee})});if(!Z.ok){const re=await Z.json();throw new Error(re.message||"Failed to set winner")}const W=await Z.json();t({...e,winner:Ee}),alert("Winner successfully selected!")}catch(Z){console.error("Error setting winner:",Z),g("Failed to set winner. Please try again.")}};if(!e)return j("div",{className:"contest-loading",children:[S("div",{className:"contest-loader"}),S("p",{children:"Loading contest details..."})]});const Ce=c.days===0&&c.hours===0&&c.minutes===0&&c.seconds===0,He=oe&&oe.uid===e.createdBy;return j("div",{className:"contest-content-page",children:[j("div",{className:"contest-header",children:[S("h1",{className:"contest-header-title",children:e.title}),j("div",{className:"contest-countdown-container",children:[j("div",{className:"contest-countdown-label",children:[S(Z0,{size:18}),S("span",{children:Ce?"Contest Ended":"Time Remaining"})]}),S("div",{className:"contest-countdown",children:Ce?S("div",{className:"closed-contest-message",children:S("span",{children:"This contest has ended."})}):j(Br,{children:[j("div",{className:"countdown-item",children:[S("span",{className:"countdown-value",children:String(c==null?void 0:c.days).padStart(2,"0")}),S("span",{className:"countdown-label",children:"Days"})]}),S("div",{className:"countdown-separator",children:":"}),j("div",{className:"countdown-item",children:[S("span",{className:"countdown-value",children:String(c==null?void 0:c.hours).padStart(2,"0")}),S("span",{className:"countdown-label",children:"Hours"})]}),S("div",{className:"countdown-separator",children:":"}),j("div",{className:"countdown-item",children:[S("span",{className:"countdown-value",children:String(c==null?void 0:c.minutes).padStart(2,"0")}),S("span",{className:"countdown-label",children:"Mins"})]}),S("div",{className:"countdown-separator",children:":"}),j("div",{className:"countdown-item",children:[S("span",{className:"countdown-value",children:String(c==null?void 0:c.seconds).padStart(2,"0")}),S("span",{className:"countdown-label",children:"Secs"})]})]})})]})]}),j("div",{className:"contest-content-container",children:[j("div",{className:"contest-left",children:[j("div",{className:"contest-image-container",children:[S("img",{src:e.image||"/placeholder.svg",alt:"Contest Banner",className:"contest-image"}),j("div",{className:"contest-prize-badge",children:[S(ow,{size:18}),j("span",{children:["$",e.prize]})]})]}),j("div",{className:"contest-details",children:[j("div",{className:"contest-detail-item",children:[S("h2",{className:"contest-detail-title",children:"About This Contest"}),S("p",{className:"contest-description",children:e.description})]}),j("div",{className:"contest-detail-item",children:[j("h3",{className:"contest-detail-subtitle",children:[S(iV,{size:16}),S("span",{children:"Deadline"})]}),S("p",{className:"contest-deadline",children:new Date(e.deadline).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),j("div",{className:"contest-detail-item",children:[j("h3",{className:"contest-detail-subtitle",children:[S(ow,{size:16}),S("span",{children:"Prize"})]}),j("p",{className:"contest-prize",children:["$",e.prize]})]})]})]}),S("div",{className:"contest-right",children:Ce?j("div",{className:"winner-display",children:[S("h2",{className:"winner-title",children:"Contest Results"}),e.winner?S(Br,{children:(()=>{const Ee=_.find(Z=>Z.id===e.winner);return Ee?j("div",{className:"winner-content",children:[j("div",{className:"Winner-Selected",children:[S(ow,{size:36,color:"#f59e0b"}),S("h3",{children:"Winner Selected!"})]}),S("div",{className:"winner-image-container",children:S("img",{src:Ee.fileUrl||"/placeholder.svg",alt:"Winning Design",className:"winner-image"})}),j("div",{className:"winner-info",children:[j("div",{className:"winner-name",children:[S(C1,{size:18,color:"#f59e0b"}),j("span",{children:["Congratulations to ",S("strong",{children:Ee.userName})]})]}),j("div",{className:"winner-prize",children:[S(Ore,{size:18}),j("span",{children:["Prize: ",j("strong",{children:["$",e.prize]})]})]}),Ee.message&&j("div",{className:"winner-message",children:[S(WM,{size:16}),j("p",{children:['"',Ee.message,'"']})]})]})]}):S("div",{className:"winner-loading",children:S("p",{children:"Loading winner information..."})})})()}):He?j("div",{className:"select-winner-prompt",children:[S(C1,{size:24}),S("h3",{children:"Select a Winner"}),S("p",{children:"The contest has ended. Please select a winning submission from the gallery below."}),j("div",{className:"winner-selection-help",children:[S(eie,{size:16}),S("p",{children:'Click on "Set as Winner" button on a submission card to declare the winner.'})]})]}):j("div",{className:"pending-winner",children:[S(Z0,{size:24}),S("h3",{children:"Contest Ended"}),S("p",{children:"This contest has ended. The contest creator will select a winner soon."})]})]}):He?j(Br,{children:[S("h2",{className:"submission-title",children:"Edit Contest Details"}),p&&j("div",{className:"error-message",children:[S(Oc,{size:16}),S("span",{children:p})]}),j("div",{className:"edit-form",children:[j("div",{className:"edit-field",children:[S("label",{htmlFor:"title",className:"edit-label",children:"Contest Title"}),S("input",{type:"text",id:"title",name:"title",className:"message-input",value:V.title,onChange:Ge,placeholder:"Contest title"})]}),j("div",{className:"edit-field",children:[S("label",{htmlFor:"description",className:"edit-label",children:"Description"}),S("textarea",{id:"description",name:"description",className:"message-input",value:V.description,onChange:Ge,placeholder:"Contest description",rows:5})]}),j("div",{className:"edit-field",children:[S("label",{htmlFor:"prize",className:"edit-label",children:"Prize Amount ($)"}),S("input",{type:"number",id:"prize",name:"prize",className:"message-input",value:V.prize,onChange:Ge,placeholder:"Prize amount",min:"1"})]}),j("div",{className:"edit-field",children:[S("label",{htmlFor:"deadline",className:"edit-label",children:"Deadline"}),S("input",{type:"date",id:"deadline",name:"deadline",className:"message-input",value:V.deadline,onChange:Ge})]}),S("div",{className:"button-group",children:S("button",{className:"submit-btn",onClick:ce,disabled:Ce,children:"Update Contest"})}),Ce&&j("div",{className:"deadline-passed-message",children:[S(Z0,{size:16}),S("span",{children:"This contest has ended and can no longer be edited."})]})]})]}):S(Br,{children:S($Le,{isSubmitted:M,isDragging:b,errorMessage:p,imagePreview:n,isUploading:f,newMessage:o,isDeadlinePassed:Ce,handleDragEnter:J,handleDragLeave:ie,handleDragOver:he,handleDrop:$,handleImageUpload:ge,handleClearForm:ke,handleSubmit:we,setNewMessage:l})})})]}),console.log("repeater----"),S(e3e,{submissions:_,contest:e,isContestCreator:He,isDeadlinePassed:Ce,handleToggleFavorite:_e,openModal:Pe,openChatModal:Ke,handleSetWinner:Ne,canChatWithSubmission:_t}),k&&R&&S("div",{className:"modal-overlay",onClick:je,children:j("div",{className:"modal-content",onClick:Ee=>Ee.stopPropagation(),children:[S("button",{className:"modal-close-btn",onClick:je,children:S(Oc,{size:24})}),j("div",{className:"modal-body",children:[S("img",{src:R.fileUrl||"/placeholder.svg",alt:"Submission",className:"modal-image"}),j("div",{className:"modal-info",children:[S("h3",{children:R.userName}),R.message&&S("p",{children:R.message})]})]})]})}),D&&R&&S("div",{className:"modal-overlay",onClick:Ie,children:j("div",{className:"modal-content submission-chat-modal",onClick:Ee=>Ee.stopPropagation(),children:[S("button",{className:"modal-close-btn",onClick:Ie,children:S(Oc,{size:24})}),S(ZLe,{submission:R,contest:e,isContestCreator:He})]})})]})}function n3e(){return j(m5,{children:[S(ns,{path:"/",element:S(HIe,{})}),S(ns,{path:"add-contest",element:S(qLe,{})}),S(ns,{path:":id",element:S(t3e,{})})]})}var PI={exports:{}},OI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mz;function r3e(){if(Mz)return OI;Mz=1;var r=nv();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var t=typeof Object.is=="function"?Object.is:e,n=r.useSyncExternalStore,i=r.useRef,s=r.useEffect,a=r.useMemo,o=r.useDebugValue;return OI.useSyncExternalStoreWithSelector=function(l,c,u,f,d){var p=i(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=a(function(){function w(k){if(!b){if(b=!0,C=k,k=f(k),d!==void 0&&g.hasValue){var O=g.value;if(d(O,k))return M=O}return M=k}if(O=M,t(C,k))return O;var R=f(k);return d!==void 0&&d(O,R)?(C=k,O):(C=k,M=R)}var b=!1,C,M,A=u===void 0?null:u;return[function(){return w(c())},A===null?void 0:function(){return w(A())}]},[c,u,f,d]);var _=n(l,p[0],p[1]);return s(function(){g.hasValue=!0,g.value=_},[_]),o(_),_},OI}var Az;function i3e(){return Az||(Az=1,PI.exports=r3e()),PI.exports}var s3e=i3e();function a3e(r){r()}function o3e(){let r=null,e=null;return{clear(){r=null,e=null},notify(){a3e(()=>{let t=r;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=r;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let n=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:r=i,function(){!n||r===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:r=i.next)}}}}var Tz={notify(){},get:()=>[]};function l3e(r,e){let t,n=Tz,i=0,s=!1;function a(_){u();const w=n.subscribe(_);let b=!1;return()=>{b||(b=!0,w(),f())}}function o(){n.notify()}function l(){g.onStateChange&&g.onStateChange()}function c(){return s}function u(){i++,t||(t=r.subscribe(l),n=o3e())}function f(){i--,t&&i===0&&(t(),t=void 0,n.clear(),n=Tz)}function d(){s||(s=!0,u())}function p(){s&&(s=!1,f())}const g={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:d,tryUnsubscribe:p,getListeners:()=>n};return g}var c3e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u3e=c3e(),f3e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",d3e=f3e(),h3e=()=>u3e||d3e?P.useLayoutEffect:P.useEffect,p3e=h3e(),FI=Symbol.for("react-redux-context"),BI=typeof globalThis<"u"?globalThis:{};function m3e(){if(!P.createContext)return{};const r=BI[FI]??(BI[FI]=new Map);let e=r.get(P.createContext);return e||(e=P.createContext(null),r.set(P.createContext,e)),e}var zh=m3e();function g3e(r){const{children:e,context:t,serverState:n,store:i}=r,s=P.useMemo(()=>{const l=l3e(i);return{store:i,subscription:l,getServerState:n?()=>n:void 0}},[i,n]),a=P.useMemo(()=>i.getState(),[i]);p3e(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,a]);const o=t||zh;return P.createElement(o.Provider,{value:s},e)}var v3e=g3e;function cP(r=zh){return function(){return P.useContext(r)}}var BQ=cP();function UQ(r=zh){const e=r===zh?BQ:cP(r),t=()=>{const{store:n}=e();return n};return Object.assign(t,{withTypes:()=>t}),t}var y3e=UQ();function w3e(r=zh){const e=r===zh?y3e:UQ(r),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var _3e=w3e(),b3e=(r,e)=>r===e;function S3e(r=zh){const e=r===zh?BQ:cP(r),t=(n,i={})=>{const{equalityFn:s=b3e}=typeof i=="function"?{equalityFn:i}:i,a=e(),{store:o,subscription:l,getServerState:c}=a;P.useRef(!0);const u=P.useCallback({[n.name](d){return n(d)}}[n.name],[n]),f=s3e.useSyncExternalStoreWithSelector(l.addNestedSub,o.getState,c||o.getState,u,s);return P.useDebugValue(f),f};return Object.assign(t,{withTypes:()=>t}),t}var Ez=S3e();function pa(r){return`Minified Redux error #${r}; visit https://redux.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var x3e=typeof Symbol=="function"&&Symbol.observable||"@@observable",Iz=x3e,UI=()=>Math.random().toString(36).substring(7).split("").join("."),C3e={INIT:`@@redux/INIT${UI()}`,REPLACE:`@@redux/REPLACE${UI()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${UI()}`},TM=C3e;function uP(r){if(typeof r!="object"||r===null)return!1;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e||Object.getPrototypeOf(r)===null}function jQ(r,e,t){if(typeof r!="function")throw new Error(pa(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(pa(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(pa(1));return t(jQ)(r,e)}let n=r,i=e,s=new Map,a=s,o=0,l=!1;function c(){a===s&&(a=new Map,s.forEach((w,b)=>{a.set(b,w)}))}function u(){if(l)throw new Error(pa(3));return i}function f(w){if(typeof w!="function")throw new Error(pa(4));if(l)throw new Error(pa(5));let b=!0;c();const C=o++;return a.set(C,w),function(){if(b){if(l)throw new Error(pa(6));b=!1,c(),a.delete(C),s=null}}}function d(w){if(!uP(w))throw new Error(pa(7));if(typeof w.type>"u")throw new Error(pa(8));if(typeof w.type!="string")throw new Error(pa(17));if(l)throw new Error(pa(9));try{l=!0,i=n(i,w)}finally{l=!1}return(s=a).forEach(C=>{C()}),w}function p(w){if(typeof w!="function")throw new Error(pa(10));n=w,d({type:TM.REPLACE})}function g(){const w=f;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(pa(11));function C(){const A=b;A.next&&A.next(u())}return C(),{unsubscribe:w(C)}},[Iz](){return this}}}return d({type:TM.INIT}),{dispatch:d,subscribe:f,getState:u,replaceReducer:p,[Iz]:g}}function M3e(r){Object.keys(r).forEach(e=>{const t=r[e];if(typeof t(void 0,{type:TM.INIT})>"u")throw new Error(pa(12));if(typeof t(void 0,{type:TM.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(pa(13))})}function A3e(r){const e=Object.keys(r),t={};for(let s=0;s<e.length;s++){const a=e[s];typeof r[a]=="function"&&(t[a]=r[a])}const n=Object.keys(t);let i;try{M3e(t)}catch(s){i=s}return function(a={},o){if(i)throw i;let l=!1;const c={};for(let u=0;u<n.length;u++){const f=n[u],d=t[f],p=a[f],g=d(p,o);if(typeof g>"u")throw o&&o.type,new Error(pa(14));c[f]=g,l=l||g!==p}return l=l||n.length!==Object.keys(a).length,l?c:a}}function EM(...r){return r.length===0?e=>e:r.length===1?r[0]:r.reduce((e,t)=>(...n)=>e(t(...n)))}function T3e(...r){return e=>(t,n)=>{const i=e(t,n);let s=()=>{throw new Error(pa(15))};const a={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},o=r.map(l=>l(a));return s=EM(...o)(i.dispatch),{...i,dispatch:s}}}function E3e(r){return uP(r)&&"type"in r&&typeof r.type=="string"}var zQ=Symbol.for("immer-nothing"),Lz=Symbol.for("immer-draftable"),gl=Symbol.for("immer-state");function kc(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var ev=Object.getPrototypeOf;function tg(r){return!!r&&!!r[gl]}function sd(r){var e;return r?VQ(r)||Array.isArray(r)||!!r[Lz]||!!((e=r.constructor)!=null&&e[Lz])||OT(r)||FT(r):!1}var I3e=Object.prototype.constructor.toString();function VQ(r){if(!r||typeof r!="object")return!1;const e=ev(r);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===I3e}function IM(r,e){PT(r)===0?Reflect.ownKeys(r).forEach(t=>{e(t,r[t],r)}):r.forEach((t,n)=>e(n,t,r))}function PT(r){const e=r[gl];return e?e.type_:Array.isArray(r)?1:OT(r)?2:FT(r)?3:0}function eN(r,e){return PT(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function GQ(r,e,t){const n=PT(r);n===2?r.set(e,t):n===3?r.add(t):r[e]=t}function L3e(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function OT(r){return r instanceof Map}function FT(r){return r instanceof Set}function sm(r){return r.copy_||r.base_}function tN(r,e){if(OT(r))return new Map(r);if(FT(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=VQ(r);if(e===!0||e==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(r);delete n[gl];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const a=i[s],o=n[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:r[a]})}return Object.create(ev(r),n)}else{const n=ev(r);if(n!==null&&t)return{...r};const i=Object.create(n);return Object.assign(i,r)}}function fP(r,e=!1){return BT(r)||tg(r)||!sd(r)||(PT(r)>1&&(r.set=r.add=r.clear=r.delete=N3e),Object.freeze(r),e&&Object.entries(r).forEach(([t,n])=>fP(n,!0))),r}function N3e(){kc(2)}function BT(r){return Object.isFrozen(r)}var D3e={};function ng(r){const e=D3e[r];return e||kc(0,r),e}var M_;function HQ(){return M_}function k3e(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Nz(r,e){e&&(ng("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function nN(r){rN(r),r.drafts_.forEach(R3e),r.drafts_=null}function rN(r){r===M_&&(M_=r.parent_)}function Dz(r){return M_=k3e(M_,r)}function R3e(r){const e=r[gl];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function kz(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[gl].modified_&&(nN(e),kc(4)),sd(r)&&(r=LM(e,r),e.parent_||NM(e,r)),e.patches_&&ng("Patches").generateReplacementPatches_(t[gl].base_,r,e.patches_,e.inversePatches_)):r=LM(e,t,[]),nN(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==zQ?r:void 0}function LM(r,e,t){if(BT(e))return e;const n=e[gl];if(!n)return IM(e,(i,s)=>Rz(r,n,e,i,s,t)),e;if(n.scope_!==r)return e;if(!n.modified_)return NM(r,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let s=i,a=!1;n.type_===3&&(s=new Set(i),i.clear(),a=!0),IM(s,(o,l)=>Rz(r,n,i,o,l,t,a)),NM(r,i,!1),t&&r.patches_&&ng("Patches").generatePatches_(n,t,r.patches_,r.inversePatches_)}return n.copy_}function Rz(r,e,t,n,i,s,a){if(tg(i)){const o=s&&e&&e.type_!==3&&!eN(e.assigned_,n)?s.concat(n):void 0,l=LM(r,i,o);if(GQ(t,n,l),tg(l))r.canAutoFreeze_=!1;else return}else a&&t.add(i);if(sd(i)&&!BT(i)){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1)return;LM(r,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,n)&&NM(r,i)}}function NM(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&fP(e,t)}function P3e(r,e){const t=Array.isArray(r),n={type_:t?1:0,scope_:e?e.scope_:HQ(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=dP;t&&(i=[n],s=A_);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return n.draft_=o,n.revoke_=a,o}var dP={get(r,e){if(e===gl)return r;const t=sm(r);if(!eN(t,e))return O3e(r,t,e);const n=t[e];return r.finalized_||!sd(n)?n:n===jI(r.base_,e)?(zI(r),r.copy_[e]=sN(n,r)):n},has(r,e){return e in sm(r)},ownKeys(r){return Reflect.ownKeys(sm(r))},set(r,e,t){const n=WQ(sm(r),e);if(n!=null&&n.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const i=jI(sm(r),e),s=i==null?void 0:i[gl];if(s&&s.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(L3e(t,i)&&(t!==void 0||eN(r.base_,e)))return!0;zI(r),iN(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return jI(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,zI(r),iN(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=sm(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){kc(11)},getPrototypeOf(r){return ev(r.base_)},setPrototypeOf(){kc(12)}},A_={};IM(dP,(r,e)=>{A_[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});A_.deleteProperty=function(r,e){return A_.set.call(this,r,e,void 0)};A_.set=function(r,e,t){return dP.set.call(this,r[0],e,t,r[0])};function jI(r,e){const t=r[gl];return(t?sm(t):r)[e]}function O3e(r,e,t){var i;const n=WQ(e,t);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(r.draft_):void 0}function WQ(r,e){if(!(e in r))return;let t=ev(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=ev(t)}}function iN(r){r.modified_||(r.modified_=!0,r.parent_&&iN(r.parent_))}function zI(r){r.copy_||(r.copy_=tN(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var F3e=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(l=s,...c){return a.produce(l,u=>t.call(this,u,...c))}}typeof t!="function"&&kc(6),n!==void 0&&typeof n!="function"&&kc(7);let i;if(sd(e)){const s=Dz(this),a=sN(e,void 0);let o=!0;try{i=t(a),o=!1}finally{o?nN(s):rN(s)}return Nz(s,n),kz(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===zQ&&(i=void 0),this.autoFreeze_&&fP(i,!0),n){const s=[],a=[];ng("Patches").generateReplacementPatches_(e,i,s,a),n(s,a)}return i}else kc(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let n,i;return[this.produce(e,t,(a,o)=>{n=a,i=o}),n,i]},typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof(r==null?void 0:r.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy)}createDraft(r){sd(r)||kc(8),tg(r)&&(r=B3e(r));const e=Dz(this),t=sN(r,void 0);return t[gl].isManual_=!0,rN(e),t}finishDraft(r,e){const t=r&&r[gl];(!t||!t.isManual_)&&kc(9);const{scope_:n}=t;return Nz(n,e),kz(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}t>-1&&(e=e.slice(t+1));const n=ng("Patches").applyPatches_;return tg(r)?n(r,e):this.produce(r,i=>n(i,e))}};function sN(r,e){const t=OT(r)?ng("MapSet").proxyMap_(r,e):FT(r)?ng("MapSet").proxySet_(r,e):P3e(r,e);return(e?e.scope_:HQ()).drafts_.push(t),t}function B3e(r){return tg(r)||kc(10,r),YQ(r)}function YQ(r){if(!sd(r)||BT(r))return r;const e=r[gl];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=tN(r,e.scope_.immer_.useStrictShallowCopy_)}else t=tN(r,!0);return IM(t,(n,i)=>{GQ(t,n,YQ(i))}),e&&(e.finalized_=!1),t}var vl=new F3e,JQ=vl.produce;vl.produceWithPatches.bind(vl);vl.setAutoFreeze.bind(vl);vl.setUseStrictShallowCopy.bind(vl);vl.applyPatches.bind(vl);vl.createDraft.bind(vl);vl.finishDraft.bind(vl);function XQ(r){return({dispatch:t,getState:n})=>i=>s=>typeof s=="function"?s(t,n,r):i(s)}var U3e=XQ(),j3e=XQ,z3e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?EM:EM.apply(null,arguments)};function Pz(r,e){function t(...n){if(e){let i=e(...n);if(!i)throw new Error(Hf(0));return{type:r,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:r,payload:n[0]}}return t.toString=()=>`${r}`,t.type=r,t.match=n=>E3e(n)&&n.type===r,t}var QQ=class nw extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,nw.prototype)}static get[Symbol.species](){return nw}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new nw(...e[0].concat(this)):new nw(...e.concat(this))}};function Oz(r){return sd(r)?JQ(r,()=>{}):r}function Fz(r,e,t){return r.has(e)?r.get(e):r.set(e,t(e)).get(e)}function V3e(r){return typeof r=="boolean"}var G3e=()=>function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let a=new QQ;return t&&(V3e(t)?a.push(U3e):a.push(j3e(t.extraArgument))),a},H3e="RTK_autoBatch",Bz=r=>e=>{setTimeout(e,r)},W3e=(r={type:"raf"})=>e=>(...t)=>{const n=e(...t);let i=!0,s=!1,a=!1;const o=new Set,l=r.type==="tick"?queueMicrotask:r.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Bz(10):r.type==="callback"?r.queueNotification:Bz(r.timeout),c=()=>{a=!1,s&&(s=!1,o.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const f=()=>i&&u(),d=n.subscribe(f);return o.add(u),()=>{d(),o.delete(u)}},dispatch(u){var f;try{return i=!((f=u==null?void 0:u.meta)!=null&&f[H3e]),s=!i,s&&(a||(a=!0,l(c))),n.dispatch(u)}finally{i=!0}}})},Y3e=r=>function(t){const{autoBatch:n=!0}=t??{};let i=new QQ(r);return n&&i.push(W3e(typeof n=="object"?n:void 0)),i};function J3e(r){const e=G3e(),{reducer:t=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=r||{};let o;if(typeof t=="function")o=t;else if(uP(t))o=A3e(t);else throw new Error(Hf(1));let l;typeof n=="function"?l=n(e):l=e();let c=EM;i&&(c=z3e({trace:!1,...typeof i=="object"&&i}));const u=T3e(...l),f=Y3e(u);let d=typeof a=="function"?a(f):f();const p=c(...d);return jQ(o,s,p)}function KQ(r){const e={},t=[];let n;const i={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Hf(28));if(o in e)throw new Error(Hf(29));return e[o]=a,i},addMatcher(s,a){return t.push({matcher:s,reducer:a}),i},addDefaultCase(s){return n=s,i}};return r(i),[e,t,n]}function X3e(r){return typeof r=="function"}function Q3e(r,e){let[t,n,i]=KQ(e),s;if(X3e(r))s=()=>Oz(r());else{const o=Oz(r);s=()=>o}function a(o=s(),l){let c=[t[l.type],...n.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,f)=>{if(f)if(tg(u)){const p=f(u,l);return p===void 0?u:p}else{if(sd(u))return JQ(u,d=>f(d,l));{const d=f(u,l);if(d===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return u},o)}return a.getInitialState=s,a}var K3e=Symbol.for("rtk-slice-createasyncthunk");function q3e(r,e){return`${r}/${e}`}function Z3e({creators:r}={}){var t;const e=(t=r==null?void 0:r.asyncThunk)==null?void 0:t[K3e];return function(i){const{name:s,reducerPath:a=s}=i;if(!s)throw new Error(Hf(11));const o=(typeof i.reducers=="function"?i.reducers(tNe()):i.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(M,A){const k=typeof M=="string"?M:M.type;if(!k)throw new Error(Hf(12));if(k in c.sliceCaseReducersByType)throw new Error(Hf(13));return c.sliceCaseReducersByType[k]=A,u},addMatcher(M,A){return c.sliceMatchers.push({matcher:M,reducer:A}),u},exposeAction(M,A){return c.actionCreators[M]=A,u},exposeCaseReducer(M,A){return c.sliceCaseReducersByName[M]=A,u}};l.forEach(M=>{const A=o[M],k={reducerName:M,type:q3e(s,M),createNotation:typeof i.reducers=="function"};rNe(A)?sNe(k,A,u,e):nNe(k,A,u)});function f(){const[M={},A=[],k=void 0]=typeof i.extraReducers=="function"?KQ(i.extraReducers):[i.extraReducers],O={...M,...c.sliceCaseReducersByType};return Q3e(i.initialState,R=>{for(let I in O)R.addCase(I,O[I]);for(let I of c.sliceMatchers)R.addMatcher(I.matcher,I.reducer);for(let I of A)R.addMatcher(I.matcher,I.reducer);k&&R.addDefaultCase(k)})}const d=M=>M,p=new Map;let g;function _(M,A){return g||(g=f()),g(M,A)}function w(){return g||(g=f()),g.getInitialState()}function b(M,A=!1){function k(R){let I=R[M];return typeof I>"u"&&A&&(I=w()),I}function O(R=d){const I=Fz(p,A,()=>new WeakMap);return Fz(I,R,()=>{const D={};for(const[E,B]of Object.entries(i.selectors??{}))D[E]=$3e(B,R,w,A);return D})}return{reducerPath:M,getSelectors:O,get selectors(){return O(k)},selectSlice:k}}const C={name:s,reducer:_,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...b(a),injectInto(M,{reducerPath:A,...k}={}){const O=A??a;return M.inject({reducerPath:O,reducer:_},k),{...C,...b(O,!0)}}};return C}}function $3e(r,e,t,n){function i(s,...a){let o=e(s);return typeof o>"u"&&n&&(o=t()),r(o,...a)}return i.unwrapped=r,i}var eNe=Z3e();function tNe(){function r(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return r.withTypes=()=>r,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:r}}function nNe({type:r,reducerName:e,createNotation:t},n,i){let s,a;if("reducer"in n){if(t&&!iNe(n))throw new Error(Hf(17));s=n.reducer,a=n.prepare}else s=n;i.addCase(r,s).exposeCaseReducer(e,s).exposeAction(e,a?Pz(r,a):Pz(r))}function rNe(r){return r._reducerDefinitionType==="asyncThunk"}function iNe(r){return r._reducerDefinitionType==="reducerWithPrepare"}function sNe({type:r,reducerName:e},t,n,i){if(!i)throw new Error(Hf(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:c,options:u}=t,f=i(r,s,u);n.exposeAction(e,f),a&&n.addCase(f.fulfilled,a),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),c&&n.addMatcher(f.settled,c),n.exposeCaseReducer(e,{fulfilled:a||ZS,pending:o||ZS,rejected:l||ZS,settled:c||ZS})}function ZS(){}function Hf(r){return`Minified Redux Toolkit error #${r}; visit https://redux-toolkit.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}const aNe={allProducts:[],filteredProducts:[],selectedProduct:null},qQ=eNe({name:"products",initialState:aNe,reducers:{setProducts:(r,e)=>{r.allProducts=e.payload,r.filteredProducts=e.payload},addProduct:(r,e)=>{r.allProducts.push(e.payload),r.filteredProducts.push(e.payload)},sortProducts:(r,e)=>{e.payload==="top"?r.filteredProducts.sort((t,n)=>n.rating-t.rating):e.payload==="low_price"&&r.filteredProducts.sort((t,n)=>t.price-n.price)},selectProduct:(r,e)=>{r.selectedProduct=e.payload}}}),{setProducts:oNe,addProduct:iRe,sortProducts:sRe,selectProduct:aRe}=qQ.actions,lNe=qQ.reducer,Uz="https://www.imghippo.com/i/QMsd7261qms.jpg",cNe=({product:r,onExplore:e})=>{const[t,n]=P.useState(!1),[i,s]=P.useState(!1),[a,o]=P.useState(!1);if(!r)return null;const l=a?Uz:r.image||Uz,c=r.price&&!isNaN(r.price)?`$${Number(r.price).toFixed(2)}`:"Price Not Available",u=()=>{s(!0)},f=()=>{o(!0),s(!0)};return j("div",{className:"product-card",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[j("div",{className:"product-image-container",children:[!i&&S("div",{className:"image-placeholder",children:S("div",{className:"spinner"})}),S("img",{src:l||"/placeholder.svg",alt:`Image of ${r.name||"Product"}`,className:`product-image ${i?"loaded":""}`,onLoad:u,onError:f})]}),j("div",{className:"product-details",children:[S("h3",{className:"product-name",children:r.description||"Unnamed Product"}),S("p",{className:"product-price",children:c})]}),S("div",{className:"button-group",children:j("button",{className:"quick-view",onClick:()=>e(r),"aria-label":`Quick view ${r.name||"product"}`,children:[S(Wy,{size:16,className:"icon"}),S("span",{children:"Quick View"})]})})]})};var ZQ="https://js.stripe.com/v3",uNe=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var fNe=function(){for(var e=document.querySelectorAll('script[src^="'.concat(ZQ,'"]')),t=0;t<e.length;t++){var n=e[t];if(uNe.test(n.src))return n}return null},dNe=function(e){var t="",n=document.createElement("script");n.src="".concat(ZQ).concat(t);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(n),n},hNe=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"1.54.2",startTime:t})},$S=null,pNe=function(e){return $S!==null||($S=new Promise(function(t,n){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var i=fNe();i&&e||i||(i=dNe(e)),i.addEventListener("load",function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}),i.addEventListener("error",function(){n(new Error("Failed to load Stripe.js"))})}catch(s){n(s);return}})),$S},mNe=function(e,t,n){if(e===null)return null;var i=e.apply(void 0,t);return hNe(i,n),i},$Q=Promise.resolve().then(function(){return pNe(null)}),eK=!1;$Q.catch(function(r){eK||console.warn(r)});var tK=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];eK=!0;var i=Date.now();return $Q.then(function(s){return mNe(s,t,i)})};function jz(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function zz(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jz(Object(t),!0).forEach(function(n){nK(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):jz(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Bx(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bx=function(e){return typeof e}:Bx=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bx(r)}function nK(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function rK(r,e){return gNe(r)||vNe(r,e)||yNe(r,e)||wNe()}function gNe(r){if(Array.isArray(r))return r}function vNe(r,e){var t=r&&(typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"]);if(t!=null){var n=[],i=!0,s=!1,a,o;try{for(t=t.call(r);!(i=(a=t.next()).done)&&(n.push(a.value),!(e&&n.length===e));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return n}}function yNe(r,e){if(r){if(typeof r=="string")return Vz(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Vz(r,e)}}function Vz(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function wNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var al=function(e,t,n){var i=!!n,s=ir.useRef(n);ir.useEffect(function(){s.current=n},[n]),ir.useEffect(function(){if(!i||!e)return function(){};var a=function(){s.current&&s.current.apply(s,arguments)};return e.on(t,a),function(){e.off(t,a)}},[i,t,e,s])},aN=function(e){var t=ir.useRef(e);return ir.useEffect(function(){t.current=e},[e]),t.current},tv=function(e){return e!==null&&Bx(e)==="object"},_Ne=function(e){return tv(e)&&typeof e.then=="function"},bNe=function(e){return tv(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},Gz="[object Object]",SNe=function r(e,t){if(!tv(e)||!tv(t))return e===t;var n=Array.isArray(e),i=Array.isArray(t);if(n!==i)return!1;var s=Object.prototype.toString.call(e)===Gz,a=Object.prototype.toString.call(t)===Gz;if(s!==a)return!1;if(!s&&!n)return e===t;var o=Object.keys(e),l=Object.keys(t);if(o.length!==l.length)return!1;for(var c={},u=0;u<o.length;u+=1)c[o[u]]=!0;for(var f=0;f<l.length;f+=1)c[l[f]]=!0;var d=Object.keys(c);if(d.length!==o.length)return!1;var p=e,g=t,_=function(b){return r(p[b],g[b])};return d.every(_)},iK=function(e,t,n){return tv(e)?Object.keys(e).reduce(function(i,s){var a=!tv(t)||!SNe(e[s],t[s]);return n.includes(s)?(a&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),i):a?zz(zz({},i||{}),{},nK({},s,e[s])):i},null):null},sK="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Hz=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sK;if(e===null||bNe(e))return e;throw new Error(t)},xNe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sK;if(_Ne(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return Hz(i,t)})};var n=Hz(e,t);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},CNe=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},UT=ir.createContext(null);UT.displayName="ElementsContext";var aK=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},hP=function(e){var t=e.stripe,n=e.options,i=e.children,s=ir.useMemo(function(){return xNe(t)},[t]),a=ir.useState(function(){return{stripe:s.tag==="sync"?s.stripe:null,elements:s.tag==="sync"?s.stripe.elements(n):null}}),o=rK(a,2),l=o[0],c=o[1];ir.useEffect(function(){var d=!0,p=function(_){c(function(w){return w.stripe?w:{stripe:_,elements:_.elements(n)}})};return s.tag==="async"&&!l.stripe?s.stripePromise.then(function(g){g&&d&&p(g)}):s.tag==="sync"&&!l.stripe&&p(s.stripe),function(){d=!1}},[s,l,n]);var u=aN(t);ir.useEffect(function(){u!==null&&u!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,t]);var f=aN(n);return ir.useEffect(function(){if(l.elements){var d=iK(n,f,["clientSecret","fonts"]);d&&l.elements.update(d)}},[n,f,l.elements]),ir.useEffect(function(){CNe(l.stripe)},[l.stripe]),ir.createElement(UT.Provider,{value:l},i)};hP.propTypes={stripe:bn.any,options:bn.object};var MNe=function(e){var t=ir.useContext(UT);return aK(t,e)},oK=function(){var e=MNe("calls useElements()"),t=e.elements;return t};bn.func.isRequired;var lK=ir.createContext(null);lK.displayName="CustomCheckoutSdkContext";var ANe=function(e,t){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CustomCheckoutProvider> provider."));return e},TNe=ir.createContext(null);TNe.displayName="CustomCheckoutContext";bn.any,bn.shape({clientSecret:bn.string.isRequired,elementsOptions:bn.object}).isRequired;var oN=function(e){var t=ir.useContext(lK),n=ir.useContext(UT);if(t&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return t?ANe(t,e):aK(n,e)},ENe=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Ss=function(e,t){var n="".concat(ENe(e),"Element"),i=function(l){var c=l.id,u=l.className,f=l.options,d=f===void 0?{}:f,p=l.onBlur,g=l.onFocus,_=l.onReady,w=l.onChange,b=l.onEscape,C=l.onClick,M=l.onLoadError,A=l.onLoaderStart,k=l.onNetworksChange,O=l.onConfirm,R=l.onCancel,I=l.onShippingAddressChange,D=l.onShippingRateChange,E=oN("mounts <".concat(n,">")),B="elements"in E?E.elements:null,U="customCheckoutSdk"in E?E.customCheckoutSdk:null,V=ir.useState(null),X=rK(V,2),te=X[0],ee=X[1],ue=ir.useRef(null),ne=ir.useRef(null);al(te,"blur",p),al(te,"focus",g),al(te,"escape",b),al(te,"click",C),al(te,"loaderror",M),al(te,"loaderstart",A),al(te,"networkschange",k),al(te,"confirm",O),al(te,"cancel",R),al(te,"shippingaddresschange",I),al(te,"shippingratechange",D),al(te,"change",w);var oe;_&&(e==="expressCheckout"?oe=_:oe=function(){_(te)}),al(te,"ready",oe),ir.useLayoutEffect(function(){if(ue.current===null&&ne.current!==null&&(B||U)){var J=null;U?J=U.createElement(e,d):B&&(J=B.create(e,d)),ue.current=J,ee(J),J&&J.mount(ne.current)}},[B,U,d]);var q=aN(d);return ir.useEffect(function(){if(ue.current){var J=iK(d,q,["paymentRequest"]);J&&"update"in ue.current&&ue.current.update(J)}},[d,q]),ir.useLayoutEffect(function(){return function(){if(ue.current&&typeof ue.current.destroy=="function")try{ue.current.destroy(),ue.current=null}catch{}}},[]),ir.createElement("div",{id:c,className:u,ref:ne})},s=function(l){oN("mounts <".concat(n,">"));var c=l.id,u=l.className;return ir.createElement("div",{id:c,className:u})},a=t?s:i;return a.propTypes={id:bn.string,className:bn.string,onChange:bn.func,onBlur:bn.func,onFocus:bn.func,onReady:bn.func,onEscape:bn.func,onClick:bn.func,onLoadError:bn.func,onLoaderStart:bn.func,onNetworksChange:bn.func,onConfirm:bn.func,onCancel:bn.func,onShippingAddressChange:bn.func,onShippingRateChange:bn.func,options:bn.object},a.displayName=n,a.__elementType=e,a},xs=typeof window>"u",INe=ir.createContext(null);INe.displayName="EmbeddedCheckoutProviderContext";var cK=function(){var e=oN("calls useStripe()"),t=e.stripe;return t};Ss("auBankAccount",xs);var DM=Ss("card",xs);Ss("cardNumber",xs);Ss("cardExpiry",xs);Ss("cardCvc",xs);Ss("fpxBank",xs);Ss("iban",xs);Ss("idealBank",xs);Ss("p24Bank",xs);Ss("epsBank",xs);Ss("payment",xs);Ss("expressCheckout",xs);Ss("currencySelector",xs);Ss("paymentRequestButton",xs);Ss("linkAuthentication",xs);Ss("address",xs);Ss("shippingAddress",xs);Ss("paymentMethodMessaging",xs);Ss("affirmMessage",xs);Ss("afterpayClearpayMessage",xs);const LNe=({orderDetails:r,onContinueShopping:e,onViewOrder:t})=>{const[n,i]=P.useState(!1),s=P.useRef(null),a=()=>{const o=s.current;if(!o)return;const l=o.getContext("2d"),c=o.width=window.innerWidth,u=o.height=window.innerHeight,f=[],d=["#4CAF50","#2196F3","#FFC107","#E91E63","#9C27B0"];for(let _=0;_<150;_++)f.push({x:c/2,y:u/2,size:Math.random()*8+2,color:d[Math.floor(Math.random()*d.length)],vx:(Math.random()-.5)*15,vy:(Math.random()-.5)*15-3,gravity:.1+Math.random()*.1,rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*5});let p;const g=()=>{l.clearRect(0,0,c,u);let _=!1;f.forEach(w=>{w.x+=w.vx,w.y+=w.vy,w.vy+=w.gravity,w.rotation+=w.rotationSpeed,w.y<u&&w.x>0&&w.x<c&&(_=!0,l.save(),l.translate(w.x,w.y),l.rotate(w.rotation*Math.PI/180),l.fillStyle=w.color,Math.random()>.3?l.fillRect(-w.size/2,-w.size/2,w.size,w.size):(l.beginPath(),l.arc(0,0,w.size/2,0,Math.PI*2),l.fill()),l.restore())}),_?p=requestAnimationFrame(g):cancelAnimationFrame(p)};return g(),()=>{cancelAnimationFrame(p)}};return P.useEffect(()=>(setTimeout(()=>{i(!0),a()},100),()=>{s.current&&s.current.getContext("2d").clearRect(0,0,s.current.width,s.current.height)}),[]),j("div",{className:`payment-success-container ${n?"visible":""}`,children:[S("canvas",{ref:s,className:"confetti-canvas"}),j("div",{className:"success-card",children:[S("div",{className:"checkmark-container",children:j("svg",{className:"checkmark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52",children:[S("circle",{className:"checkmark-circle",cx:"26",cy:"26",r:"25",fill:"none"}),S("path",{className:"checkmark-check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})]})}),S("h2",{className:"success-title",children:"Payment Successful!"}),S("div",{className:"success-badge",children:S("span",{children:"Thank you for your purchase"})}),j("div",{className:"order-summary",children:[S("h3",{children:"Order Summary"}),j("div",{className:"order-details",children:[j("div",{className:"detail-row animate-item",children:[S("span",{children:"Order ID:"}),j("span",{children:["#",Math.floor(1e5+Math.random()*9e5)]})]}),j("div",{className:"detail-row animate-item",children:[S("span",{children:"Product:"}),S("span",{children:r.productName})]}),j("div",{className:"detail-row animate-item",children:[S("span",{children:"Size:"}),S("span",{children:r.size})]}),j("div",{className:"detail-row animate-item",children:[S("span",{children:"Quantity:"}),S("span",{children:r.quantity})]}),j("div",{className:"detail-row total animate-item",children:[S("span",{children:"Total Amount:"}),j("span",{className:"amount-highlight",children:["$",r.amount.toFixed(2)]})]})]})]}),S("div",{className:"success-message",children:S("p",{children:"Your order has been placed successfully. You will receive a confirmation email shortly."})}),j("div",{className:"success-actions",children:[j("button",{className:"action-button continue",onClick:e,children:[S(Om,{size:18}),"Continue Shopping"]}),j("button",{className:"action-button view-order",onClick:t,children:[S(Yre,{size:18}),"View Order"]})]})]})]})},NNe=tK("pk_test_51R0PouFKqSRL4Eus1nQLaIYdWsBCGb0rkCZeSXivdL1aI4zxn3bqQOGmXuxZRL9im9UTRmBZnujboCXn2Mwu97aG00QUvxvr91"),DNe=({formData:r,setFormData:e,amount:t,setPaymentSuccessful:n,product:i,selectedSize:s,quantity:a})=>{const o=cK(),l=oK(),[c,u]=P.useState(null),[f,d]=P.useState(!1),[p,g]=P.useState(null);P.useEffect(()=>{const b=JSON.parse(localStorage.getItem("currentUser"));if(!b||!b.uid){console.error("Authentication error: User must be logged in to buy a product.");return}c||fetch("https://styloftbackendnew-production.up.railway.app/payments/shop",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:b.uid,productId:i.id.toString(),amount:t,size:s,quantity:a,shippingAddress:r.address,shippingCity:r.city,shippingState:r.state,shippingZip:r.zipCode,shippingCountry:r.country})}).then(C=>C.json()).then(C=>u(C.clientSecret)).catch(C=>console.error("Error fetching clientSecret:",C))},[t,c,i,s,a,r]);const _=b=>{const{name:C,value:M}=b.target;e({...r,[C]:M})};return j("form",{onSubmit:async b=>{if(b.preventDefault(),d(!0),!o||!l||!c)return;const C=await o.confirmCardPayment(c,{payment_method:{card:l.getElement(DM),billing_details:{name:`${r.firstName} ${r.lastName}`,email:r.email,phone:r.phone,address:{line1:r.address,city:r.city,state:r.state,postal_code:r.zipCode,country:r.country}}}});C.error?g(C.error.message):n(!0),d(!1)},className:"order-form",children:[S("h3",{children:"Payment Info"}),j("div",{className:"form-group",children:[S("label",{children:"First Name *"}),S("input",{type:"text",name:"firstName",value:r.firstName,onChange:_,required:!0})]}),j("div",{className:"form-group",children:[S("label",{children:"Last Name *"}),S("input",{type:"text",name:"lastName",value:r.lastName,onChange:_,required:!0})]}),j("div",{className:"form-group",children:[S("label",{children:"Address *"}),S("input",{type:"text",name:"address",value:r.address,onChange:_,required:!0})]}),j("div",{className:"form-group row",children:[j("div",{children:[S("label",{children:"City *"}),S("input",{type:"text",name:"city",value:r.city,onChange:_,required:!0})]}),j("div",{children:[S("label",{children:"State *"}),S("input",{type:"text",name:"state",value:r.state,onChange:_,required:!0})]})]}),j("div",{className:"form-group row",children:[j("div",{children:[S("label",{children:"ZIP/Postal Code *"}),S("input",{type:"text",name:"zipCode",value:r.zipCode,onChange:_,required:!0})]}),j("div",{children:[S("label",{children:"Country *"}),j("select",{name:"country",value:r.country,onChange:_,required:!0,children:[S("option",{value:"SL",children:"Sri Lanka"}),S("option",{value:"US",children:"United States"})]})]})]}),j("div",{className:"form-group",children:[S("label",{children:"Email Address *"}),S("input",{type:"email",name:"email",value:r.email,onChange:_,required:!0})]}),j("div",{className:"form-group",children:[S("label",{children:"Phone *"}),S("input",{type:"tel",name:"phone",value:r.phone,onChange:_,required:!0})]}),S("div",{className:"card-element-container",children:S(DM,{className:"card-input"})}),p&&S("p",{className:"error",children:p}),S("button",{type:"submit",disabled:!o||f,className:"submit-button",children:f?"Processing...":"Pay Now"})]})},kNe=({product:r,selectedSize:e,quantity:t,setShowOrderForm:n})=>{const[i,s]=P.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:"SL"}),[a,o]=P.useState(!1),l=r.price*t;return a?S(LNe,{orderDetails:{productName:r.name,size:e,quantity:t,amount:l},onContinueShopping:()=>n(!1),onViewOrder:()=>n(!1)}):S("div",{className:"buy",children:S("div",{className:"buy-page-container",children:j("div",{className:"buy-page-form",children:[S("div",{className:"icon-container",children:S(Om,{className:"icon"})}),S("h2",{className:"page-title",children:"Checkout"}),j("div",{className:"product-details",children:[S("h3",{className:"product-name",children:r.name}),S("p",{className:"product-description",children:r.description}),j("p",{className:"product-price",children:["$",r.price]}),j("p",{className:"product-size",children:["Size: ",e]}),j("p",{className:"product-quantity",children:["Quantity: ",t]}),j("p",{className:"total-amount",children:["Total: $",l]})]}),S(hP,{stripe:NNe,children:S(DNe,{formData:i,setFormData:s,amount:l,setPaymentSuccessful:o,product:r,selectedSize:e,quantity:t})}),S("div",{className:"form-buttons",children:S("button",{type:"button",onClick:()=>n(!1),className:"back-button",children:"Back"})})]})})})},RNe=({product:r,onBack:e})=>{const[t,n]=P.useState("M"),[i,s]=P.useState(1),[a,o]=P.useState(!1),l=["XS","S","M","L","XL"],[c,u]=P.useState(!1),[f,d]=P.useState({firstName:"",lastName:"",email:"",address:"",city:"",zipCode:"",phone:"",shippingAddress:"",shippingCity:"",shippingState:"",shippingZip:"",shippingCountry:""}),p="https://www.imghippo.com/i/QMsd7261qms.jpg",g=r.image||p,_=()=>{console.log("Buying Now:",{product:r.description,size:t,quantity:i,shippingAddress:f.shippingAddress,shippingCity:f.shippingCity,shippingState:f.shippingState,shippingZip:f.shippingZip,shippingCountry:f.shippingCountry}),u(!0)},w=b=>{b>=1&&s(b)};return c?S(kNe,{product:r,selectedSize:t,quantity:i,formData:f,setFormData:d,setShowOrderForm:u}):S("div",{className:"buynow",children:S("div",{className:"buy-now-container",children:j("div",{className:"buy-now-content",children:[j("div",{className:"product-image-container",children:[!a&&S("div",{className:"image-placeholder",children:S("div",{className:"spinner"})}),S("img",{src:g,alt:r.name,className:`product-image ${a?"loaded":""}`,onLoad:()=>o(!0),onError:b=>{b.target.onerror=null,b.target.src=p,o(!0)}})]}),j("div",{className:"product-info",children:[S("h1",{className:"product-title",children:r.description}),j("p",{className:"product-price",children:["$",r.price]}),j("div",{className:"size-selection",children:[S("h3",{children:"Size"}),S("div",{className:"size-options",children:l.map(b=>S("button",{className:`size-button ${t===b?"active":""}`,onClick:()=>n(b),"aria-label":`Select size ${b}`,"aria-pressed":t===b,children:b},b))})]}),j("div",{className:"quantity-selection",children:[S("h3",{children:"Quantity"}),j("div",{className:"quantity-controls",children:[S("button",{onClick:()=>w(i-1),disabled:i<=1,"aria-label":"Decrease quantity",children:S(cie,{size:16})}),S("input",{type:"number",min:"1",value:i,onChange:b=>w(Math.max(1,Number.parseInt(b.target.value)||1)),"aria-label":"Quantity"}),S("button",{onClick:()=>w(i+1),"aria-label":"Increase quantity",children:S(nD,{size:16})})]})]}),j("button",{className:"buy-now-button",onClick:_,children:[S(Om,{size:18})," Buy Now"]})]})]})})})},PNe=({onFilterChange:r,categories:e,onSearch:t,isMobileOpen:n,onMobileClose:i})=>{const[s,a]=P.useState({categories:[],priceRange:{min:0,max:1e3}}),[o,l]=P.useState(""),[c,u]=P.useState("0"),[f,d]=P.useState("1000"),p=C=>{const M=s.categories.includes(C)?s.categories.filter(A=>A!==C):[...s.categories,C];a({...s,categories:M})},g=()=>{const C=Number.parseInt(c)||0,M=Number.parseInt(f)||1e3;a({...s,priceRange:{min:C,max:M}})},_=C=>{C.preventDefault(),t(o)},w=()=>{a({categories:[],priceRange:{min:0,max:1e3}}),u("0"),d("1000"),l(""),t("")};return P.useEffect(()=>{r(s)},[s,r]),j("div",{className:`filter-sidebar ${n?"mobile-open":""}`,children:[j("div",{className:"filter-header",children:[S("h3",{children:"Filters"}),S("button",{className:"clear-filters",onClick:w,children:"Clear All"}),S("button",{className:"mobile-close",onClick:i,children:S(Oc,{size:20})})]}),S("div",{className:"search-container",children:S("form",{onSubmit:_,children:j("div",{className:"search-input-wrapper",children:[S("input",{type:"text",placeholder:"Search products...",value:o,onChange:C=>l(C.target.value),className:"search-input"}),S("button",{type:"submit",className:"search-button",children:S(rD,{size:18})})]})})}),j("div",{className:"filter-section",children:[S("h4",{children:"Categories"}),S("div",{className:"category-options",children:e.map(C=>j("label",{className:"category-checkbox",children:[S("input",{type:"checkbox",checked:s.categories.includes(C),onChange:()=>p(C)}),S("span",{className:"checkbox-label",children:C})]},C))})]}),j("div",{className:"filter-section",children:[S("h4",{children:"Price Range"}),j("div",{className:"price-inputs",children:[j("div",{className:"price-input-group",children:[S("span",{className:"currency",children:"$"}),S("input",{type:"number",placeholder:"Min",value:c,onChange:C=>u(C.target.value),min:"0"})]}),S("span",{className:"price-separator",children:"-"}),j("div",{className:"price-input-group",children:[S("span",{className:"currency",children:"$"}),S("input",{type:"number",placeholder:"Max",value:f,onChange:C=>d(C.target.value),min:"0"})]}),S("button",{className:"apply-price",onClick:g,children:"Apply"})]})]})]})},ONe=({isOpen:r,onClose:e,onCheckout:t})=>{const[n,i]=P.useState([]),[s,a]=P.useState(!1);P.useEffect(()=>{const p=localStorage.getItem("shoppingCart");p&&i(JSON.parse(p))},[r]),P.useEffect(()=>{localStorage.setItem("shoppingCart",JSON.stringify(n))},[n]);const o=(p,g)=>{g<1||i(_=>_.map(w=>w.id===p?{...w,quantity:g}:w))},l=p=>{a(!0),setTimeout(()=>{i(g=>g.filter(_=>_.id!==p)),a(!1)},300)},c=()=>n.reduce((p,g)=>p+g.price*g.quantity,0),u=()=>c()*.1,f=()=>c()+u(),d="https://www.imghippo.com/i/QMsd7261qms.jpg";return S("div",{className:`shopping-cart-overlay ${r?"open":""}`,children:j("div",{className:"shopping-cart-container",children:[j("div",{className:"cart-header",children:[j("h3",{children:[S(Om,{size:20}),"Your Cart (",n.reduce((p,g)=>p+g.quantity,0)," items)"]}),S("button",{className:"close-cart",onClick:e,children:S(Oc,{size:20})})]}),S("div",{className:"cart-items",children:n.length===0?j("div",{className:"empty-cart",children:[S(Om,{size:48}),S("p",{children:"Your cart is empty"}),S("button",{className:"continue-shopping",onClick:e,children:"Continue Shopping"})]}):n.map(p=>j("div",{className:`cart-item ${s?"fade-out":""}`,children:[S("div",{className:"item-image",children:S("img",{src:p.image||d,alt:p.name})}),j("div",{className:"item-details",children:[S("h4",{className:"item-name",children:p.description}),j("p",{className:"item-price",children:["$",p.price.toFixed(2)]}),p.size&&j("p",{className:"item-size",children:["Size: ",p.size]}),j("div",{className:"quantity-controls",children:[S("button",{onClick:()=>o(p.id,p.quantity-1),disabled:p.quantity<=1,children:"-"}),S("span",{children:p.quantity}),S("button",{onClick:()=>o(p.id,p.quantity+1),children:"+"})]})]}),S("button",{className:"remove-item",onClick:()=>l(p.id),"aria-label":"Remove item",children:S(x1,{size:18})})]},p.id))}),n.length>0&&j("div",{className:"cart-summary",children:[j("div",{className:"summary-row",children:[S("span",{children:"Subtotal"}),j("span",{children:["$",c().toFixed(2)]})]}),j("div",{className:"summary-row",children:[S("span",{children:"Tax (10%)"}),j("span",{children:["$",u().toFixed(2)]})]}),j("div",{className:"summary-row total",children:[S("span",{children:"Total"}),j("span",{children:["$",f().toFixed(2)]})]}),S("button",{className:"checkout-button",onClick:t,children:"Proceed to Checkout"})]})]})})},FNe=({productId:r,reviews:e=[],averageRating:t=0,totalReviews:n=0})=>{const[i,s]=P.useState(!1),[a,o]=P.useState(0),[l,c]=P.useState(0),[u,f]=P.useState(""),[d,p]=P.useState([]),g=M=>{M.preventDefault(),console.log("Submitting review:",{productId:r,rating:a,comment:u}),o(0),f(""),s(!1),alert("Thank you for your review!")},_=M=>{p(A=>A.includes(String(M))?A.filter(k=>k!==String(M)):[...A,String(M)])},w=M=>{console.log("Marked review as helpful:",M);const A=JSON.parse(localStorage.getItem("helpfulReviews")||"[]");A.includes(M)||localStorage.setItem("helpfulReviews",JSON.stringify([...A,M]))},b=(M,A=!1)=>Array(5).fill(0).map((k,O)=>{const R=O+1,I=A?(l||a)>=R:M>=R;return S(Fm,{size:A?24:16,className:`star-icon ${I?"filled":""}`,fill:I?"currentColor":"none",onClick:A?()=>o(R):void 0,onMouseEnter:A?()=>c(R):void 0,onMouseLeave:A?()=>c(0):void 0},O)}),C=M=>d.includes(String(M));return j("div",{className:"product-reviews",children:[j("div",{className:"reviews-header",children:[S("h3",{children:"Customer Reviews"}),j("div",{className:"rating-summary",children:[j("div",{className:"average-rating",children:[S("span",{className:"rating-number",children:t.toFixed(1)}),S("div",{className:"stars-container",children:b(t)})]}),j("span",{className:"review-count",children:["Based on ",n," reviews"]})]}),j("button",{className:"write-review-button",onClick:()=>s(!i),children:[S(WM,{size:16}),"Write a Review"]})]}),i&&S("div",{className:"review-form-container",children:j("form",{onSubmit:g,className:"review-form",children:[S("h4",{children:"Write Your Review"}),j("div",{className:"rating-input",children:[S("label",{children:"Your Rating"}),S("div",{className:"stars-input",children:b(0,!0)})]}),j("div",{className:"comment-input",children:[S("label",{htmlFor:"review-comment",children:"Your Review"}),S("textarea",{id:"review-comment",value:u,onChange:M=>f(M.target.value),placeholder:"Share your experience with this product...",required:!0,rows:4})]}),j("div",{className:"form-actions",children:[S("button",{type:"button",onClick:()=>s(!1),className:"cancel-button",children:"Cancel"}),S("button",{type:"submit",className:"submit-button",disabled:a===0||!u.trim(),children:"Submit Review"})]})]})}),S("div",{className:"reviews-list",children:e.length===0?S("div",{className:"no-reviews",children:S("p",{children:"No reviews yet. Be the first to review this product!"})}):e.map(M=>j("div",{className:"review-item",children:[j("div",{className:"review-header",children:[j("div",{className:"reviewer-info",children:[S("div",{className:"avatar",children:M.userAvatar?S("img",{src:M.userAvatar||"/placeholder.svg",alt:M.userName}):S("div",{className:"avatar-placeholder",children:M.userName.charAt(0).toUpperCase()})}),j("div",{children:[S("div",{className:"reviewer-name",children:M.userName}),S("div",{className:"review-date",children:M.date})]})]}),S("div",{className:"review-rating",children:b(M.rating)})]}),S("div",{className:`review-content ${C(M.id)?"expanded":""}`,children:S("p",{children:M.comment})}),M.comment.length>150&&!C(M.id)&&S("button",{className:"read-more",onClick:()=>_(M.id),children:"Read more"}),j("div",{className:"review-actions",children:[j("button",{className:`helpful-button ${M.userHasMarkedHelpful?"active":""}`,onClick:()=>w(M.id),disabled:M.userHasMarkedHelpful,children:[S(Gie,{size:14}),"Helpful (",M.helpful,")"]}),j("button",{className:"report-button",children:[S(Xre,{size:14}),"Report"]})]})]},M.id))})]})},ex=8,BNe=()=>{const r=_3e(),e=Ez(q=>q.products.filteredProducts),t=Ez(q=>q.products.products),[n,i]=P.useState(1),[s,a]=P.useState(null),[o,l]=P.useState(!0),[c,u]=P.useState(!1),[f,d]=P.useState(""),[p,g]=P.useState({categories:[],priceRange:{min:0,max:1e3}}),[_,w]=P.useState(!1),[b,C]=P.useState(!1),[M,A]=P.useState("newest"),k=t?[...new Set(t.map(q=>q.category))].filter(Boolean):[],O=async(q={},J="",ie="newest")=>{l(!0);try{const he=new URLSearchParams;q.categories&&q.categories.length>0&&he.append("categories",q.categories.join(",")),q.priceRange&&(he.append("minPrice",q.priceRange.min.toString()),he.append("maxPrice",q.priceRange.max.toString())),J&&he.append("search",J),he.append("sort",ie);const ge=await(await fetch(`https://styloftbackendnew-production.up.railway.app/shop?${he.toString()}`)).json();r(oNe(ge))}catch(he){console.error("Error fetching products:",he)}finally{l(!1)}};P.useEffect(()=>{O()},[]),P.useEffect(()=>{O(p,f,M)},[p,f,M]);const R=n*ex,I=R-ex,D=e.slice(I,R),E=Math.ceil(e.length/ex),B=q=>{a(q),window.scrollTo({top:0,behavior:"smooth"})},U=q=>{if(q===n)return;u(!0),setTimeout(()=>{i(q),u(!1)},300);const J=document.querySelector(".product-grid");J&&J.scrollIntoView({behavior:"smooth"})},V=()=>{a(null)},X=q=>{g(q)},te=q=>{d(q)},ee=q=>{A(q.target.value)},ue=(q,J="M",ie=1)=>{const he=JSON.parse(localStorage.getItem("shoppingCart")||"[]"),$=he.findIndex(ge=>ge.id===q.id&&ge.size===J);$>=0?he[$].quantity+=ie:he.push({id:q.id,name:q.name,description:q.description,price:q.price,image:q.image,size:J,quantity:ie}),localStorage.setItem("shoppingCart",JSON.stringify(he)),w(!0)},ne=()=>{C(!b)},oe=[{id:1,userId:101,userName:"John D.",rating:5,date:"2023-12-15",comment:"Absolutely love this product! The quality is exceptional and it fits perfectly. Would definitely recommend to anyone looking for a stylish and comfortable option.",helpful:12},{id:2,userId:102,userName:"Sarah M.",rating:4,date:"2023-11-28",comment:"Great product overall. The material is high quality and the design is beautiful. Took off one star because the color was slightly different than pictured.",helpful:5}];return j("div",{className:"style-market-page",children:[!s&&S(Q1e,{}),S("div",{className:"container",children:s?j("div",{className:"product-detail-view",children:[j("button",{className:"back-button",onClick:V,children:[S(pL,{size:18})," Back to Products"]}),S("div",{className:"product-detail-grid",children:j("div",{className:"product-info-container",children:[S("div",{className:"product-header",children:S("div",{className:"product-actions",children:j("button",{className:"add-to-cart-button",onClick:()=>ue(s),children:[S(Om,{size:18})," Add to Cart"]})})}),S(RNe,{product:s,onBack:V}),S(FNe,{productId:s.id,reviews:oe,averageRating:4.5,totalReviews:2})]})})]}):j(Br,{children:[j("div",{className:"market-header",children:[S("h2",{children:"New Arrivals"}),j("div",{className:"market-controls",children:[j("button",{className:"filter-toggle",onClick:ne,children:[S(Rie,{size:18})," Filters"]}),S("div",{className:"sort-container",children:j("select",{className:"sort-select",value:M,onChange:ee,children:[S("option",{value:"newest",children:"Newest"}),S("option",{value:"price-low",children:"Price: Low to High"}),S("option",{value:"price-high",children:"Price: High to Low"})]})}),S("button",{className:"cart-button",onClick:()=>w(!0),children:S(Om,{size:20})})]})]}),j("div",{className:"market-content",children:[S("div",{className:"market-sidebar",children:S(PNe,{onFilterChange:X,categories:k,onSearch:te,isMobileOpen:b,onMobileClose:()=>C(!1)})}),S("div",{className:"market-main",children:o?j("div",{className:"loading-container",children:[S(oV,{className:"loading-spinner"}),S("p",{children:"Loading products..."})]}):S(Br,{children:e.length===0?j("div",{className:"no-results",children:[S("p",{children:"No products found matching your criteria."}),S("button",{onClick:()=>{g({categories:[],priceRange:{min:0,max:1e3}}),d("")},className:"clear-filters-button",children:"Clear Filters"})]}):j(Br,{children:[S("div",{className:`product-grid ${c?"fade-out":"fade-in"}`,children:D.map(q=>S("div",{className:"product-card-wrapper",children:S(cNe,{product:q,onExplore:()=>B(q)})},q.id))}),e.length>ex&&j("div",{className:"pagination",children:[j("button",{className:"pagination-btn",onClick:()=>U(n-1),disabled:n===1,"aria-label":"Previous page",children:[S(pL,{size:18}),S("span",{children:"Previous"})]}),S("div",{className:"pagination-info",children:j("span",{children:["Page ",n," of ",E]})}),j("button",{className:"pagination-btn",onClick:()=>U(n+1),disabled:R>=e.length,"aria-label":"Next page",children:[S("span",{children:"Next"}),S(HM,{size:18})]})]})]})})})]})]})}),S(ONe,{isOpen:_,onClose:()=>w(!1),onCheckout:()=>{w(!1),alert("Proceeding to checkout...")}})]})};function UNe(){return S("div",{children:S(BNe,{})})}const jNe=[{id:"free",name:"Bronze",price:0,description:"Perfect for getting started with Styloft",features:["Can explore designs","Social media access","User account creation","Limited access to some features","Maintain your future career"],buttonText:"Get Started",period:"Free forever",icon:S(Lie,{className:"plan-icon plan-icon-bronze"}),color:"bronze"},{id:"pro",name:"Silver",price:3,description:"Advanced features for serious designers",features:["Many advanced features","Compete with other athletes","Exclusive content access","Personalized design suggestions","Advanced analytics dashboard"],popular:!0,buttonText:"Start Silver Plan",period:"per month",icon:S(ow,{className:"plan-icon plan-icon-silver"}),color:"silver"},{id:"commercial",name:"Gold",price:20,description:"Everything you need for professional work",features:["Create your own contests","Collaborate with professionals","Exclusive branding tools","Enhanced marketing options","Advanced analytics dashboard"],buttonText:"Start Gold Plan",period:"per month",icon:S(ax,{className:"plan-icon plan-icon-gold"}),color:"gold"}],zNe=()=>{const r=Yc(),e=t=>{t.price>0?r(`/payment/${t.id}`):r("/signup")};return j("div",{className:"subscription-container",children:[j("div",{className:"subscription-header animate-fade-down",children:[S("h1",{className:"subscription-title",children:"Choose Your Plan"}),S("p",{className:"subscription-subtitle",children:"Select the perfect plan for your design needs. Upgrade or downgrade anytime."})]}),S("div",{className:"plans-grid",children:jNe.map((t,n)=>j("div",{className:`plan-card plan-card-${t.color} ${t.popular?"plan-card-popular":""} animate-fade-up`,style:{animationDelay:`${n*.2}s`},children:[t.popular&&S("span",{className:"popular-badge animate-scale-in",children:"Popular"}),j("div",{className:"plan-header",children:[j("div",{className:"plan-header-content",children:[S("div",{className:"animate-bounce-in",style:{animationDelay:`${.3+n*.1}s`},children:t.icon}),S("h3",{className:"plan-name",children:t.name})]}),S("p",{className:"plan-description",children:t.description})]}),j("div",{className:"plan-content",children:[j("div",{className:"plan-price animate-fade-in",style:{animationDelay:`${.4+n*.1}s`},children:[j("span",{className:"price-amount",children:["$",t.price]}),j("span",{className:"price-period",children:["/",t.period]})]}),S("ul",{className:"feature-list",children:t.features.map((i,s)=>j("li",{className:"feature-item animate-slide-in",style:{animationDelay:`${.5+s*.1+n*.1}s`},children:[S("div",{className:"animate-scale-in",style:{animationDelay:`${.6+s*.1+n*.1}s`},children:S(GM,{className:`feature-icon feature-icon-${t.color}`})}),S("span",{className:"feature-text",children:i})]},i))})]}),S("div",{className:"plan-footer",children:S("button",{onClick:()=>e(t),className:`plan-button plan-button-${t.color}`,children:t.buttonText})})]},t.id))})]})};function VNe(){return S("div",{children:S(zNe,{})})}const GNe=()=>{const[r,e]=P.useState(i_),[t,n]=P.useState(AC),[i,s]=P.useState(""),[a,o]=P.useState("Experienced consultant with expertise in fintech and business development."),[l,c]=P.useState(!1);return P.useEffect(()=>{const f=JSON.parse(localStorage.getItem("currentUser"));f&&f.displayName&&s(f.displayName),f.photoURL&&e(f.photoURL),f.coverPhotoURL&&n(f.coverPhotoURL),f.aboutText&&o(f.aboutText)},[]),j("div",{className:"DashBoardProfile-container",children:[j("div",{className:"DashBoardProfile-header",children:[S("div",{className:"DashBoardyProfileCover-photo",children:S("img",{src:t,alt:"Cover",className:"DashBoardProfileCover-img"})}),j("div",{className:"DashBoardProfile-details",children:[S("div",{className:"DashBoardProfile-pic-container",children:S("img",{src:r,alt:"Profile",className:"DashBoardProfile-pic"})}),S("div",{className:"DashBoardProfileUser-info",children:S("h2",{children:i})})]})]}),j("div",{className:"DashBoardProfile-about-section",children:[S("h3",{children:"About"}),l?j(Br,{children:[S("textarea",{className:"DashBoardTesyarea",value:a,onChange:f=>o(f.target.value)}),S("button",{onClick:async()=>{c(!1);const f=JSON.parse(localStorage.getItem("currentUser"));if(f&&f.uid)try{await fetch("https://styloftbackendnew-production.up.railway.app/user/updateAbout",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:f.uid,aboutText:a})}),f.aboutText=a,localStorage.setItem("currentUser",JSON.stringify(f))}catch(d){console.error("Error updating about text:",d)}},className:"DashboardSave-button",children:"Save"})]}):j(Br,{children:[S("p",{children:a}),S("button",{onClick:()=>c(!0),className:"DashBoardEdit-button",children:"Edit"})]})]})]})};function HNe(){return j("div",{className:"collaboration-card",children:[j("div",{className:"collaboration-cardHeader",children:[S("h3",{className:"collaboration-cardTitle",children:"Collaboration Requests"}),j("button",{className:"collaboration-viewAllBtn",children:["View All",j("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S("line",{x1:"7",y1:"17",x2:"17",y2:"7"}),S("polyline",{points:"7 7 17 7 17 17"})]})]})]}),S("div",{className:"collaboration-cardContent",children:S("div",{className:"collaboration-requestList",children:[{id:1,name:"Alex Johnson",role:"Fashion Brand",avatar:"/placeholder.svg?height=40&width=40",initials:"AJ",message:"Would like to collaborate on a summer collection",date:"2 days ago",status:"pending"},{id:2,name:"Sarah Williams",role:"Textile Designer",avatar:"/placeholder.svg?height=40&width=40",initials:"SW",message:"Interested in co-designing eco-friendly fabrics",date:"5 days ago",status:"pending"},{id:3,name:"Michael Chen",role:"Photographer",avatar:"/placeholder.svg?height=40&width=40",initials:"MC",message:"Looking for designs to feature in an upcoming magazine",date:"1 week ago",status:"accepted"}].map(e=>j("div",{className:"collaboration-requestItem",children:[j("div",{className:"collaboration-requestHeader",children:[j("div",{className:"collaboration-requestUser",children:[S("div",{className:"collaboration-userAvatar",children:S("img",{src:e.avatar||"/placeholder.svg",alt:e.name})}),j("div",{className:"collaboration-userInfo",children:[S("h4",{className:"collaboration-userName",children:e.name}),S("p",{className:"collaboration-userRole",children:e.role})]})]}),S("div",{className:"collaboration-requestDate",children:S("span",{children:e.date})})]}),S("p",{className:"collaboration-requestMessage",children:e.message}),S("div",{className:"collaboration-requestActions",children:e.status==="pending"?j(Br,{children:[S("button",{className:"collaboration-acceptBtn",children:"Accept"}),S("button",{className:"collaboration-declineBtn",children:"Decline"})]}):S("span",{className:"collaboration-statusBadge",children:e.status==="accepted"?"Accepted":"Declined"})})]},e.id))})})]})}function WNe(){return j("div",{className:"designOutfit",children:[S("h3",{className:"title",children:"Design Your Outfit"}),S("p",{className:"description",children:"Use our intuitive design tools to create custom clothing that stands out."}),S("div",{className:"optionsContainer",children:[{id:1,title:"Create from Scratch",description:"Start with a blank canvas and bring your vision to life",icon:j("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S("circle",{cx:"13.5",cy:"6.5",r:"2.5"}),S("circle",{cx:"17.5",cy:"10.5",r:"2.5"}),S("circle",{cx:"8.5",cy:"7.5",r:"2.5"}),S("circle",{cx:"6.5",cy:"12.5",r:"2.5"}),S("path",{d:"M12 22v-6"}),S("path",{d:"M8 22h8"}),S("path",{d:"M17.5 13a9 9 0 0 0-11 0"})]})},{id:2,title:"Use Templates",description:"Choose from our curated collection of design templates",icon:j("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S("path",{d:"M20.38 3.46 16 2a4 4 0 0 1 1.46 3.46"}),S("path",{d:"M9.69 2.49 11 7 9.69 2.49Z"}),S("path",{d:"M14.31 2.49 13 7l1.31-4.51Z"}),S("path",{d:"M16 2c0 2.6-1.2 5-3 5s-3-2.4-3-5"}),S("path",{d:"M2 21c0-3 1.85-5.7 4.8-7l.2-.1"}),S("path",{d:"M22 21c0-3-1.85-5.7-4.8-7l-.2-.1"}),S("path",{d:"M12 7v5"}),S("path",{d:"m9 9 3 3 3-3"}),S("path",{d:"M9 17h6"})]})},{id:3,title:"AI-Assisted Design",description:"Let our AI help you generate unique design concepts",icon:j("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"}),S("path",{d:"M5 3v4"}),S("path",{d:"M19 17v4"}),S("path",{d:"M3 5h4"}),S("path",{d:"M17 19h4"})]})}].map(e=>j("div",{className:"optionCard",children:[S("div",{className:"optionIcon",children:e.icon}),S("h4",{className:"optionTitle",children:e.title}),S("p",{className:"optionDescription",children:e.description})]},e.id))}),S("button",{className:"startButton",children:"Start Designing"})]})}function YNe(){const[r,e]=P.useState([]),[t,n]=P.useState(!0),[i,s]=P.useState(null),a=Yc();P.useEffect(()=>{o()},[]);const o=async()=>{try{n(!0);const d=JSON.parse(localStorage.getItem("currentUser"));if(!d||!d.uid)throw new Error("User not logged in");const p=await fetch("https://styloftbackendnew-production.up.railway.app/contest");if(!p.ok)throw new Error("Failed to fetch contests");const _=(await p.json()).filter(w=>new Date(w.deadline)>new Date);e(_)}catch(d){console.error("Error fetching ongoing contests:",d),s(d.message)}finally{n(!1)}},l=d=>{const p=new Date(d),g=new Date,_=p.getTime()-g.getTime(),w=Math.ceil(_/(1e3*3600*24));return w>0?w:0},c=d=>{const p=l(d),_=100-Math.min(100,p/30*100);return Math.round(_)},u=d=>{a(`/contest/${d}`)},f=d=>{const p={year:"numeric",month:"short",day:"numeric"};return new Date(d).toLocaleDateString("en-US",p)};return t?j("div",{className:"ongoing-challenges",children:[S("div",{className:"card-header",children:S("h3",{className:"card-title",children:"Ongoing Challenges"})}),j("div",{className:"card-content loading-content",children:[S("div",{className:"loading-spinner"}),S("p",{children:"Loading challenges..."})]})]}):i?j("div",{className:"ongoing-challenges",children:[S("div",{className:"card-header",children:S("h3",{className:"card-title",children:"Ongoing Challenges"})}),S("div",{className:"card-content error-content",children:j("p",{children:["Error loading challenges: ",i]})})]}):j("div",{className:"ongoing-challenges",children:[j("div",{className:"card-header",children:[S("h3",{className:"card-title",children:"Ongoing Challenges"}),j("button",{className:"view-all-btn",onClick:()=>a("/contest"),children:["View All",j("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S("line",{x1:"7",y1:"17",x2:"17",y2:"7"}),S("polyline",{points:"7 7 17 7 17 17"})]})]})]}),S("div",{className:"card-content",children:r.length===0?j("div",{className:"empty-state",children:[S("p",{children:"No active challenges found."}),S("button",{className:"explore-btn",onClick:()=>a("/contest"),children:"Explore Contests"})]}):S("div",{className:"challenge-list",children:r.slice(0,3).map(d=>j("div",{className:"challenge-item",children:[j("div",{className:"challenge-header",children:[S("h4",{className:"challenge-title",children:d.title}),j("div",{className:"challenge-prize",children:[j("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),S("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),S("path",{d:"M4 22h16"}),S("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),S("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),S("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]}),j("span",{children:["$",d.prize]})]})]}),j("div",{className:"challenge-info",children:[S("div",{className:"challenge-deadline",children:j("span",{children:["Deadline: ",f(d.deadline)]})}),S("div",{className:"challenge-days-left",children:j("span",{children:[l(d.deadline)," days left"]})})]}),j("div",{className:"challenge-progress",children:[j("div",{className:"progress-info",children:[S("span",{children:"Count Down"}),j("span",{children:[c(d.deadline),"%"]})]}),S("div",{className:"progress-bar-container",children:S("div",{className:"progress-bar",style:{width:`${c(d.deadline)}%`}})})]}),S("button",{className:"continue-btn",onClick:()=>u(d.id),children:"Continue Design"})]},d.id))})})]})}const JNe=()=>{const[r,e]=P.useState([]),[t,n]=P.useState(!0),[i,s]=P.useState("");P.useEffect(()=>{a()},[]);const a=async()=>{try{const o=JSON.parse(localStorage.getItem("currentUser"));if(!o||!o.uid)throw new Error("User not logged in");const l=await fetch(`https://styloftbackendnew-production.up.railway.app/payments/user-orders/${o.uid}`);if(!l.ok)throw new Error("Failed to fetch purchase history");const c=await l.json();e(c)}catch(o){console.error("Error fetching purchase history:",o),s("Error fetching purchase history. Please try again.")}finally{n(!1)}};return S("div",{className:"purchase-history",children:t?S("p",{children:"Loading purchase history..."}):i?S("p",{children:i}):j("table",{children:[S("thead",{children:j("tr",{children:[S("th",{children:"Product Name"}),S("th",{children:"Amount"}),S("th",{children:"Purchase Date"})]})}),S("tbody",{children:r.length===0?S("tr",{children:S("td",{colSpan:"3",children:"No purchase history available"})}):r.map((o,l)=>j("tr",{children:[S("td",{children:o.productDescription||"N/A"}),S("td",{children:o.amount?`$${o.amount.toFixed(2)}`:"N/A"}),S("td",{children:o.createdAt?new Date(o.createdAt).toLocaleDateString():"Invalid Date"})]},l))})]})})};function XNe(){return S("div",{className:"saved-design",children:j("div",{className:"card",children:[j("div",{className:"cardHeader",children:[S("h3",{className:"cardTitle",children:"Saved Designs"}),j("button",{className:"viewAllBtn",children:["View All",j("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S("line",{x1:"7",y1:"17",x2:"17",y2:"7"}),S("polyline",{points:"7 7 17 7 17 17"})]})]})]}),S("div",{className:"cardContent",children:S("div",{className:"designList",children:[{id:1,title:"Vintage Inspired Blouse",designer:"Emma Thompson",image:"/placeholder.svg?height=80&width=80",saved:"Mar 15, 2023",liked:!0},{id:2,title:"Contemporary Denim Collection",designer:"Marcus Lee",image:"/placeholder.svg?height=80&width=80",saved:"Mar 10, 2023",liked:!1},{id:3,title:"Sustainable Activewear Set",designer:"Olivia Green",image:"/placeholder.svg?height=80&width=80",saved:"Mar 5, 2023",liked:!0}].map(e=>j("div",{className:"designItem",children:[S("div",{className:"designImage",children:S("img",{src:e.image||"/placeholder.svg",alt:e.title,className:"image"})}),j("div",{className:"designDetails",children:[S("h4",{className:"designTitle",children:e.title}),j("p",{className:"designerName",children:["by ",e.designer]}),j("div",{className:"designInfo",children:[j("div",{className:"savedInfo",children:[S("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:S("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),j("span",{children:["Saved ",e.saved]})]}),S("button",{className:`likeBtn ${e.liked?"liked":""}`,children:S("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:e.liked?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:S("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})})]})]})]},e.id))})})]})})}function uK(){const[r,e]=P.useState({userId:"",name:"",description:"",price:"",image:"",shippingAddress:"",shippingZip:"",state:"",city:""}),[t,n]=P.useState(null),[i,s]=P.useState(!1),[a,o]=P.useState(""),[l,c]=P.useState(!1),[u,f]=P.useState(null),d=P.useRef(null);P.useEffect(()=>{const M=JSON.parse(localStorage.getItem("currentUser"));M&&M.uid?e(A=>({...A,userId:M.uid})):o("User not logged in. Please log in to continue.")},[]);const p=M=>{const{name:A,value:k}=M.target;e(O=>({...O,[A]:k}))},g=M=>{M.preventDefault(),M.stopPropagation(),M.type==="dragenter"||M.type==="dragover"?c(!0):M.type==="dragleave"&&c(!1)},_=M=>{M.preventDefault(),M.stopPropagation(),c(!1),M.dataTransfer.files&&M.dataTransfer.files[0]&&b(M.dataTransfer.files[0])},w=M=>{M.target.files&&M.target.files[0]&&b(M.target.files[0])},b=async M=>{if(!M)return;if(!["image/jpeg","image/png","image/jpg"].includes(M.type)){o("Invalid file type. Please upload a JPG or PNG image.");return}n(URL.createObjectURL(M)),s(!0),o("");const k=new FormData;k.append("file",M),k.append("upload_preset","Styloft");try{const R=await(await fetch("https://api.cloudinary.com/v1_1/ds0xdh85j/image/upload",{method:"POST",body:k})).json();R.secure_url?e(I=>({...I,image:R.secure_url})):o("Image upload failed. Try again.")}catch{o("Error uploading image. Check your network.")}finally{s(!1)}};return j("div",{className:"add-shop-container",children:[S("h2",{className:"add-shop-title",children:"Create a New Shop"}),u==="success"&&j("div",{className:"success-message",children:[S(GM,{className:"success-icon"}),S("p",{children:"Shop created successfully!"})]}),j("form",{className:"add-shop-form",onSubmit:async M=>{if(M.preventDefault(),f(null),!r.userId||!r.name||!r.description||!r.price||!r.image){o("Please fill all fields before submitting.");return}try{const A=await fetch("https://styloftbackendnew-production.up.railway.app/shop",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),k=await A.json();A.ok?(f("success"),e({userId:r.userId,name:"",description:"",price:"",image:""}),n(null),setTimeout(()=>f(null),3e3)):(f("error"),o(`Failed to create shop: ${k.message}`))}catch{f("error"),o("An error occurred while submitting the form.")}},children:[j("div",{className:"form-group",children:[S("label",{htmlFor:"name",className:"form-label",children:"Designer Name"}),S("input",{type:"text",id:"name",name:"name",value:r.name,onChange:p,className:"form-input",required:!0})]}),j("div",{className:"form-group",children:[S("label",{htmlFor:"description",className:"form-label",children:"Description"}),S("textarea",{id:"description",name:"description",value:r.description,onChange:p,className:"form-textarea",required:!0})]}),j("div",{className:"form-group",children:[S("label",{htmlFor:"price",className:"form-label",children:"Price ($)"}),S("input",{type:"number",id:"price",name:"price",value:r.price,onChange:p,className:"form-input",min:"0",step:"0.01",required:!0})]}),j("div",{className:"form-group",children:[S("label",{className:"form-label",children:"Shop Image"}),j("div",{className:`image-upload-area ${l?"active":""}`,onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:_,onClick:()=>d.current.click(),children:[S("input",{ref:d,type:"file",id:"image",name:"image",onChange:w,className:"hidden-input",accept:"image/png, image/jpeg"}),j("div",{className:"upload-content",children:[S(JM,{className:"upload-icon"}),S("p",{className:"upload-text",children:t?"Change image":"Upload shop image"}),S("p",{className:"upload-subtext",children:"Drag and drop or click to browse"})]})]})]}),t&&S("div",{className:"image-preview",children:S("img",{src:t||"/placeholder.svg",alt:"Preview",className:"preview-img"})}),S("button",{type:"submit",className:`submit-button ${u==="success"?"success":u==="error"?"error":""}`,disabled:i,children:i?"Uploading...":u==="success"?"Created Successfully!":"Create Shop"}),a&&j("div",{className:"error-message",children:[S(sV,{className:"error-icon"}),S("p",{children:a})]})]})]})}function QNe(){const[r,e]=P.useState(!1),t=()=>{e(!0)},n=()=>{e(!1)};return r?j("div",{className:"add-shop-page",children:[S("button",{onClick:n,className:"back-button",children:" Back to Dashboard"}),S(uK,{})]}):S("div",{className:"dashboard-container",children:j("div",{className:"dashboard-content",children:[j("div",{className:"dashboard-column main-column",children:[j("div",{className:"dashboard-section",children:[S(GNe,{}),S("div",{className:"profile-action-container",children:S("button",{onClick:t,className:"add-marketplace-button",children:"Add Item in Marketplace"})})]}),S("div",{className:"dashboard-section",children:S(WNe,{})})]}),j("div",{className:"dashboard-column",children:[S("div",{className:"dashboard-section challenges-section",children:S(YNe,{})}),S("div",{className:"dashboard-section",children:S(HNe,{})})]}),j("div",{className:"dashboard-column",children:[S("div",{className:"dashboard-section",children:S(JNe,{})}),S("div",{className:"dashboard-section",children:S(XNe,{})})]})]})})}const KNe="/assets/brandix-DbFnK0sd.png",qNe="/assets/Hirdaramani-DQFJhEDG.png",ZNe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAArlBMVEX////sHCSAgYR9foHrAAB7fH9wcXWkpad2d3vV1tft7e68vL760NGen6H5+fl0dXiWl5mNjpDrAA+0tbbk5OX1nZ+HiIvOzs/Hx8jz8/Pb3NyZmpzsERvAwcKvsLGRkpT+8/TsCxf2pqj83+D0j5H72Nn5ycrvS1D4vr/yeHvtLTT0lZjwXmLuPUL95+f4u7zzg4XxaGz3q63sJCvye37vU1jxcHPuOD7sISlnaWx8nj5WAAALjElEQVR4nO2bd7+bthrHbbAQhoDApoAHcE7SNmlm0533/8auBtoCO7cZ93zu8/2nOQyhn8az5G42AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/0P8snbzxbfqxVfkxe7H5ZvPdt+uI1+N54dliT/tds++ZV++Dh+v290P4VsvdtvHlQl+Kly32+3ueejO+wO99fpb9+eLQ+eJSfzNv/Nw5eLff/s+fVl+YxNFhXxwbwiB20NA+9Pir8dtUOLD71zg9vr2+/Try/H7dmb3s3m5/Ps6Xz+U36trX4b3u21Q4rvHsPKnxwetcGv4vpdK4Pbx1+/YvS/AH1oKlfjTfPXPg3H1ifuL19utL/Htwbr4pP3Fw25rS2SR9kdL4PYQDAeeCq9shY/vHmiu4ai+/vm9e/lv+PXR0vL6gV5yBNKJ/d69LE9Nc+Y02ekznZe1Da/bh40OAQyFr9zXcBxxEL7R/ikVD0bpPth1cTu+LDbQDLiNUxMU13ho7hVobcPrP0yg5T/mtfvHksKIZOsfUA+GFR7R3MxCj3NEBUUucYzSKNiez8+Gmuv1va96JtjxeH30GU06PxehUI9KOcNxEXq7jPgAxAiJyRP/RUIzOd6l8EdjRR6kU3h3dQXu3FoGUxgX7Pvpea39ij2H6yWFOWth4lMcWgstk4JiPOzZ9hNkzT6f+MCQ1S9LXmoxyttbsmfxbobMFKK+YP2vV5o/p3whtwsKSzFEAwpPYs/eTvtAuw17Ma7uEGguSB1+PvOW6fVlSOGQkcUNJmj5FG7iBYVMWtQKoYENXfOPBBvu+Nicbis0tRx0ueLgKtzuHgIK89mOLDbfpaIfSwp5Nzthb2LPKvNNihaaTm9uEMGbQ3Ce3vob0fEXs0LuC1BoHXG4hRk3Swp7NI9PmYYmkVmpsAWiTPHahzV/mlJ2ypU+9ybx0ampzgqFtY8XWucK0nJRIVLDM4Ymcc8ujgttF2kcp/lthdaG0xvxhe8vHsMKRS8X7Da/xx4KK+z16PC14JrTVYX9SLntEm2TcnijbngCDUtrK+zTxS2v5zesMJIDMLfnTuI+uDs/jx+s1WhsxF8eXYWGfNkj0TvmCYIjXWpbH1QozND8h7DK9kDxfbjmi+7AsSh6I/qB2/XdgsJ90EpQRjYt7WZRYWut78AkiiH6d0UiNzdUGzEQuNn+QivkVi0Qu5m+MqSws/uf8YGyJzG0dD+Pnxwdxkr82/cXVrHRUMhDz9SLnHm8M20WFfJgYHSet1c7HyQ09c1/PY+uUzA24o++v/hrQaGlRcF1y4whoHDvWs8mMIldwuPuNI3bqcDjMR+6joao9wv+6E6U3oh+4Gb7C1PhKRS78bUr3XVAYe2twMqfRGpOkUqYaMqEZHZR4/5G1iZ49FairiYGNqJ5zGYq5P46au2uWfbHV3j2HWAT8jvlMV5KENvupkDfrxsb0Q/cDuYxm6VQpAhWCNXO8dqSwpB5mgKTyAYjL9qYEJngU2Ih+XaC+Ju314ySkx+4Wf7CUihyBDNGdgylp/Acsk7nNe9AE8OM1Wq6rs/HiaC7EkS/HmOUnAKBm1k2tRVa4YmSlNt/mgqrkHHi5hUthWk2PHu6UV/YbP7xNJh7zb9rHrM5Cp05G5x43FXYhHOf/We4+L0ZES3wPlCOMTaiH7hdPy4qFMmqHP5SJw1hhZeF2oC9e9eJgl7Y4oOf55oe0Q/czLKpq7Ahhm08urbVUbhYGujQ/ZPIerBWXtg4RzK+iFDgpo/ZXIViWoT/E6mQ+XFHIQsRovaUeZwiM1Yd8DjiRQ0s7EXrDuN1QKC5Ef2Km/GzDE8hnxcRw2DPjNgKM1FCTAPwG2ieREzdQhou00iFq0l+qCpqFdXe+KtYH7N5CkUqwapfYsFaO8RWKIo7cRBzEv1vmOCbc/gqqNDwiIHATfsL/+ultI8X35lbCvkUxm0dRFRISz1mi6kFczjrpSj7SEZPot7nvkLtLwLjy6q71EA2gXzRUrhen2u1Jx3QWgaMAnUPm+A2tDaiH7jpn2WEVlDMDUwVGHlT4Y3ynDCn/J/n5QLJfHO5jrlZ2obWRvQDNz3DIYXc7fNDCtfgmwrHtercxgqP+LnIQjmRF09Ws+PwNrQ2Yihwk/4iaAVaeeTm3jAUlmR1CmUJkv9z4NNdd+5aPJ1zbpPWz738swkpQj/jB27qZxlBhef5JMmbIUPhaoFVPyycxIREBkyiuio4l6pmbkYE3ouehON7O6lQb8RATCD9RdiSV8LaezOkFYpK/Wol1wxqRzInh45DoRfSGxXvh90iOjT9sDu4yGO2guZrxOtok3C37X2NJXcJV3hk/ySrXduwNhJZPxgqIpPCWOb5tIV2OdiRCp8toku/D29+cHkzz3DD8LfByuXzaeUBi4w/pP8+nWlOeBwFx7zvzndVMAAAAAAA+H/gjOsIoejC6gCpykLaOTc/xrFIgBoUyZsdD+X7CbEoKsIndk9EUipZqliBbV9EKEX1aAQefdHGKG4xu5QViBCCJhY2n1XVuqeNl3N7LZZXafQrm8hb/t12pB2JZZi6JjBPYnw8DseWhYuJUhjNPzNCNRElEJqxy150Ce3gmFzyvh9yTKJNQ4ojZ1QKaYeGpD0OfX9Eicpdp6Sm0VY+IlLS7CnOu33XY0Kz93OiFNLGS3IRzUXJXH9JazKHn3WCaaN5fiEFHepRfHft3KJMZS2MVVSIq5B+uRYPNEk3n1RzhadE1muHpGkSN/plc9jOw34mMvbfyzCaNkZbaVQDrsJEpkPzJ+mzUTE3IWtOBaGX7/gt1Fm9geOAQpzST4pIOTl3cweZwk51qfnUZYlb6mIK5S9Oy09yMMZEzjEdn1Ee4GRJv6iwENlHFdO1VtpN9J8yvphuoXvaY19hSUY6W7lQuN9M4mSWNTyoxssua1YVbkrZqUIdL+BcbFXGiepZUjiSkj+R83FgTaiDrawr71LYJ2Y901XIV1IVSYUZqaTC3Gw8rLD19v/FPHer71GI+Rzy4RTPF2bOedcq7ROz0kimXtAJhVMkZXKFmyPfcEKh0XhD8MDIVbLNFPZJO+bDsNdDYSlsZXlwRWGJWvVoz8e0MIetI0fx3bVqaU9MI5FK6yuK1vMC5TMrrAkvKmiFAzdkTZO2AlX+Fd4CtwmjlYNxSUyF0sQFFM62FMetGNyeP8Ys5oXPobC0p27+brRWDOnsOdT+kCmcNxtOlcIzM6FaYcXaJ9TShGypoDwNRFqa4m6F7cSIU/7mUayXCxtdvmXKiMlKmrtW6V41nZ1Ldx9GylFIhbSTjbMPqSEN21JFJNcjVgqb5q5V2nGfhISj4M9Uah/umcI7LI02EtT6Ogrp4qs46KIUlmnt2NIlhWUs184ke3VUpn6KN60cBOEt5CqwLQ176Dx3Y2IRlzbH3Z0KxeoWb7gKxzQXXKiXkF69T7o994eyS7RzQVtaqphAzZZy8ptLq83OnjYlthqDLX+tsI7YJpm7UdGg8KgW5pCc7lJIbfo8rlPqegskd0pGv6jilhr1PKaRvx7HyWkhppnNXqb2YSajwiwtNsMcDtJQjmoi8lvsCMJSWKaynH/mky0bq9F93oI+lUxFUUyEtWrEpZMRILHONp/2ssOIDd2QEPbeJSYX6i1qsZwntQoj1jK5YIwnov8nEZykFX2nTVjsHiXTOOJLyldRnqTs4YqwwSo/5frDerVs2PmTaKKoWCG1I5P47vpv9bMc0zfwkXUDq/L4mNMgRx2r7PEpw7KfA8Zs6LIBX6qqGOkwZHjEAvlGzkY660fWcm4spT27UoyDiI1wNdXTnD/Q5opqfrhUVd7juMn1qUvH2m9yXLHv7llaJFlVCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACc/wCE879cSepF7gAAAABJRU5ErkJggg==",$Ne="/assets/EAM-DVKGkr4n.png",eDe="data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMHBhUTBxMWFRURFxYZGRcVGBUVFxIeFhsaHiAYFRUYHjQgGR0pIBYVJTEhJykrLi4uGiA/ODMtNygtMysBCgoKDg0OGxAQGy4lHyUrNzgvNzAyLy0wLS0tLzEvLy0vLS0tLTUwLS81LSstLjUtLS0tLS0wLS0tLS0tLS01Nf/AABEIAOEA4QMBIgACEQEDEQH/xAAcAAEAAgIDAQAAAAAAAAAAAAAABgcEBQECAwj/xABEEAACAQIEAgUGCwcDBQEAAAAAAQIDEQQFEiEGMQcTIkFhFDZRcYGRFSNCU3OCkqGxwtEWUlRicoOyMpOiJENjwdIz/8QAGQEBAQEBAQEAAAAAAAAAAAAAAAQBAwIF/8QAJREBAAICAgICAwADAQAAAAAAAAECAxEEEiExM0ETInE0UWEF/9oADAMBAAIRAxEAPwC8QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHDdjXV8+wuHnaviaMX6JVIJ+5s2I2yZiPbZAxcJmNHGL/pKtOf9Eoy/BmTcwiYlyDyq4iNJ/Gyir+lpfidPLafzkPtR/UG4ZAMfy2n85D7Uf1HltP5yH2o/qbo3DIBj+W0/nIfaj+p7QkpxvBpp963TMNuwDPGpi4UpWqzin6HJJ+5hr2B0pVVWhek016U7r3ncAAdKtVUo3qtJeltL8QO4Mfy2n85D7Uf1HltP5yH2o/qNM3DIB4wxMKjtTnF+ppnqg3bkAAAAAAAAAADpWqqjScqrsoptt9yXNnc0PHMnHhPEdXz6tr2NpP7rm1jcxDzadVmVXcV8XVs/wARKNOThQv2YLbUvTU9Lfo5L7354PgnHYqipUsO0ny1yhBv6snde1GPwfOnT4nw7x1tCn38k7PS39bSX1Fl2XL+HVaw+dhxfn3a8qAzLIcVkz1Y6jOnb5a3ivrwbS95L+jzibGYrM44eretTs25TfapJd+v5SvZWe+/NFnzipxamrp80+T9aMDK8koZTUm8vpqHWtOVuWy5Jdy57LbdnG3Ii9Zi0eXenFml4mtvCFdKeU1syxlB4GjOooxqXcYuVruPP3EH/ZbGfwlX7DL+BmPk2pXrENycSt7TaZl85Y3ATwFbRjabhKyemSs7PvsZGDyLEY6hrwVCc4u61Ri2tvEkPSn52P6Kn+Ym3Rb5pR+kqf5Fd801xxfXtHTBFss036Vf+y2M/hKv2GXPwlQlhuGcPCvFxlGlFOLVnFpcmjbgjy55yRqYX4ePGKdxLyxNaOGw8p1naME5N+hJXbPn3Ose83zWpWr86km7P5K5KPsSS9hZ3Spm/kmTqhSfaxD38IRs373pXquRjo74bjnUa88UuwoSpR8JzX+peMVb7R24+sdJySn5UzkvGOG06JM30zqYWq9n8ZD8JJf8X7yzD59wGIqcP57GbXbw9RqS9OluMo+1al7S/MLXjicNGdB3jOKkn6VJXTOfKpq3aPUuvDybp1n3D2Ib0rK/C2/zsPzEyIb0rea392H5jlh+SP67Z/jt/FTYDLqmY1tGApupJJu0Vd2Vt/vRsP2Sxv8ACVPso3nRP5zy+hn/AJQLfLM3ItS2ohBg4tclO0y+fcVw/icFT1YnDVYpc5aHZeLa5Gz4c4zxOTVkpzlVpd9Obb2/kk94v7vAu6SuimekrK4ZbxAnhEoxrQU3FbJSu07LuvZP1tmY80ZZ62huXBOGO9JW9l2NhmOBhVwrvCpFST9fpXc+6xkkH6Ja7q8OzjPlTqyS8FKMZW97b9pOCO9etph9DHfvSLAAPD2AAAAAB4Y3CxxmEnTrq8akZRa9KkrM9wCY2obiThmtkGIaxEXKnfs1UuzJfzfuy8H7LnplHGOMymCjh6uqC5QqLWl4JvtJeCZecoKcbTV0+58n7CPZlwTgse7yoqDffTbp/cuz9xZXkxMayRtBbiWrO8c6RnLOlFaks0oWX71KV/8AhL/6Jzk+c0c5w+vLpqaXNcpR8JRe6K9z7o0lhqLnk9R1Lb9XOym/6ZLZvwsvWQ/Ic3nkeaRrUG1pfbX78flRa9XudjZw48kbxsjPlxWiMnp9BA6weqN13nYifQU30p+dj+ip/mJt0W+aUfpKn+RCelPzsf0VP8xNui3zSj9JU/yLcvwVfPw/5NkuOG7HJGekDN/gnh2fVu063xcPStS3l7I39tiOtZtMRC69orWbSq7jHNnnfENSdPeMXoppd8Yuyt63d+0tzhnLlkGQUqVSyltq8Zz5/e7exFVcBZXLMc9UoQU44ddY4t6VJr/TG9tt9/qslHE/E9TEShT6qVGVGoptSd23HlyXLv8AHYo5eSKRFI+nP/zOLfkXm/8Atq+lTKfJM4jXprs4hb+E4JL746fcyRdFeb+V5RKhVfaw728YS3Xud16rHGa1p8Z5BUjRw7ioLXCcpLecPkwVt77x9pAeDc3+BuIKdST7EuxP+mdt/Y9L9h7pMZcOvuE+aluNyf2+/a+SG9K3mt/dh+YmKd+RDulbzW/uw/MT4fkj+qc/x2/iFdGeNp4DiGUsbONOPVTV5tRV3KG136mWl+0uD/iqH+5D9Sj8nyirnWKdPL4qUlFys2o7Jpc360br9gMf81H/AHIfqWZsdLW3NtIMGXJWmq12s3G8YYLCUtU8RTl4QfWSfqUblRcV54+IM3dVrTFJRhF84xV+fi22/aamtTdGo41U1KLaaezTWzTLV4K4OwsaFPE6/KHJKUbrTCDX8l32k/S3ZodaYP29nfJyJ6+m16PcpllPDkViFadVupJPnHVZJPx0qO3puSc4RyQ2t2ncvpUrFaxEAAPL0AAAAABqeJc8hkGWOriN3yhHk5yfJL/2+5I2xjZhgKeY4V08bBThLmpfivQ/FG11vy82iZide1f8N9JClLRxArXbtUgnZX7pQW+3K6v4+kn+BzGlj6erB1ITX8slL8Cuc86Mp05uWSVFKP7lR2kvCM0rP229ZFcTwljaEvjcLUf9KU/vhcrnFiv5rOkMZc2Pxau1z51nlDJcM542cVZbRutc/CMebKHjTlmeYaaK7Vedkl3Ob/Dc2mD4PxuKn8Xhpxv3ztTS9ercsTgzgeOR1VWx8lOtba19FK/PTfdvmr7bHqs0wROp3LzaMnItG41CYUo9XTSXckvcdzhHJC+kpvpT87H9FT/MTbot80o/SVP8iPdIPDeLzTiJ1MvoucOrgrqVNbq91aUk+9Er6P8ALquV8ORp5hBwmpzeluL2b23i2izJas4YjaHFW0ci06SNlN9Jmb/CPEDp032MMtHg5PeT/BfVZbWa1alDL5ywMNdRReiKstUu7du1rlQ5fwPjcTmcPhOjKMJzvUm5U3s3eT2le739rPHG6xM2t9PXL7TEUrHtOujXKPg7h1TqLt4h634R+Svdv9ZnpjuFnnOa1KuZScYtaacY2ulFWUpP13dvElMIKEEoKyXJeix2J8k95mZXce9sEfpOvDU8OYKpluW9Timn1bajJfKi91t3NXat4FR8eZR8EcR1IwXYq/GQ9Fpc17JavZYvIiHSNw/PO8sjLAx1VaUtldJyjLaSTe37r59x249+l/8Aibm1nLWbfftk9H2cfC3DsOsd50fi5+l6Vs36429tzD6VvNb+7D8xp+j3KMbkecPyyhKNKtG0nqptRcbuMrKV/SvrEj6Q8tq5rw/1eXwc59ZB2Title7vJpd5sxWuaNT425xNrYJ3HnSD9E/nPL6Gf+UC3u4rXo64dxWU5/KeY0XCLpSjdyg93KDt2ZN9zLLM5MxN/DeJWYx6lW3Sfw1deWYKPK3XJd65Kp7OT8LPuZpejvib4Ix/U4x/E1nzfKnN7KXgnsn7H6S4KsFUptVEmns0+TT7mioOIOAcTh80ksnpOpRe8XqgtKfyHqknt6fRY64clbU/Hdyz47UvGSi4U9jkjfBM8VDLOqz6lKEqVlGTlCXWR7r6ZN6ly357eJJCS0anS2tu0bAAY9AAAAAAAAAAAAAAAAMLNcyp5VhlPFtqLlGOybfafOy7kryb7oxk+4zDQ5pSq4/N9NGnCpTo05KSqylCMpVlZ2tCV3Gmmu7asZnD9ScsrjHHf/pSvTm+epw213srqS0y5fKA7083p1cPRnTu1idPVq3aaavdruSW7b5euyefch3DlCplmFw1bGXnGrRpUmtNvJFto0rmoydlUe71aHtFPTzTp09cFTj/ANb5QnOWn4zR115ycrX6l0lJRu9P+lLdJIJhqQuRCjk9KdOk6lJOVTGYjW2nqnGU8Q9NR85U7qHZfZ2jtsjnF0oYdSo1oUYUFiJaZVqanRo/FQklGN0ouUp1LNuyd1zaQEuuLkLybArHYjCrGwcoU45haMoShT7OJpKnelO9kopOMXysrclbdcQxg69H4SSeHTnr1K8FLT2JVVy0Lt7y2UnB80gN1cXItXp4V4mHlkIeS9U1RU4fExnrlr7MlpTadPRtutenZ79cuyuONr0lmtPWo0J6Y1k5aYur2NcZ/wDcVPSm32l2vSwJXcXIbluCWFynDTpwtOphJ9bNp66jdKEr1pPeUtV3eW+79LOMvlSpQw8sjpN1YU5OvGzVScVRlaFeT51JVeqtqd32mrq4EzuLoryvTToV44Dq2qmAxWtYahKilNdXpjJ6neotc7RdpRu781aRYrJ6ax8qWCiqUa1Cd3CKSU4ThoqPuc4uTab39wEh5nJo+G68synPEV46W7UVHfs9S2qlk/8AyurG/eoRZvAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOtSCq03Ge6kmn4pinBU4JQ2SSS8LHYADzxFFYik41L2f7spRfslFpp+KZ6ADzw9COGoKFBWjFWSXcegAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//Z",tDe=()=>{var _;const[r,e]=P.useState(""),[t,n]=P.useState(!1),[i,s]=P.useState(""),[a,o]=P.useState(!1),[l,c]=P.useState(null),[u,f]=P.useState({text:"",type:""});P.useEffect(()=>{const w=JV(ol,b=>{b?(c({uid:b.uid,displayName:b.displayName||"Anonymous",photoURL:b.photoURL||"/placeholder.svg"}),setCurrentUserId(b.uid)):(c(null),setCurrentUserId(null))});return()=>w()},[]);const d=[{value:"tshirt",label:"Brandix",image:KNe},{value:"jeans",label:"Hirdaramani",image:qNe},{value:"jacket",label:"MAS Holdings",image:ZNe},{value:"dress",label:"EAM Maliban Textile",image:$Ne},{value:"sweater",label:"Star Garments",image:eDe}],p=w=>{e(w),n(!1)},g=()=>{var M,A;if(!l){f({text:"Please log in to submit a request",type:"error"});return}if(!r){f({text:"Please select a garment",type:"error"});return}if(!i.trim()){f({text:"Please enter request details",type:"error"});return}const w={id:Date.now(),userId:l.uid,userName:l.displayName,userPhoto:l.photoURL,garment:r,garmentLabel:(M=d.find(k=>k.value===r))==null?void 0:M.label,garmentImage:(A=d.find(k=>k.value===r))==null?void 0:A.image,requestText:i,date:new Date().toISOString(),status:"pending"},b=JSON.parse(localStorage.getItem("garmentRequests")||"[]"),C=[w,...b];localStorage.setItem("garmentRequests",JSON.stringify(C)),window.dispatchEvent(new Event("storage")),e(""),s(""),f({text:"Request submitted successfully!",type:"success"}),o(!0),setTimeout(()=>{f({text:"",type:""})},3e3)};return j("div",{className:"garment-form-container",children:[S("h1",{className:"Garmentform-title",children:"Garment Request Form"}),j("div",{className:"Garmentform-content",children:[j("div",{className:"Garmentform-group",children:[S("label",{className:"Garmentform-label",children:"Select a Garment"}),j("div",{className:"Garmentcustom-select",children:[j("button",{className:"Garmentselect-button",onClick:()=>n(!t),children:[r?(_=d.find(w=>w.value===r))==null?void 0:_.label:"Select garment...",S("span",{className:"Garmentdropdown-icon",children:""})]}),t&&j("div",{className:"Garmentdropdown-menu",children:[S("input",{type:"text",className:"Garmentdropdown-search",placeholder:"Search garment..."}),S("div",{className:"Garmentdropdown-items",children:d.map(w=>j("div",{className:`Garmentdropdown-item ${r===w.value?"selected":""}`,onClick:()=>p(w.value),children:[j("div",{className:"Garmentdropdown-item-content",children:[S("img",{src:w.image,alt:w.label,className:"garment-image"}),w.label]}),r===w.value&&S("span",{className:"Garmentcheck-icon",children:""})]},w.value))})]})]})]}),j("div",{className:"Garmentform-group",children:[S("label",{className:"Garmentform-label",children:"Request Details"}),S("textarea",{className:"Garmentrequest-textarea",placeholder:"Type your request here...",value:i,onChange:w=>s(w.target.value)})]}),u.text&&S("div",{className:`submit-message ${u.type}`,children:u.text}),S("button",{className:"Garmentsubmit-button",onClick:g,children:"Submit Request"})]})]})},nDe="/assets/Styloft-white-Bl-2oQuq.png";function rDe(){return P.useEffect(()=>{const r=()=>{const e=document.querySelector(".scroll-to-top");window.scrollY>300?e.classList.add("show"):e.classList.remove("show")};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]),j("footer",{className:"footer-container",children:[j("div",{className:"footer-left",children:[S("div",{className:"footer-logo",children:S("img",{src:nDe,alt:"Styloft Logo"})}),S("p",{className:"footer-email",children:"styloft.work@gmail.com"}),S("p",{className:"footer-phone",children:"+94 76 002 9769"}),j("div",{className:"footer-social-icons",children:[S("a",{href:"https://www.facebook.com/profile.php?id=61573425719039&rdid=GS4gbjCtoHpWhgoc&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F15rfSTq2Ka%2F#",target:"_blank",rel:"noopener noreferrer",children:S(k1e,{className:"social-logo",style:{color:"white"}})}),S("a",{href:"https://pinsara20.github.io/Styloft_Marketing_Web/",target:"_blank",rel:"noopener noreferrer",children:S(R1e,{className:"social-logo",style:{color:"white"}})}),S("a",{href:"https://www.instagram.com/styloft._/?igsh=MXhmaHcyOWttdTNlbA%3D%3D#",target:"_blank",rel:"noopener noreferrer",children:S(P1e,{className:"social-logo",style:{color:"white"}})})]})]}),S("div",{className:"footer-middle",children:j("ul",{children:[S("li",{children:S(gu,{to:"/",children:"Home"})}),S("li",{children:S(gu,{to:"/features",children:"Features"})}),S("li",{children:S(gu,{to:"/pricing",children:"Pricing"})}),S("li",{children:S(gu,{to:"/reviews",children:"Reviews"})}),S("li",{children:S(gu,{to:"/about",children:"About"})})]})}),j("div",{className:"footer-right",children:[S("h2",{children:"Create Your Fashion"}),S("h2",{className:"highlight",children:"Inspire the World!!"})]}),S("div",{className:"footer-bottom",children:S("p",{children:"2025 SE-Group-32 Styloft.live"})}),S("button",{className:"scroll-to-top",onClick:iDe,children:""})]})}function iDe(){window.scrollTo({top:0,behavior:"smooth"})}const sDe="/assets/styloft-logo-C8SJItq-.png",aDe=()=>{const[r,e]=P.useState(!1),[t,n]=P.useState(""),[i,s]=P.useState(!1),[a,o]=P.useState(0),[l,c]=P.useState(!0),[u,f]=P.useState(0),[d,p]=P.useState(!1),[g,_]=P.useState(null);P.useEffect(()=>{f(window.scrollY);const k=localStorage.getItem("authToken"),O=localStorage.getItem("profilePicture");k&&(e(!0),n(O||`https://robohash.org/${k}.png?set=set5`),w())},[]);const w=async()=>{try{const k=localStorage.getItem("currentUser");let O;if(k)try{O=JSON.parse(k).uid}catch{typeof k=="string"&&k.length>0&&(O=k)}if(O||(O=localStorage.getItem("authToken")),!O){console.log("No user ID found, cannot fetch subscription status"),_("Free");return}console.log("Fetching subscription for user:",O);const I=await(await fetch(`https://styloftbackendnew-production.up.railway.app/payments/subscription-status/${O}`)).json();console.log("Subscription data:",I),I&&localStorage.setItem("subscriptionData",JSON.stringify({status:I.status,planName:I.planName||"Free",lastUpdated:new Date().toISOString()})),I&&I.status==="active"?_(I.planName):_("Free")}catch(k){console.error("Error fetching subscription status:",k),_("Free")}};P.useEffect(()=>{const k=()=>{window.scrollY>u&&window.scrollY>100?c(!1):c(!0),f(window.scrollY)};return window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)},[u]);const b=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("profilePicture"),e(!1),n(""),s(!1)},C=()=>{s(!i)},M=()=>{a<3?(o(a+1),setTimeout(()=>{n(t+`?retry=${a}`)},1e3)):n("/path/to/fallback-image.png")},A=[{path:"/",label:"HOMEPAGE"},{path:"/stylestudio",label:"STYLE STUDIO"},{path:"/contest",label:"CONTEST"},{path:"/stylesociety",label:"STYLE SOCIETY"},{path:"/styleMarket",label:"STYLE MARKET"},{path:"/sub-plans",label:"PLANS"}];return j("nav",{className:`navbar ${l?"visible":"hidden"} ${window.scrollY>50?"scrolled":""}`,children:[S("div",{className:"navbar-container",children:j("div",{className:"navbar-content",children:[S("div",{className:"navbar-logo",children:S(gu,{to:"/",children:S("img",{src:sDe,alt:"Logo",className:"logo"})})}),S("div",{className:"mobile-menu-button",children:j("button",{onClick:()=>p(!d),"aria-label":"Toggle menu",children:[S("span",{className:"sr-only",children:"Open main menu"}),d?S("svg",{className:"icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):S("svg",{className:"icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})}),S("div",{className:"navbar-links",children:A.map(k=>S(gu,{to:k.path,className:({isActive:O})=>O?"nav-link active":"nav-link",children:k.label},k.path))}),S("div",{className:"navbar-login",children:r?j("div",{className:"profile-section",children:[S("button",{onClick:C,className:"profile-button",children:S("div",{className:"profile-picture-container",children:S("img",{src:t||"/placeholder.svg",alt:"Profile",className:"profile-picture",onError:M})})}),i&&j("div",{className:"logout-dropdown",children:[j("div",{className:"dropdown-header",children:[j(gu,{to:g==="Gold Plan"?"/dashboard":"/profile",className:"profile-link",children:[S("svg",{xmlns:"http://www.w3.org/2000/svg",className:"profile-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),g==="Gold Plan"?"Your Dashboard":"Your Profile"]}),g&&j("div",{className:"subscription-info",children:[S("span",{className:"subscription-label",children:"Plan:"}),S("span",{className:"subscription-value",children:g})]})]}),j("button",{onClick:b,className:"logout-button",children:[S("svg",{xmlns:"http://www.w3.org/2000/svg",className:"logout-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]}):S("button",{onClick:()=>window.location.href="/login",className:"login-button",children:"Login"})})]})}),S("div",{className:`mobile-menu ${d?"open":""}`,children:S("div",{className:"mobile-menu-content",children:A.map(k=>S(gu,{to:k.path,className:({isActive:O})=>O?"mobile-nav-link active":"mobile-nav-link",onClick:()=>p(!1),children:k.label},k.path))})})]})},oDe=J3e({reducer:{products:lNe}}),kM={x:0,y:0,width:0,height:0,unit:"px"},M0=(r,e,t)=>Math.min(Math.max(r,e),t),lDe=(...r)=>r.filter(e=>e&&typeof e=="string").join(" "),Wz=(r,e)=>r===e||r.width===e.width&&r.height===e.height&&r.x===e.x&&r.y===e.y&&r.unit===e.unit;function A0(r,e,t){return r.unit==="%"?{...kM,...r,unit:"%"}:{unit:"%",x:r.x?r.x/e*100:0,y:r.y?r.y/t*100:0,width:r.width?r.width/e*100:0,height:r.height?r.height/t*100:0}}function nh(r,e,t){return r.unit?r.unit==="px"?{...kM,...r,unit:"px"}:{unit:"px",x:r.x?r.x*e/100:0,y:r.y?r.y*t/100:0,width:r.width?r.width*e/100:0,height:r.height?r.height*t/100:0}:{...kM,...r,unit:"px"}}function Yz(r,e,t,n,i,s=0,a=0,o=n,l=i){const c={...r};let u=Math.min(s,n),f=Math.min(a,i),d=Math.min(o,n),p=Math.min(l,i);e&&(e>1?(u=a?a*e:u,f=u/e,d=o*e):(f=s?s/e:f,u=f*e,p=l/e)),c.y<0&&(c.height=Math.max(c.height+c.y,f),c.y=0),c.x<0&&(c.width=Math.max(c.width+c.x,u),c.x=0);const g=n-(c.x+c.width);g<0&&(c.x=Math.min(c.x,n-u),c.width+=g);const _=i-(c.y+c.height);if(_<0&&(c.y=Math.min(c.y,i-f),c.height+=_),c.width<u&&((t==="sw"||t=="nw")&&(c.x-=u-c.width),c.width=u),c.height<f&&((t==="nw"||t=="ne")&&(c.y-=f-c.height),c.height=f),c.width>d&&((t==="sw"||t=="nw")&&(c.x-=d-c.width),c.width=d),c.height>p&&((t==="nw"||t=="ne")&&(c.y-=p-c.height),c.height=p),e){const w=c.width/c.height;if(w<e){const b=Math.max(c.width/e,f);(t==="nw"||t=="ne")&&(c.y-=b-c.height),c.height=b}else if(w>e){const b=Math.max(c.height*e,u);(t==="sw"||t=="nw")&&(c.x-=b-c.width),c.width=b}}return c}function cDe(r,e,t,n){const i={...r};return e==="ArrowLeft"?n==="nw"?(i.x-=t,i.y-=t,i.width+=t,i.height+=t):n==="w"?(i.x-=t,i.width+=t):n==="sw"?(i.x-=t,i.width+=t,i.height+=t):n==="ne"?(i.y+=t,i.width-=t,i.height-=t):n==="e"?i.width-=t:n==="se"&&(i.width-=t,i.height-=t):e==="ArrowRight"&&(n==="nw"?(i.x+=t,i.y+=t,i.width-=t,i.height-=t):n==="w"?(i.x+=t,i.width-=t):n==="sw"?(i.x+=t,i.width-=t,i.height-=t):n==="ne"?(i.y-=t,i.width+=t,i.height+=t):n==="e"?i.width+=t:n==="se"&&(i.width+=t,i.height+=t)),e==="ArrowUp"?n==="nw"?(i.x-=t,i.y-=t,i.width+=t,i.height+=t):n==="n"?(i.y-=t,i.height+=t):n==="ne"?(i.y-=t,i.width+=t,i.height+=t):n==="sw"?(i.x+=t,i.width-=t,i.height-=t):n==="s"?i.height-=t:n==="se"&&(i.width-=t,i.height-=t):e==="ArrowDown"&&(n==="nw"?(i.x+=t,i.y+=t,i.width-=t,i.height-=t):n==="n"?(i.y+=t,i.height-=t):n==="ne"?(i.y+=t,i.width-=t,i.height-=t):n==="sw"?(i.x-=t,i.width+=t,i.height+=t):n==="s"?i.height+=t:n==="se"&&(i.width+=t,i.height+=t)),i}const T0={capture:!0,passive:!1};let uDe=0;const ih=class Mc extends P.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=P.createRef(),this.mediaRef=P.createRef(),this.initChangeCalled=!1,this.instanceId=`rc-${uDe++}`,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{const{crop:t,disabled:n}=this.props,i=this.getBox();if(!t)return;const s=nh(t,i.width,i.height);if(n)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const a=e.target.dataset.ord,o=!!a;let l=e.clientX,c=e.clientY,u=s.x,f=s.y;if(a){const d=e.clientX-i.x,p=e.clientY-i.y;let g=0,_=0;a==="ne"||a=="e"?(g=d-(s.x+s.width),_=p-s.y,u=s.x,f=s.y+s.height):a==="se"||a==="s"?(g=d-(s.x+s.width),_=p-(s.y+s.height),u=s.x,f=s.y):a==="sw"||a=="w"?(g=d-s.x,_=p-(s.y+s.height),u=s.x+s.width,f=s.y):(a==="nw"||a=="n")&&(g=d-s.x,_=p-s.y,u=s.x+s.width,f=s.y+s.height),l=u+i.x+g,c=f+i.y+_}this.evData={startClientX:l,startClientY:c,startCropX:u,startCropY:f,clientX:e.clientX,clientY:e.clientY,isResize:o,ord:a},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{const{crop:t,disabled:n,locked:i,keepSelection:s,onChange:a}=this.props,o=this.getBox();if(n||i||s&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const l=e.clientX-o.x,c=e.clientY-o.y,u={unit:"px",x:l,y:c,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:l,startCropY:c,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,a(nh(u,o.width,o.height),A0(u,o.width,o.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{const{crop:t,disabled:n,onChange:i,onDragStart:s}=this.props,a=this.getBox();if(n||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,s&&s(e));const{evData:o}=this;o.clientX=e.clientX,o.clientY=e.clientY;let l;o.isResize?l=this.resizeCrop():l=this.dragCrop(),Wz(t,l)||i(nh(l,a.width,a.height),A0(l,a.width,a.height))},this.onComponentKeyDown=e=>{const{crop:t,disabled:n,onChange:i,onComplete:s}=this.props;if(n)return;const a=e.key;let o=!1;if(!t)return;const l=this.getBox(),c=this.makePixelCrop(l),u=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?Mc.nudgeStepLarge:e.shiftKey?Mc.nudgeStepMedium:Mc.nudgeStep;if(a==="ArrowLeft"?(c.x-=u,o=!0):a==="ArrowRight"?(c.x+=u,o=!0):a==="ArrowUp"?(c.y-=u,o=!0):a==="ArrowDown"&&(c.y+=u,o=!0),o){e.cancelable&&e.preventDefault(),c.x=M0(c.x,0,l.width-c.width),c.y=M0(c.y,0,l.height-c.height);const f=nh(c,l.width,l.height),d=A0(c,l.width,l.height);i(f,d),s&&s(f,d)}},this.onHandlerKeyDown=(e,t)=>{const{aspect:n=0,crop:i,disabled:s,minWidth:a=0,minHeight:o=0,maxWidth:l,maxHeight:c,onChange:u,onComplete:f}=this.props,d=this.getBox();if(s||!i)return;if(e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="ArrowLeft"||e.key==="ArrowRight")e.stopPropagation(),e.preventDefault();else return;const p=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?Mc.nudgeStepLarge:e.shiftKey?Mc.nudgeStepMedium:Mc.nudgeStep,g=nh(i,d.width,d.height),_=cDe(g,e.key,p,t),w=Yz(_,n,t,d.width,d.height,a,o,l,c);if(!Wz(i,w)){const b=A0(w,d.width,d.height);u(w,b),f&&f(w,b)}},this.onDocPointerDone=e=>{const{crop:t,disabled:n,onComplete:i,onDragEnd:s}=this.props,a=this.getBox();this.unbindDocMove(),!(n||!t)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,s&&s(e),i&&i(nh(t,a.width,a.height),A0(t,a.width,a.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=()=>{var e;(e=this.componentRef.current)==null||e.scrollTo(0,0)}}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:t,y:n,width:i,height:s}=e.getBoundingClientRect();return{x:t,y:n,width:i,height:s}}componentDidUpdate(e){const{crop:t,onComplete:n}=this.props;if(n&&!e.crop&&t){const{width:i,height:s}=this.getBox();i&&s&&n(nh(t,i,s),A0(t,i,s))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,T0),this.document.addEventListener("pointerup",this.onDocPointerDone,T0),this.document.addEventListener("pointercancel",this.onDocPointerDone,T0),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,T0),this.document.removeEventListener("pointerup",this.onDocPointerDone,T0),this.document.removeEventListener("pointercancel",this.onDocPointerDone,T0),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,t=this.getBox(),n=this.makePixelCrop(t),i=e.clientX-e.startClientX,s=e.clientY-e.startClientY;return n.x=M0(e.startCropX+i,0,t.width-n.width),n.y=M0(e.startCropY+s,0,t.height-n.height),n}getPointRegion(e,t,n,i){const{evData:s}=this,a=s.clientX-e.x,o=s.clientY-e.y;let l;i&&t?l=t==="nw"||t==="n"||t==="ne":l=o<s.startCropY;let c;return n&&t?c=t==="nw"||t==="w"||t==="sw":c=a<s.startCropX,c?l?"nw":"sw":l?"ne":"se"}resolveMinDimensions(e,t,n=0,i=0){const s=Math.min(n,e.width),a=Math.min(i,e.height);return!t||!s&&!a?[s,a]:t>1?s?[s,s/t]:[a*t,a]:a?[a*t,a]:[s,s/t]}resizeCrop(){const{evData:e}=this,{aspect:t=0,maxWidth:n,maxHeight:i}=this.props,s=this.getBox(),[a,o]=this.resolveMinDimensions(s,t,this.props.minWidth,this.props.minHeight);let l=this.makePixelCrop(s);const c=this.getPointRegion(s,e.ord,a,o),u=e.ord||c;let f=e.clientX-e.startClientX,d=e.clientY-e.startClientY;(a&&u==="nw"||u==="w"||u==="sw")&&(f=Math.min(f,-a)),(o&&u==="nw"||u==="n"||u==="ne")&&(d=Math.min(d,-o));const p={unit:"px",x:0,y:0,width:0,height:0};c==="ne"?(p.x=e.startCropX,p.width=f,t?(p.height=p.width/t,p.y=e.startCropY-p.height):(p.height=Math.abs(d),p.y=e.startCropY-p.height)):c==="se"?(p.x=e.startCropX,p.y=e.startCropY,p.width=f,t?p.height=p.width/t:p.height=d):c==="sw"?(p.x=e.startCropX+f,p.y=e.startCropY,p.width=Math.abs(f),t?p.height=p.width/t:p.height=d):c==="nw"&&(p.x=e.startCropX+f,p.width=Math.abs(f),t?(p.height=p.width/t,p.y=e.startCropY-p.height):(p.height=Math.abs(d),p.y=e.startCropY+d));const g=Yz(p,t,c,s.width,s.height,a,o,n,i);return t||Mc.xyOrds.indexOf(u)>-1?l=g:Mc.xOrds.indexOf(u)>-1?(l.x=g.x,l.width=g.width):Mc.yOrds.indexOf(u)>-1&&(l.y=g.y,l.height=g.height),l.x=M0(l.x,0,s.width-l.width),l.y=M0(l.y,0,s.height-l.height),l}renderCropSelection(){const{ariaLabels:e=Mc.defaultProps.ariaLabels,disabled:t,locked:n,renderSelectionAddon:i,ruleOfThirds:s,crop:a}=this.props,o=this.getCropStyle();if(a)return j("div",{style:o,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group",children:[!t&&!n&&j("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus,children:[S("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),S("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),S("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),S("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),S("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"nw"),role:"button"}),S("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"n"),role:"button"}),S("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"ne"),role:"button"}),S("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"e"),role:"button"}),S("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"se"),role:"button"}),S("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"s"),role:"button"}),S("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"sw"),role:"button"}),S("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"w"),role:"button"})]}),i&&S("div",{className:"ReactCrop__selection-addon",onPointerDown:l=>l.stopPropagation(),children:i(this.state)}),s&&j(Br,{children:[S("div",{className:"ReactCrop__rule-of-thirds-hz"}),S("div",{className:"ReactCrop__rule-of-thirds-vt"})]})]})}makePixelCrop(e){const t={...kM,...this.props.crop||{}};return nh(t,e.width,e.height)}render(){const{aspect:e,children:t,circularCrop:n,className:i,crop:s,disabled:a,locked:o,style:l,ruleOfThirds:c}=this.props,{cropIsActive:u,newCropIsBeingDrawn:f}=this.state,d=s?this.renderCropSelection():null,p=lDe("ReactCrop",i,u&&"ReactCrop--active",a&&"ReactCrop--disabled",o&&"ReactCrop--locked",f&&"ReactCrop--new-crop",s&&e&&"ReactCrop--fixed-aspect",s&&n&&"ReactCrop--circular-crop",s&&c&&"ReactCrop--rule-of-thirds",!this.dragStarted&&s&&!s.width&&!s.height&&"ReactCrop--invisible-crop",n&&"ReactCrop--no-animate");return j("div",{ref:this.componentRef,className:p,style:l,children:[S("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown,children:t}),s?j("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%",children:[S("defs",{children:j("mask",{id:`hole-${this.instanceId}`,children:[S("rect",{width:"100%",height:"100%",fill:"white"}),n?S("ellipse",{cx:`${s.x+s.width/2}${s.unit}`,cy:`${s.y+s.height/2}${s.unit}`,rx:`${s.width/2}${s.unit}`,ry:`${s.height/2}${s.unit}`,fill:"black"}):S("rect",{x:`${s.x}${s.unit}`,y:`${s.y}${s.unit}`,width:`${s.width}${s.unit}`,height:`${s.height}${s.unit}`,fill:"black"})]})}),S("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})]}):void 0,d]})}};ih.xOrds=["e","w"],ih.yOrds=["n","s"],ih.xyOrds=["nw","ne","se","sw"],ih.nudgeStep=1,ih.nudgeStepMedium=10,ih.nudgeStepLarge=100,ih.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}};let fDe=ih;function fK(r,e){return function(){return r.apply(e,arguments)}}const{toString:dDe}=Object.prototype,{getPrototypeOf:pP}=Object,jT=(r=>e=>{const t=dDe.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),$c=r=>(r=r.toLowerCase(),e=>jT(e)===r),zT=r=>e=>typeof e===r,{isArray:Ev}=Array,T_=zT("undefined");function hDe(r){return r!==null&&!T_(r)&&r.constructor!==null&&!T_(r.constructor)&&hl(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const dK=$c("ArrayBuffer");function pDe(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&dK(r.buffer),e}const mDe=zT("string"),hl=zT("function"),hK=zT("number"),VT=r=>r!==null&&typeof r=="object",gDe=r=>r===!0||r===!1,Ux=r=>{if(jT(r)!=="object")return!1;const e=pP(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},vDe=$c("Date"),yDe=$c("File"),wDe=$c("Blob"),_De=$c("FileList"),bDe=r=>VT(r)&&hl(r.pipe),SDe=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||hl(r.append)&&((e=jT(r))==="formdata"||e==="object"&&hl(r.toString)&&r.toString()==="[object FormData]"))},xDe=$c("URLSearchParams"),[CDe,MDe,ADe,TDe]=["ReadableStream","Request","Response","Headers"].map($c),EDe=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sb(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),Ev(r))for(n=0,i=r.length;n<i;n++)e.call(null,r[n],n,r);else{const s=t?Object.getOwnPropertyNames(r):Object.keys(r),a=s.length;let o;for(n=0;n<a;n++)o=s[n],e.call(null,r[o],o,r)}}function pK(r,e){e=e.toLowerCase();const t=Object.keys(r);let n=t.length,i;for(;n-- >0;)if(i=t[n],e===i.toLowerCase())return i;return null}const Am=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,mK=r=>!T_(r)&&r!==Am;function lN(){const{caseless:r}=mK(this)&&this||{},e={},t=(n,i)=>{const s=r&&pK(e,i)||i;Ux(e[s])&&Ux(n)?e[s]=lN(e[s],n):Ux(n)?e[s]=lN({},n):Ev(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Sb(arguments[n],t);return e}const IDe=(r,e,t,{allOwnKeys:n}={})=>(Sb(e,(i,s)=>{t&&hl(i)?r[s]=fK(i,t):r[s]=i},{allOwnKeys:n}),r),LDe=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),NDe=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},DDe=(r,e,t,n)=>{let i,s,a;const o={};if(e=e||{},r==null)return e;do{for(i=Object.getOwnPropertyNames(r),s=i.length;s-- >0;)a=i[s],(!n||n(a,r,e))&&!o[a]&&(e[a]=r[a],o[a]=!0);r=t!==!1&&pP(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},kDe=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},RDe=r=>{if(!r)return null;if(Ev(r))return r;let e=r.length;if(!hK(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},PDe=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&pP(Uint8Array)),ODe=(r,e)=>{const n=(r&&r[Symbol.iterator]).call(r);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(r,s[0],s[1])}},FDe=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},BDe=$c("HTMLFormElement"),UDe=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),Jz=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),jDe=$c("RegExp"),gK=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};Sb(t,(i,s)=>{let a;(a=e(i,s,r))!==!1&&(n[s]=a||i)}),Object.defineProperties(r,n)},zDe=r=>{gK(r,(e,t)=>{if(hl(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(hl(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},VDe=(r,e)=>{const t={},n=i=>{i.forEach(s=>{t[s]=!0})};return Ev(r)?n(r):n(String(r).split(e)),t},GDe=()=>{},HDe=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function WDe(r){return!!(r&&hl(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const YDe=r=>{const e=new Array(10),t=(n,i)=>{if(VT(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=Ev(n)?[]:{};return Sb(n,(a,o)=>{const l=t(a,i+1);!T_(l)&&(s[o]=l)}),e[i]=void 0,s}}return n};return t(r,0)},JDe=$c("AsyncFunction"),XDe=r=>r&&(VT(r)||hl(r))&&hl(r.then)&&hl(r.catch),vK=((r,e)=>r?setImmediate:e?((t,n)=>(Am.addEventListener("message",({source:i,data:s})=>{i===Am&&s===t&&n.length&&n.shift()()},!1),i=>{n.push(i),Am.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",hl(Am.postMessage)),QDe=typeof queueMicrotask<"u"?queueMicrotask.bind(Am):typeof process<"u"&&process.nextTick||vK,bt={isArray:Ev,isArrayBuffer:dK,isBuffer:hDe,isFormData:SDe,isArrayBufferView:pDe,isString:mDe,isNumber:hK,isBoolean:gDe,isObject:VT,isPlainObject:Ux,isReadableStream:CDe,isRequest:MDe,isResponse:ADe,isHeaders:TDe,isUndefined:T_,isDate:vDe,isFile:yDe,isBlob:wDe,isRegExp:jDe,isFunction:hl,isStream:bDe,isURLSearchParams:xDe,isTypedArray:PDe,isFileList:_De,forEach:Sb,merge:lN,extend:IDe,trim:EDe,stripBOM:LDe,inherits:NDe,toFlatObject:DDe,kindOf:jT,kindOfTest:$c,endsWith:kDe,toArray:RDe,forEachEntry:ODe,matchAll:FDe,isHTMLForm:BDe,hasOwnProperty:Jz,hasOwnProp:Jz,reduceDescriptors:gK,freezeMethods:zDe,toObjectSet:VDe,toCamelCase:UDe,noop:GDe,toFiniteNumber:HDe,findKey:pK,global:Am,isContextDefined:mK,isSpecCompliantForm:WDe,toJSONObject:YDe,isAsyncFn:JDe,isThenable:XDe,setImmediate:vK,asap:QDe};function rr(r,e,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}bt.inherits(rr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:bt.toJSONObject(this.config),code:this.code,status:this.status}}});const yK=rr.prototype,wK={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{wK[r]={value:r}});Object.defineProperties(rr,wK);Object.defineProperty(yK,"isAxiosError",{value:!0});rr.from=(r,e,t,n,i,s)=>{const a=Object.create(yK);return bt.toFlatObject(r,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),rr.call(a,r.message,e,t,n,i),a.cause=r,a.name=r.name,s&&Object.assign(a,s),a};const KDe=null;function cN(r){return bt.isPlainObject(r)||bt.isArray(r)}function _K(r){return bt.endsWith(r,"[]")?r.slice(0,-2):r}function Xz(r,e,t){return r?r.concat(e).map(function(i,s){return i=_K(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function qDe(r){return bt.isArray(r)&&!r.some(cN)}const ZDe=bt.toFlatObject(bt,{},null,function(e){return/^is[A-Z]/.test(e)});function GT(r,e,t){if(!bt.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=bt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,w){return!bt.isUndefined(w[_])});const n=t.metaTokens,i=t.visitor||u,s=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&bt.isSpecCompliantForm(e);if(!bt.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(bt.isDate(g))return g.toISOString();if(!l&&bt.isBlob(g))throw new rr("Blob is not supported. Use a Buffer instead.");return bt.isArrayBuffer(g)||bt.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,_,w){let b=g;if(g&&!w&&typeof g=="object"){if(bt.endsWith(_,"{}"))_=n?_:_.slice(0,-2),g=JSON.stringify(g);else if(bt.isArray(g)&&qDe(g)||(bt.isFileList(g)||bt.endsWith(_,"[]"))&&(b=bt.toArray(g)))return _=_K(_),b.forEach(function(M,A){!(bt.isUndefined(M)||M===null)&&e.append(a===!0?Xz([_],A,s):a===null?_:_+"[]",c(M))}),!1}return cN(g)?!0:(e.append(Xz(w,_,s),c(g)),!1)}const f=[],d=Object.assign(ZDe,{defaultVisitor:u,convertValue:c,isVisitable:cN});function p(g,_){if(!bt.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+_.join("."));f.push(g),bt.forEach(g,function(b,C){(!(bt.isUndefined(b)||b===null)&&i.call(e,b,bt.isString(C)?C.trim():C,_,d))===!0&&p(b,_?_.concat(C):[C])}),f.pop()}}if(!bt.isObject(r))throw new TypeError("data must be an object");return p(r),e}function Qz(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function mP(r,e){this._pairs=[],r&&GT(r,this,e)}const bK=mP.prototype;bK.append=function(e,t){this._pairs.push([e,t])};bK.toString=function(e){const t=e?function(n){return e.call(this,n,Qz)}:Qz;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function $De(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function SK(r,e,t){if(!e)return r;const n=t&&t.encode||$De;bt.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=bt.isURLSearchParams(e)?e.toString():new mP(e,t).toString(n),s){const a=r.indexOf("#");a!==-1&&(r=r.slice(0,a)),r+=(r.indexOf("?")===-1?"?":"&")+s}return r}class Kz{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){bt.forEach(this.handlers,function(n){n!==null&&e(n)})}}const xK={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eke=typeof URLSearchParams<"u"?URLSearchParams:mP,tke=typeof FormData<"u"?FormData:null,nke=typeof Blob<"u"?Blob:null,rke={isBrowser:!0,classes:{URLSearchParams:eke,FormData:tke,Blob:nke},protocols:["http","https","file","blob","url","data"]},gP=typeof window<"u"&&typeof document<"u",uN=typeof navigator=="object"&&navigator||void 0,ike=gP&&(!uN||["ReactNative","NativeScript","NS"].indexOf(uN.product)<0),ske=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ake=gP&&window.location.href||"http://localhost",oke=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gP,hasStandardBrowserEnv:ike,hasStandardBrowserWebWorkerEnv:ske,navigator:uN,origin:ake},Symbol.toStringTag,{value:"Module"})),za={...oke,...rke};function lke(r,e){return GT(r,new za.classes.URLSearchParams,Object.assign({visitor:function(t,n,i,s){return za.isNode&&bt.isBuffer(t)?(this.append(n,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function cke(r){return bt.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function uke(r){const e={},t=Object.keys(r);let n;const i=t.length;let s;for(n=0;n<i;n++)s=t[n],e[s]=r[s];return e}function CK(r){function e(t,n,i,s){let a=t[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=t.length;return a=!a&&bt.isArray(i)?i.length:a,l?(bt.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!o):((!i[a]||!bt.isObject(i[a]))&&(i[a]=[]),e(t,n,i[a],s)&&bt.isArray(i[a])&&(i[a]=uke(i[a])),!o)}if(bt.isFormData(r)&&bt.isFunction(r.entries)){const t={};return bt.forEachEntry(r,(n,i)=>{e(cke(n),i,t,0)}),t}return null}function fke(r,e,t){if(bt.isString(r))try{return(e||JSON.parse)(r),bt.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const xb={transitional:xK,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,s=bt.isObject(e);if(s&&bt.isHTMLForm(e)&&(e=new FormData(e)),bt.isFormData(e))return i?JSON.stringify(CK(e)):e;if(bt.isArrayBuffer(e)||bt.isBuffer(e)||bt.isStream(e)||bt.isFile(e)||bt.isBlob(e)||bt.isReadableStream(e))return e;if(bt.isArrayBufferView(e))return e.buffer;if(bt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return lke(e,this.formSerializer).toString();if((o=bt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return GT(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),fke(e)):e}],transformResponse:[function(e){const t=this.transitional||xb.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(bt.isResponse(e)||bt.isReadableStream(e))return e;if(e&&bt.isString(e)&&(n&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?rr.from(o,rr.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:za.classes.FormData,Blob:za.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};bt.forEach(["delete","get","head","post","put","patch"],r=>{xb.headers[r]={}});const dke=bt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),hke=r=>{const e={};let t,n,i;return r&&r.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!t||e[t]&&dke[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},qz=Symbol("internals");function Vy(r){return r&&String(r).trim().toLowerCase()}function jx(r){return r===!1||r==null?r:bt.isArray(r)?r.map(jx):String(r)}function pke(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const mke=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function VI(r,e,t,n,i){if(bt.isFunction(n))return n.call(this,e,t);if(i&&(e=t),!!bt.isString(e)){if(bt.isString(n))return e.indexOf(n)!==-1;if(bt.isRegExp(n))return n.test(e)}}function gke(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function vke(r,e){const t=bt.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(i,s,a){return this[n].call(this,e,i,s,a)},configurable:!0})})}let Uo=class{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function s(o,l,c){const u=Vy(l);if(!u)throw new Error("header name must be a non-empty string");const f=bt.findKey(i,u);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=jx(o))}const a=(o,l)=>bt.forEach(o,(c,u)=>s(c,u,l));if(bt.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(bt.isString(e)&&(e=e.trim())&&!mke(e))a(hke(e),t);else if(bt.isHeaders(e))for(const[o,l]of e.entries())s(l,o,n);else e!=null&&s(t,e,n);return this}get(e,t){if(e=Vy(e),e){const n=bt.findKey(this,e);if(n){const i=this[n];if(!t)return i;if(t===!0)return pke(i);if(bt.isFunction(t))return t.call(this,i,n);if(bt.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Vy(e),e){const n=bt.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||VI(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let i=!1;function s(a){if(a=Vy(a),a){const o=bt.findKey(n,a);o&&(!t||VI(n,n[o],o,t))&&(delete n[o],i=!0)}}return bt.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const s=t[n];(!e||VI(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,n={};return bt.forEach(this,(i,s)=>{const a=bt.findKey(n,s);if(a){t[a]=jx(i),delete t[s];return}const o=e?gke(s):String(s).trim();o!==s&&delete t[s],t[o]=jx(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return bt.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=e&&bt.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[qz]=this[qz]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=Vy(a);n[o]||(vke(i,a),n[o]=!0)}return bt.isArray(e)?e.forEach(s):s(e),this}};Uo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);bt.reduceDescriptors(Uo.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});bt.freezeMethods(Uo);function GI(r,e){const t=this||xb,n=e||t,i=Uo.from(n.headers);let s=n.data;return bt.forEach(r,function(o){s=o.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function MK(r){return!!(r&&r.__CANCEL__)}function Iv(r,e,t){rr.call(this,r??"canceled",rr.ERR_CANCELED,e,t),this.name="CanceledError"}bt.inherits(Iv,rr,{__CANCEL__:!0});function AK(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new rr("Request failed with status code "+t.status,[rr.ERR_BAD_REQUEST,rr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function yke(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function wke(r,e){r=r||10;const t=new Array(r),n=new Array(r);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=n[s];a||(a=c),t[i]=l,n[i]=c;let f=s,d=0;for(;f!==i;)d+=t[f++],f=f%r;if(i=(i+1)%r,i===s&&(s=(s+1)%r),c-a<e)return;const p=u&&c-u;return p?Math.round(d*1e3/p):void 0}}function _ke(r,e){let t=0,n=1e3/e,i,s;const a=(c,u=Date.now())=>{t=u,i=null,s&&(clearTimeout(s),s=null),r.apply(null,c)};return[(...c)=>{const u=Date.now(),f=u-t;f>=n?a(c,u):(i=c,s||(s=setTimeout(()=>{s=null,a(i)},n-f)))},()=>i&&a(i)]}const RM=(r,e,t=3)=>{let n=0;const i=wke(50,250);return _ke(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,l=a-n,c=i(l),u=a<=o;n=a;const f={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&u?(o-a)/c:void 0,event:s,lengthComputable:o!=null,[e?"download":"upload"]:!0};r(f)},t)},Zz=(r,e)=>{const t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},$z=r=>(...e)=>bt.asap(()=>r(...e)),bke=za.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,za.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(za.origin),za.navigator&&/(msie|trident)/i.test(za.navigator.userAgent)):()=>!0,Ske=za.hasStandardBrowserEnv?{write(r,e,t,n,i,s){const a=[r+"="+encodeURIComponent(e)];bt.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),bt.isString(n)&&a.push("path="+n),bt.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function xke(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function Cke(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function TK(r,e,t){let n=!xke(e);return r&&(n||t==!1)?Cke(r,e):e}const e5=r=>r instanceof Uo?{...r}:r;function rg(r,e){e=e||{};const t={};function n(c,u,f,d){return bt.isPlainObject(c)&&bt.isPlainObject(u)?bt.merge.call({caseless:d},c,u):bt.isPlainObject(u)?bt.merge({},u):bt.isArray(u)?u.slice():u}function i(c,u,f,d){if(bt.isUndefined(u)){if(!bt.isUndefined(c))return n(void 0,c,f,d)}else return n(c,u,f,d)}function s(c,u){if(!bt.isUndefined(u))return n(void 0,u)}function a(c,u){if(bt.isUndefined(u)){if(!bt.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function o(c,u,f){if(f in e)return n(c,u);if(f in r)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(c,u,f)=>i(e5(c),e5(u),f,!0)};return bt.forEach(Object.keys(Object.assign({},r,e)),function(u){const f=l[u]||i,d=f(r[u],e[u],u);bt.isUndefined(d)&&f!==o||(t[u]=d)}),t}const EK=r=>{const e=rg({},r);let{data:t,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:o}=e;e.headers=a=Uo.from(a),e.url=SK(TK(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(bt.isFormData(t)){if(za.hasStandardBrowserEnv||za.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[c,...u]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([c||"multipart/form-data",...u].join("; "))}}if(za.hasStandardBrowserEnv&&(n&&bt.isFunction(n)&&(n=n(e)),n||n!==!1&&bke(e.url))){const c=i&&s&&Ske.read(s);c&&a.set(i,c)}return e},Mke=typeof XMLHttpRequest<"u",Ake=Mke&&function(r){return new Promise(function(t,n){const i=EK(r);let s=i.data;const a=Uo.from(i.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=i,u,f,d,p,g;function _(){p&&p(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function b(){if(!w)return;const M=Uo.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),k={data:!o||o==="text"||o==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:M,config:r,request:w};AK(function(R){t(R),_()},function(R){n(R),_()},k),w=null}"onloadend"in w?w.onloadend=b:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(b)},w.onabort=function(){w&&(n(new rr("Request aborted",rr.ECONNABORTED,r,w)),w=null)},w.onerror=function(){n(new rr("Network Error",rr.ERR_NETWORK,r,w)),w=null},w.ontimeout=function(){let A=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const k=i.transitional||xK;i.timeoutErrorMessage&&(A=i.timeoutErrorMessage),n(new rr(A,k.clarifyTimeoutError?rr.ETIMEDOUT:rr.ECONNABORTED,r,w)),w=null},s===void 0&&a.setContentType(null),"setRequestHeader"in w&&bt.forEach(a.toJSON(),function(A,k){w.setRequestHeader(k,A)}),bt.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),o&&o!=="json"&&(w.responseType=i.responseType),c&&([d,g]=RM(c,!0),w.addEventListener("progress",d)),l&&w.upload&&([f,p]=RM(l),w.upload.addEventListener("progress",f),w.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=M=>{w&&(n(!M||M.type?new Iv(null,r,w):M),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const C=yke(i.url);if(C&&za.protocols.indexOf(C)===-1){n(new rr("Unsupported protocol "+C+":",rr.ERR_BAD_REQUEST,r));return}w.send(s||null)})},Tke=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,i;const s=function(c){if(!i){i=!0,o();const u=c instanceof Error?c:this.reason;n.abort(u instanceof rr?u:new Iv(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,s(new rr(`timeout ${e} of ms exceeded`,rr.ETIMEDOUT))},e);const o=()=>{r&&(a&&clearTimeout(a),a=null,r.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),r=null)};r.forEach(c=>c.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>bt.asap(o),l}},Eke=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let n=0,i;for(;n<t;)i=n+e,yield r.slice(n,i),n=i},Ike=async function*(r,e){for await(const t of Lke(r))yield*Eke(t,e)},Lke=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},t5=(r,e,t,n)=>{const i=Ike(r,e);let s=0,a,o=l=>{a||(a=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){o(),l.close();return}let f=u.byteLength;if(t){let d=s+=f;t(d)}l.enqueue(new Uint8Array(u))}catch(c){throw o(c),c}},cancel(l){return o(l),i.return()}},{highWaterMark:2})},HT=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",IK=HT&&typeof ReadableStream=="function",Nke=HT&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),LK=(r,...e)=>{try{return!!r(...e)}catch{return!1}},Dke=IK&&LK(()=>{let r=!1;const e=new Request(za.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),n5=64*1024,fN=IK&&LK(()=>bt.isReadableStream(new Response("").body)),PM={stream:fN&&(r=>r.body)};HT&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!PM[e]&&(PM[e]=bt.isFunction(r[e])?t=>t[e]():(t,n)=>{throw new rr(`Response type '${e}' is not supported`,rr.ERR_NOT_SUPPORT,n)})})})(new Response);const kke=async r=>{if(r==null)return 0;if(bt.isBlob(r))return r.size;if(bt.isSpecCompliantForm(r))return(await new Request(za.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(bt.isArrayBufferView(r)||bt.isArrayBuffer(r))return r.byteLength;if(bt.isURLSearchParams(r)&&(r=r+""),bt.isString(r))return(await Nke(r)).byteLength},Rke=async(r,e)=>{const t=bt.toFiniteNumber(r.getContentLength());return t??kke(e)},Pke=HT&&(async r=>{let{url:e,method:t,data:n,signal:i,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:f="same-origin",fetchOptions:d}=EK(r);c=c?(c+"").toLowerCase():"text";let p=Tke([i,s&&s.toAbortSignal()],a),g;const _=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let w;try{if(l&&Dke&&t!=="get"&&t!=="head"&&(w=await Rke(u,n))!==0){let k=new Request(e,{method:"POST",body:n,duplex:"half"}),O;if(bt.isFormData(n)&&(O=k.headers.get("content-type"))&&u.setContentType(O),k.body){const[R,I]=Zz(w,RM($z(l)));n=t5(k.body,n5,R,I)}}bt.isString(f)||(f=f?"include":"omit");const b="credentials"in Request.prototype;g=new Request(e,{...d,signal:p,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:b?f:void 0});let C=await fetch(g);const M=fN&&(c==="stream"||c==="response");if(fN&&(o||M&&_)){const k={};["status","statusText","headers"].forEach(D=>{k[D]=C[D]});const O=bt.toFiniteNumber(C.headers.get("content-length")),[R,I]=o&&Zz(O,RM($z(o),!0))||[];C=new Response(t5(C.body,n5,R,()=>{I&&I(),_&&_()}),k)}c=c||"text";let A=await PM[bt.findKey(PM,c)||"text"](C,r);return!M&&_&&_(),await new Promise((k,O)=>{AK(k,O,{data:A,headers:Uo.from(C.headers),status:C.status,statusText:C.statusText,config:r,request:g})})}catch(b){throw _&&_(),b&&b.name==="TypeError"&&/fetch/i.test(b.message)?Object.assign(new rr("Network Error",rr.ERR_NETWORK,r,g),{cause:b.cause||b}):rr.from(b,b&&b.code,r,g)}}),dN={http:KDe,xhr:Ake,fetch:Pke};bt.forEach(dN,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const r5=r=>`- ${r}`,Oke=r=>bt.isFunction(r)||r===null||r===!1,NK={getAdapter:r=>{r=bt.isArray(r)?r:[r];const{length:e}=r;let t,n;const i={};for(let s=0;s<e;s++){t=r[s];let a;if(n=t,!Oke(t)&&(n=dN[(a=String(t)).toLowerCase()],n===void 0))throw new rr(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+s]=n}if(!n){const s=Object.entries(i).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(r5).join(`
`):" "+r5(s[0]):"as no adapter specified";throw new rr("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:dN};function HI(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Iv(null,r)}function i5(r){return HI(r),r.headers=Uo.from(r.headers),r.data=GI.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),NK.getAdapter(r.adapter||xb.adapter)(r).then(function(n){return HI(r),n.data=GI.call(r,r.transformResponse,n),n.headers=Uo.from(n.headers),n},function(n){return MK(n)||(HI(r),n&&n.response&&(n.response.data=GI.call(r,r.transformResponse,n.response),n.response.headers=Uo.from(n.response.headers))),Promise.reject(n)})}const DK="1.8.4",WT={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{WT[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const s5={};WT.transitional=function(e,t,n){function i(s,a){return"[Axios v"+DK+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,o)=>{if(e===!1)throw new rr(i(a," has been removed"+(t?" in "+t:"")),rr.ERR_DEPRECATED);return t&&!s5[a]&&(s5[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,a,o):!0}};WT.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Fke(r,e,t){if(typeof r!="object")throw new rr("options must be an object",rr.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const o=r[s],l=o===void 0||a(o,s,r);if(l!==!0)throw new rr("option "+s+" must be "+l,rr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new rr("Unknown option "+s,rr.ERR_BAD_OPTION)}}const zx={assertOptions:Fke,validators:WT},fu=zx.validators;let Pm=class{constructor(e){this.defaults=e,this.interceptors={request:new Kz,response:new Kz}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=rg(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:s}=t;n!==void 0&&zx.assertOptions(n,{silentJSONParsing:fu.transitional(fu.boolean),forcedJSONParsing:fu.transitional(fu.boolean),clarifyTimeoutError:fu.transitional(fu.boolean)},!1),i!=null&&(bt.isFunction(i)?t.paramsSerializer={serialize:i}:zx.assertOptions(i,{encode:fu.function,serialize:fu.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),zx.assertOptions(t,{baseUrl:fu.spelling("baseURL"),withXsrfToken:fu.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&bt.merge(s.common,s[t.method]);s&&bt.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=Uo.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(t)===!1||(l=l&&_.synchronous,o.unshift(_.fulfilled,_.rejected))});const c=[];this.interceptors.response.forEach(function(_){c.push(_.fulfilled,_.rejected)});let u,f=0,d;if(!l){const g=[i5.bind(this),void 0];for(g.unshift.apply(g,o),g.push.apply(g,c),d=g.length,u=Promise.resolve(t);f<d;)u=u.then(g[f++],g[f++]);return u}d=o.length;let p=t;for(f=0;f<d;){const g=o[f++],_=o[f++];try{p=g(p)}catch(w){_.call(this,w);break}}try{u=i5.call(this,p)}catch(g){return Promise.reject(g)}for(f=0,d=c.length;f<d;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=rg(this.defaults,e);const t=TK(e.baseURL,e.url,e.allowAbsoluteUrls);return SK(t,e.params,e.paramsSerializer)}};bt.forEach(["delete","get","head","options"],function(e){Pm.prototype[e]=function(t,n){return this.request(rg(n||{},{method:e,url:t,data:(n||{}).data}))}});bt.forEach(["post","put","patch"],function(e){function t(n){return function(s,a,o){return this.request(rg(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Pm.prototype[e]=t(),Pm.prototype[e+"Form"]=t(!0)});let Bke=class kK{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{n.subscribe(o),s=o}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},e(function(s,a,o){n.reason||(n.reason=new Iv(s,a,o),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new kK(function(i){e=i}),cancel:e}}};function Uke(r){return function(t){return r.apply(null,t)}}function jke(r){return bt.isObject(r)&&r.isAxiosError===!0}const hN={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hN).forEach(([r,e])=>{hN[e]=r});function RK(r){const e=new Pm(r),t=fK(Pm.prototype.request,e);return bt.extend(t,Pm.prototype,e,{allOwnKeys:!0}),bt.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return RK(rg(r,i))},t}const cs=RK(xb);cs.Axios=Pm;cs.CanceledError=Iv;cs.CancelToken=Bke;cs.isCancel=MK;cs.VERSION=DK;cs.toFormData=GT;cs.AxiosError=rr;cs.Cancel=cs.CanceledError;cs.all=function(e){return Promise.all(e)};cs.spread=Uke;cs.isAxiosError=jke;cs.mergeConfig=rg;cs.AxiosHeaders=Uo;cs.formToJSON=r=>CK(bt.isHTMLForm(r)?new FormData(r):r);cs.getAdapter=NK.getAdapter;cs.HttpStatusCode=hN;cs.default=cs;const{Axios:cRe,AxiosError:uRe,CanceledError:fRe,isCancel:dRe,CancelToken:hRe,VERSION:pRe,all:mRe,Cancel:gRe,isAxiosError:vRe,spread:yRe,toFormData:wRe,AxiosHeaders:_Re,HttpStatusCode:bRe,formToJSON:SRe,getAdapter:xRe,mergeConfig:CRe}=cs,zke=()=>{const[r,e]=P.useState([]),[t,n]=P.useState(!1),[i,s]=P.useState(null),a=Yc();P.useEffect(()=>{const u=ol.onAuthStateChanged(f=>{s(f||null)});return()=>u()},[]),P.useEffect(()=>{const u=()=>{const d=JSON.parse(localStorage.getItem("garmentRequests")||"[]"),p=i?d.filter(g=>g.status==="pending"&&g.userId===i.uid):[];e(p)};u(),window.addEventListener("storage",u);const f=setInterval(u,3e4);return()=>{window.removeEventListener("storage",u),clearInterval(f)}},[i]);const o=()=>{n(!t)},l=()=>{a("/request-form")},c=u=>new Date(u).toLocaleString();return j("div",{className:"NotifiRequest",children:[j("div",{className:"request-buttons",children:[S("button",{className:"CreateRequestBtn",onClick:l,children:"Create New Request"}),j("button",{className:"MyRequestBtn",onClick:o,children:["My sent Request",r.length>0&&S("span",{className:"RequestCount",children:r.length})]})]}),t&&j("div",{className:"notifications-dropdown",children:[S("h3",{children:"Your Pending Requests"}),r.length===0?S("p",{className:"no-notifications",children:"No pending requests"}):S("ul",{className:"notifications-list",children:r.map(u=>j("li",{className:"notification-item",children:[j("div",{className:"notification-header",children:[S("img",{src:u.garmentImage,alt:u.garmentLabel,className:"notification-garment-img"}),S("span",{className:"notification-garment",children:u.garmentLabel})]}),j("p",{className:"notification-text",children:["Request: ",u.requestText]}),S("span",{className:"notification-date",children:c(u.date)}),j("span",{className:"notification-status",children:["Status: ",u.status]})]},u.id))})]})]})},du=i_,E0=AC,WI=()=>{const[r,e]=P.useState(du),[t,n]=P.useState(E0),[i,s]=P.useState(!1),[a,o]=P.useState(""),[l,c]=P.useState(""),[u,f]=P.useState(""),[d,p]=P.useState(""),[g,_]=P.useState(""),[w,b]=P.useState(null),[C,M]=P.useState(null),[A,k]=P.useState(""),O=P.useRef(null),[R,I]=P.useState(null),[D,E]=P.useState([]),[B,U]=P.useState([]),[V,X]=P.useState(!1),[te,ee]=P.useState(null),[ue,ne]=P.useState([]),[oe,q]=P.useState(!1),[J,ie]=P.useState(null),[he,$]=P.useState(!0),[ge,pe]=P.useState(!1),[we,ke]=P.useState(!1),[Pe,je]=P.useState([]),[Ke,Ie]=P.useState([]),[Ge,ce]=P.useState(!1),[_t,_e]=P.useState(!1),{id:Ne}=FM();P.useEffect(()=>{(async()=>{c(""),f(""),o(""),e(du),n(E0),ne([]),E([]),U([]);const at=localStorage.getItem("currentUser");let vt=null;if(at)try{const et=JSON.parse(at);et&&et.uid&&(vt=et.uid,ee(et.uid))}catch(et){console.error("Error parsing user from localStorage:",et)}const qe=Ne||vt;console.log("Profile ID from URL:",Ne),console.log("Logged in user ID:",vt),console.log("Target user ID to display:",qe),qe&&(I(qe),$(vt===qe),await Ce(qe),He(qe))})()},[Ne]);const Ce=async Le=>{if(!Le){console.error("No user ID provided to fetchUserProfile");return}try{console.log(`Fetching profile data for user ID: ${Le}`);const at=Qr(wr,"users",Le),vt=await F1(at);if(vt.exists()){const qe=vt.data();console.log("User data retrieved:",qe),qe.displayName?c(qe.displayName):qe.name?c(qe.name):c("User"),f(qe.profession||""),o(qe.aboutText||qe.about||""),qe.photoURL&&qe.photoURL!==""?e(qe.photoURL):e(du),qe.coverPhotoURL&&qe.coverPhotoURL!==""?n(qe.coverPhotoURL):(console.log("No cover photo found, using default"),n(E0)),E(qe.followers||[]),U(qe.following||[]),te&&qe.followers&&X(qe.followers.includes(te))}else{console.log(`No user document found for ID: ${Le}, attempting to create it`);try{if(ol.currentUser&&ol.currentUser.uid===Le){const qe=ol.currentUser,et={displayName:qe.displayName||"New User",email:qe.email||"",photoURL:qe.photoURL||"",uid:qe.uid,followers:[],following:[],profession:"",aboutText:""};c(et.displayName),e(et.photoURL||du),f(""),o(""),E([]),U([]),await mC(at,et),console.log("Created new user document for current user")}else{console.log("Fetching user from Firebase Auth Admin (if available)");const qe={displayName:"User",uid:Le,followers:[],following:[],profession:"",aboutText:"",photoURL:""};c(qe.displayName),e(du),f(""),o(""),E([]),U([]),await mC(at,qe),console.log("Created placeholder user document")}}catch(qe){throw console.error("Error creating user from auth data:",qe),qe}}}catch(at){console.error("Error in fetchUserProfile:",at),c("Error loading profile"),f(""),o(""),e(du),n(E0)}},He=async Le=>{q(!0),ie(null);try{const at=await cs.get(`https://styloftbackendnew-production.up.railway.app/design/user/${Le}`);ne(at.data)}catch(at){console.error("Error fetching user designs:",at),ie("Failed to load designs. Please try again later.")}finally{q(!1)}},Ee=async()=>{if(!(!te||te===R))try{V?(await va(Qr(wr,"users",R),{followers:Xw(te)}),await va(Qr(wr,"users",te),{following:Xw(R)}),E(D.filter(Le=>Le!==te))):(await va(Qr(wr,"users",R),{followers:Gm(te)}),await va(Qr(wr,"users",te),{following:Gm(R)}),E([...D,te])),X(!V)}catch(Le){console.error("Error updating follow status:",Le)}},Z=(Le,at)=>{const vt=Le.target.files[0];if(vt){const qe=new FileReader;qe.onload=()=>{b(qe.result),k(at)},qe.readAsDataURL(vt)}},W=async()=>{if(O.current&&C&&C.width&&C.height){const Le=document.createElement("canvas"),at=O.current.naturalWidth/O.current.width,vt=O.current.naturalHeight/O.current.height,qe=Le.getContext("2d");Le.width=C.width*at,Le.height=C.height*vt,qe.drawImage(O.current,C.x*at,C.y*vt,C.width*at,C.height*vt,0,0,Le.width,Le.height);const et=Le.toDataURL("image/jpeg");A==="profile"?(e(et),await re(et)):(n(et),await be(et)),b(null),M(null)}},re=async Le=>{if(R)try{await va(Qr(wr,"users",R),{photoURL:Le}),ol.currentUser&&await qO(ol.currentUser,{photoURL:Le});const at=localStorage.getItem("currentUser");if(at){const vt=JSON.parse(at);vt.photoURL=Le,localStorage.setItem("currentUser",JSON.stringify(vt))}}catch(at){console.error("Error updating profile picture:",at)}},be=async Le=>{if(R)try{await va(Qr(wr,"users",R),{coverPhotoURL:Le})}catch(at){console.error("Error updating cover photo:",at)}},ve=async()=>{let Le=!0;l.trim()?p(""):(p("Name cannot be empty"),Le=!1),u.trim()?_(""):(_("Profession cannot be empty"),Le=!1),Le&&(s(!1),await Je(l,u,a))},Je=async(Le,at,vt)=>{if(R)try{await va(Qr(wr,"users",R),{displayName:Le,profession:at,aboutText:vt}),ol.currentUser&&await qO(ol.currentUser,{displayName:Le});const qe=localStorage.getItem("currentUser");if(qe){const et=JSON.parse(qe);et.displayName=Le,localStorage.setItem("currentUser",JSON.stringify(et))}}catch(qe){console.error("Error updating profile info:",qe)}},$e=async Le=>{const at=[];for(const vt of Le)try{const qe=await F1(Qr(wr,"users",vt));if(qe.exists()){const et=qe.data();at.push({id:vt,name:et.displayName||et.name||"User",photoURL:et.photoURL||du,profession:et.profession||""})}}catch(qe){console.error(`Error fetching user ${vt}:`,qe)}return at},it=async()=>{if(D.length!==0){ce(!0),pe(!0);try{const Le=await $e(D);je(Le)}catch(Le){console.error("Error fetching followers:",Le)}finally{ce(!1)}}},pt=async()=>{if(B.length!==0){_e(!0),ke(!0);try{const Le=await $e(B);Ie(Le)}catch(Le){console.error("Error fetching following:",Le)}finally{_e(!1)}}},Ft=Le=>{pe(!1),ke(!1),window.location.href=`/profile/${Le}`};return P.useEffect(()=>{if(!R)return;const Le=Qr(wr,"users",R),at=B1(Le,vt=>{if(vt.exists()){const qe=vt.data();E(qe.followers||[]),U(qe.following||[]),te&&qe.followers&&X(qe.followers.includes(te))}});return()=>at()},[R,te]),j(Br,{children:[j("div",{className:"profile-container",children:[j("div",{className:"profile-header",children:[j("div",{className:"cover-photo",children:[S("img",{src:t||E0,alt:"Cover",className:"cover-img",onError:Le=>{console.log("Error loading cover photo, using default"),Le.target.onerror=null,Le.target.src=E0}}),he&&j("label",{className:"edit-button-cover",children:[S("i",{className:"icon-camera"}),S("input",{type:"file",accept:"image/*",onChange:Le=>Z(Le,"cover"),hidden:!0})]})]}),j("div",{className:"profile-details",children:[j("div",{className:"profile-pic-container",children:[S("img",{src:r||"/placeholder.svg",alt:"Profile",className:"profile-pic",onError:Le=>{console.log("Error loading profile picture, using default"),Le.target.onerror=null,Le.target.src=du}}),he&&j("label",{className:"edit-button-profile",children:[S("i",{className:"icon-camera"}),S("input",{type:"file",accept:"image/*",onChange:Le=>Z(Le,"profile"),hidden:!0})]})]}),j("div",{className:"user-info",children:[he&&i?j(Br,{children:[j("div",{className:"edit-field",children:[S("input",{type:"text",value:l,onChange:Le=>c(Le.target.value),placeholder:"Name",className:"edit-input"}),d&&S("p",{className:"error-message",children:d})]}),j("div",{className:"edit-field",children:[S("input",{type:"text",value:u,onChange:Le=>f(Le.target.value),placeholder:"Profession",className:"edit-input"}),g&&S("p",{className:"error-message",children:g})]})]}):j(Br,{children:[S("h2",{children:l}),S("p",{className:"profession",children:u})]}),j("div",{className:"follow-stats",children:[j("span",{className:"followers-count",onClick:it,style:{cursor:D.length>0?"pointer":"default"},children:[S("span",{className:"count",children:D.length})," followers"]}),j("span",{className:"following-count",onClick:pt,style:{cursor:B.length>0?"pointer":"default"},children:[S("span",{className:"count",children:B.length})," following"]})]}),!he&&te&&S("div",{className:"profile-actions",children:S("button",{className:`connect-btn ${V?"following":""}`,onClick:Ee,children:V?"Unfollow":"Follow"})})]})]})]}),he&&S(zke,{}),S("div",{className:"profile-sections",children:j("div",{className:"about-section",children:[j("div",{className:"section-header",children:[S("h3",{children:"About"}),he&&S("button",{onClick:()=>i?ve():s(!0),className:"edit-button",children:i?"Save":"Edit"})]}),S("div",{className:"section-content",children:he&&i?S("textarea",{value:a,onChange:Le=>o(Le.target.value),placeholder:"Write something about yourself...",className:"about-textarea"}):S("p",{children:a||"No information provided."})})]})})]}),j("div",{className:"designs-section",children:[S("h3",{children:he?"My Designs":"Designs"}),oe?j("div",{className:"loading-container",children:[S("div",{className:"loading-spinner"}),S("p",{children:"Loading designs..."})]}):J?S("p",{className:"error-message",children:J}):ue.length>0?S("div",{className:"designs-grid",children:ue.map(Le=>j("div",{className:"design-card",children:[S("div",{className:"design-image-container",children:S("img",{src:Le.fileUrl||"/placeholder.svg",alt:Le.description||"Design",className:"design-image",onError:at=>{at.target.onerror=null,at.target.src="/placeholder-design.jpg"}})}),Le.description&&S("p",{className:"design-description",children:Le.description})]},Le.id))}):S("p",{className:"empty-message",children:he?"No designs found. Start creating to showcase your work!":"This user hasn't shared any designs yet."})]}),w&&S("div",{className:"modal",children:j("div",{className:"modal-content crop-modal",children:[S("h2",{children:"Crop Image"}),S(fDe,{crop:C,onChange:Le=>M(Le),aspect:A==="profile"?1:16/9,children:S("img",{src:w||"/placeholder.svg",ref:O,style:{maxWidth:"100%"},alt:"Crop preview"})}),j("div",{className:"modal-actions",children:[S("button",{className:"modal-button apply-button",onClick:W,children:"Apply"}),S("button",{className:"modal-button cancel-button",onClick:()=>b(null),children:"Cancel"})]})]})}),ge&&S("div",{className:"follow-modal",children:j("div",{className:"follow-modal-content",children:[j("div",{className:"follow-modal-header",children:[S("h2",{children:"Followers"}),S("button",{className:"close-button",onClick:()=>pe(!1),children:""})]}),S("div",{className:"follow-list",children:Ge?j("div",{className:"loading-container",children:[S("div",{className:"loading-spinner"}),S("p",{children:"Loading followers..."})]}):Pe.length>0?Pe.map(Le=>j("div",{className:"follow-item",onClick:()=>Ft(Le.id),children:[S("img",{src:Le.photoURL||"/placeholder.svg",alt:Le.name,className:"follow-avatar",onError:at=>{at.target.onerror=null,at.target.src=du}}),j("div",{className:"follow-info",children:[S("p",{className:"follow-name",children:Le.name}),Le.profession&&S("p",{className:"follow-profession",children:Le.profession})]})]},Le.id)):S("div",{className:"no-results",children:"No followers found"})})]})}),we&&S("div",{className:"follow-modal",children:j("div",{className:"follow-modal-content",children:[j("div",{className:"follow-modal-header",children:[S("h2",{children:"Following"}),S("button",{className:"close-button",onClick:()=>ke(!1),children:""})]}),S("div",{className:"follow-list",children:_t?j("div",{className:"loading-container",children:[S("div",{className:"loading-spinner"}),S("p",{children:"Loading following..."})]}):Ke.length>0?Ke.map(Le=>j("div",{className:"follow-item",onClick:()=>Ft(Le.id),children:[S("img",{src:Le.photoURL||"/placeholder.svg",alt:Le.name,className:"follow-avatar",onError:at=>{at.target.onerror=null,at.target.src=du}}),j("div",{className:"follow-info",children:[S("p",{className:"follow-name",children:Le.name}),Le.profession&&S("p",{className:"follow-profession",children:Le.profession})]})]},Le.id)):S("div",{className:"no-results",children:"Not following anyone"})})]})})]})},Vke=()=>S("div",{className:"success-container",children:j("div",{className:"success-card animate-scale-in",children:[j("div",{className:"success-header",children:[S("div",{className:"success-icon-container animate-bounce-in",style:{animationDelay:"0.5s"},children:S("div",{className:"icon-wrapper animate-pulse",children:S(aV,{className:"success-icon"})})}),S("h1",{className:"success-title animate-fade-up",style:{animationDelay:"0.7s"},children:"Payment Successful!"}),S("p",{className:"success-subtitle animate-fade-up",style:{animationDelay:"0.8s"},children:"Thank you for your subscription. Your account has been upgraded."})]}),S("div",{className:"success-content animate-fade-up",style:{animationDelay:"0.9s"},children:S("p",{className:"success-message",children:"You will receive a confirmation email shortly with your receipt and account details."})}),S("div",{className:"success-footer animate-fade-up",style:{animationDelay:"1s"},children:S(Gl,{to:"/dashboard",className:"success-button",children:"Go to Dashboard"})})]})}),Gke=tK("pk_test_51R0PouFKqSRL4Eus1nQLaIYdWsBCGb0rkCZeSXivdL1aI4zxn3bqQOGmXuxZRL9im9UTRmBZnujboCXn2Mwu97aG00QUvxvr91"),Hke=({plan:r,buyerDetails:e,setBuyerDetails:t,setPaymentSuccessful:n})=>{const i=cK(),s=oK(),[a,o]=P.useState(null),[l,c]=P.useState(!1),[u,f]=P.useState(null),[d,p]=P.useState(null),g=JSON.parse(localStorage.getItem("currentUser"));P.useEffect(()=>{fetch("https://styloftbackendnew-production.up.railway.app/payments/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:g.uid,planName:r.name,amount:r.price})}).then(b=>b.json()).then(b=>{b.clientSecret?o(b.clientSecret):f("Failed to get payment authorization.")}).catch(b=>{console.error("Error fetching clientSecret:",b),f("Payment service unavailable.")})},[r,g.uid]);const _=b=>{const{name:C,value:M}=b.target;t({...e,[C]:M})};return j("form",{onSubmit:async b=>{if(b.preventDefault(),c(!0),!i||!s||!a){f("Payment system is not ready. Please try again."),c(!1);return}const C=await i.confirmCardPayment(a,{payment_method:{card:s.getElement(DM),billing_details:{name:e.name,email:e.email}}});C.error?(f(C.error.message),c(!1)):n(!0)},className:"checkout-form animate-fade-up",children:[j("div",{className:"form-group animate-slide-in",style:{animationDelay:"0.1s"},children:[S("label",{className:"form-label",children:"Full Name"}),S("input",{type:"text",name:"name",className:`form-input ${d==="name"?"input-focused":""}`,value:e.name,onChange:_,required:!0,onFocus:()=>p("name"),onBlur:()=>p(null)})]}),j("div",{className:"form-group animate-slide-in",style:{animationDelay:"0.2s"},children:[S("label",{className:"form-label",children:"Email Address"}),S("input",{type:"email",name:"email",className:`form-input ${d==="email"?"input-focused":""}`,value:e.email,onChange:_,required:!0,onFocus:()=>p("email"),onBlur:()=>p(null)})]}),S("div",{className:`card-element-container animate-slide-in ${d==="card"?"input-focused":""}`,style:{animationDelay:"0.3s"},children:S(DM,{className:"card-input",onFocus:()=>p("card"),onBlur:()=>p(null),options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})}),u&&S("p",{className:"error-message animate-fade-in",children:u}),S("button",{type:"submit",disabled:!i||l,className:`payment-button payment-button-${r.color} animate-fade-up`,style:{animationDelay:"0.4s"},children:l?j("span",{className:"button-loading",children:[S("span",{className:"loading-spinner"}),"Processing..."]}):"Subscribe Now"})]})},Wke=()=>{const{planId:r}=FM(),[e,t]=P.useState(!1),[n,i]=P.useState({name:"",email:""}),a=(()=>{switch(r){case"pro":return{name:"Silver Plan",price:3,color:"silver"};case"commercial":return{name:"Gold Plan",price:20,color:"gold"};default:return{name:"Bronze Plan",price:0,color:"bronze"}}})(),o=a.price*1.1;return e?S(Vke,{orderDetails:{planName:a.name,amount:o.toFixed(2)},onContinueShopping:()=>t(!1),onViewOrder:()=>t(!1)}):j("div",{className:"payment-container",children:[j("div",{className:"payment-header animate-fade-down",children:[S("h1",{className:"payment-title",children:"Complete Your Purchase"}),S("p",{className:"payment-subtitle",children:"Please review your order and enter your payment details"})]}),j("div",{className:"payment-content",children:[S("div",{className:"payment-form-container animate-slide-in-left",children:j("div",{className:`payment-card payment-card-${a.color}`,children:[j("div",{className:"card-header",children:[S("h2",{className:"card-title",children:"Payment Details"}),S("p",{className:"card-description",children:"Enter your card information securely"})]}),S(hP,{stripe:Gke,children:S(Hke,{plan:a,buyerDetails:n,setBuyerDetails:i,setPaymentSuccessful:t})})]})}),S("div",{className:"order-summary-container animate-slide-in-right",children:j("div",{className:`order-card order-card-${a.color}`,children:[S("div",{className:"card-header",children:S("h2",{className:"card-title",children:"Order Summary"})}),j("div",{className:"card-content",children:[j("div",{className:"summary-item animate-fade-in",style:{animationDelay:"0.4s"},children:[S("h3",{className:`summary-title summary-title-${a.color}`,children:a.name}),S("p",{className:"summary-description",children:"Monthly subscription"})]}),S("div",{className:"summary-divider"}),j("div",{className:"summary-row animate-fade-in",style:{animationDelay:"0.5s"},children:[S("span",{children:"Subtotal"}),j("span",{children:["$",a.price.toFixed(2)]})]}),j("div",{className:"summary-row animate-fade-in",style:{animationDelay:"0.6s"},children:[S("span",{children:"Tax"}),j("span",{children:["$",(a.price*.1).toFixed(2)]})]}),S("div",{className:"summary-divider"}),j("div",{className:"summary-row summary-total animate-fade-in",style:{animationDelay:"0.7s"},children:[S("span",{children:"Total"}),j("span",{className:"price-pulse",children:["$",o.toFixed(2),"/month"]})]}),S("div",{className:"terms-text animate-fade-in",style:{animationDelay:"0.8s"},children:"By completing this purchase, you agree to our Terms of Service and Privacy Policy."})]})]})})]})]})};function Yke(){const{id:r}=FM(),[e,t]=P.useState([]),[n,i]=P.useState(!0),[s,a]=P.useState(""),[o,l]=P.useState(null),[c,u]=P.useState(!1),[f,d]=P.useState(null),[p,g]=P.useState(null),_=JSON.parse(localStorage.getItem("currentUser"));P.useEffect(()=>{(async()=>{try{const O=await fetch(`https://styloftbackendnew-production.up.railway.app/contest/${r}`);if(!O.ok)throw new Error("Failed to fetch contest");const R=await O.json();l(R),g(R.winner)}catch(O){console.error("Error fetching contest:",O),a("Failed to load contest details")}})()},[r]),P.useEffect(()=>{(async()=>{i(!0);try{const O=await fetch(`https://styloftbackendnew-production.up.railway.app/submission/contest/${r}/favorites`);if(!O.ok)throw new Error(`Failed to fetch favorite submissions: ${O.statusText}`);const R=await O.json();t(R)}catch(O){console.error("Error fetching favorite submissions:",O),a(O.message||"Failed to load favorite submissions")}finally{i(!1)}})()},[r]);const w=async k=>{if(A)try{const O=await fetch(`https://styloftbackendnew-production.up.railway.app/contest/${r}/winner`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({winnerId:k})});if(!O.ok)throw new Error("Failed to set winner");const R=await O.json();g(k);const I=e.find(D=>D.id===k);alert(`${I.userName}'s submission has been selected as the winner!`)}catch(O){console.error("Error selecting winner:",O),alert("Failed to select winner. Please try again.")}},b=k=>{d(k),u(!0)},C=()=>{u(!1),d(null)},M=({rating:k})=>j("div",{className:"star-rating",children:[[1,2,3,4,5].map(O=>S(Fm,{size:18,fill:O<=k?"#f59e0b":"none",stroke:O<=k?"#f59e0b":"#9ca3af",className:"star-readonly"},O)),S("span",{className:"rating-value",children:k?k.toFixed(1):"Not rated"})]}),A=o&&_&&_.uid===o.createdBy;return P.useEffect(()=>{o&&_&&_.uid!==o.createdBy&&(window.location.href=`/contest/${r}`)},[o,_,r]),n?j("div",{className:"contest-loading",children:[S("div",{className:"contest-loader"}),S("p",{children:"Loading favorite submissions..."})]}):s?j("div",{className:"error-container",children:[S("p",{className:"error-message",children:s}),S(Gl,{to:`/contest/${r}`,className:"back-link",children:"Back to Contest"})]}):j("div",{className:"favorite-submission-page",children:[j("div",{className:"contest-header",children:[S("h1",{className:"contest-header-title",children:o?`${o.title} - Favorites`:"Favorite Submissions"}),j(Gl,{to:`/contest/${r}`,className:"back-link",children:[S(gre,{size:16}),S("span",{children:"Back to Contest"})]})]}),j("div",{className:"submission-gallery",children:[j("h2",{className:"gallery-title",children:[S(S1,{size:20}),j("span",{children:["Favorite Submissions (",e.length,")"]})]}),e.length===0?S("div",{className:"no-submissions",children:S("p",{children:"No favorite submissions yet. Mark submissions as favorites from the contest page."})}):S("div",{className:"submission-cards",children:e.map(k=>j("div",{className:"submission-card",children:[j("div",{className:"submission-image-container",onClick:()=>b(k),children:[S("img",{src:k.fileUrl||"/placeholder.svg",alt:"Submission",className:"submission-image"}),p===k.id&&j("div",{className:"winner-badge",children:[S(ax,{size:16}),S("span",{children:"Winner"})]})]}),j("div",{className:"submission-info",children:[j("div",{className:"submission-user",children:[S(iD,{size:16,className:"user-icon"}),S("span",{children:k.userName})]}),S(M,{rating:k.rating||0}),k.message&&S("p",{className:"submission-message",children:k.message}),A&&j("button",{className:`crown-icon ${p===k.id?"selected":""}`,onClick:O=>{O.stopPropagation(),w(k.id)},children:[S(ax,{size:16}),S("span",{children:p===k.id?"Selected as Winner":"Select as Winner"})]})]})]},k.id))})]}),c&&f&&S("div",{className:"modal-overlay",onClick:C,children:j("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[S("button",{className:"modal-close-btn",onClick:C,children:S(Oc,{size:24})}),j("div",{className:"modal-body",children:[S("img",{src:f.fileUrl||"/placeholder.svg",alt:"Submission",className:"modal-image"}),j("div",{className:"modal-info",children:[S("h3",{children:f.userName}),f.message&&S("p",{children:f.message}),p===f.id&&j("div",{className:"winner-badge-modal",children:[S(ax,{size:16}),S("span",{children:"Contest Winner"})]})]})]})]})})]})}function Jke(){const r=ad(),e=["/login","/register"],t=["/login","/register"];return j(Br,{children:[!e.includes(r.pathname)&&S(aDe,{}),j(m5,{children:[S(ns,{path:"/",element:S(use,{})}),S(ns,{path:"/login",element:S(q1e,{})}),S(ns,{path:"/register",element:S(Z1e,{})}),S(ns,{path:"/stylesociety",element:S(K1e,{})}),S(ns,{path:"/stylestudio",element:S(BIe,{})}),S(ns,{path:"/styleMarket",element:S(UNe,{})}),S(ns,{path:"/contest/*",element:S(n3e,{})}),S(ns,{path:"/contest/:id/favorites",element:S(Yke,{})}),S(ns,{path:"/styleMarket/add-shop",element:S(uK,{})}),S(ns,{path:"/Profile",element:S(WI,{})}),S(ns,{path:"/request-form",element:S(tDe,{})}),S(ns,{path:"/DashBoard",element:S(QNe,{})}),S(ns,{path:"/sub-plans",element:S(VNe,{})}),S(ns,{path:"/payment/:planId",element:S(Wke,{})}),S(ns,{path:"/profile",element:S(WI,{})}),S(ns,{path:"/profile/:id",element:S(WI,{})}),S(ns,{path:"*",element:S(eZ,{to:"/"})})]}),!t.includes(r.pathname)&&S(rDe,{})]})}function Xke(){return S(CZ,{children:S(v3e,{store:oDe,children:S(Jke,{})})})}fq.createRoot(document.getElementById("root")).render(S(P.StrictMode,{children:S(Xke,{})}));
